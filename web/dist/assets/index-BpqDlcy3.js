var DC=Object.defineProperty;var FC=(e,t,r)=>t in e?DC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pe=(e,t,r)=>FC(e,typeof t!="symbol"?t+"":t,r);function zC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var BC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Aj={exports:{}},dm={},Mj={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),$C=Symbol.for("react.portal"),UC=Symbol.for("react.fragment"),VC=Symbol.for("react.strict_mode"),HC=Symbol.for("react.profiler"),WC=Symbol.for("react.provider"),qC=Symbol.for("react.context"),KC=Symbol.for("react.forward_ref"),ZC=Symbol.for("react.suspense"),GC=Symbol.for("react.memo"),YC=Symbol.for("react.lazy"),Gb=Symbol.iterator;function JC(e){return e===null||typeof e!="object"?null:(e=Gb&&e[Gb]||e["@@iterator"],typeof e=="function"?e:null)}var Oj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rj=Object.assign,Dj={};function Mo(e,t,r){this.props=e,this.context=t,this.refs=Dj,this.updater=r||Oj}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fj(){}Fj.prototype=Mo.prototype;function Z0(e,t,r){this.props=e,this.context=t,this.refs=Dj,this.updater=r||Oj}var G0=Z0.prototype=new Fj;G0.constructor=Z0;Rj(G0,Mo.prototype);G0.isPureReactComponent=!0;var Yb=Array.isArray,zj=Object.prototype.hasOwnProperty,Y0={current:null},Bj={key:!0,ref:!0,__self:!0,__source:!0};function $j(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)zj.call(t,n)&&!Bj.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var d=Array(c),h=0;h<c;h++)d[h]=arguments[h+2];a.children=d}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:Wc,type:e,key:i,ref:o,props:a,_owner:Y0.current}}function XC(e,t){return{$$typeof:Wc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function J0(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wc}function QC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Jb=/\/+/g;function Vf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QC(""+e.key):t.toString(36)}function du(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Wc:case $C:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Vf(o,0):n,Yb(a)?(r="",e!=null&&(r=e.replace(Jb,"$&/")+"/"),du(a,t,r,"",function(h){return h})):a!=null&&(J0(a)&&(a=XC(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Jb,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Yb(e))for(var c=0;c<e.length;c++){i=e[c];var d=n+Vf(i,c);o+=du(i,t,r,d,a)}else if(d=JC(e),typeof d=="function")for(e=d.call(e),c=0;!(i=e.next()).done;)i=i.value,d=n+Vf(i,c++),o+=du(i,t,r,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Sd(e,t,r){if(e==null)return e;var n=[],a=0;return du(e,n,"","",function(i){return t.call(r,i,a++)}),n}function e6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _r={current:null},uu={transition:null},t6={ReactCurrentDispatcher:_r,ReactCurrentBatchConfig:uu,ReactCurrentOwner:Y0};function Uj(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Sd,forEach:function(e,t,r){Sd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Sd(e,function(){t++}),t},toArray:function(e){return Sd(e,function(t){return t})||[]},only:function(e){if(!J0(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$e.Component=Mo;$e.Fragment=UC;$e.Profiler=HC;$e.PureComponent=Z0;$e.StrictMode=VC;$e.Suspense=ZC;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t6;$e.act=Uj;$e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Rj({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Y0.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)zj.call(t,d)&&!Bj.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){c=Array(d);for(var h=0;h<d;h++)c[h]=arguments[h+2];n.children=c}return{$$typeof:Wc,type:e.type,key:a,ref:i,props:n,_owner:o}};$e.createContext=function(e){return e={$$typeof:qC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:WC,_context:e},e.Consumer=e};$e.createElement=$j;$e.createFactory=function(e){var t=$j.bind(null,e);return t.type=e,t};$e.createRef=function(){return{current:null}};$e.forwardRef=function(e){return{$$typeof:KC,render:e}};$e.isValidElement=J0;$e.lazy=function(e){return{$$typeof:YC,_payload:{_status:-1,_result:e},_init:e6}};$e.memo=function(e,t){return{$$typeof:GC,type:e,compare:t===void 0?null:t}};$e.startTransition=function(e){var t=uu.transition;uu.transition={};try{e()}finally{uu.transition=t}};$e.unstable_act=Uj;$e.useCallback=function(e,t){return _r.current.useCallback(e,t)};$e.useContext=function(e){return _r.current.useContext(e)};$e.useDebugValue=function(){};$e.useDeferredValue=function(e){return _r.current.useDeferredValue(e)};$e.useEffect=function(e,t){return _r.current.useEffect(e,t)};$e.useId=function(){return _r.current.useId()};$e.useImperativeHandle=function(e,t,r){return _r.current.useImperativeHandle(e,t,r)};$e.useInsertionEffect=function(e,t){return _r.current.useInsertionEffect(e,t)};$e.useLayoutEffect=function(e,t){return _r.current.useLayoutEffect(e,t)};$e.useMemo=function(e,t){return _r.current.useMemo(e,t)};$e.useReducer=function(e,t,r){return _r.current.useReducer(e,t,r)};$e.useRef=function(e){return _r.current.useRef(e)};$e.useState=function(e){return _r.current.useState(e)};$e.useSyncExternalStore=function(e,t,r){return _r.current.useSyncExternalStore(e,t,r)};$e.useTransition=function(){return _r.current.useTransition()};$e.version="18.3.1";Mj.exports=$e;var S=Mj.exports;const bt=K0(S),r6=zC({__proto__:null,default:bt},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s6=S,n6=Symbol.for("react.element"),a6=Symbol.for("react.fragment"),i6=Object.prototype.hasOwnProperty,o6=s6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l6={key:!0,ref:!0,__self:!0,__source:!0};function Vj(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)i6.call(t,n)&&!l6.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:n6,type:e,key:i,ref:o,props:a,_owner:o6.current}}dm.Fragment=a6;dm.jsx=Vj;dm.jsxs=Vj;Aj.exports=dm;var s=Aj.exports,hp={},Hj={exports:{}},es={},Wj={exports:{}},qj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,q){var Q=O.length;O.push(q);e:for(;0<Q;){var le=Q-1>>>1,V=O[le];if(0<a(V,q))O[le]=q,O[Q]=V,Q=le;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var q=O[0],Q=O.pop();if(Q!==q){O[0]=Q;e:for(var le=0,V=O.length,ne=V>>>1;le<ne;){var pe=2*(le+1)-1,ye=O[pe],z=pe+1,ge=O[z];if(0>a(ye,Q))z<V&&0>a(ge,ye)?(O[le]=ge,O[z]=Q,le=z):(O[le]=ye,O[pe]=Q,le=pe);else if(z<V&&0>a(ge,Q))O[le]=ge,O[z]=Q,le=z;else break e}}return q}function a(O,q){var Q=O.sortIndex-q.sortIndex;return Q!==0?Q:O.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],h=[],m=1,g=null,p=3,v=!1,x=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(O){for(var q=r(h);q!==null;){if(q.callback===null)n(h);else if(q.startTime<=O)n(h),q.sortIndex=q.expirationTime,t(d,q);else break;q=r(h)}}function C(O){if(w=!1,N(O),!x)if(r(d)!==null)x=!0,G(P);else{var q=r(h);q!==null&&R(C,q.startTime-O)}}function P(O,q){x=!1,w&&(w=!1,k(M),M=-1),v=!0;var Q=p;try{for(N(q),g=r(d);g!==null&&(!(g.expirationTime>q)||O&&!J());){var le=g.callback;if(typeof le=="function"){g.callback=null,p=g.priorityLevel;var V=le(g.expirationTime<=q);q=e.unstable_now(),typeof V=="function"?g.callback=V:g===r(d)&&n(d),N(q)}else n(d);g=r(d)}if(g!==null)var ne=!0;else{var pe=r(h);pe!==null&&R(C,pe.startTime-q),ne=!1}return ne}finally{g=null,p=Q,v=!1}}var E=!1,I=null,M=-1,T=5,H=-1;function J(){return!(e.unstable_now()-H<T)}function $(){if(I!==null){var O=e.unstable_now();H=O;var q=!0;try{q=I(!0,O)}finally{q?D():(E=!1,I=null)}}else E=!1}var D;if(typeof j=="function")D=function(){j($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,X=W.port2;W.port1.onmessage=$,D=function(){X.postMessage(null)}}else D=function(){y($,0)};function G(O){I=O,E||(E=!0,D())}function R(O,q){M=y(function(){O(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){x||v||(x=!0,G(P))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(O){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var Q=p;p=q;try{return O()}finally{p=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Q=p;p=O;try{return q()}finally{p=Q}},e.unstable_scheduleCallback=function(O,q,Q){var le=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,O){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=Q+V,O={id:m++,callback:q,priorityLevel:O,startTime:Q,expirationTime:V,sortIndex:-1},Q>le?(O.sortIndex=Q,t(h,O),r(d)===null&&O===r(h)&&(w?(k(M),M=-1):w=!0,R(C,Q-le))):(O.sortIndex=V,t(d,O),x||v||(x=!0,G(P))),O},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(O){var q=p;return function(){var Q=p;p=q;try{return O.apply(this,arguments)}finally{p=Q}}}})(qj);Wj.exports=qj;var c6=Wj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d6=S,Xr=c6;function he(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kj=new Set,mc={};function _i(e,t){bo(e,t),bo(e+"Capture",t)}function bo(e,t){for(mc[e]=t,e=0;e<t.length;e++)Kj.add(t[e])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mp=Object.prototype.hasOwnProperty,u6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xb={},Qb={};function h6(e){return mp.call(Qb,e)?!0:mp.call(Xb,e)?!1:u6.test(e)?Qb[e]=!0:(Xb[e]=!0,!1)}function m6(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function f6(e,t,r,n){if(t===null||typeof t>"u"||m6(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Sr(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ar[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ar[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ar[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ar[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ar[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ar[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ar[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ar[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ar[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var X0=/[\-:]([a-z])/g;function Q0(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(X0,Q0);ar[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(X0,Q0);ar[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(X0,Q0);ar[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ar[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});ar.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ar[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});function ex(e,t,r,n){var a=ar.hasOwnProperty(t)?ar[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(f6(t,r,a,n)&&(r=null),n||a===null?h6(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Hn=d6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cd=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),Hi=Symbol.for("react.fragment"),tx=Symbol.for("react.strict_mode"),fp=Symbol.for("react.profiler"),Zj=Symbol.for("react.provider"),Gj=Symbol.for("react.context"),rx=Symbol.for("react.forward_ref"),gp=Symbol.for("react.suspense"),pp=Symbol.for("react.suspense_list"),sx=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),Yj=Symbol.for("react.offscreen"),ev=Symbol.iterator;function sl(e){return e===null||typeof e!="object"?null:(e=ev&&e[ev]||e["@@iterator"],typeof e=="function"?e:null)}var _t=Object.assign,Hf;function bl(e){if(Hf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Hf=t&&t[1]||""}return`
`+Hf+e}var Wf=!1;function qf(e,t){if(!e||Wf)return"";Wf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,c=i.length-1;1<=o&&0<=c&&a[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==i[c]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=c);break}}}finally{Wf=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?bl(e):""}function g6(e){switch(e.tag){case 5:return bl(e.type);case 16:return bl("Lazy");case 13:return bl("Suspense");case 19:return bl("SuspenseList");case 0:case 2:case 15:return e=qf(e.type,!1),e;case 11:return e=qf(e.type.render,!1),e;case 1:return e=qf(e.type,!0),e;default:return""}}function xp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hi:return"Fragment";case Vi:return"Portal";case fp:return"Profiler";case tx:return"StrictMode";case gp:return"Suspense";case pp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gj:return(e.displayName||"Context")+".Consumer";case Zj:return(e._context.displayName||"Context")+".Provider";case rx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sx:return t=e.displayName||null,t!==null?t:xp(e.type)||"Memo";case Qn:t=e._payload,e=e._init;try{return xp(e(t))}catch{}}return null}function p6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xp(t);case 8:return t===tx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function x6(e){var t=Jj(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pd(e){e._valueTracker||(e._valueTracker=x6(e))}function Xj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Jj(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function dh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yp(e,t){var r=t.checked;return _t({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function tv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Sa(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qj(e,t){t=t.checked,t!=null&&ex(e,"checked",t,!1)}function bp(e,t){Qj(e,t);var r=Sa(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vp(e,t.type,r):t.hasOwnProperty("defaultValue")&&vp(e,t.type,Sa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function rv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function vp(e,t,r){(t!=="number"||dh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var vl=Array.isArray;function no(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Sa(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function wp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(he(91));return _t({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(he(92));if(vl(r)){if(1<r.length)throw Error(he(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Sa(r)}}function e1(e,t){var r=Sa(t.value),n=Sa(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function nv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function t1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?t1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ed,r1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ed=Ed||document.createElement("div"),Ed.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ed.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y6=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(e){y6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),El[t]=El[e]})});function s1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||El.hasOwnProperty(e)&&El[e]?(""+t).trim():t+"px"}function n1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=s1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var b6=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jp(e,t){if(t){if(b6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(he(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(he(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(he(61))}if(t.style!=null&&typeof t.style!="object")throw Error(he(62))}}function Np(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _p=null;function nx(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sp=null,ao=null,io=null;function av(e){if(e=Zc(e)){if(typeof Sp!="function")throw Error(he(280));var t=e.stateNode;t&&(t=gm(t),Sp(e.stateNode,e.type,t))}}function a1(e){ao?io?io.push(e):io=[e]:ao=e}function i1(){if(ao){var e=ao,t=io;if(io=ao=null,av(e),t)for(e=0;e<t.length;e++)av(t[e])}}function o1(e,t){return e(t)}function l1(){}var Kf=!1;function c1(e,t,r){if(Kf)return e(t,r);Kf=!0;try{return o1(e,t,r)}finally{Kf=!1,(ao!==null||io!==null)&&(l1(),i1())}}function gc(e,t){var r=e.stateNode;if(r===null)return null;var n=gm(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(he(231,t,typeof r));return r}var Cp=!1;if(Fn)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Cp=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Cp=!1}function v6(e,t,r,n,a,i,o,c,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(m){this.onError(m)}}var Ll=!1,uh=null,hh=!1,Pp=null,w6={onError:function(e){Ll=!0,uh=e}};function k6(e,t,r,n,a,i,o,c,d){Ll=!1,uh=null,v6.apply(w6,arguments)}function j6(e,t,r,n,a,i,o,c,d){if(k6.apply(this,arguments),Ll){if(Ll){var h=uh;Ll=!1,uh=null}else throw Error(he(198));hh||(hh=!0,Pp=h)}}function Si(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function d1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function iv(e){if(Si(e)!==e)throw Error(he(188))}function N6(e){var t=e.alternate;if(!t){if(t=Si(e),t===null)throw Error(he(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return iv(a),e;if(i===n)return iv(a),t;i=i.sibling}throw Error(he(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,n=i;break}if(c===n){o=!0,n=a,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,n=a;break}if(c===n){o=!0,n=i,r=a;break}c=c.sibling}if(!o)throw Error(he(189))}}if(r.alternate!==n)throw Error(he(190))}if(r.tag!==3)throw Error(he(188));return r.stateNode.current===r?e:t}function u1(e){return e=N6(e),e!==null?h1(e):null}function h1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=h1(e);if(t!==null)return t;e=e.sibling}return null}var m1=Xr.unstable_scheduleCallback,ov=Xr.unstable_cancelCallback,_6=Xr.unstable_shouldYield,S6=Xr.unstable_requestPaint,Pt=Xr.unstable_now,C6=Xr.unstable_getCurrentPriorityLevel,ax=Xr.unstable_ImmediatePriority,f1=Xr.unstable_UserBlockingPriority,mh=Xr.unstable_NormalPriority,P6=Xr.unstable_LowPriority,g1=Xr.unstable_IdlePriority,um=null,rn=null;function E6(e){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(um,e,void 0,(e.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:I6,L6=Math.log,T6=Math.LN2;function I6(e){return e>>>=0,e===0?32:31-(L6(e)/T6|0)|0}var Ld=64,Td=4194304;function wl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~a;c!==0?n=wl(c):(i&=o,i!==0&&(n=wl(i)))}else o=r&~a,o!==0?n=wl(o):i!==0&&(n=wl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Rs(t),a=1<<r,n|=e[r],t&=~a;return n}function A6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M6(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Rs(i),c=1<<o,d=a[o];d===-1?(!(c&r)||c&n)&&(a[o]=A6(c,t)):d<=t&&(e.expiredLanes|=c),i&=~c}}function Ep(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function p1(){var e=Ld;return Ld<<=1,!(Ld&4194240)&&(Ld=64),e}function Zf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rs(t),e[t]=r}function O6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Rs(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function ix(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Rs(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var rt=0;function x1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var y1,ox,b1,v1,w1,Lp=!1,Id=[],ma=null,fa=null,ga=null,pc=new Map,xc=new Map,ta=[],R6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lv(e,t){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(t.pointerId)}}function al(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Zc(t),t!==null&&ox(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function D6(e,t,r,n,a){switch(t){case"focusin":return ma=al(ma,e,t,r,n,a),!0;case"dragenter":return fa=al(fa,e,t,r,n,a),!0;case"mouseover":return ga=al(ga,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return pc.set(i,al(pc.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,xc.set(i,al(xc.get(i)||null,e,t,r,n,a)),!0}return!1}function k1(e){var t=ti(e.target);if(t!==null){var r=Si(t);if(r!==null){if(t=r.tag,t===13){if(t=d1(r),t!==null){e.blockedOn=t,w1(e.priority,function(){b1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Tp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);_p=n,r.target.dispatchEvent(n),_p=null}else return t=Zc(r),t!==null&&ox(t),e.blockedOn=r,!1;t.shift()}return!0}function cv(e,t,r){hu(e)&&r.delete(t)}function F6(){Lp=!1,ma!==null&&hu(ma)&&(ma=null),fa!==null&&hu(fa)&&(fa=null),ga!==null&&hu(ga)&&(ga=null),pc.forEach(cv),xc.forEach(cv)}function il(e,t){e.blockedOn===t&&(e.blockedOn=null,Lp||(Lp=!0,Xr.unstable_scheduleCallback(Xr.unstable_NormalPriority,F6)))}function yc(e){function t(a){return il(a,e)}if(0<Id.length){il(Id[0],e);for(var r=1;r<Id.length;r++){var n=Id[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ma!==null&&il(ma,e),fa!==null&&il(fa,e),ga!==null&&il(ga,e),pc.forEach(t),xc.forEach(t),r=0;r<ta.length;r++)n=ta[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ta.length&&(r=ta[0],r.blockedOn===null);)k1(r),r.blockedOn===null&&ta.shift()}var oo=Hn.ReactCurrentBatchConfig,gh=!0;function z6(e,t,r,n){var a=rt,i=oo.transition;oo.transition=null;try{rt=1,lx(e,t,r,n)}finally{rt=a,oo.transition=i}}function B6(e,t,r,n){var a=rt,i=oo.transition;oo.transition=null;try{rt=4,lx(e,t,r,n)}finally{rt=a,oo.transition=i}}function lx(e,t,r,n){if(gh){var a=Tp(e,t,r,n);if(a===null)ng(e,t,n,ph,r),lv(e,n);else if(D6(a,e,t,r,n))n.stopPropagation();else if(lv(e,n),t&4&&-1<R6.indexOf(e)){for(;a!==null;){var i=Zc(a);if(i!==null&&y1(i),i=Tp(e,t,r,n),i===null&&ng(e,t,n,ph,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else ng(e,t,n,null,r)}}var ph=null;function Tp(e,t,r,n){if(ph=null,e=nx(n),e=ti(e),e!==null)if(t=Si(e),t===null)e=null;else if(r=t.tag,r===13){if(e=d1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ph=e,null}function j1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C6()){case ax:return 1;case f1:return 4;case mh:case P6:return 16;case g1:return 536870912;default:return 16}default:return 16}}var ia=null,cx=null,mu=null;function N1(){if(mu)return mu;var e,t=cx,r=t.length,n,a="value"in ia?ia.value:ia.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return mu=a.slice(e,1<n?1-n:void 0)}function fu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ad(){return!0}function dv(){return!1}function ts(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ad:dv,this.isPropagationStopped=dv,this}return _t(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),t}var Oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dx=ts(Oo),Kc=_t({},Oo,{view:0,detail:0}),$6=ts(Kc),Gf,Yf,ol,hm=_t({},Kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ux,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ol&&(ol&&e.type==="mousemove"?(Gf=e.screenX-ol.screenX,Yf=e.screenY-ol.screenY):Yf=Gf=0,ol=e),Gf)},movementY:function(e){return"movementY"in e?e.movementY:Yf}}),uv=ts(hm),U6=_t({},hm,{dataTransfer:0}),V6=ts(U6),H6=_t({},Kc,{relatedTarget:0}),Jf=ts(H6),W6=_t({},Oo,{animationName:0,elapsedTime:0,pseudoElement:0}),q6=ts(W6),K6=_t({},Oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Z6=ts(K6),G6=_t({},Oo,{data:0}),hv=ts(G6),Y6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Q6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=X6[e])?!!t[e]:!1}function ux(){return Q6}var e3=_t({},Kc,{key:function(e){if(e.key){var t=Y6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?J6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ux,charCode:function(e){return e.type==="keypress"?fu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t3=ts(e3),r3=_t({},hm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mv=ts(r3),s3=_t({},Kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ux}),n3=ts(s3),a3=_t({},Oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),i3=ts(a3),o3=_t({},hm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),l3=ts(o3),c3=[9,13,27,32],hx=Fn&&"CompositionEvent"in window,Tl=null;Fn&&"documentMode"in document&&(Tl=document.documentMode);var d3=Fn&&"TextEvent"in window&&!Tl,_1=Fn&&(!hx||Tl&&8<Tl&&11>=Tl),fv=" ",gv=!1;function S1(e,t){switch(e){case"keyup":return c3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wi=!1;function u3(e,t){switch(e){case"compositionend":return C1(t);case"keypress":return t.which!==32?null:(gv=!0,fv);case"textInput":return e=t.data,e===fv&&gv?null:e;default:return null}}function h3(e,t){if(Wi)return e==="compositionend"||!hx&&S1(e,t)?(e=N1(),mu=cx=ia=null,Wi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _1&&t.locale!=="ko"?null:t.data;default:return null}}var m3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m3[e.type]:t==="textarea"}function P1(e,t,r,n){a1(n),t=xh(t,"onChange"),0<t.length&&(r=new dx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Il=null,bc=null;function f3(e){z1(e,0)}function mm(e){var t=Zi(e);if(Xj(t))return e}function g3(e,t){if(e==="change")return t}var E1=!1;if(Fn){var Xf;if(Fn){var Qf="oninput"in document;if(!Qf){var xv=document.createElement("div");xv.setAttribute("oninput","return;"),Qf=typeof xv.oninput=="function"}Xf=Qf}else Xf=!1;E1=Xf&&(!document.documentMode||9<document.documentMode)}function yv(){Il&&(Il.detachEvent("onpropertychange",L1),bc=Il=null)}function L1(e){if(e.propertyName==="value"&&mm(bc)){var t=[];P1(t,bc,e,nx(e)),c1(f3,t)}}function p3(e,t,r){e==="focusin"?(yv(),Il=t,bc=r,Il.attachEvent("onpropertychange",L1)):e==="focusout"&&yv()}function x3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mm(bc)}function y3(e,t){if(e==="click")return mm(t)}function b3(e,t){if(e==="input"||e==="change")return mm(t)}function v3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fs=typeof Object.is=="function"?Object.is:v3;function vc(e,t){if(Fs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!mp.call(t,a)||!Fs(e[a],t[a]))return!1}return!0}function bv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vv(e,t){var r=bv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=bv(r)}}function T1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?T1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function I1(){for(var e=window,t=dh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=dh(e.document)}return t}function mx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w3(e){var t=I1(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&T1(r.ownerDocument.documentElement,r)){if(n!==null&&mx(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=vv(r,i);var o=vv(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var k3=Fn&&"documentMode"in document&&11>=document.documentMode,qi=null,Ip=null,Al=null,Ap=!1;function wv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ap||qi==null||qi!==dh(n)||(n=qi,"selectionStart"in n&&mx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Al&&vc(Al,n)||(Al=n,n=xh(Ip,"onSelect"),0<n.length&&(t=new dx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=qi)))}function Md(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ki={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},eg={},A1={};Fn&&(A1=document.createElement("div").style,"AnimationEvent"in window||(delete Ki.animationend.animation,delete Ki.animationiteration.animation,delete Ki.animationstart.animation),"TransitionEvent"in window||delete Ki.transitionend.transition);function fm(e){if(eg[e])return eg[e];if(!Ki[e])return e;var t=Ki[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in A1)return eg[e]=t[r];return e}var M1=fm("animationend"),O1=fm("animationiteration"),R1=fm("animationstart"),D1=fm("transitionend"),F1=new Map,kv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Aa(e,t){F1.set(e,t),_i(t,[e])}for(var tg=0;tg<kv.length;tg++){var rg=kv[tg],j3=rg.toLowerCase(),N3=rg[0].toUpperCase()+rg.slice(1);Aa(j3,"on"+N3)}Aa(M1,"onAnimationEnd");Aa(O1,"onAnimationIteration");Aa(R1,"onAnimationStart");Aa("dblclick","onDoubleClick");Aa("focusin","onFocus");Aa("focusout","onBlur");Aa(D1,"onTransitionEnd");bo("onMouseEnter",["mouseout","mouseover"]);bo("onMouseLeave",["mouseout","mouseover"]);bo("onPointerEnter",["pointerout","pointerover"]);bo("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_3=new Set("cancel close invalid load scroll toggle".split(" ").concat(kl));function jv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,j6(n,t,void 0,e),e.currentTarget=null}function z1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var c=n[o],d=c.instance,h=c.currentTarget;if(c=c.listener,d!==i&&a.isPropagationStopped())break e;jv(a,c,h),i=d}else for(o=0;o<n.length;o++){if(c=n[o],d=c.instance,h=c.currentTarget,c=c.listener,d!==i&&a.isPropagationStopped())break e;jv(a,c,h),i=d}}}if(hh)throw e=Pp,hh=!1,Pp=null,e}function mt(e,t){var r=t[Fp];r===void 0&&(r=t[Fp]=new Set);var n=e+"__bubble";r.has(n)||(B1(t,e,2,!1),r.add(n))}function sg(e,t,r){var n=0;t&&(n|=4),B1(r,e,n,t)}var Od="_reactListening"+Math.random().toString(36).slice(2);function wc(e){if(!e[Od]){e[Od]=!0,Kj.forEach(function(r){r!=="selectionchange"&&(_3.has(r)||sg(r,!1,e),sg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Od]||(t[Od]=!0,sg("selectionchange",!1,t))}}function B1(e,t,r,n){switch(j1(t)){case 1:var a=z6;break;case 4:a=B6;break;default:a=lx}r=a.bind(null,t,r,e),a=void 0,!Cp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function ng(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;c!==null;){if(o=ti(c),o===null)return;if(d=o.tag,d===5||d===6){n=i=o;continue e}c=c.parentNode}}n=n.return}c1(function(){var h=i,m=nx(r),g=[];e:{var p=F1.get(e);if(p!==void 0){var v=dx,x=e;switch(e){case"keypress":if(fu(r)===0)break e;case"keydown":case"keyup":v=t3;break;case"focusin":x="focus",v=Jf;break;case"focusout":x="blur",v=Jf;break;case"beforeblur":case"afterblur":v=Jf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=uv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=V6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=n3;break;case M1:case O1:case R1:v=q6;break;case D1:v=i3;break;case"scroll":v=$6;break;case"wheel":v=l3;break;case"copy":case"cut":case"paste":v=Z6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=mv}var w=(t&4)!==0,y=!w&&e==="scroll",k=w?p!==null?p+"Capture":null:p;w=[];for(var j=h,N;j!==null;){N=j;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,k!==null&&(C=gc(j,k),C!=null&&w.push(kc(j,C,N)))),y)break;j=j.return}0<w.length&&(p=new v(p,x,null,r,m),g.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&r!==_p&&(x=r.relatedTarget||r.fromElement)&&(ti(x)||x[zn]))break e;if((v||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,v?(x=r.relatedTarget||r.toElement,v=h,x=x?ti(x):null,x!==null&&(y=Si(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=h),v!==x)){if(w=uv,C="onMouseLeave",k="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(w=mv,C="onPointerLeave",k="onPointerEnter",j="pointer"),y=v==null?p:Zi(v),N=x==null?p:Zi(x),p=new w(C,j+"leave",v,r,m),p.target=y,p.relatedTarget=N,C=null,ti(m)===h&&(w=new w(k,j+"enter",x,r,m),w.target=N,w.relatedTarget=y,C=w),y=C,v&&x)t:{for(w=v,k=x,j=0,N=w;N;N=Di(N))j++;for(N=0,C=k;C;C=Di(C))N++;for(;0<j-N;)w=Di(w),j--;for(;0<N-j;)k=Di(k),N--;for(;j--;){if(w===k||k!==null&&w===k.alternate)break t;w=Di(w),k=Di(k)}w=null}else w=null;v!==null&&Nv(g,p,v,w,!1),x!==null&&y!==null&&Nv(g,y,x,w,!0)}}e:{if(p=h?Zi(h):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var P=g3;else if(pv(p))if(E1)P=b3;else{P=x3;var E=p3}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=y3);if(P&&(P=P(e,h))){P1(g,P,r,m);break e}E&&E(e,p,h),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&vp(p,"number",p.value)}switch(E=h?Zi(h):window,e){case"focusin":(pv(E)||E.contentEditable==="true")&&(qi=E,Ip=h,Al=null);break;case"focusout":Al=Ip=qi=null;break;case"mousedown":Ap=!0;break;case"contextmenu":case"mouseup":case"dragend":Ap=!1,wv(g,r,m);break;case"selectionchange":if(k3)break;case"keydown":case"keyup":wv(g,r,m)}var I;if(hx)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Wi?S1(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(_1&&r.locale!=="ko"&&(Wi||M!=="onCompositionStart"?M==="onCompositionEnd"&&Wi&&(I=N1()):(ia=m,cx="value"in ia?ia.value:ia.textContent,Wi=!0)),E=xh(h,M),0<E.length&&(M=new hv(M,e,null,r,m),g.push({event:M,listeners:E}),I?M.data=I:(I=C1(r),I!==null&&(M.data=I)))),(I=d3?u3(e,r):h3(e,r))&&(h=xh(h,"onBeforeInput"),0<h.length&&(m=new hv("onBeforeInput","beforeinput",null,r,m),g.push({event:m,listeners:h}),m.data=I))}z1(g,t)})}function kc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function xh(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=gc(e,r),i!=null&&n.unshift(kc(e,i,a)),i=gc(e,t),i!=null&&n.push(kc(e,i,a))),e=e.return}return n}function Di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nv(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var c=r,d=c.alternate,h=c.stateNode;if(d!==null&&d===n)break;c.tag===5&&h!==null&&(c=h,a?(d=gc(r,i),d!=null&&o.unshift(kc(r,d,c))):a||(d=gc(r,i),d!=null&&o.push(kc(r,d,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var S3=/\r\n?/g,C3=/\u0000|\uFFFD/g;function _v(e){return(typeof e=="string"?e:""+e).replace(S3,`
`).replace(C3,"")}function Rd(e,t,r){if(t=_v(t),_v(e)!==t&&r)throw Error(he(425))}function yh(){}var Mp=null,Op=null;function Rp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Dp=typeof setTimeout=="function"?setTimeout:void 0,P3=typeof clearTimeout=="function"?clearTimeout:void 0,Sv=typeof Promise=="function"?Promise:void 0,E3=typeof queueMicrotask=="function"?queueMicrotask:typeof Sv<"u"?function(e){return Sv.resolve(null).then(e).catch(L3)}:Dp;function L3(e){setTimeout(function(){throw e})}function ag(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),yc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);yc(t)}function pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),Js="__reactFiber$"+Ro,jc="__reactProps$"+Ro,zn="__reactContainer$"+Ro,Fp="__reactEvents$"+Ro,T3="__reactListeners$"+Ro,I3="__reactHandles$"+Ro;function ti(e){var t=e[Js];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zn]||r[Js]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Cv(e);e!==null;){if(r=e[Js])return r;e=Cv(e)}return t}e=r,r=e.parentNode}return null}function Zc(e){return e=e[Js]||e[zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(he(33))}function gm(e){return e[jc]||null}var zp=[],Gi=-1;function Ma(e){return{current:e}}function gt(e){0>Gi||(e.current=zp[Gi],zp[Gi]=null,Gi--)}function ht(e,t){Gi++,zp[Gi]=e.current,e.current=t}var Ca={},xr=Ma(Ca),Rr=Ma(!1),fi=Ca;function vo(e,t){var r=e.type.contextTypes;if(!r)return Ca;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Dr(e){return e=e.childContextTypes,e!=null}function bh(){gt(Rr),gt(xr)}function Pv(e,t,r){if(xr.current!==Ca)throw Error(he(168));ht(xr,t),ht(Rr,r)}function $1(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(he(108,p6(e)||"Unknown",a));return _t({},r,n)}function vh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,fi=xr.current,ht(xr,e),ht(Rr,Rr.current),!0}function Ev(e,t,r){var n=e.stateNode;if(!n)throw Error(he(169));r?(e=$1(e,t,fi),n.__reactInternalMemoizedMergedChildContext=e,gt(Rr),gt(xr),ht(xr,e)):gt(Rr),ht(Rr,r)}var En=null,pm=!1,ig=!1;function U1(e){En===null?En=[e]:En.push(e)}function A3(e){pm=!0,U1(e)}function Oa(){if(!ig&&En!==null){ig=!0;var e=0,t=rt;try{var r=En;for(rt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}En=null,pm=!1}catch(a){throw En!==null&&(En=En.slice(e+1)),m1(ax,Oa),a}finally{rt=t,ig=!1}}return null}var Yi=[],Ji=0,wh=null,kh=0,hs=[],ms=0,gi=null,In=1,An="";function Ya(e,t){Yi[Ji++]=kh,Yi[Ji++]=wh,wh=e,kh=t}function V1(e,t,r){hs[ms++]=In,hs[ms++]=An,hs[ms++]=gi,gi=e;var n=In;e=An;var a=32-Rs(n)-1;n&=~(1<<a),r+=1;var i=32-Rs(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,In=1<<32-Rs(t)+a|r<<a|n,An=i+e}else In=1<<i|r<<a|n,An=e}function fx(e){e.return!==null&&(Ya(e,1),V1(e,1,0))}function gx(e){for(;e===wh;)wh=Yi[--Ji],Yi[Ji]=null,kh=Yi[--Ji],Yi[Ji]=null;for(;e===gi;)gi=hs[--ms],hs[ms]=null,An=hs[--ms],hs[ms]=null,In=hs[--ms],hs[ms]=null}var Jr=null,Yr=null,vt=!1,Ts=null;function H1(e,t){var r=gs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Lv(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jr=e,Yr=pa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jr=e,Yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=gi!==null?{id:In,overflow:An}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Jr=e,Yr=null,!0):!1;default:return!1}}function Bp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $p(e){if(vt){var t=Yr;if(t){var r=t;if(!Lv(e,t)){if(Bp(e))throw Error(he(418));t=pa(r.nextSibling);var n=Jr;t&&Lv(e,t)?H1(n,r):(e.flags=e.flags&-4097|2,vt=!1,Jr=e)}}else{if(Bp(e))throw Error(he(418));e.flags=e.flags&-4097|2,vt=!1,Jr=e}}}function Tv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jr=e}function Dd(e){if(e!==Jr)return!1;if(!vt)return Tv(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Rp(e.type,e.memoizedProps)),t&&(t=Yr)){if(Bp(e))throw W1(),Error(he(418));for(;t;)H1(e,t),t=pa(t.nextSibling)}if(Tv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(he(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Yr=pa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Yr=null}}else Yr=Jr?pa(e.stateNode.nextSibling):null;return!0}function W1(){for(var e=Yr;e;)e=pa(e.nextSibling)}function wo(){Yr=Jr=null,vt=!1}function px(e){Ts===null?Ts=[e]:Ts.push(e)}var M3=Hn.ReactCurrentBatchConfig;function ll(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(he(309));var n=r.stateNode}if(!n)throw Error(he(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=a.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(he(284));if(!r._owner)throw Error(he(290,e))}return e}function Fd(e,t){throw e=Object.prototype.toString.call(t),Error(he(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Iv(e){var t=e._init;return t(e._payload)}function q1(e){function t(k,j){if(e){var N=k.deletions;N===null?(k.deletions=[j],k.flags|=16):N.push(j)}}function r(k,j){if(!e)return null;for(;j!==null;)t(k,j),j=j.sibling;return null}function n(k,j){for(k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function a(k,j){return k=va(k,j),k.index=0,k.sibling=null,k}function i(k,j,N){return k.index=N,e?(N=k.alternate,N!==null?(N=N.index,N<j?(k.flags|=2,j):N):(k.flags|=2,j)):(k.flags|=1048576,j)}function o(k){return e&&k.alternate===null&&(k.flags|=2),k}function c(k,j,N,C){return j===null||j.tag!==6?(j=mg(N,k.mode,C),j.return=k,j):(j=a(j,N),j.return=k,j)}function d(k,j,N,C){var P=N.type;return P===Hi?m(k,j,N.props.children,C,N.key):j!==null&&(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qn&&Iv(P)===j.type)?(C=a(j,N.props),C.ref=ll(k,j,N),C.return=k,C):(C=wu(N.type,N.key,N.props,null,k.mode,C),C.ref=ll(k,j,N),C.return=k,C)}function h(k,j,N,C){return j===null||j.tag!==4||j.stateNode.containerInfo!==N.containerInfo||j.stateNode.implementation!==N.implementation?(j=fg(N,k.mode,C),j.return=k,j):(j=a(j,N.children||[]),j.return=k,j)}function m(k,j,N,C,P){return j===null||j.tag!==7?(j=ci(N,k.mode,C,P),j.return=k,j):(j=a(j,N),j.return=k,j)}function g(k,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return j=mg(""+j,k.mode,N),j.return=k,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Cd:return N=wu(j.type,j.key,j.props,null,k.mode,N),N.ref=ll(k,null,j),N.return=k,N;case Vi:return j=fg(j,k.mode,N),j.return=k,j;case Qn:var C=j._init;return g(k,C(j._payload),N)}if(vl(j)||sl(j))return j=ci(j,k.mode,N,null),j.return=k,j;Fd(k,j)}return null}function p(k,j,N,C){var P=j!==null?j.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:c(k,j,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Cd:return N.key===P?d(k,j,N,C):null;case Vi:return N.key===P?h(k,j,N,C):null;case Qn:return P=N._init,p(k,j,P(N._payload),C)}if(vl(N)||sl(N))return P!==null?null:m(k,j,N,C,null);Fd(k,N)}return null}function v(k,j,N,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return k=k.get(N)||null,c(j,k,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Cd:return k=k.get(C.key===null?N:C.key)||null,d(j,k,C,P);case Vi:return k=k.get(C.key===null?N:C.key)||null,h(j,k,C,P);case Qn:var E=C._init;return v(k,j,N,E(C._payload),P)}if(vl(C)||sl(C))return k=k.get(N)||null,m(j,k,C,P,null);Fd(j,C)}return null}function x(k,j,N,C){for(var P=null,E=null,I=j,M=j=0,T=null;I!==null&&M<N.length;M++){I.index>M?(T=I,I=null):T=I.sibling;var H=p(k,I,N[M],C);if(H===null){I===null&&(I=T);break}e&&I&&H.alternate===null&&t(k,I),j=i(H,j,M),E===null?P=H:E.sibling=H,E=H,I=T}if(M===N.length)return r(k,I),vt&&Ya(k,M),P;if(I===null){for(;M<N.length;M++)I=g(k,N[M],C),I!==null&&(j=i(I,j,M),E===null?P=I:E.sibling=I,E=I);return vt&&Ya(k,M),P}for(I=n(k,I);M<N.length;M++)T=v(I,k,M,N[M],C),T!==null&&(e&&T.alternate!==null&&I.delete(T.key===null?M:T.key),j=i(T,j,M),E===null?P=T:E.sibling=T,E=T);return e&&I.forEach(function(J){return t(k,J)}),vt&&Ya(k,M),P}function w(k,j,N,C){var P=sl(N);if(typeof P!="function")throw Error(he(150));if(N=P.call(N),N==null)throw Error(he(151));for(var E=P=null,I=j,M=j=0,T=null,H=N.next();I!==null&&!H.done;M++,H=N.next()){I.index>M?(T=I,I=null):T=I.sibling;var J=p(k,I,H.value,C);if(J===null){I===null&&(I=T);break}e&&I&&J.alternate===null&&t(k,I),j=i(J,j,M),E===null?P=J:E.sibling=J,E=J,I=T}if(H.done)return r(k,I),vt&&Ya(k,M),P;if(I===null){for(;!H.done;M++,H=N.next())H=g(k,H.value,C),H!==null&&(j=i(H,j,M),E===null?P=H:E.sibling=H,E=H);return vt&&Ya(k,M),P}for(I=n(k,I);!H.done;M++,H=N.next())H=v(I,k,M,H.value,C),H!==null&&(e&&H.alternate!==null&&I.delete(H.key===null?M:H.key),j=i(H,j,M),E===null?P=H:E.sibling=H,E=H);return e&&I.forEach(function($){return t(k,$)}),vt&&Ya(k,M),P}function y(k,j,N,C){if(typeof N=="object"&&N!==null&&N.type===Hi&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Cd:e:{for(var P=N.key,E=j;E!==null;){if(E.key===P){if(P=N.type,P===Hi){if(E.tag===7){r(k,E.sibling),j=a(E,N.props.children),j.return=k,k=j;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Qn&&Iv(P)===E.type){r(k,E.sibling),j=a(E,N.props),j.ref=ll(k,E,N),j.return=k,k=j;break e}r(k,E);break}else t(k,E);E=E.sibling}N.type===Hi?(j=ci(N.props.children,k.mode,C,N.key),j.return=k,k=j):(C=wu(N.type,N.key,N.props,null,k.mode,C),C.ref=ll(k,j,N),C.return=k,k=C)}return o(k);case Vi:e:{for(E=N.key;j!==null;){if(j.key===E)if(j.tag===4&&j.stateNode.containerInfo===N.containerInfo&&j.stateNode.implementation===N.implementation){r(k,j.sibling),j=a(j,N.children||[]),j.return=k,k=j;break e}else{r(k,j);break}else t(k,j);j=j.sibling}j=fg(N,k.mode,C),j.return=k,k=j}return o(k);case Qn:return E=N._init,y(k,j,E(N._payload),C)}if(vl(N))return x(k,j,N,C);if(sl(N))return w(k,j,N,C);Fd(k,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,j!==null&&j.tag===6?(r(k,j.sibling),j=a(j,N),j.return=k,k=j):(r(k,j),j=mg(N,k.mode,C),j.return=k,k=j),o(k)):r(k,j)}return y}var ko=q1(!0),K1=q1(!1),jh=Ma(null),Nh=null,Xi=null,xx=null;function yx(){xx=Xi=Nh=null}function bx(e){var t=jh.current;gt(jh),e._currentValue=t}function Up(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function lo(e,t){Nh=e,xx=Xi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mr=!0),e.firstContext=null)}function ys(e){var t=e._currentValue;if(xx!==e)if(e={context:e,memoizedValue:t,next:null},Xi===null){if(Nh===null)throw Error(he(308));Xi=e,Nh.dependencies={lanes:0,firstContext:e}}else Xi=Xi.next=e;return t}var ri=null;function vx(e){ri===null?ri=[e]:ri.push(e)}function Z1(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,vx(t)):(r.next=a.next,a.next=r),t.interleaved=r,Bn(e,n)}function Bn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ea=!1;function wx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xa(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ke&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Bn(e,r)}return a=n.interleaved,a===null?(t.next=t,vx(n)):(t.next=a.next,a.next=t),n.interleaved=t,Bn(e,r)}function gu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ix(e,r)}}function Av(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function _h(e,t,r,n){var a=e.updateQueue;ea=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var d=c,h=d.next;d.next=null,o===null?i=h:o.next=h,o=d;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=d))}if(i!==null){var g=a.baseState;o=0,m=h=d=null,c=i;do{var p=c.lane,v=c.eventTime;if((n&p)===p){m!==null&&(m=m.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=e,w=c;switch(p=t,v=r,w.tag){case 1:if(x=w.payload,typeof x=="function"){g=x.call(v,g,p);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=w.payload,p=typeof x=="function"?x.call(v,g,p):x,p==null)break e;g=_t({},g,p);break e;case 2:ea=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[c]:p.push(c))}else v={eventTime:v,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(h=m=v,d=g):m=m.next=v,o|=p;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;p=c,c=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(m===null&&(d=g),a.baseState=d,a.firstBaseUpdate=h,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);xi|=o,e.lanes=o,e.memoizedState=g}}function Mv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(he(191,a));a.call(n)}}}var Gc={},sn=Ma(Gc),Nc=Ma(Gc),_c=Ma(Gc);function si(e){if(e===Gc)throw Error(he(174));return e}function kx(e,t){switch(ht(_c,t),ht(Nc,e),ht(sn,Gc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:kp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=kp(t,e)}gt(sn),ht(sn,t)}function jo(){gt(sn),gt(Nc),gt(_c)}function Y1(e){si(_c.current);var t=si(sn.current),r=kp(t,e.type);t!==r&&(ht(Nc,e),ht(sn,r))}function jx(e){Nc.current===e&&(gt(sn),gt(Nc))}var jt=Ma(0);function Sh(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var og=[];function Nx(){for(var e=0;e<og.length;e++)og[e]._workInProgressVersionPrimary=null;og.length=0}var pu=Hn.ReactCurrentDispatcher,lg=Hn.ReactCurrentBatchConfig,pi=0,Nt=null,Bt=null,Zt=null,Ch=!1,Ml=!1,Sc=0,O3=0;function or(){throw Error(he(321))}function _x(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Fs(e[r],t[r]))return!1;return!0}function Sx(e,t,r,n,a,i){if(pi=i,Nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pu.current=e===null||e.memoizedState===null?z3:B3,e=r(n,a),Ml){i=0;do{if(Ml=!1,Sc=0,25<=i)throw Error(he(301));i+=1,Zt=Bt=null,t.updateQueue=null,pu.current=$3,e=r(n,a)}while(Ml)}if(pu.current=Ph,t=Bt!==null&&Bt.next!==null,pi=0,Zt=Bt=Nt=null,Ch=!1,t)throw Error(he(300));return e}function Cx(){var e=Sc!==0;return Sc=0,e}function Zs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Nt.memoizedState=Zt=e:Zt=Zt.next=e,Zt}function bs(){if(Bt===null){var e=Nt.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var t=Zt===null?Nt.memoizedState:Zt.next;if(t!==null)Zt=t,Bt=e;else{if(e===null)throw Error(he(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Zt===null?Nt.memoizedState=Zt=e:Zt=Zt.next=e}return Zt}function Cc(e,t){return typeof t=="function"?t(e):t}function cg(e){var t=bs(),r=t.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=e;var n=Bt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var c=o=null,d=null,h=i;do{var m=h.lane;if((pi&m)===m)d!==null&&(d=d.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var g={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};d===null?(c=d=g,o=n):d=d.next=g,Nt.lanes|=m,xi|=m}h=h.next}while(h!==null&&h!==i);d===null?o=n:d.next=c,Fs(n,t.memoizedState)||(Mr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Nt.lanes|=i,xi|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function dg(e){var t=bs(),r=t.queue;if(r===null)throw Error(he(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Fs(i,t.memoizedState)||(Mr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function J1(){}function X1(e,t){var r=Nt,n=bs(),a=t(),i=!Fs(n.memoizedState,a);if(i&&(n.memoizedState=a,Mr=!0),n=n.queue,Px(tN.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Zt!==null&&Zt.memoizedState.tag&1){if(r.flags|=2048,Pc(9,eN.bind(null,r,n,a,t),void 0,null),Gt===null)throw Error(he(349));pi&30||Q1(r,t,a)}return a}function Q1(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Nt.updateQueue,t===null?(t={lastEffect:null,stores:null},Nt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function eN(e,t,r,n){t.value=r,t.getSnapshot=n,rN(t)&&sN(e)}function tN(e,t,r){return r(function(){rN(t)&&sN(e)})}function rN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Fs(e,r)}catch{return!0}}function sN(e){var t=Bn(e,1);t!==null&&Ds(t,e,1,-1)}function Ov(e){var t=Zs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:e},t.queue=e,e=e.dispatch=F3.bind(null,Nt,e),[t.memoizedState,e]}function Pc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Nt.updateQueue,t===null?(t={lastEffect:null,stores:null},Nt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function nN(){return bs().memoizedState}function xu(e,t,r,n){var a=Zs();Nt.flags|=e,a.memoizedState=Pc(1|t,r,void 0,n===void 0?null:n)}function xm(e,t,r,n){var a=bs();n=n===void 0?null:n;var i=void 0;if(Bt!==null){var o=Bt.memoizedState;if(i=o.destroy,n!==null&&_x(n,o.deps)){a.memoizedState=Pc(t,r,i,n);return}}Nt.flags|=e,a.memoizedState=Pc(1|t,r,i,n)}function Rv(e,t){return xu(8390656,8,e,t)}function Px(e,t){return xm(2048,8,e,t)}function aN(e,t){return xm(4,2,e,t)}function iN(e,t){return xm(4,4,e,t)}function oN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lN(e,t,r){return r=r!=null?r.concat([e]):null,xm(4,4,oN.bind(null,t,e),r)}function Ex(){}function cN(e,t){var r=bs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_x(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function dN(e,t){var r=bs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_x(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function uN(e,t,r){return pi&21?(Fs(r,t)||(r=p1(),Nt.lanes|=r,xi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=r)}function R3(e,t){var r=rt;rt=r!==0&&4>r?r:4,e(!0);var n=lg.transition;lg.transition={};try{e(!1),t()}finally{rt=r,lg.transition=n}}function hN(){return bs().memoizedState}function D3(e,t,r){var n=ba(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},mN(e))fN(t,r);else if(r=Z1(e,t,r,n),r!==null){var a=jr();Ds(r,e,n,a),gN(r,t,n)}}function F3(e,t,r){var n=ba(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(mN(e))fN(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,r);if(a.hasEagerState=!0,a.eagerState=c,Fs(c,o)){var d=t.interleaved;d===null?(a.next=a,vx(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}r=Z1(e,t,a,n),r!==null&&(a=jr(),Ds(r,e,n,a),gN(r,t,n))}}function mN(e){var t=e.alternate;return e===Nt||t!==null&&t===Nt}function fN(e,t){Ml=Ch=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ix(e,r)}}var Ph={readContext:ys,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},z3={readContext:ys,useCallback:function(e,t){return Zs().memoizedState=[e,t===void 0?null:t],e},useContext:ys,useEffect:Rv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,xu(4194308,4,oN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return xu(4194308,4,e,t)},useInsertionEffect:function(e,t){return xu(4,2,e,t)},useMemo:function(e,t){var r=Zs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Zs();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=D3.bind(null,Nt,e),[n.memoizedState,e]},useRef:function(e){var t=Zs();return e={current:e},t.memoizedState=e},useState:Ov,useDebugValue:Ex,useDeferredValue:function(e){return Zs().memoizedState=e},useTransition:function(){var e=Ov(!1),t=e[0];return e=R3.bind(null,e[1]),Zs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Nt,a=Zs();if(vt){if(r===void 0)throw Error(he(407));r=r()}else{if(r=t(),Gt===null)throw Error(he(349));pi&30||Q1(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Rv(tN.bind(null,n,i,e),[e]),n.flags|=2048,Pc(9,eN.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Zs(),t=Gt.identifierPrefix;if(vt){var r=An,n=In;r=(n&~(1<<32-Rs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Sc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=O3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},B3={readContext:ys,useCallback:cN,useContext:ys,useEffect:Px,useImperativeHandle:lN,useInsertionEffect:aN,useLayoutEffect:iN,useMemo:dN,useReducer:cg,useRef:nN,useState:function(){return cg(Cc)},useDebugValue:Ex,useDeferredValue:function(e){var t=bs();return uN(t,Bt.memoizedState,e)},useTransition:function(){var e=cg(Cc)[0],t=bs().memoizedState;return[e,t]},useMutableSource:J1,useSyncExternalStore:X1,useId:hN,unstable_isNewReconciler:!1},$3={readContext:ys,useCallback:cN,useContext:ys,useEffect:Px,useImperativeHandle:lN,useInsertionEffect:aN,useLayoutEffect:iN,useMemo:dN,useReducer:dg,useRef:nN,useState:function(){return dg(Cc)},useDebugValue:Ex,useDeferredValue:function(e){var t=bs();return Bt===null?t.memoizedState=e:uN(t,Bt.memoizedState,e)},useTransition:function(){var e=dg(Cc)[0],t=bs().memoizedState;return[e,t]},useMutableSource:J1,useSyncExternalStore:X1,useId:hN,unstable_isNewReconciler:!1};function Cs(e,t){if(e&&e.defaultProps){t=_t({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Vp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:_t({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ym={isMounted:function(e){return(e=e._reactInternals)?Si(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=jr(),a=ba(e),i=Mn(n,a);i.payload=t,r!=null&&(i.callback=r),t=xa(e,i,a),t!==null&&(Ds(t,e,a,n),gu(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=jr(),a=ba(e),i=Mn(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=xa(e,i,a),t!==null&&(Ds(t,e,a,n),gu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=jr(),n=ba(e),a=Mn(r,n);a.tag=2,t!=null&&(a.callback=t),t=xa(e,a,n),t!==null&&(Ds(t,e,n,r),gu(t,e,n))}};function Dv(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!vc(r,n)||!vc(a,i):!0}function pN(e,t,r){var n=!1,a=Ca,i=t.contextType;return typeof i=="object"&&i!==null?i=ys(i):(a=Dr(t)?fi:xr.current,n=t.contextTypes,i=(n=n!=null)?vo(e,a):Ca),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ym,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Fv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ym.enqueueReplaceState(t,t.state,null)}function Hp(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},wx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ys(i):(i=Dr(t)?fi:xr.current,a.context=vo(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Vp(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ym.enqueueReplaceState(a,a.state,null),_h(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function No(e,t){try{var r="",n=t;do r+=g6(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function ug(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var U3=typeof WeakMap=="function"?WeakMap:Map;function xN(e,t,r){r=Mn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Lh||(Lh=!0,t0=n),Wp(e,t)},r}function yN(e,t,r){r=Mn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){Wp(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Wp(e,t),typeof n!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function zv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new U3;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=r5.bind(null,e,t,r),t.then(e,e))}function Bv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $v(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Mn(-1,1),t.tag=2,xa(r,t,1))),r.lanes|=1),e)}var V3=Hn.ReactCurrentOwner,Mr=!1;function vr(e,t,r,n){t.child=e===null?K1(t,null,r,n):ko(t,e.child,r,n)}function Uv(e,t,r,n,a){r=r.render;var i=t.ref;return lo(t,a),n=Sx(e,t,r,n,i,a),r=Cx(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$n(e,t,a)):(vt&&r&&fx(t),t.flags|=1,vr(e,t,n,a),t.child)}function Vv(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Dx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,bN(e,t,i,n,a)):(e=wu(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:vc,r(o,n)&&e.ref===t.ref)return $n(e,t,a)}return t.flags|=1,e=va(i,n),e.ref=t.ref,e.return=t,t.child=e}function bN(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(vc(i,n)&&e.ref===t.ref)if(Mr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Mr=!0);else return t.lanes=e.lanes,$n(e,t,a)}return qp(e,t,r,n,a)}function vN(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(eo,Kr),Kr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ht(eo,Kr),Kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ht(eo,Kr),Kr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,ht(eo,Kr),Kr|=n;return vr(e,t,a,r),t.child}function wN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function qp(e,t,r,n,a){var i=Dr(r)?fi:xr.current;return i=vo(t,i),lo(t,a),r=Sx(e,t,r,n,i,a),n=Cx(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,$n(e,t,a)):(vt&&n&&fx(t),t.flags|=1,vr(e,t,r,a),t.child)}function Hv(e,t,r,n,a){if(Dr(r)){var i=!0;vh(t)}else i=!1;if(lo(t,a),t.stateNode===null)yu(e,t),pN(t,r,n),Hp(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var d=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=ys(h):(h=Dr(r)?fi:xr.current,h=vo(t,h));var m=r.getDerivedStateFromProps,g=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||d!==h)&&Fv(t,o,n,h),ea=!1;var p=t.memoizedState;o.state=p,_h(t,n,o,a),d=t.memoizedState,c!==n||p!==d||Rr.current||ea?(typeof m=="function"&&(Vp(t,r,m,n),d=t.memoizedState),(c=ea||Dv(t,r,c,n,p,d,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=h,n=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,G1(e,t),c=t.memoizedProps,h=t.type===t.elementType?c:Cs(t.type,c),o.props=h,g=t.pendingProps,p=o.context,d=r.contextType,typeof d=="object"&&d!==null?d=ys(d):(d=Dr(r)?fi:xr.current,d=vo(t,d));var v=r.getDerivedStateFromProps;(m=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==g||p!==d)&&Fv(t,o,n,d),ea=!1,p=t.memoizedState,o.state=p,_h(t,n,o,a);var x=t.memoizedState;c!==g||p!==x||Rr.current||ea?(typeof v=="function"&&(Vp(t,r,v,n),x=t.memoizedState),(h=ea||Dv(t,r,h,n,p,x,d)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=d,n=h):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return Kp(e,t,r,n,i,a)}function Kp(e,t,r,n,a,i){wN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Ev(t,r,!1),$n(e,t,i);n=t.stateNode,V3.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ko(t,e.child,null,i),t.child=ko(t,null,c,i)):vr(e,t,c,i),t.memoizedState=n.state,a&&Ev(t,r,!0),t.child}function kN(e){var t=e.stateNode;t.pendingContext?Pv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pv(e,t.context,!1),kx(e,t.containerInfo)}function Wv(e,t,r,n,a){return wo(),px(a),t.flags|=256,vr(e,t,r,n),t.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function Gp(e){return{baseLanes:e,cachePool:null,transitions:null}}function jN(e,t,r){var n=t.pendingProps,a=jt.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ht(jt,a&1),e===null)return $p(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=wm(o,n,0,null),e=ci(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Gp(r),t.memoizedState=Zp,e):Lx(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return H3(e,t,o,n,c,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,c=a.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=va(a,d),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=va(c,i):(i=ci(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Gp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Zp,n}return i=e.child,e=i.sibling,n=va(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Lx(e,t){return t=wm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zd(e,t,r,n){return n!==null&&px(n),ko(t,e.child,null,r),e=Lx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function H3(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ug(Error(he(422))),zd(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=wm({mode:"visible",children:n.children},a,0,null),i=ci(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ko(t,e.child,null,o),t.child.memoizedState=Gp(o),t.memoizedState=Zp,i);if(!(t.mode&1))return zd(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(he(419)),n=ug(i,n,void 0),zd(e,t,o,n)}if(c=(o&e.childLanes)!==0,Mr||c){if(n=Gt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Bn(e,a),Ds(n,e,a,-1))}return Rx(),n=ug(Error(he(421))),zd(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=s5.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Yr=pa(a.nextSibling),Jr=t,vt=!0,Ts=null,e!==null&&(hs[ms++]=In,hs[ms++]=An,hs[ms++]=gi,In=e.id,An=e.overflow,gi=t),t=Lx(t,n.children),t.flags|=4096,t)}function qv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Up(e.return,t,r)}function hg(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function NN(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(vr(e,t,n.children,r),n=jt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qv(e,r,t);else if(e.tag===19)qv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ht(jt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Sh(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),hg(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Sh(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}hg(t,!0,r,null,i);break;case"together":hg(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $n(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),xi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(he(153));if(t.child!==null){for(e=t.child,r=va(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=va(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function W3(e,t,r){switch(t.tag){case 3:kN(t),wo();break;case 5:Y1(t);break;case 1:Dr(t.type)&&vh(t);break;case 4:kx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;ht(jh,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(ht(jt,jt.current&1),t.flags|=128,null):r&t.child.childLanes?jN(e,t,r):(ht(jt,jt.current&1),e=$n(e,t,r),e!==null?e.sibling:null);ht(jt,jt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return NN(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ht(jt,jt.current),n)break;return null;case 22:case 23:return t.lanes=0,vN(e,t,r)}return $n(e,t,r)}var _N,Yp,SN,CN;_N=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yp=function(){};SN=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,si(sn.current);var i=null;switch(r){case"input":a=yp(e,a),n=yp(e,n),i=[];break;case"select":a=_t({},a,{value:void 0}),n=_t({},n,{value:void 0}),i=[];break;case"textarea":a=wp(e,a),n=wp(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=yh)}jp(r,n);var o;r=null;for(h in a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var c=a[h];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(mc.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var d=n[h];if(c=a!=null?a[h]:void 0,n.hasOwnProperty(h)&&d!==c&&(d!=null||c!=null))if(h==="style")if(c){for(o in c)!c.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in d)d.hasOwnProperty(o)&&c[o]!==d[o]&&(r||(r={}),r[o]=d[o])}else r||(i||(i=[]),i.push(h,r)),r=d;else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(i=i||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(mc.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&mt("scroll",e),i||c===d||(i=[])):(i=i||[]).push(h,d))}r&&(i=i||[]).push("style",r);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};CN=function(e,t,r,n){r!==n&&(t.flags|=4)};function cl(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function q3(e,t,r){var n=t.pendingProps;switch(gx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return Dr(t.type)&&bh(),lr(t),null;case 3:return n=t.stateNode,jo(),gt(Rr),gt(xr),Nx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Dd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ts!==null&&(n0(Ts),Ts=null))),Yp(e,t),lr(t),null;case 5:jx(t);var a=si(_c.current);if(r=t.type,e!==null&&t.stateNode!=null)SN(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(he(166));return lr(t),null}if(e=si(sn.current),Dd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Js]=t,n[jc]=i,e=(t.mode&1)!==0,r){case"dialog":mt("cancel",n),mt("close",n);break;case"iframe":case"object":case"embed":mt("load",n);break;case"video":case"audio":for(a=0;a<kl.length;a++)mt(kl[a],n);break;case"source":mt("error",n);break;case"img":case"image":case"link":mt("error",n),mt("load",n);break;case"details":mt("toggle",n);break;case"input":tv(n,i),mt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},mt("invalid",n);break;case"textarea":sv(n,i),mt("invalid",n)}jp(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&Rd(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Rd(n.textContent,c,e),a=["children",""+c]):mc.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&mt("scroll",n)}switch(r){case"input":Pd(n),rv(n,i,!0);break;case"textarea":Pd(n),nv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=yh)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=t1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Js]=t,e[jc]=n,_N(e,t,!1,!1),t.stateNode=e;e:{switch(o=Np(r,n),r){case"dialog":mt("cancel",e),mt("close",e),a=n;break;case"iframe":case"object":case"embed":mt("load",e),a=n;break;case"video":case"audio":for(a=0;a<kl.length;a++)mt(kl[a],e);a=n;break;case"source":mt("error",e),a=n;break;case"img":case"image":case"link":mt("error",e),mt("load",e),a=n;break;case"details":mt("toggle",e),a=n;break;case"input":tv(e,n),a=yp(e,n),mt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=_t({},n,{value:void 0}),mt("invalid",e);break;case"textarea":sv(e,n),a=wp(e,n),mt("invalid",e);break;default:a=n}jp(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var d=c[i];i==="style"?n1(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&r1(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&fc(e,d):typeof d=="number"&&fc(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mc.hasOwnProperty(i)?d!=null&&i==="onScroll"&&mt("scroll",e):d!=null&&ex(e,i,d,o))}switch(r){case"input":Pd(e),rv(e,n,!1);break;case"textarea":Pd(e),nv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Sa(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?no(e,!!n.multiple,i,!1):n.defaultValue!=null&&no(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=yh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)CN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(he(166));if(r=si(_c.current),si(sn.current),Dd(t)){if(n=t.stateNode,r=t.memoizedProps,n[Js]=t,(i=n.nodeValue!==r)&&(e=Jr,e!==null))switch(e.tag){case 3:Rd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Rd(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Js]=t,t.stateNode=n}return lr(t),null;case 13:if(gt(jt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&Yr!==null&&t.mode&1&&!(t.flags&128))W1(),wo(),t.flags|=98560,i=!1;else if(i=Dd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(he(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(he(317));i[Js]=t}else wo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),i=!1}else Ts!==null&&(n0(Ts),Ts=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jt.current&1?Vt===0&&(Vt=3):Rx())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return jo(),Yp(e,t),e===null&&wc(t.stateNode.containerInfo),lr(t),null;case 10:return bx(t.type._context),lr(t),null;case 17:return Dr(t.type)&&bh(),lr(t),null;case 19:if(gt(jt),i=t.memoizedState,i===null)return lr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)cl(i,!1);else{if(Vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Sh(e),o!==null){for(t.flags|=128,cl(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ht(jt,jt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Pt()>_o&&(t.flags|=128,n=!0,cl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Sh(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),cl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!vt)return lr(t),null}else 2*Pt()-i.renderingStartTime>_o&&r!==1073741824&&(t.flags|=128,n=!0,cl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Pt(),t.sibling=null,r=jt.current,ht(jt,n?r&1|2:r&1),t):(lr(t),null);case 22:case 23:return Ox(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Kr&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(he(156,t.tag))}function K3(e,t){switch(gx(t),t.tag){case 1:return Dr(t.type)&&bh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return jo(),gt(Rr),gt(xr),Nx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jx(t),null;case 13:if(gt(jt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(he(340));wo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return gt(jt),null;case 4:return jo(),null;case 10:return bx(t.type._context),null;case 22:case 23:return Ox(),null;case 24:return null;default:return null}}var Bd=!1,hr=!1,Z3=typeof WeakSet=="function"?WeakSet:Set,je=null;function Qi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){St(e,t,n)}else r.current=null}function Jp(e,t,r){try{r()}catch(n){St(e,t,n)}}var Kv=!1;function G3(e,t){if(Mp=gh,e=I1(),mx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,d=-1,h=0,m=0,g=e,p=null;t:for(;;){for(var v;g!==r||a!==0&&g.nodeType!==3||(c=o+a),g!==i||n!==0&&g.nodeType!==3||(d=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(v=g.firstChild)!==null;)p=g,g=v;for(;;){if(g===e)break t;if(p===r&&++h===a&&(c=o),p===i&&++m===n&&(d=o),(v=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=v}r=c===-1||d===-1?null:{start:c,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(Op={focusedElem:e,selectionRange:r},gh=!1,je=t;je!==null;)if(t=je,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,je=e;else for(;je!==null;){t=je;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var w=x.memoizedProps,y=x.memoizedState,k=t.stateNode,j=k.getSnapshotBeforeUpdate(t.elementType===t.type?w:Cs(t.type,w),y);k.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(C){St(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,je=e;break}je=t.return}return x=Kv,Kv=!1,x}function Ol(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Jp(t,r,i)}a=a.next}while(a!==n)}}function bm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Xp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function PN(e){var t=e.alternate;t!==null&&(e.alternate=null,PN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Js],delete t[jc],delete t[Fp],delete t[T3],delete t[I3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function EN(e){return e.tag===5||e.tag===3||e.tag===4}function Zv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||EN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yh));else if(n!==4&&(e=e.child,e!==null))for(Qp(e,t,r),e=e.sibling;e!==null;)Qp(e,t,r),e=e.sibling}function e0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(e0(e,t,r),e=e.sibling;e!==null;)e0(e,t,r),e=e.sibling}var Qt=null,Ps=!1;function Yn(e,t,r){for(r=r.child;r!==null;)LN(e,t,r),r=r.sibling}function LN(e,t,r){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(um,r)}catch{}switch(r.tag){case 5:hr||Qi(r,t);case 6:var n=Qt,a=Ps;Qt=null,Yn(e,t,r),Qt=n,Ps=a,Qt!==null&&(Ps?(e=Qt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Qt.removeChild(r.stateNode));break;case 18:Qt!==null&&(Ps?(e=Qt,r=r.stateNode,e.nodeType===8?ag(e.parentNode,r):e.nodeType===1&&ag(e,r),yc(e)):ag(Qt,r.stateNode));break;case 4:n=Qt,a=Ps,Qt=r.stateNode.containerInfo,Ps=!0,Yn(e,t,r),Qt=n,Ps=a;break;case 0:case 11:case 14:case 15:if(!hr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jp(r,t,o),a=a.next}while(a!==n)}Yn(e,t,r);break;case 1:if(!hr&&(Qi(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){St(r,t,c)}Yn(e,t,r);break;case 21:Yn(e,t,r);break;case 22:r.mode&1?(hr=(n=hr)||r.memoizedState!==null,Yn(e,t,r),hr=n):Yn(e,t,r);break;default:Yn(e,t,r)}}function Gv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Z3),t.forEach(function(n){var a=n5.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ss(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Qt=c.stateNode,Ps=!1;break e;case 3:Qt=c.stateNode.containerInfo,Ps=!0;break e;case 4:Qt=c.stateNode.containerInfo,Ps=!0;break e}c=c.return}if(Qt===null)throw Error(he(160));LN(i,o,a),Qt=null,Ps=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(h){St(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)TN(t,e),t=t.sibling}function TN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ss(t,e),Hs(e),n&4){try{Ol(3,e,e.return),bm(3,e)}catch(w){St(e,e.return,w)}try{Ol(5,e,e.return)}catch(w){St(e,e.return,w)}}break;case 1:Ss(t,e),Hs(e),n&512&&r!==null&&Qi(r,r.return);break;case 5:if(Ss(t,e),Hs(e),n&512&&r!==null&&Qi(r,r.return),e.flags&32){var a=e.stateNode;try{fc(a,"")}catch(w){St(e,e.return,w)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Qj(a,i),Np(c,o);var h=Np(c,i);for(o=0;o<d.length;o+=2){var m=d[o],g=d[o+1];m==="style"?n1(a,g):m==="dangerouslySetInnerHTML"?r1(a,g):m==="children"?fc(a,g):ex(a,m,g,h)}switch(c){case"input":bp(a,i);break;case"textarea":e1(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?no(a,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?no(a,!!i.multiple,i.defaultValue,!0):no(a,!!i.multiple,i.multiple?[]:"",!1))}a[jc]=i}catch(w){St(e,e.return,w)}}break;case 6:if(Ss(t,e),Hs(e),n&4){if(e.stateNode===null)throw Error(he(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(w){St(e,e.return,w)}}break;case 3:if(Ss(t,e),Hs(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{yc(t.containerInfo)}catch(w){St(e,e.return,w)}break;case 4:Ss(t,e),Hs(e);break;case 13:Ss(t,e),Hs(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Ax=Pt())),n&4&&Gv(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(hr=(h=hr)||m,Ss(t,e),hr=h):Ss(t,e),Hs(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!m&&e.mode&1)for(je=e,m=e.child;m!==null;){for(g=je=m;je!==null;){switch(p=je,v=p.child,p.tag){case 0:case 11:case 14:case 15:Ol(4,p,p.return);break;case 1:Qi(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(w){St(n,r,w)}}break;case 5:Qi(p,p.return);break;case 22:if(p.memoizedState!==null){Jv(g);continue}}v!==null?(v.return=p,je=v):Jv(g)}m=m.sibling}e:for(m=null,g=e;;){if(g.tag===5){if(m===null){m=g;try{a=g.stateNode,h?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=g.stateNode,d=g.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=s1("display",o))}catch(w){St(e,e.return,w)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(w){St(e,e.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Ss(t,e),Hs(e),n&4&&Gv(e);break;case 21:break;default:Ss(t,e),Hs(e)}}function Hs(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(EN(r)){var n=r;break e}r=r.return}throw Error(he(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(fc(a,""),n.flags&=-33);var i=Zv(e);e0(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,c=Zv(e);Qp(e,c,o);break;default:throw Error(he(161))}}catch(d){St(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y3(e,t,r){je=e,IN(e)}function IN(e,t,r){for(var n=(e.mode&1)!==0;je!==null;){var a=je,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Bd;if(!o){var c=a.alternate,d=c!==null&&c.memoizedState!==null||hr;c=Bd;var h=hr;if(Bd=o,(hr=d)&&!h)for(je=a;je!==null;)o=je,d=o.child,o.tag===22&&o.memoizedState!==null?Xv(a):d!==null?(d.return=o,je=d):Xv(a);for(;i!==null;)je=i,IN(i),i=i.sibling;je=a,Bd=c,hr=h}Yv(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,je=i):Yv(e)}}function Yv(e){for(;je!==null;){var t=je;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hr||bm(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!hr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Cs(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Mv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Mv(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&yc(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}hr||t.flags&512&&Xp(t)}catch(p){St(t,t.return,p)}}if(t===e){je=null;break}if(r=t.sibling,r!==null){r.return=t.return,je=r;break}je=t.return}}function Jv(e){for(;je!==null;){var t=je;if(t===e){je=null;break}var r=t.sibling;if(r!==null){r.return=t.return,je=r;break}je=t.return}}function Xv(e){for(;je!==null;){var t=je;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{bm(4,t)}catch(d){St(t,r,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){St(t,a,d)}}var i=t.return;try{Xp(t)}catch(d){St(t,i,d)}break;case 5:var o=t.return;try{Xp(t)}catch(d){St(t,o,d)}}}catch(d){St(t,t.return,d)}if(t===e){je=null;break}var c=t.sibling;if(c!==null){c.return=t.return,je=c;break}je=t.return}}var J3=Math.ceil,Eh=Hn.ReactCurrentDispatcher,Tx=Hn.ReactCurrentOwner,xs=Hn.ReactCurrentBatchConfig,Ke=0,Gt=null,Rt=null,rr=0,Kr=0,eo=Ma(0),Vt=0,Ec=null,xi=0,vm=0,Ix=0,Rl=null,Ir=null,Ax=0,_o=1/0,Pn=null,Lh=!1,t0=null,ya=null,$d=!1,oa=null,Th=0,Dl=0,r0=null,bu=-1,vu=0;function jr(){return Ke&6?Pt():bu!==-1?bu:bu=Pt()}function ba(e){return e.mode&1?Ke&2&&rr!==0?rr&-rr:M3.transition!==null?(vu===0&&(vu=p1()),vu):(e=rt,e!==0||(e=window.event,e=e===void 0?16:j1(e.type)),e):1}function Ds(e,t,r,n){if(50<Dl)throw Dl=0,r0=null,Error(he(185));qc(e,r,n),(!(Ke&2)||e!==Gt)&&(e===Gt&&(!(Ke&2)&&(vm|=r),Vt===4&&ra(e,rr)),Fr(e,n),r===1&&Ke===0&&!(t.mode&1)&&(_o=Pt()+500,pm&&Oa()))}function Fr(e,t){var r=e.callbackNode;M6(e,t);var n=fh(e,e===Gt?rr:0);if(n===0)r!==null&&ov(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&ov(r),t===1)e.tag===0?A3(Qv.bind(null,e)):U1(Qv.bind(null,e)),E3(function(){!(Ke&6)&&Oa()}),r=null;else{switch(x1(n)){case 1:r=ax;break;case 4:r=f1;break;case 16:r=mh;break;case 536870912:r=g1;break;default:r=mh}r=BN(r,AN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function AN(e,t){if(bu=-1,vu=0,Ke&6)throw Error(he(327));var r=e.callbackNode;if(co()&&e.callbackNode!==r)return null;var n=fh(e,e===Gt?rr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ih(e,n);else{t=n;var a=Ke;Ke|=2;var i=ON();(Gt!==e||rr!==t)&&(Pn=null,_o=Pt()+500,li(e,t));do try{e5();break}catch(c){MN(e,c)}while(!0);yx(),Eh.current=i,Ke=a,Rt!==null?t=0:(Gt=null,rr=0,t=Vt)}if(t!==0){if(t===2&&(a=Ep(e),a!==0&&(n=a,t=s0(e,a))),t===1)throw r=Ec,li(e,0),ra(e,n),Fr(e,Pt()),r;if(t===6)ra(e,n);else{if(a=e.current.alternate,!(n&30)&&!X3(a)&&(t=Ih(e,n),t===2&&(i=Ep(e),i!==0&&(n=i,t=s0(e,i))),t===1))throw r=Ec,li(e,0),ra(e,n),Fr(e,Pt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(he(345));case 2:Ja(e,Ir,Pn);break;case 3:if(ra(e,n),(n&130023424)===n&&(t=Ax+500-Pt(),10<t)){if(fh(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){jr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Dp(Ja.bind(null,e,Ir,Pn),t);break}Ja(e,Ir,Pn);break;case 4:if(ra(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Rs(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Pt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*J3(n/1960))-n,10<n){e.timeoutHandle=Dp(Ja.bind(null,e,Ir,Pn),n);break}Ja(e,Ir,Pn);break;case 5:Ja(e,Ir,Pn);break;default:throw Error(he(329))}}}return Fr(e,Pt()),e.callbackNode===r?AN.bind(null,e):null}function s0(e,t){var r=Rl;return e.current.memoizedState.isDehydrated&&(li(e,t).flags|=256),e=Ih(e,t),e!==2&&(t=Ir,Ir=r,t!==null&&n0(t)),e}function n0(e){Ir===null?Ir=e:Ir.push.apply(Ir,e)}function X3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Fs(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ra(e,t){for(t&=~Ix,t&=~vm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Rs(t),n=1<<r;e[r]=-1,t&=~n}}function Qv(e){if(Ke&6)throw Error(he(327));co();var t=fh(e,0);if(!(t&1))return Fr(e,Pt()),null;var r=Ih(e,t);if(e.tag!==0&&r===2){var n=Ep(e);n!==0&&(t=n,r=s0(e,n))}if(r===1)throw r=Ec,li(e,0),ra(e,t),Fr(e,Pt()),r;if(r===6)throw Error(he(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ja(e,Ir,Pn),Fr(e,Pt()),null}function Mx(e,t){var r=Ke;Ke|=1;try{return e(t)}finally{Ke=r,Ke===0&&(_o=Pt()+500,pm&&Oa())}}function yi(e){oa!==null&&oa.tag===0&&!(Ke&6)&&co();var t=Ke;Ke|=1;var r=xs.transition,n=rt;try{if(xs.transition=null,rt=1,e)return e()}finally{rt=n,xs.transition=r,Ke=t,!(Ke&6)&&Oa()}}function Ox(){Kr=eo.current,gt(eo)}function li(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,P3(r)),Rt!==null)for(r=Rt.return;r!==null;){var n=r;switch(gx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bh();break;case 3:jo(),gt(Rr),gt(xr),Nx();break;case 5:jx(n);break;case 4:jo();break;case 13:gt(jt);break;case 19:gt(jt);break;case 10:bx(n.type._context);break;case 22:case 23:Ox()}r=r.return}if(Gt=e,Rt=e=va(e.current,null),rr=Kr=t,Vt=0,Ec=null,Ix=vm=xi=0,Ir=Rl=null,ri!==null){for(t=0;t<ri.length;t++)if(r=ri[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ri=null}return e}function MN(e,t){do{var r=Rt;try{if(yx(),pu.current=Ph,Ch){for(var n=Nt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ch=!1}if(pi=0,Zt=Bt=Nt=null,Ml=!1,Sc=0,Tx.current=null,r===null||r.return===null){Vt=1,Ec=t,Rt=null;break}e:{var i=e,o=r.return,c=r,d=t;if(t=rr,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d,m=c,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var v=Bv(o);if(v!==null){v.flags&=-257,$v(v,o,c,i,t),v.mode&1&&zv(i,h,t),t=v,d=h;var x=t.updateQueue;if(x===null){var w=new Set;w.add(d),t.updateQueue=w}else x.add(d);break e}else{if(!(t&1)){zv(i,h,t),Rx();break e}d=Error(he(426))}}else if(vt&&c.mode&1){var y=Bv(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),$v(y,o,c,i,t),px(No(d,c));break e}}i=d=No(d,c),Vt!==4&&(Vt=2),Rl===null?Rl=[i]:Rl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var k=xN(i,d,t);Av(i,k);break e;case 1:c=d;var j=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ya===null||!ya.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=yN(i,c,t);Av(i,C);break e}}i=i.return}while(i!==null)}DN(r)}catch(P){t=P,Rt===r&&r!==null&&(Rt=r=r.return);continue}break}while(!0)}function ON(){var e=Eh.current;return Eh.current=Ph,e===null?Ph:e}function Rx(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Gt===null||!(xi&268435455)&&!(vm&268435455)||ra(Gt,rr)}function Ih(e,t){var r=Ke;Ke|=2;var n=ON();(Gt!==e||rr!==t)&&(Pn=null,li(e,t));do try{Q3();break}catch(a){MN(e,a)}while(!0);if(yx(),Ke=r,Eh.current=n,Rt!==null)throw Error(he(261));return Gt=null,rr=0,Vt}function Q3(){for(;Rt!==null;)RN(Rt)}function e5(){for(;Rt!==null&&!_6();)RN(Rt)}function RN(e){var t=zN(e.alternate,e,Kr);e.memoizedProps=e.pendingProps,t===null?DN(e):Rt=t,Tx.current=null}function DN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=K3(r,t),r!==null){r.flags&=32767,Rt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Vt=6,Rt=null;return}}else if(r=q3(r,t,Kr),r!==null){Rt=r;return}if(t=t.sibling,t!==null){Rt=t;return}Rt=t=e}while(t!==null);Vt===0&&(Vt=5)}function Ja(e,t,r){var n=rt,a=xs.transition;try{xs.transition=null,rt=1,t5(e,t,r,n)}finally{xs.transition=a,rt=n}return null}function t5(e,t,r,n){do co();while(oa!==null);if(Ke&6)throw Error(he(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(he(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(O6(e,i),e===Gt&&(Rt=Gt=null,rr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||$d||($d=!0,BN(mh,function(){return co(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=xs.transition,xs.transition=null;var o=rt;rt=1;var c=Ke;Ke|=4,Tx.current=null,G3(e,r),TN(r,e),w3(Op),gh=!!Mp,Op=Mp=null,e.current=r,Y3(r),S6(),Ke=c,rt=o,xs.transition=i}else e.current=r;if($d&&($d=!1,oa=e,Th=a),i=e.pendingLanes,i===0&&(ya=null),E6(r.stateNode),Fr(e,Pt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Lh)throw Lh=!1,e=t0,t0=null,e;return Th&1&&e.tag!==0&&co(),i=e.pendingLanes,i&1?e===r0?Dl++:(Dl=0,r0=e):Dl=0,Oa(),null}function co(){if(oa!==null){var e=x1(Th),t=xs.transition,r=rt;try{if(xs.transition=null,rt=16>e?16:e,oa===null)var n=!1;else{if(e=oa,oa=null,Th=0,Ke&6)throw Error(he(331));var a=Ke;for(Ke|=4,je=e.current;je!==null;){var i=je,o=i.child;if(je.flags&16){var c=i.deletions;if(c!==null){for(var d=0;d<c.length;d++){var h=c[d];for(je=h;je!==null;){var m=je;switch(m.tag){case 0:case 11:case 15:Ol(8,m,i)}var g=m.child;if(g!==null)g.return=m,je=g;else for(;je!==null;){m=je;var p=m.sibling,v=m.return;if(PN(m),m===h){je=null;break}if(p!==null){p.return=v,je=p;break}je=v}}}var x=i.alternate;if(x!==null){var w=x.child;if(w!==null){x.child=null;do{var y=w.sibling;w.sibling=null,w=y}while(w!==null)}}je=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,je=o;else e:for(;je!==null;){if(i=je,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ol(9,i,i.return)}var k=i.sibling;if(k!==null){k.return=i.return,je=k;break e}je=i.return}}var j=e.current;for(je=j;je!==null;){o=je;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,je=N;else e:for(o=j;je!==null;){if(c=je,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:bm(9,c)}}catch(P){St(c,c.return,P)}if(c===o){je=null;break e}var C=c.sibling;if(C!==null){C.return=c.return,je=C;break e}je=c.return}}if(Ke=a,Oa(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(um,e)}catch{}n=!0}return n}finally{rt=r,xs.transition=t}}return!1}function ew(e,t,r){t=No(r,t),t=xN(e,t,1),e=xa(e,t,1),t=jr(),e!==null&&(qc(e,1,t),Fr(e,t))}function St(e,t,r){if(e.tag===3)ew(e,e,r);else for(;t!==null;){if(t.tag===3){ew(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ya===null||!ya.has(n))){e=No(r,e),e=yN(t,e,1),t=xa(t,e,1),e=jr(),t!==null&&(qc(t,1,e),Fr(t,e));break}}t=t.return}}function r5(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=jr(),e.pingedLanes|=e.suspendedLanes&r,Gt===e&&(rr&r)===r&&(Vt===4||Vt===3&&(rr&130023424)===rr&&500>Pt()-Ax?li(e,0):Ix|=r),Fr(e,t)}function FN(e,t){t===0&&(e.mode&1?(t=Td,Td<<=1,!(Td&130023424)&&(Td=4194304)):t=1);var r=jr();e=Bn(e,t),e!==null&&(qc(e,t,r),Fr(e,r))}function s5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),FN(e,r)}function n5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(he(314))}n!==null&&n.delete(t),FN(e,r)}var zN;zN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Rr.current)Mr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Mr=!1,W3(e,t,r);Mr=!!(e.flags&131072)}else Mr=!1,vt&&t.flags&1048576&&V1(t,kh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;yu(e,t),e=t.pendingProps;var a=vo(t,xr.current);lo(t,r),a=Sx(null,t,n,e,a,r);var i=Cx();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(n)?(i=!0,vh(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,wx(t),a.updater=ym,t.stateNode=a,a._reactInternals=t,Hp(t,n,e,r),t=Kp(null,t,n,!0,i,r)):(t.tag=0,vt&&i&&fx(t),vr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(yu(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=i5(n),e=Cs(n,e),a){case 0:t=qp(null,t,n,e,r);break e;case 1:t=Hv(null,t,n,e,r);break e;case 11:t=Uv(null,t,n,e,r);break e;case 14:t=Vv(null,t,n,Cs(n.type,e),r);break e}throw Error(he(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Cs(n,a),qp(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Cs(n,a),Hv(e,t,n,a,r);case 3:e:{if(kN(t),e===null)throw Error(he(387));n=t.pendingProps,i=t.memoizedState,a=i.element,G1(e,t),_h(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=No(Error(he(423)),t),t=Wv(e,t,n,r,a);break e}else if(n!==a){a=No(Error(he(424)),t),t=Wv(e,t,n,r,a);break e}else for(Yr=pa(t.stateNode.containerInfo.firstChild),Jr=t,vt=!0,Ts=null,r=K1(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wo(),n===a){t=$n(e,t,r);break e}vr(e,t,n,r)}t=t.child}return t;case 5:return Y1(t),e===null&&$p(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Rp(n,a)?o=null:i!==null&&Rp(n,i)&&(t.flags|=32),wN(e,t),vr(e,t,o,r),t.child;case 6:return e===null&&$p(t),null;case 13:return jN(e,t,r);case 4:return kx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ko(t,null,n,r):vr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Cs(n,a),Uv(e,t,n,a,r);case 7:return vr(e,t,t.pendingProps,r),t.child;case 8:return vr(e,t,t.pendingProps.children,r),t.child;case 12:return vr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,ht(jh,n._currentValue),n._currentValue=o,i!==null)if(Fs(i.value,o)){if(i.children===a.children&&!Rr.current){t=$n(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var d=c.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=Mn(-1,r&-r),d.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?d.next=d:(d.next=m.next,m.next=d),h.pending=d}}i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),Up(i.return,r,t),c.lanes|=r;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(he(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Up(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,lo(t,r),a=ys(a),n=n(a),t.flags|=1,vr(e,t,n,r),t.child;case 14:return n=t.type,a=Cs(n,t.pendingProps),a=Cs(n.type,a),Vv(e,t,n,a,r);case 15:return bN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Cs(n,a),yu(e,t),t.tag=1,Dr(n)?(e=!0,vh(t)):e=!1,lo(t,r),pN(t,n,a),Hp(t,n,a,r),Kp(null,t,n,!0,e,r);case 19:return NN(e,t,r);case 22:return vN(e,t,r)}throw Error(he(156,t.tag))};function BN(e,t){return m1(e,t)}function a5(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(e,t,r,n){return new a5(e,t,r,n)}function Dx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function i5(e){if(typeof e=="function")return Dx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===rx)return 11;if(e===sx)return 14}return 2}function va(e,t){var r=e.alternate;return r===null?(r=gs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wu(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Dx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Hi:return ci(r.children,a,i,t);case tx:o=8,a|=8;break;case fp:return e=gs(12,r,t,a|2),e.elementType=fp,e.lanes=i,e;case gp:return e=gs(13,r,t,a),e.elementType=gp,e.lanes=i,e;case pp:return e=gs(19,r,t,a),e.elementType=pp,e.lanes=i,e;case Yj:return wm(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zj:o=10;break e;case Gj:o=9;break e;case rx:o=11;break e;case sx:o=14;break e;case Qn:o=16,n=null;break e}throw Error(he(130,e==null?e:typeof e,""))}return t=gs(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ci(e,t,r,n){return e=gs(7,e,n,t),e.lanes=r,e}function wm(e,t,r,n){return e=gs(22,e,n,t),e.elementType=Yj,e.lanes=r,e.stateNode={isHidden:!1},e}function mg(e,t,r){return e=gs(6,e,null,t),e.lanes=r,e}function fg(e,t,r){return t=gs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function o5(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zf(0),this.expirationTimes=Zf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zf(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Fx(e,t,r,n,a,i,o,c,d){return e=new o5(e,t,r,c,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=gs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wx(i),e}function l5(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function $N(e){if(!e)return Ca;e=e._reactInternals;e:{if(Si(e)!==e||e.tag!==1)throw Error(he(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(he(171))}if(e.tag===1){var r=e.type;if(Dr(r))return $1(e,r,t)}return t}function UN(e,t,r,n,a,i,o,c,d){return e=Fx(r,n,!0,e,a,i,o,c,d),e.context=$N(null),r=e.current,n=jr(),a=ba(r),i=Mn(n,a),i.callback=t??null,xa(r,i,a),e.current.lanes=a,qc(e,a,n),Fr(e,n),e}function km(e,t,r,n){var a=t.current,i=jr(),o=ba(a);return r=$N(r),t.context===null?t.context=r:t.pendingContext=r,t=Mn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=xa(a,t,o),e!==null&&(Ds(e,a,o,i),gu(e,a,o)),o}function Ah(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function zx(e,t){tw(e,t),(e=e.alternate)&&tw(e,t)}function c5(){return null}var VN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Bx(e){this._internalRoot=e}jm.prototype.render=Bx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(he(409));km(e,t,null,null)};jm.prototype.unmount=Bx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yi(function(){km(null,e,null,null)}),t[zn]=null}};function jm(e){this._internalRoot=e}jm.prototype.unstable_scheduleHydration=function(e){if(e){var t=v1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ta.length&&t!==0&&t<ta[r].priority;r++);ta.splice(r,0,e),r===0&&k1(e)}};function $x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rw(){}function d5(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var h=Ah(o);i.call(h)}}var o=UN(t,n,e,0,null,!1,!1,"",rw);return e._reactRootContainer=o,e[zn]=o.current,wc(e.nodeType===8?e.parentNode:e),yi(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var h=Ah(d);c.call(h)}}var d=Fx(e,0,!1,null,null,!1,!1,"",rw);return e._reactRootContainer=d,e[zn]=d.current,wc(e.nodeType===8?e.parentNode:e),yi(function(){km(t,d,r,n)}),d}function _m(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var c=a;a=function(){var d=Ah(o);c.call(d)}}km(t,o,e,a)}else o=d5(r,t,e,a,n);return Ah(o)}y1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wl(t.pendingLanes);r!==0&&(ix(t,r|1),Fr(t,Pt()),!(Ke&6)&&(_o=Pt()+500,Oa()))}break;case 13:yi(function(){var n=Bn(e,1);if(n!==null){var a=jr();Ds(n,e,1,a)}}),zx(e,1)}};ox=function(e){if(e.tag===13){var t=Bn(e,134217728);if(t!==null){var r=jr();Ds(t,e,134217728,r)}zx(e,134217728)}};b1=function(e){if(e.tag===13){var t=ba(e),r=Bn(e,t);if(r!==null){var n=jr();Ds(r,e,t,n)}zx(e,t)}};v1=function(){return rt};w1=function(e,t){var r=rt;try{return rt=e,t()}finally{rt=r}};Sp=function(e,t,r){switch(t){case"input":if(bp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=gm(n);if(!a)throw Error(he(90));Xj(n),bp(n,a)}}}break;case"textarea":e1(e,r);break;case"select":t=r.value,t!=null&&no(e,!!r.multiple,t,!1)}};o1=Mx;l1=yi;var u5={usingClientEntryPoint:!1,Events:[Zc,Zi,gm,a1,i1,Mx]},dl={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h5={bundleType:dl.bundleType,version:dl.version,rendererPackageName:dl.rendererPackageName,rendererConfig:dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=u1(e),e===null?null:e.stateNode},findFiberByHostInstance:dl.findFiberByHostInstance||c5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{um=Ud.inject(h5),rn=Ud}catch{}}es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u5;es.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$x(t))throw Error(he(200));return l5(e,t,null,r)};es.createRoot=function(e,t){if(!$x(e))throw Error(he(299));var r=!1,n="",a=VN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Fx(e,1,!1,null,null,r,!1,n,a),e[zn]=t.current,wc(e.nodeType===8?e.parentNode:e),new Bx(t)};es.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(he(188)):(e=Object.keys(e).join(","),Error(he(268,e)));return e=u1(t),e=e===null?null:e.stateNode,e};es.flushSync=function(e){return yi(e)};es.hydrate=function(e,t,r){if(!Nm(t))throw Error(he(200));return _m(null,e,t,!0,r)};es.hydrateRoot=function(e,t,r){if(!$x(e))throw Error(he(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=VN;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=UN(t,null,e,1,r??null,a,!1,i,o),e[zn]=t.current,wc(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new jm(t)};es.render=function(e,t,r){if(!Nm(t))throw Error(he(200));return _m(null,e,t,!1,r)};es.unmountComponentAtNode=function(e){if(!Nm(e))throw Error(he(40));return e._reactRootContainer?(yi(function(){_m(null,null,e,!1,function(){e._reactRootContainer=null,e[zn]=null})}),!0):!1};es.unstable_batchedUpdates=Mx;es.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Nm(r))throw Error(he(200));if(e==null||e._reactInternals===void 0)throw Error(he(38));return _m(e,t,r,!1,n)};es.version="18.3.1-next-f1338f8080-20240426";function HN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(HN)}catch(e){console.error(e)}}HN(),Hj.exports=es;var WN=Hj.exports,sw=WN;hp.createRoot=sw.createRoot,hp.hydrateRoot=sw.hydrateRoot;var qN={exports:{}},KN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var So=S;function m5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var f5=typeof Object.is=="function"?Object.is:m5,g5=So.useState,p5=So.useEffect,x5=So.useLayoutEffect,y5=So.useDebugValue;function b5(e,t){var r=t(),n=g5({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return x5(function(){a.value=r,a.getSnapshot=t,gg(a)&&i({inst:a})},[e,r,t]),p5(function(){return gg(a)&&i({inst:a}),e(function(){gg(a)&&i({inst:a})})},[e]),y5(r),r}function gg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!f5(e,r)}catch{return!0}}function v5(e,t){return t()}var w5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?v5:b5;KN.useSyncExternalStore=So.useSyncExternalStore!==void 0?So.useSyncExternalStore:w5;qN.exports=KN;var k5=qN.exports,ZN={exports:{}},GN={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm=S,j5=k5;function N5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _5=typeof Object.is=="function"?Object.is:N5,S5=j5.useSyncExternalStore,C5=Sm.useRef,P5=Sm.useEffect,E5=Sm.useMemo,L5=Sm.useDebugValue;GN.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=C5(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=E5(function(){function d(v){if(!h){if(h=!0,m=v,v=n(v),a!==void 0&&o.hasValue){var x=o.value;if(a(x,v))return g=x}return g=v}if(x=g,_5(m,v))return x;var w=n(v);return a!==void 0&&a(x,w)?(m=v,x):(m=v,g=w)}var h=!1,m,g,p=r===void 0?null:r;return[function(){return d(t())},p===null?void 0:function(){return d(p())}]},[t,r,n,a]);var c=S5(e,i[0],i[1]);return P5(function(){o.hasValue=!0,o.value=c},[c]),L5(c),c};ZN.exports=GN;var T5=ZN.exports;function I5(e){e()}let YN=I5;const A5=e=>YN=e,M5=()=>YN,nw=Symbol.for("react-redux-context"),aw=typeof globalThis<"u"?globalThis:{};function O5(){var e;if(!S.createContext)return{};const t=(e=aw[nw])!=null?e:aw[nw]=new Map;let r=t.get(S.createContext);return r||(r=S.createContext(null),t.set(S.createContext,r)),r}const Pa=O5();function Ux(e=Pa){return function(){return S.useContext(e)}}const JN=Ux(),R5=()=>{throw new Error("uSES not initialized!")};let XN=R5;const D5=e=>{XN=e},F5=(e,t)=>e===t;function z5(e=Pa){const t=e===Pa?JN:Ux(e);return function(n,a={}){const{equalityFn:i=F5,stabilityCheck:o=void 0,noopCheck:c=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:d,subscription:h,getServerState:m,stabilityCheck:g,noopCheck:p}=t();S.useRef(!0);const v=S.useCallback({[n.name](w){return n(w)}}[n.name],[n,g,o]),x=XN(h.addNestedSub,d.getState,m||d.getState,v,i);return S.useDebugValue(x),x}}const ke=z5();var QN={exports:{}},st={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt=typeof Symbol=="function"&&Symbol.for,Vx=Yt?Symbol.for("react.element"):60103,Hx=Yt?Symbol.for("react.portal"):60106,Cm=Yt?Symbol.for("react.fragment"):60107,Pm=Yt?Symbol.for("react.strict_mode"):60108,Em=Yt?Symbol.for("react.profiler"):60114,Lm=Yt?Symbol.for("react.provider"):60109,Tm=Yt?Symbol.for("react.context"):60110,Wx=Yt?Symbol.for("react.async_mode"):60111,Im=Yt?Symbol.for("react.concurrent_mode"):60111,Am=Yt?Symbol.for("react.forward_ref"):60112,Mm=Yt?Symbol.for("react.suspense"):60113,B5=Yt?Symbol.for("react.suspense_list"):60120,Om=Yt?Symbol.for("react.memo"):60115,Rm=Yt?Symbol.for("react.lazy"):60116,$5=Yt?Symbol.for("react.block"):60121,U5=Yt?Symbol.for("react.fundamental"):60117,V5=Yt?Symbol.for("react.responder"):60118,H5=Yt?Symbol.for("react.scope"):60119;function rs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Vx:switch(e=e.type,e){case Wx:case Im:case Cm:case Em:case Pm:case Mm:return e;default:switch(e=e&&e.$$typeof,e){case Tm:case Am:case Rm:case Om:case Lm:return e;default:return t}}case Hx:return t}}}function e2(e){return rs(e)===Im}st.AsyncMode=Wx;st.ConcurrentMode=Im;st.ContextConsumer=Tm;st.ContextProvider=Lm;st.Element=Vx;st.ForwardRef=Am;st.Fragment=Cm;st.Lazy=Rm;st.Memo=Om;st.Portal=Hx;st.Profiler=Em;st.StrictMode=Pm;st.Suspense=Mm;st.isAsyncMode=function(e){return e2(e)||rs(e)===Wx};st.isConcurrentMode=e2;st.isContextConsumer=function(e){return rs(e)===Tm};st.isContextProvider=function(e){return rs(e)===Lm};st.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vx};st.isForwardRef=function(e){return rs(e)===Am};st.isFragment=function(e){return rs(e)===Cm};st.isLazy=function(e){return rs(e)===Rm};st.isMemo=function(e){return rs(e)===Om};st.isPortal=function(e){return rs(e)===Hx};st.isProfiler=function(e){return rs(e)===Em};st.isStrictMode=function(e){return rs(e)===Pm};st.isSuspense=function(e){return rs(e)===Mm};st.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Cm||e===Im||e===Em||e===Pm||e===Mm||e===B5||typeof e=="object"&&e!==null&&(e.$$typeof===Rm||e.$$typeof===Om||e.$$typeof===Lm||e.$$typeof===Tm||e.$$typeof===Am||e.$$typeof===U5||e.$$typeof===V5||e.$$typeof===H5||e.$$typeof===$5)};st.typeOf=rs;QN.exports=st;var W5=QN.exports,t2=W5,q5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},K5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},r2={};r2[t2.ForwardRef]=q5;r2[t2.Memo]=K5;var at={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=Symbol.for("react.element"),Kx=Symbol.for("react.portal"),Dm=Symbol.for("react.fragment"),Fm=Symbol.for("react.strict_mode"),zm=Symbol.for("react.profiler"),Bm=Symbol.for("react.provider"),$m=Symbol.for("react.context"),Z5=Symbol.for("react.server_context"),Um=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),Hm=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),qm=Symbol.for("react.lazy"),G5=Symbol.for("react.offscreen"),s2;s2=Symbol.for("react.module.reference");function ks(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case qx:switch(e=e.type,e){case Dm:case zm:case Fm:case Vm:case Hm:return e;default:switch(e=e&&e.$$typeof,e){case Z5:case $m:case Um:case qm:case Wm:case Bm:return e;default:return t}}case Kx:return t}}}at.ContextConsumer=$m;at.ContextProvider=Bm;at.Element=qx;at.ForwardRef=Um;at.Fragment=Dm;at.Lazy=qm;at.Memo=Wm;at.Portal=Kx;at.Profiler=zm;at.StrictMode=Fm;at.Suspense=Vm;at.SuspenseList=Hm;at.isAsyncMode=function(){return!1};at.isConcurrentMode=function(){return!1};at.isContextConsumer=function(e){return ks(e)===$m};at.isContextProvider=function(e){return ks(e)===Bm};at.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===qx};at.isForwardRef=function(e){return ks(e)===Um};at.isFragment=function(e){return ks(e)===Dm};at.isLazy=function(e){return ks(e)===qm};at.isMemo=function(e){return ks(e)===Wm};at.isPortal=function(e){return ks(e)===Kx};at.isProfiler=function(e){return ks(e)===zm};at.isStrictMode=function(e){return ks(e)===Fm};at.isSuspense=function(e){return ks(e)===Vm};at.isSuspenseList=function(e){return ks(e)===Hm};at.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Dm||e===zm||e===Fm||e===Vm||e===Hm||e===G5||typeof e=="object"&&e!==null&&(e.$$typeof===qm||e.$$typeof===Wm||e.$$typeof===Bm||e.$$typeof===$m||e.$$typeof===Um||e.$$typeof===s2||e.getModuleId!==void 0)};at.typeOf=ks;function Y5(){const e=M5();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const iw={notify(){},get:()=>[]};function J5(e,t){let r,n=iw,a=0,i=!1;function o(w){m();const y=n.subscribe(w);let k=!1;return()=>{k||(k=!0,y(),g())}}function c(){n.notify()}function d(){x.onStateChange&&x.onStateChange()}function h(){return i}function m(){a++,r||(r=e.subscribe(d),n=Y5())}function g(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=iw)}function p(){i||(i=!0,m())}function v(){i&&(i=!1,g())}const x={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:h,trySubscribe:p,tryUnsubscribe:v,getListeners:()=>n};return x}const X5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q5=X5?S.useLayoutEffect:S.useEffect;function eP({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const o=S.useMemo(()=>{const h=J5(e);return{store:e,subscription:h,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),c=S.useMemo(()=>e.getState(),[e]);Q5(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==e.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,c]);const d=t||Pa;return S.createElement(d.Provider,{value:o},r)}function n2(e=Pa){const t=e===Pa?JN:Ux(e);return function(){const{store:n}=t();return n}}const tP=n2();function rP(e=Pa){const t=e===Pa?tP:n2(e);return function(){return t().dispatch}}const it=rP();D5(T5.useSyncExternalStoreWithSelector);A5(WN.unstable_batchedUpdates);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lc.apply(this,arguments)}var la;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(la||(la={}));const ow="popstate";function sP(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:c}=n.location;return a0("",{pathname:i,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Mh(a)}return aP(t,r,null,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function a2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nP(){return Math.random().toString(36).substr(2,8)}function lw(e,t){return{usr:e.state,key:e.key,idx:t}}function a0(e,t,r,n){return r===void 0&&(r=null),Lc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Do(t):t,{state:r,key:t&&t.key||n||nP()})}function Mh(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Do(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function aP(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,c=la.Pop,d=null,h=m();h==null&&(h=0,o.replaceState(Lc({},o.state,{idx:h}),""));function m(){return(o.state||{idx:null}).idx}function g(){c=la.Pop;let y=m(),k=y==null?null:y-h;h=y,d&&d({action:c,location:w.location,delta:k})}function p(y,k){c=la.Push;let j=a0(w.location,y,k);h=m()+1;let N=lw(j,h),C=w.createHref(j);try{o.pushState(N,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(C)}i&&d&&d({action:c,location:w.location,delta:1})}function v(y,k){c=la.Replace;let j=a0(w.location,y,k);h=m();let N=lw(j,h),C=w.createHref(j);o.replaceState(N,"",C),i&&d&&d({action:c,location:w.location,delta:0})}function x(y){let k=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof y=="string"?y:Mh(y);return j=j.replace(/ $/,"%20"),Lt(k,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,k)}let w={get action(){return c},get location(){return e(a,o)},listen(y){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(ow,g),d=y,()=>{a.removeEventListener(ow,g),d=null}},createHref(y){return t(a,y)},createURL:x,encodeLocation(y){let k=x(y);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:p,replace:v,go(y){return o.go(y)}};return w}var cw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cw||(cw={}));function iP(e,t,r){return r===void 0&&(r="/"),oP(e,t,r)}function oP(e,t,r,n){let a=typeof t=="string"?Do(t):t,i=Zx(a.pathname||"/",r);if(i==null)return null;let o=i2(e);lP(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let h=vP(i);c=xP(o[d],h)}return c}function i2(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,c)=>{let d={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Lt(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let h=wa([n,d.relativePath]),m=r.concat(d);i.children&&i.children.length>0&&(Lt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),i2(i.children,t,m,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:gP(h,i.index),routesMeta:m})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,o);else for(let d of o2(i.path))a(i,o,d)}),t}function o2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=o2(n.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function lP(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:pP(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const cP=/^:[\w-]+$/,dP=3,uP=2,hP=1,mP=10,fP=-2,dw=e=>e==="*";function gP(e,t){let r=e.split("/"),n=r.length;return r.some(dw)&&(n+=fP),t&&(n+=uP),r.filter(a=>!dw(a)).reduce((a,i)=>a+(cP.test(i)?dP:i===""?hP:mP),n)}function pP(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function xP(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let c=0;c<n.length;++c){let d=n[c],h=c===n.length-1,m=i==="/"?t:t.slice(i.length)||"/",g=yP({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},m),p=d.route;if(!g)return null;Object.assign(a,g.params),o.push({params:a,pathname:wa([i,g.pathname]),pathnameBase:NP(wa([i,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(i=wa([i,g.pathnameBase]))}return o}function yP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=bP(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((h,m,g)=>{let{paramName:p,isOptional:v}=m;if(p==="*"){let w=c[g]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const x=c[g];return v&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:e}}function bP(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),a2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function vP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return a2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Zx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function wP(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Do(e):e;return{pathname:r?r.startsWith("/")?r:kP(r,t):t,search:_P(n),hash:SP(a)}}function kP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function pg(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jP(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Gx(e,t){let r=jP(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Yx(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Do(e):(a=Lc({},e),Lt(!a.pathname||!a.pathname.includes("?"),pg("?","pathname","search",a)),Lt(!a.pathname||!a.pathname.includes("#"),pg("#","pathname","hash",a)),Lt(!a.search||!a.search.includes("#"),pg("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,c;if(o==null)c=r;else{let g=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;a.pathname=p.join("/")}c=g>=0?t[g]:"/"}let d=wP(a,c),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(h||m)&&(d.pathname+="/"),d}const wa=e=>e.join("/").replace(/\/\/+/g,"/"),NP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),_P=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,SP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function CP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const l2=["post","put","patch","delete"];new Set(l2);const PP=["get",...l2];new Set(PP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tc.apply(this,arguments)}const Jx=S.createContext(null),EP=S.createContext(null),Ra=S.createContext(null),Km=S.createContext(null),gn=S.createContext({outlet:null,matches:[],isDataRoute:!1}),c2=S.createContext(null);function LP(e,t){let{relative:r}=t===void 0?{}:t;Fo()||Lt(!1);let{basename:n,navigator:a}=S.useContext(Ra),{hash:i,pathname:o,search:c}=h2(e,{relative:r}),d=o;return n!=="/"&&(d=o==="/"?n:wa([n,o])),a.createHref({pathname:d,search:c,hash:i})}function Fo(){return S.useContext(Km)!=null}function Cr(){return Fo()||Lt(!1),S.useContext(Km).location}function d2(e){S.useContext(Ra).static||S.useLayoutEffect(e)}function ss(){let{isDataRoute:e}=S.useContext(gn);return e?WP():TP()}function TP(){Fo()||Lt(!1);let e=S.useContext(Jx),{basename:t,future:r,navigator:n}=S.useContext(Ra),{matches:a}=S.useContext(gn),{pathname:i}=Cr(),o=JSON.stringify(Gx(a,r.v7_relativeSplatPath)),c=S.useRef(!1);return d2(()=>{c.current=!0}),S.useCallback(function(h,m){if(m===void 0&&(m={}),!c.current)return;if(typeof h=="number"){n.go(h);return}let g=Yx(h,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:wa([t,g.pathname])),(m.replace?n.replace:n.push)(g,m.state,m)},[t,n,o,i,e])}const IP=S.createContext(null);function AP(e){let t=S.useContext(gn).outlet;return t&&S.createElement(IP.Provider,{value:e},t)}function u2(){let{matches:e}=S.useContext(gn),t=e[e.length-1];return t?t.params:{}}function h2(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=S.useContext(Ra),{matches:a}=S.useContext(gn),{pathname:i}=Cr(),o=JSON.stringify(Gx(a,n.v7_relativeSplatPath));return S.useMemo(()=>Yx(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function MP(e,t){return OP(e,t)}function OP(e,t,r,n){Fo()||Lt(!1);let{navigator:a}=S.useContext(Ra),{matches:i}=S.useContext(gn),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let h=Cr(),m;if(t){var g;let y=typeof t=="string"?Do(t):t;d==="/"||(g=y.pathname)!=null&&g.startsWith(d)||Lt(!1),m=y}else m=h;let p=m.pathname||"/",v=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=iP(e,{pathname:v}),w=BP(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},c,y.params),pathname:wa([d,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:wa([d,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&w?S.createElement(Km.Provider,{value:{location:Tc({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:la.Pop}},w):w}function RP(){let e=HP(),t=CP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:a},r):null,null)}const DP=S.createElement(RP,null);class FP extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(gn.Provider,{value:this.props.routeContext},S.createElement(c2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zP(e){let{routeContext:t,match:r,children:n}=e,a=S.useContext(Jx);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(gn.Provider,{value:t},n)}function BP(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,c=(a=r)==null?void 0:a.errors;if(c!=null){let m=o.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);m>=0||Lt(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:p,errors:v}=r,x=g.route.loader&&p[g.route.id]===void 0&&(!v||v[g.route.id]===void 0);if(g.route.lazy||x){d=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,g,p)=>{let v,x=!1,w=null,y=null;r&&(v=c&&g.route.id?c[g.route.id]:void 0,w=g.route.errorElement||DP,d&&(h<0&&p===0?(qP("route-fallback"),x=!0,y=null):h===p&&(x=!0,y=g.route.hydrateFallbackElement||null)));let k=t.concat(o.slice(0,p+1)),j=()=>{let N;return v?N=w:x?N=y:g.route.Component?N=S.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=m,S.createElement(zP,{match:g,routeContext:{outlet:m,matches:k,isDataRoute:r!=null},children:N})};return r&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?S.createElement(FP,{location:r.location,revalidation:r.revalidation,component:w,error:v,children:j(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):j()},null)}var m2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(m2||{}),f2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(f2||{});function $P(e){let t=S.useContext(Jx);return t||Lt(!1),t}function UP(e){let t=S.useContext(EP);return t||Lt(!1),t}function VP(e){let t=S.useContext(gn);return t||Lt(!1),t}function g2(e){let t=VP(),r=t.matches[t.matches.length-1];return r.route.id||Lt(!1),r.route.id}function HP(){var e;let t=S.useContext(c2),r=UP(),n=g2();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function WP(){let{router:e}=$P(m2.UseNavigateStable),t=g2(f2.UseNavigateStable),r=S.useRef(!1);return d2(()=>{r.current=!0}),S.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Tc({fromRouteId:t},i)))},[e,t])}const uw={};function qP(e,t,r){uw[e]||(uw[e]=!0)}function KP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ic(e){let{to:t,replace:r,state:n,relative:a}=e;Fo()||Lt(!1);let{future:i,static:o}=S.useContext(Ra),{matches:c}=S.useContext(gn),{pathname:d}=Cr(),h=ss(),m=Yx(t,Gx(c,i.v7_relativeSplatPath),d,a==="path"),g=JSON.stringify(m);return S.useEffect(()=>h(JSON.parse(g),{replace:r,state:n,relative:a}),[h,g,a,r,n]),null}function ZP(e){return AP(e.context)}function Re(e){Lt(!1)}function GP(e){let{basename:t="/",children:r=null,location:n,navigationType:a=la.Pop,navigator:i,static:o=!1,future:c}=e;Fo()&&Lt(!1);let d=t.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:d,navigator:i,static:o,future:Tc({v7_relativeSplatPath:!1},c)}),[d,c,i,o]);typeof n=="string"&&(n=Do(n));let{pathname:m="/",search:g="",hash:p="",state:v=null,key:x="default"}=n,w=S.useMemo(()=>{let y=Zx(m,d);return y==null?null:{location:{pathname:y,search:g,hash:p,state:v,key:x},navigationType:a}},[d,m,g,p,v,x,a]);return w==null?null:S.createElement(Ra.Provider,{value:h},S.createElement(Km.Provider,{children:r,value:w}))}function YP(e){let{children:t,location:r}=e;return MP(i0(t),r)}new Promise(()=>{});function i0(e,t){t===void 0&&(t=[]);let r=[];return S.Children.forEach(e,(n,a)=>{if(!S.isValidElement(n))return;let i=[...t,a];if(n.type===S.Fragment){r.push.apply(r,i0(n.props.children,i));return}n.type!==Re&&Lt(!1),!n.props.index||!n.props.children||Lt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=i0(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o0.apply(this,arguments)}function JP(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function XP(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function QP(e,t){return e.button===0&&(!t||t==="_self")&&!XP(e)}function l0(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function eE(e,t){let r=l0(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const tE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rE="6";try{window.__reactRouterVersion=rE}catch{}const sE="startTransition",hw=r6[sE];function nE(e){let{basename:t,children:r,future:n,window:a}=e,i=S.useRef();i.current==null&&(i.current=sP({window:a,v5Compat:!0}));let o=i.current,[c,d]=S.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},m=S.useCallback(g=>{h&&hw?hw(()=>d(g)):d(g)},[d,h]);return S.useLayoutEffect(()=>o.listen(m),[o,m]),S.useEffect(()=>KP(n),[n]),S.createElement(GP,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:o,future:n})}const aE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=S.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:c,target:d,to:h,preventScrollReset:m,viewTransition:g}=t,p=JP(t,tE),{basename:v}=S.useContext(Ra),x,w=!1;if(typeof h=="string"&&iE.test(h)&&(x=h,aE))try{let N=new URL(window.location.href),C=h.startsWith("//")?new URL(N.protocol+h):new URL(h),P=Zx(C.pathname,v);C.origin===N.origin&&P!=null?h=P+C.search+C.hash:w=!0}catch{}let y=LP(h,{relative:a}),k=oE(h,{replace:o,state:c,target:d,preventScrollReset:m,relative:a,viewTransition:g});function j(N){n&&n(N),N.defaultPrevented||k(N)}return S.createElement("a",o0({},p,{href:x||y,onClick:w||i?n:j,ref:r,target:d}))});var mw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(mw||(mw={}));var fw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fw||(fw={}));function oE(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:c}=t===void 0?{}:t,d=ss(),h=Cr(),m=h2(e,{relative:o});return S.useCallback(g=>{if(QP(g,r)){g.preventDefault();let p=n!==void 0?n:Mh(h)===Mh(m);d(e,{replace:p,state:a,preventScrollReset:i,relative:o,viewTransition:c})}},[h,d,m,n,a,r,e,i,o,c])}function lE(e){let t=S.useRef(l0(e)),r=S.useRef(!1),n=Cr(),a=S.useMemo(()=>eE(n.search,r.current?null:t.current),[n.search]),i=ss(),o=S.useCallback((c,d)=>{const h=l0(typeof c=="function"?c(a):c);r.current=!0,i("?"+h,d)},[i,a]);return[a,o]}let cE={data:""},dE=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||cE},uE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,hE=/\/\*[^]*?\*\/|  +/g,gw=/\n+/g,sa=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?sa(o,i):i+"{"+sa(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=sa(o,t?t.replace(/([^,])+/g,c=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,c):c?c+" "+d:d)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=sa.p?sa.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},kn={},p2=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+p2(e[r]);return t}return e},mE=(e,t,r,n,a)=>{let i=p2(e),o=kn[i]||(kn[i]=(d=>{let h=0,m=11;for(;h<d.length;)m=101*m+d.charCodeAt(h++)>>>0;return"go"+m})(i));if(!kn[o]){let d=i!==e?e:(h=>{let m,g,p=[{}];for(;m=uE.exec(h.replace(hE,""));)m[4]?p.shift():m[3]?(g=m[3].replace(gw," ").trim(),p.unshift(p[0][g]=p[0][g]||{})):p[0][m[1]]=m[2].replace(gw," ").trim();return p[0]})(e);kn[o]=sa(a?{["@keyframes "+o]:d}:d,r?"":"."+o)}let c=r&&kn.g?kn.g:null;return r&&(kn.g=kn[o]),((d,h,m,g)=>{g?h.data=h.data.replace(g,d):h.data.indexOf(d)===-1&&(h.data=m?d+h.data:h.data+d)})(kn[o],t,n,c),o},fE=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let c=o(r),d=c&&c.props&&c.props.className||/^go/.test(c)&&c;o=d?"."+d:c&&typeof c=="object"?c.props?"":sa(c,""):c===!1?"":c}return n+a+(o??"")},"");function Zm(e){let t=this||{},r=e.call?e(t.p):e;return mE(r.unshift?r.raw?fE(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,dE(t.target),t.g,t.o,t.k)}let x2,c0,d0;Zm.bind({g:1});let Un=Zm.bind({k:1});function gE(e,t,r,n){sa.p=t,x2=e,c0=r,d0=n}function Da(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let c=Object.assign({},i),d=c.className||a.className;r.p=Object.assign({theme:c0&&c0()},c),r.o=/ *go\d+/.test(d),c.className=Zm.apply(r,n)+(d?" "+d:"");let h=e;return e[0]&&(h=c.as||e,delete c.as),d0&&h[0]&&d0(c),x2(h,c)}return a}}var pE=e=>typeof e=="function",Oh=(e,t)=>pE(e)?e(t):e,xE=(()=>{let e=0;return()=>(++e).toString()})(),y2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),yE=20,Xx="default",b2=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return b2(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},ku=[],v2={toasts:[],pausedAt:void 0,settings:{toastLimit:yE}},en={},w2=(e,t=Xx)=>{en[t]=b2(en[t]||v2,e),ku.forEach(([r,n])=>{r===t&&n(en[t])})},k2=e=>Object.keys(en).forEach(t=>w2(e,t)),bE=e=>Object.keys(en).find(t=>en[t].toasts.some(r=>r.id===e)),Gm=(e=Xx)=>t=>{w2(t,e)},vE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},wE=(e={},t=Xx)=>{let[r,n]=S.useState(en[t]||v2),a=S.useRef(en[t]);S.useEffect(()=>(a.current!==en[t]&&n(en[t]),ku.push([t,n]),()=>{let o=ku.findIndex(([c])=>c===t);o>-1&&ku.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var c,d,h;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((c=e[o.type])==null?void 0:c.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((d=e[o.type])==null?void 0:d.duration)||(e==null?void 0:e.duration)||vE[o.type],style:{...e.style,...(h=e[o.type])==null?void 0:h.style,...o.style}}});return{...r,toasts:i}},kE=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||xE()}),Yc=e=>(t,r)=>{let n=kE(t,e,r);return Gm(n.toasterId||bE(n.id))({type:2,toast:n}),n.id},Xe=(e,t)=>Yc("blank")(e,t);Xe.error=Yc("error");Xe.success=Yc("success");Xe.loading=Yc("loading");Xe.custom=Yc("custom");Xe.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Gm(t)(r):k2(r)};Xe.dismissAll=e=>Xe.dismiss(void 0,e);Xe.remove=(e,t)=>{let r={type:4,toastId:e};t?Gm(t)(r):k2(r)};Xe.removeAll=e=>Xe.remove(void 0,e);Xe.promise=(e,t,r)=>{let n=Xe.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?Oh(t.success,a):void 0;return i?Xe.success(i,{id:n,...r,...r==null?void 0:r.success}):Xe.dismiss(n),a}).catch(a=>{let i=t.error?Oh(t.error,a):void 0;i?Xe.error(i,{id:n,...r,...r==null?void 0:r.error}):Xe.dismiss(n)}),e};var jE=1e3,NE=(e,t="default")=>{let{toasts:r,pausedAt:n}=wE(e,t),a=S.useRef(new Map).current,i=S.useCallback((g,p=jE)=>{if(a.has(g))return;let v=setTimeout(()=>{a.delete(g),o({type:4,toastId:g})},p);a.set(g,v)},[]);S.useEffect(()=>{if(n)return;let g=Date.now(),p=r.map(v=>{if(v.duration===1/0)return;let x=(v.duration||0)+v.pauseDuration-(g-v.createdAt);if(x<0){v.visible&&Xe.dismiss(v.id);return}return setTimeout(()=>Xe.dismiss(v.id,t),x)});return()=>{p.forEach(v=>v&&clearTimeout(v))}},[r,n,t]);let o=S.useCallback(Gm(t),[t]),c=S.useCallback(()=>{o({type:5,time:Date.now()})},[o]),d=S.useCallback((g,p)=>{o({type:1,toast:{id:g,height:p}})},[o]),h=S.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),m=S.useCallback((g,p)=>{let{reverseOrder:v=!1,gutter:x=8,defaultPosition:w}=p||{},y=r.filter(N=>(N.position||w)===(g.position||w)&&N.height),k=y.findIndex(N=>N.id===g.id),j=y.filter((N,C)=>C<k&&N.visible).length;return y.filter(N=>N.visible).slice(...v?[j+1]:[0,j]).reduce((N,C)=>N+(C.height||0)+x,0)},[r]);return S.useEffect(()=>{r.forEach(g=>{if(g.dismissed)i(g.id,g.removeDelay);else{let p=a.get(g.id);p&&(clearTimeout(p),a.delete(g.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:d,startPause:c,endPause:h,calculateOffset:m}}},_E=Un`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,SE=Un`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,CE=Un`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,PE=Da("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_E} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${SE} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${CE} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,EE=Un`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,LE=Da("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${EE} 1s linear infinite;
`,TE=Un`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,IE=Un`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,AE=Da("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${IE} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ME=Da("div")`
  position: absolute;
`,OE=Da("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,RE=Un`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,DE=Da("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${RE} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,FE=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?S.createElement(DE,null,t):t:r==="blank"?null:S.createElement(OE,null,S.createElement(LE,{...n}),r!=="loading"&&S.createElement(ME,null,r==="error"?S.createElement(PE,{...n}):S.createElement(AE,{...n})))},zE=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,BE=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,$E="0%{opacity:0;} 100%{opacity:1;}",UE="0%{opacity:1;} 100%{opacity:0;}",VE=Da("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,HE=Da("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,WE=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=y2()?[$E,UE]:[zE(r),BE(r)];return{animation:t?`${Un(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Un(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qE=S.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?WE(e.position||t||"top-center",e.visible):{opacity:0},i=S.createElement(FE,{toast:e}),o=S.createElement(HE,{...e.ariaProps},Oh(e.message,e));return S.createElement(VE,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):S.createElement(S.Fragment,null,i,o))});gE(S.createElement);var KE=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=S.useCallback(o=>{if(o){let c=()=>{let d=o.getBoundingClientRect().height;n(e,d)};c(),new MutationObserver(c).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return S.createElement("div",{ref:i,className:t,style:r},a)},ZE=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:y2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},GE=Zm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Vd=16,YE=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,toasterId:i,containerStyle:o,containerClassName:c})=>{let{toasts:d,handlers:h}=NE(r,i);return S.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Vd,left:Vd,right:Vd,bottom:Vd,pointerEvents:"none",...o},className:c,onMouseEnter:h.startPause,onMouseLeave:h.endPause},d.map(m=>{let g=m.position||t,p=h.calculateOffset(m,{reverseOrder:e,gutter:n,defaultPosition:t}),v=ZE(g,p);return S.createElement(KE,{id:m.id,key:m.id,onHeightUpdate:h.updateHeight,className:m.visible?GE:"",style:v},m.type==="custom"?Oh(m.message,m):a?a(m):S.createElement(qE,{toast:m,position:g}))}))},Z=Xe;const j2=S.createContext(void 0),N2=({children:e})=>{const[t,r]=S.useState(()=>localStorage.getItem("preferred_language")==="en"?"en":"is"),[n,a]=S.useState({}),[i,o]=S.useState(!1),c=["is","en"],d=S.useCallback((x,w)=>{let y=n[x];return y?(w&&Object.keys(w).forEach(k=>{const j=new RegExp(`\\{${k}\\}`,"g");y=y.replace(j,String(w[k]))}),y):x},[n,t]),h=S.useCallback(async()=>{o(!0);try{const w=await fetch(`http://192.168.8.62:5000/api/translations?locale=${t}`);if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const y=await w.json();if(y.success&&Array.isArray(y.data)){const k=y.data.reduce((j,N)=>(j[N.key]=N.value,j),{});a(k)}else console.error("Failed to load translations: Invalid response format",y),m()}catch(x){console.error("Error loading translations:",x),m()}finally{o(!1)}},[t]),m=()=>{const x={is:{"nav.home":"Heim","nav.products":"Vrur","nav.cart":"Karfa","nav.orders":"Pantanir","nav.profile":"Prfll","nav.admin":"Stjrnbor","nav.login":"Innskrning","nav.logout":"tskrning","common.loading":"Hleur...","common.error":"Villa","common.success":"Tkst","common.save":"Vista","common.cancel":"Htta vi","common.delete":"Eya","common.edit":"Breyta","common.add":"Bta vi","common.search":"Leita","common.filter":"Sa","common.sort":"Raa","common.yes":"J","common.no":"Nei"},en:{"nav.home":"Home","nav.products":"Products","nav.cart":"Cart","nav.orders":"Orders","nav.profile":"Profile","nav.admin":"Admin","nav.login":"Login","nav.logout":"Logout","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.save":"Save","common.cancel":"Cancel","common.delete":"Delete","common.edit":"Edit","common.add":"Add","common.search":"Search","common.filter":"Filter","common.sort":"Sort","common.yes":"Yes","common.no":"No"}};a(x[t]||x.is)};S.useEffect(()=>{h()},[h]);const g=S.useCallback(x=>{c.includes(x)?(r(x),localStorage.setItem("preferred_language",x)):console.error(`Invalid language: ${x}. Available languages:`,c)},[c]),p=S.useCallback(async()=>{await h()},[h]),v={currentLanguage:t,setCurrentLanguage:g,t:d,isLoading:i,refreshTranslations:p,availableLanguages:c};return s.jsx(j2.Provider,{value:v,children:e})},xe=()=>{const e=S.useContext(j2);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e},_2=S.createContext(void 0),JE=({children:e})=>{const[t,r]=S.useState(!1),a={sidebarOpen:t,setSidebarOpen:r,toggleSidebar:()=>{r(i=>!i)}};return s.jsx(_2.Provider,{value:a,children:e})},Qx=()=>{const e=S.useContext(_2);if(e===void 0)throw new Error("useAdminSidebar must be used within an AdminSidebarProvider");return e};function Is(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ea(e){return!!e&&!!e[yt]}function Vn(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===iL}(e)||Array.isArray(e)||!!e[kw]||!!(!((t=e.constructor)===null||t===void 0)&&t[kw])||ey(e)||ty(e))}function bi(e,t,r){r===void 0&&(r=!1),zo(e)===0?(r?Object.keys:ho)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function zo(e){var t=e[yt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:ey(e)?2:ty(e)?3:0}function uo(e,t){return zo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XE(e,t){return zo(e)===2?e.get(t):e[t]}function S2(e,t,r){var n=zo(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function C2(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function ey(e){return nL&&e instanceof Map}function ty(e){return aL&&e instanceof Set}function Xa(e){return e.o||e.t}function ry(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=E2(e);delete t[yt];for(var r=ho(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function sy(e,t){return t===void 0&&(t=!1),ny(e)||Ea(e)||!Vn(e)||(zo(e)>1&&(e.set=e.add=e.clear=e.delete=QE),Object.freeze(e),t&&bi(e,function(r,n){return sy(n,!0)},!0)),e}function QE(){Is(2)}function ny(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function nn(e){var t=f0[e];return t||Is(18,e),t}function eL(e,t){f0[e]||(f0[e]=t)}function u0(){return Ac}function xg(e,t){t&&(nn("Patches"),e.u=[],e.s=[],e.v=t)}function Rh(e){h0(e),e.p.forEach(tL),e.p=null}function h0(e){e===Ac&&(Ac=e.l)}function pw(e){return Ac={p:[],l:Ac,h:e,m:!0,_:0}}function tL(e){var t=e[yt];t.i===0||t.i===1?t.j():t.g=!0}function yg(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||nn("ES5").S(t,e,n),n?(r[yt].P&&(Rh(t),Is(4)),Vn(e)&&(e=Dh(t,e),t.l||Fh(t,e)),t.u&&nn("Patches").M(r[yt].t,e,t.u,t.s)):e=Dh(t,r,[]),Rh(t),t.u&&t.v(t.u,t.s),e!==P2?e:void 0}function Dh(e,t,r){if(ny(t))return t;var n=t[yt];if(!n)return bi(t,function(c,d){return xw(e,n,t,c,d,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Fh(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=ry(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),bi(i,function(c,d){return xw(e,n,a,c,d,r,o)}),Fh(e,a,!1),r&&e.u&&nn("Patches").N(n,r,e.u,e.s)}return n.o}function xw(e,t,r,n,a,i,o){if(Ea(a)){var c=Dh(e,a,i&&t&&t.i!==3&&!uo(t.R,n)?i.concat(n):void 0);if(S2(r,n,c),!Ea(c))return;e.m=!1}else o&&r.add(a);if(Vn(a)&&!ny(a)){if(!e.h.D&&e._<1)return;Dh(e,a),t&&t.A.l||Fh(e,a)}}function Fh(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&sy(t,r)}function bg(e,t){var r=e[yt];return(r?Xa(r):e)[t]}function yw(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function na(e){e.P||(e.P=!0,e.l&&na(e.l))}function vg(e){e.o||(e.o=ry(e.t))}function m0(e,t,r){var n=ey(t)?nn("MapSet").F(t,r):ty(t)?nn("MapSet").T(t,r):e.O?function(a,i){var o=Array.isArray(a),c={i:o?1:0,A:i?i.A:u0(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},d=c,h=Mc;o&&(d=[c],h=jl);var m=Proxy.revocable(d,h),g=m.revoke,p=m.proxy;return c.k=p,c.j=g,p}(t,r):nn("ES5").J(t,r);return(r?r.A:u0()).p.push(n),n}function rL(e){return Ea(e)||Is(22,e),function t(r){if(!Vn(r))return r;var n,a=r[yt],i=zo(r);if(a){if(!a.P&&(a.i<4||!nn("ES5").K(a)))return a.t;a.I=!0,n=bw(r,i),a.I=!1}else n=bw(r,i);return bi(n,function(o,c){a&&XE(a.t,o)===c||S2(n,o,t(c))}),i===3?new Set(n):n}(e)}function bw(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ry(e)}function sL(){function e(i,o){var c=a[i];return c?c.enumerable=o:a[i]=c={configurable:!0,enumerable:o,get:function(){var d=this[yt];return Mc.get(d,i)},set:function(d){var h=this[yt];Mc.set(h,i,d)}},c}function t(i){for(var o=i.length-1;o>=0;o--){var c=i[o][yt];if(!c.P)switch(c.i){case 5:n(c)&&na(c);break;case 4:r(c)&&na(c)}}}function r(i){for(var o=i.t,c=i.k,d=ho(c),h=d.length-1;h>=0;h--){var m=d[h];if(m!==yt){var g=o[m];if(g===void 0&&!uo(o,m))return!0;var p=c[m],v=p&&p[yt];if(v?v.t!==g:!C2(p,g))return!0}}var x=!!o[yt];return d.length!==ho(o).length+(x?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var c=Object.getOwnPropertyDescriptor(o,o.length-1);if(c&&!c.get)return!0;for(var d=0;d<o.length;d++)if(!o.hasOwnProperty(d))return!0;return!1}var a={};eL("ES5",{J:function(i,o){var c=Array.isArray(i),d=function(m,g){if(m){for(var p=Array(g.length),v=0;v<g.length;v++)Object.defineProperty(p,""+v,e(v,!0));return p}var x=E2(g);delete x[yt];for(var w=ho(x),y=0;y<w.length;y++){var k=w[y];x[k]=e(k,m||!!x[k].enumerable)}return Object.create(Object.getPrototypeOf(g),x)}(c,i),h={i:c?5:4,A:o?o.A:u0(),P:!1,I:!1,R:{},l:o,t:i,k:d,o:null,g:!1,C:!1};return Object.defineProperty(d,yt,{value:h,writable:!0}),d},S:function(i,o,c){c?Ea(o)&&o[yt].A===i&&t(i.p):(i.u&&function d(h){if(h&&typeof h=="object"){var m=h[yt];if(m){var g=m.t,p=m.k,v=m.R,x=m.i;if(x===4)bi(p,function(N){N!==yt&&(g[N]!==void 0||uo(g,N)?v[N]||d(p[N]):(v[N]=!0,na(m)))}),bi(g,function(N){p[N]!==void 0||uo(p,N)||(v[N]=!1,na(m))});else if(x===5){if(n(m)&&(na(m),v.length=!0),p.length<g.length)for(var w=p.length;w<g.length;w++)v[w]=!1;else for(var y=g.length;y<p.length;y++)v[y]=!0;for(var k=Math.min(p.length,g.length),j=0;j<k;j++)p.hasOwnProperty(j)||(v[j]=!0),v[j]===void 0&&d(p[j])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var vw,Ac,ay=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",nL=typeof Map<"u",aL=typeof Set<"u",ww=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",P2=ay?Symbol.for("immer-nothing"):((vw={})["immer-nothing"]=!0,vw),kw=ay?Symbol.for("immer-draftable"):"__$immer_draftable",yt=ay?Symbol.for("immer-state"):"__$immer_state",iL=""+Object.prototype.constructor,ho=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,E2=Object.getOwnPropertyDescriptors||function(e){var t={};return ho(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},f0={},Mc={get:function(e,t){if(t===yt)return e;var r=Xa(e);if(!uo(r,t))return function(a,i,o){var c,d=yw(i,o);return d?"value"in d?d.value:(c=d.get)===null||c===void 0?void 0:c.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!Vn(n)?n:n===bg(e.t,t)?(vg(e),e.o[t]=m0(e.A.h,n,e)):n},has:function(e,t){return t in Xa(e)},ownKeys:function(e){return Reflect.ownKeys(Xa(e))},set:function(e,t,r){var n=yw(Xa(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=bg(Xa(e),t),i=a==null?void 0:a[yt];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(C2(r,a)&&(r!==void 0||uo(e.t,t)))return!0;vg(e),na(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return bg(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,vg(e),na(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Xa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){Is(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Is(12)}},jl={};bi(Mc,function(e,t){jl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),jl.deleteProperty=function(e,t){return jl.set.call(this,e,t,void 0)},jl.set=function(e,t,r){return Mc.set.call(this,e[0],t,r,e[0])};var oL=function(){function e(r){var n=this;this.O=ww,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var c=i;i=a;var d=n;return function(w){var y=this;w===void 0&&(w=c);for(var k=arguments.length,j=Array(k>1?k-1:0),N=1;N<k;N++)j[N-1]=arguments[N];return d.produce(w,function(C){var P;return(P=i).call.apply(P,[y,C].concat(j))})}}var h;if(typeof i!="function"&&Is(6),o!==void 0&&typeof o!="function"&&Is(7),Vn(a)){var m=pw(n),g=m0(n,a,void 0),p=!0;try{h=i(g),p=!1}finally{p?Rh(m):h0(m)}return typeof Promise<"u"&&h instanceof Promise?h.then(function(w){return xg(m,o),yg(w,m)},function(w){throw Rh(m),w}):(xg(m,o),yg(h,m))}if(!a||typeof a!="object"){if((h=i(a))===void 0&&(h=a),h===P2&&(h=void 0),n.D&&sy(h,!0),o){var v=[],x=[];nn("Patches").M(a,h,v,x),o(v,x)}return h}Is(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(h){for(var m=arguments.length,g=Array(m>1?m-1:0),p=1;p<m;p++)g[p-1]=arguments[p];return n.produceWithPatches(h,function(v){return a.apply(void 0,[v].concat(g))})};var o,c,d=n.produce(a,i,function(h,m){o=h,c=m});return typeof Promise<"u"&&d instanceof Promise?d.then(function(h){return[h,o,c]}):[d,o,c]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Vn(r)||Is(8),Ea(r)&&(r=rL(r));var n=pw(this),a=m0(this,r,void 0);return a[yt].C=!0,h0(n),a},t.finishDraft=function(r,n){var a=r&&r[yt],i=a.A;return xg(i,n),yg(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!ww&&Is(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=nn("Patches").$;return Ea(r)?o(r,n):this.produce(r,function(c){return o(c,n)})},e}(),Qr=new oL,L2=Qr.produce;Qr.produceWithPatches.bind(Qr);Qr.setAutoFreeze.bind(Qr);Qr.setUseProxies.bind(Qr);Qr.applyPatches.bind(Qr);Qr.createDraft.bind(Qr);Qr.finishDraft.bind(Qr);function Oc(e){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oc(e)}function lL(e,t){if(Oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cL(e){var t=lL(e,"string");return Oc(t)=="symbol"?t:t+""}function dL(e,t,r){return(t=cL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jw(Object(r),!0).forEach(function(n){dL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var _w=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),wg=function(){return Math.random().toString(36).substring(7).split("").join(".")},zh={INIT:"@@redux/INIT"+wg(),REPLACE:"@@redux/REPLACE"+wg(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+wg()}};function uL(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function T2(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(dr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(dr(1));return r(T2)(e,t)}if(typeof e!="function")throw new Error(dr(2));var a=e,i=t,o=[],c=o,d=!1;function h(){c===o&&(c=o.slice())}function m(){if(d)throw new Error(dr(3));return i}function g(w){if(typeof w!="function")throw new Error(dr(4));if(d)throw new Error(dr(5));var y=!0;return h(),c.push(w),function(){if(y){if(d)throw new Error(dr(6));y=!1,h();var j=c.indexOf(w);c.splice(j,1),o=null}}}function p(w){if(!uL(w))throw new Error(dr(7));if(typeof w.type>"u")throw new Error(dr(8));if(d)throw new Error(dr(9));try{d=!0,i=a(i,w)}finally{d=!1}for(var y=o=c,k=0;k<y.length;k++){var j=y[k];j()}return w}function v(w){if(typeof w!="function")throw new Error(dr(10));a=w,p({type:zh.REPLACE})}function x(){var w,y=g;return w={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(dr(11));function N(){j.next&&j.next(m())}N();var C=y(N);return{unsubscribe:C}}},w[_w]=function(){return this},w}return p({type:zh.INIT}),n={dispatch:p,subscribe:g,getState:m,replaceReducer:v},n[_w]=x,n}function hL(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:zh.INIT});if(typeof n>"u")throw new Error(dr(12));if(typeof r(void 0,{type:zh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(dr(13))})}function mL(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),o;try{hL(r)}catch(c){o=c}return function(d,h){if(d===void 0&&(d={}),o)throw o;for(var m=!1,g={},p=0;p<i.length;p++){var v=i[p],x=r[v],w=d[v],y=x(w,h);if(typeof y>"u")throw h&&h.type,new Error(dr(14));g[v]=y,m=m||y!==w}return m=m||i.length!==Object.keys(d).length,m?g:d}}function Bh(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function fL(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(dr(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},c=t.map(function(d){return d(o)});return i=Bh.apply(void 0,c)(a.dispatch),Nw(Nw({},a),{},{dispatch:i})}}}function I2(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(o){return function(c){return typeof c=="function"?c(a,i,e):o(c)}}};return t}var g0=I2();g0.withExtraArgument=I2;var A2=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gL=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(m){return d([h,m])}}function d(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=h[0]&2?a.return:h[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,h[1])).done)return i;switch(a=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,a=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],a=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Co=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},pL=Object.defineProperty,xL=Object.defineProperties,yL=Object.getOwnPropertyDescriptors,Sw=Object.getOwnPropertySymbols,bL=Object.prototype.hasOwnProperty,vL=Object.prototype.propertyIsEnumerable,Cw=function(e,t,r){return t in e?pL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ka=function(e,t){for(var r in t||(t={}))bL.call(t,r)&&Cw(e,r,t[r]);if(Sw)for(var n=0,a=Sw(t);n<a.length;n++){var r=a[n];vL.call(t,r)&&Cw(e,r,t[r])}return e},kg=function(e,t){return xL(e,yL(t))},wL=function(e,t,r){return new Promise(function(n,a){var i=function(d){try{c(r.next(d))}catch(h){a(h)}},o=function(d){try{c(r.throw(d))}catch(h){a(h)}},c=function(d){return d.done?n(d.value):Promise.resolve(d.value).then(i,o)};c((r=r.apply(e,t)).next())})},kL=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Bh:Bh.apply(null,arguments)};function jL(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function ja(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ka(ka({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var NL=function(e){A2(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Co([void 0],r[0].concat(this)))):new(t.bind.apply(t,Co([void 0],r.concat(this))))},t}(Array),_L=function(e){A2(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Co([void 0],r[0].concat(this)))):new(t.bind.apply(t,Co([void 0],r.concat(this))))},t}(Array);function p0(e){return Vn(e)?L2(e,function(){}):e}function SL(e){return typeof e=="boolean"}function CL(){return function(t){return PL(t)}}function PL(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new NL;return r&&(SL(r)?n.push(g0):n.push(g0.withExtraArgument(r.extraArgument))),n}function EL(e){var t=CL(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,c=r.devTools,d=c===void 0?!0:c,h=r.preloadedState,m=h===void 0?void 0:h,g=r.enhancers,p=g===void 0?void 0:g,v;if(typeof a=="function")v=a;else if(jL(a))v=mL(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var x=o;typeof x=="function"&&(x=x(t));var w=fL.apply(void 0,x),y=Bh;d&&(y=kL(ka({trace:!1},typeof d=="object"&&d)));var k=new _L(w),j=k;Array.isArray(p)?j=Co([w],p):typeof p=="function"&&(j=p(k));var N=y.apply(void 0,j);return T2(v,m,N)}function M2(e){var t={},r=[],n,a={addCase:function(i,o){var c=typeof i=="string"?i:i.type;if(!c)throw new Error("`builder.addCase` cannot be called with an empty action type");if(c in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[c]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function LL(e){return typeof e=="function"}function TL(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?M2(t):[t,r,n],i=a[0],o=a[1],c=a[2],d;if(LL(e))d=function(){return p0(e())};else{var h=p0(e);d=function(){return h}}function m(g,p){g===void 0&&(g=d());var v=Co([i[p.type]],o.filter(function(x){var w=x.matcher;return w(p)}).map(function(x){var w=x.reducer;return w}));return v.filter(function(x){return!!x}).length===0&&(v=[c]),v.reduce(function(x,w){if(w)if(Ea(x)){var y=x,k=w(y,p);return k===void 0?x:k}else{if(Vn(x))return L2(x,function(j){return w(j,p)});var k=w(x,p);if(k===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return k}return x},g)}return m.getInitialState=d,m}function IL(e,t){return e+"/"+t}function Vr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:p0(e.initialState),n=e.reducers||{},a=Object.keys(n),i={},o={},c={};a.forEach(function(m){var g=n[m],p=IL(t,m),v,x;"reducer"in g?(v=g.reducer,x=g.prepare):v=g,i[m]=v,o[p]=v,c[m]=x?ja(p,x):ja(p)});function d(){var m=typeof e.extraReducers=="function"?M2(e.extraReducers):[e.extraReducers],g=m[0],p=g===void 0?{}:g,v=m[1],x=v===void 0?[]:v,w=m[2],y=w===void 0?void 0:w,k=ka(ka({},p),o);return TL(r,function(j){for(var N in k)j.addCase(N,k[N]);for(var C=0,P=x;C<P.length;C++){var E=P[C];j.addMatcher(E.matcher,E.reducer)}y&&j.addDefaultCase(y)})}var h;return{name:t,reducer:function(m,g){return h||(h=d()),h(m,g)},actions:c,caseReducers:i,getInitialState:function(){return h||(h=d()),h.getInitialState()}}}var AL="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",ML=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=AL[Math.random()*64|0];return t},OL=["name","message","stack","code"],jg=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Pw=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),RL=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=OL;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}},ve=function(){function e(t,r,n){var a=ja(t+"/fulfilled",function(h,m,g,p){return{payload:h,meta:kg(ka({},p||{}),{arg:g,requestId:m,requestStatus:"fulfilled"})}}),i=ja(t+"/pending",function(h,m,g){return{payload:void 0,meta:kg(ka({},g||{}),{arg:m,requestId:h,requestStatus:"pending"})}}),o=ja(t+"/rejected",function(h,m,g,p,v){return{payload:p,error:(n&&n.serializeError||RL)(h||"Rejected"),meta:kg(ka({},v||{}),{arg:g,requestId:m,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(h==null?void 0:h.name)==="AbortError",condition:(h==null?void 0:h.name)==="ConditionError"})}}),c=typeof AbortController<"u"?AbortController:function(){function h(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return h.prototype.abort=function(){},h}();function d(h){return function(m,g,p){var v=n!=null&&n.idGenerator?n.idGenerator(h):ML(),x=new c,w;function y(j){w=j,x.abort()}var k=function(){return wL(this,null,function(){var j,N,C,P,E,I,M;return gL(this,function(T){switch(T.label){case 0:return T.trys.push([0,4,,5]),P=(j=n==null?void 0:n.condition)==null?void 0:j.call(n,h,{getState:g,extra:p}),FL(P)?[4,P]:[3,2];case 1:P=T.sent(),T.label=2;case 2:if(P===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return E=new Promise(function(H,J){return x.signal.addEventListener("abort",function(){return J({name:"AbortError",message:w||"Aborted"})})}),m(i(v,h,(N=n==null?void 0:n.getPendingMeta)==null?void 0:N.call(n,{requestId:v,arg:h},{getState:g,extra:p}))),[4,Promise.race([E,Promise.resolve(r(h,{dispatch:m,getState:g,extra:p,requestId:v,signal:x.signal,abort:y,rejectWithValue:function(H,J){return new jg(H,J)},fulfillWithValue:function(H,J){return new Pw(H,J)}})).then(function(H){if(H instanceof jg)throw H;return H instanceof Pw?a(H.payload,v,h,H.meta):a(H,v,h)})])];case 3:return C=T.sent(),[3,5];case 4:return I=T.sent(),C=I instanceof jg?o(null,v,h,I.payload,I.meta):o(I,v,h),[3,5];case 5:return M=n&&!n.dispatchConditionRejection&&o.match(C)&&C.meta.condition,M||m(C),[2,C]}})})}();return Object.assign(k,{abort:y,requestId:v,arg:h,unwrap:function(){return k.then(DL)}})}}return Object.assign(d,{pending:i,rejected:o,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e}();function DL(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function FL(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var iy="listenerMiddleware";ja(iy+"/add");ja(iy+"/removeAll");ja(iy+"/remove");var Ew;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);sL();function O2(e,t){return function(){return e.apply(t,arguments)}}const{toString:zL}=Object.prototype,{getPrototypeOf:oy}=Object,{iterator:Ym,toStringTag:R2}=Symbol,Jm=(e=>t=>{const r=zL.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),zs=e=>(e=e.toLowerCase(),t=>Jm(t)===e),Xm=e=>t=>typeof t===e,{isArray:Bo}=Array,Po=Xm("undefined");function Jc(e){return e!==null&&!Po(e)&&e.constructor!==null&&!Po(e.constructor)&&zr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const D2=zs("ArrayBuffer");function BL(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&D2(e.buffer),t}const $L=Xm("string"),zr=Xm("function"),F2=Xm("number"),Xc=e=>e!==null&&typeof e=="object",UL=e=>e===!0||e===!1,ju=e=>{if(Jm(e)!=="object")return!1;const t=oy(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(R2 in e)&&!(Ym in e)},VL=e=>{if(!Xc(e)||Jc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},HL=zs("Date"),WL=zs("File"),qL=zs("Blob"),KL=zs("FileList"),ZL=e=>Xc(e)&&zr(e.pipe),GL=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||zr(e.append)&&((t=Jm(e))==="formdata"||t==="object"&&zr(e.toString)&&e.toString()==="[object FormData]"))},YL=zs("URLSearchParams"),[JL,XL,QL,eT]=["ReadableStream","Request","Response","Headers"].map(zs),tT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qc(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Bo(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(Jc(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let c;for(n=0;n<o;n++)c=i[n],t.call(null,e[c],c,e)}}function z2(e,t){if(Jc(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,B2=e=>!Po(e)&&e!==ni;function x0(){const{caseless:e,skipUndefined:t}=B2(this)&&this||{},r={},n=(a,i)=>{const o=e&&z2(r,i)||i;ju(r[o])&&ju(a)?r[o]=x0(r[o],a):ju(a)?r[o]=x0({},a):Bo(a)?r[o]=a.slice():(!t||!Po(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Qc(arguments[a],n);return r}const rT=(e,t,r,{allOwnKeys:n}={})=>(Qc(t,(a,i)=>{r&&zr(a)?e[i]=O2(a,r):e[i]=a},{allOwnKeys:n}),e),sT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),nT=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},aT=(e,t,r,n)=>{let a,i,o;const c={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!c[o]&&(t[o]=e[o],c[o]=!0);e=r!==!1&&oy(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},iT=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},oT=e=>{if(!e)return null;if(Bo(e))return e;let t=e.length;if(!F2(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},lT=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&oy(Uint8Array)),cT=(e,t)=>{const n=(e&&e[Ym]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},dT=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},uT=zs("HTMLFormElement"),hT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Lw=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),mT=zs("RegExp"),$2=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Qc(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},fT=e=>{$2(e,(t,r)=>{if(zr(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(zr(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},gT=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Bo(e)?n(e):n(String(e).split(t)),r},pT=()=>{},xT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function yT(e){return!!(e&&zr(e.append)&&e[R2]==="FormData"&&e[Ym])}const bT=e=>{const t=new Array(10),r=(n,a)=>{if(Xc(n)){if(t.indexOf(n)>=0)return;if(Jc(n))return n;if(!("toJSON"in n)){t[a]=n;const i=Bo(n)?[]:{};return Qc(n,(o,c)=>{const d=r(o,a+1);!Po(d)&&(i[c]=d)}),t[a]=void 0,i}}return n};return r(e,0)},vT=zs("AsyncFunction"),wT=e=>e&&(Xc(e)||zr(e))&&zr(e.then)&&zr(e.catch),U2=((e,t)=>e?setImmediate:t?((r,n)=>(ni.addEventListener("message",({source:a,data:i})=>{a===ni&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ni.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",zr(ni.postMessage)),kT=typeof queueMicrotask<"u"?queueMicrotask.bind(ni):typeof process<"u"&&process.nextTick||U2,jT=e=>e!=null&&zr(e[Ym]),se={isArray:Bo,isArrayBuffer:D2,isBuffer:Jc,isFormData:GL,isArrayBufferView:BL,isString:$L,isNumber:F2,isBoolean:UL,isObject:Xc,isPlainObject:ju,isEmptyObject:VL,isReadableStream:JL,isRequest:XL,isResponse:QL,isHeaders:eT,isUndefined:Po,isDate:HL,isFile:WL,isBlob:qL,isRegExp:mT,isFunction:zr,isStream:ZL,isURLSearchParams:YL,isTypedArray:lT,isFileList:KL,forEach:Qc,merge:x0,extend:rT,trim:tT,stripBOM:sT,inherits:nT,toFlatObject:aT,kindOf:Jm,kindOfTest:zs,endsWith:iT,toArray:oT,forEachEntry:cT,matchAll:dT,isHTMLForm:uT,hasOwnProperty:Lw,hasOwnProp:Lw,reduceDescriptors:$2,freezeMethods:fT,toObjectSet:gT,toCamelCase:hT,noop:pT,toFiniteNumber:xT,findKey:z2,global:ni,isContextDefined:B2,isSpecCompliantForm:yT,toJSONObject:bT,isAsyncFn:vT,isThenable:wT,setImmediate:U2,asap:kT,isIterable:jT};function Ae(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}se.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:se.toJSONObject(this.config),code:this.code,status:this.status}}});const V2=Ae.prototype,H2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{H2[e]={value:e}});Object.defineProperties(Ae,H2);Object.defineProperty(V2,"isAxiosError",{value:!0});Ae.from=(e,t,r,n,a,i)=>{const o=Object.create(V2);se.toFlatObject(e,o,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const c=e&&e.message?e.message:"Error",d=t==null&&e?e.code:t;return Ae.call(o,c,d,r,n,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const NT=null;function y0(e){return se.isPlainObject(e)||se.isArray(e)}function W2(e){return se.endsWith(e,"[]")?e.slice(0,-2):e}function Tw(e,t,r){return e?e.concat(t).map(function(a,i){return a=W2(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function _T(e){return se.isArray(e)&&!e.some(y0)}const ST=se.toFlatObject(se,{},null,function(t){return/^is[A-Z]/.test(t)});function Qm(e,t,r){if(!se.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=se.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,y){return!se.isUndefined(y[w])});const n=r.metaTokens,a=r.visitor||m,i=r.dots,o=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&se.isSpecCompliantForm(t);if(!se.isFunction(a))throw new TypeError("visitor must be a function");function h(x){if(x===null)return"";if(se.isDate(x))return x.toISOString();if(se.isBoolean(x))return x.toString();if(!d&&se.isBlob(x))throw new Ae("Blob is not supported. Use a Buffer instead.");return se.isArrayBuffer(x)||se.isTypedArray(x)?d&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function m(x,w,y){let k=x;if(x&&!y&&typeof x=="object"){if(se.endsWith(w,"{}"))w=n?w:w.slice(0,-2),x=JSON.stringify(x);else if(se.isArray(x)&&_T(x)||(se.isFileList(x)||se.endsWith(w,"[]"))&&(k=se.toArray(x)))return w=W2(w),k.forEach(function(N,C){!(se.isUndefined(N)||N===null)&&t.append(o===!0?Tw([w],C,i):o===null?w:w+"[]",h(N))}),!1}return y0(x)?!0:(t.append(Tw(y,w,i),h(x)),!1)}const g=[],p=Object.assign(ST,{defaultVisitor:m,convertValue:h,isVisitable:y0});function v(x,w){if(!se.isUndefined(x)){if(g.indexOf(x)!==-1)throw Error("Circular reference detected in "+w.join("."));g.push(x),se.forEach(x,function(k,j){(!(se.isUndefined(k)||k===null)&&a.call(t,k,se.isString(j)?j.trim():j,w,p))===!0&&v(k,w?w.concat(j):[j])}),g.pop()}}if(!se.isObject(e))throw new TypeError("data must be an object");return v(e),t}function Iw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ly(e,t){this._pairs=[],e&&Qm(e,this,t)}const q2=ly.prototype;q2.append=function(t,r){this._pairs.push([t,r])};q2.toString=function(t){const r=t?function(n){return t.call(this,n,Iw)}:Iw;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function CT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function K2(e,t,r){if(!t)return e;const n=r&&r.encode||CT;se.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=se.isURLSearchParams(t)?t.toString():new ly(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Aw{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){se.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Z2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PT=typeof URLSearchParams<"u"?URLSearchParams:ly,ET=typeof FormData<"u"?FormData:null,LT=typeof Blob<"u"?Blob:null,TT={isBrowser:!0,classes:{URLSearchParams:PT,FormData:ET,Blob:LT},protocols:["http","https","file","blob","url","data"]},cy=typeof window<"u"&&typeof document<"u",b0=typeof navigator=="object"&&navigator||void 0,IT=cy&&(!b0||["ReactNative","NativeScript","NS"].indexOf(b0.product)<0),AT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",MT=cy&&window.location.href||"http://localhost",OT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:cy,hasStandardBrowserEnv:IT,hasStandardBrowserWebWorkerEnv:AT,navigator:b0,origin:MT},Symbol.toStringTag,{value:"Module"})),mr={...OT,...TT};function RT(e,t){return Qm(e,new mr.classes.URLSearchParams,{visitor:function(r,n,a,i){return mr.isNode&&se.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function DT(e){return se.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FT(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function G2(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),d=i>=r.length;return o=!o&&se.isArray(a)?a.length:o,d?(se.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!c):((!a[o]||!se.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&se.isArray(a[o])&&(a[o]=FT(a[o])),!c)}if(se.isFormData(e)&&se.isFunction(e.entries)){const r={};return se.forEachEntry(e,(n,a)=>{t(DT(n),a,r,0)}),r}return null}function zT(e,t,r){if(se.isString(e))try{return(t||JSON.parse)(e),se.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const ed={transitional:Z2,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=se.isObject(t);if(i&&se.isHTMLForm(t)&&(t=new FormData(t)),se.isFormData(t))return a?JSON.stringify(G2(t)):t;if(se.isArrayBuffer(t)||se.isBuffer(t)||se.isStream(t)||se.isFile(t)||se.isBlob(t)||se.isReadableStream(t))return t;if(se.isArrayBufferView(t))return t.buffer;if(se.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return RT(t,this.formSerializer).toString();if((c=se.isFileList(t))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Qm(c?{"files[]":t}:t,d&&new d,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),zT(t)):t}],transformResponse:[function(t){const r=this.transitional||ed.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(se.isResponse(t)||se.isReadableStream(t))return t;if(t&&se.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(c){if(o)throw c.name==="SyntaxError"?Ae.from(c,Ae.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mr.classes.FormData,Blob:mr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};se.forEach(["delete","get","head","post","put","patch"],e=>{ed.headers[e]={}});const BT=se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$T=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&BT[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Mw=Symbol("internals");function ul(e){return e&&String(e).trim().toLowerCase()}function Nu(e){return e===!1||e==null?e:se.isArray(e)?e.map(Nu):String(e)}function UT(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const VT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ng(e,t,r,n,a){if(se.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!se.isString(t)){if(se.isString(n))return t.indexOf(n)!==-1;if(se.isRegExp(n))return n.test(t)}}function HT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function WT(e,t){const r=se.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let Br=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(c,d,h){const m=ul(d);if(!m)throw new Error("header name must be a non-empty string");const g=se.findKey(a,m);(!g||a[g]===void 0||h===!0||h===void 0&&a[g]!==!1)&&(a[g||d]=Nu(c))}const o=(c,d)=>se.forEach(c,(h,m)=>i(h,m,d));if(se.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(se.isString(t)&&(t=t.trim())&&!VT(t))o($T(t),r);else if(se.isObject(t)&&se.isIterable(t)){let c={},d,h;for(const m of t){if(!se.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[h=m[0]]=(d=c[h])?se.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}o(c,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=ul(t),t){const n=se.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return UT(a);if(se.isFunction(r))return r.call(this,a,n);if(se.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=ul(t),t){const n=se.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Ng(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=ul(o),o){const c=se.findKey(n,o);c&&(!r||Ng(n,n[c],c,r))&&(delete n[c],a=!0)}}return se.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||Ng(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return se.forEach(this,(a,i)=>{const o=se.findKey(n,i);if(o){r[o]=Nu(a),delete r[i];return}const c=t?HT(i):String(i).trim();c!==i&&delete r[i],r[c]=Nu(a),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return se.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&se.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Mw]=this[Mw]={accessors:{}}).accessors,a=this.prototype;function i(o){const c=ul(o);n[c]||(WT(a,o),n[c]=!0)}return se.isArray(t)?t.forEach(i):i(t),this}};Br.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);se.reduceDescriptors(Br.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});se.freezeMethods(Br);function _g(e,t){const r=this||ed,n=t||r,a=Br.from(n.headers);let i=n.data;return se.forEach(e,function(c){i=c.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function Y2(e){return!!(e&&e.__CANCEL__)}function $o(e,t,r){Ae.call(this,e??"canceled",Ae.ERR_CANCELED,t,r),this.name="CanceledError"}se.inherits($o,Ae,{__CANCEL__:!0});function J2(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Ae("Request failed with status code "+r.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function qT(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function KT(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(d){const h=Date.now(),m=n[i];o||(o=h),r[a]=d,n[a]=h;let g=i,p=0;for(;g!==a;)p+=r[g++],g=g%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),h-o<t)return;const v=m&&h-m;return v?Math.round(p*1e3/v):void 0}}function ZT(e,t){let r=0,n=1e3/t,a,i;const o=(h,m=Date.now())=>{r=m,a=null,i&&(clearTimeout(i),i=null),e(...h)};return[(...h)=>{const m=Date.now(),g=m-r;g>=n?o(h,m):(a=h,i||(i=setTimeout(()=>{i=null,o(a)},n-g)))},()=>a&&o(a)]}const $h=(e,t,r=3)=>{let n=0;const a=KT(50,250);return ZT(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,d=o-n,h=a(d),m=o<=c;n=o;const g={loaded:o,total:c,progress:c?o/c:void 0,bytes:d,rate:h||void 0,estimated:h&&c&&m?(c-o)/h:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(g)},r)},Ow=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Rw=e=>(...t)=>se.asap(()=>e(...t)),GT=mr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,mr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(mr.origin),mr.navigator&&/(msie|trident)/i.test(mr.navigator.userAgent)):()=>!0,YT=mr.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];se.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),se.isString(n)&&o.push("path="+n),se.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JT(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function XT(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function X2(e,t,r){let n=!JT(t);return e&&(n||r==!1)?XT(e,t):t}const Dw=e=>e instanceof Br?{...e}:e;function vi(e,t){t=t||{};const r={};function n(h,m,g,p){return se.isPlainObject(h)&&se.isPlainObject(m)?se.merge.call({caseless:p},h,m):se.isPlainObject(m)?se.merge({},m):se.isArray(m)?m.slice():m}function a(h,m,g,p){if(se.isUndefined(m)){if(!se.isUndefined(h))return n(void 0,h,g,p)}else return n(h,m,g,p)}function i(h,m){if(!se.isUndefined(m))return n(void 0,m)}function o(h,m){if(se.isUndefined(m)){if(!se.isUndefined(h))return n(void 0,h)}else return n(void 0,m)}function c(h,m,g){if(g in t)return n(h,m);if(g in e)return n(void 0,h)}const d={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(h,m,g)=>a(Dw(h),Dw(m),g,!0)};return se.forEach(Object.keys({...e,...t}),function(m){const g=d[m]||a,p=g(e[m],t[m],m);se.isUndefined(p)&&g!==c||(r[m]=p)}),r}const Q2=e=>{const t=vi({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:c}=t;if(t.headers=o=Br.from(o),t.url=K2(X2(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),se.isFormData(r)){if(mr.hasStandardBrowserEnv||mr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(se.isFunction(r.getHeaders)){const d=r.getHeaders(),h=["content-type","content-length"];Object.entries(d).forEach(([m,g])=>{h.includes(m.toLowerCase())&&o.set(m,g)})}}if(mr.hasStandardBrowserEnv&&(n&&se.isFunction(n)&&(n=n(t)),n||n!==!1&&GT(t.url))){const d=a&&i&&YT.read(i);d&&o.set(a,d)}return t},QT=typeof XMLHttpRequest<"u",eI=QT&&function(e){return new Promise(function(r,n){const a=Q2(e);let i=a.data;const o=Br.from(a.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:h}=a,m,g,p,v,x;function w(){v&&v(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let y=new XMLHttpRequest;y.open(a.method.toUpperCase(),a.url,!0),y.timeout=a.timeout;function k(){if(!y)return;const N=Br.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),P={data:!c||c==="text"||c==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:N,config:e,request:y};J2(function(I){r(I),w()},function(I){n(I),w()},P),y=null}"onloadend"in y?y.onloadend=k:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(k)},y.onabort=function(){y&&(n(new Ae("Request aborted",Ae.ECONNABORTED,e,y)),y=null)},y.onerror=function(C){const P=C&&C.message?C.message:"Network Error",E=new Ae(P,Ae.ERR_NETWORK,e,y);E.event=C||null,n(E),y=null},y.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||Z2;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),n(new Ae(C,P.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,e,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&se.forEach(o.toJSON(),function(C,P){y.setRequestHeader(P,C)}),se.isUndefined(a.withCredentials)||(y.withCredentials=!!a.withCredentials),c&&c!=="json"&&(y.responseType=a.responseType),h&&([p,x]=$h(h,!0),y.addEventListener("progress",p)),d&&y.upload&&([g,v]=$h(d),y.upload.addEventListener("progress",g),y.upload.addEventListener("loadend",v)),(a.cancelToken||a.signal)&&(m=N=>{y&&(n(!N||N.type?new $o(null,e,y):N),y.abort(),y=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const j=qT(a.url);if(j&&mr.protocols.indexOf(j)===-1){n(new Ae("Unsupported protocol "+j+":",Ae.ERR_BAD_REQUEST,e));return}y.send(i||null)})},tI=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(h){if(!a){a=!0,c();const m=h instanceof Error?h:this.reason;n.abort(m instanceof Ae?m:new $o(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new Ae(`timeout ${t} of ms exceeded`,Ae.ETIMEDOUT))},t);const c=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),e=null)};e.forEach(h=>h.addEventListener("abort",i));const{signal:d}=n;return d.unsubscribe=()=>se.asap(c),d}},rI=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},sI=async function*(e,t){for await(const r of nI(e))yield*rI(r,t)},nI=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Fw=(e,t,r,n)=>{const a=sI(e,t);let i=0,o,c=d=>{o||(o=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:h,value:m}=await a.next();if(h){c(),d.close();return}let g=m.byteLength;if(r){let p=i+=g;r(p)}d.enqueue(new Uint8Array(m))}catch(h){throw c(h),h}},cancel(d){return c(d),a.return()}},{highWaterMark:2})},zw=64*1024,{isFunction:Hd}=se,aI=(({Request:e,Response:t})=>({Request:e,Response:t}))(se.global),{ReadableStream:Bw,TextEncoder:$w}=se.global,Uw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iI=e=>{e=se.merge.call({skipUndefined:!0},aI,e);const{fetch:t,Request:r,Response:n}=e,a=t?Hd(t):typeof fetch=="function",i=Hd(r),o=Hd(n);if(!a)return!1;const c=a&&Hd(Bw),d=a&&(typeof $w=="function"?(x=>w=>x.encode(w))(new $w):async x=>new Uint8Array(await new r(x).arrayBuffer())),h=i&&c&&Uw(()=>{let x=!1;const w=new r(mr.origin,{body:new Bw,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!w}),m=o&&c&&Uw(()=>se.isReadableStream(new n("").body)),g={stream:m&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!g[x]&&(g[x]=(w,y)=>{let k=w&&w[x];if(k)return k.call(w);throw new Ae(`Response type '${x}' is not supported`,Ae.ERR_NOT_SUPPORT,y)})});const p=async x=>{if(x==null)return 0;if(se.isBlob(x))return x.size;if(se.isSpecCompliantForm(x))return(await new r(mr.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(se.isArrayBufferView(x)||se.isArrayBuffer(x))return x.byteLength;if(se.isURLSearchParams(x)&&(x=x+""),se.isString(x))return(await d(x)).byteLength},v=async(x,w)=>{const y=se.toFiniteNumber(x.getContentLength());return y??p(w)};return async x=>{let{url:w,method:y,data:k,signal:j,cancelToken:N,timeout:C,onDownloadProgress:P,onUploadProgress:E,responseType:I,headers:M,withCredentials:T="same-origin",fetchOptions:H}=Q2(x),J=t||fetch;I=I?(I+"").toLowerCase():"text";let $=tI([j,N&&N.toAbortSignal()],C),D=null;const W=$&&$.unsubscribe&&(()=>{$.unsubscribe()});let X;try{if(E&&h&&y!=="get"&&y!=="head"&&(X=await v(M,k))!==0){let le=new r(w,{method:"POST",body:k,duplex:"half"}),V;if(se.isFormData(k)&&(V=le.headers.get("content-type"))&&M.setContentType(V),le.body){const[ne,pe]=Ow(X,$h(Rw(E)));k=Fw(le.body,zw,ne,pe)}}se.isString(T)||(T=T?"include":"omit");const G=i&&"credentials"in r.prototype,R={...H,signal:$,method:y.toUpperCase(),headers:M.normalize().toJSON(),body:k,duplex:"half",credentials:G?T:void 0};D=i&&new r(w,R);let O=await(i?J(D,H):J(w,R));const q=m&&(I==="stream"||I==="response");if(m&&(P||q&&W)){const le={};["status","statusText","headers"].forEach(ye=>{le[ye]=O[ye]});const V=se.toFiniteNumber(O.headers.get("content-length")),[ne,pe]=P&&Ow(V,$h(Rw(P),!0))||[];O=new n(Fw(O.body,zw,ne,()=>{pe&&pe(),W&&W()}),le)}I=I||"text";let Q=await g[se.findKey(g,I)||"text"](O,x);return!q&&W&&W(),await new Promise((le,V)=>{J2(le,V,{data:Q,headers:Br.from(O.headers),status:O.status,statusText:O.statusText,config:x,request:D})})}catch(G){throw W&&W(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,x,D),{cause:G.cause||G}):Ae.from(G,G&&G.code,x,D)}}},oI=new Map,e_=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let o=i.length,c=o,d,h,m=oI;for(;c--;)d=i[c],h=m.get(d),h===void 0&&m.set(d,h=c?new Map:iI(t)),m=h;return h};e_();const v0={http:NT,xhr:eI,fetch:{get:e_}};se.forEach(v0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Vw=e=>`- ${e}`,lI=e=>se.isFunction(e)||e===null||e===!1,t_={getAdapter:(e,t)=>{e=se.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let o=0;o<r;o++){n=e[o];let c;if(a=n,!lI(n)&&(a=v0[(c=String(n)).toLowerCase()],a===void 0))throw new Ae(`Unknown adapter '${c}'`);if(a&&(se.isFunction(a)||(a=a.get(t))))break;i[c||"#"+o]=a}if(!a){const o=Object.entries(i).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let c=r?o.length>1?`since :
`+o.map(Vw).join(`
`):" "+Vw(o[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return a},adapters:v0};function Sg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $o(null,e)}function Hw(e){return Sg(e),e.headers=Br.from(e.headers),e.data=_g.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),t_.getAdapter(e.adapter||ed.adapter,e)(e).then(function(n){return Sg(e),n.data=_g.call(e,e.transformResponse,n),n.headers=Br.from(n.headers),n},function(n){return Y2(n)||(Sg(e),n&&n.response&&(n.response.data=_g.call(e,e.transformResponse,n.response),n.response.headers=Br.from(n.response.headers))),Promise.reject(n)})}const r_="1.12.2",ef={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ef[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ww={};ef.transitional=function(t,r,n){function a(i,o){return"[Axios v"+r_+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,c)=>{if(t===!1)throw new Ae(a(o," has been removed"+(r?" in "+r:"")),Ae.ERR_DEPRECATED);return r&&!Ww[o]&&(Ww[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,c):!0}};ef.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function cI(e,t,r){if(typeof e!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const c=e[i],d=c===void 0||o(c,i,e);if(d!==!0)throw new Ae("option "+i+" must be "+d,Ae.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ae("Unknown option "+i,Ae.ERR_BAD_OPTION)}}const _u={assertOptions:cI,validators:ef},Ws=_u.validators;let di=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Aw,response:new Aw}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=vi(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&_u.assertOptions(n,{silentJSONParsing:Ws.transitional(Ws.boolean),forcedJSONParsing:Ws.transitional(Ws.boolean),clarifyTimeoutError:Ws.transitional(Ws.boolean)},!1),a!=null&&(se.isFunction(a)?r.paramsSerializer={serialize:a}:_u.assertOptions(a,{encode:Ws.function,serialize:Ws.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),_u.assertOptions(r,{baseUrl:Ws.spelling("baseURL"),withXsrfToken:Ws.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&se.merge(i.common,i[r.method]);i&&se.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=Br.concat(o,i);const c=[];let d=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(d=d&&w.synchronous,c.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let m,g=0,p;if(!d){const x=[Hw.bind(this),void 0];for(x.unshift(...c),x.push(...h),p=x.length,m=Promise.resolve(r);g<p;)m=m.then(x[g++],x[g++]);return m}p=c.length;let v=r;for(;g<p;){const x=c[g++],w=c[g++];try{v=x(v)}catch(y){w.call(this,y);break}}try{m=Hw.call(this,v)}catch(x){return Promise.reject(x)}for(g=0,p=h.length;g<p;)m=m.then(h[g++],h[g++]);return m}getUri(t){t=vi(this.defaults,t);const r=X2(t.baseURL,t.url,t.allowAbsoluteUrls);return K2(r,t.params,t.paramsSerializer)}};se.forEach(["delete","get","head","options"],function(t){di.prototype[t]=function(r,n){return this.request(vi(n||{},{method:t,url:r,data:(n||{}).data}))}});se.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,c){return this.request(vi(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}di.prototype[t]=r(),di.prototype[t+"Form"]=r(!0)});let dI=class s_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(c=>{n.subscribe(c),i=c}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,c){n.reason||(n.reason=new $o(i,o,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new s_(function(a){t=a}),cancel:t}}};function uI(e){return function(r){return e.apply(null,r)}}function hI(e){return se.isObject(e)&&e.isAxiosError===!0}const w0={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(w0).forEach(([e,t])=>{w0[t]=e});function n_(e){const t=new di(e),r=O2(di.prototype.request,t);return se.extend(r,di.prototype,t,{allOwnKeys:!0}),se.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return n_(vi(e,a))},r}const Tt=n_(ed);Tt.Axios=di;Tt.CanceledError=$o;Tt.CancelToken=dI;Tt.isCancel=Y2;Tt.VERSION=r_;Tt.toFormData=Qm;Tt.AxiosError=Ae;Tt.Cancel=Tt.CanceledError;Tt.all=function(t){return Promise.all(t)};Tt.spread=uI;Tt.isAxiosError=hI;Tt.mergeConfig=vi;Tt.AxiosHeaders=Br;Tt.formToJSON=e=>G2(se.isHTMLForm(e)?new FormData(e):e);Tt.getAdapter=t_.getAdapter;Tt.HttpStatusCode=w0;Tt.default=Tt;const{Axios:q9,AxiosError:K9,CanceledError:Z9,isCancel:G9,CancelToken:Y9,VERSION:J9,all:X9,Cancel:Q9,isAxiosError:ez,spread:tz,toFormData:rz,AxiosHeaders:sz,HttpStatusCode:nz,formToJSON:az,getAdapter:iz,mergeConfig:oz}=Tt,a_="http://192.168.8.62:5000/api";console.log("[API] API_BASE_URL:",a_);const ue=Tt.create({baseURL:a_,headers:{"Content-Type":"application/json"}});ue.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));ue.interceptors.response.use(e=>(e.data&&e.data.data,e.data),e=>{var r,n,a,i;const t=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.message)||"Something went wrong";return((a=e.response)==null?void 0:a.status)!==401&&((i=e.response)==null?void 0:i.status)!==404&&Z.error(t),Promise.reject(e)});const dn=Object.create(null);dn.open="0";dn.close="1";dn.ping="2";dn.pong="3";dn.message="4";dn.upgrade="5";dn.noop="6";const Su=Object.create(null);Object.keys(dn).forEach(e=>{Su[dn[e]]=e});const k0={type:"error",data:"parser error"},i_=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",o_=typeof ArrayBuffer=="function",l_=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,dy=({type:e,data:t},r,n)=>i_&&t instanceof Blob?r?n(t):qw(t,n):o_&&(t instanceof ArrayBuffer||l_(t))?r?n(t):qw(new Blob([t]),n):n(dn[e]+(t||"")),qw=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Kw(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Cg;function mI(e,t){if(i_&&e.data instanceof Blob)return e.data.arrayBuffer().then(Kw).then(t);if(o_&&(e.data instanceof ArrayBuffer||l_(e.data)))return t(Kw(e.data));dy(e,!1,r=>{Cg||(Cg=new TextEncoder),t(Cg.encode(r))})}const Zw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Nl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Zw.length;e++)Nl[Zw.charCodeAt(e)]=e;const fI=e=>{let t=e.length*.75,r=e.length,n,a=0,i,o,c,d;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),m=new Uint8Array(h);for(n=0;n<r;n+=4)i=Nl[e.charCodeAt(n)],o=Nl[e.charCodeAt(n+1)],c=Nl[e.charCodeAt(n+2)],d=Nl[e.charCodeAt(n+3)],m[a++]=i<<2|o>>4,m[a++]=(o&15)<<4|c>>2,m[a++]=(c&3)<<6|d&63;return h},gI=typeof ArrayBuffer=="function",uy=(e,t)=>{if(typeof e!="string")return{type:"message",data:c_(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:pI(e.substring(1),t)}:Su[r]?e.length>1?{type:Su[r],data:e.substring(1)}:{type:Su[r]}:k0},pI=(e,t)=>{if(gI){const r=fI(e);return c_(r,t)}else return{base64:!0,data:e}},c_=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},d_="",xI=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((i,o)=>{dy(i,!1,c=>{n[o]=c,++a===r&&t(n.join(d_))})})},yI=(e,t)=>{const r=e.split(d_),n=[];for(let a=0;a<r.length;a++){const i=uy(r[a],t);if(n.push(i),i.type==="error")break}return n};function bI(){return new TransformStream({transform(e,t){mI(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let Pg;function Wd(e){return e.reduce((t,r)=>t+r.length,0)}function qd(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function vI(e,t){Pg||(Pg=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,c){for(r.push(o);;){if(n===0){if(Wd(r)<1)break;const d=qd(r,1);i=(d[0]&128)===128,a=d[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Wd(r)<2)break;const d=qd(r,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),n=3}else if(n===2){if(Wd(r)<8)break;const d=qd(r,8),h=new DataView(d.buffer,d.byteOffset,d.length),m=h.getUint32(0);if(m>Math.pow(2,21)-1){c.enqueue(k0);break}a=m*Math.pow(2,32)+h.getUint32(4),n=3}else{if(Wd(r)<a)break;const d=qd(r,a);c.enqueue(uy(i?d:Pg.decode(d),t)),n=0}if(a===0||a>e){c.enqueue(k0);break}}}})}const u_=4;function Dt(e){if(e)return wI(e)}function wI(e){for(var t in Dt.prototype)e[t]=Dt.prototype[t];return e}Dt.prototype.on=Dt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Dt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Dt.prototype.off=Dt.prototype.removeListener=Dt.prototype.removeAllListeners=Dt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Dt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};Dt.prototype.emitReserved=Dt.prototype.emit;Dt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Dt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const tf=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),fs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),kI="arraybuffer";function h_(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const jI=fs.setTimeout,NI=fs.clearTimeout;function rf(e,t){t.useNativeTimers?(e.setTimeoutFn=jI.bind(fs),e.clearTimeoutFn=NI.bind(fs)):(e.setTimeoutFn=fs.setTimeout.bind(fs),e.clearTimeoutFn=fs.clearTimeout.bind(fs))}const _I=1.33;function SI(e){return typeof e=="string"?CI(e):Math.ceil((e.byteLength||e.size)*_I)}function CI(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function m_(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function PI(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function EI(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class LI extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class hy extends Dt{constructor(t){super(),this.writable=!1,rf(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new LI(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=uy(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=PI(t);return r.length?"?"+r:""}}class TI extends hy{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};yI(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,xI(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=m_()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let f_=!1;try{f_=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const II=f_;function AI(){}class MI extends TI{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class an extends Dt{constructor(t,r,n){super(),this.createRequest=t,rf(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=h_(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=an.requestsCount++,an.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=AI,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete an.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}an.requestsCount=0;an.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Gw);else if(typeof addEventListener=="function"){const e="onpagehide"in fs?"pagehide":"unload";addEventListener(e,Gw,!1)}}function Gw(){for(let e in an.requests)an.requests.hasOwnProperty(e)&&an.requests[e].abort()}const OI=function(){const e=g_({xdomain:!1});return e&&e.responseType!==null}();class RI extends MI{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=OI&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new an(g_,this.uri(),t)}}function g_(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||II))return new XMLHttpRequest}catch{}if(!t)try{return new fs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const p_=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class DI extends hy{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=p_?{}:h_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;dy(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&tf(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=m_()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Eg=fs.WebSocket||fs.MozWebSocket;class FI extends DI{createSocket(t,r,n){return p_?new Eg(t,r,n):r?new Eg(t,r):new Eg(t)}doWrite(t,r){this.ws.send(r)}}class zI extends hy{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=vI(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=bI();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:c,value:d})=>{c||(this.onPacket(d),i())}).catch(c=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&tf(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const BI={websocket:FI,webtransport:zI,polling:RI},$I=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,UI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function j0(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=$I.exec(e||""),i={},o=14;for(;o--;)i[UI[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=VI(i,i.path),i.queryKey=HI(i,i.query),i}function VI(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function HI(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const N0=typeof addEventListener=="function"&&typeof removeEventListener=="function",Cu=[];N0&&addEventListener("offline",()=>{Cu.forEach(e=>e())},!1);class Na extends Dt{constructor(t,r){if(super(),this.binaryType=kI,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=j0(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=j0(r.host).host);rf(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=EI(this.opts.query)),N0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cu.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=u_,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Na.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Na.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=SI(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,tf(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Na.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),N0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Cu.indexOf(this._offlineEventListener);n!==-1&&Cu.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Na.protocol=u_;class WI extends Na{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Na.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",g=>{if(!n)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Na.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(m(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=r.name,this.emitReserved("upgradeError",p)}}))};function i(){n||(n=!0,m(),r.close(),r=null)}const o=g=>{const p=new Error("probe error: "+g);p.transport=r.name,i(),this.emitReserved("upgradeError",p)};function c(){o("transport closed")}function d(){o("socket closed")}function h(g){r&&g.name!==r.name&&i()}const m=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",c),this.off("close",d),this.off("upgrading",h)};r.once("open",a),r.once("error",o),r.once("close",c),this.once("close",d),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let qI=class extends WI{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>BI[a]).filter(a=>!!a)),super(t,n)}};function KI(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=j0(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const ZI=typeof ArrayBuffer=="function",GI=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,x_=Object.prototype.toString,YI=typeof Blob=="function"||typeof Blob<"u"&&x_.call(Blob)==="[object BlobConstructor]",JI=typeof File=="function"||typeof File<"u"&&x_.call(File)==="[object FileConstructor]";function my(e){return ZI&&(e instanceof ArrayBuffer||GI(e))||YI&&e instanceof Blob||JI&&e instanceof File}function Pu(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Pu(e[r]))return!0;return!1}if(my(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Pu(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Pu(e[r]))return!0;return!1}function XI(e){const t=[],r=e.data,n=e;return n.data=_0(r,t),n.attachments=t.length,{packet:n,buffers:t}}function _0(e,t){if(!e)return e;if(my(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=_0(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=_0(e[n],t));return r}return e}function QI(e,t){return e.data=S0(e.data,t),delete e.attachments,e}function S0(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=S0(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=S0(e[r],t));return e}const eA=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],tA=5;var Ve;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Ve||(Ve={}));class rA{constructor(t){this.replacer=t}encode(t){return(t.type===Ve.EVENT||t.type===Ve.ACK)&&Pu(t)?this.encodeAsBinary({type:t.type===Ve.EVENT?Ve.BINARY_EVENT:Ve.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Ve.BINARY_EVENT||t.type===Ve.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=XI(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function Yw(e){return Object.prototype.toString.call(e)==="[object Object]"}class fy extends Dt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Ve.BINARY_EVENT;n||r.type===Ve.BINARY_ACK?(r.type=n?Ve.EVENT:Ve.ACK,this.reconstructor=new sA(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(my(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Ve[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Ve.BINARY_EVENT||n.type===Ve.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(fy.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Ve.CONNECT:return Yw(r);case Ve.DISCONNECT:return r===void 0;case Ve.CONNECT_ERROR:return typeof r=="string"||Yw(r);case Ve.EVENT:case Ve.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&eA.indexOf(r[0])===-1);case Ve.ACK:case Ve.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class sA{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=QI(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const nA=Object.freeze(Object.defineProperty({__proto__:null,Decoder:fy,Encoder:rA,get PacketType(){return Ve},protocol:tA},Symbol.toStringTag,{value:"Module"}));function Es(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const aA=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class y_ extends Dt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Es(t,"open",this.onopen.bind(this)),Es(t,"packet",this.onpacket.bind(this)),Es(t,"error",this.onerror.bind(this)),Es(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,i;if(aA.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:Ve.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const m=this.ids++,g=r.pop();this._registerAckCallback(m,g),o.id=m}const c=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(d?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},a),o=(...c)=>{this.io.clearTimeoutFn(i),r.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,a)=>{const i=(o,c)=>o?a(o):n(c);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Ve.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ve.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ve.EVENT:case Ve.BINARY_EVENT:this.onevent(t);break;case Ve.ACK:case Ve.BINARY_ACK:this.onack(t);break;case Ve.DISCONNECT:this.ondisconnect();break;case Ve.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:Ve.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ve.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Uo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Uo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Uo.prototype.reset=function(){this.attempts=0};Uo.prototype.setMin=function(e){this.ms=e};Uo.prototype.setMax=function(e){this.max=e};Uo.prototype.setJitter=function(e){this.jitter=e};class C0 extends Dt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,rf(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Uo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||nA;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new qI(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Es(r,"open",function(){n.onopen(),t&&t()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=Es(r,"error",i);if(this._timeout!==!1){const c=this._timeout,d=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},c);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Es(t,"ping",this.onping.bind(this)),Es(t,"data",this.ondata.bind(this)),Es(t,"error",this.onerror.bind(this)),Es(t,"close",this.onclose.bind(this)),Es(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){tf(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new y_(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const hl={};function Eu(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=KI(e,t.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=hl[a]&&i in hl[a].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let d;return c?d=new C0(n,t):(hl[a]||(hl[a]=new C0(n,t)),d=hl[a]),r.query&&!t.query&&(t.query=r.queryKey),d.socket(r.path,t)}Object.assign(Eu,{Manager:C0,Socket:y_,io:Eu,connect:Eu});class iA{constructor(){this.socket=null,this.isConnected=!1}connect(){if(!this.socket){const r="http://192.168.8.62:5000/api".replace("/api","");this.socket=Eu(r,{transports:["websocket"],timeout:2e4,forceNew:!0}),this.socket.on("connect",()=>{this.isConnected=!0,console.log("Connected to server")}),this.socket.on("disconnect",()=>{this.isConnected=!1,console.log("Disconnected from server")}),this.socket.on("connect_error",n=>{console.error("Connection error:",n),this.isConnected=!1}),this.socket.on("connect_timeout",()=>{console.error("Connection timeout"),this.isConnected=!1})}}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}joinUserRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-user-room",t)}joinAdminRoom(){this.socket&&this.isConnected&&this.socket.emit("join-admin-room")}joinDeliveryRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-delivery-room",t)}onOrderStatusUpdate(t){this.socket&&this.socket.on("order-status-update",t)}onDeliveryLocationUpdate(t){this.socket&&this.socket.on("delivery-location-update",t)}updateLocation(t){this.socket&&this.isConnected&&this.socket.emit("location-update",t)}updateOrderStatus(t){this.socket&&this.isConnected&&this.socket.emit("order-status-update",t)}joinConversation(t){this.socket&&this.isConnected&&this.socket.emit("join-conversation",t)}leaveConversation(t){this.socket&&this.isConnected&&this.socket.emit("leave-conversation",t)}emitTypingStart(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-start",{conversationId:t,userId:r})}emitTypingStop(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-stop",{conversationId:t,userId:r})}onNewMessage(t){this.socket&&this.socket.on("new-message",t)}onUserTyping(t){this.socket&&this.socket.on("user-typing",t)}onConversationUpdate(t){this.socket&&this.socket.on("conversation-updated",t)}on(t,r){this.socket&&this.socket.on(t,r)}onChatNotification(t){this.socket&&this.socket.on("chat-notification",t)}removeListener(t,r){this.socket&&this.socket.off(t,r)}off(t,r){this.removeListener(t,r)}emit(t,r){this.socket&&this.isConnected?this.socket.emit(t,r):console.warn(`Socket not connected. Cannot emit event: ${t}`)}isSocketConnected(){return this.socket&&this.isConnected}}const ot=new iA,Fl=ve("auth/login",async({username:e,password:t},{rejectWithValue:r})=>{var n,a,i,o;try{const c=await ue.post("/auth/login",{username:e,password:t});return localStorage.setItem("token",c.data.token),ot.connect(),ot.joinUserRoom(c.data.user.id),Z.success("Skrir inn"),c.data}catch(c){return Z.error(((a=(n=c.response)==null?void 0:n.data)==null?void 0:a.message)||"Innskrning mistkst"),r(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Login failed")}}),Lu=ve("auth/kenniLogin",async({idToken:e},{rejectWithValue:t})=>{var r,n,a,i;try{const o=await ue.post("/auth/kenni/login",{idToken:e});return localStorage.setItem("token",o.data.token),ot.connect(),ot.joinUserRoom(o.data.user.id),Z.success("Innskrur me Kenni"),o.data}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Kenni innskrning mistkst"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Kenni login failed")}}),Tu=ve("auth/dummyLogin",async({phone:e},{rejectWithValue:t})=>{var r,n,a,i;try{const o=await ue.post("/auth/dummy/login",{phone:e});return localStorage.setItem("token",o.data.token),ot.connect(),ot.joinUserRoom(o.data.user.id),Z.success("Innskrur me dummy login"),o.data}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Dummy innskrning mistkst"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Dummy login failed")}}),Lg=ve("auth/register",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await ue.post("/auth/register",e);return localStorage.setItem("token",o.data.token),ot.connect(),ot.joinUserRoom(o.data.user.id),Z.success("Nskrning tkst"),o.data}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Nskrning mistkst"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Registration failed")}}),Iu=ve("auth/getProfile",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/auth/profile")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to get profile")}}),Au=ve("auth/updateProfile",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await ue.put("/auth/profile",e);return Z.success("Prfll uppfrur"),o.data}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a uppfra prfll"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to update profile")}}),oA={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!!localStorage.getItem("token"),error:null},b_=Vr({name:"auth",initialState:oA,reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),ot.disconnect(),Z.success("tskrur")},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0}},extraReducers:e=>{e.addCase(Fl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Fl.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Fl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Lu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Lu.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Lu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Tu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Tu.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Tu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Lg.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Lg.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Lg.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Iu.pending,t=>{t.isLoading=!0}).addCase(Iu.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload,t.isAuthenticated=!0}).addCase(Iu.rejected,(t,r)=>{var n,a,i;t.isLoading=!1,t.error=r.payload,((n=r.payload)!=null&&n.includes("token")||(a=r.payload)!=null&&a.includes("401")||(i=r.payload)!=null&&i.includes("Invalid"))&&(t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token"))}).addCase(Au.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Au.fulfilled,(t,r)=>{t.isLoading=!1,t.user={...t.user,...r.payload},t.error=null}).addCase(Au.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{logout:gy,clearError:lA}=b_.actions,cA=b_.reducer,mo=ve("orders/fetchUserOrders",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await ue.get(`/orders/my-orders?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch orders")}}),Mu=ve("orders/fetchOrder",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get(`/orders/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch order")}}),Ou=ve("orders/createOrder",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await ue.post("/orders",e);return Z.success("Pntun stofnu"),o.data}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a stofna pntun"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create order")}}),zl=ve("orders/updateOrderStatus",async({id:e,status:t,estimatedDelivery:r},{rejectWithValue:n})=>{var a,i,o,c;try{const d=await ue.put(`/orders/${e}/status`,{status:t,estimatedDelivery:r});return Z.success("Pntunarstaa uppfr"),d.data}catch(d){return Z.error(((i=(a=d.response)==null?void 0:a.data)==null?void 0:i.message)||"Mistkst a uppfra pntunarstaa"),n(((c=(o=d.response)==null?void 0:o.data)==null?void 0:c.message)||"Failed to update order status")}}),Ru=ve("orders/assignDeliveryPerson",async({id:e,deliveryPersonId:t},{rejectWithValue:r})=>{var n,a,i,o;try{const c=await ue.put(`/orders/${e}/assign-delivery`,{deliveryPersonId:t});return Z.success("Afhendingarmaur thlutaur"),c.data}catch(c){return Z.error(((a=(n=c.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a thluta afhendingarmanni"),r(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to assign delivery person")}}),fo=ve("orders/fetchAllOrders",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await ue.get(`/orders?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch orders")}}),Du=ve("orders/sendReceiptEmail",async({orderId:e,email:t},{rejectWithValue:r})=>{var n,a;try{return(await ue.post(`/orders/${e}/receipt/email`,{email:t})).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to send receipt email")}}),dA={orders:[],currentOrder:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},v_=Vr({name:"orders",initialState:dA,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentOrder:e=>{e.currentOrder=null},clearError:e=>{e.error=null},updateOrderStatusRealtime:(e,t)=>{const{orderId:r,status:n}=t.payload,a=e.orders.findIndex(i=>i.id===r);a!==-1&&(e.orders[a].status=n,e.orders[a].updatedAt=new Date().toISOString()),e.currentOrder&&e.currentOrder.id===r&&(e.currentOrder.status=n,e.currentOrder.updatedAt=new Date().toISOString())}},extraReducers:e=>{e.addCase(mo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(mo.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(mo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Mu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Mu.fulfilled,(t,r)=>{t.isLoading=!1,t.currentOrder=r.payload,t.error=null}).addCase(Mu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ou.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ou.fulfilled,(t,r)=>{t.isLoading=!1,t.orders.unshift(r.payload),t.error=null}).addCase(Ou.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(zl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(zl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.orders.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.orders[n]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase(zl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ru.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ru.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.orders.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.orders[n]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase(Ru.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(fo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(fo.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(fo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Du.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Du.fulfilled,(t,r)=>{t.isLoading=!1,t.error=null}).addCase(Du.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:uA,clearCurrentOrder:hA,updateOrderStatusRealtime:mA}=v_.actions,fA=v_.reducer;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Eo;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Eo||(Eo={}));class Tg extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const gA=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},pA=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},n=r.Plugins=r.Plugins||{},a=()=>t!==null?t.name:gA(e),i=()=>a()!=="web",o=g=>{const p=h.get(g);return!!(p!=null&&p.platforms.has(a())||c(g))},c=g=>{var p;return(p=r.PluginHeaders)===null||p===void 0?void 0:p.find(v=>v.name===g)},d=g=>e.console.error(g),h=new Map,m=(g,p={})=>{const v=h.get(g);if(v)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),v.proxy;const x=a(),w=c(g);let y;const k=async()=>(!y&&x in p?y=typeof p[x]=="function"?y=await p[x]():y=p[x]:t!==null&&!y&&"web"in p&&(y=typeof p.web=="function"?y=await p.web():y=p.web),y),j=(M,T)=>{var H,J;if(w){const $=w==null?void 0:w.methods.find(D=>T===D.name);if($)return $.rtype==="promise"?D=>r.nativePromise(g,T.toString(),D):(D,W)=>r.nativeCallback(g,T.toString(),D,W);if(M)return(H=M[T])===null||H===void 0?void 0:H.bind(M)}else{if(M)return(J=M[T])===null||J===void 0?void 0:J.bind(M);throw new Tg(`"${g}" plugin is not implemented on ${x}`,Eo.Unimplemented)}},N=M=>{let T;const H=(...J)=>{const $=k().then(D=>{const W=j(D,M);if(W){const X=W(...J);return T=X==null?void 0:X.remove,X}else throw new Tg(`"${g}.${M}()" is not implemented on ${x}`,Eo.Unimplemented)});return M==="addListener"&&($.remove=async()=>T()),$};return H.toString=()=>`${M.toString()}() { [capacitor code] }`,Object.defineProperty(H,"name",{value:M,writable:!1,configurable:!1}),H},C=N("addListener"),P=N("removeListener"),E=(M,T)=>{const H=C({eventName:M},T),J=async()=>{const D=await H;P({eventName:M,callbackId:D},T)},$=new Promise(D=>H.then(()=>D({remove:J})));return $.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await J()},$},I=new Proxy({},{get(M,T){switch(T){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?E:C;case"removeListener":return P;default:return N(T)}}});return n[g]=I,h.set(g,{name:g,proxy:I,platforms:new Set([...Object.keys(p),...w?[x]:[]])}),I};return r.convertFileSrc||(r.convertFileSrc=g=>g),r.getPlatform=a,r.handleError=d,r.isNativePlatform=i,r.isPluginAvailable=o,r.registerPlugin=m,r.Exception=Tg,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},xA=e=>e.Capacitor=pA(e),P0=xA(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),py=P0.registerPlugin;class w_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,r);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const a=this.listeners[t];if(!a){if(n){let i=this.retainedEventArguments[t];i||(i=[]),i.push(r),this.retainedEventArguments[t]=i}return}a.forEach(i=>i(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new P0.Exception(t,Eo.Unimplemented)}unavailable(t="not available"){return new P0.Exception(t,Eo.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const a=n.indexOf(r);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const Jw=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Xw=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class yA extends w_{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[a,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Xw(a).trim(),i=Xw(i).trim(),r[a]=i}),r}async setCookie(t){try{const r=Jw(t.key),n=Jw(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${a}; path=${i}; ${o};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}py("CapacitorCookies",{web:()=>new yA});const bA=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const a=n.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},n.onerror=a=>r(a),n.readAsDataURL(e)}),vA=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,i,o)=>(a[i]=e[t[o]],a),{})},wA=(e,t=!0)=>e?Object.entries(e).reduce((n,a)=>{const[i,o]=a;let c,d;return Array.isArray(o)?(d="",o.forEach(h=>{c=t?encodeURIComponent(h):h,d+=`${i}=${c}&`}),d.slice(0,-1)):(c=t?encodeURIComponent(o):o,d=`${i}=${c}`),`${n}&${d}`},"").substr(1):null,kA=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),a=vA(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,c]of Object.entries(e.data||{}))i.set(o,c);r.body=i.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((c,d)=>{i.append(d,c)});else for(const c of Object.keys(e.data))i.append(c,e.data[c]);r.body=i;const o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(a.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class jA extends w_{async request(t){const r=kA(t,t.webFetchExtra),n=wA(t.params,t.shouldEncodeUrlParams),a=n?`${t.url}?${n}`:t.url,i=await fetch(a,r),o=i.headers.get("content-type")||"";let{responseType:c="text"}=i.ok?t:{};o.includes("application/json")&&(c="json");let d,h;switch(c){case"arraybuffer":case"blob":h=await i.blob(),d=await bA(h);break;case"json":d=await i.json();break;case"document":case"text":default:d=await i.text()}const m={};return i.headers.forEach((g,p)=>{m[p]=g}),{data:d,headers:m,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}py("CapacitorHttp",{web:()=>new jA});var Uh;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(Uh||(Uh={}));var Qw;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(Qw||(Qw={}));const ek=py("StatusBar");/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ce=(e,t)=>{const r=S.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:d,...h},m)=>S.createElement("svg",{ref:m,...NA,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${_A(e)}`,c].join(" "),...h},[...t.map(([g,p])=>S.createElement(g,p)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=ce("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=ce("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=ce("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=ce("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ce("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=ce("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=ce("Beer",[["path",{d:"M17 11h1a3 3 0 0 1 0 6h-1",key:"1yp76v"}],["path",{d:"M9 12v6",key:"1u1cab"}],["path",{d:"M13 12v6",key:"1sugkk"}],["path",{d:"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z",key:"1510fo"}],["path",{d:"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"19jb7n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=ce("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ce("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ce("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=ce("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=ce("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ce("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=ce("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=ce("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=ce("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ce("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=ce("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=ce("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=ce("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=ce("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=ce("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ce("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=ce("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ce("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=ce("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=ce("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=ce("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=ce("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=ce("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=ce("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const of=ce("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ce("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=ce("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=ce("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=ce("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ce("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=ce("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ce("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=ce("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ce("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=ce("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=ce("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=ce("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=ce("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=ce("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=ce("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ce("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ce("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=ce("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=ce("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=ce("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=ce("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=ce("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=ce("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=ce("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=ce("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=ce("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=ce("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=ce("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=ce("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ce("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ce("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ce("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=ce("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=ce("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=ce("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ce("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=ce("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ce("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=ce("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ce("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var T_={exports:{}},QA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",e7=QA,t7=e7;function I_(){}function A_(){}A_.resetWarningCache=I_;var r7=function(){function e(n,a,i,o,c,d){if(d!==t7){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:A_,resetWarningCache:I_};return r.PropTypes=r,r};T_.exports=r7();var ky=T_.exports;const me=K0(ky),s7=()=>{const[e,t]=S.useState(0),[r,n]=S.useState(!1),{user:a}=ke(o=>o.auth),i=S.useCallback(async()=>{if(!(!a||a.role!=="ADMIN"))try{n(!0);const o=await ue.get("/chat/unread-count");t(o.data.unreadCount||0)}catch(o){console.error("Error fetching unread count:",o),t(0)}finally{n(!1)}},[a]);return S.useEffect(()=>{i();const o=setInterval(i,3e4);return()=>clearInterval(o)},[a,i]),{unreadCount:e,isLoading:r,refetch:i}},jy=({isMobile:e=!1,onCollapseChange:t})=>{const{t:r}=xe(),{setSidebarOpen:n}=Qx(),[a,i]=S.useState(()=>{const v=localStorage.getItem("adminSidebarCollapsed");return v?JSON.parse(v):!1}),o=Cr(),c=it(),{unreadCount:d}=s7();S.useEffect(()=>{t&&t(a)},[a,t]);const h=()=>{i(v=>{const x=!v;return localStorage.setItem("adminSidebarCollapsed",JSON.stringify(x)),t&&t(x),x})},m=[{title:r("adminSidebar.overview"),items:[{name:r("adminNavigation.dashboard"),href:"/admin",icon:FA}]},{title:r("adminSidebar.sales"),items:[{name:r("adminNavigation.orders"),href:"/admin/orders",icon:$r},{name:r("adminNavigation.pos"),href:"/admin/pos",icon:EA},{name:r("adminNavigation.delivery"),href:"/delivery",icon:Nr}]},{title:r("adminSidebar.catalog"),items:[{name:r("adminNavigation.products"),href:"/admin/products",icon:Ue},{name:r("adminNavigation.categories"),href:"/admin/categories",icon:nf}]},{title:r("adminSidebar.content"),items:[{name:r("adminNavigation.media"),href:"/admin/media",icon:TA},{name:r("adminNavigation.banners"),href:"/admin/banners",icon:pr}]},{title:r("adminSidebar.customersAndCommunication"),items:[{name:r("adminNavigation.customers"),href:"/admin/customers",icon:ki},{name:r("adminNavigation.chat"),href:"/admin/chat",icon:Lo,unreadCount:d},{name:r("adminNavigation.notifications"),href:"/admin/notifications",icon:$i}]},{title:r("adminSidebar.analytics"),items:[{name:r("adminNavigation.analytics"),href:"/admin/analytics",icon:Vh},{name:r("adminNavigation.reports"),href:"/admin/reports",icon:N_}]},{title:r("adminSidebar.settings"),items:[{name:r("adminSettings.general"),href:"/admin/settings/general",icon:on},{name:r("adminSettings.shipping"),href:"/admin/settings/shipping",icon:Nr},{name:r("adminSettings.paymentGateways"),href:"/admin/settings/payment-gateways",icon:un},{name:r("adminSettings.receipts"),href:"/admin/settings/receipts",icon:P_}]},{title:r("adminSidebar.system"),items:[{name:r("adminNavigation.translations"),href:"/admin/translations",icon:DA},{name:r("adminNavigation.demoData"),href:"/admin/demo-data",icon:qh}]}],g=()=>{c(gy())},p=v=>v==="/admin"?o.pathname===v||o.pathname==="/admin/":o.pathname===v||o.pathname.startsWith(v+"/");return s.jsxs("div",{className:`bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${e?"w-full h-full":"rounded-r-lg shadow-sm border border-gray-200 dark:border-gray-700"} transition-all duration-300 ease-in-out ${e?"w-full h-full":a?"w-16":"w-56"} h-full flex flex-col overflow-hidden`,children:[!e&&s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 p-3",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:h,className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 hover:scale-110 active:scale-95",children:s.jsx("div",{className:"transition-transform duration-300 ease-in-out",children:a?s.jsx(yy,{className:"h-4 w-4"}):s.jsx(xy,{className:"h-4 w-4"})})})})}),s.jsx("nav",{className:"flex-1 px-2 py-2 space-y-2",children:m.map((v,x)=>s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:`px-2 py-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 h-0 py-0 overflow-hidden":"opacity-100 h-auto"}`,children:s.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider transition-colors duration-200",children:v.title})}),s.jsx("div",{className:"space-y-0",children:v.items.map(w=>{const y=w.icon,k=p(w.href);return s.jsxs(Te,{to:w.href,onClick:()=>{e&&n(!1)},className:`relative flex items-center px-2 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out group ${k?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:a?w.name:void 0,children:[s.jsx(y,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${a&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),s.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[s.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:w.name}),w.unreadCount>0&&s.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full transition-all duration-200 ${k?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:w.unreadCount})]}),a&&!e&&w.unreadCount>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center transition-all duration-200 animate-pulse",children:w.unreadCount})]},w.name)})}),x<m.length-1&&s.jsx("div",{className:"px-2",children:s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"})})]},v.title))}),s.jsxs("div",{className:`border-b border-gray-200 dark:border-gray-700 flex-shrink-0 space-y-1.5 transition-all duration-300 ease-in-out ${e?"p-3":"px-3 pt-3 pb-3"}`,children:[s.jsxs("div",{className:"flex items-center p-1.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 transition-all duration-300 ease-in-out",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 transition-transform duration-200 hover:scale-105",children:s.jsx("span",{className:"text-white text-sm font-medium transition-colors duration-200",children:"A"})}),s.jsxs("div",{className:`min-w-0 flex-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate transition-colors duration-200",children:r("adminNavigation.adminUser")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate transition-colors duration-200",children:r("adminSidebar.adminEmail")})]})]}),s.jsxs("button",{onClick:g,className:`flex items-center w-full px-3 py-1.5 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-all duration-300 ease-in-out hover:scale-[1.02] active:scale-[0.98] ${a&&!e?"justify-center px-2":""}`,title:a&&!e?r("adminNavigation.logout"):void 0,children:[s.jsx(zA,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-200 group-hover:scale-110"}),s.jsx("span",{className:`transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:r("adminNavigation.logout")})]})]})]})};jy.propTypes={isMobile:me.bool,onCollapseChange:me.func};const n7=()=>{const{sidebarOpen:e,setSidebarOpen:t}=Qx(),{user:r}=ke(a=>a.auth),{t:n}=xe();return!r||r.role!=="ADMIN"?null:s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>t(!1),children:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),s.jsx("div",{className:`fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-gray-800 shadow-2xl transform transition-transform duration-300 ease-in-out z-50 lg:hidden ${e?"translate-x-0":"translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n("navigation.menu")}),s.jsx("button",{onClick:()=>t(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors","aria-label":"Close sidebar",children:s.jsx(__,{className:"w-6 h-6 rotate-45"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:s.jsx(jy,{isMobile:!0})})]})})]})},ln=ve("products/fetchProducts",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.category&&e.category.trim()!==""&&a.append("category",e.category),e.subcategory&&e.subcategory.trim()!==""&&a.append("subcategory",e.subcategory),e.search&&a.append("search",e.search),e.minPrice&&a.append("minPrice",e.minPrice),e.maxPrice&&a.append("maxPrice",e.maxPrice),e.minAlcoholVolume&&a.append("minAlcoholVolume",e.minAlcoholVolume),e.maxAlcoholVolume&&a.append("maxAlcoholVolume",e.maxAlcoholVolume),e.sortBy&&a.append("sortBy",e.sortBy),e.sortOrder&&a.append("sortOrder",e.sortOrder),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await ue.get(`/products?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch products")}}),zu=ve("products/fetchProduct",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get(`/products/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch product")}}),$l=ve("products/fetchCategories",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/categories")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch categories")}}),Mg=ve("products/fetchSubcategories",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get(`/products/subcategories?categoryId=${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subcategories")}}),Og=ve("products/fetchDiscountedProducts",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.limit&&a.append("limit",e.limit),(await ue.get(`/products/discounted?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch discounted products")}}),Ul=ve("products/createProduct",async(e,{rejectWithValue:t})=>{var r,n;try{const a=new FormData;return Object.keys(e).forEach(o=>{e[o]!==null&&e[o]!==void 0&&a.append(o,e[o])}),(await ue.post("/products",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create product")}}),Vl=ve("products/updateProduct",async({id:e,productData:t},{rejectWithValue:r})=>{var n,a;try{const i=new FormData;return Object.keys(t).forEach(c=>{t[c]!==null&&t[c]!==void 0&&i.append(c,t[c])}),(await ue.put(`/products/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update product")}}),Bu=ve("products/deleteProduct",async(e,{rejectWithValue:t})=>{var r,n;try{return await ue.delete(`/products/${e}`),e}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete product")}}),a7={products:[],discountedProducts:[],currentProduct:null,categories:[],subcategories:[],pagination:{page:1,limit:20,total:0,pages:0},filters:{category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"},isLoading:!1,error:null},M_=Vr({name:"products",initialState:a7,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"}},clearCurrentProduct:e=>{e.currentProduct=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(ln.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ln.fulfilled,(t,r)=>{var n,a;t.isLoading=!1,t.products=r.payload.products||((n=r.payload.data)==null?void 0:n.products)||[],t.pagination=r.payload.pagination||((a=r.payload.data)==null?void 0:a.pagination)||{},t.error=null}).addCase(ln.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(zu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(zu.fulfilled,(t,r)=>{t.isLoading=!1,t.currentProduct=r.payload,t.error=null}).addCase(zu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase($l.pending,t=>{t.isLoading=!0}).addCase($l.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload}).addCase($l.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Mg.pending,t=>{t.isLoading=!0}).addCase(Mg.fulfilled,(t,r)=>{t.isLoading=!1,t.subcategories=r.payload}).addCase(Mg.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Og.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Og.fulfilled,(t,r)=>{t.isLoading=!1,t.discountedProducts=r.payload,t.error=null}).addCase(Og.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ul.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ul.fulfilled,(t,r)=>{t.isLoading=!1,t.products.unshift(r.payload),t.error=null}).addCase(Ul.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Vl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Vl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.products.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.products[n]=r.payload),t.currentProduct&&t.currentProduct.id===r.payload.id&&(t.currentProduct=r.payload),t.error=null}).addCase(Vl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Bu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Bu.fulfilled,(t,r)=>{t.isLoading=!1,t.products=t.products.filter(n=>n.id!==r.payload),t.currentProduct&&t.currentProduct.id===r.payload&&(t.currentProduct=null),t.error=null}).addCase(Bu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:ls,clearCurrentProduct:i7}=M_.actions,o7=M_.reducer,$u=ve("cart/fetchCart",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/cart")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch cart")}}),ui=ve("cart/addToCart",async({productId:e,quantity:t=1},{rejectWithValue:r})=>{var n,a,i,o;try{const c=await ue.post("/cart/items",{productId:e,quantity:t});return Z.success("Vru btt  krfu"),c.data}catch(c){return Z.error(((a=(n=c.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a bta vru  krfu"),r(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to add to cart")}}),Uu=ve("cart/updateCartItem",async({itemId:e,quantity:t},{rejectWithValue:r})=>{var n,a,i,o;try{return(await ue.put(`/cart/items/${e}`,{quantity:t})).data}catch(c){return Z.error(((a=(n=c.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a uppfra krfu"),r(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update cart item")}}),Hl=ve("cart/removeFromCart",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await ue.delete(`/cart/items/${e}`),Z.success("Vru fjarlg r krfu"),e}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a fjarlgja vru r krfu"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to remove from cart")}}),Vu=ve("cart/clearCart",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await ue.delete("/cart"),Z.success("Krfa tmd"),!0}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a tma krfu"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to clear cart")}}),l7={cart:null,isLoading:!1,error:null},c7=Vr({name:"cart",initialState:l7,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase($u.pending,t=>{t.isLoading=!0,t.error=null}).addCase($u.fulfilled,(t,r)=>{t.isLoading=!1,t.cart=r.payload,t.error=null}).addCase($u.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ui.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ui.fulfilled,(t,r)=>{t.isLoading=!1,t.error=null}).addCase(ui.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Uu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Uu.fulfilled,(t,r)=>{if(t.isLoading=!1,t.cart&&t.cart.items){const n=t.cart.items.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.cart.items[n]=r.payload)}t.error=null}).addCase(Uu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Hl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Hl.fulfilled,(t,r)=>{t.isLoading=!1,t.cart&&t.cart.items&&(t.cart.items=t.cart.items.filter(n=>n.id!==r.payload)),t.error=null}).addCase(Hl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Vu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Vu.fulfilled,t=>{t.isLoading=!1,t.cart&&(t.cart.items=[]),t.error=null}).addCase(Vu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),d7=c7.reducer,u7=()=>{const[e,t]=S.useState(!1);S.useEffect(()=>{const n=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(n==="dark"||!n&&a)&&(t(!0),document.documentElement.classList.add("dark"))},[]);const r=()=>{const n=!e;t(n),console.log("Toggling dark mode:",n),n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),console.log("Added dark class to document")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),console.log("Removed dark class from document"))};return s.jsx("button",{onClick:r,className:"p-2 text-gray-700 hover:text-primary-600 transition-colors dark:text-gray-300 dark:hover:text-primary-400","aria-label":`Switch to ${e?"light":"dark"} mode`,children:e?s.jsx(YA,{className:"w-5 h-5","aria-hidden":"true"}):s.jsx(UA,{className:"w-5 h-5","aria-hidden":"true"})})},Ny={monday:{open:"10:00",close:"22:00"},tuesday:{open:"10:00",close:"22:00"},wednesday:{open:"10:00",close:"22:00"},thursday:{open:"10:00",close:"22:00"},friday:{open:"10:00",close:"22:00"},saturday:{open:"10:00",close:"22:00"},sunday:{open:"10:00",close:"22:00"}},h7=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],m7=e=>Ny[e.toLowerCase()],_l=()=>{const e=new Date().getDay(),t=h7[e];return m7(t)},f7=()=>{const e=new Date,t=_l();if(!t)return!1;const r=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;return r>=t.open&&r<t.close},Rg=(e="is")=>{const t={is:{monday:"Mnudagur",tuesday:"rijudagur",wednesday:"Mivikudagur",thursday:"Fimmtudagur",friday:"Fstudagur",saturday:"Laugardagur",sunday:"Sunnudagur"},en:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},r=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],n=[];let a=null;return r.forEach((i,o)=>{const c=Ny[i],d=`${c.open} - ${c.close}`;a?a.hours===d?a.days.push(i):(n.push(a),a={days:[i],hours:d}):a={days:[i],hours:d},o===r.length-1&&n.push(a)}),n.map(i=>{const o=t[e]||t.is;let c;if(i.days.length===1)c=o[i.days[0]];else if(i.days.length===7)c=e==="is"?"Alla daga":"Every day";else{const d=o[i.days[0]],h=o[i.days[i.days.length-1]];c=`${d} - ${h}`}return{days:c,hours:i.hours}})},g7=()=>{var et,js;const{t:e,currentLanguage:t,setCurrentLanguage:r}=xe(),n=Cr(),{setSidebarOpen:a}=Qx(),i=ss(),o=it(),{isAuthenticated:c,user:d}=ke(ie=>ie.auth),{cart:h}=ke(ie=>ie.cart),{categories:m}=ke(ie=>ie.products);n.pathname.startsWith("/admin");const[g,p]=S.useState(!1),[v,x]=S.useState(!1),[w,y]=S.useState(!1),[k,j]=S.useState(!1),[N,C]=S.useState(null),[P,E]=S.useState(""),[I,M]=S.useState([]),[T,H]=S.useState(!1),[J,$]=S.useState(!1),[D,W]=S.useState(-1),[X,G]=S.useState(window.innerWidth<768),R=S.useRef(null),O=S.useRef(null),q=S.useRef(null),Q=S.useRef(null),le=S.useRef(null),V=S.useRef(null),ne=((et=h==null?void 0:h.items)==null?void 0:et.reduce((ie,F)=>ie+F.quantity,0))||0;S.useEffect(()=>{o($l()),pe()},[o]),S.useEffect(()=>{const ie=()=>{G(window.innerWidth<768)};return window.addEventListener("resize",ie),()=>window.removeEventListener("resize",ie)},[]);const pe=async()=>{var ie;try{const F=await fetch("/api/settings/opening-hours");if(F.ok){const Y=await F.json();(ie=Y.data)!=null&&ie.openingHours?C(Y.data.openingHours):C(_l())}}catch(F){console.error("Error fetching opening hours:",F),C(_l())}},ye=()=>{if(!N)return _l();const ie=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],F=new Date().getDay(),Y=ie[F];return N[Y]||_l()},z=()=>{if(!N)return f7();const ie=ye();if(ie.closed)return!1;const F=new Date,Y=`${F.getHours().toString().padStart(2,"0")}:${F.getMinutes().toString().padStart(2,"0")}`;return Y>=ie.open&&Y<ie.close};S.useEffect(()=>{const ie=F=>{le.current&&!le.current.contains(F.target)&&x(!1)};return v&&document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie)}},[v]),S.useEffect(()=>{const ie=F=>{V.current&&!V.current.contains(F.target)&&j(!1)};return k&&document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie)}},[k]);const ge=()=>{o(gy()),i("/"),x(!1),p(!1)},Me=(d==null?void 0:d.role)==="ADMIN",De=(d==null?void 0:d.role)==="DELIVERY",ee=S.useCallback(async ie=>{var F;if(!ie.trim()){M([]),H(!1);return}$(!0);try{const Y=await ue.get(`/products?search=${encodeURIComponent(ie)}&limit=5`);M(((F=Y.data)==null?void 0:F.products)||[]),H(!0)}catch(Y){console.error("Search error:",Y),M([])}finally{$(!1)}},[]),K=S.useCallback(ie=>{q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{ee(ie)},300)},[ee]),be=ie=>{const F=ie.target.value;E(F),W(-1),F.trim()?K(F):(M([]),H(!1))},Ne=()=>{P.trim()&&(i(`/products?search=${encodeURIComponent(P)}`),H(!1),E(""),M([]))},Fe=ie=>{i(`/products/${ie.id}`),H(!1),E(""),M([])},Ye=async(ie,F)=>{ie.stopPropagation();try{await o(ui({productId:F.id,quantity:1})).unwrap(),Z.success(e("cart.itemAdded"))}catch(Y){console.error("Add to cart error:",Y),Z.error(Y.message||e("cart.addError"))}},Je=ie=>{var F;if(!T||I.length===0){ie.key==="Enter"&&Ne();return}switch(ie.key){case"ArrowDown":ie.preventDefault(),W(Y=>Y<I.length-1?Y+1:Y);break;case"ArrowUp":ie.preventDefault(),W(Y=>Y>0?Y-1:-1);break;case"Enter":ie.preventDefault(),D>=0&&D<I.length?Fe(I[D]):Ne();break;case"Escape":H(!1),W(-1),(F=R.current)==null||F.blur();break}};return S.useEffect(()=>{const ie=F=>{O.current&&!O.current.contains(F.target)&&R.current&&!R.current.contains(F.target)&&(H(!1),W(-1))};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]),S.useEffect(()=>{const ie=F=>{Q.current&&!Q.current.contains(F.target)&&!F.target.closest("[data-shop-menu-trigger]")&&y(!1)};return w&&document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[w]),S.useEffect(()=>()=>{q.current&&clearTimeout(q.current)},[]),s.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700 fixed top-0 left-0 right-0 z-50 pt-safe",role:"navigation","aria-label":e("aria.mainNavigation"),children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Te,{to:"/",className:"flex items-center","aria-label":e("aria.homepage"),children:s.jsx("img",{src:"/logo_black-web.webp",alt:e("aria.logo"),className:"h-10 sm:h-12 w-auto dark:invert"})}),s.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-sm",children:[s.jsx(Ht,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("div",{className:"flex items-center gap-2",children:ye().closed?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t==="is"?" dag":"Today",":"]}),s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:t==="is"?"Loka":"Closed"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t==="is"?" dag":"Today",": ",ye().open," - ",ye().close]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${z()?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:z()?t==="is"?"Opi":"Open":t==="is"?"Loka":"Closed"})]})})]})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[s.jsxs("div",{className:"relative",ref:O,children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:R,type:"text",value:P,onChange:be,onKeyDown:Je,placeholder:e("search.placeholder"),className:"w-64 pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-all duration-200",autoComplete:"off"}),s.jsx("button",{onClick:Ne,className:"absolute right-2 top-2 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-colors","aria-label":"Search",children:s.jsx(Ft,{className:"w-4 h-4"})})]}),T&&s.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-[512px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-[70]",children:J?s.jsx("div",{className:"px-4 py-3 text-center text-gray-500 dark:text-gray-400",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),s.jsx("span",{children:e("search.searching")})]})}):I.length>0?s.jsxs("div",{children:[I.map((ie,F)=>{var Y;return s.jsx("div",{className:`w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${F===D?"bg-primary-50 dark:bg-primary-900/20":""}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("button",{onClick:()=>Fe(ie),className:"flex-shrink-0 w-16 h-16 bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600 hover:border-primary-400 dark:hover:border-primary-600 transition-colors",children:ie.imageUrl?s.jsx("img",{src:ie.imageUrl,alt:ie.name,className:"w-full h-full object-contain p-1"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Ue,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})}),s.jsxs("button",{onClick:()=>Fe(ie),className:"flex-1 min-w-0 text-left",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white line-clamp-1",children:ie.nameIs||ie.name}),s.jsxs("span",{className:"text-sm font-semibold text-primary-600 dark:text-primary-400 flex-shrink-0",children:[ie.price.toLocaleString()," ",e("common.currency")]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:ie.descriptionIs||ie.description}),s.jsxs("div",{className:"flex items-center mt-1.5 space-x-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",children:((Y=ie.category)==null?void 0:Y.nameIs)||"Flokkur"}),ie.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ie.alcoholContent,"% ",e("product.abv")]})]})]}),c&&s.jsx("button",{onClick:B=>Ye(B,ie),className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors shadow-sm hover:shadow-md",title:e("cart.addToCart"),children:s.jsx(yr,{className:"w-4 h-4"})})]})},ie.id)}),s.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700",children:s.jsxs("button",{onClick:Ne,className:"w-full px-4 py-3 text-center text-primary-600 dark:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:[e("search.viewAllResults"),' "',P,'"']})})]}):P.trim()&&!J?s.jsxs("div",{className:"px-4 py-6 text-center",children:[s.jsx(Ue,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("search.noResults"),' "',P,'"']})]}):null})]}),s.jsx(Te,{to:"/products",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("productsPage.all")}),s.jsxs("div",{className:"relative",ref:Q,children:[s.jsxs("button",{"data-shop-menu-trigger":!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center",children:[e("navigation.shop"),s.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s.jsxs("div",{onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),className:`fixed top-[4rem] left-1/2 transform -translate-x-1/2 mt-2 w-[1100px] max-w-[90vw] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[999] transition-all duration-300 overflow-hidden ${w?"opacity-100 visible scale-100":"opacity-0 invisible scale-95"}`,children:[s.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("navigation.shop")}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:e("navigation.discoverCategories")})]}),s.jsx(Te,{to:"/products",onClick:()=>y(!1),className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors font-semibold text-base",children:e("navigation.viewAllProducts")})]})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.filter(ie=>ie.isActive).map(ie=>{var F;return s.jsxs(Te,{to:`/products?category=${ie.name}`,onClick:()=>y(!1),className:"group block p-4 bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 hover:shadow-md transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-primary-300 dark:hover:border-primary-600",children:[ie.imageUrl&&s.jsx("div",{className:"mb-3 flex items-center justify-center w-full h-32 bg-white dark:bg-white rounded-lg overflow-hidden border border-gray-200 dark:border-gray-200",children:s.jsx("img",{src:ie.imageUrl.startsWith("http")?ie.imageUrl:`http://192.168.8.62:5000${ie.imageUrl}`,alt:ie.name,className:"w-full h-full object-contain p-2 group-hover:scale-105 transition-transform duration-200"})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[!ie.imageUrl&&s.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/30 dark:to-primary-800/30 rounded-lg flex-shrink-0",children:s.jsxs("span",{className:"text-xl",children:[ie.name==="WINE"&&"",ie.name==="BEER"&&"",ie.name==="SPIRITS"&&"",ie.name==="VAPE"&&"",ie.name==="NICOTINEPADS"&&"",!["WINE","BEER","SPIRITS","VAPE","NICOTINEPADS"].includes(ie.name)&&""]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors text-base truncate",children:ie.nameIs}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[((F=ie._count)==null?void 0:F.products)||0," ",e("common.itemsLabel")]}),ie.subcategories&&ie.subcategories.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[ie.subcategories.length," ",e("adminCategories.subcategories").toLowerCase()]})]})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3 leading-relaxed",children:ie.descriptionIs||ie.description||e("category.fallbackDescription")}),ie.subcategories&&ie.subcategories.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[ie.subcategories.slice(0,4).map(Y=>s.jsx("span",{className:"inline-block px-3 py-1.5 text-sm bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-md font-medium",children:Y.nameIs||Y.name},Y.id)),ie.subcategories.length>4&&s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 px-3 py-1.5 font-medium",children:["+",ie.subcategories.length-4]})]})]},ie.id)})})}),s.jsx("div",{className:"px-8 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e("navigation.needHelp")," ",s.jsx("a",{href:"/contact",className:"text-primary-600 dark:text-primary-400 hover:underline font-semibold",children:e("navigation.contactUs")})]})})})]})]}),c&&s.jsx(s.Fragment,{children:De&&s.jsx(Te,{to:"/delivery",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.delivery")})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(u7,{}),!c&&s.jsxs("div",{className:"relative",ref:V,children:[s.jsx("button",{onClick:()=>j(!k),className:"p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Change language","aria-expanded":k,children:s.jsx(Hh,{className:"w-5 h-5","aria-hidden":"true"})}),k&&s.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-[70] border border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>{r("is"),j(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="is"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"slenska",t==="is"&&s.jsx("span",{className:"ml-auto",children:""})]})}),s.jsx("button",{onClick:()=>{r("en"),j(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="en"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"English",t==="en"&&s.jsx("span",{className:"ml-auto",children:""})]})})]})]}),c&&Me&&s.jsx("button",{onClick:()=>a(!0),className:"p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("navigation.admin"),children:s.jsx(on,{className:"w-5 h-5"})}),c&&s.jsxs(Te,{to:"/cart",className:"relative p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":`Shopping cart with ${ne} items`,children:[s.jsx($r,{className:"w-5 h-5","aria-hidden":"true"}),ne>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-label":`${ne} items in cart`,children:ne})]}),c?s.jsxs("div",{className:"relative",ref:le,children:[s.jsxs("button",{onClick:()=>x(!v),className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.userMenu"),"aria-expanded":v,"aria-haspopup":"true",children:[s.jsx(Ur,{className:"w-5 h-5","aria-hidden":"true"}),s.jsx("span",{className:"hidden sm:block text-gray-900 dark:text-white",children:((js=d==null?void 0:d.fullName)==null?void 0:js.split(" ")[0])||(d==null?void 0:d.username)})]}),v&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-[70] border border-gray-200 dark:border-gray-700",role:"menu","aria-label":e("aria.userMenu"),children:[s.jsx(Te,{to:"/profile",onClick:()=>x(!1),className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.profile")}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 py-1",children:[s.jsx("button",{onClick:()=>{r("is"),x(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="is"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,role:"menuitem",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"slenska",t==="is"&&s.jsx("span",{className:"ml-auto",children:""})]})}),s.jsx("button",{onClick:()=>{r("en"),x(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="en"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,role:"menuitem",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"English",t==="en"&&s.jsx("span",{className:"ml-auto",children:""})]})})]}),s.jsx("button",{onClick:ge,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.logout")})]})]}):s.jsxs(Te,{to:"/login",className:"btn btn-outline p-2 sm:px-4","aria-label":e("navigation.login"),children:[s.jsx(Ur,{className:"w-5 h-5 sm:hidden","aria-hidden":"true"}),s.jsx("span",{className:"hidden sm:inline",children:e("navigation.login")})]}),s.jsx("button",{onClick:()=>p(!g),className:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.toggleMobileMenu"),"aria-expanded":g,children:g?s.jsx(ct,{className:"w-5 h-5","aria-hidden":"true"}):s.jsx(__,{className:"w-5 h-5","aria-hidden":"true"})})]})]}),g&&s.jsx("div",{className:"fixed inset-0 z-[60] md:hidden",onClick:()=>p(!1),children:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),s.jsx("div",{className:`fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-gray-800 shadow-2xl transform transition-transform duration-300 ease-in-out z-[70] md:hidden ${g?"translate-x-0":"translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("navigation.menu")}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(ct,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto py-4",children:[s.jsx("div",{className:"px-4 mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:P,onChange:be,onKeyDown:ie=>{ie.key==="Enter"&&(Ne(),p(!1))},placeholder:e("search.placeholder"),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",autoComplete:"off"}),s.jsx("button",{onClick:()=>{Ne(),p(!1)},className:"absolute right-3 top-3 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400",children:s.jsx(Ft,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"flex flex-col space-y-2 px-4",children:[s.jsx(Te,{to:"/products",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("productsPage.all")}),m.map(ie=>s.jsx(Te,{to:`/products?category=${ie.name}`,onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:ie.nameIs},ie.id)),c&&s.jsxs(s.Fragment,{children:[s.jsx(Te,{to:"/profile",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.profile")}),Me&&s.jsx(Te,{to:"/admin",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.admin")}),De&&s.jsx(Te,{to:"/delivery",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.delivery")}),s.jsx("button",{onClick:ge,className:"text-left text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 w-full",children:e("navigation.logout")})]})]})]})]})})]})})},p7=()=>{const{t:e,currentLanguage:t}=xe(),[r,n]=S.useState(null);S.useEffect(()=>{a()},[]);const a=async()=>{var o;try{const c=await ue.get("/settings/opening-hours");(o=c.data)!=null&&o.openingHours?n(i(c.data.openingHours,t)):n(Rg(t))}catch(c){console.error("Error fetching opening hours:",c),n(Rg(t))}},i=(o,c)=>{const d={is:{monday:"Mnudagur",tuesday:"rijudagur",wednesday:"Mivikudagur",thursday:"Fimmtudagur",friday:"Fstudagur",saturday:"Laugardagur",sunday:"Sunnudagur"},en:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},h=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],m=[];let g=null;h.forEach((v,x)=>{const w=o[v],y=w.closed?"Closed":`${w.open} - ${w.close}`;g?g.hours===y?g.days.push(v):(m.push(g),g={days:[v],hours:y}):g={days:[v],hours:y},x===h.length-1&&m.push(g)});const p=d[c]||d.is;return m.map(v=>{let x;if(v.days.length===1)x=p[v.days[0]];else if(v.days.length===7)x=c==="is"?"Alla daga":"Every day";else{const w=p[v.days[0]],y=p[v.days[v.days.length-1]];x=`${w} - ${y}`}return{days:x,hours:v.hours}})};return s.jsx("footer",{className:"bg-white dark:bg-gray-800 shadow-lg border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 max-w-md",children:e("footer.aboutUs")}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:" +354 555 1234"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:" info@olfong.is"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:e("footer.quickLinks")}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Te,{to:"/products",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.products")})}),s.jsx("li",{children:s.jsx(Te,{to:"/products?category=WINE",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.wine")})}),s.jsx("li",{children:s.jsx(Te,{to:"/products?category=BEER",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.beer")})}),s.jsx("li",{children:s.jsx(Te,{to:"/products?category=SPIRITS",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.spirits")})}),s.jsx("li",{children:s.jsx(Te,{to:"/products?category=NON_ALCOHOLIC",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.nonAlcoholic")})})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(Ht,{className:"w-5 h-5"}),t==="is"?"Opnunartmar":"Opening Hours"]}),s.jsx("ul",{className:"space-y-2",children:(r||Rg(t)).map((o,c)=>s.jsxs("li",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:o.days}),s.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:o.hours})]},c))})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-8 pt-8 text-center",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[" 2025 lfng. ",e("footer.copyright")]}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:e("footer.legal")})]})]})})},x7=()=>{var o;const{t:e}=xe(),t=Cr(),{isAuthenticated:r}=ke(c=>c.auth),{cart:n}=ke(c=>c.cart),a=((o=n==null?void 0:n.items)==null?void 0:o.length)||0,i=[{to:"/",icon:RA,label:e("navigation.home"),active:t.pathname==="/"},{to:"/products",icon:Ue,label:e("navigation.products"),active:t.pathname==="/products"||t.pathname.startsWith("/products/")},...r?[{to:"/cart",icon:$r,label:e("navigation.cart"),active:t.pathname==="/cart",badge:a>0?a:null}]:[],...r?[{to:"/profile",icon:Ur,label:e("navigation.profile"),active:t.pathname==="/profile"}]:[{to:"/login",icon:Ur,label:e("navigation.login"),active:t.pathname==="/login"}]];return s.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 pb-safe",children:s.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(c=>{const d=c.icon;return s.jsxs(Te,{to:c.to,className:`flex flex-col items-center justify-center flex-1 py-2 px-1 text-xs transition-colors min-h-[44px] ${c.active?"text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx(d,{className:"w-5 h-5 mb-1"}),c.badge&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:c.badge})]}),s.jsx("span",{className:"text-center leading-tight",children:c.label})]},c.to)})})})},nt=({size:e="medium",className:t=""})=>{const r={small:"w-4 h-4",medium:"w-6 h-6",large:"w-8 h-8"};return s.jsx("div",{className:`flex items-center justify-center ${t}`,children:s.jsx(Wt,{className:`${r[e]} animate-spin text-primary-600`})})};nt.propTypes={size:me.oneOf(["small","medium","large"]),className:me.string};const Dg=({children:e,requiredRole:t,requiredRoles:r})=>{const{isAuthenticated:n,user:a,isLoading:i}=ke(c=>c.auth),o=Cr();if(i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})});if(!n){const c=t==="ADMIN"||r!=null&&r.includes("ADMIN")?"/admin-login":"/login";return s.jsx(Ic,{to:c,state:{from:o},replace:!0})}return(t||r)&&!(r||[t]).includes(a==null?void 0:a.role)?s.jsx(Ic,{to:"/",replace:!0}):e||s.jsx(ZP,{})},y7=()=>{const{t:e}=xe(),t=Cr(),r=ss(),{user:n,isAuthenticated:a}=ke(G=>G.auth),[i,o]=S.useState(!1),[c,d]=S.useState(!1),[h,m]=S.useState(null),[g,p]=S.useState(!1),[v]=S.useState(null),[x,w]=S.useState([]),[y,k]=S.useState(""),[j,N]=S.useState(0),[C,P]=S.useState(!1),E=S.useRef(null),I=S.useRef(null),M=S.useRef(null),T=async()=>{if(a)try{P(!0);const G=await ue.get("/chat/conversations");G.data.length>0&&(m(G.data[0]),await H(G.data[0].id))}catch(G){console.error("Failed to initialize chat:",G)}finally{P(!1)}},H=async G=>{try{const R=await ue.get(`/chat/conversations/${G}/messages`);w(R.data),J()}catch(R){console.error("Failed to load messages:",R)}},J=()=>{E.current&&E.current.scrollIntoView({behavior:"smooth"})},$=async()=>{if(!y.trim()||!h)return;const G={conversationId:h.id,content:y.trim(),topic:v};try{const R=await ue.post("/chat/messages",G);w(O=>[...O,R.data]),k(""),J()}catch(R){console.error("Failed to send message:",R),Xe.error("Failed to send message")}},D=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),$())},W=()=>{I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{},1e3)};return S.useEffect(()=>{T()},[a]),S.useEffect(()=>{J()},[x]),S.useEffect(()=>{h&&H(h.id)},[h]),S.useEffect(()=>{if(!a)return;const G=O=>{O.conversationId===(h==null?void 0:h.id)&&w(q=>[...q,O]),N(q=>q+1)},R=O=>{O.conversationId===(h==null?void 0:h.id)&&p(O.isTyping)};return ot.on("newMessage",G),ot.on("typingStatus",R),()=>{ot.off("newMessage",G),ot.off("typingStatus",R)}},[a,h]),t.pathname.startsWith("/admin")?null:a?s.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:i?s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-80 h-96 flex flex-col",children:[s.jsxs("div",{className:"bg-blue-600 text-white p-3 rounded-t-lg flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold",children:e("chat.title")}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>d(!c),className:"text-white hover:bg-blue-700 p-1 rounded",children:c?s.jsx(BA,{size:16}):s.jsx($A,{size:16})}),s.jsx("button",{onClick:()=>o(!1),className:"text-white hover:bg-blue-700 p-1 rounded",children:s.jsx(ct,{size:16})})]})]}),!c&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[C?s.jsx("div",{className:"text-center text-gray-500",children:e("common.loading")}):x.map(G=>s.jsx("div",{className:`flex ${G.senderId===(n==null?void 0:n.id)?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs p-2 rounded-lg ${G.senderId===(n==null?void 0:n.id)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[s.jsx("p",{className:"text-sm",children:G.content}),s.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(G.createdAt).toLocaleTimeString()})]})},G.id)),g&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-200 text-gray-800 p-2 rounded-lg",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:E})]}),s.jsx("div",{className:"p-3 border-t",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{ref:M,type:"text",value:y,onChange:G=>{k(G.target.value),W()},onKeyPress:D,placeholder:e("chat.typeMessage"),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:$,disabled:!y.trim(),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx(vy,{size:16})})]})})]})]}):s.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors relative",children:[s.jsx(Lo,{size:24}),j>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center",children:j})]})}):s.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:s.jsx("button",{onClick:()=>r("/login"),className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:s.jsx(Lo,{size:24})})})},b7=()=>{const{user:e,isAuthenticated:t}=ke(r=>r.auth);return t&&(e==null?void 0:e.role)==="ADMIN"},hi=ve("categories/fetchCategories",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.includeInactive&&a.append("includeInactive","true"),(await ue.get(`/categories?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch categories")}}),Fg=ve("categories/fetchCategory",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get(`/categories/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch category")}}),Hu=ve("categories/createCategory",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.post("/categories",e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create category")}}),Wu=ve("categories/updateCategory",async({id:e,...t},{rejectWithValue:r})=>{var n,a;try{return(await ue.put(`/categories/${e}`,t)).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update category")}}),qu=ve("categories/deleteCategory",async(e,{rejectWithValue:t})=>{var r,n;try{return await ue.delete(`/categories/${e}`),e}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete category")}}),v7={categories:[],currentCategory:null,isLoading:!1,error:null},w7=Vr({name:"categories",initialState:v7,reducers:{clearCurrentCategory:e=>{e.currentCategory=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(hi.pending,t=>{t.isLoading=!0,t.error=null}).addCase(hi.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload,t.error=null}).addCase(hi.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Fg.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Fg.fulfilled,(t,r)=>{t.isLoading=!1,t.currentCategory=r.payload,t.error=null}).addCase(Fg.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Hu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Hu.fulfilled,(t,r)=>{t.isLoading=!1,t.categories.push(r.payload),t.error=null}).addCase(Hu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Wu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Wu.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.categories.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.categories[n]=r.payload),t.currentCategory&&t.currentCategory.id===r.payload.id&&(t.currentCategory=r.payload),t.error=null}).addCase(Wu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(qu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(qu.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=t.categories.filter(n=>n.id!==r.payload),t.currentCategory&&t.currentCategory.id===r.payload&&(t.currentCategory=null),t.error=null}).addCase(qu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),k7=w7.reducer,Wl=ve("banners/fetchBanners",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.includeInactive&&a.append("includeInactive","true"),(await ue.get(`/banners?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch banners")}}),zg=ve("banners/fetchBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get(`/banners/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch banner")}}),Ku=ve("banners/createBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.post("/banners",e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create banner")}}),Zu=ve("banners/updateBanner",async({id:e,...t},{rejectWithValue:r})=>{var n,a;try{return(await ue.put(`/banners/${e}`,t)).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update banner")}}),Gu=ve("banners/deleteBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return await ue.delete(`/banners/${e}`),e}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete banner")}}),Yu=ve("banners/toggleBannerStatus",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.patch(`/banners/${e}/toggle`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to toggle banner status")}}),ql=ve("banners/fetchFeaturedBanners",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/banners/featured")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch featured banners")}}),Ju=ve("banners/fetchHeroBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/banners/hero/active")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch hero banner")}}),Kl=ve("banners/setFeaturedBanner",async({id:e,featuredOrder:t},{rejectWithValue:r})=>{var n,a;try{return(await ue.patch(`/banners/${e}/featured`,{featuredOrder:t})).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to set banner as featured")}}),Zl=ve("banners/removeFeaturedBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.delete(`/banners/${e}/featured`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to remove banner from featured")}}),j7={banners:[],featuredBanners:[],heroBanner:null,currentBanner:null,isLoading:!1,error:null},N7=Vr({name:"banners",initialState:j7,reducers:{clearCurrentBanner:e=>{e.currentBanner=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Wl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Wl.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=r.payload,t.error=null}).addCase(Wl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(zg.pending,t=>{t.isLoading=!0,t.error=null}).addCase(zg.fulfilled,(t,r)=>{t.isLoading=!1,t.currentBanner=r.payload,t.error=null}).addCase(zg.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ku.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ku.fulfilled,(t,r)=>{t.isLoading=!1,t.banners.push(r.payload),t.error=null}).addCase(Ku.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Zu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Zu.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.banners[n]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(Zu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Gu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Gu.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=t.banners.filter(n=>n.id!==r.payload),t.currentBanner&&t.currentBanner.id===r.payload&&(t.currentBanner=null),t.error=null}).addCase(Gu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Yu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Yu.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.banners[n]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(Yu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ql.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ql.fulfilled,(t,r)=>{t.isLoading=!1,t.featuredBanners=r.payload,t.error=null}).addCase(ql.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ju.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ju.fulfilled,(t,r)=>{t.isLoading=!1,t.heroBanner=r.payload,t.error=null}).addCase(Ju.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Kl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Kl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);if(n!==-1&&(t.banners[n]=r.payload),r.payload.isFeatured){const a=t.featuredBanners.findIndex(i=>i.id===r.payload.id);a!==-1?t.featuredBanners[a]=r.payload:(t.featuredBanners.push(r.payload),t.featuredBanners.sort((i,o)=>(i.featuredOrder||0)-(o.featuredOrder||0)))}t.error=null}).addCase(Kl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Zl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Zl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.banners[n]=r.payload),t.featuredBanners=t.featuredBanners.filter(a=>a.id!==r.payload.id),t.error=null}).addCase(Zl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),_7=N7.reducer,_y=(e,t,r)=>e==="is"?t||r||"":r||t||"",O_=(e,t,r)=>e==="is"?t&&t.length>0?t:r||[]:r&&r.length>0?r:t||[],Ta=(e,t)=>_y(e,t.nameIs,t.name),cf=(e,t)=>_y(e,t.descriptionIs,t.description),S7=(e,t)=>_y(e,t.countryIs,t.country),to=(e,t)=>O_(e,t.foodPairingsIs,t.foodPairings),tk=(e,t)=>O_(e,t.specialAttributesIs,t.specialAttributes),td=({product:e,className:t="w-full h-64 object-contain",currentLanguage:r="is"})=>{var d;const[n,a]=S.useState(!1),i=h=>typeof h=="string"?h:h&&typeof h=="object"&&(h.name||h.slug)||"",o=h=>{const m=i(h);switch(m==null?void 0:m.toUpperCase()){case"WINE":return s.jsx(L_,{className:"w-16 h-16 text-primary-300"});case"BEER":return s.jsx(k_,{className:"w-16 h-16 text-primary-300"});case"NICOTINE":return s.jsx(Ue,{className:"w-16 h-16 text-primary-300"});default:return s.jsx(Ue,{className:"w-16 h-16 text-primary-300"})}},c=h=>{const m=i(h);switch(m==null?void 0:m.toUpperCase()){case"WINE":return"from-red-50 to-red-100";case"BEER":return"from-amber-50 to-amber-100";case"NICOTINE":return"from-gray-50 to-gray-100";default:return"from-gray-50 to-gray-100"}};return!e.imageUrl||n?s.jsx("div",{className:`bg-gradient-to-br ${c(e.category)} flex items-center justify-center relative ${t}`,children:s.jsxs("div",{className:"text-center",children:[o(e.category),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-primary-400 text-sm font-medium",children:((d=i(e.category))==null?void 0:d.toLowerCase())||"Product"})})]})}):s.jsx("img",{src:e.imageUrl.startsWith("http")?e.imageUrl:`http://192.168.8.62:5000${e.imageUrl}`,alt:Ta(r,e),className:t,onError:()=>a(!0),loading:"lazy"})};td.propTypes={product:me.object.isRequired,className:me.string,currentLanguage:me.string};const C7=({category:e,limit:t=6})=>{const{t:r,currentLanguage:n}=xe(),a=it(),[i,o]=S.useState([]),[c,d]=S.useState(!0);S.useEffect(()=>{(async()=>{try{d(!0);const v=await ue.get(`/products?category=${e.name}&limit=${t}`);o(v.data.products||[])}catch(v){console.error("Error fetching category products:",v),o([])}finally{d(!1)}})()},[e.name,t]);const h=p=>{p.scrollBy({left:-300,behavior:"smooth"})},m=p=>{p.scrollBy({left:300,behavior:"smooth"})},g=async(p,v)=>{p.preventDefault(),p.stopPropagation(),await a(ui({productId:v.id,quantity:1}))};return c&&i.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name})}),s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(nt,{size:"medium"})})]}):i.length===0?null:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.length," ",r("common.itemsLabel")]})]}),s.jsx(Te,{to:`/products?category=${e.name}`,className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:r("common.viewAll")})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(p=>s.jsx("div",{className:"flex-shrink-0 w-64",children:s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(Te,{to:`/products/${p.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white p-2",children:[s.jsx(td,{product:p,className:"w-full h-48 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:n}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${p.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:p.stock>0?r("products.inStock"):r("products.outOfStock")})})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-3 flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white line-clamp-2 leading-tight flex-1",children:Ta(n,p)}),s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[p.volume&&s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap",children:p.volume}),p.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:[p.alcoholContent,"%"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:cf(n,p)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[p.price.toLocaleString()," ",r("common.currency")]}),s.jsx("button",{onClick:v=>g(v,p),disabled:p.stock===0,className:"btn btn-sm bg-primary-600 hover:bg-primary-700 text-white disabled:bg-gray-300 disabled:cursor-not-allowed min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":r("products.addToCart"),children:s.jsx($r,{className:"w-4 h-4"})})]})]})]})})},p.id))}),s.jsx("button",{onClick:p=>h(p.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(xy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:p=>m(p.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(yy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},P7=({limit:e=6})=>{const{t,currentLanguage:r}=xe(),n=it(),{products:a,isLoading:i}=ke(m=>m.products),o=a.filter(m=>m.discountPercentage&&m.discountPercentage>0).slice(0,e),c=m=>{m.scrollBy({left:-300,behavior:"smooth"})},d=m=>{m.scrollBy({left:300,behavior:"smooth"})},h=async(m,g)=>{m.preventDefault(),m.stopPropagation(),await n(ui({productId:g.id,quantity:1}))};return i&&o.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted.title")})}),s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(nt,{size:"medium"})})]}):o.length===0?null:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted.title")}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.length," ",t("common.itemsLabel")]})]}),s.jsx(Te,{to:"/products?discounted=true",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:t("common.viewAll")})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:o.map(m=>{var g;return s.jsx("div",{className:"flex-shrink-0 w-64",children:s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(Te,{to:`/products/${m.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white p-2",children:[s.jsx(td,{product:m,className:"w-full h-48 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:r}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${m.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:m.stock>0?t("products.inStock"):t("products.outOfStock")}),s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:["-",m.discountPercentage,"%"]})]})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-3 flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white line-clamp-2 leading-tight flex-1",children:Ta(r,m)}),s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[m.volume&&s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap",children:m.volume}),m.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:[m.alcoholContent,"%"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:cf(r,m)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[(g=m.discountedPrice)==null?void 0:g.toLocaleString()," ",t("common.currency")]}),s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[m.price.toLocaleString()," ",t("common.currency")]})]}),s.jsx("button",{onClick:p=>h(p,m),disabled:m.stock===0,className:"btn btn-sm bg-primary-600 hover:bg-primary-700 text-white disabled:bg-gray-300 disabled:cursor-not-allowed min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":t("products.addToCart"),children:s.jsx($r,{className:"w-4 h-4"})})]})]})]})})},m.id)})}),s.jsx("button",{onClick:m=>c(m.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(xy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:m=>d(m.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(yy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},E7=({text:e,speed:t=50,count:r=3,className:n=""})=>{const a=S.useMemo(()=>e.length*10/t,[e,t]),i=S.useMemo(()=>Array(r).fill(e).join("  "),[e,r]);return s.jsxs("div",{className:`overflow-hidden whitespace-nowrap ${n}`,children:[s.jsxs("div",{className:"inline-block animate-marquee",style:{animation:`marquee ${a}s linear infinite`},children:[s.jsx("span",{className:"inline-block px-4",children:i}),s.jsx("span",{className:"inline-block px-4",children:i})]}),s.jsx("style",{children:`
        @keyframes marquee {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(-50%);
          }
        }
      `})]})},L7=()=>{var N,C;const{t:e,language:t}=xe(),r=it(),n=b7(),{categories:a,isLoading:i}=ke(P=>P.categories),{banners:o,featuredBanners:c,heroBanner:d}=ke(P=>P.banners),{products:h}=ke(P=>P.products);S.useEffect(()=>{r(hi()),r(ql()),r(Ju()),n&&r(Wl({includeInactive:!0})),r(ln({limit:100}))},[r,n]);const m=S.useMemo(()=>c.map(P=>({id:P.id,imageUrl:P.imageUrl,alt:P.alt||"lfng Banner",title:P.titleIs||P.title,description:P.descriptionIs||P.description,link:P.link,featuredOrder:P.featuredOrder})),[c]),g=h.some(P=>P.discountPercentage&&P.discountPercentage>0),[p,v]=S.useState([]);S.useEffect(()=>{if(m.length===0){v([]);return}const E=[...m].sort((I,M)=>(I.featuredOrder||0)-(M.featuredOrder||0)).slice(0,Math.min(3,m.length));v(E)},[m]);const x=P=>p[P]||null,w=async(P,E)=>{if(n)try{const I=p[P];I&&I.id&&await r(Zl(I.id)),E&&await r(Kl({id:E,featuredOrder:P+1})),r(ql())}catch(I){console.error("Error switching banner:",I)}},y=S.useMemo(()=>[{icon:s.jsx(L_,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.wineTitle"),description:e("home.features.wineDescription"),link:"/products?category=WINE"},{icon:s.jsx(k_,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.beerTitle"),description:e("home.features.beerDescription"),link:"/products?category=BEER"},{icon:s.jsx(Nr,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.deliveryTitle"),description:e("home.features.deliveryDescription"),link:"/products"},{icon:s.jsx(KA,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.ageVerificationTitle"),description:e("home.features.ageVerificationDescription"),link:"/products"}],[e]),k=S.useMemo(()=>d?{backgroundType:d.backgroundType||"gradient",gradientStartColor:d.gradientStartColor||"#374151",gradientEndColor:d.gradientEndColor||"#111827",gradientDirection:d.gradientDirection||"to-r",backgroundImageUrl:d.backgroundImageUrl,backgroundOpacity:d.backgroundOpacity!==void 0?d.backgroundOpacity:1,marqueeText:t==="is"&&d.marqueeTextIs||d.marqueeText,marqueeSpeed:d.marqueeSpeed||50,marqueeCount:d.marqueeCount||3,logoUrl:d.heroLogoUrl||"/logo_black-web.webp",subtitle:t==="is"?d.heroSubtitleIs||d.heroSubtitle||e("home.hero.subtitle"):d.heroSubtitle||e("home.hero.subtitle"),buttonText:t==="is"?d.heroButtonTextIs||d.heroButtonText||e("home.hero.startShopping"):d.heroButtonText||e("home.hero.startShopping"),buttonLink:d.heroButtonLink||"/products",textColor:d.textColor||"#ffffff",buttonBgColor:d.buttonBgColor||"#ffffff",buttonTextColor:d.buttonTextColor||"#1f2937",overlayOpacity:d.overlayOpacity!==void 0?d.overlayOpacity:0}:{backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:null,backgroundOpacity:1,marqueeText:null,marqueeSpeed:50,marqueeCount:3,logoUrl:"/logo_black-web.webp",subtitle:e("home.hero.subtitle"),buttonText:e("home.hero.startShopping"),buttonLink:"/products",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0},[d,t,e]),j=()=>{const{backgroundType:P,gradientStartColor:E,gradientEndColor:I,gradientDirection:M,backgroundImageUrl:T,backgroundOpacity:H}=k;return P==="image"&&T?{backgroundImage:`url(${T})`,backgroundSize:"cover",backgroundPosition:"center",opacity:H}:P==="gradient"?{background:`linear-gradient(${{"to-r":"to right","to-l":"to left","to-t":"to top","to-b":"to bottom","to-br":"to bottom right","to-bl":"to bottom left","to-tr":"to top right","to-tl":"to top left"}[M]||"to right"}, ${E}, ${I})`,opacity:H}:{}};return s.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[s.jsxs("section",{className:"relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0",style:j()}),k.backgroundType==="marquee"&&k.marqueeText&&s.jsx("div",{className:"absolute inset-0 flex flex-col justify-center",style:{background:`linear-gradient(to right, ${k.gradientStartColor}, ${k.gradientEndColor})`},children:Array.from({length:10}).map((P,E)=>s.jsx(E7,{text:k.marqueeText,speed:k.marqueeSpeed,count:k.marqueeCount,className:"text-6xl md:text-8xl font-bold opacity-5",style:{color:k.textColor}},E))}),k.overlayOpacity>0&&s.jsx("div",{className:"absolute inset-0 bg-black",style:{opacity:k.overlayOpacity}}),s.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("img",{src:k.logoUrl,alt:e("home.olfongLogoAlt"),className:"h-20 md:h-32 w-auto",style:{filter:k.logoUrl==="/logo_black-web.webp"?"invert(1)":"none"}})}),s.jsx("p",{className:"text-xl md:text-2xl mb-8",style:{color:k.textColor},children:k.subtitle}),s.jsx("div",{className:"flex justify-center",children:s.jsx(Te,{to:k.buttonLink,className:"btn px-8 py-3 text-lg transition-colors duration-200",style:{backgroundColor:k.buttonBgColor,color:k.buttonTextColor},children:k.buttonText})})]})})]}),s.jsx("section",{className:"py-16 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.why.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.why.subtitle")})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:y.map((P,E)=>s.jsxs(Te,{to:P.link,className:"card p-6 text-center hover:shadow-lg transition-shadow duration-200",children:[s.jsx("div",{className:"flex justify-center mb-4",children:P.icon}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:P.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:P.description})]},E))})]})})}),g&&s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.discounted.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.discounted.subtitle")})]}),s.jsx(P7,{limit:6})]})}),x(0)&&s.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[s.jsx("img",{src:x(0).imageUrl,alt:x(0).alt,className:"w-full h-64 md:h-80 object-cover"}),(x(0).title||x(0).description)&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:s.jsxs("div",{className:"p-6 text-white",children:[x(0).title&&s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:x(0).title}),x(0).description&&s.jsx("p",{className:"text-lg opacity-90",children:x(0).description})]})}),n&&s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((N=x(0))==null?void 0:N.id)||"",onChange:P=>w(0,P.target.value||null),children:[s.jsx("option",{value:"",children:"Select Banner"}),o.filter(P=>P.isActive).map(P=>s.jsx("option",{value:P.id,children:P.titleIs||P.title||`Banner ${P.id}`},P.id))]})})]})})}),!i&&a.length>0&&s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.categories.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.categories.subtitle")})]}),s.jsx("div",{className:"space-y-8",children:a.map(P=>s.jsx(C7,{category:P,limit:6},P.id))})]})}),x(1)&&s.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[s.jsx("img",{src:x(1).imageUrl,alt:x(1).alt,className:"w-full h-64 md:h-80 object-cover"}),(x(1).title||x(1).description)&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:s.jsxs("div",{className:"p-6 text-white",children:[x(1).title&&s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:x(1).title}),x(1).description&&s.jsx("p",{className:"text-lg opacity-90",children:x(1).description})]})}),n&&s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((C=x(1))==null?void 0:C.id)||"",onChange:P=>w(1,P.target.value||null),children:[s.jsx("option",{value:"",children:"Select Banner"}),o.filter(P=>P.isActive).map(P=>s.jsx("option",{value:P.id,children:P.titleIs||P.title||`Banner ${P.id}`},P.id))]})})]})})}),s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800 hidden md:block",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.testimonials.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.testimonials.subtitle")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review1"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review1Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review1Location")})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review2"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review2Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review2Location")})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review3"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review3Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review3Location")})]})]})]})})]})};var R_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rk=bt.createContext&&bt.createContext(R_),T7=["attr","size","title"];function I7(e,t){if(e==null)return{};var r=A7(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function A7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kh.apply(this,arguments)}function sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sk(Object(r),!0).forEach(function(n){M7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M7(e,t,r){return t=O7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7(e){var t=R7(e,"string");return typeof t=="symbol"?t:t+""}function R7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D_(e){return e&&e.map((t,r)=>bt.createElement(t.tag,Zh({key:r},t.attr),D_(t.child)))}function xn(e){return t=>bt.createElement(D7,Kh({attr:Zh({},e.attr)},t),D_(e.child))}function D7(e){var t=r=>{var{attr:n,size:a,title:i}=e,o=I7(e,T7),c=a||r.size||"1em",d;return r.className&&(d=r.className),e.className&&(d=(d?d+" ":"")+e.className),bt.createElement("svg",Kh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:d,style:Zh(Zh({color:e.color||r.color},r.style),e.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),i&&bt.createElement("title",null,i),e.children)};return rk!==void 0?bt.createElement(rk.Consumer,null,r=>t(r)):t(R_)}function F_(e){return xn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 384c-28.02 0-31.26-32-74.5-32-43.43 0-46.825 32-74.75 32-27.695 0-31.454-32-74.75-32-42.842 0-47.218 32-74.5 32-28.148 0-31.202-32-74.75-32-43.547 0-46.653 32-74.75 32v-80c0-26.5 21.5-48 48-48h16V112h64v144h64V112h64v144h64V112h64v144h16c26.5 0 48 21.5 48 48v80zm0 128H0v-96c43.356 0 46.767-32 74.75-32 27.951 0 31.253 32 74.75 32 42.843 0 47.217-32 74.5-32 28.148 0 31.201 32 74.75 32 43.357 0 46.767-32 74.75-32 27.488 0 31.252 32 74.5 32v96zM96 96c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40z"},child:[]}]})(e)}function z_(e){return xn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M298.2 156.6c-52.7-25.7-114.5-10.5-150.2 32.8l55.2 55.2c6.3 6.3 6.3 16.4 0 22.6-3.1 3.1-7.2 4.7-11.3 4.7s-8.2-1.6-11.3-4.7L130.4 217 2.3 479.7c-2.9 6-3.1 13.3 0 19.7 5.4 11.1 18.9 15.7 30 10.3l133.6-65.2-49.2-49.2c-6.3-6.2-6.3-16.4 0-22.6 6.3-6.2 16.4-6.2 22.6 0l57 57 102-49.8c24-11.7 44.5-31.3 57.1-57.1 30.1-61.7 4.5-136.1-57.2-166.2zm92.1-34.9C409.8 81 399.7 32.9 360 0c-50.3 41.7-52.5 107.5-7.9 151.9l8 8c44.4 44.6 110.3 42.4 151.9-7.9-32.9-39.7-81-49.8-121.7-30.3z"},child:[]}]})(e)}function B_(e){return xn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 288v160a32 32 0 0 0 32 32h448a32 32 0 0 0 32-32V288zM299.83 32a32 32 0 0 0-21.13 7L0 256h512c0-119.89-94-217.8-212.17-224z"},child:[]}]})(e)}function Xs(e){return xn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.8 49.57a169.44 169.44 0 0 0-239.5 0C187.82 85 160.13 128 160.13 192v85.83l-40.62 40.59c-9.7 9.69-24 11.07-36.78 6a60.33 60.33 0 0 0-65 98.72C33 438.39 54.24 442.7 73.85 438.21c-4.5 19.6-.18 40.83 15.1 56.1a60.35 60.35 0 0 0 98.8-65c-5.09-12.73-3.72-27 6-36.75L234.36 352h85.89a187.87 187.87 0 0 0 61.89-10c-39.64-43.89-39.83-110.23 1.05-151.07 34.38-34.36 86.76-39.46 128.74-16.8 1.3-44.96-14.81-90.28-49.13-124.56z"},child:[]}]})(e)}function Gh(e){return xn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M327.1 96c-89.97 0-168.54 54.77-212.27 101.63L27.5 131.58c-12.13-9.18-30.24.6-27.14 14.66L24.54 256 .35 365.77c-3.1 14.06 15.01 23.83 27.14 14.66l87.33-66.05C158.55 361.23 237.13 416 327.1 416 464.56 416 576 288 576 256S464.56 96 327.1 96zm87.43 184c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24 13.26 0 24 10.74 24 24 0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function $_(e){return xn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256H48a48 48 0 0 0 0 96h416a48 48 0 0 0 0-96zm16 128H32a16 16 0 0 0-16 16v16a64 64 0 0 0 64 64h352a64 64 0 0 0 64-64v-16a16 16 0 0 0-16-16zM58.64 224h394.72c34.57 0 54.62-43.9 34.82-75.88C448 83.2 359.55 32.1 256 32c-103.54.1-192 51.2-232.18 116.11C4 180.09 24.07 224 58.64 224zM384 112a16 16 0 1 1-16 16 16 16 0 0 1 16-16zM256 80a16 16 0 1 1-16 16 16 16 0 0 1 16-16zm-128 32a16 16 0 1 1-16 16 16 16 0 0 1 16-16z"},child:[]}]})(e)}function U_(e){return xn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z"},child:[]}]})(e)}function V_(e){return xn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M158.87.15c-16.16-1.52-31.2 8.42-35.33 24.12l-14.81 56.27c187.62 5.49 314.54 130.61 322.48 317l56.94-15.78c15.72-4.36 25.49-19.68 23.62-35.9C490.89 165.08 340.78 17.32 158.87.15zm-58.47 112L.55 491.64a16.21 16.21 0 0 0 20 19.75l379-105.1c-4.27-174.89-123.08-292.14-299.15-294.1zM128 416a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm48-152a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm104 104a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"},child:[]}]})(e)}function Yh(e){return xn({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(e)}function Jh(e){return xn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M468.958 108.958c-27.507 2.08-48.997 7.94-71.375 22.572-5.333-2.214-12.62-17.738-16-16-11.82 6.08-14.892 19.555-4.916 32.817l-59.084 9.916c-24.776 3.341-49.567 4.838-74.187 5.334 1.326 3.832 2.96 7.636 4.812 10.05 5.219 6.802 20.323 6.21 21.07 14.75 1.935 22.098-24.876 47.415-47.056 47.057-15.401-.248-17.017-28.762-31.604-33.713-19.097-6.482-41.62 18.77-59.699 9.832-15.267-7.547-24.992-39.8-27.836-50.41-10.213-.127-20.327-.142-30.316.035-12.564.366-22.902 5.645-29.408 14.239-8.676 11.458-11.652 26.658-13.254 42.925-1.78 18.057 6.147 53.007 5.517 70.282-.504 13.85-7.493 11.87-11.912 18.888-13.52 21.47 8.894 20.83 17.014 5.56 12.482-23.473 4.253-63.11 7.195-92.974 1.855-35.76 10.597-23.937 15.664-24.588-4.2 13.065-6.21 30.962-7 51.334 6.895-2.342 36.498-11.6 42.73-.174 6.872 12.598-27.802 22.016-23.878 35.819 2.464 8.666 22.95 2.378 24.582 11.238 3.322 18.035-32.13 38.713-42.236 44.209.812 23.329 1.564 45.567 1.238 65.086H88.91c-4.234-16.543-12.038-49.944-4.06-55.084 21.425-18.091 29.836-37.484 42.732-56.428 8.755 2.556 16.92 4.787 24.782 6.672 3.553.972 7.244 1.771 10.984 2.44 24.859 4.967 61.553 5.678 90.783-.172 3.76 34.12 7.263 68.452 4.602 102.572h28.957c-12.375-26.902-4.263-65.044 13.892-86.27l44.934-33.462c24.881-16.384 42.93-37.996 55.982-63.38 30.402 3.413 57.086 3.29 77.192-.786l12.84-19.55c-24.257-17.857-43.3-36.585-62.948-58.13 10.063-14.533 25.027-22.765 39.375-32.506zm-39.375 54.572a8 8 0 1 1 0 16 8 8 0 0 1 0-16zM366.2 183.481c5.029 9.822-26.17 10.808-24.933 21.772.998 8.847 22.204 3.839 23.53 12.643 3.818 25.373-28.44 53.805-54.08 54.78-14.262.544-34.902-14.06-32.308-28.093 2.605-14.092 34.551-1.657 40.383-14.748 4.724-10.603-18.352-22.01-12.992-32.307 6.264-12.032 30.364-22.553 41.934-22.646 11.57-.093 15.606 3.347 18.466 8.6zm-26.585 126.346l-34.707 23.96 6.464 69.255h34.414c-11.783-22.454-15.58-55.506-6.171-93.215zm-204.561 1.41c-6.047 12.184-14.147 21.97-22.174 31.242 5.97 3.235 11.648 5.414 17.154 6.614 11.218 2.443 21.636.333 29.948-4.408 10.056-5.737 17.521-14.452 24.115-23.368-14.615-.869-32.96-2.962-49.043-10.08zm24.252 52c-8.737 2.585-17.452 3.7-25.566 2.96 5.167 12.624 10.45 24.152 15.824 36.845h28.306c-10.393-18.48-16.148-29.285-18.564-39.805z"},child:[]}]})(e)}const H_=({type:e="card",count:t=1,className:r=""})=>{const n=()=>{switch(e){case"card":return s.jsxs("div",{className:`card overflow-hidden ${r}`,children:[s.jsx("div",{className:"w-full h-64 bg-gray-200 animate-pulse"}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4 mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]})]});case"product":return s.jsx("div",{className:"group",children:s.jsxs("div",{className:`card overflow-hidden hover:shadow-xl transition-all duration-300 border-0 shadow-md ${r}`,children:[s.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse"}),s.jsxs("div",{className:"p-6 bg-white",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}),s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"})}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]})]})});case"text":return s.jsxs("div",{className:`space-y-2 ${r}`,children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-4/6"})]});case"button":return s.jsx("div",{className:`h-10 bg-gray-200 rounded animate-pulse ${r}`});case"image":return s.jsx("div",{className:`bg-gray-200 animate-pulse ${r}`});default:return s.jsx("div",{className:`bg-gray-200 animate-pulse rounded ${r}`})}};return t===1?n():s.jsx("div",{className:"space-y-4",children:Array.from({length:t},(a,i)=>s.jsx("div",{children:n()},i))})};H_.propTypes={type:me.oneOf(["card","product","text","button","image"]),count:me.number,className:me.string};const Kd=({min:e=0,max:t=100,step:r=1,value:n=[e,t],onChange:a,className:i="",label:o="",formatValue:c=h=>h,disabled:d=!1})=>{const[h,m]=S.useState(null),g=S.useRef(null),[p,v]=S.useState(n);S.useEffect(()=>{v(n)},[n]);const x=S.useCallback(P=>(P-e)/(t-e)*100,[e,t]),w=S.useCallback(P=>e+P/100*(t-e),[e,t]),y=S.useCallback(P=>E=>{d||(E.preventDefault(),m(P))},[d]),k=S.useCallback(P=>{if(!h||!g.current||d)return;const E=g.current.getBoundingClientRect(),I=Math.max(0,Math.min(100,(P.clientX-E.left)/E.width*100)),M=w(I),T=Math.round(M/r)*r,H=Math.max(e,Math.min(t,T));let J=[...p];h==="min"?J[0]=Math.min(H,J[1]):h==="max"&&(J[1]=Math.max(H,J[0])),v(J),a&&a(J)},[h,p,d,r,e,t,w,a]),j=S.useCallback(()=>{m(null)},[]);S.useEffect(()=>{if(h)return document.addEventListener("mousemove",k),document.addEventListener("mouseup",j),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",j)}},[h,k,j]);const N=x(p[0]),C=x(p[1]);return s.jsxs("div",{className:`dual-thumb-slider ${i}`,children:[o&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{ref:g,className:"relative h-2 bg-gray-200 dark:bg-gray-600 rounded-lg cursor-pointer",children:[s.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-600 rounded-lg"}),s.jsx("div",{className:"absolute h-2 bg-primary-500 rounded-lg",style:{left:`${N}%`,width:`${C-N}%`}}),s.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-x-1/2 -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${d?"opacity-50 cursor-not-allowed":""}`,style:{left:`${N}%`},onMouseDown:y("min")}),s.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-x-1/2 -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${d?"opacity-50 cursor-not-allowed":""}`,style:{left:`${C}%`},onMouseDown:y("max")})]}),s.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:c(p[0])}),s.jsx("span",{children:c(p[1])})]})]})]})},F7=({category:e,subcategory:t})=>{const{currentLanguage:r}=xe();if(!e)return null;if(t){const a=r==="is"?t.descriptionIs||t.description:t.description||t.descriptionIs,i=r==="is"?t.nameIs:t.name;return a?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-900/10 rounded-lg border border-primary-200 dark:border-primary-800/30",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:i}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:a})]}):null}const n=r==="is"?e.descriptionIs||e.description:e.description||e.descriptionIs;return n?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-900/10 rounded-lg border border-primary-200 dark:border-primary-800/30",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r==="is"?e.nameIs:e.name}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:n})]}):null},z7=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?s.jsx(Gh,{className:"w-4 h-4 text-gray-500"}):t.includes("beef")||t.includes("nautakjt")?s.jsx(Jh,{className:"w-4 h-4 text-gray-500"}):t.includes("lamb")||t.includes("lambakjt")?s.jsx(Xs,{className:"w-4 h-4 text-gray-500"}):t.includes("pork")||t.includes("svnakjt")?s.jsx($_,{className:"w-4 h-4 text-gray-500"}):t.includes("fowl")||t.includes("fuglakjt")||t.includes("poultry")?s.jsx(Xs,{className:"w-4 h-4 text-gray-500"}):t.includes("cheese")||t.includes("ostur")?s.jsx(B_,{className:"w-4 h-4 text-gray-500"}):t.includes("vegetable")||t.includes("grnmeti")?s.jsx(z_,{className:"w-4 h-4 text-gray-500"}):t.includes("dessert")||t.includes("eftirrttur")?s.jsx(F_,{className:"w-4 h-4 text-gray-500"}):t.includes("seafood")||t.includes("sjvarfiskur")?s.jsx(Gh,{className:"w-4 h-4 text-gray-500"}):t.includes("pasta")||t.includes("pasta")?s.jsx(Yh,{className:"w-4 h-4 text-gray-500"}):t.includes("pizza")||t.includes("pizza")?s.jsx(V_,{className:"w-4 h-4 text-gray-500"}):t.includes("salad")||t.includes("salat")?s.jsx(U_,{className:"w-4 h-4 text-gray-500"}):t.includes("meat")||t.includes("kjt")?s.jsx(Jh,{className:"w-4 h-4 text-gray-500"}):t.includes("chicken")||t.includes("kjklingur")?s.jsx(Xs,{className:"w-4 h-4 text-gray-500"}):t.includes("duck")||t.includes("nd")?s.jsx(Xs,{className:"w-4 h-4 text-gray-500"}):t.includes("turkey")||t.includes("kalknn")?s.jsx(Xs,{className:"w-4 h-4 text-gray-500"}):s.jsx(Yh,{className:"w-4 h-4 text-gray-500"})},B7=()=>{const{t:e,currentLanguage:t,isLoading:r}=xe(),n=it(),a=ss(),[i]=lE(),{products:o,categories:c,filters:d,isLoading:h}=ke(D=>D.products),{isAuthenticated:m}=ke(D=>D.auth),[g,p]=S.useState(!1),[v,x]=S.useState(null),[w,y]=S.useState(null);S.useEffect(()=>{n($l())},[n]);const k=c.filter(D=>{var W;return((W=D._count)==null?void 0:W.products)>0});S.useEffect(()=>{var X;const D=i.get("category"),W=i.get("subcategory");if(D&&(D!==d.category||W!==d.subcategory)){n(ls({category:D,subcategory:W||""}));const G=c.find(R=>R.name===D);if(x(G||null),W&&G){const R=(X=G.subcategories)==null?void 0:X.find(O=>O.name===W);y(R||null)}else y(null)}else!D&&d.category&&(n(ls({category:"",subcategory:""})),x(null),y(null))},[i,n,d.category,d.subcategory,c]),S.useEffect(()=>{n(ln(d))},[n,d]),S.useEffect(()=>{o.length===0&&!h&&n(ln(d))},[n,d,o.length,h]);const j=D=>{const W=typeof D=="string"?D:(D==null?void 0:D.name)||"";n(ls({category:W,subcategory:""})),p(!1);const X=new URLSearchParams(i);W&&W.trim()!==""?(X.set("category",W),X.delete("subcategory")):(X.delete("category"),X.delete("subcategory")),a(`/products?${X.toString()}`,{replace:!0})},N=D=>{n(ls({search:D}))},C=(D,W)=>{n(ls({sortBy:D,sortOrder:W}))},P=(D,W)=>{n(ls({minPrice:D,maxPrice:W}))},E=(D,W)=>{n(ls({minAlcoholVolume:D,maxAlcoholVolume:W}))},I=()=>{if(o.length===0)return{min:0,max:5e4};const D=o.map(G=>G.price).filter(G=>G!=null);if(D.length===0)return{min:0,max:5e4};const W=Math.min(...D),X=Math.max(...D);return{min:W,max:X}},M=()=>{if(o.length===0)return{min:0,max:50};const D=o.map(G=>G.alcoholContent).filter(G=>G!=null);if(D.length===0)return{min:0,max:50};const W=Math.min(...D),X=Math.max(...D);return{min:W,max:X}},T=I(),H=M(),[J,$]=S.useState(!1);return S.useEffect(()=>{!h&&!J&&$(!0)},[h,J]),r||h&&!J?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-6 w-48"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:Array.from({length:8},(D,W)=>s.jsx(H_,{type:"product"},W))})]})}):s.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:[s.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex gap-8",children:[s.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:s.jsx("div",{className:"sticky top-24",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(go,{className:"w-5 h-5 mr-2"}),e("productsPage.filters")]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common.search")}),s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"text",placeholder:e("common.search"),value:d.search,onChange:D=>N(D.target.value),className:"input pl-10 pr-3","aria-label":e("aria.searchProducts")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage.category")}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>j(""),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${d.category===""?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":d.category==="",children:e("productsPage.all")}),k.map(D=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>j(D),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${d.category===D.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":d.category===D.name,children:t==="is"?D.nameIs:D.name}),d.category===D.name&&D.subcategories&&D.subcategories.length>0&&s.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[s.jsx("button",{onClick:()=>{n(ls({subcategory:""})),y(null);const W=new URLSearchParams(i);W.set("category",D.name),W.delete("subcategory"),a(`/products?${W.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!d.subcategory||d.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage.all")}),D.subcategories.map(W=>s.jsx("button",{onClick:()=>{n(ls({subcategory:W.name})),y(W);const X=new URLSearchParams(i);X.set("category",D.name),X.set("subcategory",W.name),a(`/products?${X.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${d.subcategory===W.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?W.nameIs:W.name},W.id))]})]},D.id))]})]}),s.jsx("div",{children:s.jsx(Kd,{min:T.min,max:T.max,step:100,value:[d.minPrice||T.min,d.maxPrice||T.max],onChange:D=>P(D[0],D[1]),label:`${e("productsPage.priceRange")} (${d.minPrice||T.min} - ${d.maxPrice||T.max} kr)`,formatValue:D=>`${D} kr`})}),s.jsx("div",{children:s.jsx(Kd,{min:H.min,max:H.max,step:.5,value:[d.minAlcoholVolume||H.min,d.maxAlcoholVolume||H.max],onChange:D=>E(D[0],D[1]),label:`${e("productsPage.alcoholContent")} (${d.minAlcoholVolume||H.min} - ${d.maxAlcoholVolume||H.max}%)`,formatValue:D=>`${D}%`})})]})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("productsPage.title")}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none min-w-0",children:[s.jsx(SA,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),s.jsxs("select",{value:`${d.sortBy}-${d.sortOrder}`,onChange:D=>{const[W,X]=D.target.value.split("-");C(W,X)},className:"flex-1 sm:flex-none px-3 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"name-asc",children:e("productsPage.sortOptions.nameAZ")}),s.jsx("option",{value:"name-desc",children:e("productsPage.sortOptions.nameZA")}),s.jsx("option",{value:"price-asc",children:e("productsPage.sortOptions.priceLowToHigh")}),s.jsx("option",{value:"price-desc",children:e("productsPage.sortOptions.priceHighToLow")}),s.jsx("option",{value:"alcoholVolume-asc",children:e("productsPage.sortBy")}),s.jsx("option",{value:"alcoholVolume-desc",children:e("productsPage.sortBy")})]})]}),s.jsxs("button",{onClick:()=>p(!0),className:"lg:hidden btn btn-outline flex items-center justify-center gap-2 py-2 px-3 text-sm sm:text-base flex-1 sm:flex-none whitespace-nowrap",children:[s.jsx(go,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("productsPage.filters")}),s.jsx("span",{className:"sm:hidden",children:e("productsPage.filters")})]})]})]})}),v&&s.jsx(F7,{category:v,subcategory:w}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 custom-scrollbar",children:[s.jsx("button",{onClick:()=>{x(null),j("")},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${!v&&d.category===""?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:e("productsPage.all")}),k.map(D=>s.jsx("button",{onClick:()=>{x(D),j(D)},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${(v==null?void 0:v.id)===D.id?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t==="is"?D.nameIs:D.name},D.id))]}),v&&v.subcategories&&v.subcategories.length>0&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 overflow-x-auto pb-2 pl-4 border-l-2 border-primary-200 dark:border-primary-800 custom-scrollbar",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium flex-shrink-0",children:[e("productsPage.subcategory"),":"]}),s.jsx("button",{onClick:()=>j(v),className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${d.category===v.name&&!d.subcategory?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e("productsPage.all")}),v.subcategories.map(D=>s.jsx("button",{onClick:()=>{n(ls({category:v.name,subcategory:D.name})),p(!1);const W=new URLSearchParams(i);W.set("category",v.name),W.set("subcategory",D.name),a(`/products?${W.toString()}`,{replace:!0})},className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${d.subcategory===D.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:t==="is"?D.nameIs:D.name},D.id))]})]}),s.jsxs("div",{className:"relative",children:[h&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent"})}),o.length===0?s.jsx("div",{className:"text-center py-20",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("productsPage.noProducts")}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:e("productsPage.tryAdjusting")}),s.jsx("button",{onClick:()=>N(""),className:"btn btn-outline",children:e("productsPage.clearFilters")})]})}):s.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 transition-opacity duration-200 ${h?"opacity-60 pointer-events-none":"opacity-100"}`,children:o.map(D=>s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(Te,{to:`/products/${D.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white",children:[s.jsx(td,{product:D,className:"w-full h-64 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:t}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),D.stock===0&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:e("productsPage.outOfStock")})})]})}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-4 flex-1",children:[s.jsx("h3",{className:"font-bold text-xl mb-3 text-gray-900 dark:text-white line-clamp-2 leading-tight",children:Ta(t,D)}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-3",children:cf(t,D)}),(D.volume||D.alcoholContent||D.country)&&s.jsxs("div",{className:"mt-3 space-y-1",children:[D.volume&&D.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.volume"),":"]})," ",D.volume," - ",D.alcoholContent,"%"]}),D.volume&&!D.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.volume"),":"]})," ",D.volume]}),!D.volume&&D.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.abv"),":"]})," ",D.alcoholContent,"%"]}),D.country&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.origin"),":"]})," ",S7(t,D)]})]})]}),s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[D.price.toLocaleString()," ",e("common.currency")]})}),to(t,D).length>0&&s.jsx("div",{className:"mt-3 mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[to(t,D).slice(0,4).map((W,X)=>s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full",title:W,children:z7(W)},X)),to(t,D).length>4&&s.jsxs("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full text-xs text-gray-500",children:["+",to(t,D).length-4]})]})}),s.jsxs("div",{className:"mt-auto",children:[m&&D.stock>0&&s.jsxs(Te,{to:`/products/${D.id}`,className:"btn btn-primary w-full py-3 text-sm font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),e("productsPage.addToCart")]}),!m&&s.jsxs(Te,{to:`/products/${D.id}`,className:"btn btn-outline w-full py-3 text-sm font-medium hover:shadow-md transition-all duration-200 flex items-center justify-center",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e("common.view")]})]})]})]})},D.id))})]})]})]})}),g&&s.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),s.jsxs("div",{className:"absolute inset-y-0 left-0 max-w-xs w-full bg-white dark:bg-gray-800 shadow-xl p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[s.jsx(go,{className:"w-5 h-5 mr-2"}),e("productsPage.filters")]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common.search")}),s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"text",placeholder:e("common.search"),value:d.search,onChange:D=>N(D.target.value),className:"input pl-10 pr-3","aria-label":e("aria.filterBy")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage.category")}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>j(null),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${!d.category||d.category===""||d.category===null?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":!d.category||d.category===""||d.category===null,children:e("productsPage.all")}),k.map(D=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>j(D),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${d.category===D.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":d.category===D.name,children:t==="is"?D.nameIs:D.name}),d.category===D.name&&D.subcategories&&D.subcategories.length>0&&s.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[s.jsx("button",{onClick:()=>{n(ls({subcategory:""}));const W=new URLSearchParams(i);W.set("category",D.name),W.delete("subcategory"),a(`/products?${W.toString()}`,{replace:!0}),p(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!d.subcategory||d.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage.all")}),D.subcategories.map(W=>s.jsx("button",{onClick:()=>{n(ls({subcategory:W.name}));const X=new URLSearchParams(i);X.set("category",D.name),X.set("subcategory",W.name),a(`/products?${X.toString()}`,{replace:!0}),p(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${d.subcategory===W.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?W.nameIs:W.name},W.id))]})]},D.id))]})]}),s.jsx("div",{className:"mb-6",children:s.jsx(Kd,{min:0,max:5e4,step:100,value:[d.minPrice||0,d.maxPrice||5e4],onChange:D=>P(D[0],D[1]),label:`${e("productsPage.priceRange")} (${d.minPrice||0} - ${d.maxPrice||5e4} kr)`,formatValue:D=>`${D} kr`})}),s.jsx("div",{className:"mb-6",children:s.jsx(Kd,{min:0,max:50,step:.5,value:[d.minAlcoholVolume||0,d.maxAlcoholVolume||50],onChange:D=>E(D[0],D[1]),label:`${e("productsPage.alcoholContent")} (${d.minAlcoholVolume||0} - ${d.maxAlcoholVolume||50}%)`,formatValue:D=>`${D}%`})})]})]})]})};var rd=e=>e.type==="checkbox",ai=e=>e instanceof Date,wr=e=>e==null;const W_=e=>typeof e=="object";var zt=e=>!wr(e)&&!Array.isArray(e)&&W_(e)&&!ai(e),$7=e=>zt(e)&&e.target?rd(e.target)?e.target.checked:e.target.value:e,U7=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,V7=(e,t)=>e.has(U7(t)),H7=e=>{const t=e.constructor&&e.constructor.prototype;return zt(t)&&t.hasOwnProperty("isPrototypeOf")},Sy=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kt(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Sy&&(e instanceof Blob||n))&&(r||zt(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!H7(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Kt(e[a]));else return e;return t}var df=e=>/^\w*$/.test(e),Ot=e=>e===void 0,Cy=e=>Array.isArray(e)?e.filter(Boolean):[],Py=e=>Cy(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Se=(e,t,r)=>{if(!t||!zt(e))return r;const n=(df(t)?[t]:Py(t)).reduce((a,i)=>wr(a)?a:a[i],e);return Ot(n)||n===e?Ot(e[t])?r:e[t]:n},Ys=e=>typeof e=="boolean",xt=(e,t,r)=>{let n=-1;const a=df(t)?[t]:Py(t),i=a.length,o=i-1;for(;++n<i;){const c=a[n];let d=r;if(n!==o){const h=e[c];d=zt(h)||Array.isArray(h)?h:isNaN(+a[n+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=d,e=e[c]}};const nk={BLUR:"blur",FOCUS_OUT:"focusout"},As={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},jn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},W7=bt.createContext(null);W7.displayName="HookFormContext";var q7=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==As.all&&(t._proxyFormState[o]=!n||As.all),e[o]}});return a};const K7=typeof window<"u"?bt.useLayoutEffect:bt.useEffect;var Gr=e=>typeof e=="string",Z7=(e,t,r,n,a)=>Gr(e)?(n&&t.watch.add(e),Se(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Se(r,i))):(n&&(t.watchAll=!0),r),O0=e=>wr(e)||!W_(e);function aa(e,t,r=new WeakSet){if(O0(e)||O0(t))return e===t;if(ai(e)&&ai(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const c=t[i];if(ai(o)&&ai(c)||zt(o)&&zt(c)||Array.isArray(o)&&Array.isArray(c)?!aa(o,c,r):o!==c)return!1}}return!0}var G7=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Gl=e=>Array.isArray(e)?e:[e],ak=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function q_(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const a=e[n],i=t[n];if(a&&zt(a)&&i){const o=q_(a,i);zt(o)&&(r[n]=o)}else e[n]&&(r[n]=i)}return r}var Tr=e=>zt(e)&&!Object.keys(e).length,Ey=e=>e.type==="file",Ms=e=>typeof e=="function",Xh=e=>{if(!Sy)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},K_=e=>e.type==="select-multiple",Ly=e=>e.type==="radio",Y7=e=>Ly(e)||rd(e),Bg=e=>Xh(e)&&e.isConnected;function J7(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ot(e)?n++:e[t[n++]];return e}function X7(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ot(e[t]))return!1;return!0}function Mt(e,t){const r=Array.isArray(t)?t:df(t)?[t]:Py(t),n=r.length===1?e:J7(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(zt(n)&&Tr(n)||Array.isArray(n)&&X7(n))&&Mt(e,r.slice(0,-1)),e}var Q7=e=>{for(const t in e)if(Ms(e[t]))return!0;return!1};function Z_(e){return Array.isArray(e)||zt(e)&&!Q7(e)}function R0(e,t={}){for(const r in e)Z_(e[r])?(t[r]=Array.isArray(e[r])?[]:{},R0(e[r],t[r])):wr(e[r])||(t[r]=!0);return t}function Ui(e,t,r){r||(r=R0(t));for(const n in e)Z_(e[n])?Ot(t)||O0(r[n])?r[n]=R0(e[n],Array.isArray(e[n])?[]:{}):Ui(e[n],wr(t)?{}:t[n],r[n]):r[n]=!aa(e[n],t[n]);return r}const ik={value:!1,isValid:!1},ok={value:!0,isValid:!0};var G_=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ot(e[0].attributes.value)?Ot(e[0].value)||e[0].value===""?ok:{value:e[0].value,isValid:!0}:ok:ik}return ik},Y_=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ot(e)?e:t?e===""?NaN:e&&+e:r&&Gr(e)?new Date(e):n?n(e):e;const lk={isValid:!1,value:null};var J_=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,lk):lk;function ck(e){const t=e.ref;return Ey(t)?t.files:Ly(t)?J_(e.refs).value:K_(t)?[...t.selectedOptions].map(({value:r})=>r):rd(t)?G_(e.refs).value:Y_(Ot(t.value)?e.ref.value:t.value,e)}var eM=(e,t,r,n)=>{const a={};for(const i of e){const o=Se(t,i);o&&xt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Qh=e=>e instanceof RegExp,ml=e=>Ot(e)?e:Qh(e)?e.source:zt(e)?Qh(e.value)?e.value.source:e.value:e,dk=e=>({isOnSubmit:!e||e===As.onSubmit,isOnBlur:e===As.onBlur,isOnChange:e===As.onChange,isOnAll:e===As.all,isOnTouch:e===As.onTouched});const uk="AsyncFunction";var tM=e=>!!e&&!!e.validate&&!!(Ms(e.validate)&&e.validate.constructor.name===uk||zt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===uk)),rM=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),hk=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Yl=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Se(e,a);if(i){const{_f:o,...c}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(Yl(c,t))break}else if(zt(c)&&Yl(c,t))break}}};function mk(e,t,r){const n=Se(e,r);if(n||df(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Se(t,i),c=Se(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};a.pop()}return{name:r}}var sM=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Tr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||As.all))},nM=(e,t,r)=>!e||!t||e===t||Gl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),aM=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,iM=(e,t)=>!Cy(Se(e,t)).length&&Mt(e,t),oM=(e,t,r)=>{const n=Gl(Se(e,r));return xt(n,"root",t[r]),xt(e,r,n),e};function fk(e,t,r="validate"){if(Gr(e)||Array.isArray(e)&&e.every(Gr)||Ys(e)&&!e)return{type:r,message:Gr(e)?e:"",ref:t}}var Fi=e=>zt(e)&&!Qh(e)?e:{value:e,message:""},gk=async(e,t,r,n,a,i)=>{const{ref:o,refs:c,required:d,maxLength:h,minLength:m,min:g,max:p,pattern:v,validate:x,name:w,valueAsNumber:y,mount:k}=e._f,j=Se(r,w);if(!k||t.has(w))return{};const N=c?c[0]:o,C=$=>{a&&N.reportValidity&&(N.setCustomValidity(Ys($)?"":$||""),N.reportValidity())},P={},E=Ly(o),I=rd(o),M=E||I,T=(y||Ey(o))&&Ot(o.value)&&Ot(j)||Xh(o)&&o.value===""||j===""||Array.isArray(j)&&!j.length,H=G7.bind(null,w,n,P),J=($,D,W,X=jn.maxLength,G=jn.minLength)=>{const R=$?D:W;P[w]={type:$?X:G,message:R,ref:o,...H($?X:G,R)}};if(i?!Array.isArray(j)||!j.length:d&&(!M&&(T||wr(j))||Ys(j)&&!j||I&&!G_(c).isValid||E&&!J_(c).isValid)){const{value:$,message:D}=Gr(d)?{value:!!d,message:d}:Fi(d);if($&&(P[w]={type:jn.required,message:D,ref:N,...H(jn.required,D)},!n))return C(D),P}if(!T&&(!wr(g)||!wr(p))){let $,D;const W=Fi(p),X=Fi(g);if(!wr(j)&&!isNaN(j)){const G=o.valueAsNumber||j&&+j;wr(W.value)||($=G>W.value),wr(X.value)||(D=G<X.value)}else{const G=o.valueAsDate||new Date(j),R=Q=>new Date(new Date().toDateString()+" "+Q),O=o.type=="time",q=o.type=="week";Gr(W.value)&&j&&($=O?R(j)>R(W.value):q?j>W.value:G>new Date(W.value)),Gr(X.value)&&j&&(D=O?R(j)<R(X.value):q?j<X.value:G<new Date(X.value))}if(($||D)&&(J(!!$,W.message,X.message,jn.max,jn.min),!n))return C(P[w].message),P}if((h||m)&&!T&&(Gr(j)||i&&Array.isArray(j))){const $=Fi(h),D=Fi(m),W=!wr($.value)&&j.length>+$.value,X=!wr(D.value)&&j.length<+D.value;if((W||X)&&(J(W,$.message,D.message),!n))return C(P[w].message),P}if(v&&!T&&Gr(j)){const{value:$,message:D}=Fi(v);if(Qh($)&&!j.match($)&&(P[w]={type:jn.pattern,message:D,ref:o,...H(jn.pattern,D)},!n))return C(D),P}if(x){if(Ms(x)){const $=await x(j,r),D=fk($,N);if(D&&(P[w]={...D,...H(jn.validate,D.message)},!n))return C(D.message),P}else if(zt(x)){let $={};for(const D in x){if(!Tr($)&&!n)break;const W=fk(await x[D](j,r),N,D);W&&($={...W,...H(D,W.message)},C(W.message),n&&(P[w]=$))}if(!Tr($)&&(P[w]={ref:N,...$},!n))return P}}return C(!0),P};const lM={mode:As.onSubmit,reValidateMode:As.onChange,shouldFocusError:!0};function cM(e={}){let t={...lM,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ms(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=zt(t.defaultValues)||zt(t.values)?Kt(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Kt(a),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...m};const p={array:ak(),state:ak()},v=t.criteriaMode===As.all,x=F=>Y=>{clearTimeout(h),h=setTimeout(F,Y)},w=async F=>{if(!t.disabled&&(m.isValid||g.isValid||F)){const Y=t.resolver?Tr((await I()).errors):await T(n,!0);Y!==r.isValid&&p.state.next({isValid:Y})}},y=(F,Y)=>{!t.disabled&&(m.isValidating||m.validatingFields||g.isValidating||g.validatingFields)&&((F||Array.from(c.mount)).forEach(B=>{B&&(Y?xt(r.validatingFields,B,Y):Mt(r.validatingFields,B))}),p.state.next({validatingFields:r.validatingFields,isValidating:!Tr(r.validatingFields)}))},k=(F,Y=[],B,ae,fe=!0,de=!0)=>{if(ae&&B&&!t.disabled){if(o.action=!0,de&&Array.isArray(Se(n,F))){const Ce=B(Se(n,F),ae.argA,ae.argB);fe&&xt(n,F,Ce)}if(de&&Array.isArray(Se(r.errors,F))){const Ce=B(Se(r.errors,F),ae.argA,ae.argB);fe&&xt(r.errors,F,Ce),iM(r.errors,F)}if((m.touchedFields||g.touchedFields)&&de&&Array.isArray(Se(r.touchedFields,F))){const Ce=B(Se(r.touchedFields,F),ae.argA,ae.argB);fe&&xt(r.touchedFields,F,Ce)}(m.dirtyFields||g.dirtyFields)&&(r.dirtyFields=Ui(a,i)),p.state.next({name:F,isDirty:J(F,Y),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else xt(i,F,Y)},j=(F,Y)=>{xt(r.errors,F,Y),p.state.next({errors:r.errors})},N=F=>{r.errors=F,p.state.next({errors:r.errors,isValid:!1})},C=(F,Y,B,ae)=>{const fe=Se(n,F);if(fe){const de=Se(i,F,Ot(B)?Se(a,F):B);Ot(de)||ae&&ae.defaultChecked||Y?xt(i,F,Y?de:ck(fe._f)):W(F,de),o.mount&&w()}},P=(F,Y,B,ae,fe)=>{let de=!1,Ce=!1;const We={name:F};if(!t.disabled){if(!B||ae){(m.isDirty||g.isDirty)&&(Ce=r.isDirty,r.isDirty=We.isDirty=J(),de=Ce!==We.isDirty);const qe=aa(Se(a,F),Y);Ce=!!Se(r.dirtyFields,F),qe?Mt(r.dirtyFields,F):xt(r.dirtyFields,F,!0),We.dirtyFields=r.dirtyFields,de=de||(m.dirtyFields||g.dirtyFields)&&Ce!==!qe}if(B){const qe=Se(r.touchedFields,F);qe||(xt(r.touchedFields,F,B),We.touchedFields=r.touchedFields,de=de||(m.touchedFields||g.touchedFields)&&qe!==B)}de&&fe&&p.state.next(We)}return de?We:{}},E=(F,Y,B,ae)=>{const fe=Se(r.errors,F),de=(m.isValid||g.isValid)&&Ys(Y)&&r.isValid!==Y;if(t.delayError&&B?(d=x(()=>j(F,B)),d(t.delayError)):(clearTimeout(h),d=null,B?xt(r.errors,F,B):Mt(r.errors,F)),(B?!aa(fe,B):fe)||!Tr(ae)||de){const Ce={...ae,...de&&Ys(Y)?{isValid:Y}:{},errors:r.errors,name:F};r={...r,...Ce},p.state.next(Ce)}},I=async F=>{y(F,!0);const Y=await t.resolver(i,t.context,eM(F||c.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return y(F),Y},M=async F=>{const{errors:Y}=await I(F);if(F)for(const B of F){const ae=Se(Y,B);ae?xt(r.errors,B,ae):Mt(r.errors,B)}else r.errors=Y;return Y},T=async(F,Y,B={valid:!0})=>{for(const ae in F){const fe=F[ae];if(fe){const{_f:de,...Ce}=fe;if(de){const We=c.array.has(de.name),qe=fe._f&&tM(fe._f);qe&&m.validatingFields&&y([de.name],!0);const ir=await gk(fe,c.disabled,i,v,t.shouldUseNativeValidation&&!Y,We);if(qe&&m.validatingFields&&y([de.name]),ir[de.name]&&(B.valid=!1,Y))break;!Y&&(Se(ir,de.name)?We?oM(r.errors,ir,de.name):xt(r.errors,de.name,ir[de.name]):Mt(r.errors,de.name))}!Tr(Ce)&&await T(Ce,Y,B)}}return B.valid},H=()=>{for(const F of c.unMount){const Y=Se(n,F);Y&&(Y._f.refs?Y._f.refs.every(B=>!Bg(B)):!Bg(Y._f.ref))&&ge(F)}c.unMount=new Set},J=(F,Y)=>!t.disabled&&(F&&Y&&xt(i,F,Y),!aa(Q(),a)),$=(F,Y,B)=>Z7(F,c,{...o.mount?i:Ot(Y)?a:Gr(F)?{[F]:Y}:Y},B,Y),D=F=>Cy(Se(o.mount?i:a,F,t.shouldUnregister?Se(a,F,[]):[])),W=(F,Y,B={})=>{const ae=Se(n,F);let fe=Y;if(ae){const de=ae._f;de&&(!de.disabled&&xt(i,F,Y_(Y,de)),fe=Xh(de.ref)&&wr(Y)?"":Y,K_(de.ref)?[...de.ref.options].forEach(Ce=>Ce.selected=fe.includes(Ce.value)):de.refs?rd(de.ref)?de.refs.forEach(Ce=>{(!Ce.defaultChecked||!Ce.disabled)&&(Array.isArray(fe)?Ce.checked=!!fe.find(We=>We===Ce.value):Ce.checked=fe===Ce.value||!!fe)}):de.refs.forEach(Ce=>Ce.checked=Ce.value===fe):Ey(de.ref)?de.ref.value="":(de.ref.value=fe,de.ref.type||p.state.next({name:F,values:Kt(i)})))}(B.shouldDirty||B.shouldTouch)&&P(F,fe,B.shouldTouch,B.shouldDirty,!0),B.shouldValidate&&q(F)},X=(F,Y,B)=>{for(const ae in Y){if(!Y.hasOwnProperty(ae))return;const fe=Y[ae],de=F+"."+ae,Ce=Se(n,de);(c.array.has(F)||zt(fe)||Ce&&!Ce._f)&&!ai(fe)?X(de,fe,B):W(de,fe,B)}},G=(F,Y,B={})=>{const ae=Se(n,F),fe=c.array.has(F),de=Kt(Y);xt(i,F,de),fe?(p.array.next({name:F,values:Kt(i)}),(m.isDirty||m.dirtyFields||g.isDirty||g.dirtyFields)&&B.shouldDirty&&p.state.next({name:F,dirtyFields:Ui(a,i),isDirty:J(F,de)})):ae&&!ae._f&&!wr(de)?X(F,de,B):W(F,de,B),hk(F,c)&&p.state.next({...r,name:F}),p.state.next({name:o.mount?F:void 0,values:Kt(i)})},R=async F=>{o.mount=!0;const Y=F.target;let B=Y.name,ae=!0;const fe=Se(n,B),de=qe=>{ae=Number.isNaN(qe)||ai(qe)&&isNaN(qe.getTime())||aa(qe,Se(i,B,qe))},Ce=dk(t.mode),We=dk(t.reValidateMode);if(fe){let qe,ir;const qn=Y.type?ck(fe._f):$7(F),Pr=F.type===nk.BLUR||F.type===nk.FOCUS_OUT,Ho=!rM(fe._f)&&!t.resolver&&!Se(r.errors,B)&&!fe._f.deps||aM(Pr,Se(r.touchedFields,B),r.isSubmitted,We,Ce),Hr=hk(B,c,Pr);xt(i,B,qn),Pr?(!Y||!Y.readOnly)&&(fe._f.onBlur&&fe._f.onBlur(F),d&&d(0)):fe._f.onChange&&fe._f.onChange(F);const Wr=P(B,qn,Pr),Kn=!Tr(Wr)||Hr;if(!Pr&&p.state.next({name:B,type:F.type,values:Kt(i)}),Ho)return(m.isValid||g.isValid)&&(t.mode==="onBlur"?Pr&&w():Pr||w()),Kn&&p.state.next({name:B,...Hr?{}:Wr});if(!Pr&&Hr&&p.state.next({...r}),t.resolver){const{errors:id}=await I([B]);if(de(qn),ae){const za=mk(r.errors,n,B),od=mk(id,n,za.name||B);qe=od.error,B=od.name,ir=Tr(id)}}else y([B],!0),qe=(await gk(fe,c.disabled,i,v,t.shouldUseNativeValidation))[B],y([B]),de(qn),ae&&(qe?ir=!1:(m.isValid||g.isValid)&&(ir=await T(n,!0)));ae&&(fe._f.deps&&(!Array.isArray(fe._f.deps)||fe._f.deps.length>0)&&q(fe._f.deps),E(B,ir,qe,Wr))}},O=(F,Y)=>{if(Se(r.errors,Y)&&F.focus)return F.focus(),1},q=async(F,Y={})=>{let B,ae;const fe=Gl(F);if(t.resolver){const de=await M(Ot(F)?F:fe);B=Tr(de),ae=F?!fe.some(Ce=>Se(de,Ce)):B}else F?(ae=(await Promise.all(fe.map(async de=>{const Ce=Se(n,de);return await T(Ce&&Ce._f?{[de]:Ce}:Ce)}))).every(Boolean),!(!ae&&!r.isValid)&&w()):ae=B=await T(n);return p.state.next({...!Gr(F)||(m.isValid||g.isValid)&&B!==r.isValid?{}:{name:F},...t.resolver||!F?{isValid:B}:{},errors:r.errors}),Y.shouldFocus&&!ae&&Yl(n,O,F?fe:c.mount),ae},Q=(F,Y)=>{let B={...o.mount?i:a};return Y&&(B=q_(Y.dirtyFields?r.dirtyFields:r.touchedFields,B)),Ot(F)?B:Gr(F)?Se(B,F):F.map(ae=>Se(B,ae))},le=(F,Y)=>({invalid:!!Se((Y||r).errors,F),isDirty:!!Se((Y||r).dirtyFields,F),error:Se((Y||r).errors,F),isValidating:!!Se(r.validatingFields,F),isTouched:!!Se((Y||r).touchedFields,F)}),V=F=>{F&&Gl(F).forEach(Y=>Mt(r.errors,Y)),p.state.next({errors:F?r.errors:{}})},ne=(F,Y,B)=>{const ae=(Se(n,F,{_f:{}})._f||{}).ref,fe=Se(r.errors,F)||{},{ref:de,message:Ce,type:We,...qe}=fe;xt(r.errors,F,{...qe,...Y,ref:ae}),p.state.next({name:F,errors:r.errors,isValid:!1}),B&&B.shouldFocus&&ae&&ae.focus&&ae.focus()},pe=(F,Y)=>Ms(F)?p.state.subscribe({next:B=>"values"in B&&F($(void 0,Y),B)}):$(F,Y,!0),ye=F=>p.state.subscribe({next:Y=>{nM(F.name,Y.name,F.exact)&&sM(Y,F.formState||m,et,F.reRenderRoot)&&F.callback({values:{...i},...r,...Y,defaultValues:a})}}).unsubscribe,z=F=>(o.mount=!0,g={...g,...F.formState},ye({...F,formState:g})),ge=(F,Y={})=>{for(const B of F?Gl(F):c.mount)c.mount.delete(B),c.array.delete(B),Y.keepValue||(Mt(n,B),Mt(i,B)),!Y.keepError&&Mt(r.errors,B),!Y.keepDirty&&Mt(r.dirtyFields,B),!Y.keepTouched&&Mt(r.touchedFields,B),!Y.keepIsValidating&&Mt(r.validatingFields,B),!t.shouldUnregister&&!Y.keepDefaultValue&&Mt(a,B);p.state.next({values:Kt(i)}),p.state.next({...r,...Y.keepDirty?{isDirty:J()}:{}}),!Y.keepIsValid&&w()},Me=({disabled:F,name:Y})=>{(Ys(F)&&o.mount||F||c.disabled.has(Y))&&(F?c.disabled.add(Y):c.disabled.delete(Y))},De=(F,Y={})=>{let B=Se(n,F);const ae=Ys(Y.disabled)||Ys(t.disabled);return xt(n,F,{...B||{},_f:{...B&&B._f?B._f:{ref:{name:F}},name:F,mount:!0,...Y}}),c.mount.add(F),B?Me({disabled:Ys(Y.disabled)?Y.disabled:t.disabled,name:F}):C(F,!0,Y.value),{...ae?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:ml(Y.min),max:ml(Y.max),minLength:ml(Y.minLength),maxLength:ml(Y.maxLength),pattern:ml(Y.pattern)}:{},name:F,onChange:R,onBlur:R,ref:fe=>{if(fe){De(F,Y),B=Se(n,F);const de=Ot(fe.value)&&fe.querySelectorAll&&fe.querySelectorAll("input,select,textarea")[0]||fe,Ce=Y7(de),We=B._f.refs||[];if(Ce?We.find(qe=>qe===de):de===B._f.ref)return;xt(n,F,{_f:{...B._f,...Ce?{refs:[...We.filter(Bg),de,...Array.isArray(Se(a,F))?[{}]:[]],ref:{type:de.type,name:F}}:{ref:de}}}),C(F,!1,void 0,de)}else B=Se(n,F,{}),B._f&&(B._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(V7(c.array,F)&&o.action)&&c.unMount.add(F)}}},ee=()=>t.shouldFocusError&&Yl(n,O,c.mount),K=F=>{Ys(F)&&(p.state.next({disabled:F}),Yl(n,(Y,B)=>{const ae=Se(n,B);ae&&(Y.disabled=ae._f.disabled||F,Array.isArray(ae._f.refs)&&ae._f.refs.forEach(fe=>{fe.disabled=ae._f.disabled||F}))},0,!1))},be=(F,Y)=>async B=>{let ae;B&&(B.preventDefault&&B.preventDefault(),B.persist&&B.persist());let fe=Kt(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:de,values:Ce}=await I();r.errors=de,fe=Kt(Ce)}else await T(n);if(c.disabled.size)for(const de of c.disabled)Mt(fe,de);if(Mt(r.errors,"root"),Tr(r.errors)){p.state.next({errors:{}});try{await F(fe,B)}catch(de){ae=de}}else Y&&await Y({...r.errors},B),ee(),setTimeout(ee);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Tr(r.errors)&&!ae,submitCount:r.submitCount+1,errors:r.errors}),ae)throw ae},Ne=(F,Y={})=>{Se(n,F)&&(Ot(Y.defaultValue)?G(F,Kt(Se(a,F))):(G(F,Y.defaultValue),xt(a,F,Kt(Y.defaultValue))),Y.keepTouched||Mt(r.touchedFields,F),Y.keepDirty||(Mt(r.dirtyFields,F),r.isDirty=Y.defaultValue?J(F,Kt(Se(a,F))):J()),Y.keepError||(Mt(r.errors,F),m.isValid&&w()),p.state.next({...r}))},Fe=(F,Y={})=>{const B=F?Kt(F):a,ae=Kt(B),fe=Tr(F),de=fe?a:ae;if(Y.keepDefaultValues||(a=B),!Y.keepValues){if(Y.keepDirtyValues){const Ce=new Set([...c.mount,...Object.keys(Ui(a,i))]);for(const We of Array.from(Ce))Se(r.dirtyFields,We)?xt(de,We,Se(i,We)):G(We,Se(de,We))}else{if(Sy&&Ot(F))for(const Ce of c.mount){const We=Se(n,Ce);if(We&&We._f){const qe=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(Xh(qe)){const ir=qe.closest("form");if(ir){ir.reset();break}}}}if(Y.keepFieldsRef)for(const Ce of c.mount)G(Ce,Se(de,Ce));else n={}}i=t.shouldUnregister?Y.keepDefaultValues?Kt(a):{}:Kt(de),p.array.next({values:{...de}}),p.state.next({values:{...de}})}c={mount:Y.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:fe?!1:Y.keepDirty?r.isDirty:!!(Y.keepDefaultValues&&!aa(F,a)),isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:fe?{}:Y.keepDirtyValues?Y.keepDefaultValues&&i?Ui(a,i):r.dirtyFields:Y.keepDefaultValues&&F?Ui(a,F):Y.keepDirty?r.dirtyFields:{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ye=(F,Y)=>Fe(Ms(F)?F(i):F,Y),Je=(F,Y={})=>{const B=Se(n,F),ae=B&&B._f;if(ae){const fe=ae.refs?ae.refs[0]:ae.ref;fe.focus&&(fe.focus(),Y.shouldSelect&&Ms(fe.select)&&fe.select())}},et=F=>{r={...r,...F}},ie={control:{register:De,unregister:ge,getFieldState:le,handleSubmit:be,setError:ne,_subscribe:ye,_runSchema:I,_focusError:ee,_getWatch:$,_getDirty:J,_setValid:w,_setFieldArray:k,_setDisabledField:Me,_setErrors:N,_getFieldArray:D,_reset:Fe,_resetDefaultValues:()=>Ms(t.defaultValues)&&t.defaultValues().then(F=>{Ye(F,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:K,_subjects:p,_proxyFormState:m,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(F){o=F},get _defaultValues(){return a},get _names(){return c},set _names(F){c=F},get _formState(){return r},get _options(){return t},set _options(F){t={...t,...F}}},subscribe:z,trigger:q,register:De,handleSubmit:be,watch:pe,setValue:G,getValues:Q,reset:Ye,resetField:Ne,clearErrors:V,unregister:ge,setError:ne,setFocus:Je,getFieldState:le};return{...ie,formControl:ie}}function ji(e={}){const t=bt.useRef(void 0),r=bt.useRef(void 0),[n,a]=bt.useState({isDirty:!1,isValidating:!1,isLoading:Ms(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ms(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Ms(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...c}=cM(e);t.current={...c,formState:n}}const i=t.current.control;return i._options=e,K7(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(c=>({...c,isReady:!0})),i._formState.isReady=!0,o},[i]),bt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),bt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),bt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),bt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),bt.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),bt.useEffect(()=>{e.values&&!aa(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),bt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=q7(n,i),t.current}const dM=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?s.jsx(Gh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("beef")||t.includes("nautakjt")?s.jsx(Jh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("lamb")||t.includes("lambakjt")?s.jsx(Xs,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pork")||t.includes("svnakjt")?s.jsx($_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("fowl")||t.includes("fuglakjt")||t.includes("poultry")?s.jsx(Xs,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("cheese")||t.includes("ostur")?s.jsx(B_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("vegetable")||t.includes("grnmeti")?s.jsx(z_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("dessert")||t.includes("eftirrttur")?s.jsx(F_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("seafood")||t.includes("sjvarfiskur")?s.jsx(Gh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pasta")||t.includes("pasta")?s.jsx(Yh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pizza")||t.includes("pizza")?s.jsx(V_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("salad")||t.includes("salat")?s.jsx(U_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("meat")||t.includes("kjt")?s.jsx(Jh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("chicken")||t.includes("kjklingur")?s.jsx(Xs,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("duck")||t.includes("nd")?s.jsx(Xs,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("turkey")||t.includes("kalknn")?s.jsx(Xs,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):s.jsx(Yh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})},uM=()=>{const{t:e,currentLanguage:t}=xe(),{id:r}=u2(),n=ss(),a=it(),{currentProduct:i,isLoading:o,error:c}=ke(z=>z.products),{user:d,isAuthenticated:h}=ke(z=>z.auth),{isLoading:m}=ke(z=>z.cart),[g,p]=S.useState(1),[v,x]=S.useState(!1),[w,y]=S.useState(!1),[k,j]=S.useState(!1),[N,C]=S.useState(!1),[P,E]=S.useState([]),[I,M]=S.useState([]),[T,H]=S.useState({intervalType:"WEEKLY",intervalValue:1,preferredDay:"",preferredTime:"15:00",quantity:1}),J="olfong_age_verified",$=()=>{try{const z=localStorage.getItem(J);if(!z)return!1;const{confirmed:ge}=JSON.parse(z);return ge}catch(z){return console.error("Error checking age verification:",z),!1}},D=z=>{try{const ge={confirmed:z};localStorage.setItem(J,JSON.stringify(ge))}catch(ge){console.error("Error storing age verification:",ge)}},{register:W,handleSubmit:X,formState:{errors:G},reset:R,setValue:O}=ji({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:"",volume:"",volumeIs:"",alcoholContent:"",country:"",countryIs:"",region:"",regionIs:"",origin:"",originIs:"",producer:"",producerIs:"",distributor:"",distributorIs:"",packaging:"",packagingIs:"",packagingWeight:"",packagingWeightIs:"",carbonFootprint:"",carbonFootprintIs:"",vintage:"",grapeVariety:"",grapeVarietyIs:"",wineStyle:"",wineStyleIs:"",pricePerLiter:"",pricePerLiterIs:"",foodPairings:[],foodPairingsIs:[],specialAttributes:[],specialAttributesIs:[],certifications:[],certificationsIs:[],availability:"available",availabilityIs:"Til rstfunar",atvrProductId:"",atvrUrl:"",atvrImageUrl:""}});S.useEffect(()=>(r&&a(zu(r)),()=>{a(i7())}),[a,r]),S.useEffect(()=>{i&&i.category.name==="NICOTINE"&&d&&d.age<18&&($()?y(!0):x(!0))},[i,d]),S.useEffect(()=>{i&&N&&(O("name",i.name),O("nameIs",i.nameIs||""),O("description",i.description||""),O("descriptionIs",i.descriptionIs||""),O("price",i.price),O("stock",i.stock),O("category",i.category.name),O("subcategory",i.subcategory||""),O("isAgeRestricted",i.ageRestriction>18),O("imageUrl",i.imageUrl||""),O("hasDiscount",i.hasDiscount||!1),O("originalPrice",i.originalPrice||0),O("discountPercentage",i.discountPercentage||0),O("discountStartDate",i.discountStartDate?i.discountStartDate.split("T")[0]:""),O("discountEndDate",i.discountEndDate?i.discountEndDate.split("T")[0]:""),O("discountReason",i.discountReason||""),O("discountReasonIs",i.discountReasonIs||""),O("volume",i.volume||""),O("volumeIs",i.volumeIs||""),O("alcoholContent",i.alcoholContent||""),O("country",i.country||""),O("countryIs",i.countryIs||""),O("region",i.region||""),O("regionIs",i.regionIs||""),O("origin",i.origin||""),O("originIs",i.originIs||""),O("producer",i.producer||""),O("producerIs",i.producerIs||""),O("distributor",i.distributor||""),O("distributorIs",i.distributorIs||""),O("packaging",i.packaging||""),O("packagingIs",i.packagingIs||""),O("packagingWeight",i.packagingWeight||""),O("packagingWeightIs",i.packagingWeightIs||""),O("carbonFootprint",i.carbonFootprint||""),O("carbonFootprintIs",i.carbonFootprintIs||""),O("vintage",i.vintage||""),O("grapeVariety",i.grapeVariety||""),O("grapeVarietyIs",i.grapeVarietyIs||""),O("wineStyle",i.wineStyle||""),O("wineStyleIs",i.wineStyleIs||""),O("pricePerLiter",i.pricePerLiter||""),O("pricePerLiterIs",i.pricePerLiterIs||""),O("foodPairings",i.foodPairings||[]),O("foodPairingsIs",i.foodPairingsIs||[]),O("specialAttributes",i.specialAttributes||[]),O("specialAttributesIs",i.specialAttributesIs||[]),O("certifications",i.certifications||[]),O("certificationsIs",i.certificationsIs||[]),O("availability",i.availability||"available"),O("availabilityIs",i.availabilityIs||"Til rstfunar"),O("atvrProductId",i.atvrProductId||""),O("atvrUrl",i.atvrUrl||""),O("atvrImageUrl",i.atvrImageUrl||""),E([]),M([]))},[i,N,O]);const q=z=>{const ge=Array.from(z.target.files),Me=[...P,...ge];E(Me);const De=ge.map(ee=>URL.createObjectURL(ee));M(ee=>[...ee,...De])},Q=z=>{const ge=P.filter((De,ee)=>ee!==z),Me=I.filter((De,ee)=>ee!==z);E(ge),M(Me)},le=async z=>{try{const{category:ge,...Me}=z,De=new FormData;Object.keys(Me).forEach(ee=>{ee==="foodPairings"||ee==="foodPairingsIs"||ee==="specialAttributes"||ee==="specialAttributesIs"||ee==="certifications"||ee==="certificationsIs"||ee==="subcategories"?De.append(ee,JSON.stringify(Me[ee]||[])):De.append(ee,Me[ee]||"")}),De.append("categoryId",i.categoryId),De.append("ageRestriction",z.isAgeRestricted?20:18),P.forEach(ee=>{De.append("images",ee)}),await a(Vl({id:i.id,productData:De})).unwrap(),Z.success(e("common.success")),C(!1),R(),E([]),M([])}catch(ge){console.error("Error updating product:",ge),Z.error(ge.message||e("common.error"))}},V=async()=>{if(!h){Z.error(e("auth.loginRequired")),n("/login");return}if(i.category.name==="NICOTINE"&&d.age<18&&!w){x(!0);return}try{await a(ui({productId:i.id,quantity:g})).unwrap()}catch(z){console.error("Failed to add to cart:",z)}},ne=()=>{i&&g<i.stock&&p(g+1)},pe=()=>{g>1&&p(g-1)},ye=()=>{y(!0),x(!1),D(!0)};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(nt,{size:"large"})}):c||!i?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:[e("products.title")," ",e("orderDetailPage.orderNotFound")]}),s.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage.orderNotFoundDesc")}),s.jsx(Te,{to:"/products",className:"btn btn-primary",children:e("common.back")})]})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors duration-200",children:[s.jsx(pn,{className:"w-5 h-5 mr-2"}),e("productDetailPage.back")]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsx("div",{className:"space-y-4",children:i.imageUrl?s.jsx("div",{className:"bg-white dark:bg-white rounded-lg p-4 shadow-lg",children:s.jsx("img",{src:i.imageUrl.startsWith("http")?i.imageUrl:`http://192.168.8.62:5000${i.imageUrl}`,alt:Ta(t,i),className:"w-full h-96 object-contain rounded-lg"})}):s.jsx("div",{className:"w-full h-96 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-lg",children:e("cartPage.noImage")})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:Ta(t,i)}),(d==null?void 0:d.role)==="ADMIN"&&s.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),e("common.edit")]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsxs("span",{className:"text-3xl font-bold text-primary-600",children:[i.price.toLocaleString()," ",e("common.currency")]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:e(`navigation.${i.category.name.toLowerCase()}`)}),i.subcategory&&s.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full text-sm font-medium",children:i.subcategory})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("productDetailPage.description")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:cf(t,i)||e("productDetailPage.noDescription")})]}),(i.volume||i.alcoholContent||i.producer||i.country||i.packaging)&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("productDetailPage.specifications")||"Specifications"}),s.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3",children:[(i.volume||i.volumeIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.volume")||"Volume"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.volumeIs?i.volumeIs:i.volume})]}),i.alcoholContent&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.alcoholContent")||"Alcohol Content"}),s.jsxs("dd",{className:"text-sm text-gray-900 dark:text-white",children:[i.alcoholContent,"%"]})]}),(i.producer||i.producerIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.producer")||"Producer"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.producerIs?i.producerIs:i.producer})]}),(i.country||i.countryIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.country")||"Country"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.countryIs?i.countryIs:i.country})]}),(i.packaging||i.packagingIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.packaging")||"Packaging"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.packagingIs?i.packagingIs:i.packaging})]})]})]}),to(t,i).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products.foodPairings")}),s.jsx("div",{className:"flex flex-wrap gap-3",children:to(t,i).map((z,ge)=>s.jsxs("div",{className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-2",children:dM(z)}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200 text-center font-medium",children:z})]},ge))})]}),tk(t,i).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products.specialAttributes")}),s.jsx("div",{className:"flex flex-wrap gap-2",children:tk(t,i).map((z,ge)=>s.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:z},ge))})]}),i.availability&&i.availability!=="available"&&s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(On,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:[e("products.availability"),": ",e("products",i.availability)]}),s.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[i.availability==="special-order"&&e("productDetailPage.specialOrderDesc"),i.availability==="coming-soon"&&e("productDetailPage.comingSoonDesc"),i.availability==="discontinued"&&e("productDetailPage.discontinuedDesc")]})]})]})}),i.category.name==="NICOTINE"&&s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(On,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:e("productDetailPage.ageRestriction")}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:e("productDetailPage.ageRestrictionDesc")})]})]})}),i.stock>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage.quantity"),":"]}),s.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg",children:[s.jsx("button",{onClick:pe,disabled:g<=1,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:s.jsx(Wh,{className:"w-4 h-4"})}),s.jsx("span",{className:"px-4 py-2 text-center min-w-[60px] text-gray-900 dark:text-white",children:g}),s.jsx("button",{onClick:ne,disabled:g>=i.stock,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:s.jsx(yr,{className:"w-4 h-4"})})]}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.stock," ",e("productDetailPage.available")]})]}),s.jsxs("button",{onClick:V,disabled:m||!h,className:"btn btn-primary w-full flex items-center justify-center space-x-2 py-3",children:[s.jsx($r,{className:"w-5 h-5"}),s.jsx("span",{children:e(h?m?"common.loading":"products.addToCart":"common.loginRequired")})]}),!h&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:[e("productDetailPage.loginToAdd"),s.jsx(Te,{to:"/login",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 ml-1",children:e("productDetailPage.loginHere")})]}),h&&i.stock>0&&s.jsxs("button",{onClick:()=>j(!0),className:"btn btn-outline w-full flex items-center justify-center space-x-2 py-3 mt-3",children:[s.jsx(Rn,{className:"w-5 h-5"}),s.jsx("span",{children:e("productDetailPage.subscribe")})]})]})]})]})})]}),v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(On,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e("ageVerification.title")}),s.jsx("p",{className:"text-gray-600 mb-6",children:e("ageVerification.message",{age:18})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{x(!1),y(!1),D(!1)},className:"btn btn-outline flex-1",children:e("common.no")}),s.jsx("button",{onClick:ye,className:"btn btn-primary flex-1",children:e("common.yes")})]})]})})}),k&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("productDetailPage.createSubscription")}),s.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:i.nameIs||i.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i.price.toLocaleString()," ",e("common.currency")," ",e("cartPage.each")]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.quantity")}),s.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg w-32",children:[s.jsx("button",{onClick:()=>H({...T,quantity:Math.max(1,T.quantity-1)}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:s.jsx(Wh,{className:"w-4 h-4"})}),s.jsx("span",{className:"px-4 py-2 text-center flex-1 text-gray-900 dark:text-white",children:T.quantity}),s.jsx("button",{onClick:()=>H({...T,quantity:T.quantity+1}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:s.jsx(yr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.deliveryFrequency")}),s.jsxs("select",{value:T.intervalType,onChange:z=>H({...T,intervalType:z.target.value}),className:"input w-full",children:[s.jsx("option",{value:"WEEKLY",children:e("subscription.weekly")}),s.jsx("option",{value:"BIWEEKLY",children:e("subscription.biweekly")}),s.jsx("option",{value:"MONTHLY",children:e("subscription.monthly")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s.jsx(Rn,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage.preferredDayOptional")]}),s.jsxs("select",{value:T.preferredDay,onChange:z=>H({...T,preferredDay:z.target.value}),className:"input w-full",children:[s.jsx("option",{value:"",children:e("subscription.noSpecificDay")}),s.jsx("option",{value:"MONDAY",children:e("subscription.monday")}),s.jsx("option",{value:"TUESDAY",children:e("subscription.tuesday")}),s.jsx("option",{value:"WEDNESDAY",children:e("subscription.wednesday")}),s.jsx("option",{value:"THURSDAY",children:e("subscription.thursday")}),s.jsx("option",{value:"FRIDAY",children:e("subscription.friday")}),s.jsx("option",{value:"SATURDAY",children:e("subscription.saturday")}),s.jsx("option",{value:"SUNDAY",children:e("subscription.sunday")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx(Ht,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage.preferredTimeOptional")]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:e("subscription.selectPreferredTimeHelp")}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["09:00","10:00","11:00","12:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"].map(z=>s.jsx("button",{type:"button",onClick:()=>H({...T,preferredTime:z}),className:`p-2 text-sm rounded-lg border transition-colors ${T.preferredTime===z?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:z},z))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.notesOptional")}),s.jsx("textarea",{rows:3,placeholder:e("subscription.specialNotesPlaceholder"),className:"input w-full"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>j(!1),className:"btn btn-outline flex-1",children:e("subscription.cancel")}),s.jsx("button",{onClick:async()=>{if(!h){Z.error(e("subscription.mustBeLoggedIn"));return}try{const z=await fetch("http://192.168.8.62:5000/api/payment-gateways/config"),{gateways:ge}=await z.json();if(!ge.some(De=>De.supportsSubscriptions&&De.isEnabled)){Z.error(e("subscription.noPaymentProviderSupport"));return}Z.success(e("productDetailPage.subscriptionCreated")),j(!1)}catch(z){console.error("Error creating subscription:",z),Z.error(e("subscription.creationFailed"))}},className:"btn btn-primary flex-1",children:e("subscription.createSubscription")})]})]})]})}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("adminProductsPage.editProduct")}),s.jsx("button",{onClick:()=>{C(!1),R()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ct,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:X(le),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminProductsPage.nameEn")," *"]}),s.jsx("input",{...W("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products.title")}),G.name&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.nameRequired")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.nameIs")}),s.jsx("input",{...W("nameIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage.nameIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("common.price")," * (",e("common.currency"),")"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",...W("price",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),G.price&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.priceRequired")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("products.stock")," *"]}),s.jsx("input",{type:"number",min:"0",...W("stock",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),G.stock&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.stockRequired")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("products.description")}),s.jsx("textarea",{...W("description"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products.description")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.descriptionIs")}),s.jsx("textarea",{...W("descriptionIs"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage.descriptionIs")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.productImages")}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:q,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),I.length>0&&s.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2",children:I.map((z,ge)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:z,alt:`Preview ${ge+1}`,className:"w-full h-20 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:()=>Q(ge),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""})]},ge))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.imageUrl")}),s.jsx("input",{...W("imageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",...W("isAgeRestricted"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage.ageRestricted")})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>{C(!1),R()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common.save")})]})]})]})})]})},Jl=ve("addresses/fetchAddresses",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/addresses")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch addresses")}}),Xl=ve("addresses/createAddress",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await ue.post("/addresses",e);return Z.success("Bta vi heimilisfangi"),o.data}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a bta vi heimilisfangi"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create address")}}),Xu=ve("addresses/updateAddress",async({id:e,addressData:t},{rejectWithValue:r})=>{var n,a,i,o;try{const c=await ue.put(`/addresses/${e}`,t);return Z.success("Heimilisfang uppfrt"),c.data}catch(c){return Z.error(((a=(n=c.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a uppfra heimilisfang"),r(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update address")}}),Qu=ve("addresses/deleteAddress",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await ue.delete(`/addresses/${e}`),Z.success("Heimilisfang eytt"),e}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a eya heimilisfangi"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to delete address")}}),hM={addresses:[],isLoading:!1,error:null},mM=Vr({name:"addresses",initialState:hM,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Jl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Jl.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=r.payload,t.error=null}).addCase(Jl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Xl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Xl.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses.push(r.payload),t.error=null}).addCase(Xl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Xu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Xu.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.addresses.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.addresses[n]=r.payload),t.error=null}).addCase(Xu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Qu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Qu.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=t.addresses.filter(n=>n.id!==r.payload),t.error=null}).addCase(Qu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),fM=mM.reducer,gM=()=>{var be,Ne,Fe,Ye,Je,et,js,ie,F,Y;const{t:e,currentLanguage:t}=xe(),r=it(),n=ss(),{register:a,handleSubmit:i,formState:{errors:o},setValue:c}=ji(),{cart:d,isLoading:h}=ke(B=>B.cart),{addresses:m,isLoading:g}=ke(B=>B.addresses),{isLoading:p}=ke(B=>B.orders),{isAuthenticated:v}=ke(B=>B.auth),[x,w]=S.useState(""),[y,k]=S.useState(!1),[j,N]=S.useState("valitor"),[C,P]=S.useState(""),[E,I]=S.useState(""),[M,T]=S.useState([]),[H,J]=S.useState(!0),[$,D]=S.useState([]),[W,X]=S.useState(!0);S.useEffect(()=>{v&&(r($u()),r(Jl()),G(),R())},[r,v]);const G=async()=>{var B;try{J(!0);const ae=await ue.get("/payment-gateways/config");T(((B=ae.data)==null?void 0:B.gateways)||[])}catch(ae){console.error("Failed to fetch payment gateways:",ae)}finally{J(!1)}},R=async()=>{try{X(!0);const ae=(await ue.get("/shipping/active")).data||[];D(ae),ae&&ae.length>0&&P(ae[0].id)}catch(B){console.error("Failed to fetch shipping options:",B)}finally{X(!1)}},O=()=>{const B=[],ae=new Date,fe=ae.getHours(),de=ae.getMinutes(),Ce=ae.getDay(),qe=Ny[["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][Ce]];if(!qe)return B;const[ir,qn]=qe.open.split(":").map(Number),[Pr,Ho]=qe.close.split(":").map(Number);for(let Hr=ir;Hr<Pr;Hr++)for(let Wr=0;Wr<60&&!(Hr===Pr-1&&Wr>=Ho);Wr+=30){const Kn=`${Hr.toString().padStart(2,"0")}:${Wr.toString().padStart(2,"0")}`;(Hr>fe||Hr===fe&&Wr>de+30)&&B.push({value:Kn,label:Kn,display:Kn})}return B},q=B=>M.some(ae=>ae.provider===B),Q=()=>$.find(B=>B.id===C),le=()=>q("valitor"),V=()=>{const B=Q();return q("cash_on_delivery")&&(B==null?void 0:B.type)==="delivery"},ne=()=>{const B=Q();return q("pay_on_pickup")&&(B==null?void 0:B.type)==="pickup"},pe=async B=>{try{if(!C){Z.error(e("checkoutPage.selectShippingOption"));return}const ae=Q(),fe={shippingOptionId:C,paymentMethod:j,notes:B.notes||""};if(ae.type==="delivery"){if(!x){Z.error(e("checkoutPage.selectDeliveryAddress"));return}fe.deliveryAddressId=x}else if(ae.type==="pickup"){if(!E){Z.error(e("checkoutPage.selectPickupTime"));return}fe.pickupTime=E}const de=await r(Ou(fe)).unwrap();n(j==="valitor"?`/orders/${de.id}`:j==="cash_on_delivery"?`/orders/${de.id}`:j==="pay_on_pickup"?`/orders/${de.id}`:`/orders/${de.id}`)}catch(ae){console.error("Failed to create order:",ae)}},ye=async B=>{try{const ae=await r(Xl(B)).unwrap();w(ae.id),k(!1),c("addressId",ae.id)}catch(ae){console.error("Failed to create address:",ae)}},z=async(B,ae)=>{if(ae<=0){await r(Hl(B));return}try{await r(Uu({itemId:B,quantity:ae})).unwrap()}catch{Z.error(e("common.error"))}},ge=async B=>{try{await r(Hl(B)).unwrap()}catch{Z.error(e("common.error"))}},Me=async()=>{if(window.confirm(e("cartPage.clearCart")+"?"))try{await r(Vu()).unwrap()}catch{Z.error(e("cart.failedToClearCart"))}};if(!v)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:e("cart.title")}),s.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[s.jsx(Bl,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.loginToViewCart")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage.mustLoginToViewCart")}),s.jsx(Te,{to:"/login",className:"btn btn-primary w-full",children:e("cartPage.login")})]})]})})});if(h||g)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(nt,{size:"large"})});if(!d||!d.items||d.items.length===0)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:e("cart.title")}),s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[s.jsx(Bl,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.emptyCart")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage.addItemsToStart")}),s.jsx(Te,{to:"/products",className:"btn btn-primary w-full",children:e("home.hero.startShopping")})]})})]})});const De=d.items.reduce((B,ae)=>B+ae.product.price*ae.quantity,0),ee=((be=Q())==null?void 0:be.fee)||0,K=De+ee;return d.items.reduce((B,ae)=>B+ae.quantity,0),s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4 flex-1 min-w-0",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("cart.title")}),d.items.length>0&&s.jsxs("div",{className:"flex gap-2 sm:hidden flex-shrink-0",children:[s.jsx(Te,{to:"/products",className:"btn btn-outline py-1.5 px-2 flex items-center justify-center gap-0 whitespace-nowrap",title:e("cartPage.continueShopping"),children:s.jsx(pn,{className:"w-4 h-4 flex-shrink-0"})}),s.jsx("button",{onClick:Me,className:"inline-flex items-center justify-center gap-0 px-2 py-1.5 border border-red-300 dark:border-red-600 rounded-md shadow-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 whitespace-nowrap flex-shrink-0",title:e("cartPage.clearCart"),children:s.jsx(sr,{className:"w-4 h-4 flex-shrink-0"})})]})]}),s.jsxs("div",{className:"hidden sm:flex flex-col gap-2",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e("cartPage.cartDescription")}),d.items.length>0&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Te,{to:"/products",className:"btn btn-outline py-2 px-4 flex items-center justify-start gap-0 whitespace-nowrap",title:e("cartPage.continueShopping"),children:s.jsx("span",{children:e("cartPage.continueShopping")})}),s.jsxs("button",{onClick:Me,className:"inline-flex items-center justify-start gap-2 px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 whitespace-nowrap flex-shrink-0",title:e("cartPage.clearCart"),children:[s.jsx(sr,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:e("cartPage.clearCart")})]})]})]})]})})}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[s.jsx("div",{className:"lg:col-span-1 space-y-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Bl,{className:"w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"}),e("cartPage.cartItems")]}),s.jsx("div",{className:"space-y-4",children:d.items.map(B=>s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 py-3 sm:py-4 last:border-b-0",children:s.jsxs("div",{className:"flex gap-2 sm:gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:B.product.imageUrl?s.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-gray-50 dark:bg-gray-700 rounded-lg p-0.5 flex items-center justify-center",children:s.jsx("img",{src:B.product.imageUrl.startsWith("http")?B.product.imageUrl:`http://192.168.8.62:5000${B.product.imageUrl}`,alt:B.product.name,className:"w-full h-full object-contain rounded"})}):s.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-600",children:s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:e("cartPage.noImage")})})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-base font-medium text-gray-900 dark:text-white truncate leading-tight",children:Ta(t,B.product)}),s.jsxs("p",{className:"text-sm sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[B.product.price.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")," ",e("cartPage.each")]})]}),s.jsxs("div",{className:"flex items-center gap-1 mt-1 sm:mt-2",children:[s.jsx("button",{onClick:()=>z(B.id,B.quantity-1),disabled:B.quantity<=1,className:"p-0.5 sm:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-400 rounded transition-colors",children:s.jsx(Wh,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-center min-w-[28px] sm:min-w-[36px] font-medium text-xs sm:text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded",children:B.quantity}),s.jsx("button",{onClick:()=>z(B.id,B.quantity+1),disabled:B.quantity>=B.product.stock,className:"p-0.5 sm:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-400 rounded transition-colors",children:s.jsx(yr,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("button",{onClick:()=>ge(B.id),className:"p-0.5 sm:p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors ml-1",title:e("common.remove"),children:s.jsx(sr,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),s.jsx("div",{className:"flex-shrink-0 text-right flex flex-col justify-between",children:s.jsxs("div",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:[(B.product.price*B.quantity).toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})})]})},B.id))})]})}),s.jsx("div",{className:"lg:col-span-1 space-y-6",children:s.jsxs("form",{onSubmit:i(pe),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(un,{className:"w-5 h-5 mr-2 text-primary-600 dark:text-primary-400"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("checkoutPage.checkout")})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Nr,{className:"w-4 h-4 mr-2"}),e("checkoutPage.shippingOptions")]}),W?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(nt,{size:"small"}),s.jsx("span",{className:"ml-2 text-gray-600",children:e("common.loading")})]}):$.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500",children:s.jsx("p",{children:e("checkoutPage.noShippingOptions")})}):s.jsx("div",{className:"space-y-3",children:$.map(B=>s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",name:"shippingOption",value:B.id,checked:C==B.id,onChange:ae=>P(parseInt(ae.target.value)),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t==="is"?B.nameIs||B.name:B.name||B.nameEn}),s.jsx("div",{className:"text-sm font-semibold text-primary-600",children:B.fee===0?e("common.free"):`${B.fee.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})} ${e("common.currency")}`})]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t==="is"?B.descriptionIs||B.description:B.description||B.descriptionEn}),B.estimatedDays&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[e("checkoutPage.estimatedDelivery"),": ",B.estimatedDays," ",e("checkoutPage.days")]})]})]},B.id))})]}),((Ne=Q())==null?void 0:Ne.type)==="delivery"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(mn,{className:"w-4 h-4 mr-2"}),e("checkoutPage.deliveryAddress")]}),m.length>0&&s.jsx("div",{className:"space-y-3 mb-4",children:m.map(B=>s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[s.jsx("input",{type:"radio",...a("addressId",{required:!0}),value:B.id,className:"mt-1",onChange:ae=>w(ae.target.value)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[B.street,", ",B.city]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[B.postalCode,", ",B.country]}),B.notes&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:B.notes})]})]},B.id))}),o.addressId&&s.jsx("p",{className:"text-red-600 text-sm mb-4",children:e("checkoutPage.selectDeliveryAddress")}),s.jsxs("button",{type:"button",onClick:()=>k(!0),className:"btn btn-outline text-sm",children:["+ ",e("addresses.add")]}),y&&s.jsxs("div",{className:"mt-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:e("checkoutPage.newAddress")}),s.jsxs("form",{onSubmit:i(ye),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.street")}),s.jsx("input",{type:"text",...a("street",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.city")}),s.jsx("input",{type:"text",...a("city",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.postalCode")}),s.jsx("input",{type:"text",...a("postalCode",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.country")}),s.jsx("input",{type:"text",...a("country",{required:!0}),defaultValue:"Iceland",className:"input w-full"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.notesOptional")}),s.jsx("textarea",{...a("notes"),rows:3,className:"input w-full"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"submit",className:"btn btn-primary",children:e("checkoutPage.saveAddress")}),s.jsx("button",{type:"button",onClick:()=>k(!1),className:"btn btn-outline",children:e("common.cancel")})]})]})]})]}),((Fe=Q())==null?void 0:Fe.type)==="pickup"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(mn,{className:"w-4 h-4 mr-2"}),e("checkoutPage.pickupTime")]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e("checkoutPage.selectPickupTimeHelp")}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:O().map(B=>s.jsx("button",{type:"button",onClick:()=>I(B.value),className:`p-2 text-sm rounded-lg border transition-colors ${E===B.value?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:B.display},B.value))}),O().length===0&&s.jsx("p",{className:"text-red-600 text-sm",children:e("checkoutPage.noPickupTimes")})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("checkoutPage.storeLocation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("checkoutPage.storeLocationValue")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(un,{className:"w-4 h-4 mr-2"}),e("checkoutPage.paymentMethod")]}),s.jsx("div",{className:"space-y-3",children:H?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(nt,{size:"small"}),s.jsx("span",{className:"ml-2 text-gray-600",children:e("common.loading")})]}):s.jsxs(s.Fragment,{children:[le()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"valitor",checked:j==="valitor",onChange:B=>N(B.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.valitorPayment")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.valitorDesc")})]})]}),V()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"cash_on_delivery",checked:j==="cash_on_delivery",onChange:B=>N(B.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.cashOnDelivery")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.cashOnDeliveryDesc")})]})]}),ne()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"pay_on_pickup",checked:j==="pay_on_pickup",onChange:B=>N(B.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.payOnPickup")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.payOnPickupDesc")})]})]}),!le()&&!V()&&!ne()&&s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx("p",{children:e("checkoutPage.noPaymentMethodsAvailable")}),s.jsx("p",{className:"text-sm mt-1",children:e("checkoutPage.contactAdmin")})]})]})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("checkoutPage.orderNotes")}),s.jsx("textarea",{...a("notes"),rows:3,placeholder:e("checkoutPage.orderNotes"),className:"input w-full"})]}),s.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.cartItems")}),s.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:d.items.map(B=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 truncate",children:Ta(t,B.product)}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["x",B.quantity]})]}),s.jsxs("p",{className:"text-gray-900 dark:text-white font-medium ml-2 flex-shrink-0",children:[(B.product.price*B.quantity).toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})]},B.id))}),s.jsx("div",{className:"border-t border-gray-300 dark:border-gray-500 mt-4 pt-4",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("checkoutPage.subtotal")}),s.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[De.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})]})})]}),s.jsx("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-blue-900 dark:text-blue-100 font-medium",children:Q()?t==="is"?Q().nameIs||Q().name:Q().name||Q().nameEn:e("checkoutPage.shipping")}),s.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:((Ye=Q())==null?void 0:Ye.fee)===0?s.jsx("span",{className:"text-green-600",children:e("common.free")}):`${((et=(Je=Q())==null?void 0:Je.fee)==null?void 0:et.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0}))||0} ${e("common.currency")}`})]})}),s.jsx("div",{className:"mb-6 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/30 dark:to-primary-800/30 rounded-lg p-4 border border-primary-200 dark:border-primary-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("common.total")}),s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[K.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})]})}),s.jsx("button",{type:"submit",disabled:p||!C||((js=Q())==null?void 0:js.type)==="delivery"&&!x||((ie=Q())==null?void 0:ie.type)==="pickup"&&!E,className:"btn btn-primary w-full py-3 text-lg mt-6",children:e(p?"checkoutPage.creatingOrder":"checkoutPage.placeOrder")}),!C&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectShippingOption")}),((F=Q())==null?void 0:F.type)==="delivery"&&!x&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectDeliveryAddress")}),((Y=Q())==null?void 0:Y.type)==="pickup"&&!E&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectPickupTime")})]})})]})})]})})};var D0={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,n){n(t)})(BC,function(r){var n="1.9.4";function a(l){var u,f,b,_;for(f=1,b=arguments.length;f<b;f++){_=arguments[f];for(u in _)l[u]=_[u]}return l}var i=Object.create||function(){function l(){}return function(u){return l.prototype=u,new l}}();function o(l,u){var f=Array.prototype.slice;if(l.bind)return l.bind.apply(l,f.call(arguments,1));var b=f.call(arguments,2);return function(){return l.apply(u,b.length?b.concat(f.call(arguments)):arguments)}}var c=0;function d(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function h(l,u,f){var b,_,A,U;return U=function(){b=!1,_&&(A.apply(f,_),_=!1)},A=function(){b?_=arguments:(l.apply(f,arguments),setTimeout(U,u),b=!0)},A}function m(l,u,f){var b=u[1],_=u[0],A=b-_;return l===b&&f?l:((l-_)%A+A)%A+_}function g(){return!1}function p(l,u){if(u===!1)return l;var f=Math.pow(10,u===void 0?6:u);return Math.round(l*f)/f}function v(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function x(l){return v(l).split(/\s+/)}function w(l,u){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?i(l.options):{});for(var f in u)l.options[f]=u[f];return l.options}function y(l,u,f){var b=[];for(var _ in l)b.push(encodeURIComponent(f?_.toUpperCase():_)+"="+encodeURIComponent(l[_]));return(!u||u.indexOf("?")===-1?"?":"&")+b.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function j(l,u){return l.replace(k,function(f,b){var _=u[b];if(_===void 0)throw new Error("No value provided for variable "+f);return typeof _=="function"&&(_=_(u)),_})}var N=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function C(l,u){for(var f=0;f<l.length;f++)if(l[f]===u)return f;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var I=0;function M(l){var u=+new Date,f=Math.max(0,16-(u-I));return I=u+f,window.setTimeout(l,f)}var T=window.requestAnimationFrame||E("RequestAnimationFrame")||M,H=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function J(l,u,f){if(f&&T===M)l.call(u);else return T.call(window,o(l,u))}function $(l){l&&H.call(window,l)}var D={__proto__:null,extend:a,create:i,bind:o,get lastId(){return c},stamp:d,throttle:h,wrapNum:m,falseFn:g,formatNum:p,trim:v,splitWords:x,setOptions:w,getParamString:y,template:j,isArray:N,indexOf:C,emptyImageUrl:P,requestFn:T,cancelFn:H,requestAnimFrame:J,cancelAnimFrame:$};function W(){}W.extend=function(l){var u=function(){w(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=u.__super__=this.prototype,b=i(f);b.constructor=u,u.prototype=b;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(u[_]=this[_]);return l.statics&&a(u,l.statics),l.includes&&(X(l.includes),a.apply(null,[b].concat(l.includes))),a(b,l),delete b.statics,delete b.includes,b.options&&(b.options=f.options?i(f.options):{},a(b.options,l.options)),b._initHooks=[],b.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var A=0,U=b._initHooks.length;A<U;A++)b._initHooks[A].call(this)}},u},W.include=function(l){var u=this.prototype.options;return a(this.prototype,l),l.options&&(this.prototype.options=u,this.mergeOptions(l.options)),this},W.mergeOptions=function(l){return a(this.prototype.options,l),this},W.addInitHook=function(l){var u=Array.prototype.slice.call(arguments,1),f=typeof l=="function"?l:function(){this[l].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function X(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=N(l)?l:[l];for(var u=0;u<l.length;u++)l[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(l,u,f){if(typeof l=="object")for(var b in l)this._on(b,l[b],u);else{l=x(l);for(var _=0,A=l.length;_<A;_++)this._on(l[_],u,f)}return this},off:function(l,u,f){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var b in l)this._off(b,l[b],u);else{l=x(l);for(var _=arguments.length===1,A=0,U=l.length;A<U;A++)_?this._off(l[A]):this._off(l[A],u,f)}return this},_on:function(l,u,f,b){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(l,u,f)===!1){f===this&&(f=void 0);var _={fn:u,ctx:f};b&&(_.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(_)}},_off:function(l,u,f){var b,_,A;if(this._events&&(b=this._events[l],!!b)){if(arguments.length===1){if(this._firingCount)for(_=0,A=b.length;_<A;_++)b[_].fn=g;delete this._events[l];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var U=this._listens(l,u,f);if(U!==!1){var te=b[U];this._firingCount&&(te.fn=g,this._events[l]=b=b.slice()),b.splice(U,1)}}},fire:function(l,u,f){if(!this.listens(l,f))return this;var b=a({},u,{type:l,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var _=this._events[l];if(_){this._firingCount=this._firingCount+1||1;for(var A=0,U=_.length;A<U;A++){var te=_[A],re=te.fn;te.once&&this.off(l,re,te.ctx),re.call(te.ctx||this,b)}this._firingCount--}}return f&&this._propagateEvent(b),this},listens:function(l,u,f,b){typeof l!="string"&&console.warn('"string" type argument expected');var _=u;typeof u!="function"&&(b=!!u,_=void 0,f=void 0);var A=this._events&&this._events[l];if(A&&A.length&&this._listens(l,_,f)!==!1)return!0;if(b){for(var U in this._eventParents)if(this._eventParents[U].listens(l,u,f,b))return!0}return!1},_listens:function(l,u,f){if(!this._events)return!1;var b=this._events[l]||[];if(!u)return!!b.length;f===this&&(f=void 0);for(var _=0,A=b.length;_<A;_++)if(b[_].fn===u&&b[_].ctx===f)return _;return!1},once:function(l,u,f){if(typeof l=="object")for(var b in l)this._on(b,l[b],u,!0);else{l=x(l);for(var _=0,A=l.length;_<A;_++)this._on(l[_],u,f,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[d(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[d(l)],this},_propagateEvent:function(l){for(var u in this._eventParents)this._eventParents[u].fire(l.type,a({layer:l.target,propagatedFrom:l.target},l),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var R=W.extend(G);function O(l,u,f){this.x=f?Math.round(l):l,this.y=f?Math.round(u):u}var q=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};O.prototype={clone:function(){return new O(this.x,this.y)},add:function(l){return this.clone()._add(Q(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(Q(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new O(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new O(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=q(this.x),this.y=q(this.y),this},distanceTo:function(l){l=Q(l);var u=l.x-this.x,f=l.y-this.y;return Math.sqrt(u*u+f*f)},equals:function(l){return l=Q(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=Q(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function Q(l,u,f){return l instanceof O?l:N(l)?new O(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new O(l.x,l.y):new O(l,u,f)}function le(l,u){if(l)for(var f=u?[l,u]:l,b=0,_=f.length;b<_;b++)this.extend(f[b])}le.prototype={extend:function(l){var u,f;if(!l)return this;if(l instanceof O||typeof l[0]=="number"||"x"in l)u=f=Q(l);else if(l=V(l),u=l.min,f=l.max,!u||!f)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=f.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(l){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var u,f;return typeof l[0]=="number"||l instanceof O?l=Q(l):l=V(l),l instanceof le?(u=l.min,f=l.max):u=f=l,u.x>=this.min.x&&f.x<=this.max.x&&u.y>=this.min.y&&f.y<=this.max.y},intersects:function(l){l=V(l);var u=this.min,f=this.max,b=l.min,_=l.max,A=_.x>=u.x&&b.x<=f.x,U=_.y>=u.y&&b.y<=f.y;return A&&U},overlaps:function(l){l=V(l);var u=this.min,f=this.max,b=l.min,_=l.max,A=_.x>u.x&&b.x<f.x,U=_.y>u.y&&b.y<f.y;return A&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var u=this.min,f=this.max,b=Math.abs(u.x-f.x)*l,_=Math.abs(u.y-f.y)*l;return V(Q(u.x-b,u.y-_),Q(f.x+b,f.y+_))},equals:function(l){return l?(l=V(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function V(l,u){return!l||l instanceof le?l:new le(l,u)}function ne(l,u){if(l)for(var f=u?[l,u]:l,b=0,_=f.length;b<_;b++)this.extend(f[b])}ne.prototype={extend:function(l){var u=this._southWest,f=this._northEast,b,_;if(l instanceof ye)b=l,_=l;else if(l instanceof ne){if(b=l._southWest,_=l._northEast,!b||!_)return this}else return l?this.extend(z(l)||pe(l)):this;return!u&&!f?(this._southWest=new ye(b.lat,b.lng),this._northEast=new ye(_.lat,_.lng)):(u.lat=Math.min(b.lat,u.lat),u.lng=Math.min(b.lng,u.lng),f.lat=Math.max(_.lat,f.lat),f.lng=Math.max(_.lng,f.lng)),this},pad:function(l){var u=this._southWest,f=this._northEast,b=Math.abs(u.lat-f.lat)*l,_=Math.abs(u.lng-f.lng)*l;return new ne(new ye(u.lat-b,u.lng-_),new ye(f.lat+b,f.lng+_))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof ye||"lat"in l?l=z(l):l=pe(l);var u=this._southWest,f=this._northEast,b,_;return l instanceof ne?(b=l.getSouthWest(),_=l.getNorthEast()):b=_=l,b.lat>=u.lat&&_.lat<=f.lat&&b.lng>=u.lng&&_.lng<=f.lng},intersects:function(l){l=pe(l);var u=this._southWest,f=this._northEast,b=l.getSouthWest(),_=l.getNorthEast(),A=_.lat>=u.lat&&b.lat<=f.lat,U=_.lng>=u.lng&&b.lng<=f.lng;return A&&U},overlaps:function(l){l=pe(l);var u=this._southWest,f=this._northEast,b=l.getSouthWest(),_=l.getNorthEast(),A=_.lat>u.lat&&b.lat<f.lat,U=_.lng>u.lng&&b.lng<f.lng;return A&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,u){return l?(l=pe(l),this._southWest.equals(l.getSouthWest(),u)&&this._northEast.equals(l.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function pe(l,u){return l instanceof ne?l:new ne(l,u)}function ye(l,u,f){if(isNaN(l)||isNaN(u))throw new Error("Invalid LatLng object: ("+l+", "+u+")");this.lat=+l,this.lng=+u,f!==void 0&&(this.alt=+f)}ye.prototype={equals:function(l,u){if(!l)return!1;l=z(l);var f=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return f<=(u===void 0?1e-9:u)},toString:function(l){return"LatLng("+p(this.lat,l)+", "+p(this.lng,l)+")"},distanceTo:function(l){return Me.distance(this,z(l))},wrap:function(){return Me.wrapLatLng(this)},toBounds:function(l){var u=180*l/40075017,f=u/Math.cos(Math.PI/180*this.lat);return pe([this.lat-u,this.lng-f],[this.lat+u,this.lng+f])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function z(l,u,f){return l instanceof ye?l:N(l)&&typeof l[0]!="object"?l.length===3?new ye(l[0],l[1],l[2]):l.length===2?new ye(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new ye(l.lat,"lng"in l?l.lng:l.lon,l.alt):u===void 0?null:new ye(l,u,f)}var ge={latLngToPoint:function(l,u){var f=this.projection.project(l),b=this.scale(u);return this.transformation._transform(f,b)},pointToLatLng:function(l,u){var f=this.scale(u),b=this.transformation.untransform(l,f);return this.projection.unproject(b)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var u=this.projection.bounds,f=this.scale(l),b=this.transformation.transform(u.min,f),_=this.transformation.transform(u.max,f);return new le(b,_)},infinite:!1,wrapLatLng:function(l){var u=this.wrapLng?m(l.lng,this.wrapLng,!0):l.lng,f=this.wrapLat?m(l.lat,this.wrapLat,!0):l.lat,b=l.alt;return new ye(f,u,b)},wrapLatLngBounds:function(l){var u=l.getCenter(),f=this.wrapLatLng(u),b=u.lat-f.lat,_=u.lng-f.lng;if(b===0&&_===0)return l;var A=l.getSouthWest(),U=l.getNorthEast(),te=new ye(A.lat-b,A.lng-_),re=new ye(U.lat-b,U.lng-_);return new ne(te,re)}},Me=a({},ge,{wrapLng:[-180,180],R:6371e3,distance:function(l,u){var f=Math.PI/180,b=l.lat*f,_=u.lat*f,A=Math.sin((u.lat-l.lat)*f/2),U=Math.sin((u.lng-l.lng)*f/2),te=A*A+Math.cos(b)*Math.cos(_)*U*U,re=2*Math.atan2(Math.sqrt(te),Math.sqrt(1-te));return this.R*re}}),De=6378137,ee={R:De,MAX_LATITUDE:85.0511287798,project:function(l){var u=Math.PI/180,f=this.MAX_LATITUDE,b=Math.max(Math.min(f,l.lat),-f),_=Math.sin(b*u);return new O(this.R*l.lng*u,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(l){var u=180/Math.PI;return new ye((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*u,l.x*u/this.R)},bounds:function(){var l=De*Math.PI;return new le([-l,-l],[l,l])}()};function K(l,u,f,b){if(N(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=u,this._c=f,this._d=b}K.prototype={transform:function(l,u){return this._transform(l.clone(),u)},_transform:function(l,u){return u=u||1,l.x=u*(this._a*l.x+this._b),l.y=u*(this._c*l.y+this._d),l},untransform:function(l,u){return u=u||1,new O((l.x/u-this._b)/this._a,(l.y/u-this._d)/this._c)}};function be(l,u,f,b){return new K(l,u,f,b)}var Ne=a({},Me,{code:"EPSG:3857",projection:ee,transformation:function(){var l=.5/(Math.PI*ee.R);return be(l,.5,-l,.5)}()}),Fe=a({},Ne,{code:"EPSG:900913"});function Ye(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Je(l,u){var f="",b,_,A,U,te,re;for(b=0,A=l.length;b<A;b++){for(te=l[b],_=0,U=te.length;_<U;_++)re=te[_],f+=(_?"L":"M")+re.x+" "+re.y;f+=u?Ee.svg?"z":"x":""}return f||"M0 0"}var et=document.documentElement.style,js="ActiveXObject"in window,ie=js&&!document.addEventListener,F="msLaunchUri"in navigator&&!("documentMode"in document),Y=Bs("webkit"),B=Bs("android"),ae=Bs("android 2")||Bs("android 3"),fe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),de=B&&Bs("Google")&&fe<537&&!("AudioNode"in window),Ce=!!window.opera,We=!F&&Bs("chrome"),qe=Bs("gecko")&&!Y&&!Ce&&!js,ir=!We&&Bs("safari"),qn=Bs("phantom"),Pr="OTransition"in et,Ho=navigator.platform.indexOf("Win")===0,Hr=js&&"transition"in et,Wr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ae,Kn="MozPerspective"in et,id=!window.L_DISABLE_3D&&(Hr||Wr||Kn)&&!Pr&&!qn,za=typeof orientation<"u"||Bs("mobile"),od=za&&Y,w4=za&&Wr,Jy=!window.PointerEvent&&window.MSPointerEvent,Xy=!!(window.PointerEvent||Jy),Qy="ontouchstart"in window||!!window.TouchEvent,k4=!window.L_NO_TOUCH&&(Qy||Xy),j4=za&&Ce,N4=za&&qe,_4=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,S4=function(){var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",g,u),window.removeEventListener("testPassiveEventSupport",g,u)}catch{}return l}(),C4=function(){return!!document.createElement("canvas").getContext}(),pf=!!(document.createElementNS&&Ye("svg").createSVGRect),P4=!!pf&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),E4=!pf&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var u=l.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),L4=navigator.platform.indexOf("Mac")===0,T4=navigator.platform.indexOf("Linux")===0;function Bs(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Ee={ie:js,ielt9:ie,edge:F,webkit:Y,android:B,android23:ae,androidStock:de,opera:Ce,chrome:We,gecko:qe,safari:ir,phantom:qn,opera12:Pr,win:Ho,ie3d:Hr,webkit3d:Wr,gecko3d:Kn,any3d:id,mobile:za,mobileWebkit:od,mobileWebkit3d:w4,msPointer:Jy,pointer:Xy,touch:k4,touchNative:Qy,mobileOpera:j4,mobileGecko:N4,retina:_4,passiveEvents:S4,canvas:C4,svg:pf,vml:E4,inlineSvg:P4,mac:L4,linux:T4},eb=Ee.msPointer?"MSPointerDown":"pointerdown",tb=Ee.msPointer?"MSPointerMove":"pointermove",rb=Ee.msPointer?"MSPointerUp":"pointerup",sb=Ee.msPointer?"MSPointerCancel":"pointercancel",xf={touchstart:eb,touchmove:tb,touchend:rb,touchcancel:sb},nb={touchstart:D4,touchmove:ld,touchend:ld,touchcancel:ld},Pi={},ab=!1;function I4(l,u,f){return u==="touchstart"&&R4(),nb[u]?(f=nb[u].bind(this,f),l.addEventListener(xf[u],f,!1),f):(console.warn("wrong event specified:",u),g)}function A4(l,u,f){if(!xf[u]){console.warn("wrong event specified:",u);return}l.removeEventListener(xf[u],f,!1)}function M4(l){Pi[l.pointerId]=l}function O4(l){Pi[l.pointerId]&&(Pi[l.pointerId]=l)}function ib(l){delete Pi[l.pointerId]}function R4(){ab||(document.addEventListener(eb,M4,!0),document.addEventListener(tb,O4,!0),document.addEventListener(rb,ib,!0),document.addEventListener(sb,ib,!0),ab=!0)}function ld(l,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var f in Pi)u.touches.push(Pi[f]);u.changedTouches=[u],l(u)}}function D4(l,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Jt(u),ld(l,u)}function F4(l){var u={},f,b;for(b in l)f=l[b],u[b]=f&&f.bind?f.bind(l):f;return l=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var z4=200;function B4(l,u){l.addEventListener("dblclick",u);var f=0,b;function _(A){if(A.detail!==1){b=A.detail;return}if(!(A.pointerType==="mouse"||A.sourceCapabilities&&!A.sourceCapabilities.firesTouchEvents)){var U=ub(A);if(!(U.some(function(re){return re instanceof HTMLLabelElement&&re.attributes.for})&&!U.some(function(re){return re instanceof HTMLInputElement||re instanceof HTMLSelectElement}))){var te=Date.now();te-f<=z4?(b++,b===2&&u(F4(A))):b=1,f=te}}}return l.addEventListener("click",_),{dblclick:u,simDblclick:_}}function $4(l,u){l.removeEventListener("dblclick",u.dblclick),l.removeEventListener("click",u.simDblclick)}var yf=ud(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Wo=ud(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ob=Wo==="webkitTransition"||Wo==="OTransition"?Wo+"End":"transitionend";function lb(l){return typeof l=="string"?document.getElementById(l):l}function qo(l,u){var f=l.style[u]||l.currentStyle&&l.currentStyle[u];if((!f||f==="auto")&&document.defaultView){var b=document.defaultView.getComputedStyle(l,null);f=b?b[u]:null}return f==="auto"?null:f}function Ze(l,u,f){var b=document.createElement(l);return b.className=u||"",f&&f.appendChild(b),b}function kt(l){var u=l.parentNode;u&&u.removeChild(l)}function cd(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Ei(l){var u=l.parentNode;u&&u.lastChild!==l&&u.appendChild(l)}function Li(l){var u=l.parentNode;u&&u.firstChild!==l&&u.insertBefore(l,u.firstChild)}function bf(l,u){if(l.classList!==void 0)return l.classList.contains(u);var f=dd(l);return f.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(f)}function Oe(l,u){if(l.classList!==void 0)for(var f=x(u),b=0,_=f.length;b<_;b++)l.classList.add(f[b]);else if(!bf(l,u)){var A=dd(l);vf(l,(A?A+" ":"")+u)}}function Ct(l,u){l.classList!==void 0?l.classList.remove(u):vf(l,v((" "+dd(l)+" ").replace(" "+u+" "," ")))}function vf(l,u){l.className.baseVal===void 0?l.className=u:l.className.baseVal=u}function dd(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function as(l,u){"opacity"in l.style?l.style.opacity=u:"filter"in l.style&&U4(l,u)}function U4(l,u){var f=!1,b="DXImageTransform.Microsoft.Alpha";try{f=l.filters.item(b)}catch{if(u===1)return}u=Math.round(u*100),f?(f.Enabled=u!==100,f.Opacity=u):l.style.filter+=" progid:"+b+"(opacity="+u+")"}function ud(l){for(var u=document.documentElement.style,f=0;f<l.length;f++)if(l[f]in u)return l[f];return!1}function Ba(l,u,f){var b=u||new O(0,0);l.style[yf]=(Ee.ie3d?"translate("+b.x+"px,"+b.y+"px)":"translate3d("+b.x+"px,"+b.y+"px,0)")+(f?" scale("+f+")":"")}function It(l,u){l._leaflet_pos=u,Ee.any3d?Ba(l,u):(l.style.left=u.x+"px",l.style.top=u.y+"px")}function $a(l){return l._leaflet_pos||new O(0,0)}var Ko,Zo,wf;if("onselectstart"in document)Ko=function(){Ie(window,"selectstart",Jt)},Zo=function(){dt(window,"selectstart",Jt)};else{var Go=ud(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ko=function(){if(Go){var l=document.documentElement.style;wf=l[Go],l[Go]="none"}},Zo=function(){Go&&(document.documentElement.style[Go]=wf,wf=void 0)}}function kf(){Ie(window,"dragstart",Jt)}function jf(){dt(window,"dragstart",Jt)}var hd,Nf;function _f(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(md(),hd=l,Nf=l.style.outlineStyle,l.style.outlineStyle="none",Ie(window,"keydown",md))}function md(){hd&&(hd.style.outlineStyle=Nf,hd=void 0,Nf=void 0,dt(window,"keydown",md))}function cb(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Sf(l){var u=l.getBoundingClientRect();return{x:u.width/l.offsetWidth||1,y:u.height/l.offsetHeight||1,boundingClientRect:u}}var V4={__proto__:null,TRANSFORM:yf,TRANSITION:Wo,TRANSITION_END:ob,get:lb,getStyle:qo,create:Ze,remove:kt,empty:cd,toFront:Ei,toBack:Li,hasClass:bf,addClass:Oe,removeClass:Ct,setClass:vf,getClass:dd,setOpacity:as,testProp:ud,setTransform:Ba,setPosition:It,getPosition:$a,get disableTextSelection(){return Ko},get enableTextSelection(){return Zo},disableImageDrag:kf,enableImageDrag:jf,preventOutline:_f,restoreOutline:md,getSizedParentNode:cb,getScale:Sf};function Ie(l,u,f,b){if(u&&typeof u=="object")for(var _ in u)Pf(l,_,u[_],f);else{u=x(u);for(var A=0,U=u.length;A<U;A++)Pf(l,u[A],f,b)}return this}var $s="_leaflet_events";function dt(l,u,f,b){if(arguments.length===1)db(l),delete l[$s];else if(u&&typeof u=="object")for(var _ in u)Ef(l,_,u[_],f);else if(u=x(u),arguments.length===2)db(l,function(te){return C(u,te)!==-1});else for(var A=0,U=u.length;A<U;A++)Ef(l,u[A],f,b);return this}function db(l,u){for(var f in l[$s]){var b=f.split(/\d/)[0];(!u||u(b))&&Ef(l,b,null,null,f)}}var Cf={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pf(l,u,f,b){var _=u+d(f)+(b?"_"+d(b):"");if(l[$s]&&l[$s][_])return this;var A=function(te){return f.call(b||l,te||window.event)},U=A;!Ee.touchNative&&Ee.pointer&&u.indexOf("touch")===0?A=I4(l,u,A):Ee.touch&&u==="dblclick"?A=B4(l,A):"addEventListener"in l?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?l.addEventListener(Cf[u]||u,A,Ee.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(A=function(te){te=te||window.event,Tf(l,te)&&U(te)},l.addEventListener(Cf[u],A,!1)):l.addEventListener(u,U,!1):l.attachEvent("on"+u,A),l[$s]=l[$s]||{},l[$s][_]=A}function Ef(l,u,f,b,_){_=_||u+d(f)+(b?"_"+d(b):"");var A=l[$s]&&l[$s][_];if(!A)return this;!Ee.touchNative&&Ee.pointer&&u.indexOf("touch")===0?A4(l,u,A):Ee.touch&&u==="dblclick"?$4(l,A):"removeEventListener"in l?l.removeEventListener(Cf[u]||u,A,!1):l.detachEvent("on"+u,A),l[$s][_]=null}function Ua(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function Lf(l){return Pf(l,"wheel",Ua),this}function Yo(l){return Ie(l,"mousedown touchstart dblclick contextmenu",Ua),l._leaflet_disable_click=!0,this}function Jt(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function Va(l){return Jt(l),Ua(l),this}function ub(l){if(l.composedPath)return l.composedPath();for(var u=[],f=l.target;f;)u.push(f),f=f.parentNode;return u}function hb(l,u){if(!u)return new O(l.clientX,l.clientY);var f=Sf(u),b=f.boundingClientRect;return new O((l.clientX-b.left)/f.x-u.clientLeft,(l.clientY-b.top)/f.y-u.clientTop)}var H4=Ee.linux&&Ee.chrome?window.devicePixelRatio:Ee.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mb(l){return Ee.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/H4:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Tf(l,u){var f=u.relatedTarget;if(!f)return!0;try{for(;f&&f!==l;)f=f.parentNode}catch{return!1}return f!==l}var W4={__proto__:null,on:Ie,off:dt,stopPropagation:Ua,disableScrollPropagation:Lf,disableClickPropagation:Yo,preventDefault:Jt,stop:Va,getPropagationPath:ub,getMousePosition:hb,getWheelDelta:mb,isExternalTarget:Tf,addListener:Ie,removeListener:dt},fb=R.extend({run:function(l,u,f,b){this.stop(),this._el=l,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(b||.5,.2),this._startPos=$a(l),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=J(this._animate,this),this._step()},_step:function(l){var u=+new Date-this._startTime,f=this._duration*1e3;u<f?this._runFrame(this._easeOut(u/f),l):(this._runFrame(1),this._complete())},_runFrame:function(l,u){var f=this._startPos.add(this._offset.multiplyBy(l));u&&f._round(),It(this._el,f),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),He=R.extend({options:{crs:Ne,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,u){u=w(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(z(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Wo&&Ee.any3d&&!Ee.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ie(this._proxy,ob,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,u,f){if(u=u===void 0?this._zoom:this._limitZoom(u),l=this._limitCenter(z(l),u,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=a({animate:f.animate},f.zoom),f.pan=a({animate:f.animate,duration:f.duration},f.pan));var b=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,u,f.zoom):this._tryAnimatedPan(l,f.pan);if(b)return clearTimeout(this._sizeTimer),this}return this._resetView(l,u,f.pan&&f.pan.noMoveStart),this},setZoom:function(l,u){return this._loaded?this.setView(this.getCenter(),l,{zoom:u}):(this._zoom=l,this)},zoomIn:function(l,u){return l=l||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,u)},zoomOut:function(l,u){return l=l||(Ee.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,u)},setZoomAround:function(l,u,f){var b=this.getZoomScale(u),_=this.getSize().divideBy(2),A=l instanceof O?l:this.latLngToContainerPoint(l),U=A.subtract(_).multiplyBy(1-1/b),te=this.containerPointToLatLng(_.add(U));return this.setView(te,u,{zoom:f})},_getBoundsCenterZoom:function(l,u){u=u||{},l=l.getBounds?l.getBounds():pe(l);var f=Q(u.paddingTopLeft||u.padding||[0,0]),b=Q(u.paddingBottomRight||u.padding||[0,0]),_=this.getBoundsZoom(l,!1,f.add(b));if(_=typeof u.maxZoom=="number"?Math.min(u.maxZoom,_):_,_===1/0)return{center:l.getCenter(),zoom:_};var A=b.subtract(f).divideBy(2),U=this.project(l.getSouthWest(),_),te=this.project(l.getNorthEast(),_),re=this.unproject(U.add(te).divideBy(2).add(A),_);return{center:re,zoom:_}},fitBounds:function(l,u){if(l=pe(l),!l.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(l,u);return this.setView(f.center,f.zoom,u)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,u){return this.setView(l,this._zoom,{pan:u})},panBy:function(l,u){if(l=Q(l).round(),u=u||{},!l.x&&!l.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new fb,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Oe(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,f,u.duration||.25,u.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,u,f){if(f=f||{},f.animate===!1||!Ee.any3d)return this.setView(l,u,f);this._stop();var b=this.project(this.getCenter()),_=this.project(l),A=this.getSize(),U=this._zoom;l=z(l),u=u===void 0?U:u;var te=Math.max(A.x,A.y),re=te*this.getZoomScale(U,u),oe=_.distanceTo(b)||1,we=1.42,Le=we*we;function ze(At){var _d=At?-1:1,AC=At?re:te,MC=re*re-te*te+_d*Le*Le*oe*oe,OC=2*AC*Le*oe,Uf=MC/OC,Zb=Math.sqrt(Uf*Uf+1)-Uf,RC=Zb<1e-9?-18:Math.log(Zb);return RC}function br(At){return(Math.exp(At)-Math.exp(-At))/2}function qt(At){return(Math.exp(At)+Math.exp(-At))/2}function os(At){return br(At)/qt(At)}var Er=ze(0);function Ri(At){return te*(qt(Er)/qt(Er+we*At))}function EC(At){return te*(qt(Er)*os(Er+we*At)-br(Er))/Le}function LC(At){return 1-Math.pow(1-At,1.5)}var TC=Date.now(),qb=(ze(1)-Er)/we,IC=f.duration?1e3*f.duration:1e3*qb*.8;function Kb(){var At=(Date.now()-TC)/IC,_d=LC(At)*qb;At<=1?(this._flyToFrame=J(Kb,this),this._move(this.unproject(b.add(_.subtract(b).multiplyBy(EC(_d)/oe)),U),this.getScaleZoom(te/Ri(_d),U),{flyTo:!0})):this._move(l,u)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Kb.call(this),this},flyToBounds:function(l,u){var f=this._getBoundsCenterZoom(l,u);return this.flyTo(f.center,f.zoom,u)},setMaxBounds:function(l){return l=pe(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var u=this.options.minZoom;return this.options.minZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var u=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,u){this._enforcingBounds=!0;var f=this.getCenter(),b=this._limitCenter(f,this._zoom,pe(l));return f.equals(b)||this.panTo(b,u),this._enforcingBounds=!1,this},panInside:function(l,u){u=u||{};var f=Q(u.paddingTopLeft||u.padding||[0,0]),b=Q(u.paddingBottomRight||u.padding||[0,0]),_=this.project(this.getCenter()),A=this.project(l),U=this.getPixelBounds(),te=V([U.min.add(f),U.max.subtract(b)]),re=te.getSize();if(!te.contains(A)){this._enforcingBounds=!0;var oe=A.subtract(te.getCenter()),we=te.extend(A).getSize().subtract(re);_.x+=oe.x<0?-we.x:we.x,_.y+=oe.y<0?-we.y:we.y,this.panTo(this.unproject(_),u),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=a({animate:!1,pan:!0},l===!0?{animate:!0}:l);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),b=u.divideBy(2).round(),_=f.divideBy(2).round(),A=b.subtract(_);return!A.x&&!A.y?this:(l.animate&&l.pan?this.panBy(A):(l.pan&&this._rawPanBy(A),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=a({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,f,l):navigator.geolocation.getCurrentPosition(u,f,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var u=l.code,f=l.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var u=l.coords.latitude,f=l.coords.longitude,b=new ye(u,f),_=b.toBounds(l.coords.accuracy*2),A=this._locateOptions;if(A.setView){var U=this.getBoundsZoom(_);this.setView(b,A.maxZoom?Math.min(U,A.maxZoom):U)}var te={latlng:b,bounds:_,timestamp:l.timestamp};for(var re in l.coords)typeof l.coords[re]=="number"&&(te[re]=l.coords[re]);this.fire("locationfound",te)}},addHandler:function(l,u){if(!u)return this;var f=this[l]=new u(this);return this._handlers.push(f),this.options[l]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),kt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)kt(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,u){var f="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),b=Ze("div",f,u||this._mapPane);return l&&(this._panes[l]=b),b},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),u=this.unproject(l.getBottomLeft()),f=this.unproject(l.getTopRight());return new ne(u,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,u,f){l=pe(l),f=Q(f||[0,0]);var b=this.getZoom()||0,_=this.getMinZoom(),A=this.getMaxZoom(),U=l.getNorthWest(),te=l.getSouthEast(),re=this.getSize().subtract(f),oe=V(this.project(te,b),this.project(U,b)).getSize(),we=Ee.any3d?this.options.zoomSnap:1,Le=re.x/oe.x,ze=re.y/oe.y,br=u?Math.max(Le,ze):Math.min(Le,ze);return b=this.getScaleZoom(br,b),we&&(b=Math.round(b/(we/100))*(we/100),b=u?Math.ceil(b/we)*we:Math.floor(b/we)*we),Math.max(_,Math.min(A,b))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,u){var f=this._getTopLeftPoint(l,u);return new le(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,u){var f=this.options.crs;return u=u===void 0?this._zoom:u,f.scale(l)/f.scale(u)},getScaleZoom:function(l,u){var f=this.options.crs;u=u===void 0?this._zoom:u;var b=f.zoom(l*f.scale(u));return isNaN(b)?1/0:b},project:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(z(l),u)},unproject:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(Q(l),u)},layerPointToLatLng:function(l){var u=Q(l).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(l){var u=this.project(z(l))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(z(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(pe(l))},distance:function(l,u){return this.options.crs.distance(z(l),z(u))},containerPointToLayerPoint:function(l){return Q(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return Q(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var u=this.containerPointToLayerPoint(Q(l));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(l)))},mouseEventToContainerPoint:function(l){return hb(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var u=this._container=lb(l);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ie(u,"scroll",this._onScroll,this),this._containerId=d(u)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ee.any3d,Oe(l,"leaflet-container"+(Ee.touch?" leaflet-touch":"")+(Ee.retina?" leaflet-retina":"")+(Ee.ielt9?" leaflet-oldie":"")+(Ee.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=qo(l,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Oe(l.markerPane,"leaflet-zoom-hide"),Oe(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,u,f){It(this._mapPane,new O(0,0));var b=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var _=this._zoom!==u;this._moveStart(_,f)._move(l,u)._moveEnd(_),this.fire("viewreset"),b&&this.fire("load")},_moveStart:function(l,u){return l&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(l,u,f,b){u===void 0&&(u=this._zoom);var _=this._zoom!==u;return this._zoom=u,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),b?f&&f.pinch&&this.fire("zoom",f):((_||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){It(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[d(this._container)]=this;var u=l?dt:Ie;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ee.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=J(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,u){for(var f=[],b,_=u==="mouseout"||u==="mouseover",A=l.target||l.srcElement,U=!1;A;){if(b=this._targets[d(A)],b&&(u==="click"||u==="preclick")&&this._draggableMoved(b)){U=!0;break}if(b&&b.listens(u,!0)&&(_&&!Tf(A,l)||(f.push(b),_))||A===this._container)break;A=A.parentNode}return!f.length&&!U&&!_&&this.listens(u,!0)&&(f=[this]),f},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var u=l.target||l.srcElement;if(!(!this._loaded||u._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(u))){var f=l.type;f==="mousedown"&&_f(u),this._fireDOMEvent(l,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,u,f){if(l.type==="click"){var b=a({},l);b.type="preclick",this._fireDOMEvent(b,b.type,f)}var _=this._findEventTargets(l,u);if(f){for(var A=[],U=0;U<f.length;U++)f[U].listens(u,!0)&&A.push(f[U]);_=A.concat(_)}if(_.length){u==="contextmenu"&&Jt(l);var te=_[0],re={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var oe=te.getLatLng&&(!te._radius||te._radius<=10);re.containerPoint=oe?this.latLngToContainerPoint(te.getLatLng()):this.mouseEventToContainerPoint(l),re.layerPoint=this.containerPointToLayerPoint(re.containerPoint),re.latlng=oe?te.getLatLng():this.layerPointToLatLng(re.layerPoint)}for(U=0;U<_.length;U++)if(_[U].fire(u,re,!0),re.originalEvent._stopped||_[U].options.bubblingMouseEvents===!1&&C(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,u=this._handlers.length;l<u;l++)this._handlers[l].disable()},whenReady:function(l,u){return this._loaded?l.call(u||this,{target:this}):this.on("load",l,u),this},_getMapPanePos:function(){return $a(this._mapPane)||new O(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,u){var f=l&&u!==void 0?this._getNewPixelOrigin(l,u):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,u){var f=this.getSize()._divideBy(2);return this.project(l,u)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,u,f){var b=this._getNewPixelOrigin(f,u);return this.project(l,u)._subtract(b)},_latLngBoundsToNewLayerBounds:function(l,u,f){var b=this._getNewPixelOrigin(f,u);return V([this.project(l.getSouthWest(),u)._subtract(b),this.project(l.getNorthWest(),u)._subtract(b),this.project(l.getSouthEast(),u)._subtract(b),this.project(l.getNorthEast(),u)._subtract(b)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,u,f){if(!f)return l;var b=this.project(l,u),_=this.getSize().divideBy(2),A=new le(b.subtract(_),b.add(_)),U=this._getBoundsOffset(A,f,u);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?l:this.unproject(b.add(U),u)},_limitOffset:function(l,u){if(!u)return l;var f=this.getPixelBounds(),b=new le(f.min.add(l),f.max.add(l));return l.add(this._getBoundsOffset(b,u))},_getBoundsOffset:function(l,u,f){var b=V(this.project(u.getNorthEast(),f),this.project(u.getSouthWest(),f)),_=b.min.subtract(l.min),A=b.max.subtract(l.max),U=this._rebound(_.x,-A.x),te=this._rebound(_.y,-A.y);return new O(U,te)},_rebound:function(l,u){return l+u>0?Math.round(l-u)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(u))},_limitZoom:function(l){var u=this.getMinZoom(),f=this.getMaxZoom(),b=Ee.any3d?this.options.zoomSnap:1;return b&&(l=Math.round(l/b)*b),Math.max(u,Math.min(f,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ct(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,u){var f=this._getCenterOffset(l)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,u),!0)},_createAnimProxy:function(){var l=this._proxy=Ze("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(u){var f=yf,b=this._proxy.style[f];Ba(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),b===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){kt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),u=this.getZoom();Ba(this._proxy,this.project(l,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,u,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var b=this.getZoomScale(u),_=this._getCenterOffset(l)._divideBy(1-1/b);return f.animate!==!0&&!this.getSize().contains(_)?!1:(J(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(l,u,!0)},this),!0)},_animateZoom:function(l,u,f,b){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=u,Oe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:u,noUpdate:b}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ct(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function q4(l,u){return new He(l,u)}var Ns=W.extend({options:{position:"topright"},initialize:function(l){w(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var u=this._map;return u&&u.removeControl(this),this.options.position=l,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var u=this._container=this.onAdd(l),f=this.getPosition(),b=l._controlCorners[f];return Oe(u,"leaflet-control"),f.indexOf("bottom")!==-1?b.insertBefore(u,b.firstChild):b.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(kt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Jo=function(l){return new Ns(l)};He.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},u="leaflet-",f=this._controlContainer=Ze("div",u+"control-container",this._container);function b(_,A){var U=u+_+" "+u+A;l[_+A]=Ze("div",U,f)}b("top","left"),b("top","right"),b("bottom","left"),b("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)kt(this._controlCorners[l]);kt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var gb=Ns.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,u,f,b){return f<b?-1:b<f?1:0}},initialize:function(l,u,f){w(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var b in l)this._addLayer(l[b],b);for(b in u)this._addLayer(u[b],b,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return Ns.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,u){return this._addLayer(l,u),this._map?this._update():this},addOverlay:function(l,u){return this._addLayer(l,u,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var u=this._getLayer(d(l));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Oe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Oe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Ct(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ct(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",u=this._container=Ze("div",l),f=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Yo(u),Lf(u);var b=this._section=Ze("section",l+"-list");f&&(this._map.on("click",this.collapse,this),Ie(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Ze("a",l+"-toggle",u);_.href="#",_.title="Layers",_.setAttribute("role","button"),Ie(_,{keydown:function(A){A.keyCode===13&&this._expandSafely()},click:function(A){Jt(A),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=Ze("div",l+"-base",b),this._separator=Ze("div",l+"-separator",b),this._overlaysList=Ze("div",l+"-overlays",b),u.appendChild(b)},_getLayer:function(l){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&d(this._layers[u].layer)===l)return this._layers[u]},_addLayer:function(l,u,f){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:u,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(b,_){return this.options.sortFunction(b.layer,_.layer,b.name,_.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;cd(this._baseLayersList),cd(this._overlaysList),this._layerControlInputs=[];var l,u,f,b,_=0;for(f=0;f<this._layers.length;f++)b=this._layers[f],this._addItem(b),u=u||b.overlay,l=l||!b.overlay,_+=b.overlay?0:1;return this.options.hideSingleBase&&(l=l&&_>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=u&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var u=this._getLayer(d(l.target)),f=u.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;f&&this._map.fire(f,u)},_createRadioElement:function(l,u){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(u?' checked="checked"':"")+"/>",b=document.createElement("div");return b.innerHTML=f,b.firstChild},_addItem:function(l){var u=document.createElement("label"),f=this._map.hasLayer(l.layer),b;l.overlay?(b=document.createElement("input"),b.type="checkbox",b.className="leaflet-control-layers-selector",b.defaultChecked=f):b=this._createRadioElement("leaflet-base-layers_"+d(this),f),this._layerControlInputs.push(b),b.layerId=d(l.layer),Ie(b,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+l.name;var A=document.createElement("span");u.appendChild(A),A.appendChild(b),A.appendChild(_);var U=l.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,u,f,b=[],_=[];this._handlingClick=!0;for(var A=l.length-1;A>=0;A--)u=l[A],f=this._getLayer(u.layerId).layer,u.checked?b.push(f):u.checked||_.push(f);for(A=0;A<_.length;A++)this._map.hasLayer(_[A])&&this._map.removeLayer(_[A]);for(A=0;A<b.length;A++)this._map.hasLayer(b[A])||this._map.addLayer(b[A]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,u,f,b=this._map.getZoom(),_=l.length-1;_>=0;_--)u=l[_],f=this._getLayer(u.layerId).layer,u.disabled=f.options.minZoom!==void 0&&b<f.options.minZoom||f.options.maxZoom!==void 0&&b>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Ie(l,"click",Jt),this.expand();var u=this;setTimeout(function(){dt(l,"click",Jt),u._preventClick=!1})}}),K4=function(l,u,f){return new gb(l,u,f)},If=Ns.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var u="leaflet-control-zoom",f=Ze("div",u+" leaflet-bar"),b=this.options;return this._zoomInButton=this._createButton(b.zoomInText,b.zoomInTitle,u+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(b.zoomOutText,b.zoomOutTitle,u+"-out",f,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,u,f,b,_){var A=Ze("a",f,b);return A.innerHTML=l,A.href="#",A.title=u,A.setAttribute("role","button"),A.setAttribute("aria-label",u),Yo(A),Ie(A,"click",Va),Ie(A,"click",_,this),Ie(A,"click",this._refocusOnMap,this),A},_updateDisabled:function(){var l=this._map,u="leaflet-disabled";Ct(this._zoomInButton,u),Ct(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Oe(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Oe(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new If,this.addControl(this.zoomControl))});var Z4=function(l){return new If(l)},pb=Ns.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var u="leaflet-control-scale",f=Ze("div",u),b=this.options;return this._addScales(b,u+"-line",f),l.on(b.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),f},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,u,f){l.metric&&(this._mScale=Ze("div",u,f)),l.imperial&&(this._iScale=Ze("div",u,f))},_update:function(){var l=this._map,u=l.getSize().y/2,f=l.distance(l.containerPointToLatLng([0,u]),l.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(f)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var u=this._getRoundNum(l),f=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,f,u/l)},_updateImperial:function(l){var u=l*3.2808399,f,b,_;u>5280?(f=u/5280,b=this._getRoundNum(f),this._updateScale(this._iScale,b+" mi",b/f)):(_=this._getRoundNum(u),this._updateScale(this._iScale,_+" ft",_/u))},_updateScale:function(l,u,f){l.style.width=Math.round(this.options.maxWidth*f)+"px",l.innerHTML=u},_getRoundNum:function(l){var u=Math.pow(10,(Math.floor(l)+"").length-1),f=l/u;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,u*f}}),G4=function(l){return new pb(l)},Y4='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Af=Ns.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ee.inlineSvg?Y4+" ":"")+"Leaflet</a>"},initialize:function(l){w(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Ze("div","leaflet-control-attribution"),Yo(this._container);for(var u in l._layers)l._layers[u].getAttribution&&this.addAttribution(l._layers[u].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var u in this._attributions)this._attributions[u]&&l.push(u);var f=[];this.options.prefix&&f.push(this.options.prefix),l.length&&f.push(l.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&new Af().addTo(this)});var J4=function(l){return new Af(l)};Ns.Layers=gb,Ns.Zoom=If,Ns.Scale=pb,Ns.Attribution=Af,Jo.layers=K4,Jo.zoom=Z4,Jo.scale=G4,Jo.attribution=J4;var Us=W.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Us.addTo=function(l,u){return l.addHandler(u,this),this};var X4={Events:G},xb=Ee.touch?"touchstart mousedown":"mousedown",Zn=R.extend({options:{clickTolerance:3},initialize:function(l,u,f,b){w(this,b),this._element=l,this._dragStartTarget=u||l,this._preventOutline=f},enable:function(){this._enabled||(Ie(this._dragStartTarget,xb,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zn._dragging===this&&this.finishDrag(!0),dt(this._dragStartTarget,xb,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!bf(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Zn._dragging===this&&this.finishDrag();return}if(!(Zn._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Zn._dragging=this,this._preventOutline&&_f(this._element),kf(),Ko(),!this._moving)){this.fire("down");var u=l.touches?l.touches[0]:l,f=cb(this._element);this._startPoint=new O(u.clientX,u.clientY),this._startPos=$a(this._element),this._parentScale=Sf(f);var b=l.type==="mousedown";Ie(document,b?"mousemove":"touchmove",this._onMove,this),Ie(document,b?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var u=l.touches&&l.touches.length===1?l.touches[0]:l,f=new O(u.clientX,u.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Jt(l),this._moved||(this.fire("dragstart"),this._moved=!0,Oe(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Oe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),It(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Ct(document.body,"leaflet-dragging"),this._lastTarget&&(Ct(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),dt(document,"mousemove touchmove",this._onMove,this),dt(document,"mouseup touchend touchcancel",this._onUp,this),jf(),Zo();var u=this._moved&&this._moving;this._moving=!1,Zn._dragging=!1,u&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function yb(l,u,f){var b,_=[1,4,2,8],A,U,te,re,oe,we,Le,ze;for(A=0,we=l.length;A<we;A++)l[A]._code=Ha(l[A],u);for(te=0;te<4;te++){for(Le=_[te],b=[],A=0,we=l.length,U=we-1;A<we;U=A++)re=l[A],oe=l[U],re._code&Le?oe._code&Le||(ze=fd(oe,re,Le,u,f),ze._code=Ha(ze,u),b.push(ze)):(oe._code&Le&&(ze=fd(oe,re,Le,u,f),ze._code=Ha(ze,u),b.push(ze)),b.push(re));l=b}return l}function bb(l,u){var f,b,_,A,U,te,re,oe,we;if(!l||l.length===0)throw new Error("latlngs not passed");is(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Le=z([0,0]),ze=pe(l),br=ze.getNorthWest().distanceTo(ze.getSouthWest())*ze.getNorthEast().distanceTo(ze.getNorthWest());br<1700&&(Le=Mf(l));var qt=l.length,os=[];for(f=0;f<qt;f++){var Er=z(l[f]);os.push(u.project(z([Er.lat-Le.lat,Er.lng-Le.lng])))}for(te=re=oe=0,f=0,b=qt-1;f<qt;b=f++)_=os[f],A=os[b],U=_.y*A.x-A.y*_.x,re+=(_.x+A.x)*U,oe+=(_.y+A.y)*U,te+=U*3;te===0?we=os[0]:we=[re/te,oe/te];var Ri=u.unproject(Q(we));return z([Ri.lat+Le.lat,Ri.lng+Le.lng])}function Mf(l){for(var u=0,f=0,b=0,_=0;_<l.length;_++){var A=z(l[_]);u+=A.lat,f+=A.lng,b++}return z([u/b,f/b])}var Q4={__proto__:null,clipPolygon:yb,polygonCenter:bb,centroid:Mf};function vb(l,u){if(!u||!l.length)return l.slice();var f=u*u;return l=rC(l,f),l=tC(l,f),l}function wb(l,u,f){return Math.sqrt(Xo(l,u,f,!0))}function eC(l,u,f){return Xo(l,u,f)}function tC(l,u){var f=l.length,b=typeof Uint8Array<"u"?Uint8Array:Array,_=new b(f);_[0]=_[f-1]=1,Of(l,_,u,0,f-1);var A,U=[];for(A=0;A<f;A++)_[A]&&U.push(l[A]);return U}function Of(l,u,f,b,_){var A=0,U,te,re;for(te=b+1;te<=_-1;te++)re=Xo(l[te],l[b],l[_],!0),re>A&&(U=te,A=re);A>f&&(u[U]=1,Of(l,u,f,b,U),Of(l,u,f,U,_))}function rC(l,u){for(var f=[l[0]],b=1,_=0,A=l.length;b<A;b++)sC(l[b],l[_])>u&&(f.push(l[b]),_=b);return _<A-1&&f.push(l[A-1]),f}var kb;function jb(l,u,f,b,_){var A=b?kb:Ha(l,f),U=Ha(u,f),te,re,oe;for(kb=U;;){if(!(A|U))return[l,u];if(A&U)return!1;te=A||U,re=fd(l,u,te,f,_),oe=Ha(re,f),te===A?(l=re,A=oe):(u=re,U=oe)}}function fd(l,u,f,b,_){var A=u.x-l.x,U=u.y-l.y,te=b.min,re=b.max,oe,we;return f&8?(oe=l.x+A*(re.y-l.y)/U,we=re.y):f&4?(oe=l.x+A*(te.y-l.y)/U,we=te.y):f&2?(oe=re.x,we=l.y+U*(re.x-l.x)/A):f&1&&(oe=te.x,we=l.y+U*(te.x-l.x)/A),new O(oe,we,_)}function Ha(l,u){var f=0;return l.x<u.min.x?f|=1:l.x>u.max.x&&(f|=2),l.y<u.min.y?f|=4:l.y>u.max.y&&(f|=8),f}function sC(l,u){var f=u.x-l.x,b=u.y-l.y;return f*f+b*b}function Xo(l,u,f,b){var _=u.x,A=u.y,U=f.x-_,te=f.y-A,re=U*U+te*te,oe;return re>0&&(oe=((l.x-_)*U+(l.y-A)*te)/re,oe>1?(_=f.x,A=f.y):oe>0&&(_+=U*oe,A+=te*oe)),U=l.x-_,te=l.y-A,b?U*U+te*te:new O(_,A)}function is(l){return!N(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Nb(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),is(l)}function _b(l,u){var f,b,_,A,U,te,re,oe;if(!l||l.length===0)throw new Error("latlngs not passed");is(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var we=z([0,0]),Le=pe(l),ze=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());ze<1700&&(we=Mf(l));var br=l.length,qt=[];for(f=0;f<br;f++){var os=z(l[f]);qt.push(u.project(z([os.lat-we.lat,os.lng-we.lng])))}for(f=0,b=0;f<br-1;f++)b+=qt[f].distanceTo(qt[f+1])/2;if(b===0)oe=qt[0];else for(f=0,A=0;f<br-1;f++)if(U=qt[f],te=qt[f+1],_=U.distanceTo(te),A+=_,A>b){re=(A-b)/_,oe=[te.x-re*(te.x-U.x),te.y-re*(te.y-U.y)];break}var Er=u.unproject(Q(oe));return z([Er.lat+we.lat,Er.lng+we.lng])}var nC={__proto__:null,simplify:vb,pointToSegmentDistance:wb,closestPointOnSegment:eC,clipSegment:jb,_getEdgeIntersection:fd,_getBitCode:Ha,_sqClosestPointOnSegment:Xo,isFlat:is,_flat:Nb,polylineCenter:_b},Rf={project:function(l){return new O(l.lng,l.lat)},unproject:function(l){return new ye(l.y,l.x)},bounds:new le([-180,-90],[180,90])},Df={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var u=Math.PI/180,f=this.R,b=l.lat*u,_=this.R_MINOR/f,A=Math.sqrt(1-_*_),U=A*Math.sin(b),te=Math.tan(Math.PI/4-b/2)/Math.pow((1-U)/(1+U),A/2);return b=-f*Math.log(Math.max(te,1e-10)),new O(l.lng*u*f,b)},unproject:function(l){for(var u=180/Math.PI,f=this.R,b=this.R_MINOR/f,_=Math.sqrt(1-b*b),A=Math.exp(-l.y/f),U=Math.PI/2-2*Math.atan(A),te=0,re=.1,oe;te<15&&Math.abs(re)>1e-7;te++)oe=_*Math.sin(U),oe=Math.pow((1-oe)/(1+oe),_/2),re=Math.PI/2-2*Math.atan(A*oe)-U,U+=re;return new ye(U*u,l.x*u/f)}},aC={__proto__:null,LonLat:Rf,Mercator:Df,SphericalMercator:ee},iC=a({},Me,{code:"EPSG:3395",projection:Df,transformation:function(){var l=.5/(Math.PI*Df.R);return be(l,.5,-l,.5)}()}),Sb=a({},Me,{code:"EPSG:4326",projection:Rf,transformation:be(1/180,1,-1/180,.5)}),oC=a({},ge,{projection:Rf,transformation:be(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,u){var f=u.lng-l.lng,b=u.lat-l.lat;return Math.sqrt(f*f+b*b)},infinite:!0});ge.Earth=Me,ge.EPSG3395=iC,ge.EPSG3857=Ne,ge.EPSG900913=Fe,ge.EPSG4326=Sb,ge.Simple=oC;var _s=R.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[d(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[d(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var u=l.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var f=this.getEvents();u.on(f,this),this.once("remove",function(){u.off(f,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});He.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var u=d(l);return this._layers[u]?this:(this._layers[u]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var u=d(l);return this._layers[u]?(this._loaded&&l.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return d(l)in this._layers},eachLayer:function(l,u){for(var f in this._layers)l.call(u,this._layers[f]);return this},_addLayers:function(l){l=l?N(l)?l:[l]:[];for(var u=0,f=l.length;u<f;u++)this.addLayer(l[u])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[d(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var u=d(l);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,u=-1/0,f=this._getZoomSpan();for(var b in this._zoomBoundLayers){var _=this._zoomBoundLayers[b].options;l=_.minZoom===void 0?l:Math.min(l,_.minZoom),u=_.maxZoom===void 0?u:Math.max(u,_.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=l===1/0?void 0:l,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ti=_s.extend({initialize:function(l,u){w(this,u),this._layers={};var f,b;if(l)for(f=0,b=l.length;f<b;f++)this.addLayer(l[f])},addLayer:function(l){var u=this.getLayerId(l);return this._layers[u]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var u=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(l){var u=typeof l=="number"?l:this.getLayerId(l);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var u=Array.prototype.slice.call(arguments,1),f,b;for(f in this._layers)b=this._layers[f],b[l]&&b[l].apply(b,u);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,u){for(var f in this._layers)l.call(u,this._layers[f]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return d(l)}}),lC=function(l,u){return new Ti(l,u)},yn=Ti.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Ti.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Ti.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ne;for(var u in this._layers){var f=this._layers[u];l.extend(f.getBounds?f.getBounds():f.getLatLng())}return l}}),cC=function(l,u){return new yn(l,u)},Ii=W.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){w(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,u){var f=this._getIconUrl(l);if(!f){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var b=this._createImg(f,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(b,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(b.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),b},_setIconStyles:function(l,u){var f=this.options,b=f[u+"Size"];typeof b=="number"&&(b=[b,b]);var _=Q(b),A=Q(u==="shadow"&&f.shadowAnchor||f.iconAnchor||_&&_.divideBy(2,!0));l.className="leaflet-marker-"+u+" "+(f.className||""),A&&(l.style.marginLeft=-A.x+"px",l.style.marginTop=-A.y+"px"),_&&(l.style.width=_.x+"px",l.style.height=_.y+"px")},_createImg:function(l,u){return u=u||document.createElement("img"),u.src=l,u},_getIconUrl:function(l){return Ee.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function dC(l){return new Ii(l)}var Qo=Ii.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Qo.imagePath!="string"&&(Qo.imagePath=this._detectIconPath()),(this.options.imagePath||Qo.imagePath)+Ii.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var u=function(f,b,_){var A=b.exec(f);return A&&A[_]};return l=u(l,/^url\((['"])?(.+)\1\)$/,2),l&&u(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Ze("div","leaflet-default-icon-path",document.body),u=qo(l,"background-image")||qo(l,"backgroundImage");if(document.body.removeChild(l),u=this._stripUrl(u),u)return u;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),Cb=Us.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Zn(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Oe(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ct(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var u=this._marker,f=u._map,b=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,A=$a(u._icon),U=f.getPixelBounds(),te=f.getPixelOrigin(),re=V(U.min._subtract(te).add(_),U.max._subtract(te).subtract(_));if(!re.contains(A)){var oe=Q((Math.max(re.max.x,A.x)-re.max.x)/(U.max.x-re.max.x)-(Math.min(re.min.x,A.x)-re.min.x)/(U.min.x-re.min.x),(Math.max(re.max.y,A.y)-re.max.y)/(U.max.y-re.max.y)-(Math.min(re.min.y,A.y)-re.min.y)/(U.min.y-re.min.y)).multiplyBy(b);f.panBy(oe,{animate:!1}),this._draggable._newPos._add(oe),this._draggable._startPos._add(oe),It(u._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=J(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=J(this._adjustPan.bind(this,l)))},_onDrag:function(l){var u=this._marker,f=u._shadow,b=$a(u._icon),_=u._map.layerPointToLatLng(b);f&&It(f,b),u._latlng=_,l.latlng=_,l.oldLatLng=this._oldLatLng,u.fire("move",l).fire("drag",l)},_onDragEnd:function(l){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),gd=_s.extend({options:{icon:new Qo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,u){w(this,u),this._latlng=z(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var u=this._latlng;return this._latlng=z(l),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=l.icon.createIcon(this._icon),b=!1;f!==this._icon&&(this._icon&&this._removeIcon(),b=!0,l.title&&(f.title=l.title),f.tagName==="IMG"&&(f.alt=l.alt||"")),Oe(f,u),l.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ie(f,"focus",this._panOnFocus,this);var _=l.icon.createShadow(this._shadow),A=!1;_!==this._shadow&&(this._removeShadow(),A=!0),_&&(Oe(_,u),_.alt=""),this._shadow=_,l.opacity<1&&this._updateOpacity(),b&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&A&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&dt(this._icon,"focus",this._panOnFocus,this),kt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&kt(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&It(this._icon,l),this._shadow&&It(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Oe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cb)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cb(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&as(this._icon,l),this._shadow&&as(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var u=this.options.icon.options,f=u.iconSize?Q(u.iconSize):Q(0,0),b=u.iconAnchor?Q(u.iconAnchor):Q(0,0);l.panInside(this._latlng,{paddingTopLeft:b,paddingBottomRight:f.subtract(b)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function uC(l,u){return new gd(l,u)}var Gn=_s.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return w(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),pd=Gn.extend({options:{fill:!0,radius:10},initialize:function(l,u){w(this,u),this._latlng=z(l),this._radius=this.options.radius},setLatLng:function(l){var u=this._latlng;return this._latlng=z(l),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var u=l&&l.radius||this._radius;return Gn.prototype.setStyle.call(this,l),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,u=this._radiusY||l,f=this._clickTolerance(),b=[l+f,u+f];this._pxBounds=new le(this._point.subtract(b),this._point.add(b))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function hC(l,u){return new pd(l,u)}var Ff=pd.extend({initialize:function(l,u,f){if(typeof u=="number"&&(u=a({},f,{radius:u})),w(this,u),this._latlng=z(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ne(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Gn.prototype.setStyle,_project:function(){var l=this._latlng.lng,u=this._latlng.lat,f=this._map,b=f.options.crs;if(b.distance===Me.distance){var _=Math.PI/180,A=this._mRadius/Me.R/_,U=f.project([u+A,l]),te=f.project([u-A,l]),re=U.add(te).divideBy(2),oe=f.unproject(re).lat,we=Math.acos((Math.cos(A*_)-Math.sin(u*_)*Math.sin(oe*_))/(Math.cos(u*_)*Math.cos(oe*_)))/_;(isNaN(we)||we===0)&&(we=A/Math.cos(Math.PI/180*u)),this._point=re.subtract(f.getPixelOrigin()),this._radius=isNaN(we)?0:re.x-f.project([oe,l-we]).x,this._radiusY=re.y-U.y}else{var Le=b.unproject(b.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Le).x}this._updateBounds()}});function mC(l,u,f){return new Ff(l,u,f)}var bn=Gn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,u){w(this,u),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var u=1/0,f=null,b=Xo,_,A,U=0,te=this._parts.length;U<te;U++)for(var re=this._parts[U],oe=1,we=re.length;oe<we;oe++){_=re[oe-1],A=re[oe];var Le=b(l,_,A,!0);Le<u&&(u=Le,f=b(l,_,A))}return f&&(f.distance=Math.sqrt(u)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _b(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,u){return u=u||this._defaultShape(),l=z(l),u.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ne,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return is(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var u=[],f=is(l),b=0,_=l.length;b<_;b++)f?(u[b]=z(l[b]),this._bounds.extend(u[b])):u[b]=this._convertLatLngs(l[b]);return u},_project:function(){var l=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),u=new O(l,l);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(l,u,f){var b=l[0]instanceof ye,_=l.length,A,U;if(b){for(U=[],A=0;A<_;A++)U[A]=this._map.latLngToLayerPoint(l[A]),f.extend(U[A]);u.push(U)}else for(A=0;A<_;A++)this._projectLatlngs(l[A],u,f)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,f,b,_,A,U,te,re;for(f=0,_=0,A=this._rings.length;f<A;f++)for(re=this._rings[f],b=0,U=re.length;b<U-1;b++)te=jb(re[b],re[b+1],l,b,!0),te&&(u[_]=u[_]||[],u[_].push(te[0]),(te[1]!==re[b+1]||b===U-2)&&(u[_].push(te[1]),_++))}},_simplifyPoints:function(){for(var l=this._parts,u=this.options.smoothFactor,f=0,b=l.length;f<b;f++)l[f]=vb(l[f],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,u){var f,b,_,A,U,te,re=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(f=0,A=this._parts.length;f<A;f++)for(te=this._parts[f],b=0,U=te.length,_=U-1;b<U;_=b++)if(!(!u&&b===0)&&wb(l,te[_],te[b])<=re)return!0;return!1}});function fC(l,u){return new bn(l,u)}bn._flat=Nb;var Ai=bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return bb(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var u=bn.prototype._convertLatLngs.call(this,l),f=u.length;return f>=2&&u[0]instanceof ye&&u[0].equals(u[f-1])&&u.pop(),u},_setLatLngs:function(l){bn.prototype._setLatLngs.call(this,l),is(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return is(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,u=this.options.weight,f=new O(u,u);if(l=new le(l.min.subtract(f),l.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var b=0,_=this._rings.length,A;b<_;b++)A=yb(this._rings[b],l,!0),A.length&&this._parts.push(A)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var u=!1,f,b,_,A,U,te,re,oe;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(A=0,re=this._parts.length;A<re;A++)for(f=this._parts[A],U=0,oe=f.length,te=oe-1;U<oe;te=U++)b=f[U],_=f[te],b.y>l.y!=_.y>l.y&&l.x<(_.x-b.x)*(l.y-b.y)/(_.y-b.y)+b.x&&(u=!u);return u||bn.prototype._containsPoint.call(this,l,!0)}});function gC(l,u){return new Ai(l,u)}var vn=yn.extend({initialize:function(l,u){w(this,u),this._layers={},l&&this.addData(l)},addData:function(l){var u=N(l)?l:l.features,f,b,_;if(u){for(f=0,b=u.length;f<b;f++)_=u[f],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var A=this.options;if(A.filter&&!A.filter(l))return this;var U=xd(l,A);return U?(U.feature=vd(l),U.defaultOptions=U.options,this.resetStyle(U),A.onEachFeature&&A.onEachFeature(l,U),this.addLayer(U)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=a({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(u){this._setLayerStyle(u,l)},this)},_setLayerStyle:function(l,u){l.setStyle&&(typeof u=="function"&&(u=u(l.feature)),l.setStyle(u))}});function xd(l,u){var f=l.type==="Feature"?l.geometry:l,b=f?f.coordinates:null,_=[],A=u&&u.pointToLayer,U=u&&u.coordsToLatLng||zf,te,re,oe,we;if(!b&&!f)return null;switch(f.type){case"Point":return te=U(b),Pb(A,l,te,u);case"MultiPoint":for(oe=0,we=b.length;oe<we;oe++)te=U(b[oe]),_.push(Pb(A,l,te,u));return new yn(_);case"LineString":case"MultiLineString":return re=yd(b,f.type==="LineString"?0:1,U),new bn(re,u);case"Polygon":case"MultiPolygon":return re=yd(b,f.type==="Polygon"?1:2,U),new Ai(re,u);case"GeometryCollection":for(oe=0,we=f.geometries.length;oe<we;oe++){var Le=xd({geometry:f.geometries[oe],type:"Feature",properties:l.properties},u);Le&&_.push(Le)}return new yn(_);case"FeatureCollection":for(oe=0,we=f.features.length;oe<we;oe++){var ze=xd(f.features[oe],u);ze&&_.push(ze)}return new yn(_);default:throw new Error("Invalid GeoJSON object.")}}function Pb(l,u,f,b){return l?l(u,f):new gd(f,b&&b.markersInheritOptions&&b)}function zf(l){return new ye(l[1],l[0],l[2])}function yd(l,u,f){for(var b=[],_=0,A=l.length,U;_<A;_++)U=u?yd(l[_],u-1,f):(f||zf)(l[_]),b.push(U);return b}function Bf(l,u){return l=z(l),l.alt!==void 0?[p(l.lng,u),p(l.lat,u),p(l.alt,u)]:[p(l.lng,u),p(l.lat,u)]}function bd(l,u,f,b){for(var _=[],A=0,U=l.length;A<U;A++)_.push(u?bd(l[A],is(l[A])?0:u-1,f,b):Bf(l[A],b));return!u&&f&&_.length>0&&_.push(_[0].slice()),_}function Mi(l,u){return l.feature?a({},l.feature,{geometry:u}):vd(u)}function vd(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var $f={toGeoJSON:function(l){return Mi(this,{type:"Point",coordinates:Bf(this.getLatLng(),l)})}};gd.include($f),Ff.include($f),pd.include($f),bn.include({toGeoJSON:function(l){var u=!is(this._latlngs),f=bd(this._latlngs,u?1:0,!1,l);return Mi(this,{type:(u?"Multi":"")+"LineString",coordinates:f})}}),Ai.include({toGeoJSON:function(l){var u=!is(this._latlngs),f=u&&!is(this._latlngs[0]),b=bd(this._latlngs,f?2:u?1:0,!0,l);return u||(b=[b]),Mi(this,{type:(f?"Multi":"")+"Polygon",coordinates:b})}}),Ti.include({toMultiPoint:function(l){var u=[];return this.eachLayer(function(f){u.push(f.toGeoJSON(l).geometry.coordinates)}),Mi(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(l){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(l);var f=u==="GeometryCollection",b=[];return this.eachLayer(function(_){if(_.toGeoJSON){var A=_.toGeoJSON(l);if(f)b.push(A.geometry);else{var U=vd(A);U.type==="FeatureCollection"?b.push.apply(b,U.features):b.push(U)}}}),f?Mi(this,{geometries:b,type:"GeometryCollection"}):{type:"FeatureCollection",features:b}}});function Eb(l,u){return new vn(l,u)}var pC=Eb,wd=_s.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,u,f){this._url=l,this._bounds=pe(u),w(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Oe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){kt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Ei(this._image),this},bringToBack:function(){return this._map&&Li(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=pe(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",u=this._image=l?this._url:Ze("img");if(Oe(u,"leaflet-image-layer"),this._zoomAnimated&&Oe(u,"leaflet-zoom-animated"),this.options.className&&Oe(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onload=o(this.fire,this,"load"),u.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(l){var u=this._map.getZoomScale(l.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Ba(this._image,f,u)},_reset:function(){var l=this._image,u=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=u.getSize();It(l,u.min),l.style.width=f.x+"px",l.style.height=f.y+"px"},_updateOpacity:function(){as(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),xC=function(l,u,f){return new wd(l,u,f)},Lb=wd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",u=this._image=l?this._url:Ze("video");if(Oe(u,"leaflet-image-layer"),this._zoomAnimated&&Oe(u,"leaflet-zoom-animated"),this.options.className&&Oe(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onloadeddata=o(this.fire,this,"load"),l){for(var f=u.getElementsByTagName("source"),b=[],_=0;_<f.length;_++)b.push(f[_].src);this._url=f.length>0?b:[u.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var A=0;A<this._url.length;A++){var U=Ze("source");U.src=this._url[A],u.appendChild(U)}}});function yC(l,u,f){return new Lb(l,u,f)}var Tb=wd.extend({_initImage:function(){var l=this._image=this._url;Oe(l,"leaflet-image-layer"),this._zoomAnimated&&Oe(l,"leaflet-zoom-animated"),this.options.className&&Oe(l,this.options.className),l.onselectstart=g,l.onmousemove=g}});function bC(l,u,f){return new Tb(l,u,f)}var Vs=_s.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,u){l&&(l instanceof ye||N(l))?(this._latlng=z(l),w(this,u)):(w(this,l),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&as(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&as(this._container,1),this.bringToFront(),this.options.interactive&&(Oe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(as(this._container,0),this._removeTimeout=setTimeout(o(kt,void 0,this._container),200)):kt(this._container),this.options.interactive&&(Ct(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=z(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ei(this._container),this},bringToBack:function(){return this._map&&Li(this._container),this},_prepareOpen:function(l){var u=this._source;if(!u._map)return!1;if(u instanceof yn){u=null;var f=this._source._layers;for(var b in f)if(f[b]._map){u=f[b];break}if(!u)return!1;this._source=u}if(!l)if(u.getCenter)l=u.getCenter();else if(u.getLatLng)l=u.getLatLng();else if(u.getBounds)l=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")l.innerHTML=u;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),u=Q(this.options.offset),f=this._getAnchor();this._zoomAnimated?It(this._container,l.add(f)):u=u.add(l).add(f);var b=this._containerBottom=-u.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=b+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});He.include({_initOverlay:function(l,u,f,b){var _=u;return _ instanceof l||(_=new l(b).setContent(u)),f&&_.setLatLng(f),_}}),_s.include({_initOverlay:function(l,u,f,b){var _=f;return _ instanceof l?(w(_,b),_._source=this):(_=u&&!b?u:new l(b,this),_.setContent(f)),_}});var kd=Vs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Vs.prototype.openOn.call(this,l)},onAdd:function(l){Vs.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gn||this._source.on("preclick",Ua))},onRemove:function(l){Vs.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gn||this._source.off("preclick",Ua))},getEvents:function(){var l=Vs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",u=this._container=Ze("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=Ze("div",l+"-content-wrapper",u);if(this._contentNode=Ze("div",l+"-content",f),Yo(u),Lf(this._contentNode),Ie(u,"contextmenu",Ua),this._tipContainer=Ze("div",l+"-tip-container",u),this._tip=Ze("div",l+"-tip",this._tipContainer),this.options.closeButton){var b=this._closeButton=Ze("a",l+"-close-button",u);b.setAttribute("role","button"),b.setAttribute("aria-label","Close popup"),b.href="#close",b.innerHTML='<span aria-hidden="true">&#215;</span>',Ie(b,"click",function(_){Jt(_),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,u=l.style;u.width="",u.whiteSpace="nowrap";var f=l.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),u.width=f+1+"px",u.whiteSpace="",u.height="";var b=l.offsetHeight,_=this.options.maxHeight,A="leaflet-popup-scrolled";_&&b>_?(u.height=_+"px",Oe(l,A)):Ct(l,A),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),f=this._getAnchor();It(this._container,u.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,u=parseInt(qo(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+u,b=this._containerWidth,_=new O(this._containerLeft,-f-this._containerBottom);_._add($a(this._container));var A=l.layerPointToContainerPoint(_),U=Q(this.options.autoPanPadding),te=Q(this.options.autoPanPaddingTopLeft||U),re=Q(this.options.autoPanPaddingBottomRight||U),oe=l.getSize(),we=0,Le=0;A.x+b+re.x>oe.x&&(we=A.x+b-oe.x+re.x),A.x-we-te.x<0&&(we=A.x-te.x),A.y+f+re.y>oe.y&&(Le=A.y+f-oe.y+re.y),A.y-Le-te.y<0&&(Le=A.y-te.y),(we||Le)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([we,Le]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vC=function(l,u){return new kd(l,u)};He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(l,u,f){return this._initOverlay(kd,l,u,f).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),_s.include({bindPopup:function(l,u){return this._popup=this._initOverlay(kd,this._popup,l,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof yn||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){Va(l);var u=l.layer||l.target;if(this._popup._source===u&&!(u instanceof Gn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=u,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var jd=Vs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Vs.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Vs.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Vs.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",u=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ze("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var u,f,b=this._map,_=this._container,A=b.latLngToContainerPoint(b.getCenter()),U=b.layerPointToContainerPoint(l),te=this.options.direction,re=_.offsetWidth,oe=_.offsetHeight,we=Q(this.options.offset),Le=this._getAnchor();te==="top"?(u=re/2,f=oe):te==="bottom"?(u=re/2,f=0):te==="center"?(u=re/2,f=oe/2):te==="right"?(u=0,f=oe/2):te==="left"?(u=re,f=oe/2):U.x<A.x?(te="right",u=0,f=oe/2):(te="left",u=re+(we.x+Le.x)*2,f=oe/2),l=l.subtract(Q(u,f,!0)).add(we).add(Le),Ct(_,"leaflet-tooltip-right"),Ct(_,"leaflet-tooltip-left"),Ct(_,"leaflet-tooltip-top"),Ct(_,"leaflet-tooltip-bottom"),Oe(_,"leaflet-tooltip-"+te),It(_,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&as(this._container,l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(u)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),wC=function(l,u){return new jd(l,u)};He.include({openTooltip:function(l,u,f){return this._initOverlay(jd,l,u,f).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),_s.include({bindTooltip:function(l,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(jd,this._tooltip,l,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var u=l?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[u](f),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof yn||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&(Ie(u,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Ie(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var u=l.latlng,f,b;this._tooltip.options.sticky&&l.originalEvent&&(f=this._map.mouseEventToContainerPoint(l.originalEvent),b=this._map.containerPointToLayerPoint(f),u=this._map.layerPointToLatLng(b)),this._tooltip.setLatLng(u)}});var Ib=Ii.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var u=l&&l.tagName==="DIV"?l:document.createElement("div"),f=this.options;if(f.html instanceof Element?(cd(u),u.appendChild(f.html)):u.innerHTML=f.html!==!1?f.html:"",f.bgPos){var b=Q(f.bgPos);u.style.backgroundPosition=-b.x+"px "+-b.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function kC(l){return new Ib(l)}Ii.Default=Qo;var el=_s.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ee.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){w(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),kt(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ei(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Li(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof O?l:new O(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var u=this.getPane().children,f=-l(-1/0,1/0),b=0,_=u.length,A;b<_;b++)A=u[b].style.zIndex,u[b]!==this._container&&A&&(f=l(f,+A));isFinite(f)&&(this.options.zIndex=f+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ee.ielt9){as(this._container,this.options.opacity);var l=+new Date,u=!1,f=!1;for(var b in this._tiles){var _=this._tiles[b];if(!(!_.current||!_.loaded)){var A=Math.min(1,(l-_.loaded)/200);as(_.el,A),A<1?u=!0:(_.active?f=!0:this._onOpaqueTile(_),_.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),u&&($(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ze("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,u=this.options.maxZoom;if(l!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===l?(this._levels[f].el.style.zIndex=u-Math.abs(l-f),this._onUpdateLevel(f)):(kt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var b=this._levels[l],_=this._map;return b||(b=this._levels[l]={},b.el=Ze("div","leaflet-tile-container leaflet-zoom-animated",this._container),b.el.style.zIndex=u,b.origin=_.project(_.unproject(_.getPixelOrigin()),l).round(),b.zoom=l,this._setZoomTransform(b,_.getCenter(),_.getZoom()),g(b.el.offsetWidth),this._onCreateLevel(b)),this._level=b,b}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var l,u,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)u=this._tiles[l],u.retain=u.current;for(l in this._tiles)if(u=this._tiles[l],u.current&&!u.active){var b=u.coords;this._retainParent(b.x,b.y,b.z,b.z-5)||this._retainChildren(b.x,b.y,b.z,b.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var u in this._tiles)this._tiles[u].coords.z===l&&this._removeTile(u)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)kt(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,u,f,b){var _=Math.floor(l/2),A=Math.floor(u/2),U=f-1,te=new O(+_,+A);te.z=+U;var re=this._tileCoordsToKey(te),oe=this._tiles[re];return oe&&oe.active?(oe.retain=!0,!0):(oe&&oe.loaded&&(oe.retain=!0),U>b?this._retainParent(_,A,U,b):!1)},_retainChildren:function(l,u,f,b){for(var _=2*l;_<2*l+2;_++)for(var A=2*u;A<2*u+2;A++){var U=new O(_,A);U.z=f+1;var te=this._tileCoordsToKey(U),re=this._tiles[te];if(re&&re.active){re.retain=!0;continue}else re&&re.loaded&&(re.retain=!0);f+1<b&&this._retainChildren(_,A,f+1,b)}},_resetView:function(l){var u=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var u=this.options;return u.minNativeZoom!==void 0&&l<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<l?u.maxNativeZoom:l},_setView:function(l,u,f,b){var _=Math.round(u);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var A=this.options.updateWhenZooming&&_!==this._tileZoom;(!b||A)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(l),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(l,u)},_setZoomTransforms:function(l,u){for(var f in this._levels)this._setZoomTransform(this._levels[f],l,u)},_setZoomTransform:function(l,u,f){var b=this._map.getZoomScale(f,l.zoom),_=l.origin.multiplyBy(b).subtract(this._map._getNewPixelOrigin(u,f)).round();Ee.any3d?Ba(l.el,_,b):It(l.el,_)},_resetGrid:function(){var l=this._map,u=l.options.crs,f=this._tileSize=this.getTileSize(),b=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,u.wrapLng[0]],b).x/f.x),Math.ceil(l.project([0,u.wrapLng[1]],b).x/f.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([u.wrapLat[0],0],b).y/f.x),Math.ceil(l.project([u.wrapLat[1],0],b).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var u=this._map,f=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),b=u.getZoomScale(f,this._tileZoom),_=u.project(l,this._tileZoom).floor(),A=u.getSize().divideBy(b*2);return new le(_.subtract(A),_.add(A))},_update:function(l){var u=this._map;if(u){var f=this._clampZoom(u.getZoom());if(l===void 0&&(l=u.getCenter()),this._tileZoom!==void 0){var b=this._getTiledPixelBounds(l),_=this._pxBoundsToTileRange(b),A=_.getCenter(),U=[],te=this.options.keepBuffer,re=new le(_.getBottomLeft().subtract([te,-te]),_.getTopRight().add([te,-te]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var oe in this._tiles){var we=this._tiles[oe].coords;(we.z!==this._tileZoom||!re.contains(new O(we.x,we.y)))&&(this._tiles[oe].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(l,f);return}for(var Le=_.min.y;Le<=_.max.y;Le++)for(var ze=_.min.x;ze<=_.max.x;ze++){var br=new O(ze,Le);if(br.z=this._tileZoom,!!this._isValidTile(br)){var qt=this._tiles[this._tileCoordsToKey(br)];qt?qt.current=!0:U.push(br)}}if(U.sort(function(Er,Ri){return Er.distanceTo(A)-Ri.distanceTo(A)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var os=document.createDocumentFragment();for(ze=0;ze<U.length;ze++)this._addTile(U[ze],os);this._level.el.appendChild(os)}}}},_isValidTile:function(l){var u=this._map.options.crs;if(!u.infinite){var f=this._globalTileRange;if(!u.wrapLng&&(l.x<f.min.x||l.x>f.max.x)||!u.wrapLat&&(l.y<f.min.y||l.y>f.max.y))return!1}if(!this.options.bounds)return!0;var b=this._tileCoordsToBounds(l);return pe(this.options.bounds).overlaps(b)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var u=this._map,f=this.getTileSize(),b=l.scaleBy(f),_=b.add(f),A=u.unproject(b,l.z),U=u.unproject(_,l.z);return[A,U]},_tileCoordsToBounds:function(l){var u=this._tileCoordsToNwSe(l),f=new ne(u[0],u[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var u=l.split(":"),f=new O(+u[0],+u[1]);return f.z=+u[2],f},_removeTile:function(l){var u=this._tiles[l];u&&(kt(u.el),delete this._tiles[l],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Oe(l,"leaflet-tile");var u=this.getTileSize();l.style.width=u.x+"px",l.style.height=u.y+"px",l.onselectstart=g,l.onmousemove=g,Ee.ielt9&&this.options.opacity<1&&as(l,this.options.opacity)},_addTile:function(l,u){var f=this._getTilePos(l),b=this._tileCoordsToKey(l),_=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(_),this.createTile.length<2&&J(o(this._tileReady,this,l,null,_)),It(_,f),this._tiles[b]={el:_,coords:l,current:!0},u.appendChild(_),this.fire("tileloadstart",{tile:_,coords:l})},_tileReady:function(l,u,f){u&&this.fire("tileerror",{error:u,tile:f,coords:l});var b=this._tileCoordsToKey(l);f=this._tiles[b],f&&(f.loaded=+new Date,this._map._fadeAnimated?(as(f.el,0),$(this._fadeFrame),this._fadeFrame=J(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),u||(Oe(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ee.ielt9||!this._map._fadeAnimated?J(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var u=new O(this._wrapX?m(l.x,this._wrapX):l.x,this._wrapY?m(l.y,this._wrapY):l.y);return u.z=l.z,u},_pxBoundsToTileRange:function(l){var u=this.getTileSize();return new le(l.min.unscaleBy(u).floor(),l.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function jC(l){return new el(l)}var Oi=el.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,u){this._url=l,u=w(this,u),u.detectRetina&&Ee.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,u){return this._url===l&&u===void 0&&(u=!0),this._url=l,u||this.redraw(),this},createTile:function(l,u){var f=document.createElement("img");return Ie(f,"load",o(this._tileOnLoad,this,u,f)),Ie(f,"error",o(this._tileOnError,this,u,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(l),f},getTileUrl:function(l){var u={r:Ee.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-l.y;this.options.tms&&(u.y=f),u["-y"]=f}return j(this._url,a(u,this.options))},_tileOnLoad:function(l,u){Ee.ielt9?setTimeout(o(l,this,null,u),0):l(null,u)},_tileOnError:function(l,u,f){var b=this.options.errorTileUrl;b&&u.getAttribute("src")!==b&&(u.src=b),l(f,u)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,u=this.options.maxZoom,f=this.options.zoomReverse,b=this.options.zoomOffset;return f&&(l=u-l),l+b},_getSubdomain:function(l){var u=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var l,u;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(u=this._tiles[l].el,u.onload=g,u.onerror=g,!u.complete)){u.src=P;var f=this._tiles[l].coords;kt(u),delete this._tiles[l],this.fire("tileabort",{tile:u,coords:f})}},_removeTile:function(l){var u=this._tiles[l];if(u)return u.el.setAttribute("src",P),el.prototype._removeTile.call(this,l)},_tileReady:function(l,u,f){if(!(!this._map||f&&f.getAttribute("src")===P))return el.prototype._tileReady.call(this,l,u,f)}});function Ab(l,u){return new Oi(l,u)}var Mb=Oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,u){this._url=l;var f=a({},this.defaultWmsParams);for(var b in u)b in this.options||(f[b]=u[b]);u=w(this,u);var _=u.detectRetina&&Ee.retina?2:1,A=this.getTileSize();f.width=A.x*_,f.height=A.y*_,this.wmsParams=f},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Oi.prototype.onAdd.call(this,l)},getTileUrl:function(l){var u=this._tileCoordsToNwSe(l),f=this._crs,b=V(f.project(u[0]),f.project(u[1])),_=b.min,A=b.max,U=(this._wmsVersion>=1.3&&this._crs===Sb?[_.y,_.x,A.y,A.x]:[_.x,_.y,A.x,A.y]).join(","),te=Oi.prototype.getTileUrl.call(this,l);return te+y(this.wmsParams,te,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(l,u){return a(this.wmsParams,l),u||this.redraw(),this}});function NC(l,u){return new Mb(l,u)}Oi.WMS=Mb,Ab.wms=NC;var wn=_s.extend({options:{padding:.1},initialize:function(l){w(this,l),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Oe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,u){var f=this._map.getZoomScale(u,this._zoom),b=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,u),A=b.multiplyBy(-f).add(_).subtract(this._map._getNewPixelOrigin(l,u));Ee.any3d?Ba(this._container,A,f):It(this._container,A)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,u=this._map.getSize(),f=this._map.containerPointToLayerPoint(u.multiplyBy(-l)).round();this._bounds=new le(f,f.add(u.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ob=wn.extend({options:{tolerance:0},getEvents:function(){var l=wn.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){wn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Ie(l,"mousemove",this._onMouseMove,this),Ie(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ie(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,kt(this._container),dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var u in this._layers)l=this._layers[u],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var l=this._bounds,u=this._container,f=l.getSize(),b=Ee.retina?2:1;It(u,l.min),u.width=b*f.x,u.height=b*f.y,u.style.width=f.x+"px",u.style.height=f.y+"px",Ee.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){wn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[d(l)]=l;var u=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var u=l._order,f=u.next,b=u.prev;f?f.prev=b:this._drawLast=b,b?b.next=f:this._drawFirst=f,delete l._order,delete this._layers[d(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var u=l.options.dashArray.split(/[, ]+/),f=[],b,_;for(_=0;_<u.length;_++){if(b=Number(u[_]),isNaN(b))return;f.push(b)}l.options._dashArray=f}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||J(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var u=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(l._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(l._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var u=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,u=this._redrawBounds;if(this._ctx.save(),u){var f=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var b=this._drawFirst;b;b=b.next)l=b.layer,(!u||l._pxBounds&&l._pxBounds.intersects(u))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,u){if(this._drawing){var f,b,_,A,U=l._parts,te=U.length,re=this._ctx;if(te){for(re.beginPath(),f=0;f<te;f++){for(b=0,_=U[f].length;b<_;b++)A=U[f][b],re[b?"lineTo":"moveTo"](A.x,A.y);u&&re.closePath()}this._fillStroke(re,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var u=l._point,f=this._ctx,b=Math.max(Math.round(l._radius),1),_=(Math.max(Math.round(l._radiusY),1)||b)/b;_!==1&&(f.save(),f.scale(1,_)),f.beginPath(),f.arc(u.x,u.y/_,b,0,Math.PI*2,!1),_!==1&&f.restore(),this._fillStroke(f,l)}},_fillStroke:function(l,u){var f=u.options;f.fill&&(l.globalAlpha=f.fillOpacity,l.fillStyle=f.fillColor||f.color,l.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(l.setLineDash&&l.setLineDash(u.options&&u.options._dashArray||[]),l.globalAlpha=f.opacity,l.lineWidth=f.weight,l.strokeStyle=f.color,l.lineCap=f.lineCap,l.lineJoin=f.lineJoin,l.stroke())},_onClick:function(l){for(var u=this._map.mouseEventToLayerPoint(l),f,b,_=this._drawFirst;_;_=_.next)f=_.layer,f.options.interactive&&f._containsPoint(u)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(f))&&(b=f);this._fireEvent(b?[b]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,u)}},_handleMouseOut:function(l){var u=this._hoveredLayer;u&&(Ct(this._container,"leaflet-interactive"),this._fireEvent([u],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,u){if(!this._mouseHoverThrottled){for(var f,b,_=this._drawFirst;_;_=_.next)f=_.layer,f.options.interactive&&f._containsPoint(u)&&(b=f);b!==this._hoveredLayer&&(this._handleMouseOut(l),b&&(Oe(this._container,"leaflet-interactive"),this._fireEvent([b],l,"mouseover"),this._hoveredLayer=b)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,u,f){this._map._fireDOMEvent(u,f||u.type,l)},_bringToFront:function(l){var u=l._order;if(u){var f=u.next,b=u.prev;if(f)f.prev=b;else return;b?b.next=f:f&&(this._drawFirst=f),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(l)}},_bringToBack:function(l){var u=l._order;if(u){var f=u.next,b=u.prev;if(b)b.next=f;else return;f?f.prev=b:b&&(this._drawLast=b),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(l)}}});function Rb(l){return Ee.canvas?new Ob(l):null}var tl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),_C={_initContainer:function(){this._container=Ze("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(wn.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var u=l._container=tl("shape");Oe(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",l._path=tl("path"),u.appendChild(l._path),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){var u=l._container;this._container.appendChild(u),l.options.interactive&&l.addInteractiveTarget(u)},_removePath:function(l){var u=l._container;kt(u),l.removeInteractiveTarget(u),delete this._layers[d(l)]},_updateStyle:function(l){var u=l._stroke,f=l._fill,b=l.options,_=l._container;_.stroked=!!b.stroke,_.filled=!!b.fill,b.stroke?(u||(u=l._stroke=tl("stroke")),_.appendChild(u),u.weight=b.weight+"px",u.color=b.color,u.opacity=b.opacity,b.dashArray?u.dashStyle=N(b.dashArray)?b.dashArray.join(" "):b.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=b.lineCap.replace("butt","flat"),u.joinstyle=b.lineJoin):u&&(_.removeChild(u),l._stroke=null),b.fill?(f||(f=l._fill=tl("fill")),_.appendChild(f),f.color=b.fillColor||b.color,f.opacity=b.fillOpacity):f&&(_.removeChild(f),l._fill=null)},_updateCircle:function(l){var u=l._point.round(),f=Math.round(l._radius),b=Math.round(l._radiusY||f);this._setPath(l,l._empty()?"M0 0":"AL "+u.x+","+u.y+" "+f+","+b+" 0,"+65535*360)},_setPath:function(l,u){l._path.v=u},_bringToFront:function(l){Ei(l._container)},_bringToBack:function(l){Li(l._container)}},Nd=Ee.vml?tl:Ye,rl=wn.extend({_initContainer:function(){this._container=Nd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Nd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){kt(this._container),dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){wn.prototype._update.call(this);var l=this._bounds,u=l.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,f.setAttribute("width",u.x),f.setAttribute("height",u.y)),It(f,l.min),f.setAttribute("viewBox",[l.min.x,l.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(l){var u=l._path=Nd("path");l.options.className&&Oe(u,l.options.className),l.options.interactive&&Oe(u,"leaflet-interactive"),this._updateStyle(l),this._layers[d(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){kt(l._path),l.removeInteractiveTarget(l._path),delete this._layers[d(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var u=l._path,f=l.options;u&&(f.stroke?(u.setAttribute("stroke",f.color),u.setAttribute("stroke-opacity",f.opacity),u.setAttribute("stroke-width",f.weight),u.setAttribute("stroke-linecap",f.lineCap),u.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?u.setAttribute("stroke-dasharray",f.dashArray):u.removeAttribute("stroke-dasharray"),f.dashOffset?u.setAttribute("stroke-dashoffset",f.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),f.fill?(u.setAttribute("fill",f.fillColor||f.color),u.setAttribute("fill-opacity",f.fillOpacity),u.setAttribute("fill-rule",f.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(l,u){this._setPath(l,Je(l._parts,u))},_updateCircle:function(l){var u=l._point,f=Math.max(Math.round(l._radius),1),b=Math.max(Math.round(l._radiusY),1)||f,_="a"+f+","+b+" 0 1,0 ",A=l._empty()?"M0 0":"M"+(u.x-f)+","+u.y+_+f*2+",0 "+_+-f*2+",0 ";this._setPath(l,A)},_setPath:function(l,u){l._path.setAttribute("d",u)},_bringToFront:function(l){Ei(l._path)},_bringToBack:function(l){Li(l._path)}});Ee.vml&&rl.include(_C);function Db(l){return Ee.svg||Ee.vml?new rl(l):null}He.include({getRenderer:function(l){var u=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var u=this._paneRenderers[l];return u===void 0&&(u=this._createRenderer({pane:l}),this._paneRenderers[l]=u),u},_createRenderer:function(l){return this.options.preferCanvas&&Rb(l)||Db(l)}});var Fb=Ai.extend({initialize:function(l,u){Ai.prototype.initialize.call(this,this._boundsToLatLngs(l),u)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=pe(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function SC(l,u){return new Fb(l,u)}rl.create=Nd,rl.pointsToPath=Je,vn.geometryToLayer=xd,vn.coordsToLatLng=zf,vn.coordsToLatLngs=yd,vn.latLngToCoords=Bf,vn.latLngsToCoords=bd,vn.getFeature=Mi,vn.asFeature=vd,He.mergeOptions({boxZoom:!0});var zb=Us.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Ie(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){kt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ko(),kf(),this._startPoint=this._map.mouseEventToContainerPoint(l),Ie(document,{contextmenu:Va,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Ze("div","leaflet-zoom-box",this._container),Oe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var u=new le(this._point,this._startPoint),f=u.getSize();It(this._box,u.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(kt(this._box),Ct(this._container,"leaflet-crosshair")),Zo(),jf(),dt(document,{contextmenu:Va,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var u=new ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});He.addInitHook("addHandler","boxZoom",zb),He.mergeOptions({doubleClickZoom:!0});var Bb=Us.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var u=this._map,f=u.getZoom(),b=u.options.zoomDelta,_=l.originalEvent.shiftKey?f-b:f+b;u.options.doubleClickZoom==="center"?u.setZoom(_):u.setZoomAround(l.containerPoint,_)}});He.addInitHook("addHandler","doubleClickZoom",Bb),He.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $b=Us.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Zn(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Oe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ct(this._map._container,"leaflet-grab"),Ct(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=pe(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var u=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(u),this._prunePositions(u)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,u){return l-(l-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;l.x<u.min.x&&(l.x=this._viscousLimit(l.x,u.min.x)),l.y<u.min.y&&(l.y=this._viscousLimit(l.y,u.min.y)),l.x>u.max.x&&(l.x=this._viscousLimit(l.x,u.max.x)),l.y>u.max.y&&(l.y=this._viscousLimit(l.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,u=Math.round(l/2),f=this._initialWorldOffset,b=this._draggable._newPos.x,_=(b-u+f)%l+u-f,A=(b+u+f)%l-u-f,U=Math.abs(_+f)<Math.abs(A+f)?_:A;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(l){var u=this._map,f=u.options,b=!f.inertia||l.noInertia||this._times.length<2;if(u.fire("dragend",l),b)u.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),A=(this._lastTime-this._times[0])/1e3,U=f.easeLinearity,te=_.multiplyBy(U/A),re=te.distanceTo([0,0]),oe=Math.min(f.inertiaMaxSpeed,re),we=te.multiplyBy(oe/re),Le=oe/(f.inertiaDeceleration*U),ze=we.multiplyBy(-Le/2).round();!ze.x&&!ze.y?u.fire("moveend"):(ze=u._limitOffset(ze,u.options.maxBounds),J(function(){u.panBy(ze,{duration:Le,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});He.addInitHook("addHandler","dragging",$b),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ub=Us.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Ie(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,u=document.documentElement,f=l.scrollTop||u.scrollTop,b=l.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(b,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var u=this._panKeys={},f=this.keyCodes,b,_;for(b=0,_=f.left.length;b<_;b++)u[f.left[b]]=[-1*l,0];for(b=0,_=f.right.length;b<_;b++)u[f.right[b]]=[l,0];for(b=0,_=f.down.length;b<_;b++)u[f.down[b]]=[0,l];for(b=0,_=f.up.length;b<_;b++)u[f.up[b]]=[0,-1*l]},_setZoomDelta:function(l){var u=this._zoomKeys={},f=this.keyCodes,b,_;for(b=0,_=f.zoomIn.length;b<_;b++)u[f.zoomIn[b]]=l;for(b=0,_=f.zoomOut.length;b<_;b++)u[f.zoomOut[b]]=-l},_addHooks:function(){Ie(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=l.keyCode,f=this._map,b;if(u in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(b=this._panKeys[u],l.shiftKey&&(b=Q(b).multiplyBy(3)),f.options.maxBounds&&(b=f._limitOffset(Q(b),f.options.maxBounds)),f.options.worldCopyJump){var _=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(b)));f.panTo(_)}else f.panBy(b)}else if(u in this._zoomKeys)f.setZoom(f.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;Va(l)}}});He.addInitHook("addHandler","keyboard",Ub),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vb=Us.extend({addHooks:function(){Ie(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var u=mb(l),f=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var b=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),b),Va(l)},_performZoom:function(){var l=this._map,u=l.getZoom(),f=this._map.options.zoomSnap||0;l._stop();var b=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(b))))/Math.LN2,A=f?Math.ceil(_/f)*f:_,U=l._limitZoom(u+(this._delta>0?A:-A))-u;this._delta=0,this._startTime=null,U&&(l.options.scrollWheelZoom==="center"?l.setZoom(u+U):l.setZoomAround(this._lastMousePos,u+U))}});He.addInitHook("addHandler","scrollWheelZoom",Vb);var CC=600;He.mergeOptions({tapHold:Ee.touchNative&&Ee.safari&&Ee.mobile,tapTolerance:15});var Hb=Us.extend({addHooks:function(){Ie(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var u=l.touches[0];this._startPos=this._newPos=new O(u.clientX,u.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ie(document,"touchend",Jt),Ie(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),CC),Ie(document,"touchend touchcancel contextmenu",this._cancel,this),Ie(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){dt(document,"touchend",Jt),dt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),dt(document,"touchend touchcancel contextmenu",this._cancel,this),dt(document,"touchmove",this._onMove,this)},_onMove:function(l){var u=l.touches[0];this._newPos=new O(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,u){var f=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});f._simulated=!0,u.target.dispatchEvent(f)}});He.addInitHook("addHandler","tapHold",Hb),He.mergeOptions({touchZoom:Ee.touch,bounceAtZoomLimits:!0});var Wb=Us.extend({addHooks:function(){Oe(this._map._container,"leaflet-touch-zoom"),Ie(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ct(this._map._container,"leaflet-touch-zoom"),dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var u=this._map;if(!(!l.touches||l.touches.length!==2||u._animatingZoom||this._zooming)){var f=u.mouseEventToContainerPoint(l.touches[0]),b=u.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(f.add(b)._divideBy(2))),this._startDist=f.distanceTo(b),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Ie(document,"touchmove",this._onTouchMove,this),Ie(document,"touchend touchcancel",this._onTouchEnd,this),Jt(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var u=this._map,f=u.mouseEventToContainerPoint(l.touches[0]),b=u.mouseEventToContainerPoint(l.touches[1]),_=f.distanceTo(b)/this._startDist;if(this._zoom=u.getScaleZoom(_,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&_<1||this._zoom>u.getMaxZoom()&&_>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var A=f._add(b)._divideBy(2)._subtract(this._centerPoint);if(_===1&&A.x===0&&A.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(A),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var U=o(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=J(U,this,!0),Jt(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),dt(document,"touchmove",this._onTouchMove,this),dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});He.addInitHook("addHandler","touchZoom",Wb),He.BoxZoom=zb,He.DoubleClickZoom=Bb,He.Drag=$b,He.Keyboard=Ub,He.ScrollWheelZoom=Vb,He.TapHold=Hb,He.TouchZoom=Wb,r.Bounds=le,r.Browser=Ee,r.CRS=ge,r.Canvas=Ob,r.Circle=Ff,r.CircleMarker=pd,r.Class=W,r.Control=Ns,r.DivIcon=Ib,r.DivOverlay=Vs,r.DomEvent=W4,r.DomUtil=V4,r.Draggable=Zn,r.Evented=R,r.FeatureGroup=yn,r.GeoJSON=vn,r.GridLayer=el,r.Handler=Us,r.Icon=Ii,r.ImageOverlay=wd,r.LatLng=ye,r.LatLngBounds=ne,r.Layer=_s,r.LayerGroup=Ti,r.LineUtil=nC,r.Map=He,r.Marker=gd,r.Mixin=X4,r.Path=Gn,r.Point=O,r.PolyUtil=Q4,r.Polygon=Ai,r.Polyline=bn,r.Popup=kd,r.PosAnimation=fb,r.Projection=aC,r.Rectangle=Fb,r.Renderer=wn,r.SVG=rl,r.SVGOverlay=Tb,r.TileLayer=Oi,r.Tooltip=jd,r.Transformation=K,r.Util=D,r.VideoOverlay=Lb,r.bind=o,r.bounds=V,r.canvas=Rb,r.circle=mC,r.circleMarker=hC,r.control=Jo,r.divIcon=kC,r.extend=a,r.featureGroup=cC,r.geoJSON=Eb,r.geoJson=pC,r.gridLayer=jC,r.icon=dC,r.imageOverlay=xC,r.latLng=z,r.latLngBounds=pe,r.layerGroup=lC,r.map=q4,r.marker=uC,r.point=Q,r.polygon=gC,r.polyline=fC,r.popup=vC,r.rectangle=SC,r.setOptions=w,r.stamp=d,r.svg=Db,r.svgOverlay=bC,r.tileLayer=Ab,r.tooltip=wC,r.transformation=be,r.version=n,r.videoOverlay=yC;var PC=window.L;r.noConflict=function(){return window.L=PC,this},window.L=r})})(D0,D0.exports);var pM=D0.exports;const qr=K0(pM);delete qr.Icon.Default.prototype._getIconUrl;qr.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const xM=({deliveryLocation:e,deliveryAddress:t,pickupLocation:r,orderType:n="delivery"})=>{const a=S.useRef(null),i=S.useRef(null),{t:o}=xe(),c=[64.1466,-21.9426],d=[64.1466,-21.9426];return S.useEffect(()=>{if(!a.current||i.current)return;const h=qr.map(a.current,{attributionControl:!1}).setView(e?[e.lat,e.lng]:c,13);if(qr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(h),i.current=h,n==="pickup")qr.marker(d,{icon:qr.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup('<div><div class="font-semibold"> lfng Store</div><div class="text-sm">Laugavegur 123<br/>Reykjavk 101</div></div>').addTo(h).openPopup(),h.setView(d,14);else if(n==="delivery"&&(e&&qr.marker([e.lat,e.lng],{icon:qr.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup('<div class="font-semibold"> Delivery Person</div>').addTo(h),t&&qr.marker([t.latitude||c[0],t.longitude||c[1]],{icon:qr.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup(`<div><div class="font-semibold"> Delivery Address</div>
            <div class="text-sm">${t.street||""}<br/>${t.city||""} ${t.postalCode||""}</div></div>`).addTo(h),e&&t)){const m=new qr.FeatureGroup([qr.marker([e.lat,e.lng]),qr.marker([t.latitude||c[0],t.longitude||c[1]])]);h.fitBounds(m.getBounds(),{padding:[50,50]})}return setTimeout(()=>{h.invalidateSize()},100),()=>{}},[n]),s.jsxs("div",{className:"space-y-4 h-full",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(mn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:n==="pickup"?o("navigation.language")==="is"?"Pickupstasetning er merkt  kortinu hr a nean":"Pickup location is marked on the map below":o("navigation.language")==="is"?"Stasetning sendara og afhendingarheimilisfang eru sndar  kortinu":"Delivery person and delivery address locations are shown on the map"})]}),s.jsx("div",{ref:a,className:"relative w-full min-h-96 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden",style:{height:"600px"}}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[o("navigation.language")==="is"?"Kort fr":"Map by"," OpenStreetMap contributors"]})]})},yM=()=>{var w,y,k;const{t:e}=xe(),{id:t}=u2(),r=ss(),n=it(),{currentOrder:a,isLoading:i,error:o}=ke(j=>j.orders),{isAuthenticated:c}=ke(j=>j.auth),[d,h]=S.useState(null);S.useEffect(()=>(t&&n(Mu(t)),()=>{n(hA())}),[n,t]),S.useEffect(()=>{c||r("/login")},[c,r]),S.useEffect(()=>{if(a&&a.status==="OUT_FOR_DELIVERY"){const j=setInterval(()=>{h({lat:64.1466+(Math.random()-.5)*.01,lng:-21.9426+(Math.random()-.5)*.01,timestamp:new Date().toISOString()})},5e3);return()=>clearInterval(j)}},[a]);const m=j=>{switch(j){case"PENDING":return s.jsx(Ht,{className:"w-6 h-6 text-yellow-600"});case"CONFIRMED":return s.jsx(Ue,{className:"w-6 h-6 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-6 h-6 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Nr,{className:"w-6 h-6 text-orange-600"});case"DELIVERED":return s.jsx(wt,{className:"w-6 h-6 text-green-600"});case"CANCELLED":return s.jsx(lf,{className:"w-6 h-6 text-red-600"});default:return s.jsx(Ue,{className:"w-6 h-6 text-gray-600"})}},g=j=>e("orders.statuses",j),p=j=>({COMPLETED:e("navigation.language")==="is"?"Loki":"Completed",PENDING:e("navigation.language")==="is"?" bi":"Pending",FAILED:e("navigation.language")==="is"?"Mistkst":"Failed",CANCELLED:e("navigation.language")==="is"?"Htt vi":"Cancelled"})[j]||j,v=j=>{switch(j){case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"CONFIRMED":return"bg-blue-100 text-blue-800 border-blue-200";case"PREPARING":return"bg-purple-100 text-purple-800 border-purple-200";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800 border-orange-200";case"DELIVERED":return"bg-green-100 text-green-800 border-green-200";case"CANCELLED":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=j=>new Date(j).toLocaleString();return i?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(nt,{size:"large"})}):o||!a?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:e("orderDetailPage.orderNotFound")}),s.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage.orderNotFoundDesc")}),s.jsx("button",{onClick:()=>r("/orders"),className:"btn btn-primary",children:e("orderDetailPage.backToOrders")})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6 sm:py-8 md:py-12",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:[s.jsxs("button",{onClick:()=>r("/orders"),className:"flex items-center text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 mb-6 font-medium",children:[s.jsx(pn,{className:"w-5 h-5 mr-2"}),e("orderDetailPage.backToOrders")]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-700 dark:to-primary-800 px-6 sm:px-8 py-8 text-white",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:["#",a.orderNumber]}),s.jsxs("p",{className:"text-primary-100 text-sm",children:[e("orderDetailPage.created"),": ",x(a.createdAt)]})]}),s.jsxs("div",{className:`px-4 py-3 rounded-lg flex items-center space-x-2 font-semibold text-lg ${v(a.status)}`,children:[m(a.status),s.jsx("span",{children:g(a.status)})]})]})}),s.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Ue,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.orderItems")]}),s.jsx("div",{className:"space-y-6",children:a.items.map((j,N)=>s.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(td,{product:j.product,className:"w-20 h-20 sm:w-24 sm:h-24 object-contain flex-shrink-0 bg-white dark:bg-gray-600 rounded-lg p-2",currentLanguage:e("navigation.language")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:j.product.nameIs||j.product.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:j.product.descriptionIs||j.product.description}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[e("orderDetailPage.quantity"),": ",s.jsx("span",{className:"font-bold text-gray-900 dark:text-white ml-1",children:j.quantity})]}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.price.toLocaleString()," ",e("common.currency")," ",e("orderDetailPage.each")]})]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsx("p",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:(j.price*j.quantity).toLocaleString()}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("common.currency")})]})]},N))})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Nr,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(Nr,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryMethod")]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:((w=a.shippingOption)==null?void 0:w.type)==="pickup"?e("orderDetailPage.storePickup"):e("orderDetailPage.homeDelivery")}),a.pickupTime&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[s.jsx(Ht,{className:"w-4 h-4 inline mr-1"}),e("checkoutPage.pickupTime"),": ",s.jsx("span",{className:"font-semibold",children:a.pickupTime})]})]}),a.address&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(mn,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryAddress")]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:a.address.street}),s.jsx("br",{}),s.jsxs("span",{className:"text-sm",children:[a.address.city,", ",a.address.postalCode]}),s.jsx("br",{}),s.jsx("span",{className:"text-sm",children:a.address.country})]})]}),a.deliveryPerson&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[s.jsx(Ur,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-blue-400"}),e("orderDetailPage.deliveryPerson")]}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.deliveryPerson.fullName}),a.deliveryPerson.phone&&s.jsxs("a",{href:`tel:${a.deliveryPerson.phone}`,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center mt-2",children:[s.jsx(wi,{className:"w-3 h-3 mr-1"}),a.deliveryPerson.phone]})]}),a.estimatedDelivery&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(Rn,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.estimatedDelivery")]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x(a.estimatedDelivery)})]}),a.deliveredAt&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsxs("h3",{className:"font-semibold text-green-900 dark:text-green-200 mb-2 flex items-center",children:[s.jsx(wt,{className:"w-4 h-4 mr-2"}),e("orderDetailPage.deliveredAt")]}),s.jsx("p",{className:"text-green-800 dark:text-green-300",children:x(a.deliveredAt)})]})]}),s.jsx("div",{children:s.jsx(xM,{deliveryLocation:d,deliveryAddress:a.address,orderType:((y=a.shippingOption)==null?void 0:y.type)||"delivery"})})]})]}),a.transaction&&s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(un,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.paymentInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white block mb-2",children:e("orderDetailPage.paymentMethod")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.transaction.paymentMethod})]}),s.jsxs("div",{className:`p-5 rounded-lg ${a.transaction.paymentStatus==="COMPLETED"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"}`,children:[s.jsx("span",{className:`font-semibold block mb-2 ${a.transaction.paymentStatus==="COMPLETED"?"text-green-900 dark:text-green-200":"text-yellow-900 dark:text-yellow-200"}`,children:e("orderDetailPage.status")}),s.jsx("p",{className:a.transaction.paymentStatus==="COMPLETED"?"text-green-800 dark:text-green-300 font-medium":"text-yellow-800 dark:text-yellow-300 font-medium",children:p(a.transaction.paymentStatus)})]})]})]}),a.notes&&s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-800",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(pt,{className:"w-6 h-6 mr-3 text-blue-600 dark:text-blue-400"}),e("orderDetailPage.notes")]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.notes})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:e("orders.title")}),s.jsxs("div",{className:"space-y-4 max-w-md ml-auto",children:[s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:e("orders.reorder")}),s.jsxs("span",{className:"font-medium",children:[((a.totalAmount||0)-(a.deliveryFee||0)).toLocaleString()," ",e("common.currency")]})]}),s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:((k=a.shippingOption)==null?void 0:k.type)==="pickup"?e("ordersPage.pickup"):e("ordersPage.delivery")}),s.jsx("span",{className:"font-medium",children:(a.deliveryFee||0)===0?e("common.free"):`${(a.deliveryFee||0).toLocaleString()} ${e("common.currency")}`})]}),s.jsxs("div",{className:"border-t-2 border-gray-300 dark:border-gray-600 pt-4 flex justify-between",children:[s.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("common.total")}),s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[(a.totalAmount||0).toLocaleString()," ",e("common.currency")]})]})]})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-gray-900 dark:bg-black text-white",children:[s.jsx("h2",{className:"text-xl font-bold mb-6",children:e("footer.contact")}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:e("footer.email")}),s.jsx("a",{href:"mailto:info@olfong.is",className:"text-primary-400 hover:text-primary-300 font-medium break-all",children:"info@olfong.is"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:e("footer.phone")}),s.jsx("a",{href:"tel:+3541234567",className:"text-primary-400 hover:text-primary-300 font-medium",children:"+354 123 4567"})]})]})]})]})]})]})})},bM=()=>{const{t:e}=xe(),t=it(),{user:r,isAuthenticated:n}=ke(R=>R.auth),{orders:a,pagination:i,filters:o,isLoading:c}=ke(R=>R.orders),{addresses:d,isLoading:h}=ke(R=>R.addresses),[m,g]=S.useState(!1),[p,v]=S.useState(null),[x,w]=S.useState(!1),{register:y,handleSubmit:k,formState:{errors:j},reset:N}=ji({defaultValues:{fullName:"",email:"",phone:""}}),{register:C,handleSubmit:P,formState:{errors:E},reset:I}=ji({defaultValues:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1}});S.useEffect(()=>{n&&t(Jl())},[t,n]),S.useEffect(()=>{n&&t(mo(o))},[t,n,o]),S.useEffect(()=>{r&&N({fullName:r.fullName||"",email:r.email||"",phone:r.phone||""})},[r,N]),S.useEffect(()=>{I(p?{street:p.street||"",city:p.city||"",postalCode:p.postalCode||"",country:p.country||"Iceland",isDefault:p.isDefault||!1}:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1})},[p,I]);const M=async R=>{try{await t(Au(R)).unwrap(),Z.success(e("profile.updateSuccess")),w(!1)}catch(O){Z.error(O.message||e("profile.updateError"))}},T=async R=>{try{p?(await t(Xu({id:p.id,...R})).unwrap(),Z.success(e("addresses.edit"))):(await t(Xl(R)).unwrap(),Z.success(e("addresses.add"))),g(!1),v(null)}catch(O){Z.error(O.message||e("common.error"))}},H=R=>{v(R),g(!0)},J=async R=>{if(window.confirm(e("addresses.delete")+"?"))try{await t(Qu(R)).unwrap(),Z.success(e("common.success"))}catch(O){Z.error(O.message||e("common.error"))}},$=()=>{t(gy()),Z.success(e("auth.logout"))},D=R=>{switch(R){case"PENDING":return s.jsx(Ht,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return s.jsx(Ue,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Nr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(wt,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return s.jsx(lf,{className:"w-5 h-5 text-red-600"});default:return s.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},W=R=>e("orders.statuses",R),X=R=>{switch(R){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},G=R=>{t(uA({status:R===o.status?"":R}))};return n?h||c?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(nt,{size:"large"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("profile.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("profilePage.manageInfo")})]}),s.jsx("button",{onClick:$,className:"inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 mt-4 sm:mt-0 whitespace-nowrap flex-shrink-0",children:e("profilePage.logout")})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[s.jsx(Ur,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e("profilePage.personalInformation")})]}),s.jsx("button",{onClick:()=>w(!x),className:"btn btn-outline btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:x?s.jsxs(s.Fragment,{children:[s.jsx(ct,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.cancel")})]}):s.jsxs(s.Fragment,{children:[s.jsx(fn,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.edit")})]})})]}),x?s.jsxs("form",{onSubmit:k(M),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.fullName")}),s.jsx("input",{...y("fullName"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.fullName")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.email")}),s.jsx("input",{type:"email",...y("email",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.email")}),j.email&&s.jsxs("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:[e("profilePage.email")," ",e("common.error")]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.phone")}),s.jsx("input",{type:"tel",...y("phone"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.phone")})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>w(!1),className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:s.jsx("span",{children:e("common.cancel")})}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[s.jsx(Or,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.save")})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ur,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.name")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.fullName)||e("profilePage.notSpecified")})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Zr,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.email")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.email)||e("profilePage.notSpecified")}),!(r!=null&&r.email)&&s.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-1",children:[" ",e("profilePage.emailMissingWarning")]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(wi,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.phone")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.phone)||e("profilePage.notSpecified")})]})]})]})]})}),s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[s.jsx(mn,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e("profilePage.addresses")})]}),s.jsxs("button",{onClick:()=>{v(null),g(!0)},className:"btn btn-primary btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:[s.jsx(yr,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("profilePage.newAddress")})]})]}),d.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(mn,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("profilePage.noAddresses")})]}):s.jsx("div",{className:"space-y-4",children:d.map(R=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:R.street}),R.isDefault&&s.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400 text-xs rounded-full whitespace-nowrap flex-shrink-0",children:e("profilePage.default")})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-words",children:[R.city,", ",R.postalCode,s.jsx("br",{}),R.country]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>H(R),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-200",children:s.jsx(fn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>J(R.id),className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-200",children:s.jsx(sr,{className:"w-4 h-4"})})]})]})},R.id))}),d.length===0&&s.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[" ",e("profilePage.addressMissingWarning")]})})]})}),s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Ue,{className:"w-5 h-5 mr-2"}),e("orders.title")]}),s.jsxs("select",{value:o.status,onChange:R=>G(R.target.value),className:"input w-auto min-w-[150px] dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:e("ordersPage.allOrders")}),s.jsx("option",{value:"PENDING",children:e("ordersPage.pending")}),s.jsx("option",{value:"CONFIRMED",children:e("ordersPage.confirmed")}),s.jsx("option",{value:"OUT_FOR_DELIVERY",children:e("ordersPage.outForDelivery")}),s.jsx("option",{value:"DELIVERED",children:e("ordersPage.delivered")})]})]}),a.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ue,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("ordersPage.noOrders")})]}):s.jsx("div",{className:"space-y-4",children:a.map(R=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[s.jsxs("h3",{className:"text-md font-semibold text-gray-900 dark:text-white",children:[e("orderDetailPage.order")," #",R.orderNumber]}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${X(R.status)}`,children:[D(R.status),s.jsx("span",{children:W(R.status)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.date")}),s.jsx("span",{className:"truncate block",children:new Date(R.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.total")}),s.jsxs("span",{className:"truncate block",children:[R.totalAmount.toLocaleString()," ",e("common.currency")]})]}),s.jsxs("div",{className:"min-w-0 sm:col-span-2 xl:col-span-1",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.delivery")}),s.jsx("span",{className:"truncate block",children:R.deliveryMethod==="PICKUP"?e("ordersPage.pickup"):e("ordersPage.homeDelivery")})]})]})]})})},R.id))}),i.pages>1&&s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(mo({...o,page:i.page-1})),disabled:i.page===1,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage.previous")}),s.jsxs("span",{className:"px-3 py-1 text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap",children:[e("ordersPage.page")," ",i.page," ",e("ordersPage.of")," ",i.pages]}),s.jsx("button",{onClick:()=>t(mo({...o,page:i.page+1})),disabled:i.page===i.pages,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage.next")})]})})]})})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e(p?"profilePage.editAddress":"profilePage.newAddressTitle")}),s.jsx("button",{onClick:()=>{g(!1),v(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ct,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:P(T),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.street")," *"]}),s.jsx("input",{...C("street",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.street")}),E.street&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.streetRequired")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.city")," *"]}),s.jsx("input",{...C("city",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.city")}),E.city&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.cityRequired")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.postalCode")," *"]}),s.jsx("input",{...C("postalCode",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.postalCode")}),E.postalCode&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.postalCodeRequired")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.country")," *"]}),s.jsx("input",{...C("country",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.country")}),E.country&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("navigation.language")==="is"?"Land er nausynlegt":"Country is required"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...C("isDefault"),className:"rounded"}),s.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("profilePage.setAsDefaultAddress")})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{g(!1),v(null)},className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:s.jsx("span",{children:e("common.cancel")})}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[s.jsx(Or,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e(p?"adminProductsPage.update":"adminProductsPage.create")})]})]})]})]})})]})}):s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("profile.title")}),s.jsxs("div",{className:"card p-8",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("navigation.language")==="is"?"Skru ig inn":"Please log in"}),s.jsx("p",{className:"text-gray-600 mb-6",children:e("navigation.language")==="is"?" verur a skr ig inn til a skoa prflinn inn.":"You must be logged in to view your profile."})]})]})})})};function vM(){throw new Error("Kenni OIDC not configured")}function wM(e){const t=e.startsWith("#")?e.substring(1):e,r=new URLSearchParams(t),n=r.get("id_token"),a=r.get("state"),i=r.get("error"),o=r.get("error_description");return{idToken:n,state:a,error:i,errorDescription:o}}const kM=()=>{var P,E;const{t:e}=xe(),t=ss(),r=Cr(),n=it(),{isAuthenticated:a,isLoading:i}=ke(I=>I.auth),[o,c]=S.useState(!1),[d,h]=S.useState(!1),[m,g]=S.useState(""),[p,v]=S.useState({email:"",password:""}),x=((E=(P=r.state)==null?void 0:P.from)==null?void 0:E.pathname)||"/";S.useEffect(()=>{n(lA())},[n]),S.useEffect(()=>{a&&!i&&t(x,{replace:!0})},[a,i,t,x]);const w=I=>{I.preventDefault();try{const M=vM();window.location.href=M}catch(M){console.error(M)}},y=I=>{I.preventDefault(),c(!o)},k=async I=>{if(I.preventDefault(),!!m.trim())try{await n(Tu({phone:m})).unwrap(),t(x,{replace:!0})}catch(M){console.error("Dummy login failed:",M)}},j=I=>{I.preventDefault(),h(!d)},N=async I=>{if(I.preventDefault(),!(!p.email.trim()||!p.password.trim()))try{await n(Fl({username:"test_customer",password:p.password})).unwrap(),t(x,{replace:!0})}catch(M){console.error("Test login failed:",M)}},C=I=>{v({...p,[I.target.name]:I.target.value})};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth.login")}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:e("authExtra.loginWithElectronicIdDescription")})]}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("button",{onClick:w,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-primary-600 text-base font-semibold rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("auth.login")}),s.jsx("span",{className:"text-sm opacity-90",children:e("authExtra.loginWithElectronicId")})]}),s.jsxs("button",{onClick:y,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-orange-600 text-base font-semibold rounded-lg text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("login.testLogin")}),s.jsx("span",{className:"text-sm opacity-90",children:e("login.dummyElectronicId")})]}),s.jsxs("button",{onClick:j,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-green-600 text-base font-semibold rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("login.automatedTestLogin")}),s.jsx("span",{className:"text-sm opacity-90",children:e("login.emailPasswordTests")})]}),o&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.insertPhoneNumber")}),s.jsx("input",{id:"phone",type:"tel",value:m,onChange:I=>g(I.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterPhoneNumber")})]}),s.jsx("button",{onClick:k,disabled:!m.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e(i?"login.loggingIn":"login.loginWithPhone")})]}),d&&s.jsxs("form",{onSubmit:N,className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.email")}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:p.email,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterEmailAddress")})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.password")}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:p.password,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterPassword")})]}),s.jsx("button",{type:"submit",disabled:!p.email.trim()||!p.password.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e(i?"login.loggingIn":"login.loginWithEmail")})]})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Te,{to:"/admin-login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("authExtra.adminDeliveryLogin")})})]})})},jM=()=>{const e=it(),t=ss(),r=Cr();return S.useEffect(()=>{const{idToken:n,state:a,error:i}=wM(r.hash),o=sessionStorage.getItem("kenni_oidc_state");if(sessionStorage.removeItem("kenni_oidc_state"),i){t("/login");return}if(!n||!a||a!==o){t("/login");return}e(Lu({idToken:n})).unwrap().then(()=>t("/")).catch(()=>t("/login"))},[e,t,r.hash]),s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(nt,{size:"large"})})},NM=()=>{var v,x;const{t:e}=xe(),t=it(),r=ss(),n=Cr(),{isLoading:a,error:i}=ke(w=>w.auth),[o,c]=S.useState({username:"",password:""}),[d,h]=S.useState(!1),m=((x=(v=n.state)==null?void 0:v.from)==null?void 0:x.pathname)||"/admin",g=w=>{c({...o,[w.target.name]:w.target.value})},p=async w=>{w.preventDefault();const y=await t(Fl(o));if(y.type==="auth/login/fulfilled"){const j=y.payload.user.role==="ADMIN"?"/admin":m;r(j,{replace:!0})}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth.loginStaff")})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"label",children:e("auth.username")}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:o.username,onChange:g,className:"input",placeholder:e("auth.username"),"data-testid":"admin-username"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"label",children:e("auth.password")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:d?"text":"password",required:!0,value:o.password,onChange:g,className:"input pr-10",placeholder:e("auth.password"),"data-testid":"admin-password"}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!d),children:d?s.jsx(kr,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"}):s.jsx($t,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})})]})]})]}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:i}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200","data-testid":"admin-login-button",children:e("auth.login")})}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(Te,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("common.back")})})]})]})})},Ql=ve("dashboard/fetchStats",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/dashboard/stats")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch dashboard statistics")}}),$g={stats:{totalRevenue:0,totalOrders:0,totalProducts:0,totalCustomers:0,revenueGrowth:0,orderGrowth:0,productGrowth:0,customerGrowth:0},recentOrders:[],orderStatusCounts:{pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0},topProducts:[],isLoading:!1,error:null},_M=Vr({name:"dashboard",initialState:$g,reducers:{clearError:e=>{e.error=null},updateOrderStatus:(e,t)=>{const{orderId:r,status:n}=t.payload,a=e.recentOrders.find(i=>i.id===r);a&&(a.status=n),n==="delivered"?(e.orderStatusCounts.delivered+=1,e.orderStatusCounts.pending-=1):n==="cancelled"&&(e.orderStatusCounts.cancelled+=1,e.orderStatusCounts.pending-=1)}},extraReducers:e=>{e.addCase(Ql.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ql.fulfilled,(t,r)=>{t.isLoading=!1;const n=r.payload.data||r.payload;t.stats=n.stats||$g.stats,t.recentOrders=n.recentOrders||[],t.orderStatusCounts=n.orderStatusCounts||$g.orderStatusCounts,t.topProducts=n.topProducts||[]}).addCase(Ql.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),SM=_M.reducer,_e=({children:e,showSidebar:t=!0})=>{const{t:r}=xe(),[n,a]=S.useState(()=>{const o=localStorage.getItem("adminSidebarCollapsed");return o?JSON.parse(o):!1}),i=o=>{a(o)};return t?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"hidden lg:flex lg:flex-1",children:[s.jsx("div",{className:"fixed top-16 bottom-0 left-0 z-10 flex-shrink-0",children:s.jsx("div",{className:"m-4 lg:m-0 lg:mt-0 lg:mb-0 lg:pt-6",style:{height:"calc(100vh - 4rem)"},children:s.jsx(jy,{onCollapseChange:i})})}),s.jsx("div",{className:`flex-1 flex flex-col min-w-0 transition-all duration-300 ease-in-out ${n?"lg:ml-16":"lg:ml-56"}`,children:s.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})})]}),s.jsx("div",{className:"lg:hidden flex-1 flex flex-col min-w-0",children:s.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsx("main",{className:"p-4 lg:p-6",children:e})})};_e.propTypes={children:me.node.isRequired,showSidebar:me.bool};const X_=({user:e})=>{const{t}=xe(),r=ss(),n=[{icon:Ue,label:t("adminDashboard.addProduct"),onClick:()=>r("/admin/products"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:ki,label:t("adminDashboard.manageUsers"),onClick:()=>r("/admin/customers"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Tn,label:t("adminDashboard.viewAnalytics"),onClick:()=>r("/admin/analytics"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:go,label:t("adminDashboard.reports"),onClick:()=>r("/admin/reports"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:hn,label:t("adminDashboard.export"),onClick:()=>{alert(t("adminDashboard.export")+" - Coming soon")},className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:yr,label:t("adminDashboard.newOrder"),onClick:()=>r("/admin/orders"),className:"flex flex-col items-center justify-center p-4 bg-blue-600 hover:bg-blue-700 rounded-xl border border-blue-600 hover:border-blue-700 shadow-sm hover:shadow-lg transition-all duration-300 group"}];return s.jsxs("div",{className:"py-4 sm:py-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:t("adminDashboard.dashboardOverview")}),s.jsxs("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:[t("adminDashboard.welcomeBack")," ",(e==null?void 0:e.fullName)||(e==null?void 0:e.username)]})]})}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4",children:n.map((a,i)=>s.jsxs("button",{onClick:a.onClick,className:a.className,children:[s.jsx(a.icon,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mb-2 group-hover:text-blue-500 transition-colors"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:a.label})]},i))})]})};X_.propTypes={user:me.shape({fullName:me.string,username:me.string})};const Q_=({title:e,value:t,growth:r,icon:n,color:a="blue"})=>{const{t:i}=xe();return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-1 sm:p-1.5 lg:p-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:e}),s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mt-1 sm:mt-2 truncate",children:t}),s.jsxs("div",{className:"flex items-center mt-2 sm:mt-3",children:[s.jsx(Tn,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 mr-1 flex-shrink-0"}),s.jsxs("span",{className:"text-xs sm:text-sm text-green-600 dark:text-green-400 font-medium",children:["+",r,"%"]})]})]}),s.jsx("div",{className:`p-1 sm:p-1.5 lg:p-2 rounded-lg bg-${a}-100 dark:bg-${a}-900/20 ml-2 sm:ml-3 flex-shrink-0`,children:s.jsx(n,{className:`h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 text-${a}-600 dark:text-${a}-400`})})]})})};Q_.propTypes={title:me.string.isRequired,value:me.oneOfType([me.string,me.number]).isRequired,growth:me.number.isRequired,icon:me.elementType.isRequired,color:me.string};const eS=({stats:e,formatCurrency:t})=>{const{t:r}=xe(),n=[{title:r("adminDashboard.totalRevenue"),value:t(e.totalRevenue),growth:e.revenueGrowth,icon:sf,color:"green"},{title:r("adminDashboard.totalOrders"),value:e.totalOrders.toLocaleString(),growth:e.orderGrowth,icon:$r,color:"blue"},{title:r("adminDashboard.totalProducts"),value:e.totalProducts,growth:e.productGrowth,icon:Ue,color:"purple"},{title:r("adminDashboard.totalCustomers"),value:e.totalCustomers,growth:e.customerGrowth,icon:ki,color:"indigo"}];return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 mb-6 sm:mb-8",children:n.map((a,i)=>s.jsx(Q_,{title:a.title,value:a.value,growth:a.growth,icon:a.icon,color:a.color},i))})};eS.propTypes={stats:me.shape({totalRevenue:me.number.isRequired,revenueGrowth:me.number.isRequired,totalOrders:me.number.isRequired,orderGrowth:me.number.isRequired,totalProducts:me.number.isRequired,productGrowth:me.number.isRequired,totalCustomers:me.number.isRequired,customerGrowth:me.number.isRequired}).isRequired,formatCurrency:me.func.isRequired};const F0=e=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(e),CM=e=>new Date(e).toLocaleDateString("is-IS"),PM=e=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",confirmed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",preparing:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",out_for_delivery:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400",delivered:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"})[e]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",tS=e=>({pending:Ht,confirmed:wt,preparing:Ue,out_for_delivery:Ue,delivered:wt,cancelled:pt})[e]||Ht,rS=(e,t)=>({pending:t("orders.statuses.PENDING")||"Pending",confirmed:t("orders.statuses.CONFIRMED")||"Confirmed",preparing:t("orders.statuses.PREPARING")||"Preparing",out_for_delivery:t("orders.statuses.OUT_FOR_DELIVERY")||"Out for Delivery",delivered:t("orders.statuses.DELIVERED")||"Delivered",cancelled:t("orders.statuses.CANCELLED")||"Cancelled"})[e]||e,sS=({recentOrders:e,formatCurrency:t,formatDate:r})=>{const{t:n}=xe();return s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:n("adminDashboard.recentOrders")}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[s.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ut,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),s.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(S_,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"hidden sm:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.orderId")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.customer")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.amount")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.status")}),s.jsx("th",{className:"hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.date")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(a=>{const i=tS(a.status);return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsxs("td",{className:"hidden sm:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",a.id]}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 truncate max-w-[120px]",children:a.customer}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-gray-100",children:t(a.amount)}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${PM(a.status)}`,children:[s.jsx(i,{className:"h-3 w-3 mr-0.5"}),s.jsx("span",{className:"hidden sm:inline",children:rS(a.status,n)})]})}),s.jsx("td",{className:"hidden md:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r(a.date)})]},a.id)})})]})})]})})};sS.propTypes={recentOrders:me.arrayOf(me.shape({id:me.oneOfType([me.string,me.number]).isRequired,customer:me.string.isRequired,amount:me.number.isRequired,status:me.string.isRequired,date:me.string.isRequired})).isRequired,formatCurrency:me.func.isRequired,formatDate:me.func.isRequired};const nS=({orderStatusCounts:e})=>{const{t}=xe();return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard.orderStatus")})}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(e).map(([r,n])=>{const a=tS(r),i=Object.values(e).reduce((c,d)=>c+d,0),o=i>0?n/i*100:0;return s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-2 gap-2",children:[s.jsxs("div",{className:"flex items-center min-w-0",children:[s.jsx(a,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-3 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 capitalize truncate",children:rS(r,t)})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"flex-1 sm:w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 w-8 text-right flex-shrink-0",children:n})]})]},r)})})})]})};nS.propTypes={orderStatusCounts:me.objectOf(me.number).isRequired};const aS=({topProducts:e})=>{const{t}=xe();return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard.topProducts")})}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-3",children:e.map((r,n)=>s.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 gap-2",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:n+1})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:r.name}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.sales," ",t("adminDashboard.sales")]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:F0(r.revenue)})})]},r.id))})})]})};aS.propTypes={topProducts:me.arrayOf(me.shape({id:me.oneOfType([me.string,me.number]).isRequired,name:me.string.isRequired,sales:me.number.isRequired,revenue:me.number.isRequired})).isRequired};const EM=()=>{const{t:e}=xe();return s.jsx(_e,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("common.loading")})]})})})},iS=({error:e,onRetry:t})=>{const{t:r}=xe();return s.jsx(_e,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:s.jsx(pt,{className:"h-12 w-12 mx-auto"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r("common.retry")})]})})})};iS.propTypes={error:me.string.isRequired,onRetry:me.func.isRequired};const LM=()=>{const e=it(),{user:t}=ke(d=>d.auth),{stats:r,recentOrders:n,topProducts:a,orderStatusCounts:i,isLoading:o,error:c}=ke(d=>d.dashboard);return S.useEffect(()=>{e(Ql())},[e]),o?s.jsx(EM,{}):c?s.jsx(iS,{error:c,onRetry:()=>e(Ql())}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16",children:s.jsx(X_,{user:t})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4 sm:py-6",children:[s.jsx(eS,{stats:r,formatCurrency:F0}),s.jsx(sS,{recentOrders:n,formatCurrency:F0,formatDate:CM}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[s.jsx(nS,{orderStatusCounts:i}),s.jsx(aS,{topProducts:a})]})]})})]})})},TM=({onImportProduct:e,onClose:t})=>{const{t:r}=xe(),[n,a]=S.useState(""),[i,o]=S.useState([]),[c,d]=S.useState(!1),[h,m]=S.useState([]),[g,p]=S.useState(!1),v={beer:{is:"Bjr",en:"Beer"},"red-wine":{is:"Rauvn",en:"Red wine"},"white-wine":{is:"Hvtvn",en:"White wine"},strong:{is:"Sterkt fengi",en:"Spirits"},cider:{is:"Sder",en:"Cider"},liqueur:{is:"Lkjr",en:"Liqueur"},"rose-wine":{is:"Rsavn",en:"Rose wine"},"sparkling-wine":{is:"Freyivn",en:"Sparkling wine"},"dessert-wine":{is:"Eftirrttavn",en:"Dessert wine"},packaging:{is:"Umbir",en:"Packaging"}},x=async C=>{var P;if(C.trim()){d(!0);try{const E=await fetch("http://192.168.8.62:5000/api/atvr/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchTerm:C})});if(!E.ok)throw new Error(r("atvrImport.failedToImport"));const I=await E.json();o(((P=I.data)==null?void 0:P.products)||[])}catch(E){console.error("Error searching ATVR products:",E),Z.error(r("atvrImport.failedToImport"))}finally{d(!1)}}},w=C=>{C.preventDefault(),x(n)},y=C=>{m(P=>P.some(I=>I.id===C.id)?P.filter(I=>I.id!==C.id):[...P,C])},k=C=>{var I;const P=C.foodPairings||[],E=C.foodPairingsIs||[];return{name:C.name,nameIs:C.nameIs||C.name,description:C.description||"",descriptionIs:C.descriptionIs||C.description||"",price:typeof C.price=="number"?C.price:parseFloat(C.price.replace(/[^\d.,]/g,"").replace(",",".")),category:((I=v[C.category])==null?void 0:I.en)||C.category,image:C.image,alcoholContent:C.alcoholContent,volume:C.volume,volumeIs:C.volumeIs,country:C.country,countryIs:C.countryIs,producer:C.producer,producerIs:C.producerIs,distributor:C.distributor,distributorIs:C.distributorIs,packaging:C.packaging,packagingIs:C.packagingIs,foodPairings:P,foodPairingsIs:E,specialAttributes:C.specialAttributes||[],specialAttributesIs:C.specialAttributesIs||[],availability:C.availability||"available",availabilityIs:C.availabilityIs,atvrProductId:C.id,atvrUrl:C.url}},j=async()=>{if(h.length===0){Z.error(r("atvrImport.pleaseSelectOne"));return}try{const C=h.map(k);for(const P of C)await e(P);Z.success(`${r("atvrImport.successfullyImported")} ${C.length} ${r("atvrImport.productsImported")}`),m([]),o([]),a("")}catch(C){console.error("Error importing products:",C),Z.error(r("atvrImport.failedToImport"))}},N=()=>{p(!0)};return s.jsxs(s.Fragment,{children:[g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[r("atvrImport.previewImportTitle")," (",h.length," ",r("atvrImport.products"),")"]}),s.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:s.jsx("div",{className:"space-y-6",children:h.map((C,P)=>{const E=k(C);return s.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:E.name}),E.nameIs&&E.nameIs!==E.name&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("strong",{children:r("atvrImport.icelandicLabel")})," ",E.nameIs]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:E.description}),E.descriptionIs&&E.descriptionIs!==E.description&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("strong",{children:r("atvrImport.icelandicLabel")})," ",E.descriptionIs]}),s.jsxs("p",{className:"text-lg font-bold text-primary-600",children:[E.price," kr"]})]}),s.jsxs("div",{className:"space-y-2",children:[E.volume&&s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:r("atvrImport.volume")})," ",E.volume,E.volumeIs&&E.volumeIs!==E.volume&&s.jsxs("span",{className:"text-gray-600",children:[" / ",E.volumeIs]})]}),E.country&&s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:r("atvrImport.country")})," ",E.country,E.countryIs&&E.countryIs!==E.country&&s.jsxs("span",{className:"text-gray-600",children:[" / ",E.countryIs]})]}),E.producer&&s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:r("atvrImport.producer")})," ",E.producer,E.producerIs&&E.producerIs!==E.producer&&s.jsxs("span",{className:"text-gray-600",children:[" / ",E.producerIs]})]}),E.foodPairings&&E.foodPairings.length>0&&s.jsxs("div",{children:[s.jsx("strong",{className:"text-sm",children:r("atvrImport.foodPairings")}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:E.foodPairings.map((I,M)=>s.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:I.name},M))})]})]})]})},P)})})}),s.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:r("atvrImport.cancel")}),s.jsx("button",{onClick:()=>{p(!1),j()},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:r("atvrImport.importProductsButton")})]})]})}),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r("atvrImport.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:r("atvrImport.subtitle")})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("form",{onSubmit:w,className:"flex space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",value:n,onChange:C=>a(C.target.value),placeholder:r("atvrImport.searchPlaceholderIs"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})}),s.jsxs("button",{type:"submit",disabled:c||!n.trim(),className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[c?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):s.jsx(Ft,{className:"h-4 w-4"}),s.jsx("span",{children:r("atvrImport.search")})]})]})}),s.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r("atvrImport.searchResults")," (",i.length,")"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[h.length," ",r("atvrImport.selected")]}),s.jsx("button",{onClick:()=>m([]),className:"text-sm text-primary-600 hover:text-primary-700",children:r("atvrImport.clearAll")})]})]}),s.jsx("div",{className:"grid gap-4",children:i.map(C=>s.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${h.some(P=>P.id===C.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>y(C),children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:C.image?s.jsx("img",{src:C.image,alt:C.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-xs",children:r("atvrImport.noImage")})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:C.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[C.category,"  ",C.country]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[C.volume,"  ",C.alcoholContent,"%"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[C.price," kr."]}),C.foodPairings&&C.foodPairings.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[C.foodPairings.slice(0,3).map((P,E)=>s.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:P},E)),C.foodPairings.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",C.foodPairings.length-3," ",r("atvrImport.more")]})]})]})]})}),s.jsx("div",{className:"flex-shrink-0",children:h.some(P=>P.id===C.id)?s.jsx(wt,{className:"h-5 w-5 text-primary-600"}):s.jsx("div",{className:"h-5 w-5 border-2 border-gray-300 dark:border-gray-600 rounded-full"})})]})},C.id))})]}):n&&!c?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:r("atvrImport.noProductsFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r("atvrImport.tryDifferentTerms")})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ft,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:r("atvrImport.searchATVRProducts")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r("atvrImport.enterSearchTerm")})]})}),h.length>0&&s.jsxs("div",{className:"w-80 border-l border-gray-200 dark:border-gray-700 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r("atvrImport.selected")," (",h.length,")"]}),s.jsx("button",{onClick:()=>m([]),className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:r("atvrImport.clearAll")})]}),s.jsx("div",{className:"space-y-3 mb-6",children:h.map(C=>s.jsx("div",{className:"border rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:C.name}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[C.price," kr."]})]}),s.jsx("button",{onClick:()=>y(C),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"h-4 w-4"})})]})},C.id))}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:N,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center space-x-2",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsx("span",{children:r("atvrImport.previewImport")})]}),s.jsxs("button",{onClick:j,className:"w-full px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center justify-center space-x-2",children:[s.jsx(hn,{className:"h-4 w-4"}),s.jsx("span",{children:r("atvrImport.importProducts")})]})]})]})]})]})})]})};class IM{constructor(){this.sources={unsplash:{name:"Unsplash",apiKey:null,baseUrl:"https://api.unsplash.com",enabled:!1},pexels:{name:"Pexels",apiKey:null,baseUrl:"https://api.pexels.com/v1",enabled:!1},pixabay:{name:"Pixabay",apiKey:null,baseUrl:"https://pixabay.com/api",enabled:!1},google:{name:"Google Custom Search",apiKey:null,searchEngineId:null,baseUrl:"https://www.googleapis.com/customsearch/v1",enabled:!1}},this.apiKeysLoaded=!1}async loadApiKeys(){if(!this.apiKeysLoaded)try{const t=await fetch("/api/settings/public");if(t.ok){const n=(await t.json()).data.settings;this.sources.unsplash.apiKey=n.UNSPLASH_ACCESS_KEY||"",this.sources.pexels.apiKey=n.PEXELS_API_KEY||"",this.sources.pixabay.apiKey=n.PIXABAY_API_KEY||"",this.sources.google.apiKey=n.GOOGLE_API_KEY||"",this.sources.google.searchEngineId=n.GOOGLE_SEARCH_ENGINE_ID||"",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}catch(t){console.warn("Failed to load API keys from settings:",t),this.sources.unsplash.apiKey="",this.sources.pexels.apiKey="",this.sources.pixabay.apiKey="",this.sources.google.apiKey="",this.sources.google.searchEngineId="",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}async searchImages(t,r={}){await this.loadApiKeys();const{perPage:n=20,orientation:a="all",color:i="all",sources:o=Object.keys(this.sources).filter(g=>this.sources[g].enabled)}=r;if(o.length===0)return{images:[],errors:[{source:"All Sources",error:"No API keys configured. Please configure API keys in admin settings."}],total:0,sources:[]};const c=o.map(g=>this.searchFromSource(g,t,{perPage:n,orientation:a,color:i}).catch(p=>(console.warn(`Failed to search ${g}:`,p),[]))),h=(await Promise.all(c)).flat(),m=this.removeDuplicates(h);return this.shuffleArray(m).slice(0,n)}async searchFromSource(t,r,n){switch(t){case"unsplash":return this.searchUnsplash(r,n);case"pexels":return this.searchPexels(r,n);case"pixabay":return this.searchPixabay(r,n);case"google":return this.searchGoogle(r,n);default:throw new Error(`Unknown source: ${t}`)}}async searchUnsplash(t,r){const{perPage:n,orientation:a,color:i}=r,o=this.sources.unsplash;if(!o.enabled)return[];const c=new URLSearchParams({query:t,per_page:Math.min(n,30),orientation:a==="all"?void 0:a,color:i==="all"?void 0:i}),d=await fetch(`${o.baseUrl}/search/photos?${c}`,{headers:{Authorization:`Client-ID ${o.apiKey}`}});if(!d.ok)throw new Error(`Unsplash API error: ${d.status}`);return(await d.json()).results.map(m=>{var g;return{id:m.id,url:m.urls.regular,thumbnail:m.urls.thumb,fullSize:m.urls.full,alt:m.alt_description||m.description||t,source:"unsplash",sourceName:"Unsplash",photographer:m.user.name,photographerUrl:m.user.links.html,downloadUrl:m.links.download,width:m.width,height:m.height,color:m.color,tags:((g=m.tags)==null?void 0:g.map(p=>p.title))||[]}})}async searchPexels(t,r){const{perPage:n,orientation:a,color:i}=r,o=this.sources.pexels;if(!o.enabled)return[];const c=new URLSearchParams({query:t,per_page:Math.min(n,80),orientation:a==="all"?void 0:a,color:i==="all"?void 0:i}),d=await fetch(`${o.baseUrl}/search?${c}`,{headers:{Authorization:o.apiKey}});if(!d.ok)throw new Error(`Pexels API error: ${d.status}`);return(await d.json()).photos.map(m=>({id:m.id,url:m.src.medium,thumbnail:m.src.small,fullSize:m.src.large2x,alt:m.alt||t,source:"pexels",sourceName:"Pexels",photographer:m.photographer,photographerUrl:m.photographer_url,downloadUrl:m.src.original,width:m.width,height:m.height,color:m.avg_color,tags:[]}))}async searchPixabay(t,r){const{perPage:n,orientation:a,color:i}=r,o=this.sources.pixabay;if(!o.enabled)return[];const c=new URLSearchParams({key:o.apiKey,q:t,per_page:Math.min(n,200),image_type:"photo",orientation:a==="all"?"all":a,colors:i==="all"?void 0:i,safesearch:"true"}),d=await fetch(`${o.baseUrl}/?${c}`);if(!d.ok)throw new Error(`Pixabay API error: ${d.status}`);return(await d.json()).hits.map(m=>({id:m.id,url:m.webformatURL,thumbnail:m.previewURL,fullSize:m.largeImageURL,alt:m.tags||t,source:"pixabay",sourceName:"Pixabay",photographer:m.user,photographerUrl:`https://pixabay.com/users/${m.user}-${m.user_id}/`,downloadUrl:m.largeImageURL,width:m.imageWidth,height:m.imageHeight,color:m.color,tags:m.tags.split(", ").map(g=>g.trim())}))}async searchGoogle(t,r){const{perPage:n}=r,a=this.sources.google;if(!a.enabled)return[];const i=new URLSearchParams({key:a.apiKey,cx:a.searchEngineId,q:t,searchType:"image",num:Math.min(n,10),safe:"active",imgSize:"medium",imgType:"photo"}),o=await fetch(`${a.baseUrl}?${i}`);if(!o.ok)throw new Error(`Google Custom Search API error: ${o.status}`);return((await o.json()).items||[]).map(d=>{var h,m,g,p;return{id:d.link,url:d.link,thumbnail:((h=d.image)==null?void 0:h.thumbnailLink)||d.link,fullSize:d.link,alt:d.title||t,source:"google",sourceName:"Google Images",photographer:d.displayLink,photographerUrl:((m=d.image)==null?void 0:m.contextLink)||d.link,downloadUrl:d.link,width:((g=d.image)==null?void 0:g.width)||0,height:((p=d.image)==null?void 0:p.height)||0,color:null,tags:[]}})}removeDuplicates(t){const r=new Set;return t.filter(n=>r.has(n.url)?!1:(r.add(n.url),!0))}shuffleArray(t){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r}getAvailableSources(){return Object.entries(this.sources).filter(([,t])=>t.enabled).map(([t,r])=>({key:t,name:r.name}))}getSearchSuggestions(t,r){const n=[t];return r&&typeof r=="string"&&(n.push(`${t} ${r.toLowerCase()}`),n.push(`${r.toLowerCase()} ${t}`)),["product photo","professional","white background","isolated","high quality","commercial"].forEach(i=>{n.push(`${t} ${i}`)}),[...new Set(n)]}}const Ug=new IM,AM=({isOpen:e,onClose:t,onSelectImage:r,productName:n="",category:a="",initialQuery:i=""})=>{const{t:o}=xe(),[c,d]=S.useState(i||n),[h,m]=S.useState([]),[g,p]=S.useState(!1),[v,x]=S.useState(null),[w,y]=S.useState(null),[k,j]=S.useState("grid"),[N,C]=S.useState({orientation:"all",color:"all",sources:Ug.getAvailableSources().map(V=>V.key)}),[P,E]=S.useState([]),[I,M]=S.useState(!1),[T,H]=S.useState([]),[J,$]=S.useState([]),D=S.useRef(null),W=S.useRef(null);S.useEffect(()=>{const V=localStorage.getItem("imageSearchFavorites"),ne=localStorage.getItem("imageSearchRecent");V&&H(JSON.parse(V)),ne&&$(JSON.parse(ne))},[]),S.useEffect(()=>{if(n||a){const V=Ug.getSearchSuggestions(n,a);E(V)}},[n,a]),S.useEffect(()=>{e&&D.current&&D.current.focus()},[e]);const X=async(V=c)=>{if(V.trim()){p(!0),x(null),y(null);try{const ne=await Ug.searchImages(V,{perPage:24,...N});m(ne);const pe=[V,...J.filter(ye=>ye!==V)].slice(0,10);$(pe),localStorage.setItem("imageSearchRecent",JSON.stringify(pe))}catch(ne){x(ne.message),Z.error(`Search failed: ${ne.message}`)}finally{p(!1)}}},G=V=>{d(V.target.value),M(!0)},R=V=>{d(V),M(!1),X(V)},O=V=>{y(V)},q=async V=>{try{p(!0);const ne=await fetch("/api/images/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:V.url,source:V.source,photographer:V.photographer,photographerUrl:V.photographerUrl})});if(!ne.ok)throw new Error("Failed to download image");const{imageUrl:pe}=await ne.json();r(pe,{originalUrl:V.url,source:V.source,photographer:V.photographer,photographerUrl:V.photographerUrl}),Z.success("Image downloaded and selected successfully"),t()}catch(ne){Z.error(`Failed to download image: ${ne.message}`)}finally{p(!1)}},Q=V=>{const ne=T.some(ye=>ye.id===V.id);let pe;ne?pe=T.filter(ye=>ye.id!==V.id):pe=[...T,V],H(pe),localStorage.setItem("imageSearchFavorites",JSON.stringify(pe))},le=V=>{V.key==="Enter"?(M(!1),X()):V.key==="Escape"&&M(!1)};return S.useEffect(()=>{const V=ne=>{W.current&&!W.current.contains(ne.target)&&M(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] flex flex-col shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search for Product Images"}),s.jsxs("div",{className:"relative",ref:W,children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{ref:D,type:"text",value:c,onChange:G,onKeyPress:le,placeholder:o("adminPlaceholders.searchForImages"),className:"input pl-10 pr-4 w-full"}),g&&s.jsx(Wt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 animate-spin"})]}),I&&(P.length>0||J.length>0)&&s.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-10 mt-1",children:[P.length>0&&s.jsxs("div",{className:"p-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal.suggestions")}),P.slice(0,5).map((V,ne)=>s.jsx("button",{onClick:()=>R(V),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:V},ne))]}),J.length>0&&s.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal.recentSearches")}),J.slice(0,5).map((V,ne)=>s.jsx("button",{onClick:()=>R(V),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:V},ne))]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>j(k==="grid"?"list":"grid"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:k==="grid"?s.jsx(of,{className:"w-4 h-4"}):s.jsx(af,{className:"w-4 h-4"})}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(ct,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(go,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),s.jsxs("select",{value:N.orientation,onChange:V=>C({...N,orientation:V.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[s.jsx("option",{value:"all",children:o("imageSearchModal.allOrientations")}),s.jsx("option",{value:"landscape",children:o("imageSearchModal.landscape")}),s.jsx("option",{value:"portrait",children:o("imageSearchModal.portrait")}),s.jsx("option",{value:"squarish",children:o("imageSearchModal.square")})]}),s.jsxs("select",{value:N.color,onChange:V=>C({...N,color:V.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[s.jsx("option",{value:"all",children:o("imageSearchModal.allColors")}),s.jsx("option",{value:"black_and_white",children:"Black & White"}),s.jsx("option",{value:"black",children:o("imageSearchModal.black")}),s.jsx("option",{value:"white",children:o("imageSearchModal.white")}),s.jsx("option",{value:"yellow",children:o("imageSearchModal.yellow")}),s.jsx("option",{value:"orange",children:o("imageSearchModal.orange")}),s.jsx("option",{value:"red",children:o("imageSearchModal.red")}),s.jsx("option",{value:"purple",children:o("imageSearchModal.purple")}),s.jsx("option",{value:"magenta",children:o("imageSearchModal.magenta")}),s.jsx("option",{value:"green",children:o("imageSearchModal.green")}),s.jsx("option",{value:"teal",children:o("imageSearchModal.teal")}),s.jsx("option",{value:"blue",children:o("imageSearchModal.blue")})]}),s.jsxs("button",{onClick:()=>X(),className:"btn btn-primary btn-sm",disabled:g,children:[g?s.jsx(Wt,{className:"w-4 h-4 animate-spin"}):s.jsx(Ft,{className:"w-4 h-4"}),"Search"]})]})}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[v&&s.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:s.jsxs("div",{className:"flex",children:[s.jsx(pt,{className:"w-5 h-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:v})})]})}),g&&h.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Wt,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Searching for images..."})]})}):h.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ft,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No images found"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Try a different search term or adjust your filters"})]})}):s.jsx("div",{className:"p-4 overflow-y-auto",children:k==="grid"?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map(V=>s.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${(w==null?void 0:w.id)===V.id&&(w==null?void 0:w.source)===V.source?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>O(V),children:[s.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700",children:s.jsx("img",{src:V.thumbnail,alt:V.alt,className:"w-full h-full object-cover",loading:"lazy"})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center",children:s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-2",children:[s.jsx("button",{onClick:ne=>{ne.stopPropagation(),q(V)},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels.selectImage"),children:s.jsx(E0,{className:"w-4 h-4 text-green-600"})}),s.jsx("button",{onClick:ne=>{ne.stopPropagation(),window.open(V.url,"_blank")},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels.viewOriginal"),children:s.jsx(L0,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{onClick:ne=>{ne.stopPropagation(),Q(V)},className:`p-2 rounded-full shadow-lg ${T.some(ne=>ne.id===V.id&&ne.source===V.source)?"bg-red-500 text-white":"bg-white hover:bg-gray-100"}`,title:o("adminLabels.addToFavorites"),children:s.jsx(OA,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-black bg-opacity-75 text-white rounded",children:V.sourceName})}),V.photographer&&s.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:s.jsxs("p",{className:"text-xs text-white bg-black bg-opacity-75 px-2 py-1 rounded truncate",children:["by ",V.photographer]})})]},`${V.source}-${V.id}`))}):s.jsx("div",{className:"space-y-4",children:h.map(V=>s.jsxs("div",{className:`flex items-center space-x-4 p-4 rounded-lg border-2 transition-all cursor-pointer ${(w==null?void 0:w.id)===V.id&&(w==null?void 0:w.source)===V.source?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>O(V),children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:s.jsx("img",{src:V.thumbnail,alt:V.alt,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:V.alt}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:V.sourceName})]}),V.photographer&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",V.photographer]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[V.width,"  ",V.height]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:ne=>{ne.stopPropagation(),q(V)},className:"btn btn-primary btn-sm",children:[s.jsx(hn,{className:"w-4 h-4 mr-1"}),"Select"]}),s.jsx("button",{onClick:ne=>{ne.stopPropagation(),window.open(V.url,"_blank")},className:"btn btn-outline btn-sm",children:s.jsx(L0,{className:"w-4 h-4"})})]})]},`${V.source}-${V.id}`))})})]}),w&&s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-600 rounded-lg overflow-hidden",children:s.jsx("img",{src:w.thumbnail,alt:w.alt,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:w.alt}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w.sourceName,"  ",w.width,"  ",w.height]})]})]}),s.jsxs("button",{onClick:()=>q(w),className:"btn btn-primary",disabled:g,children:[g?s.jsx(Wt,{className:"w-4 h-4 animate-spin mr-2"}):s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Download & Select"]})]})})]})}):null},Ty=({isOpen:e,onClose:t,onSelect:r,collection:n="PRODUCTS",selectedMedia:a=null,multiple:i=!1})=>{const{t:o}=xe(),[c,d]=S.useState([]),[h,m]=S.useState(!1),[g,p]=S.useState(""),[v,x]=S.useState(n),[w,y]=S.useState(i?a||[]:a?[a]:[]),[k,j]=S.useState("grid"),[N,C]=S.useState({page:1,limit:20,total:0,pages:0}),P=[{id:"PRODUCTS",name:o("adminMedia.products"),icon:""},{id:"CATEGORIES",name:o("adminMedia.categories"),icon:""},{id:"BANNERS",name:o("adminMedia.banners"),icon:""},{id:"PROFILE",name:o("adminMedia.profile"),icon:""},{id:"DOCUMENTS",name:o("adminMedia.documents"),icon:""},{id:"VIDEOS",name:o("adminMedia.videos"),icon:""}];S.useEffect(()=>{e&&E()},[e,v,N.page,g]),S.useEffect(()=>{e&&(x(n),y(i?a||[]:a?[a]:[]))},[e,n,a,i]);const E=async()=>{m(!0);try{const $=new URLSearchParams({collection:v,page:N.page,limit:N.limit,...g&&{search:g}}),D=await fetch(`/api/media?${$}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(D.ok){const W=await D.json();d(W.data.media),C(W.data.pagination)}else throw new Error("Failed to load media")}catch($){console.error("Load media error:",$),Z.error("Failed to load media")}finally{m(!1)}},I=$=>{if(i){const D=w.some(W=>W.id===$.id);y(D?W=>W.filter(X=>X.id!==$.id):W=>[...W,$])}else y([$])},M=()=>{r(i?w:w[0]||null),t()},T=()=>{window.open(`/admin/media/upload?collection=${v}`,"_blank")},H=$=>w.some(D=>D.id===$.id),J=$=>{if($===0)return"0 Bytes";const D=1024,W=["Bytes","KB","MB","GB"],X=Math.floor(Math.log($)/Math.log(D));return parseFloat(($/Math.pow(D,X)).toFixed(2))+" "+W[X]};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o("adminMedia.selectMedia")}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o(i?"adminMedia.selectMultipleMedia":"adminMedia.selectSingleMedia")})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(ct,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:P.map($=>s.jsxs("button",{onClick:()=>{x($.id),C(D=>({...D,page:1}))},className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${v===$.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"mr-2",children:$.icon}),$.name]},$.id))})}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:o("adminMedia.searchMedia"),value:g,onChange:$=>p($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>j("grid"),className:`p-2 rounded-md ${k==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(af,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>j("list"),className:`p-2 rounded-md ${k==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(of,{className:"h-4 w-4"})}),s.jsxs("button",{onClick:T,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx(La,{className:"h-4 w-4 mr-2"}),o("adminMedia.upload")]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Dc,{className:"h-8 w-8 animate-spin text-blue-500"})}):c.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:o("adminMedia.noMediaFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:o("adminMedia.noMediaInCollection")}),s.jsxs("button",{onClick:T,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[s.jsx(La,{className:"h-4 w-4 mr-2"}),o("adminMedia.uploadFirstMedia")]})]}):s.jsxs(s.Fragment,{children:[k==="grid"?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:c.map($=>s.jsxs("div",{onClick:()=>I($),className:`relative group cursor-pointer rounded-lg border-2 overflow-hidden transition-all ${H($)?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:$.mimeType.startsWith("image/")?s.jsx("img",{src:$.thumbnailUrl||$.url,alt:$.alt||$.originalName,className:"w-full h-full object-cover",loading:"lazy"}):s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(pr,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("span",{className:"text-xs",children:$.mimeType.split("/")[1].toUpperCase()})]})}),H($)&&s.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 text-white rounded-full p-1",children:s.jsx(E0,{className:"h-3 w-3"})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity flex items-center justify-center",children:s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white text-center",children:[s.jsx("p",{className:"text-sm font-medium truncate px-2",children:$.originalName}),s.jsx("p",{className:"text-xs",children:J($.size)})]})})]},$.id))}):s.jsx("div",{className:"space-y-2",children:c.map($=>s.jsxs("div",{onClick:()=>I($),className:`flex items-center p-3 rounded-lg border cursor-pointer transition-all ${H($)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center flex-shrink-0 mr-4",children:$.mimeType.startsWith("image/")?s.jsx("img",{src:$.thumbnailUrl||$.url,alt:$.alt||$.originalName,className:"w-full h-full object-cover rounded"}):s.jsx(pr,{className:"w-6 h-6 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:$.originalName}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[J($.size),"  ",$.mimeType]})]}),H($)&&s.jsx("div",{className:"ml-4",children:s.jsx(E0,{className:"h-5 w-5 text-blue-500"})})]},$.id))}),N.pages>1&&s.jsxs("div",{className:"flex items-center justify-center mt-6 gap-2",children:[s.jsx("button",{onClick:()=>C($=>({...$,page:$.page-1})),disabled:N.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia.previous")}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[N.page," / ",N.pages]}),s.jsx("button",{onClick:()=>C($=>({...$,page:$.page+1})),disabled:N.page===N.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia.next")})]})]})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:w.length>0&&s.jsx("span",{children:i?`${w.length} ${o("adminMedia.itemsSelected")}`:`${w.length} ${o("adminMedia.itemSelected")}`})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:o("adminMedia.cancel")}),s.jsx("button",{onClick:M,disabled:w.length===0,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o(i?"adminMedia.selectItems":"adminMedia.selectItem")})]})]})]})}):null},MM=({isOpen:e,onClose:t,onSubmit:r,editingProduct:n,categories:a,subcategories:i,uploadedImage:o,setUploadedImage:c,handleImageUpload:d,setShowImageSearch:h,setShowMediaPicker:m})=>{const{t:g}=xe(),[p,v]=S.useState("basic"),{register:x,handleSubmit:w,formState:{errors:y,isDirty:k},watch:j,setValue:N,reset:C}=ji();S.useEffect(()=>{const M=T=>{T.key==="Escape"&&e&&(k?window.confirm("You have unsaved changes. Are you sure you want to close without saving?")&&P():P())};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[e,k]),S.useEffect(()=>{if(n){N("name",n.name||""),N("nameIs",n.nameIs||""),N("price",n.price||0),N("stock",n.stock||0),N("category",n.category||""),N("subcategory",n.subcategory||""),N("isAgeRestricted",n.isAgeRestricted||!1),N("ageRestriction",n.ageRestriction||18),N("description",n.description||""),N("descriptionIs",n.descriptionIs||""),N("volume",n.volume||""),N("volumeIs",n.volumeIs||""),N("alcoholContent",n.alcoholContent||""),N("packaging",n.packaging||""),N("packagingIs",n.packagingIs||""),N("producer",n.producer||""),N("producerIs",n.producerIs||""),N("country",n.country||""),N("countryIs",n.countryIs||""),N("region",n.region||""),N("regionIs",n.regionIs||""),N("origin",n.origin||""),N("originIs",n.originIs||""),N("distributor",n.distributor||""),N("distributorIs",n.distributorIs||""),N("vintage",n.vintage||""),N("grapeVariety",n.grapeVariety||""),N("grapeVarietyIs",n.grapeVarietyIs||""),N("wineStyle",n.wineStyle||""),N("wineStyleIs",n.wineStyleIs||""),N("pricePerLiter",n.pricePerLiter||""),N("pricePerLiterIs",n.pricePerLiterIs||"");const M=T=>{if(!T)return"";if(Array.isArray(T))return T.join(", ");if(typeof T=="string")try{const H=JSON.parse(T);return Array.isArray(H)?H.join(", "):T}catch{return T}return""};N("foodPairings",M(n.foodPairings)),N("foodPairingsIs",M(n.foodPairingsIs)),N("specialAttributes",M(n.specialAttributes)),N("specialAttributesIs",M(n.specialAttributesIs)),N("certifications",M(n.certifications)),N("certificationsIs",M(n.certificationsIs)),N("atvrProductId",n.atvrProductId||""),N("atvrUrl",n.atvrUrl||""),N("atvrImageUrl",n.atvrImageUrl||""),N("availability",n.availability||"available"),N("availabilityIs",n.availabilityIs||""),N("imageUrl",n.imageUrl||""),n.imageUrl&&c(n.imageUrl),N("hasDiscount",n.hasDiscount||!1),N("originalPrice",n.originalPrice||0),N("discountPercentage",n.discountPercentage||0),N("discountStartDate",n.discountStartDate?n.discountStartDate.split("T")[0]:""),N("discountEndDate",n.discountEndDate?n.discountEndDate.split("T")[0]:""),N("discountReason",n.discountReason||""),N("discountReasonIs",n.discountReasonIs||"")}else C(),c(null)},[n,N,C,c]);const P=()=>{k&&!window.confirm(g("adminProductModal.unsavedChanges")||"You have unsaved changes. Are you sure you want to close without saving?")||(v("basic"),C(),c(null),t())},E=M=>{const T=J=>J?J.split(",").map($=>$.trim()).filter($=>$):[],H={...M,foodPairings:JSON.stringify(T(M.foodPairings)),foodPairingsIs:JSON.stringify(T(M.foodPairingsIs)),specialAttributes:JSON.stringify(T(M.specialAttributes)),specialAttributesIs:JSON.stringify(T(M.specialAttributesIs)),certifications:JSON.stringify(T(M.certifications)),certificationsIs:JSON.stringify(T(M.certificationsIs))};r(H)};if(!e)return null;const I=[{id:"basic",label:"Basic Info",icon:""},{id:"details",label:"Details",icon:""},{id:"origin",label:"Origin",icon:""},{id:"pairings",label:"Pairings & Attributes",icon:""},{id:"images",label:"Images",icon:""},{id:"discounts",label:"Discounts",icon:""}];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g(n?"adminProductsPage.editProduct":"adminProductsPage.newProductTitle")}),s.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(ct,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 px-6",children:s.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:I.map(M=>s.jsxs("button",{type:"button",onClick:()=>v(M.id),className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${p===M.id?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[s.jsx("span",{className:"mr-2",children:M.icon}),M.label]},M.id))})}),s.jsxs("form",{onSubmit:w(E),className:"flex-1 overflow-y-auto",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[p==="basic"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[g("adminProductsPage.nameEn")," *"]}),s.jsx("input",{...x("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Product name in English"}),y.name&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Name is required"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[g("adminProductsPage.nameIs")," *"]}),s.jsx("input",{...x("nameIs",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vruheiti  slensku"}),y.nameIs&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Icelandic name is required"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price (kr) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",...x("price",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),y.price&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Price is required"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stock *"}),s.jsx("input",{type:"number",min:"0",...x("stock",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),y.stock&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Stock is required"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age Restriction"}),s.jsx("input",{type:"number",min:"0",max:"100",...x("ageRestriction"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"18"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category *"}),s.jsxs("select",{...x("category",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:"Select a category"}),a==null?void 0:a.map(M=>s.jsx("option",{value:M.value,children:M.label},M.value))]}),y.category&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Category is required"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subcategory"}),s.jsxs("select",{...x("subcategory"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:"Select a subcategory"}),i==null?void 0:i.filter(M=>M.category===j("category")).map(M=>s.jsx("option",{value:M.value,children:M.label},M.value))]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...x("isAgeRestricted"),className:"rounded border-gray-300 dark:border-gray-600"}),s.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Age Restricted Product"})]})]}),p==="details"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (English)"}),s.jsx("textarea",{...x("description"),rows:4,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Product description in English"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Icelandic)"}),s.jsx("textarea",{...x("descriptionIs"),rows:4,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vrulsing  slensku"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Volume (EN)"}),s.jsx("input",{...x("volume"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 500 ml, 750 ml"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Volume (IS)"}),s.jsx("input",{...x("volumeIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., 500 ml, 750 ml"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Alcohol Content (%)"}),s.jsx("input",{...x("alcoholContent"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 5.0, 12.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vintage (Year)"}),s.jsx("input",{...x("vintage"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 2020"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Packaging (EN)"}),s.jsx("input",{...x("packaging"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Bottle, Can, Box"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Packaging (IS)"}),s.jsx("input",{...x("packagingIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., Flaska, Ds"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grape Variety (EN)"}),s.jsx("input",{...x("grapeVariety"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Cabernet Sauvignon"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grape Variety (IS)"}),s.jsx("input",{...x("grapeVarietyIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"rgutegund"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wine Style (EN)"}),s.jsx("input",{...x("wineStyle"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dry, Sweet, Sparkling"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wine Style (IS)"}),s.jsx("input",{...x("wineStyleIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vnstll"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price Per Liter (EN)"}),s.jsx("input",{...x("pricePerLiter"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 2,500 kr/L"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price Per Liter (IS)"}),s.jsx("input",{...x("pricePerLiterIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., 2.500 kr/L"})]})]})]}),p==="origin"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producer (EN)"}),s.jsx("input",{...x("producer"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Producer name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producer (IS)"}),s.jsx("input",{...x("producerIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Framleiandi"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country (EN)"}),s.jsx("input",{...x("country"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Iceland, France"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country (IS)"}),s.jsx("input",{...x("countryIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., sland, Frakkland"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Region (EN)"}),s.jsx("input",{...x("region"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Bordeaux, Tuscany"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Region (IS)"}),s.jsx("input",{...x("regionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Svi"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Origin (EN)"}),s.jsx("input",{...x("origin"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Specific origin details"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Origin (IS)"}),s.jsx("input",{...x("originIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Uppruni"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Distributor (EN)"}),s.jsx("input",{...x("distributor"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Distributor name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Distributor (IS)"}),s.jsx("input",{...x("distributorIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Dreifingaraili"})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"ATVR Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR Product ID"}),s.jsx("input",{...x("atvrProductId"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 01448",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR URL"}),s.jsx("input",{...x("atvrUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white text-xs",placeholder:"ATVR product page URL",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR Image URL"}),s.jsx("input",{...x("atvrImageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white text-xs",placeholder:"ATVR product image URL",readOnly:!0})]})]})]})]}),p==="pairings"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Food Pairings (EN)"}),s.jsx("input",{...x("foodPairings"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Fish, Fowl, Beef"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter food pairings separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Food Pairings (IS)"}),s.jsx("input",{...x("foodPairingsIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum, t.d., Fiskur, Alifuglar, Nautakjt"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn matarpr askilin me kommum"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Special Attributes (EN)"}),s.jsx("input",{...x("specialAttributes"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Organic, Vegan, Premium"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter special attributes separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Special Attributes (IS)"}),s.jsx("input",{...x("specialAttributesIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum, t.d., Lfrnt, Vegan, Premium"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn sreiginleika askilda me kommum"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Certifications (EN)"}),s.jsx("input",{...x("certifications"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Fair Trade, Kosher"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter certifications separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Certifications (IS)"}),s.jsx("input",{...x("certificationsIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn vottanir askildar me kommum"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Availability (EN)"}),s.jsxs("select",{...x("availability"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"special-order",children:"Special Order"}),s.jsx("option",{value:"coming-soon",children:"Coming Soon"}),s.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Availability (IS)"}),s.jsx("input",{...x("availabilityIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., Til rstfunar"})]})]})]}),p==="images"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product Image"}),s.jsxs("div",{className:"flex space-x-2 mb-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:d,className:"input flex-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"btn btn-outline flex items-center space-x-2",children:[s.jsx(Ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Search Online"})]}),s.jsxs("button",{type:"button",onClick:()=>m(!0),className:"btn btn-outline flex items-center space-x-2",children:[s.jsx(pr,{className:"w-4 h-4"}),s.jsx("span",{children:"Media Library"})]})]}),o&&s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:o,alt:"Product preview",className:"w-64 h-64 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"}),s.jsx("button",{type:"button",onClick:()=>c(null),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",children:s.jsx(ct,{className:"w-4 h-4"})})]}),!o&&s.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12 text-center",children:[s.jsx(pr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No image selected"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Upload an image, search online, or select from media library"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image URL (if not uploading)"}),s.jsx("input",{...x("imageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://example.com/image.jpg"})]})]}),p==="discounts"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("input",{type:"checkbox",...x("hasDiscount"),className:"rounded border-gray-300 dark:border-gray-600"}),s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Discount for this Product"})]}),j("hasDiscount")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Original Price (kr) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",...x("originalPrice",{min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Percentage (%) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",...x("discountPercentage",{min:0,max:100}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Start Date"}),s.jsx("input",{type:"date",...x("discountStartDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount End Date"}),s.jsx("input",{type:"date",...x("discountEndDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Reason (EN)"}),s.jsx("input",{...x("discountReason"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Seasonal Sale, Clearance"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Reason (IS)"}),s.jsx("input",{...x("discountReasonIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., rstabundin tsala"})]})]}),!j("hasDiscount")&&s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-8 text-center",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enable discount to configure discount settings for this product"})})]})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:P,className:"btn btn-outline px-6",children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary px-6",children:n?"Update Product":"Create Product"})]})})]})]})})},OM=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(z=>z.auth),{products:n,isLoading:a,error:i}=ke(z=>z.products),[o,c]=S.useState(!1),[d,h]=S.useState(!1),[m,g]=S.useState(!1),[p,v]=S.useState(!1),[x,w]=S.useState(null),[y,k]=S.useState(""),[j,N]=S.useState(""),[C,P]=S.useState(!1),[E,I]=S.useState(null),[M,T]=S.useState("grid"),{register:H,handleSubmit:J,formState:{errors:$},reset:D,setValue:W,watch:X}=ji({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:""}});S.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(ln({limit:100}))},[t,r]),S.useEffect(()=>{x?(W("name",x.name),W("nameIs",x.nameIs||""),W("description",x.description),W("descriptionIs",x.descriptionIs||""),W("price",x.price),W("stock",x.stock),W("category",x.category),W("subcategory",x.subcategory||""),W("isAgeRestricted",x.isAgeRestricted),W("imageUrl",x.imageUrl||""),W("hasDiscount",x.hasDiscount||!1),W("originalPrice",x.originalPrice||0),W("discountPercentage",x.discountPercentage||0),W("discountStartDate",x.discountStartDate?x.discountStartDate.split("T")[0]:""),W("discountEndDate",x.discountEndDate?x.discountEndDate.split("T")[0]:""),W("discountReason",x.discountReason||""),W("discountReasonIs",x.discountReasonIs||""),I(x.imageUrl||null)):(D(),I(null))},[x,W,D]);const G=async z=>{try{const ge={...z,price:parseFloat(z.price),stock:parseInt(z.stock),imageUrl:E||z.imageUrl};x?(await t(Vl({id:x.id,...ge})).unwrap(),Z.success(e("common.success"))):(await t(Ul(ge)).unwrap(),Z.success(e("common.success"))),c(!1),w(null),D(),I(null)}catch(ge){Z.error(ge.message||e("common.error"))}},R=async z=>{try{const ge=ee=>{if(!ee)return 0;if(typeof ee=="number")return ee;if(typeof ee=="string"){const K=ee.match(/(\d+(?:\.\d+)?)/);return K?parseFloat(K[1]):0}return 0},Me=ee=>({Sder:"CIDER_RTD",Bjr:"BEER",Beer:"BEER",Rauvn:"WINE",Hvtvn:"WINE",Rsavn:"WINE",Freyivn:"WINE","Red wine":"WINE","White wine":"WINE","Rose wine":"WINE","Sparkling wine":"WINE","Sterkt fengi":"SPIRITS",Spirits:"SPIRITS",Lkjr:"SPIRITS",Liqueur:"SPIRITS",Cider:"CIDER_RTD",Unknown:"WINE"})[ee]||"WINE",De={name:z.name,nameIs:z.nameIs||z.name,description:z.description||"",descriptionIs:z.descriptionIs||z.description||"",price:ge(z.price),stock:100,category:Me(z.category),ageRestriction:20,atvrImageUrl:z.image||"",alcoholContent:z.alcoholContent,volume:z.volume,volumeIs:z.volumeIs,country:z.country,countryIs:z.countryIs,region:z.region,regionIs:z.regionIs,origin:z.origin,originIs:z.originIs,producer:z.producer,producerIs:z.producerIs,distributor:z.distributor,distributorIs:z.distributorIs,packaging:z.packaging,packagingIs:z.packagingIs,packagingWeight:z.packagingWeight,packagingWeightIs:z.packagingWeightIs,carbonFootprint:z.carbonFootprint,carbonFootprintIs:z.carbonFootprintIs,vintage:z.vintage,grapeVariety:z.grapeVariety,grapeVarietyIs:z.grapeVarietyIs,wineStyle:z.wineStyle,wineStyleIs:z.wineStyleIs,pricePerLiter:z.pricePerLiter,pricePerLiterIs:z.pricePerLiterIs,subcategories:z.subcategories||[],foodPairings:JSON.stringify(z.foodPairings||[]),foodPairingsIs:JSON.stringify(z.foodPairingsIs||[]),specialAttributes:JSON.stringify(z.specialAttributes||[]),specialAttributesIs:JSON.stringify(z.specialAttributesIs||[]),certifications:JSON.stringify(z.certifications||[]),certificationsIs:JSON.stringify(z.certificationsIs||[]),storeAvailability:z.storeAvailability?JSON.stringify(z.storeAvailability):null,atvrProductId:z.atvrProductId,atvrUrl:z.atvrUrl,availability:z.availability||"available",availabilityIs:z.availabilityIs};await t(Ul(De)).unwrap(),Z.success(`Product "${z.name}" imported successfully`)}catch(ge){console.error("Error importing product:",ge),Z.error(`Failed to import product: ${ge.message||"Unknown error"}`)}},O=z=>{w(z),c(!0)},q=async z=>{if(window.confirm(e("common.delete")+"?"))try{await t(Bu(z)).unwrap(),Z.success(e("common.success"))}catch(ge){Z.error(ge.message||e("common.error"))}},Q=z=>{const ge=z.target.files[0];if(ge){const Me=new FileReader;Me.onload=De=>{I(De.target.result)},Me.readAsDataURL(ge)}},le=z=>{I(z)},V=z=>{z&&z.url&&(I(z.url),W("imageUrl",z.url)),v(!1)},ne=n.filter(z=>{const ge=z.name.toLowerCase().includes(y.toLowerCase())||z.nameIs&&z.nameIs.toLowerCase().includes(y.toLowerCase()),Me=!j||z.category===j,De=!C||z.isAgeRestricted;return ge&&Me&&De}),pe=[{value:"WINE",label:e("categories.WINE")},{value:"BEER",label:e("categories.BEER")},{value:"BEERS",label:e("categories.BEERS")},{value:"CIDER_RTD",label:e("categories.CIDER_RTD")},{value:"SPIRITS",label:e("categories.SPIRITS")},{value:"NICOTINE",label:e("categories.NICOTINE")},{value:"NON_ALCOHOLIC",label:e("categories.NON_ALCOHOLIC")},{value:"OFFERS",label:e("categories.OFFERS")}],ye=[{value:"WHITE_WINE",label:e("subcategories.WHITE_WINE"),category:"WINE"},{value:"RED_WINE",label:e("subcategories.RED_WINE"),category:"WINE"},{value:"SPARKLING_WINE",label:e("subcategories.SPARKLING_WINE"),category:"WINE"},{value:"CHAMPAGNE",label:e("subcategories.CHAMPAGNE"),category:"WINE"},{value:"YELLOW_WINE",label:e("subcategories.YELLOW_WINE"),category:"WINE"},{value:"ROSE_WINE",label:e("subcategories.ROSE_WINE"),category:"WINE"},{value:"GIN",label:e("subcategories.GIN"),category:"SPIRITS"},{value:"COGNAC",label:e("subcategories.COGNAC"),category:"SPIRITS"},{value:"RUM",label:e("subcategories.RUM"),category:"SPIRITS"},{value:"LIQUEURS_SHOTS",label:e("subcategories.LIQUEURS_SHOTS"),category:"SPIRITS"},{value:"TEQUILA",label:e("subcategories.TEQUILA"),category:"SPIRITS"},{value:"VODKA",label:e("subcategories.VODKA"),category:"SPIRITS"},{value:"WHISKEY",label:e("subcategories.WHISKEY"),category:"SPIRITS"},{value:"VAPE",label:e("subcategories.VAPE"),category:"NICOTINE"},{value:"NICOTINE_PADS",label:e("subcategories.NICOTINE_PADS"),category:"NICOTINE"},{value:"SODA",label:e("subcategories.SODA"),category:"NON_ALCOHOLIC"},{value:"SOFT_DRINKS",label:e("subcategories.SOFT_DRINKS"),category:"NON_ALCOHOLIC"},{value:"ENERGY_DRINKS",label:e("subcategories.ENERGY_DRINKS"),category:"NON_ALCOHOLIC"}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(_e,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):a?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):i?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(pt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:e("common.error")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:i}),s.jsx("button",{onClick:()=>t(ln({limit:100})),className:"btn btn-primary",children:e("common.retry")})]})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminProductsPage.productManagement")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminProductsPage.manageProducts")})]}),s.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[s.jsxs("button",{onClick:()=>{w(null),c(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(yr,{className:"w-4 h-4 mr-2"}),e("adminProductsPage.newProduct")]}),s.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ue,{className:"w-4 h-4 mr-2"}),e("adminProducts.importFromATVR")]})]})]})})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminLabels.filters")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>T("grid"),className:`p-2 rounded-lg transition-colors ${M==="grid"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels.gridView"),children:s.jsx(af,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>T("list"),className:`p-2 rounded-lg transition-colors ${M==="list"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels.listView"),children:s.jsx(of,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminProductsPage.searchProducts"),value:y,onChange:z=>k(z.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:j,onChange:z=>N(z.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminProductsPage.allCategories")}),pe.map(z=>s.jsx("option",{value:z.value,children:z.label},z.value))]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:C,onChange:z=>P(z.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage.showOnlyAgeRestricted")})]})]})]}),M==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ne.map(z=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white rounded-lg mb-4 overflow-hidden p-2",children:z.imageUrl?s.jsx("img",{src:z.imageUrl.startsWith("http")?z.imageUrl:`http://192.168.8.62:5000${z.imageUrl}`,alt:z.name,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:s.jsx(Ue,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white line-clamp-2",children:z.nameIs||z.name}),z.isAgeRestricted&&s.jsx(pt,{className:"w-4 h-4 text-red-500 flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:z.descriptionIs||z.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[z.price.toLocaleString()," ",e("common.currency")]}),s.jsxs("span",{className:`text-sm px-2 py-1 rounded ${z.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":z.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[z.stock," ",e("adminProductsPage.inStock")]})]}),s.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[s.jsxs("button",{onClick:()=>O(z),className:"btn btn-outline btn-sm flex-1 flex items-center justify-center space-x-1",children:[s.jsx(fn,{className:"w-3 h-3"}),s.jsx("span",{children:e("common.edit")})]}),s.jsx("button",{onClick:()=>q(z.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900","data-testid":`delete-product-${z.id}`,"aria-label":`Delete ${z.name}`,children:s.jsx(sr,{className:"w-3 h-3"})})]})]})]},z.id))}):s.jsx("div",{className:"space-y-4",children:ne.map(z=>{var ge;return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-24 bg-white dark:bg-white rounded-lg overflow-hidden flex-shrink-0 p-2",children:z.imageUrl?s.jsx("img",{src:z.imageUrl.startsWith("http")?z.imageUrl:`http://192.168.8.62:5000${z.imageUrl}`,alt:z.name,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:s.jsx(Ue,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:z.nameIs||z.name}),z.isAgeRestricted&&s.jsx(pt,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:z.descriptionIs||z.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:((ge=z.category)==null?void 0:ge.name)||"Unknown"}),s.jsxs("span",{className:`text-xs px-2 py-1 rounded ${z.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":z.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[z.stock," ",e("adminProductsPage.inStock")]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400 text-lg whitespace-nowrap",children:[z.price.toLocaleString()," ",e("common.currency")]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>O(z),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(fn,{className:"w-3 h-3"}),s.jsx("span",{children:e("common.edit")})]}),s.jsx("button",{onClick:()=>q(z.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900","data-testid":`delete-product-${z.id}`,"aria-label":`Delete ${z.name}`,children:s.jsx(sr,{className:"w-3 h-3"})})]})]})]})})]})},z.id)})}),ne.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ue,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminProductsPage.noProductsFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminProductsPage.adjustSearchOrAdd")})]}),s.jsx(MM,{isOpen:o,onClose:()=>{c(!1),w(null),I(null)},onSubmit:G,editingProduct:x,categories:pe,subcategories:ye,uploadedImage:E,setUploadedImage:I,handleImageUpload:Q,setShowImageSearch:g,setShowMediaPicker:v})]}),d&&s.jsx(TM,{onImportProduct:R,onClose:()=>h(!1)}),m&&s.jsx(AM,{isOpen:m,onClose:()=>g(!1),onSelectImage:le,productName:(x==null?void 0:x.name)||"",category:(x==null?void 0:x.category)||"",initialQuery:(x==null?void 0:x.name)||""}),s.jsx(Ty,{isOpen:p,onClose:()=>v(!1),onSelect:V,collection:"PRODUCTS",multiple:!1})]})]})})},RM=({isOpen:e,editingCategory:t,onClose:r,onSubmit:n,showImagePicker:a,onImagePickerOpen:i,onImagePickerClose:o,selectedImage:c,onImageSelect:d,onImageRemove:h})=>{const{t:m}=xe(),{register:g,handleSubmit:p,formState:{errors:v},reset:x,setValue:w,watch:y}=ji({defaultValues:{name:"",nameIs:"",slug:"",description:"",descriptionIs:"",icon:"",sortOrder:0,isActive:!0}});S.useEffect(()=>{e&&t?(w("name",t.name),w("nameIs",t.nameIs||""),w("slug",t.slug||""),w("description",t.description||""),w("descriptionIs",t.descriptionIs||""),w("icon",t.icon||""),w("sortOrder",t.sortOrder||0),w("isActive",t.isActive)):e&&x()},[e,t,w,x]);const k=async j=>{try{const N={...j,sortOrder:parseInt(j.sortOrder),imageUrl:c||null};t?await n({id:t.id,...N},"edit"):await n(N,"create"),x(),r()}catch(N){Z.error(N.message||m("common.error"))}};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:m(t?"adminCategories.editCategory":"adminCategories.newCategory")}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ct,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:p(k),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[m("adminCategories.nameEn")," *"]}),s.jsx("input",{type:"text",...g("name",{required:m("adminCategories.nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterNameEn")}),v.name&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:v.name.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[m("adminCategories.nameIs")," *"]}),s.jsx("input",{type:"text",...g("nameIs",{required:m("adminCategories.nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterNameIs")}),v.nameIs&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:v.nameIs.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.slug")}),s.jsx("input",{type:"text",...g("slug"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterSlugEn")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m("adminCategories.slugHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.descEn")}),s.jsx("textarea",{...g("description"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"2",placeholder:m("adminPlaceholders.enterDescriptionEn")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.descIs")}),s.jsx("textarea",{...g("descriptionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"2",placeholder:m("adminPlaceholders.enterDescriptionIs")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.icon")}),s.jsx("input",{type:"text",...g("icon"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterIcon")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m("adminCategories.iconHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.sortOrder")}),s.jsx("input",{type:"number",...g("sortOrder"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterSortOrder")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m("adminCategories.sortOrderHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.categoryImageFromProduct")}),s.jsxs("div",{className:"flex items-center gap-3",children:[c&&s.jsx("div",{className:"w-16 h-16 bg-white dark:bg-white rounded border border-gray-200 dark:border-gray-200 flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:c,alt:"Category",className:"w-full h-full object-contain"})}),s.jsxs("button",{type:"button",onClick:i,className:"btn btn-outline flex items-center gap-2",children:[s.jsx(pr,{className:"w-4 h-4"}),m(c?"adminCategories.changeImage":"adminCategories.selectFromMedia")]}),c&&s.jsx("button",{type:"button",onClick:h,className:"btn btn-outline text-red-600 hover:text-red-700",children:m("adminCategories.removeImage")})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",...g("isActive"),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:m("adminCategories.active")})]})}),s.jsxs("div",{className:"flex items-center space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"btn btn-outline flex-1",children:m("common.cancel")}),s.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:m(t?"common.save":"common.add")})]})]})]})}),s.jsx(Ty,{isOpen:a,onClose:o,onSelect:j=>{d(j.url)},collection:"PRODUCTS",selectedMedia:c,multiple:!1})]}):null},DM=({subcategory:e,onEdit:t,onDelete:r})=>{var a,i,o;const{t:n}=xe();return s.jsx("div",{className:"px-6 py-4 pl-16",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.icon?s.jsx("span",{className:"text-lg text-white",children:e.icon}):s.jsx(nf,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:e.slug}),!e.isActive&&s.jsx("span",{className:"text-xs text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20 px-2 py-1 rounded",children:n("adminCategories.inactive")})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.descriptionIs||e.description||n("adminCategories.noDescription")}),s.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("adminCategories.productCount"),": ",((a=e._count)==null?void 0:a.products)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("adminCategories.sortOrder"),": ",e.sortOrder]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>t(e),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(fn,{className:"w-3 h-3"}),s.jsx("span",{children:n("common.edit")})]}),s.jsx("button",{onClick:()=>r(e.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((i=e._count)==null?void 0:i.products)>0,title:((o=e._count)==null?void 0:o.products)>0?n("adminCategories.cannotDeleteWithProducts"):"",children:s.jsx(sr,{className:"w-3 h-3"})})]})]})})},FM=({subcategories:e,onEdit:t,onDelete:r})=>{const{t:n}=xe();return!e||e.length===0?null:s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50",children:[s.jsx("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n("adminCategories.subcategories")})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(a=>s.jsx(DM,{subcategory:a,onEdit:t,onDelete:r},a.id))})]})},zM=({category:e,onEdit:t,onDelete:r,onEditSubcategory:n,onDeleteSubcategory:a})=>{var o,c,d,h;const{t:i}=xe();return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx("div",{className:"w-16 h-16 bg-white dark:bg-white rounded-lg flex items-center justify-center flex-shrink-0 border border-gray-200 dark:border-gray-200 overflow-hidden aspect-square",children:e.imageUrl?s.jsx("img",{src:e.imageUrl,alt:e.nameIs||e.name,className:"w-full h-full object-contain"}):e.icon?s.jsx("span",{className:"text-2xl",children:e.icon}):s.jsx(nf,{className:"w-6 h-6 text-blue-600 dark:text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:e.slug}),!e.isActive&&s.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20 px-2 py-1 rounded",children:i("adminCategories.inactive")})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.descriptionIs||e.description||i("adminCategories.noDescription")}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.productCount"),": ",((o=e._count)==null?void 0:o.products)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.subcategories"),": ",((c=e.subcategories)==null?void 0:c.length)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.sortOrder"),": ",e.sortOrder]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>t(e),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(fn,{className:"w-3 h-3"}),s.jsx("span",{children:i("common.edit")})]}),e.slug!=="tilbodin"&&s.jsx("button",{onClick:()=>r(e.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((d=e._count)==null?void 0:d.products)>0,title:((h=e._count)==null?void 0:h.products)>0?i("adminCategories.cannotDeleteWithProducts"):"",children:s.jsx(sr,{className:"w-3 h-3"})})]})]})}),e.subcategories&&e.subcategories.length>0&&s.jsx(FM,{subcategories:e.subcategories,onEdit:n,onDelete:a})]})},BM=({categories:e,searchTerm:t,onEdit:r,onDelete:n,onEditSubcategory:a,onDeleteSubcategory:i})=>{const{t:o}=xe(),c=e.filter(d=>t===""||d.name.toLowerCase().includes(t.toLowerCase())||d.nameIs.toLowerCase().includes(t.toLowerCase())||d.slug.toLowerCase().includes(t.toLowerCase()));return e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(nf,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:o("adminCategories.noCategories")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o("adminCategories.createFirstCategory")})]}):c.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o("common.noResults")})}):s.jsx("div",{className:"space-y-6",children:c.map(d=>s.jsx(zM,{category:d,onEdit:r,onDelete:n,onEditSubcategory:a,onDeleteSubcategory:i},d.id))})},$M=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(C=>C.auth),{categories:n,isLoading:a}=ke(C=>C.categories),[i,o]=S.useState(!1),[c,d]=S.useState(null),[h,m]=S.useState(!1),[g,p]=S.useState(null),[v,x]=S.useState("");S.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(hi({includeInactive:!0}))},[t,r]);const w=async(C,P)=>{try{P==="edit"?(await t(Wu(C)).unwrap(),Z.success(e("common.success"))):(await t(Hu(C)).unwrap(),Z.success(e("common.success"))),o(!1),d(null),p(null)}catch(E){Z.error(E.message||e("common.error"))}},y=C=>{d(C),o(!0)},k=async C=>{if(window.confirm(e("adminCategories.confirmDelete")))try{await t(qu(C)).unwrap(),Z.success(e("common.success"))}catch(P){Z.error(P||e("common.error"))}},j=()=>{Z.info("Subcategory editing will be implemented in a future update")},N=async()=>{Z.info("Subcategory deletion will be implemented in a future update")};return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(_e,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage.noPermission")})]})})})]}):a&&n.length===0?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsxs(_e,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminCategories.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminCategories.manageCategories")})]}),s.jsxs("button",{onClick:()=>{d(null),o(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 mt-4 sm:mt-0",children:[s.jsx(yr,{className:"w-4 h-4 mr-2"}),e("adminCategories.newCategory")]})]})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4 mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search categories by name...",value:v,onChange:C=>x(C.target.value),className:"input"}),v&&s.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]})}),s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx(BM,{categories:n,searchTerm:v,onEdit:y,onDelete:k,onEditSubcategory:j,onDeleteSubcategory:N}),s.jsx(RM,{isOpen:i,editingCategory:c,onClose:()=>{o(!1),d(null),p(null)},onSubmit:w,showImagePicker:h,onImagePickerOpen:()=>m(!0),onImagePickerClose:()=>m(!1),selectedImage:g,onImageSelect:C=>{p(C),m(!1)},onImageRemove:()=>p(null)})]})]})},ec=ve("receiptSettings/fetchReceiptSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/receipt-settings")).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch receipt settings")}}),eh=ve("receiptSettings/updateReceiptSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.put("/receipt-settings",e)).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update receipt settings")}}),th=ve("receiptSettings/uploadReceiptLogo",async(e,{rejectWithValue:t})=>{var r,n;try{const a=new FormData;return a.append("logo",e),(await ue.post("/receipt-settings/logo",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to upload logo")}}),rh=ve("receiptSettings/deleteReceiptLogo",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.delete("/receipt-settings/logo")).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete logo")}}),UM={settings:null,isLoading:!1,error:null,uploadProgress:0},oS=Vr({name:"receiptSettings",initialState:UM,reducers:{clearError:e=>{e.error=null},setUploadProgress:(e,t)=>{e.uploadProgress=t.payload},updateSettingsField:(e,t)=>{const{field:r,value:n}=t.payload;e.settings&&(e.settings[r]=n)}},extraReducers:e=>{e.addCase(ec.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ec.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(ec.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(eh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(eh.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(eh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(th.pending,t=>{t.uploadProgress=0,t.error=null}).addCase(th.fulfilled,(t,r)=>{t.uploadProgress=100,t.settings=r.payload.settings,t.error=null}).addCase(th.rejected,(t,r)=>{t.uploadProgress=0,t.error=r.payload}).addCase(rh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(rh.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(rh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{updateSettingsField:VM}=oS.actions,HM=oS.reducer;var uf={},lS={L:1,M:0,Q:3,H:2},cS={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},WM=cS;function dS(e){this.mode=WM.MODE_8BIT_BYTE,this.data=e}dS.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var qM=dS,Zd=lS;function Qs(e,t){this.totalCount=e,this.dataCount=t}Qs.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Qs.getRSBlocks=function(e,t){var r=Qs.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,a=new Array,i=0;i<n;i++)for(var o=r[i*3+0],c=r[i*3+1],d=r[i*3+2],h=0;h<o;h++)a.push(new Qs(c,d));return a};Qs.getRsBlockTable=function(e,t){switch(t){case Zd.L:return Qs.RS_BLOCK_TABLE[(e-1)*4+0];case Zd.M:return Qs.RS_BLOCK_TABLE[(e-1)*4+1];case Zd.Q:return Qs.RS_BLOCK_TABLE[(e-1)*4+2];case Zd.H:return Qs.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var KM=Qs;function uS(){this.buffer=new Array,this.length=0}uS.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var ZM=uS,Os={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Os.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Os.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var er=0;er<8;er++)Os.EXP_TABLE[er]=1<<er;for(var er=8;er<256;er++)Os.EXP_TABLE[er]=Os.EXP_TABLE[er-4]^Os.EXP_TABLE[er-5]^Os.EXP_TABLE[er-6]^Os.EXP_TABLE[er-8];for(var er=0;er<255;er++)Os.LOG_TABLE[Os.EXP_TABLE[er]]=er;var hS=Os,Wa=hS;function sh(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}sh.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=Wa.gexp(Wa.glog(this.get(r))+Wa.glog(e.get(n)));return new sh(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Wa.glog(this.get(0))-Wa.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=Wa.gexp(Wa.glog(e.get(n))+t);return new sh(r,0).mod(e)}};var mS=sh,cs=cS,pk=mS,GM=hS,Jn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Xt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Xt.getBCHDigit(t)-Xt.getBCHDigit(Xt.G15)>=0;)t^=Xt.G15<<Xt.getBCHDigit(t)-Xt.getBCHDigit(Xt.G15);return(e<<10|t)^Xt.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Xt.getBCHDigit(t)-Xt.getBCHDigit(Xt.G18)>=0;)t^=Xt.G18<<Xt.getBCHDigit(t)-Xt.getBCHDigit(Xt.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Xt.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case Jn.PATTERN000:return(t+r)%2==0;case Jn.PATTERN001:return t%2==0;case Jn.PATTERN010:return r%3==0;case Jn.PATTERN011:return(t+r)%3==0;case Jn.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case Jn.PATTERN101:return t*r%2+t*r%3==0;case Jn.PATTERN110:return(t*r%2+t*r%3)%2==0;case Jn.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new pk([1],0),r=0;r<e;r++)t=t.multiply(new pk([1,GM.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case cs.MODE_NUMBER:return 10;case cs.MODE_ALPHA_NUM:return 9;case cs.MODE_8BIT_BYTE:return 8;case cs.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case cs.MODE_NUMBER:return 12;case cs.MODE_ALPHA_NUM:return 11;case cs.MODE_8BIT_BYTE:return 16;case cs.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case cs.MODE_NUMBER:return 14;case cs.MODE_ALPHA_NUM:return 13;case cs.MODE_8BIT_BYTE:return 16;case cs.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var i=0,o=e.isDark(n,a),c=-1;c<=1;c++)if(!(n+c<0||t<=n+c))for(var d=-1;d<=1;d++)a+d<0||t<=a+d||c==0&&d==0||o==e.isDark(n+c,a+d)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<t-1;n++)for(var a=0;a<t-1;a++){var h=0;e.isDark(n,a)&&h++,e.isDark(n+1,a)&&h++,e.isDark(n,a+1)&&h++,e.isDark(n+1,a+1)&&h++,(h==0||h==4)&&(r+=3)}for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(r+=40);for(var m=0,a=0;a<t;a++)for(var n=0;n<t;n++)e.isDark(n,a)&&m++;var g=Math.abs(100*m/t/t-50)/5;return r+=g*10,r}},YM=Xt,JM=qM,fS=KM,gS=ZM,Fa=YM,XM=mS;function tn(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var ns=tn.prototype;ns.addData=function(e){var t=new JM(e);this.dataList.push(t),this.dataCache=null};ns.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};ns.getModuleCount=function(){return this.moduleCount};ns.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=fS.getRSBlocks(e,this.errorCorrectLevel),r=new gS,n=0,a=0;a<t.length;a++)n+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var i=this.dataList[a];r.put(i.mode,4),r.put(i.getLength(),Fa.getLengthInBits(i.mode,e)),i.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};ns.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=tn.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};ns.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)};ns.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=Fa.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t};ns.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*a,c=0;c<this.modules[i].length;c++){var d=c*a,h=this.modules[i][c];h&&(n.beginFill(0,100),n.moveTo(d,o),n.lineTo(d+a,o),n.lineTo(d+a,o+a),n.lineTo(d,o+a),n.endFill())}return n};ns.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};ns.setupPositionAdjustPattern=function(){for(var e=Fa.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],a=e[r];if(this.modules[n][a]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[n+i][a+o]=!0:this.modules[n+i][a+o]=!1}};ns.setupTypeNumber=function(e){for(var t=Fa.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};ns.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=Fa.getBCHTypeInfo(r),a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(var a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e};ns.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var c=0;c<2;c++)if(this.modules[n][o-c]==null){var d=!1;i<e.length&&(d=(e[i]>>>a&1)==1);var h=Fa.getMask(t,n,o-c);h&&(d=!d),this.modules[n][o-c]=d,a--,a==-1&&(i++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};tn.PAD0=236;tn.PAD1=17;tn.createData=function(e,t,r){for(var n=fS.getRSBlocks(e,t),a=new gS,i=0;i<r.length;i++){var o=r[i];a.put(o.mode,4),a.put(o.getLength(),Fa.getLengthInBits(o.mode,e)),o.write(a)}for(var c=0,i=0;i<n.length;i++)c+=n[i].dataCount;if(a.getLengthInBits()>c*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+c*8+")");for(a.getLengthInBits()+4<=c*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=c*8||(a.put(tn.PAD0,8),a.getLengthInBits()>=c*8));)a.put(tn.PAD1,8);return tn.createBytes(a,n)};tn.createBytes=function(e,t){for(var r=0,n=0,a=0,i=new Array(t.length),o=new Array(t.length),c=0;c<t.length;c++){var d=t[c].dataCount,h=t[c].totalCount-d;n=Math.max(n,d),a=Math.max(a,h),i[c]=new Array(d);for(var m=0;m<i[c].length;m++)i[c][m]=255&e.buffer[m+r];r+=d;var g=Fa.getErrorCorrectPolynomial(h),p=new XM(i[c],g.getLength()-1),v=p.mod(g);o[c]=new Array(g.getLength()-1);for(var m=0;m<o[c].length;m++){var x=m+v.getLength()-o[c].length;o[c][m]=x>=0?v.get(x):0}}for(var w=0,m=0;m<t.length;m++)w+=t[m].totalCount;for(var y=new Array(w),k=0,m=0;m<n;m++)for(var c=0;c<t.length;c++)m<i[c].length&&(y[k++]=i[c][m]);for(var m=0;m<a;m++)for(var c=0;c<t.length;c++)m<o[c].length&&(y[k++]=o[c][m]);return y};var QM=tn,Iy={};Object.defineProperty(Iy,"__esModule",{value:!0});var eO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tO=ky,ds=xS(tO),pS=S,Gd=xS(pS);function xS(e){return e&&e.__esModule?e:{default:e}}function rO(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var sO={bgColor:ds.default.oneOfType([ds.default.object,ds.default.string]).isRequired,bgD:ds.default.string.isRequired,fgColor:ds.default.oneOfType([ds.default.object,ds.default.string]).isRequired,fgD:ds.default.string.isRequired,size:ds.default.number.isRequired,title:ds.default.string,viewBoxSize:ds.default.number.isRequired,xmlns:ds.default.string},Ay=(0,pS.forwardRef)(function(e,t){var r=e.bgColor,n=e.bgD,a=e.fgD,i=e.fgColor,o=e.size,c=e.title,d=e.viewBoxSize,h=e.xmlns,m=h===void 0?"http://www.w3.org/2000/svg":h,g=rO(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Gd.default.createElement("svg",eO({},g,{height:o,ref:t,viewBox:"0 0 "+d+" "+d,width:o,xmlns:m}),c?Gd.default.createElement("title",null,c):null,Gd.default.createElement("path",{d:n,fill:r}),Gd.default.createElement("path",{d:a,fill:i}))});Ay.displayName="QRCodeSvg";Ay.propTypes=sO;Iy.default=Ay;Object.defineProperty(uf,"__esModule",{value:!0});uf.QRCode=void 0;var nO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aO=ky,Nn=sd(aO),iO=lS,oO=sd(iO),lO=QM,cO=sd(lO),yS=S,dO=sd(yS),uO=Iy,hO=sd(uO);function sd(e){return e&&e.__esModule?e:{default:e}}function mO(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var fO={bgColor:Nn.default.oneOfType([Nn.default.object,Nn.default.string]),fgColor:Nn.default.oneOfType([Nn.default.object,Nn.default.string]),level:Nn.default.string,size:Nn.default.number,value:Nn.default.string.isRequired},hf=(0,yS.forwardRef)(function(e,t){var r=e.bgColor,n=r===void 0?"#FFFFFF":r,a=e.fgColor,i=a===void 0?"#000000":a,o=e.level,c=o===void 0?"L":o,d=e.size,h=d===void 0?256:d,m=e.value,g=mO(e,["bgColor","fgColor","level","size","value"]),p=new cO.default(-1,oO.default[c]);p.addData(m),p.make();var v=p.modules;return dO.default.createElement(hO.default,nO({},g,{bgColor:n,bgD:v.map(function(x,w){return x.map(function(y,k){return y?"":"M "+k+" "+w+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:v.map(function(x,w){return x.map(function(y,k){return y?"M "+k+" "+w+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:h,viewBoxSize:v.length}))});uf.QRCode=hf;hf.displayName="QRCode";hf.propTypes=fO;var gO=uf.default=hf;const pO=({order:e,settings:t,template:r="modern",paperSize:n="80mm",showBarcode:a=!0,showQrCode:i=!0,className:o=""})=>{var v;const c=x=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(x),d=x=>new Intl.DateTimeFormat("is-IS",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(x)),h=()=>t.companyNameIs||t.companyName,m=()=>t.companyAddressIs||t.companyAddress,g=()=>t.footerTextIs||t.footerText,p=()=>t.fromNameIs||t.fromName;return s.jsxs("div",{className:`receipt receipt-${r} receipt-${n} ${o}`,children:[s.jsxs("div",{className:"header",style:{backgroundColor:t.headerColor,color:"white"},children:[t.logoUrl&&s.jsx("div",{className:"mb-2",children:s.jsx("img",{src:t.logoUrl,alt:h(),className:"h-12 mx-auto",style:{maxHeight:"48px"}})}),s.jsx("div",{className:"company-name",style:{color:"white"},children:h()}),m()&&s.jsx("div",{className:"company-details",children:m()}),t.companyPhone&&s.jsx("div",{className:"company-details",children:t.companyPhone}),t.companyEmail&&s.jsx("div",{className:"company-details",children:t.companyEmail}),t.companyWebsite&&s.jsx("div",{className:"company-details",children:t.companyWebsite}),t.taxId&&s.jsxs("div",{className:"company-details",children:["VSK nr.",": ",t.taxId]})]}),s.jsxs("div",{className:"content",children:[s.jsxs("div",{className:"order-info",children:[s.jsxs("div",{className:"order-number",children:["Pntun",": #",e.orderNumber]}),s.jsxs("div",{className:"order-details",children:["Dagsetning",": ",d(e.createdAt)]}),e.customer&&s.jsxs("div",{className:"order-details",children:["Viskiptavinur",": ",e.customer.name]}),e.deliveryMethod&&s.jsxs("div",{className:"order-details",children:["Afhendingarafer",": ",e.deliveryMethod==="PICKUP"?"Skja  verslun":"Heimsending"]}),e.deliveryMethod==="PICKUP"&&e.pickupTime&&s.jsxs("div",{className:"order-details",children:["Afhendingartmi",": ",e.pickupTime]}),e.deliveryAddress&&s.jsxs("div",{className:"order-details",children:["Heimilisfang",": ",e.deliveryAddress.address]}),e.paymentMethod&&s.jsxs("div",{className:"order-details",children:["Greisla",": ",e.paymentMethod]})]}),s.jsx("div",{className:"items",children:(v=e.orderItems)==null?void 0:v.map((x,w)=>{var y,k;return s.jsxs("div",{className:"item",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"item-name",children:(y=x.product)==null?void 0:y.name}),x.quantity>1&&s.jsxs("div",{className:"item-details",children:[x.quantity," x ",c(((k=x.product)==null?void 0:k.price)||0)]}),x.notes&&s.jsxs("div",{className:"item-details",children:["Athugasemd",": ",x.notes]})]}),s.jsx("div",{className:"item-price",children:c(x.totalPrice||0)})]},w)})}),s.jsxs("div",{className:"totals",children:[s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["Undaneginn VSK",":"]}),s.jsx("span",{children:c(e.subtotal||0)})]}),e.shippingCost>0&&s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["Sendingarkostnaur",":"]}),s.jsx("span",{children:c(e.shippingCost)})]}),e.taxAmount>0&&s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["VSK",":"]}),s.jsx("span",{children:c(e.taxAmount)})]}),s.jsxs("div",{className:"total-line final",children:[s.jsxs("span",{children:["Samtals",":"]}),s.jsx("span",{children:c(e.totalAmount||0)})]})]}),(a||i)&&s.jsxs("div",{className:"codes",children:[i&&s.jsxs("div",{className:"qr-code",children:[s.jsx("div",{className:"text-xs mb-1",children:"QR ki"}),s.jsx("div",{className:"w-20 h-20 mx-auto flex items-center justify-center",children:s.jsx(gO,{value:`${window.location.origin}/orders/${e.id}`,size:80,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]}),a&&s.jsxs("div",{className:"barcode",children:[s.jsx("div",{className:"text-xs mb-1",children:"Strikamerki"}),s.jsx("div",{className:"h-8 bg-gray-200 mx-auto flex items-center justify-center text-xs",children:"||||||||||||||||||||"})]})]}),s.jsxs("div",{className:"footer",children:[g()&&s.jsx("div",{className:"footer-text",children:g()}),s.jsxs("div",{className:"company-info",children:[p()," - ",m()]}),s.jsxs("div",{className:"company-info",children:[t.companyPhone," - ",t.companyEmail]})]})]})]})},xO=({isOpen:e,onClose:t,order:r,onEmailSent:n})=>{var C;const{t:a}=xe(),i=it(),[o,c]=S.useState(!1),[d,h]=S.useState(!1),[m,g]=S.useState(null),[p,v]=S.useState("screen"),{receiptSettings:x,loading:w}=ke(P=>P.receiptSettings),{user:y}=ke(P=>P.auth);S.useEffect(()=>{e&&!x&&i(ec())},[e,x,i]);const k=()=>{v("print"),setTimeout(()=>{window.print(),v("screen")},100)},j=async()=>{if(r!=null&&r.id){c(!0);try{const P=await fetch(`/api/orders/${r.id}/receipt/pdf`,{headers:{Authorization:`Bearer ${y==null?void 0:y.token}`}});if(P.ok){const E=await P.blob(),I=window.URL.createObjectURL(E),M=document.createElement("a");M.href=I,M.download=`receipt-${r.orderNumber}.pdf`,document.body.appendChild(M),M.click(),window.URL.revokeObjectURL(I),document.body.removeChild(M)}else throw new Error("Failed to generate PDF")}catch(P){console.error("Error downloading PDF:",P),alert(a("receipts.pdfDownloadError"))}finally{c(!1)}}},N=async()=>{var P;if(!(r!=null&&r.id)||!((P=r==null?void 0:r.customer)!=null&&P.email)){alert(a("receipts.noEmailAddress"));return}c(!0),g(null);try{const E=await i(Du({orderId:r.id,email:r.customer.email})).unwrap();h(!0),n&&n(E)}catch(E){console.error("Error sending email:",E),g(E.message||a("receipts.emailSendError"))}finally{c(!1)}};return!e||!r?null:s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50 dark:bg-black/70",onClick:t}),s.jsxs("div",{className:"inline-block w-full max-w-4xl px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white dark:bg-gray-800 rounded-lg shadow-xl sm:my-8 sm:align-middle sm:p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a("receipts.receiptForOrder")," #",r.orderNumber]}),s.jsx("button",{onClick:t,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(ct,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[s.jsxs("button",{onClick:k,className:"btn btn-outline flex items-center gap-2",disabled:o,children:[s.jsx(by,{className:"w-4 h-4"}),a("receipts.print")]}),s.jsxs("button",{onClick:j,disabled:o,className:"btn btn-outline flex items-center gap-2",children:[s.jsx(hn,{className:"w-4 h-4"}),a(o?"common.loading":"receipts.downloadPdf")]}),((C=r.customer)==null?void 0:C.email)&&s.jsxs("button",{onClick:N,disabled:o||d,className:`btn flex items-center gap-2 ${d?"btn-secondary":"btn-primary"}`,children:[s.jsx(Zr,{className:"w-4 h-4"}),a(o?"common.sending":d?"receipts.emailSent":"receipts.emailReceipt")]})]}),m&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded",children:m}),d&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-700 text-green-700 dark:text-green-300 rounded",children:a("receipts.emailSentSuccess")}),s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-900/50",children:w?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:a("common.loading")})}):x?s.jsx("div",{className:"max-w-md mx-auto",children:s.jsx(pO,{order:r,settings:x,template:x.template,paperSize:x.paperSize,showBarcode:x.showBarcode,showQrCode:x.showQrCode,className:p==="print"?"receipt-print":""})}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-gray-500 dark:text-gray-400 mb-2",children:a("receipts.settingsNotFound")}),s.jsx("div",{className:"text-sm text-gray-400 dark:text-gray-500",children:a("receipts.configureInSettings")})]})}),s.jsx("div",{className:"mt-6 flex justify-end gap-2",children:s.jsx("button",{onClick:t,className:"btn btn-secondary dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:a("common.close")})})]})]})})},yO=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(X=>X.auth),{orders:n,isLoading:a}=ke(X=>X.orders),[i,o]=S.useState(""),[c,d]=S.useState(""),[h,m]=S.useState(""),[g,p]=S.useState(null),[v,x]=S.useState(!1),[w,y]=S.useState(!1),[k,j]=S.useState(!1),[N,C]=S.useState(""),[P,E]=S.useState("");S.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(fo({limit:100}))},[t,r]);const I=X=>{switch(X){case"PENDING":return s.jsx(Ht,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return s.jsx(Ue,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Nr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(wt,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return s.jsx(lf,{className:"w-5 h-5 text-red-600"});default:return s.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},M=X=>e("orders.statuses")[X],T=X=>{switch(X){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=n.filter(X=>{var q,Q;const G=X.orderNumber.toLowerCase().includes(i.toLowerCase())||((q=X.user)==null?void 0:q.fullName)&&X.user.fullName.toLowerCase().includes(i.toLowerCase())||((Q=X.user)==null?void 0:Q.username)&&X.user.username.toLowerCase().includes(i.toLowerCase()),R=!c||X.status===c,O=!h||X.deliveryMethod===h;return G&&R&&O}),J=async()=>{try{await t(zl({orderId:g.id,status:N})).unwrap(),Z.success(e("adminPage.statusUpdated")),x(!1),p(null),C("")}catch(X){Z.error(X.message||e("adminPage.errorOccurred"))}},$=async()=>{try{await t(Ru({id:g.id,deliveryPersonId:P})).unwrap(),Z.success(e("adminPage.deliveryAssigned")),y(!1),p(null),E("")}catch(X){Z.error(X.message||e("adminPage.errorOccurred"))}},D=[{value:"PENDING",label:e("orders.statuses.PENDING")},{value:"CONFIRMED",label:e("orders.statuses.CONFIRMED")},{value:"PREPARING",label:e("orders.statuses.PREPARING")},{value:"OUT_FOR_DELIVERY",label:e("orders.statuses.OUT_FOR_DELIVERY")},{value:"DELIVERED",label:e("orders.statuses.DELIVERED")},{value:"CANCELLED",label:e("orders.statuses.CANCELLED")}],W=[{id:1,name:"Jn Jnsson",phone:"+354 123 4567"},{id:2,name:"Anna Sigurardttir",phone:"+354 765 4321"},{id:3,name:"Magns Magnsson",phone:"+354 987 6543"}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(_e,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):a?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminPage.orderManagement")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminPage.manageOrders")})]})})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminPage.searchOrders"),value:i,onChange:X=>o(X.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:c,onChange:X=>d(X.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminPage.allStatuses")}),D.map(X=>s.jsx("option",{value:X.value,children:X.label},X.value))]}),s.jsxs("select",{value:h,onChange:X=>m(X.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminPage.allDeliveryMethods")}),s.jsx("option",{value:"DELIVERY",children:e("adminPage.homeDelivery")}),s.jsx("option",{value:"PICKUP",children:e("adminPage.storePickup")})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(go,{className:"w-4 h-4 mr-2"}),H.length," ",e("adminPage.results")]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.order")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.customer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.status")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.delivery")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.amount")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.date")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map(X=>{var G,R,O;return s.jsxs("tr",{onClick:()=>{p(X),j(!0)},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ue,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["#",X.orderNumber]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[X.items.length," ",e("cart.items")]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ur,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((G=X.user)==null?void 0:G.fullName)||((R=X.user)==null?void 0:R.username)||e("common.unknown")}),((O=X.user)==null?void 0:O.email)&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:X.user.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 w-fit ${T(X.status)}`,children:[I(X.status),s.jsx("span",{children:M(X.status)})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(mn,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 mr-2"}),s.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:X.deliveryMethod==="PICKUP"?e("ordersPage.pickup"):e("ordersPage.homeDelivery")})]}),X.deliveryPerson&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e("adminPage.deliveryPerson"),": ",X.deliveryPerson.fullName]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[X.totalAmount.toLocaleString()," ",e("common.currency")]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(X.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>{p(X),j(!0)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-900 dark:hover:text-purple-300 transition-colors duration-200 flex items-center space-x-1",title:e("receipts.viewReceipt"),children:[s.jsx(P_,{className:"w-4 h-4"}),s.jsx("span",{children:e("receipts.receipt")})]}),s.jsx("button",{onClick:()=>{p(X),x(!0),C(X.status)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200",children:e("adminPage.update")}),X.deliveryMethod==="DELIVERY"&&!X.deliveryPerson&&X.status==="CONFIRMED"&&s.jsx("button",{onClick:()=>{p(X),y(!0)},className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200",children:e("adminPage.assign")})]})})]},X.id)})})]})})}),H.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ue,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminPage.noOrdersFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage.adjustSearchCriteria")})]}),v&&g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage.updateOrder")," #",g.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage.newStatus")}),s.jsx("select",{value:N,onChange:X=>C(X.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:D.map(X=>s.jsx("option",{value:X.value,children:X.label},X.value))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{x(!1),p(null),C("")},className:"btn btn-outline flex-1",children:e("common.cancel")}),s.jsx("button",{onClick:J,className:"btn btn-primary flex-1",children:e("adminPage.update")})]})]})}),w&&g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage.assignDeliveryPerson")," #",g.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage.deliveryPerson")}),s.jsxs("select",{value:P,onChange:X=>E(X.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:e("adminPage.selectDeliveryPerson")}),W.map(X=>s.jsxs("option",{value:X.id,children:[X.name," (",X.phone,")"]},X.id))]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{y(!1),p(null),E("")},className:"btn btn-outline flex-1",children:e("common.cancel")}),s.jsx("button",{onClick:$,disabled:!P,className:"btn btn-primary flex-1",children:e("adminPage.assign")})]})]})}),s.jsx(xO,{isOpen:k,onClose:()=>j(!1),order:g,onEmailSent:()=>{Z.success(e("receipts.emailSentSuccess"))}})]})})]})})},bO=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(K=>K.auth),{products:n,categories:a}=ke(K=>K.products),[i,o]=S.useState([]),[c,d]=S.useState(null),[h,m]=S.useState({name:"",email:"",phone:""}),[g,p]=S.useState(""),[v,x]=S.useState(""),[w,y]=S.useState("cash"),[k]=S.useState("COMPLETED"),[j,N]=S.useState(""),[C,P]=S.useState(""),[E,I]=S.useState([]),[M,T]=S.useState([]),[H,J]=S.useState(!1),[$,D]=S.useState(!1),[W,X]=S.useState(null);S.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(ln({limit:100})),t(hi()),G(),R())},[t,r]);const G=async()=>{try{const K=await ue.get("/shipping");I(K.data),K.data.length>0&&P(K.data[0].id)}catch(K){console.error("Error fetching shipping options:",K)}},R=async()=>{try{const K=await fetch("/api/payment-gateways",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(K.ok){const Ne=((await K.json()).data.gateways||[]).filter(Fe=>Fe.isEnabled);T(Ne),Ne.length>0&&y(Ne[0].provider)}}catch(K){console.error("Error fetching payment gateways:",K),Z.error("Failed to load payment methods")}},O=n.filter(K=>{const be=K.name.toLowerCase().includes(g.toLowerCase())||K.nameIs.toLowerCase().includes(g.toLowerCase()),Ne=!v||K.categoryId===parseInt(v);return be&&Ne&&K.isActive}),q=K=>{const be=i.find(Ne=>Ne.productId===K.id);o(be?i.map(Ne=>Ne.productId===K.id?{...Ne,quantity:Ne.quantity+1}:Ne):[...i,{productId:K.id,product:K,quantity:1,price:K.price}])},Q=(K,be)=>{be<=0?o(i.filter(Ne=>Ne.productId!==K)):o(i.map(Ne=>Ne.productId===K?{...Ne,quantity:be}:Ne))},le=K=>{o(i.filter(be=>be.productId!==K))},V=i.reduce((K,be)=>K+be.price*be.quantity,0),ne=E.find(K=>K.id===parseInt(C)),pe=ne?ne.fee:0,ye=V+pe,z=async K=>{if(!(K.length<2))try{return(await ue.get(`/customers?search=${K}&limit=10`)).data.customers||[]}catch(be){return console.error("Error searching customers:",be),[]}},ge=async()=>{var K,be;if(i.length===0){Z.error("Cart is empty");return}if(!c&&!h.email){Z.error("Please select a customer or enter guest information");return}if(!C){Z.error("Please select a shipping option");return}J(!0);try{const Ne={items:i.map(Ye=>({productId:Ye.productId,quantity:Ye.quantity,price:Ye.price})),shippingOptionId:parseInt(C),paymentMethod:w,paymentStatus:k,notes:j,...c?{customerId:c.id}:{guestInfo:h}},Fe=await ue.post("/orders/pos",Ne);X(Fe.data.order),D(!0),o([]),d(null),m({name:"",email:"",phone:""}),N(""),Z.success("Order processed successfully!")}catch(Ne){console.error("Error processing order:",Ne),Z.error(((be=(K=Ne.response)==null?void 0:K.data)==null?void 0:be.message)||"Failed to process order")}finally{J(!1)}},Me=()=>{window.print()},De=async K=>{if(W)try{await ue.post(`/orders/${W.id}/receipt/email`,{email:K}),Z.success("Receipt sent successfully!")}catch(be){console.error("Error sending receipt:",be),Z.error("Failed to send receipt")}},ee=async()=>{if(W)try{const K=await ue.get(`/orders/${W.id}/receipt/pdf`,{responseType:"blob"}),be=window.URL.createObjectURL(new Blob([K.data])),Ne=document.createElement("a");Ne.href=be,Ne.setAttribute("download",`receipt-${W.orderNumber}.pdf`),document.body.appendChild(Ne),Ne.click(),Ne.remove(),window.URL.revokeObjectURL(be)}catch(K){console.error("Error downloading PDF:",K),Z.error("Failed to download PDF")}};return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(_e,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("admin.accessDeniedMessage")})]})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("pos.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("pos.description")})]})}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsxs("div",{className:"col-span-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("pos.customer")}),c?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ur,{className:"w-5 h-5 text-blue-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:c.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:c.email})]})]}),s.jsx("button",{onClick:()=>d(null),className:"text-red-600 hover:text-red-800",children:s.jsx(ct,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("pos.searchCustomers"),className:"input pl-10 w-full",onChange:async K=>{const be=K.target.value;be.length>=2&&await z(be)}})]}),s.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:e("pos.or")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("input",{type:"text",placeholder:e("pos.guestName"),value:h.name,onChange:K=>m({...h,name:K.target.value}),className:"input"}),s.jsx("input",{type:"email",placeholder:e("pos.guestEmail"),value:h.email,onChange:K=>m({...h,email:K.target.value}),className:"input"}),s.jsx("input",{type:"tel",placeholder:e("pos.guestPhone"),value:h.phone,onChange:K=>m({...h,phone:K.target.value}),className:"input"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("pos.searchProducts"),value:g,onChange:K=>p(K.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:v,onChange:K=>x(K.target.value),className:"input w-full md:w-48",children:[s.jsx("option",{value:"",children:e("pos.allCategories")}),a.map(K=>s.jsx("option",{value:K.id,children:K.name},K.id))]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:O.map(K=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer bg-white dark:bg-gray-800",onClick:()=>q(K),children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white rounded-lg mb-3 flex items-center justify-center border border-gray-200 dark:border-gray-300",children:K.imageUrl?s.jsx("img",{src:K.imageUrl,alt:K.name,className:"w-full h-full object-contain rounded-lg p-2"}):s.jsx(Ue,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white mb-1 line-clamp-2",children:K.name}),s.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[K.price.toLocaleString()," ISK"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("pos.stock"),": ",K.stock]})]},K.id))})]})]}),s.jsx("div",{className:"col-span-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx($r,{className:"w-5 h-5 mr-2"}),e("pos.cartTitle")," (",i.length," ",e("pos.cartItems"),")"]}),s.jsx("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:i.map(K=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:K.product.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[K.price.toLocaleString()," ISK each"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>Q(K.productId,K.quantity-1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(Wh,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center text-sm font-medium",children:K.quantity}),s.jsx("button",{onClick:()=>Q(K.productId,K.quantity+1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(yr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>le(K.productId),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-full",children:s.jsx(ct,{className:"w-4 h-4"})})]})]},K.productId))}),s.jsxs("div",{className:"space-y-2 mb-6",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("pos.subtotal"),":"]}),s.jsxs("span",{children:[V.toLocaleString()," ISK"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("pos.shipping"),":"]}),s.jsxs("span",{children:[pe.toLocaleString()," ISK"]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 dark:border-gray-700 pt-2",children:[s.jsxs("span",{children:[e("pos.total"),":"]}),s.jsxs("span",{children:[ye.toLocaleString()," ISK"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.paymentMethod")}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:M.length>0?M.map(K=>{let be=un;return K.provider==="valitor"||K.provider==="rapyd"||K.provider==="stripe"||K.provider==="paypal"||K.provider==="netgiro"||K.provider==="teya"?be=un:(K.provider==="cash_on_delivery"||K.provider==="pay_on_pickup")&&(be=CA),s.jsxs("button",{onClick:()=>y(K.provider),className:`p-3 rounded-lg border text-sm font-medium transition-all ${w===K.provider?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 ring-2 ring-blue-200":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300 hover:border-gray-400"}`,children:[s.jsx(be,{className:"w-5 h-5 mx-auto mb-1"}),s.jsx("div",{className:"text-xs truncate",children:K.displayName}),s.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:K.environment==="production"?"Live":"Test"})]},K.id)}):s.jsx("div",{className:"col-span-2 text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No payment methods available. Please configure payment gateways in settings."})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.shippingOption")}),s.jsx("select",{value:C,onChange:K=>P(K.target.value),className:"input w-full",children:E.map(K=>s.jsxs("option",{value:K.id,children:[K.name," - ",K.fee.toLocaleString()," ISK"]},K.id))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.notes")}),s.jsx("textarea",{value:j,onChange:K=>N(K.target.value),className:"input w-full h-20 resize-none",placeholder:e("pos.orderNotes")})]}),s.jsx("button",{onClick:ge,disabled:i.length===0||H,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:H?s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(wt,{className:"w-4 h-4 mr-2"}),e("pos.processOrder")]})})]})})]}),$&&W&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Order Receipt - ",W.orderNumber]}),s.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ct,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Order Date:"}),s.jsx("p",{children:new Date(W.createdAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Status:"}),s.jsx("p",{className:"capitalize",children:W.status})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium mb-2",children:"Items:"}),s.jsx("div",{className:"space-y-2",children:W.items.map(K=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[K.product.name," x ",K.quantity]}),s.jsxs("span",{children:[(K.price*K.quantity).toLocaleString()," ISK"]})]},K.id))})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsxs("span",{children:[e("pos.total"),":"]}),s.jsxs("span",{children:[W.totalAmount.toLocaleString()," ISK"]})]})})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:Me,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(by,{className:"w-4 h-4 mr-2"}),"Print"]}),s.jsxs("button",{onClick:()=>{const K=prompt("Enter email address:");K&&De(K)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(vy,{className:"w-4 h-4 mr-2"}),"Email"]}),s.jsxs("button",{onClick:ee,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]})})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function nd(e){return e+.5|0}const ca=(e,t,r)=>Math.max(Math.min(e,r),t);function Sl(e){return ca(nd(e*2.55),0,255)}function _a(e){return ca(nd(e*255),0,255)}function Ln(e){return ca(nd(e/2.55)/100,0,1)}function xk(e){return ca(nd(e*100),0,100)}const us={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},z0=[..."0123456789ABCDEF"],vO=e=>z0[e&15],wO=e=>z0[(e&240)>>4]+z0[e&15],Yd=e=>(e&240)>>4===(e&15),kO=e=>Yd(e.r)&&Yd(e.g)&&Yd(e.b)&&Yd(e.a);function jO(e){var t=e.length,r;return e[0]==="#"&&(t===4||t===5?r={r:255&us[e[1]]*17,g:255&us[e[2]]*17,b:255&us[e[3]]*17,a:t===5?us[e[4]]*17:255}:(t===7||t===9)&&(r={r:us[e[1]]<<4|us[e[2]],g:us[e[3]]<<4|us[e[4]],b:us[e[5]]<<4|us[e[6]],a:t===9?us[e[7]]<<4|us[e[8]]:255})),r}const NO=(e,t)=>e<255?t(e):"";function _O(e){var t=kO(e)?vO:wO;return e?"#"+t(e.r)+t(e.g)+t(e.b)+NO(e.a,t):void 0}const SO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bS(e,t,r){const n=t*Math.min(r,1-r),a=(i,o=(i+e/30)%12)=>r-n*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function CO(e,t,r){const n=(a,i=(a+e/60)%6)=>r-r*t*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function PO(e,t,r){const n=bS(e,1,.5);let a;for(t+r>1&&(a=1/(t+r),t*=a,r*=a),a=0;a<3;a++)n[a]*=1-t-r,n[a]+=t;return n}function EO(e,t,r,n,a){return e===a?(t-r)/n+(t<r?6:0):t===a?(r-e)/n+2:(e-t)/n+4}function My(e){const r=e.r/255,n=e.g/255,a=e.b/255,i=Math.max(r,n,a),o=Math.min(r,n,a),c=(i+o)/2;let d,h,m;return i!==o&&(m=i-o,h=c>.5?m/(2-i-o):m/(i+o),d=EO(r,n,a,m,i),d=d*60+.5),[d|0,h||0,c]}function Oy(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(_a)}function Ry(e,t,r){return Oy(bS,e,t,r)}function LO(e,t,r){return Oy(PO,e,t,r)}function TO(e,t,r){return Oy(CO,e,t,r)}function vS(e){return(e%360+360)%360}function IO(e){const t=SO.exec(e);let r=255,n;if(!t)return;t[5]!==n&&(r=t[6]?Sl(+t[5]):_a(+t[5]));const a=vS(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=LO(a,i,o):t[1]==="hsv"?n=TO(a,i,o):n=Ry(a,i,o),{r:n[0],g:n[1],b:n[2],a:r}}function AO(e,t){var r=My(e);r[0]=vS(r[0]+t),r=Ry(r),e.r=r[0],e.g=r[1],e.b=r[2]}function MO(e){if(!e)return;const t=My(e),r=t[0],n=xk(t[1]),a=xk(t[2]);return e.a<255?`hsla(${r}, ${n}%, ${a}%, ${Ln(e.a)})`:`hsl(${r}, ${n}%, ${a}%)`}const yk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function OO(){const e={},t=Object.keys(bk),r=Object.keys(yk);let n,a,i,o,c;for(n=0;n<t.length;n++){for(o=c=t[n],a=0;a<r.length;a++)i=r[a],c=c.replace(i,yk[i]);i=parseInt(bk[o],16),e[c]=[i>>16&255,i>>8&255,i&255]}return e}let Jd;function RO(e){Jd||(Jd=OO(),Jd.transparent=[0,0,0,0]);const t=Jd[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const DO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function FO(e){const t=DO.exec(e);let r=255,n,a,i;if(t){if(t[7]!==n){const o=+t[7];r=t[8]?Sl(o):ca(o*255,0,255)}return n=+t[1],a=+t[3],i=+t[5],n=255&(t[2]?Sl(n):ca(n,0,255)),a=255&(t[4]?Sl(a):ca(a,0,255)),i=255&(t[6]?Sl(i):ca(i,0,255)),{r:n,g:a,b:i,a:r}}}function zO(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ln(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Vg=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,zi=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function BO(e,t,r){const n=zi(Ln(e.r)),a=zi(Ln(e.g)),i=zi(Ln(e.b));return{r:_a(Vg(n+r*(zi(Ln(t.r))-n))),g:_a(Vg(a+r*(zi(Ln(t.g))-a))),b:_a(Vg(i+r*(zi(Ln(t.b))-i))),a:e.a+r*(t.a-e.a)}}function Xd(e,t,r){if(e){let n=My(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,t===0?360:1)),n=Ry(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function wS(e,t){return e&&Object.assign(t||{},e)}function vk(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=_a(e[3]))):(t=wS(e,{r:0,g:0,b:0,a:1}),t.a=_a(t.a)),t}function $O(e){return e.charAt(0)==="r"?FO(e):IO(e)}class Fc{constructor(t){if(t instanceof Fc)return t;const r=typeof t;let n;r==="object"?n=vk(t):r==="string"&&(n=jO(t)||RO(t)||$O(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=wS(this._rgb);return t&&(t.a=Ln(t.a)),t}set rgb(t){this._rgb=vk(t)}rgbString(){return this._valid?zO(this._rgb):void 0}hexString(){return this._valid?_O(this._rgb):void 0}hslString(){return this._valid?MO(this._rgb):void 0}mix(t,r){if(t){const n=this.rgb,a=t.rgb;let i;const o=r===i?.5:r,c=2*o-1,d=n.a-a.a,h=((c*d===-1?c:(c+d)/(1+c*d))+1)/2;i=1-h,n.r=255&h*n.r+i*a.r+.5,n.g=255&h*n.g+i*a.g+.5,n.b=255&h*n.b+i*a.b+.5,n.a=o*n.a+(1-o)*a.a,this.rgb=n}return this}interpolate(t,r){return t&&(this._rgb=BO(this._rgb,t._rgb,r)),this}clone(){return new Fc(this.rgb)}alpha(t){return this._rgb.a=_a(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=nd(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Xd(this._rgb,2,t),this}darken(t){return Xd(this._rgb,2,-t),this}saturate(t){return Xd(this._rgb,1,t),this}desaturate(t){return Xd(this._rgb,1,-t),this}rotate(t){return AO(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function _n(){}const UO=(()=>{let e=0;return()=>e++})();function Qe(e){return e==null}function Ut(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ge(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function vs(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function qs(e,t){return vs(e)?e:t}function Be(e,t){return typeof e>"u"?t:e}const VO=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ft(e,t,r){if(e&&typeof e.call=="function")return e.apply(r,t)}function tt(e,t,r,n){let a,i,o;if(Ut(e))for(i=e.length,a=0;a<i;a++)t.call(r,e[a],a);else if(Ge(e))for(o=Object.keys(e),i=o.length,a=0;a<i;a++)t.call(r,e[o[a]],o[a])}function em(e,t){let r,n,a,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],i=t[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function tm(e){if(Ut(e))return e.map(tm);if(Ge(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let a=0;for(;a<n;++a)t[r[a]]=tm(e[r[a]]);return t}return e}function kS(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function HO(e,t,r,n){if(!kS(e))return;const a=t[e],i=r[e];Ge(a)&&Ge(i)?zc(a,i,n):t[e]=tm(i)}function zc(e,t,r){const n=Ut(t)?t:[t],a=n.length;if(!Ge(e))return e;r=r||{};const i=r.merger||HO;let o;for(let c=0;c<a;++c){if(o=n[c],!Ge(o))continue;const d=Object.keys(o);for(let h=0,m=d.length;h<m;++h)i(d[h],e,o,r)}return e}function tc(e,t){return zc(e,t,{merger:WO})}function WO(e,t,r){if(!kS(e))return;const n=t[e],a=r[e];Ge(n)&&Ge(a)?tc(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=tm(a))}const wk={"":e=>e,x:e=>e.x,y:e=>e.y};function qO(e){const t=e.split("."),r=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function KO(e){const t=qO(e);return r=>{for(const n of t){if(n==="")break;r=r&&r[n]}return r}}function To(e,t){return(wk[t]||(wk[t]=KO(t)))(e)}function Dy(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Bc=e=>typeof e<"u",Ia=e=>typeof e=="function",kk=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};function ZO(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const lt=Math.PI,nr=2*lt,GO=nr+lt,rm=Number.POSITIVE_INFINITY,YO=lt/180,tr=lt/2,qa=lt/4,jk=lt*2/3,jS=Math.log10,cn=Math.sign;function rc(e,t,r){return Math.abs(e-t)<r}function Nk(e){const t=Math.round(e);e=rc(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(jS(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function JO(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(r|0)&&t.push(r),t.sort((a,i)=>a-i).pop(),t}function XO(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function $c(e){return!XO(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function QO(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}function eR(e,t,r){let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function ii(e){return e*(lt/180)}function tR(e){return e*(180/lt)}function _k(e){if(!vs(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function NS(e,t){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*lt&&(i+=nr),{angle:i,distance:a}}function B0(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function rR(e,t){return(e-t+GO)%nr-lt}function Ls(e){return(e%nr+nr)%nr}function Fy(e,t,r,n){const a=Ls(e),i=Ls(t),o=Ls(r),c=Ls(i-a),d=Ls(o-a),h=Ls(a-i),m=Ls(a-o);return a===i||a===o||n&&i===o||c>d&&h<m}function fr(e,t,r){return Math.max(t,Math.min(r,e))}function sR(e){return fr(e,-32768,32767)}function da(e,t,r,n=1e-6){return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function zy(e,t,r){r=r||(o=>e[o]<t);let n=e.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,r(i)?a=i:n=i;return{lo:a,hi:n}}const oi=(e,t,r,n)=>zy(e,r,n?a=>{const i=e[a][t];return i<r||i===r&&e[a+1][t]===r}:a=>e[a][t]<r),nR=(e,t,r)=>zy(e,r,n=>e[n][t]>=r);function aR(e,t,r){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}const _S=["push","pop","shift","splice","unshift"];function iR(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),_S.forEach(r=>{const n="_onData"+Dy(r),a=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value(...i){const o=a.apply(this,i);return e._chartjs.listeners.forEach(c=>{typeof c[n]=="function"&&c[n](...i)}),o}})})}function Sk(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(t);a!==-1&&n.splice(a,1),!(n.length>0)&&(_S.forEach(i=>{delete e[i]}),delete e._chartjs)}function SS(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const CS=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function PS(e,t){let r=[],n=!1;return function(...a){r=a,n||(n=!0,CS.call(window,()=>{n=!1,e.apply(t,r)}))}}function oR(e,t){let r;return function(...n){return t?(clearTimeout(r),r=setTimeout(e,t,n)):e.apply(this,n),t}}const By=e=>e==="start"?"left":e==="end"?"right":"center",ur=(e,t,r)=>e==="start"?t:e==="end"?r:(t+r)/2,lR=(e,t,r,n)=>e===(n?"left":"right")?r:e==="center"?(t+r)/2:t;function cR(e,t,r){const n=t.length;let a=0,i=n;if(e._sorted){const{iScale:o,vScale:c,_parsed:d}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,m=o.axis,{min:g,max:p,minDefined:v,maxDefined:x}=o.getUserBounds();if(v){if(a=Math.min(oi(d,m,g).lo,r?n:oi(t,m,o.getPixelForValue(g)).lo),h){const w=d.slice(0,a+1).reverse().findIndex(y=>!Qe(y[c.axis]));a-=Math.max(0,w)}a=fr(a,0,n-1)}if(x){let w=Math.max(oi(d,o.axis,p,!0).hi+1,r?0:oi(t,m,o.getPixelForValue(p),!0).hi+1);if(h){const y=d.slice(w-1).findIndex(k=>!Qe(k[c.axis]));w+=Math.max(0,y)}i=fr(w,a,n)-a}else i=n-a}return{start:a,count:i}}function dR(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;const i=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),i}const Qd=e=>e===0||e===1,Ck=(e,t,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*nr/r)),Pk=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*nr/r)+1,sc={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*tr)+1,easeOutSine:e=>Math.sin(e*tr),easeInOutSine:e=>-.5*(Math.cos(lt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Qd(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Qd(e)?e:Ck(e,.075,.3),easeOutElastic:e=>Qd(e)?e:Pk(e,.075,.3),easeInOutElastic(e){return Qd(e)?e:e<.5?.5*Ck(e*2,.1125,.45):.5+.5*Pk(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-sc.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?sc.easeInBounce(e*2)*.5:sc.easeOutBounce(e*2-1)*.5+.5};function $y(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ek(e){return $y(e)?e:new Fc(e)}function Hg(e){return $y(e)?e:new Fc(e).saturate(.5).darken(.1).hexString()}const uR=["x","y","borderWidth","radius","tension"],hR=["color","borderColor","backgroundColor"];function mR(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:hR},numbers:{type:"number",properties:uR}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function fR(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Lk=new Map;function gR(e,t){t=t||{};const r=e+JSON.stringify(t);let n=Lk.get(r);return n||(n=new Intl.NumberFormat(e,t),Lk.set(r,n)),n}function ES(e,t,r){return gR(t,r).format(e)}const pR={values(e){return Ut(e)?e:""+e},numeric(e,t,r){if(e===0)return"0";const n=this.chart.options.locale;let a,i=e;if(r.length>1){const h=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(h<1e-4||h>1e15)&&(a="scientific"),i=xR(e,r)}const o=jS(Math.abs(i)),c=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),d={notation:a,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(d,this.options.ticks.format),ES(e,n,d)}};function xR(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}var LS={formatters:pR};function yR(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:LS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Ni=Object.create(null),$0=Object.create(null);function nc(e,t){if(!t)return e;const r=t.split(".");for(let n=0,a=r.length;n<a;++n){const i=r[n];e=e[i]||(e[i]=Object.create(null))}return e}function Wg(e,t,r){return typeof t=="string"?zc(nc(e,t),r):zc(nc(e,""),t)}class bR{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>Hg(a.backgroundColor),this.hoverBorderColor=(n,a)=>Hg(a.borderColor),this.hoverColor=(n,a)=>Hg(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Wg(this,t,r)}get(t){return nc(this,t)}describe(t,r){return Wg($0,t,r)}override(t,r){return Wg(Ni,t,r)}route(t,r,n,a){const i=nc(this,t),o=nc(this,n),c="_"+r;Object.defineProperties(i,{[c]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const d=this[c],h=o[a];return Ge(d)?Object.assign({},h,d):Be(d,h)},set(d){this[c]=d}}})}apply(t){t.forEach(r=>r(this))}}var Et=new bR({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mR,fR,yR]);function vR(e){return!e||Qe(e.size)||Qe(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Tk(e,t,r,n,a){let i=t[a];return i||(i=t[a]=e.measureText(a).width,r.push(a)),i>n&&(n=i),n}function Ka(e,t,r){const n=e.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((t-a)*n)/n+a}function Ik(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function U0(e,t,r,n){TS(e,t,r,n,null)}function TS(e,t,r,n,a){let i,o,c,d,h,m,g,p;const v=t.pointStyle,x=t.rotation,w=t.radius;let y=(x||0)*YO;if(v&&typeof v=="object"&&(i=v.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(r,n),e.rotate(y),e.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),e.restore();return}if(!(isNaN(w)||w<=0)){switch(e.beginPath(),v){default:a?e.ellipse(r,n,a/2,w,0,0,nr):e.arc(r,n,w,0,nr),e.closePath();break;case"triangle":m=a?a/2:w,e.moveTo(r+Math.sin(y)*m,n-Math.cos(y)*w),y+=jk,e.lineTo(r+Math.sin(y)*m,n-Math.cos(y)*w),y+=jk,e.lineTo(r+Math.sin(y)*m,n-Math.cos(y)*w),e.closePath();break;case"rectRounded":h=w*.516,d=w-h,o=Math.cos(y+qa)*d,g=Math.cos(y+qa)*(a?a/2-h:d),c=Math.sin(y+qa)*d,p=Math.sin(y+qa)*(a?a/2-h:d),e.arc(r-g,n-c,h,y-lt,y-tr),e.arc(r+p,n-o,h,y-tr,y),e.arc(r+g,n+c,h,y,y+tr),e.arc(r-p,n+o,h,y+tr,y+lt),e.closePath();break;case"rect":if(!x){d=Math.SQRT1_2*w,m=a?a/2:d,e.rect(r-m,n-d,2*m,2*d);break}y+=qa;case"rectRot":g=Math.cos(y)*(a?a/2:w),o=Math.cos(y)*w,c=Math.sin(y)*w,p=Math.sin(y)*(a?a/2:w),e.moveTo(r-g,n-c),e.lineTo(r+p,n-o),e.lineTo(r+g,n+c),e.lineTo(r-p,n+o),e.closePath();break;case"crossRot":y+=qa;case"cross":g=Math.cos(y)*(a?a/2:w),o=Math.cos(y)*w,c=Math.sin(y)*w,p=Math.sin(y)*(a?a/2:w),e.moveTo(r-g,n-c),e.lineTo(r+g,n+c),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o);break;case"star":g=Math.cos(y)*(a?a/2:w),o=Math.cos(y)*w,c=Math.sin(y)*w,p=Math.sin(y)*(a?a/2:w),e.moveTo(r-g,n-c),e.lineTo(r+g,n+c),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o),y+=qa,g=Math.cos(y)*(a?a/2:w),o=Math.cos(y)*w,c=Math.sin(y)*w,p=Math.sin(y)*(a?a/2:w),e.moveTo(r-g,n-c),e.lineTo(r+g,n+c),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o);break;case"line":o=a?a/2:Math.cos(y)*w,c=Math.sin(y)*w,e.moveTo(r-o,n-c),e.lineTo(r+o,n+c);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(y)*(a?a/2:w),n+Math.sin(y)*w);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function Uc(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function Uy(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Vy(e){e.restore()}function wR(e,t,r,n,a){if(!t)return e.lineTo(r.x,r.y);if(a==="middle"){const i=(t.x+r.x)/2;e.lineTo(i,t.y),e.lineTo(i,r.y)}else a==="after"!=!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function kR(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function jR(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Qe(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function NR(e,t,r,n,a){if(a.strikethrough||a.underline){const i=e.measureText(n),o=t-i.actualBoundingBoxLeft,c=t+i.actualBoundingBoxRight,d=r-i.actualBoundingBoxAscent,h=r+i.actualBoundingBoxDescent,m=a.strikethrough?(d+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,m),e.lineTo(c,m),e.stroke()}}function _R(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function Vc(e,t,r,n,a,i={}){const o=Ut(t)?t:[t],c=i.strokeWidth>0&&i.strokeColor!=="";let d,h;for(e.save(),e.font=a.string,jR(e,i),d=0;d<o.length;++d)h=o[d],i.backdrop&&_R(e,i.backdrop),c&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Qe(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(h,r,n,i.maxWidth)),e.fillText(h,r,n,i.maxWidth),NR(e,r,n,h,i),n+=Number(a.lineHeight);e.restore()}function sm(e,t){const{x:r,y:n,w:a,h:i,radius:o}=t;e.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*lt,lt,!0),e.lineTo(r,n+i-o.bottomLeft),e.arc(r+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,lt,tr,!0),e.lineTo(r+a-o.bottomRight,n+i),e.arc(r+a-o.bottomRight,n+i-o.bottomRight,o.bottomRight,tr,0,!0),e.lineTo(r+a,n+o.topRight),e.arc(r+a-o.topRight,n+o.topRight,o.topRight,0,-tr,!0),e.lineTo(r+o.topLeft,n)}const SR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,CR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function PR(e,t){const r=(""+e).match(SR);if(!r||r[1]==="normal")return t*1.2;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100;break}return t*e}const ER=e=>+e||0;function Hy(e,t){const r={},n=Ge(t),a=n?Object.keys(t):t,i=Ge(e)?n?o=>Be(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of a)r[o]=ER(i(o));return r}function IS(e){return Hy(e,{top:"y",right:"x",bottom:"y",left:"x"})}function po(e){return Hy(e,["topLeft","topRight","bottomLeft","bottomRight"])}function ws(e){const t=IS(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function gr(e,t){e=e||{},t=t||Et.font;let r=Be(e.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let n=Be(e.style,t.style);n&&!(""+n).match(CR)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:Be(e.family,t.family),lineHeight:PR(Be(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:Be(e.weight,t.weight),string:""};return a.string=vR(a),a}function eu(e,t,r,n){let a,i,o;for(a=0,i=e.length;a<i;++a)if(o=e[a],o!==void 0&&o!==void 0)return o}function LR(e,t,r){const{min:n,max:a}=e,i=VO(t,(a-n)/2),o=(c,d)=>r&&c===0?0:c+d;return{min:o(n,-Math.abs(i)),max:o(a,i)}}function Ci(e,t){return Object.assign(Object.create(e),t)}function Wy(e,t=[""],r,n,a=()=>e[0]){const i=r||e;typeof n>"u"&&(n=RS("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:a,override:c=>Wy([c,...e],t,i,n)};return new Proxy(o,{deleteProperty(c,d){return delete c[d],delete c._keys,delete e[0][d],!0},get(c,d){return MS(c,d,()=>FR(d,t,e,c))},getOwnPropertyDescriptor(c,d){return Reflect.getOwnPropertyDescriptor(c._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(c,d){return Mk(c).includes(d)},ownKeys(c){return Mk(c)},set(c,d,h){const m=c._storage||(c._storage=a());return c[d]=m[d]=h,delete c._keys,!0}})}function Io(e,t,r,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:AS(e,n),setContext:i=>Io(e,i,r,n),override:i=>Io(e.override(i),t,r,n)};return new Proxy(a,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,c){return MS(i,o,()=>IR(i,o,c))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,c){return e[o]=c,delete i[o],!0}})}function AS(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:Ia(r)?r:()=>r,isIndexable:Ia(n)?n:()=>n}}const TR=(e,t)=>e?e+Dy(t):t,qy=(e,t)=>Ge(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function MS(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=r();return e[t]=n,n}function IR(e,t,r){const{_proxy:n,_context:a,_subProxy:i,_descriptors:o}=e;let c=n[t];return Ia(c)&&o.isScriptable(t)&&(c=AR(t,c,e,r)),Ut(c)&&c.length&&(c=MR(t,c,e,o.isIndexable)),qy(t,c)&&(c=Io(c,a,i&&i[t],o)),c}function AR(e,t,r,n){const{_proxy:a,_context:i,_subProxy:o,_stack:c}=r;if(c.has(e))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+e);c.add(e);let d=t(i,o||n);return c.delete(e),qy(e,d)&&(d=Ky(a._scopes,a,e,d)),d}function MR(e,t,r,n){const{_proxy:a,_context:i,_subProxy:o,_descriptors:c}=r;if(typeof i.index<"u"&&n(e))return t[i.index%t.length];if(Ge(t[0])){const d=t,h=a._scopes.filter(m=>m!==d);t=[];for(const m of d){const g=Ky(h,a,e,m);t.push(Io(g,i,o&&o[e],c))}}return t}function OS(e,t,r){return Ia(e)?e(t,r):e}const OR=(e,t)=>e===!0?t:typeof e=="string"?To(t,e):void 0;function RR(e,t,r,n,a){for(const i of t){const o=OR(r,i);if(o){e.add(o);const c=OS(o._fallback,r,a);if(typeof c<"u"&&c!==r&&c!==n)return c}else if(o===!1&&typeof n<"u"&&r!==n)return null}return!1}function Ky(e,t,r,n){const a=t._rootScopes,i=OS(t._fallback,r,n),o=[...e,...a],c=new Set;c.add(n);let d=Ak(c,o,r,i||r,n);return d===null||typeof i<"u"&&i!==r&&(d=Ak(c,o,i,d,n),d===null)?!1:Wy(Array.from(c),[""],a,i,()=>DR(t,r,n))}function Ak(e,t,r,n,a){for(;r;)r=RR(e,t,r,n,a);return r}function DR(e,t,r){const n=e._getTarget();t in n||(n[t]={});const a=n[t];return Ut(a)&&Ge(r)?r:a||{}}function FR(e,t,r,n){let a;for(const i of t)if(a=RS(TR(i,e),r),typeof a<"u")return qy(e,a)?Ky(r,n,e,a):a}function RS(e,t){for(const r of t){if(!r)continue;const n=r[e];if(typeof n<"u")return n}}function Mk(e){let t=e._keys;return t||(t=e._keys=zR(e._scopes)),t}function zR(e){const t=new Set;for(const r of e)for(const n of Object.keys(r).filter(a=>!a.startsWith("_")))t.add(n);return Array.from(t)}const BR=Number.EPSILON||1e-14,Ao=(e,t)=>t<e.length&&!e[t].skip&&e[t],DS=e=>e==="x"?"y":"x";function $R(e,t,r,n){const a=e.skip?t:e,i=t,o=r.skip?t:r,c=B0(i,a),d=B0(o,i);let h=c/(c+d),m=d/(c+d);h=isNaN(h)?0:h,m=isNaN(m)?0:m;const g=n*h,p=n*m;return{previous:{x:i.x-g*(o.x-a.x),y:i.y-g*(o.y-a.y)},next:{x:i.x+p*(o.x-a.x),y:i.y+p*(o.y-a.y)}}}function UR(e,t,r){const n=e.length;let a,i,o,c,d,h=Ao(e,0);for(let m=0;m<n-1;++m)if(d=h,h=Ao(e,m+1),!(!d||!h)){if(rc(t[m],0,BR)){r[m]=r[m+1]=0;continue}a=r[m]/t[m],i=r[m+1]/t[m],c=Math.pow(a,2)+Math.pow(i,2),!(c<=9)&&(o=3/Math.sqrt(c),r[m]=a*o*t[m],r[m+1]=i*o*t[m])}}function VR(e,t,r="x"){const n=DS(r),a=e.length;let i,o,c,d=Ao(e,0);for(let h=0;h<a;++h){if(o=c,c=d,d=Ao(e,h+1),!c)continue;const m=c[r],g=c[n];o&&(i=(m-o[r])/3,c[`cp1${r}`]=m-i,c[`cp1${n}`]=g-i*t[h]),d&&(i=(d[r]-m)/3,c[`cp2${r}`]=m+i,c[`cp2${n}`]=g+i*t[h])}}function HR(e,t="x"){const r=DS(t),n=e.length,a=Array(n).fill(0),i=Array(n);let o,c,d,h=Ao(e,0);for(o=0;o<n;++o)if(c=d,d=h,h=Ao(e,o+1),!!d){if(h){const m=h[t]-d[t];a[o]=m!==0?(h[r]-d[r])/m:0}i[o]=c?h?cn(a[o-1])!==cn(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}UR(e,a,i),VR(e,i,t)}function tu(e,t,r){return Math.max(Math.min(e,r),t)}function WR(e,t){let r,n,a,i,o,c=Uc(e[0],t);for(r=0,n=e.length;r<n;++r)o=i,i=c,c=r<n-1&&Uc(e[r+1],t),i&&(a=e[r],o&&(a.cp1x=tu(a.cp1x,t.left,t.right),a.cp1y=tu(a.cp1y,t.top,t.bottom)),c&&(a.cp2x=tu(a.cp2x,t.left,t.right),a.cp2y=tu(a.cp2y,t.top,t.bottom)))}function qR(e,t,r,n,a){let i,o,c,d;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")HR(e,a);else{let h=n?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)c=e[i],d=$R(h,c,e[Math.min(i+1,o-(n?0:1))%o],t.tension),c.cp1x=d.previous.x,c.cp1y=d.previous.y,c.cp2x=d.next.x,c.cp2y=d.next.y,h=c}t.capBezierPoints&&WR(e,r)}function Zy(){return typeof window<"u"&&typeof document<"u"}function Gy(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function nm(e,t,r){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[r])):n=e,n}const mf=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function KR(e,t){return mf(e).getPropertyValue(t)}const ZR=["top","right","bottom","left"];function mi(e,t,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const i=ZR[a];n[i]=parseFloat(e[t+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const GR=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function YR(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:a,offsetY:i}=n;let o=!1,c,d;if(GR(a,i,e.target))c=a,d=i;else{const h=t.getBoundingClientRect();c=n.clientX-h.left,d=n.clientY-h.top,o=!0}return{x:c,y:d,box:o}}function Qa(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,a=mf(r),i=a.boxSizing==="border-box",o=mi(a,"padding"),c=mi(a,"border","width"),{x:d,y:h,box:m}=YR(e,r),g=o.left+(m&&c.left),p=o.top+(m&&c.top);let{width:v,height:x}=t;return i&&(v-=o.width+c.width,x-=o.height+c.height),{x:Math.round((d-g)/v*r.width/n),y:Math.round((h-p)/x*r.height/n)}}function JR(e,t,r){let n,a;if(t===void 0||r===void 0){const i=e&&Gy(e);if(!i)t=e.clientWidth,r=e.clientHeight;else{const o=i.getBoundingClientRect(),c=mf(i),d=mi(c,"border","width"),h=mi(c,"padding");t=o.width-h.width-d.width,r=o.height-h.height-d.height,n=nm(c.maxWidth,i,"clientWidth"),a=nm(c.maxHeight,i,"clientHeight")}}return{width:t,height:r,maxWidth:n||rm,maxHeight:a||rm}}const ua=e=>Math.round(e*10)/10;function XR(e,t,r,n){const a=mf(e),i=mi(a,"margin"),o=nm(a.maxWidth,e,"clientWidth")||rm,c=nm(a.maxHeight,e,"clientHeight")||rm,d=JR(e,t,r);let{width:h,height:m}=d;if(a.boxSizing==="content-box"){const p=mi(a,"border","width"),v=mi(a,"padding");h-=v.width+p.width,m-=v.height+p.height}return h=Math.max(0,h-i.width),m=Math.max(0,n?h/n:m-i.height),h=ua(Math.min(h,o,d.maxWidth)),m=ua(Math.min(m,c,d.maxHeight)),h&&!m&&(m=ua(h/2)),(t!==void 0||r!==void 0)&&n&&d.height&&m>d.height&&(m=d.height,h=ua(Math.floor(m*n))),{width:h,height:m}}function Ok(e,t,r){const n=t||1,a=ua(e.height*n),i=ua(e.width*n);e.height=ua(e.height),e.width=ua(e.width);const o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==a||o.width!==i?(e.currentDevicePixelRatio=n,o.height=a,o.width=i,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const QR=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Zy()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Rk(e,t){const r=KR(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ei(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function eD(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:n==="middle"?r<.5?e.y:t.y:n==="after"?r<1?e.y:t.y:r>0?t.y:e.y}}function tD(e,t,r,n){const a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=ei(e,a,r),c=ei(a,i,r),d=ei(i,t,r),h=ei(o,c,r),m=ei(c,d,r);return ei(h,m,r)}const rD=function(e,t){return{x(r){return e+e+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},sD=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function xo(e,t,r){return e?rD(t,r):sD()}function FS(e,t){let r,n;(t==="ltr"||t==="rtl")&&(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function zS(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function BS(e){return e==="angle"?{between:Fy,compare:rR,normalize:Ls}:{between:da,compare:(t,r)=>t-r,normalize:t=>t}}function Dk({start:e,end:t,count:r,loop:n,style:a}){return{start:e%r,end:t%r,loop:n&&(t-e+1)%r===0,style:a}}function nD(e,t,r){const{property:n,start:a,end:i}=r,{between:o,normalize:c}=BS(n),d=t.length;let{start:h,end:m,loop:g}=e,p,v;if(g){for(h+=d,m+=d,p=0,v=d;p<v&&o(c(t[h%d][n]),a,i);++p)h--,m--;h%=d,m%=d}return m<h&&(m+=d),{start:h,end:m,loop:g,style:e.style}}function aD(e,t,r){if(!r)return[e];const{property:n,start:a,end:i}=r,o=t.length,{compare:c,between:d,normalize:h}=BS(n),{start:m,end:g,loop:p,style:v}=nD(e,t,r),x=[];let w=!1,y=null,k,j,N;const C=()=>d(a,N,k)&&c(a,N)!==0,P=()=>c(i,k)===0||d(i,N,k),E=()=>w||C(),I=()=>!w||P();for(let M=m,T=m;M<=g;++M)j=t[M%o],!j.skip&&(k=h(j[n]),k!==N&&(w=d(k,a,i),y===null&&E()&&(y=c(k,a)===0?M:T),y!==null&&I()&&(x.push(Dk({start:y,end:M,loop:p,count:o,style:v})),y=null),T=M,N=k));return y!==null&&x.push(Dk({start:y,end:g,loop:p,count:o,style:v})),x}function iD(e,t){const r=[],n=e.segments;for(let a=0;a<n.length;a++){const i=aD(n[a],e.points,t);i.length&&r.push(...i)}return r}function oD(e,t,r,n){let a=0,i=t-1;if(r&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,r&&(i+=a);i>a&&e[i%t].skip;)i--;return i%=t,{start:a,end:i}}function lD(e,t,r,n){const a=e.length,i=[];let o=t,c=e[t],d;for(d=t+1;d<=r;++d){const h=e[d%a];h.skip||h.stop?c.skip||(n=!1,i.push({start:t%a,end:(d-1)%a,loop:n}),t=o=h.stop?d:null):(o=d,c.skip&&(t=d)),c=h}return o!==null&&i.push({start:t%a,end:o%a,loop:n}),i}function cD(e,t){const r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];const i=!!e._loop,{start:o,end:c}=oD(r,a,i,n);if(n===!0)return Fk(e,[{start:o,end:c,loop:i}],r,t);const d=c<o?c+a:c,h=!!e._fullLoop&&o===0&&c===a-1;return Fk(e,lD(r,o,d,h),r,t)}function Fk(e,t,r,n){return!n||!n.setContext||!r?t:dD(e,t,r,n)}function dD(e,t,r,n){const a=e._chart.getContext(),i=zk(e.options),{_datasetIndex:o,options:{spanGaps:c}}=e,d=r.length,h=[];let m=i,g=t[0].start,p=g;function v(x,w,y,k){const j=c?-1:1;if(x!==w){for(x+=d;r[x%d].skip;)x-=j;for(;r[w%d].skip;)w+=j;x%d!==w%d&&(h.push({start:x%d,end:w%d,loop:y,style:k}),m=k,g=w%d)}}for(const x of t){g=c?g:x.start;let w=r[g%d],y;for(p=g+1;p<=x.end;p++){const k=r[p%d];y=zk(n.setContext(Ci(a,{type:"segment",p0:w,p1:k,p0DataIndex:(p-1)%d,p1DataIndex:p%d,datasetIndex:o}))),uD(y,m)&&v(g,p-1,x.loop,m),w=k,m=y}g<p-1&&v(g,p-1,x.loop,m)}return h}function zk(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function uD(e,t){if(!t)return!1;const r=[],n=function(a,i){return $y(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function ru(e,t,r){return e.options.clip?e[r]:t[r]}function hD(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:ru(r,t,"left"),right:ru(r,t,"right"),top:ru(n,t,"top"),bottom:ru(n,t,"bottom")}:t}function mD(e,t){const r=t._clip;if(r.disabled)return!1;const n=hD(t,e.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?e.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?e.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class fD{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,n,a){const i=r.listeners[a],o=r.duration;i.forEach(c=>c({chart:t,initial:r.initial,numSteps:o,currentStep:Math.min(n-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=CS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,c=!1,d;for(;o>=0;--o)d=i[o],d._active?(d._total>n.duration&&(n.duration=d._total),d.tick(t),c=!0):(i[o]=i[i.length-1],i.pop());c&&(a.draw(),this._notify(a,n,t,"progress")),i.length||(n.running=!1,this._notify(a,n,t,"complete"),n.initial=!1),r+=i.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let n=r.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,n)),n}listen(t,r,n){this._getAnims(t).listeners[r].push(n)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const n=r.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Sn=new fD;const Bk="transparent",gD={boolean(e,t,r){return r>.5?t:e},color(e,t,r){const n=Ek(e||Bk),a=n.valid&&Ek(t||Bk);return a&&a.valid?a.mix(n,r).hexString():t},number(e,t,r){return e+(t-e)*r}};class pD{constructor(t,r,n,a){const i=r[n];a=eu([t.to,a,i,t.from]);const o=eu([t.from,i,a]);this._active=!0,this._fn=t.fn||gD[t.type||typeof o],this._easing=sc[t.easing]||sc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=n,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(t,r,n){if(this._active){this._notify(!1);const a=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=eu([t.to,r,a,t.from]),this._from=eu([t.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,n=this._duration,a=this._prop,i=this._from,o=this._loop,c=this._to;let d;if(this._active=i!==c&&(o||r<n),!this._active){this._target[a]=c,this._notify(!0);return}if(r<0){this._target[a]=i;return}d=r/n%2,d=o&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(i,c,d)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,n)=>{t.push({res:r,rej:n})})}_notify(t){const r=t?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][r]()}}class $S{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!Ge(t))return;const r=Object.keys(Et.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{const i=t[a];if(!Ge(i))return;const o={};for(const c of r)o[c]=i[c];(Ut(i.properties)&&i.properties||[a]).forEach(c=>{(c===a||!n.has(c))&&n.set(c,o)})})}_animateOptions(t,r){const n=r.options,a=yD(t,n);if(!a)return[];const i=this._createAnimations(a,n);return n.$shared&&xD(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,r){const n=this._properties,a=[],i=t.$animations||(t.$animations={}),o=Object.keys(r),c=Date.now();let d;for(d=o.length-1;d>=0;--d){const h=o[d];if(h.charAt(0)==="$")continue;if(h==="options"){a.push(...this._animateOptions(t,r));continue}const m=r[h];let g=i[h];const p=n.get(h);if(g)if(p&&g.active()){g.update(p,m,c);continue}else g.cancel();if(!p||!p.duration){t[h]=m;continue}i[h]=g=new pD(p,t,h,m),a.push(g)}return a}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const n=this._createAnimations(t,r);if(n.length)return Sn.add(this._chart,n),!0}}function xD(e,t){const r=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const i=e[n[a]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function yD(e,t){if(!t)return;let r=e.options;if(!r){e.options=t;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function $k(e,t){const r=e&&e.options||{},n=r.reverse,a=r.min===void 0?t:0,i=r.max===void 0?t:0;return{start:n?i:a,end:n?a:i}}function bD(e,t,r){if(r===!1)return!1;const n=$k(e,r),a=$k(t,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function vD(e){let t,r,n,a;return Ge(e)?(t=e.top,r=e.right,n=e.bottom,a=e.left):t=r=n=a=e,{top:t,right:r,bottom:n,left:a,disabled:e===!1}}function US(e,t){const r=[],n=e._getSortedDatasetMetas(t);let a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function Uk(e,t,r,n={}){const a=e.keys,i=n.mode==="single";let o,c,d,h;if(t===null)return;let m=!1;for(o=0,c=a.length;o<c;++o){if(d=+a[o],d===r){if(m=!0,n.all)continue;break}h=e.values[d],vs(h)&&(i||t===0||cn(t)===cn(h))&&(t+=h)}return!m&&!n.all?0:t}function wD(e,t){const{iScale:r,vScale:n}=t,a=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(e),c=new Array(o.length);let d,h,m;for(d=0,h=o.length;d<h;++d)m=o[d],c[d]={[a]:m,[i]:e[m]};return c}function qg(e,t){const r=e&&e.options.stacked;return r||r===void 0&&t.stack!==void 0}function kD(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}function jD(e){const{min:t,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function ND(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function Vk(e,t,r,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const i=e[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function Hk(e,t){const{chart:r,_cachedMeta:n}=e,a=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:c}=n,d=i.axis,h=o.axis,m=kD(i,o,n),g=t.length;let p;for(let v=0;v<g;++v){const x=t[v],{[d]:w,[h]:y}=x,k=x._stacks||(x._stacks={});p=k[h]=ND(a,m,w),p[c]=y,p._top=Vk(p,o,!0,n.type),p._bottom=Vk(p,o,!1,n.type);const j=p._visualValues||(p._visualValues={});j[c]=y}}function Kg(e,t){const r=e.scales;return Object.keys(r).filter(n=>r[n].axis===t).shift()}function _D(e,t){return Ci(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function SD(e,t,r){return Ci(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function fl(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const a of t){const i=a._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const Zg=e=>e==="reset"||e==="none",Wk=(e,t)=>t?e:Object.assign({},e),CD=(e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:US(r,!0),values:null};class yo{constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=qg(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&fl(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,n=this.getDataset(),a=(g,p,v,x)=>g==="x"?p:g==="r"?x:v,i=r.xAxisID=Be(n.xAxisID,Kg(t,"x")),o=r.yAxisID=Be(n.yAxisID,Kg(t,"y")),c=r.rAxisID=Be(n.rAxisID,Kg(t,"r")),d=r.indexAxis,h=r.iAxisID=a(d,i,o,c),m=r.vAxisID=a(d,o,i,c);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(h),r.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Sk(this._data,this),t._stacked&&fl(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),n=this._data;if(Ge(r)){const a=this._cachedMeta;this._data=wD(r,a)}else if(n!==r){if(n){Sk(n,this);const a=this._cachedMeta;fl(a),a._parsed=[]}r&&Object.isExtensible(r)&&iR(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const i=r._stacked;r._stacked=qg(r.vScale,r),r.stack!==n.stack&&(a=!0,fl(r),r.stack=n.stack),this._resyncElements(t),(a||i!==r._stacked)&&(Hk(this,r._parsed),r._stacked=qg(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:o}=n,c=i.axis;let d=t===0&&r===a.length?!0:n._sorted,h=t>0&&n._parsed[t-1],m,g,p;if(this._parsing===!1)n._parsed=a,n._sorted=!0,p=a;else{Ut(a[t])?p=this.parseArrayData(n,a,t,r):Ge(a[t])?p=this.parseObjectData(n,a,t,r):p=this.parsePrimitiveData(n,a,t,r);const v=()=>g[c]===null||h&&g[c]<h[c];for(m=0;m<r;++m)n._parsed[m+t]=g=p[m],d&&(v()&&(d=!1),h=g);n._sorted=d}o&&Hk(this,p)}parsePrimitiveData(t,r,n,a){const{iScale:i,vScale:o}=t,c=i.axis,d=o.axis,h=i.getLabels(),m=i===o,g=new Array(a);let p,v,x;for(p=0,v=a;p<v;++p)x=p+n,g[p]={[c]:m||i.parse(h[x],x),[d]:o.parse(r[x],x)};return g}parseArrayData(t,r,n,a){const{xScale:i,yScale:o}=t,c=new Array(a);let d,h,m,g;for(d=0,h=a;d<h;++d)m=d+n,g=r[m],c[d]={x:i.parse(g[0],m),y:o.parse(g[1],m)};return c}parseObjectData(t,r,n,a){const{xScale:i,yScale:o}=t,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,h=new Array(a);let m,g,p,v;for(m=0,g=a;m<g;++m)p=m+n,v=r[p],h[m]={x:i.parse(To(v,c),p),y:o.parse(To(v,d),p)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,n){const a=this.chart,i=this._cachedMeta,o=r[t.axis],c={keys:US(a,!0),values:r._stacks[t.axis]._visualValues};return Uk(c,o,i.index,{mode:n})}updateRangeFromParsed(t,r,n,a){const i=n[r.axis];let o=i===null?NaN:i;const c=a&&n._stacks[r.axis];a&&c&&(a.values=c,o=Uk(a,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,r){const n=this._cachedMeta,a=n._parsed,i=n._sorted&&t===n.iScale,o=a.length,c=this._getOtherScale(t),d=CD(r,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:g}=jD(c);let p,v;function x(){v=a[p];const w=v[c.axis];return!vs(v[t.axis])||m>w||g<w}for(p=0;p<o&&!(!x()&&(this.updateRangeFromParsed(h,t,v,d),i));++p);if(i){for(p=o-1;p>=0;--p)if(!x()){this.updateRangeFromParsed(h,t,v,d);break}}return h}getAllParsedValues(t){const r=this._cachedMeta._parsed,n=[];let a,i,o;for(a=0,i=r.length;a<i;++a)o=r[a][t.axis],vs(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,n=r.iScale,a=r.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=vD(Be(this.options.clip,bD(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],i=r.chartArea,o=[],c=this._drawStart||0,d=this._drawCount||a.length-c,h=this.options.drawActiveElementsOnTop;let m;for(n.dataset&&n.dataset.draw(t,i,c,d),m=c;m<c+d;++m){const g=a[m];g.hidden||(g.active&&h?o.push(g):g.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,r){const n=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,r,n){const a=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=SD(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=a.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=_D(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",n){const a=r==="active",i=this._cachedDataOpts,o=t+"-"+r,c=i[o],d=this.enableOptionSharing&&Bc(n);if(c)return Wk(c,d);const h=this.chart.config,m=h.datasetElementScopeKeys(this._type,t),g=a?[`${t}Hover`,"hover",t,""]:[t,""],p=h.getOptionScopes(this.getDataset(),m),v=Object.keys(Et.elements[t]),x=()=>this.getContext(n,a,r),w=h.resolveNamedOptions(p,v,x,g);return w.$shared&&(w.$shared=d,i[o]=Object.freeze(Wk(w,d))),w}_resolveAnimations(t,r,n){const a=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,c=i[o];if(c)return c;let d;if(a.options.animation!==!1){const m=this.chart.config,g=m.datasetAnimationScopeKeys(this._type,r),p=m.getOptionScopes(this.getDataset(),g);d=m.createResolver(p,this.getContext(t,n,r))}const h=new $S(a,d&&d.animations);return d&&d._cacheable&&(i[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Zg(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const n=this.resolveDataElementOptions(t,r),a=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(r,i)||i!==a;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:o}}updateElement(t,r,n,a){Zg(a)?Object.assign(t,n):this._resolveAnimations(r,a).update(t,n)}updateSharedOptions(t,r,n){t&&!Zg(r)&&this._resolveAnimations(void 0,r).update(t,n)}_setStyle(t,r,n,a){t.active=a;const i=this.getStyle(r,a);this._resolveAnimations(r,n,a).update(t,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(t,r,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,r,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,n=this._cachedMeta.data;for(const[c,d,h]of this._syncList)this[c](d,h);this._syncList=[];const a=n.length,i=r.length,o=Math.min(i,a);o&&this.parse(0,o),i>a?this._insertElements(a,i-a,t):i<a&&this._removeElements(i,a-i)}_insertElements(t,r,n=!0){const a=this._cachedMeta,i=a.data,o=t+r;let c;const d=h=>{for(h.length+=r,c=h.length-1;c>=o;c--)h[c]=h[c-r]};for(d(i),c=t;c<o;++c)i[c]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(t,r),n&&this.updateElements(i,t,r,"reset")}updateElements(t,r,n,a){}_removeElements(t,r){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(t,r);n._stacked&&fl(n,a)}n.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,n,a]=t;this[r](n,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Pe(yo,"defaults",{}),Pe(yo,"datasetElementType",null),Pe(yo,"dataElementType",null);function PD(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let n=[];for(let a=0,i=r.length;a<i;a++)n=n.concat(r[a].controller.getAllParsedValues(e));e._cache.$bar=SS(n.sort((a,i)=>a-i))}return e._cache.$bar}function ED(e){const t=e.iScale,r=PD(t,e.type);let n=t._length,a,i,o,c;const d=()=>{o===32767||o===-32768||(Bc(c)&&(n=Math.min(n,Math.abs(o-c)||n)),c=o)};for(a=0,i=r.length;a<i;++a)o=t.getPixelForValue(r[a]),d();for(c=void 0,a=0,i=t.ticks.length;a<i;++a)o=t.getPixelForTick(a),d();return n}function LD(e,t,r,n){const a=r.barThickness;let i,o;return Qe(a)?(i=t.min*r.categoryPercentage,o=r.barPercentage):(i=a*n,o=1),{chunk:i/n,ratio:o,start:t.pixels[e]-i/2}}function TD(e,t,r,n){const a=t.pixels,i=a[e];let o=e>0?a[e-1]:null,c=e<a.length-1?a[e+1]:null;const d=r.categoryPercentage;o===null&&(o=i-(c===null?t.end-t.start:c-i)),c===null&&(c=i+i-o);const h=i-(i-Math.min(o,c))/2*d;return{chunk:Math.abs(c-o)/2*d/n,ratio:r.barPercentage,start:h}}function ID(e,t,r,n){const a=r.parse(e[0],n),i=r.parse(e[1],n),o=Math.min(a,i),c=Math.max(a,i);let d=o,h=c;Math.abs(o)>Math.abs(c)&&(d=c,h=o),t[r.axis]=h,t._custom={barStart:d,barEnd:h,start:a,end:i,min:o,max:c}}function VS(e,t,r,n){return Ut(e)?ID(e,t,r,n):t[r.axis]=r.parse(e,n),t}function qk(e,t,r,n){const a=e.iScale,i=e.vScale,o=a.getLabels(),c=a===i,d=[];let h,m,g,p;for(h=r,m=r+n;h<m;++h)p=t[h],g={},g[a.axis]=c||a.parse(o[h],h),d.push(VS(p,g,i,h));return d}function Gg(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function AD(e,t,r){return e!==0?cn(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function MD(e){let t,r,n,a,i;return e.horizontal?(t=e.base>e.x,r="left",n="right"):(t=e.base<e.y,r="bottom",n="top"),t?(a="end",i="start"):(a="start",i="end"),{start:r,end:n,reverse:t,top:a,bottom:i}}function OD(e,t,r,n){let a=t.borderSkipped;const i={};if(!a){e.borderSkipped=i;return}if(a===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:c,reverse:d,top:h,bottom:m}=MD(e);a==="middle"&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?a=h:(r._bottom||0)===n?a=m:(i[Kk(m,o,c,d)]=!0,a=h)),i[Kk(a,o,c,d)]=!0,e.borderSkipped=i}function Kk(e,t,r,n){return n?(e=RD(e,t,r),e=Zk(e,r,t)):e=Zk(e,t,r),e}function RD(e,t,r){return e===t?r:e===r?t:e}function Zk(e,t,r){return e==="start"?t:e==="end"?r:e}function DD(e,{inflateAmount:t},r){e.inflateAmount=t==="auto"?r===1?.33:0:t}class nh extends yo{parsePrimitiveData(t,r,n,a){return qk(t,r,n,a)}parseArrayData(t,r,n,a){return qk(t,r,n,a)}parseObjectData(t,r,n,a){const{iScale:i,vScale:o}=t,{xAxisKey:c="x",yAxisKey:d="y"}=this._parsing,h=i.axis==="x"?c:d,m=o.axis==="x"?c:d,g=[];let p,v,x,w;for(p=n,v=n+a;p<v;++p)w=r[p],x={},x[i.axis]=i.parse(To(w,h),p),g.push(VS(To(w,m),x,o,p));return g}updateRangeFromParsed(t,r,n,a){super.updateRangeFromParsed(t,r,n,a);const i=n._custom;i&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:n,vScale:a}=r,i=this.getParsed(t),o=i._custom,c=Gg(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,n,a){const i=a==="reset",{index:o,_cachedMeta:{vScale:c}}=this,d=c.getBasePixel(),h=c.isHorizontal(),m=this._getRuler(),{sharedOptions:g,includeOptions:p}=this._getSharedOptions(r,a);for(let v=r;v<r+n;v++){const x=this.getParsed(v),w=i||Qe(x[c.axis])?{base:d,head:d}:this._calculateBarValuePixels(v),y=this._calculateBarIndexPixels(v,m),k=(x._stacks||{})[c.axis],j={horizontal:h,base:w.base,enableBorderRadius:!k||Gg(x._custom)||o===k._top||o===k._bottom,x:h?w.head:y.center,y:h?y.center:w.head,height:h?y.size:Math.abs(w.size),width:h?Math.abs(w.size):y.size};p&&(j.options=g||this.resolveDataElementOptions(v,t[v].active?"active":a));const N=j.options||t[v].options;OD(j,N,k,o),DD(j,N,m.ratio),this.updateElement(t[v],v,j,a)}}_getStacks(t,r){const{iScale:n}=this._cachedMeta,a=n.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=n.options.stacked,o=[],c=this._cachedMeta.controller.getParsed(r),d=c&&c[n.axis],h=m=>{const g=m._parsed.find(v=>v[n.axis]===d),p=g&&g[m.vScale.axis];if(Qe(p)||isNaN(p))return!0};for(const m of a)if(!(r!==void 0&&h(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Be(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,n){const a=this._getStacks(t,n),i=r!==void 0?a.indexOf(r):-1;return i===-1?a.length-1:i}_getRuler(){const t=this.options,r=this._cachedMeta,n=r.iScale,a=[];let i,o;for(i=0,o=r.data.length;i<o;++i)a.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const c=t.barThickness;return{min:c||ED(r),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:n,index:a},options:{base:i,minBarLength:o}}=this,c=i||0,d=this.getParsed(t),h=d._custom,m=Gg(h);let g=d[r.axis],p=0,v=n?this.applyStack(r,d,n):g,x,w;v!==g&&(p=v-g,v=g),m&&(g=h.barStart,v=h.barEnd-h.barStart,g!==0&&cn(g)!==cn(h.barEnd)&&(p=0),p+=g);const y=!Qe(i)&&!m?i:p;let k=r.getPixelForValue(y);if(this.chart.getDataVisibility(t)?x=r.getPixelForValue(p+v):x=k,w=x-k,Math.abs(w)<o){w=AD(w,r,c)*o,g===c&&(k-=w/2);const j=r.getPixelForDecimal(0),N=r.getPixelForDecimal(1),C=Math.min(j,N),P=Math.max(j,N);k=Math.max(Math.min(k,P),C),x=k+w,n&&!m&&(d._stacks[r.axis]._visualValues[a]=r.getValueForPixel(x)-r.getValueForPixel(k))}if(k===r.getPixelForValue(c)){const j=cn(w)*r.getLineWidthForValue(c)/2;k+=j,w-=j}return{size:w,base:k,head:x,center:x+w/2}}_calculateBarIndexPixels(t,r){const n=r.scale,a=this.options,i=a.skipNull,o=Be(a.maxBarThickness,1/0);let c,d;const h=this._getAxisCount();if(r.grouped){const m=i?this._getStackCount(t):r.stackCount,g=a.barThickness==="flex"?TD(t,r,a,m*h):LD(t,r,a,m*h),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(Be(p,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+v;c=g.start+g.chunk*x+g.chunk/2,d=Math.min(o,g.chunk*g.ratio)}else c=n.getPixelForValue(this.getParsed(t)[n.axis],t),d=Math.min(o,r.min*r.ratio);return{base:c-d/2,head:c+d/2,center:c,size:d}}draw(){const t=this._cachedMeta,r=t.vScale,n=t.data,a=n.length;let i=0;for(;i<a;++i)this.getParsed(i)[r.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}Pe(nh,"id","bar"),Pe(nh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Pe(nh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ah extends yo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:n,data:a=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:c,count:d}=cR(r,a,o);this._drawStart=c,this._drawCount=d,dR(r)&&(c=0,d=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:h},t),this.updateElements(a,c,d,t)}updateElements(t,r,n,a){const i=a==="reset",{iScale:o,vScale:c,_stacked:d,_dataset:h}=this._cachedMeta,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(r,a),p=o.axis,v=c.axis,{spanGaps:x,segment:w}=this.options,y=$c(x)?x:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||i||a==="none",j=r+n,N=t.length;let C=r>0&&this.getParsed(r-1);for(let P=0;P<N;++P){const E=t[P],I=k?E:{};if(P<r||P>=j){I.skip=!0;continue}const M=this.getParsed(P),T=Qe(M[v]),H=I[p]=o.getPixelForValue(M[p],P),J=I[v]=i||T?c.getBasePixel():c.getPixelForValue(d?this.applyStack(c,M,d):M[v],P);I.skip=isNaN(H)||isNaN(J)||T,I.stop=P>0&&Math.abs(M[p]-C[p])>y,w&&(I.parsed=M,I.raw=h.data[P]),g&&(I.options=m||this.resolveDataElementOptions(P,E.active?"active":a)),k||this.updateElement(E,P,I,a),C=M}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,n=r.options&&r.options.borderWidth||0,a=t.data||[];if(!a.length)return n;const i=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Pe(ah,"id","line"),Pe(ah,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Pe(ah,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Za(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Yy{constructor(t){Pe(this,"options");this.options=t||{}}static override(t){Object.assign(Yy.prototype,t)}init(){}formats(){return Za()}parse(){return Za()}format(){return Za()}add(){return Za()}diff(){return Za()}startOf(){return Za()}endOf(){return Za()}}var FD={_date:Yy};function zD(e,t,r,n){const{controller:a,data:i,_sorted:o}=e,c=a._cachedMeta.iScale,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(c&&t===c.axis&&t!=="r"&&o&&i.length){const h=c._reversePixels?nR:oi;if(n){if(a._sharedOptions){const m=i[0],g=typeof m.getRange=="function"&&m.getRange(t);if(g){const p=h(i,t,r-g),v=h(i,t,r+g);return{lo:p.lo,hi:v.hi}}}}else{const m=h(i,t,r);if(d){const{vScale:g}=a._cachedMeta,{_parsed:p}=e,v=p.slice(0,m.lo+1).reverse().findIndex(w=>!Qe(w[g.axis]));m.lo-=Math.max(0,v);const x=p.slice(m.hi).findIndex(w=>!Qe(w[g.axis]));m.hi+=Math.max(0,x)}return m}}return{lo:0,hi:i.length-1}}function ff(e,t,r,n,a){const i=e.getSortedVisibleDatasetMetas(),o=r[t];for(let c=0,d=i.length;c<d;++c){const{index:h,data:m}=i[c],{lo:g,hi:p}=zD(i[c],t,o,a);for(let v=g;v<=p;++v){const x=m[v];x.skip||n(x,h,v)}}}function BD(e){const t=e.indexOf("x")!==-1,r=e.indexOf("y")!==-1;return function(n,a){const i=t?Math.abs(n.x-a.x):0,o=r?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Yg(e,t,r,n,a){const i=[];return!a&&!e.isPointInArea(t)||ff(e,r,t,function(c,d,h){!a&&!Uc(c,e.chartArea,0)||c.inRange(t.x,t.y,n)&&i.push({element:c,datasetIndex:d,index:h})},!0),i}function $D(e,t,r,n){let a=[];function i(o,c,d){const{startAngle:h,endAngle:m}=o.getProps(["startAngle","endAngle"],n),{angle:g}=NS(o,{x:t.x,y:t.y});Fy(g,h,m)&&a.push({element:o,datasetIndex:c,index:d})}return ff(e,r,t,i),a}function UD(e,t,r,n,a,i){let o=[];const c=BD(r);let d=Number.POSITIVE_INFINITY;function h(m,g,p){const v=m.inRange(t.x,t.y,a);if(n&&!v)return;const x=m.getCenterPoint(a);if(!(!!i||e.isPointInArea(x))&&!v)return;const y=c(t,x);y<d?(o=[{element:m,datasetIndex:g,index:p}],d=y):y===d&&o.push({element:m,datasetIndex:g,index:p})}return ff(e,r,t,h),o}function Jg(e,t,r,n,a,i){return!i&&!e.isPointInArea(t)?[]:r==="r"&&!n?$D(e,t,r,a):UD(e,t,r,n,a,i)}function Gk(e,t,r,n,a){const i=[],o=r==="x"?"inXRange":"inYRange";let c=!1;return ff(e,r,t,(d,h,m)=>{d[o]&&d[o](t[r],a)&&(i.push({element:d,datasetIndex:h,index:m}),c=c||d.inRange(t.x,t.y,a))}),n&&!c?[]:i}var VD={modes:{index(e,t,r,n){const a=Qa(t,e),i=r.axis||"x",o=r.includeInvisible||!1,c=r.intersect?Yg(e,a,i,n,o):Jg(e,a,i,!1,n,o),d=[];return c.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const m=c[0].index,g=h.data[m];g&&!g.skip&&d.push({element:g,datasetIndex:h.index,index:m})}),d):[]},dataset(e,t,r,n){const a=Qa(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;let c=r.intersect?Yg(e,a,i,n,o):Jg(e,a,i,!1,n,o);if(c.length>0){const d=c[0].datasetIndex,h=e.getDatasetMeta(d).data;c=[];for(let m=0;m<h.length;++m)c.push({element:h[m],datasetIndex:d,index:m})}return c},point(e,t,r,n){const a=Qa(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Yg(e,a,i,n,o)},nearest(e,t,r,n){const a=Qa(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Jg(e,a,i,r.intersect,n,o)},x(e,t,r,n){const a=Qa(t,e);return Gk(e,a,"x",r.intersect,n)},y(e,t,r,n){const a=Qa(t,e);return Gk(e,a,"y",r.intersect,n)}}};const HS=["left","top","right","bottom"];function gl(e,t){return e.filter(r=>r.pos===t)}function Yk(e,t){return e.filter(r=>HS.indexOf(r.pos)===-1&&r.box.axis===t)}function pl(e,t){return e.sort((r,n)=>{const a=t?n:r,i=t?r:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function HD(e){const t=[];let r,n,a,i,o,c;for(r=0,n=(e||[]).length;r<n;++r)a=e[r],{position:i,options:{stack:o,stackWeight:c=1}}=a,t.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&i+o,stackWeight:c});return t}function WD(e){const t={};for(const r of e){const{stack:n,pos:a,stackWeight:i}=r;if(!n||!HS.includes(a))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function qD(e,t){const r=WD(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let i,o,c;for(i=0,o=e.length;i<o;++i){c=e[i];const{fullSize:d}=c.box,h=r[c.stack],m=h&&c.stackWeight/h.weight;c.horizontal?(c.width=m?m*n:d&&t.availableWidth,c.height=a):(c.width=n,c.height=m?m*a:d&&t.availableHeight)}return r}function KD(e){const t=HD(e),r=pl(t.filter(h=>h.box.fullSize),!0),n=pl(gl(t,"left"),!0),a=pl(gl(t,"right")),i=pl(gl(t,"top"),!0),o=pl(gl(t,"bottom")),c=Yk(t,"x"),d=Yk(t,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(d).concat(o).concat(c),chartArea:gl(t,"chartArea"),vertical:n.concat(a).concat(d),horizontal:i.concat(o).concat(c)}}function Jk(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function WS(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ZD(e,t,r,n){const{pos:a,box:i}=r,o=e.maxPadding;if(!Ge(a)){r.size&&(e[a]-=r.size);const g=n[r.stack]||{size:0,count:1};g.size=Math.max(g.size,r.horizontal?i.height:i.width),r.size=g.size/g.count,e[a]+=r.size}i.getPadding&&WS(o,i.getPadding());const c=Math.max(0,t.outerWidth-Jk(o,e,"left","right")),d=Math.max(0,t.outerHeight-Jk(o,e,"top","bottom")),h=c!==e.w,m=d!==e.h;return e.w=c,e.h=d,r.horizontal?{same:h,other:m}:{same:m,other:h}}function GD(e){const t=e.maxPadding;function r(n){const a=Math.max(t[n]-e[n],0);return e[n]+=a,a}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}function YD(e,t){const r=t.maxPadding;function n(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{i[o]=Math.max(t[o],r[o])}),i}return n(e?["left","right"]:["top","bottom"])}function Cl(e,t,r,n){const a=[];let i,o,c,d,h,m;for(i=0,o=e.length,h=0;i<o;++i){c=e[i],d=c.box,d.update(c.width||t.w,c.height||t.h,YD(c.horizontal,t));const{same:g,other:p}=ZD(t,r,c,n);h|=g&&a.length,m=m||p,d.fullSize||a.push(c)}return h&&Cl(a,t,r,n)||m}function su(e,t,r,n,a){e.top=r,e.left=t,e.right=t+n,e.bottom=r+a,e.width=n,e.height=a}function Xk(e,t,r,n){const a=r.padding;let{x:i,y:o}=t;for(const c of e){const d=c.box,h=n[c.stack]||{placed:0,weight:1},m=c.stackWeight/h.weight||1;if(c.horizontal){const g=t.w*m,p=h.size||d.height;Bc(h.start)&&(o=h.start),d.fullSize?su(d,a.left,o,r.outerWidth-a.right-a.left,p):su(d,t.left+h.placed,o,g,p),h.start=o,h.placed+=g,o=d.bottom}else{const g=t.h*m,p=h.size||d.width;Bc(h.start)&&(i=h.start),d.fullSize?su(d,i,a.top,p,r.outerHeight-a.bottom-a.top):su(d,i,t.top+h.placed,p,g),h.start=i,h.placed+=g,i=d.right}}t.x=i,t.y=o}var ps={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;r!==-1&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const a=ws(e.options.layout.padding),i=Math.max(t-a.width,0),o=Math.max(r-a.height,0),c=KD(e.boxes),d=c.vertical,h=c.horizontal;tt(e.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const m=d.reduce((w,y)=>y.box.options&&y.box.options.display===!1?w:w+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:r,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),p=Object.assign({},a);WS(p,ws(n));const v=Object.assign({maxPadding:p,w:i,h:o,x:a.left,y:a.top},a),x=qD(d.concat(h),g);Cl(c.fullSize,v,g,x),Cl(d,v,g,x),Cl(h,v,g,x)&&Cl(d,v,g,x),GD(v),Xk(c.leftAndTop,v,g,x),v.x+=v.w,v.y+=v.h,Xk(c.rightAndBottom,v,g,x),e.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},tt(c.chartArea,w=>{const y=w.box;Object.assign(y,e.chartArea),y.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class qS{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,n){}removeEventListener(t,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,n,a){return r=Math.max(0,r||t.width),n=n||t.height,{width:r,height:Math.max(0,a?Math.floor(r/a):n)}}isAttached(t){return!0}updateConfig(t){}}class JD extends qS{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ih="$chartjs",XD={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Qk=e=>e===null||e==="";function QD(e,t){const r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[ih]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Qk(a)){const i=Rk(e,"width");i!==void 0&&(e.width=i)}if(Qk(n))if(e.style.height==="")e.height=e.width/(t||2);else{const i=Rk(e,"height");i!==void 0&&(e.height=i)}return e}const KS=QR?{passive:!0}:!1;function e8(e,t,r){e&&e.addEventListener(t,r,KS)}function t8(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,KS)}function r8(e,t){const r=XD[e.type]||e.type,{x:n,y:a}=Qa(e,t);return{type:r,chart:t,native:e,x:n!==void 0?n:null,y:a!==void 0?a:null}}function am(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function s8(e,t,r){const n=e.canvas,a=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||am(c.addedNodes,n),o=o&&!am(c.removedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function n8(e,t,r){const n=e.canvas,a=new MutationObserver(i=>{let o=!1;for(const c of i)o=o||am(c.removedNodes,n),o=o&&!am(c.addedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Hc=new Map;let ej=0;function ZS(){const e=window.devicePixelRatio;e!==ej&&(ej=e,Hc.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function a8(e,t){Hc.size||window.addEventListener("resize",ZS),Hc.set(e,t)}function i8(e){Hc.delete(e),Hc.size||window.removeEventListener("resize",ZS)}function o8(e,t,r){const n=e.canvas,a=n&&Gy(n);if(!a)return;const i=PS((c,d)=>{const h=a.clientWidth;r(c,d),h<a.clientWidth&&r()},window),o=new ResizeObserver(c=>{const d=c[0],h=d.contentRect.width,m=d.contentRect.height;h===0&&m===0||i(h,m)});return o.observe(a),a8(e,i),o}function Xg(e,t,r){r&&r.disconnect(),t==="resize"&&i8(e)}function l8(e,t,r){const n=e.canvas,a=PS(i=>{e.ctx!==null&&r(r8(i,e))},e);return e8(n,t,a),a}class c8 extends qS{acquireContext(t,r){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(QD(t,r),n):null}releaseContext(t){const r=t.canvas;if(!r[ih])return!1;const n=r[ih].initial;["height","width"].forEach(i=>{const o=n[i];Qe(o)?r.removeAttribute(i):r.setAttribute(i,o)});const a=n.style||{};return Object.keys(a).forEach(i=>{r.style[i]=a[i]}),r.width=r.width,delete r[ih],!0}addEventListener(t,r,n){this.removeEventListener(t,r);const a=t.$proxies||(t.$proxies={}),o={attach:s8,detach:n8,resize:o8}[r]||l8;a[r]=o(t,r,n)}removeEventListener(t,r){const n=t.$proxies||(t.$proxies={}),a=n[r];if(!a)return;({attach:Xg,detach:Xg,resize:Xg}[r]||t8)(t,r,a),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,n,a){return XR(t,r,n,a)}isAttached(t){const r=t&&Gy(t);return!!(r&&r.isConnected)}}function d8(e){return!Zy()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?JD:c8}var cu;let Wn=(cu=class{constructor(){Pe(this,"x");Pe(this,"y");Pe(this,"active",!1);Pe(this,"options");Pe(this,"$animations")}tooltipPosition(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}hasValue(){return $c(this.x)&&$c(this.y)}getProps(t,r){const n=this.$animations;if(!r||!n)return this;const a={};return t.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}},Pe(cu,"defaults",{}),Pe(cu,"defaultRoutes"),cu);function u8(e,t){const r=e.options.ticks,n=h8(e),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?f8(t):[],o=i.length,c=i[0],d=i[o-1],h=[];if(o>a)return g8(t,h,i,o/a),h;const m=m8(i,t,a);if(o>0){let g,p;const v=o>1?Math.round((d-c)/(o-1)):null;for(nu(t,h,m,Qe(v)?0:c-v,c),g=0,p=o-1;g<p;g++)nu(t,h,m,i[g],i[g+1]);return nu(t,h,m,d,Qe(v)?t.length:d+v),h}return nu(t,h,m),h}function h8(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),a=e._maxLength/r;return Math.floor(Math.min(n,a))}function m8(e,t,r){const n=p8(e),a=t.length/r;if(!n)return Math.max(a,1);const i=JO(n);for(let o=0,c=i.length-1;o<c;o++){const d=i[o];if(d>a)return d}return Math.max(a,1)}function f8(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}function g8(e,t,r,n){let a=0,i=r[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===i&&(t.push(e[o]),a++,i=r[a*n])}function nu(e,t,r,n,a){const i=Be(n,0),o=Math.min(Be(a,e.length),e.length);let c=0,d,h,m;for(r=Math.ceil(r),a&&(d=a-n,r=d/Math.floor(d/r)),m=i;m<0;)c++,m=Math.round(i+c*r);for(h=Math.max(i,0);h<o;h++)h===m&&(t.push(e[h]),c++,m=Math.round(i+c*r))}function p8(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}const x8=e=>e==="left"?"right":e==="right"?"left":e,tj=(e,t,r)=>t==="top"||t==="left"?e[t]+r:e[t]-r,rj=(e,t)=>Math.min(t||e,e);function sj(e,t){const r=[],n=e.length/t,a=e.length;let i=0;for(;i<a;i+=n)r.push(e[Math.floor(i)]);return r}function y8(e,t,r){const n=e.ticks.length,a=Math.min(t,n-1),i=e._startPixel,o=e._endPixel,c=1e-6;let d=e.getPixelForTick(a),h;if(!(r&&(n===1?h=Math.max(d-i,o-d):t===0?h=(e.getPixelForTick(1)-d)/2:h=(d-e.getPixelForTick(a-1))/2,d+=a<t?h:-h,d<i-c||d>o+c)))return d}function b8(e,t){tt(e,r=>{const n=r.gc,a=n.length/2;let i;if(a>t){for(i=0;i<a;++i)delete r.data[n[i]];n.splice(0,a)}})}function xl(e){return e.drawTicks?e.tickLength:0}function nj(e,t){if(!e.display)return 0;const r=gr(e.font,t),n=ws(e.padding);return(Ut(e.text)?e.text.length:1)*r.lineHeight+n.height}function v8(e,t){return Ci(e,{scale:t,type:"scale"})}function w8(e,t,r){return Ci(e,{tick:r,index:t,type:"tick"})}function k8(e,t,r){let n=By(e);return(r&&t!=="right"||!r&&t==="right")&&(n=x8(n)),n}function j8(e,t,r,n){const{top:a,left:i,bottom:o,right:c,chart:d}=e,{chartArea:h,scales:m}=d;let g=0,p,v,x;const w=o-a,y=c-i;if(e.isHorizontal()){if(v=ur(n,i,c),Ge(r)){const k=Object.keys(r)[0],j=r[k];x=m[k].getPixelForValue(j)+w-t}else r==="center"?x=(h.bottom+h.top)/2+w-t:x=tj(e,r,t);p=c-i}else{if(Ge(r)){const k=Object.keys(r)[0],j=r[k];v=m[k].getPixelForValue(j)-y+t}else r==="center"?v=(h.left+h.right)/2-y+t:v=tj(e,r,t);x=ur(n,o,a),g=r==="left"?-tr:tr}return{titleX:v,titleY:x,maxWidth:p,rotation:g}}class Vo extends Wn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:n,_suggestedMax:a}=this;return t=qs(t,Number.POSITIVE_INFINITY),r=qs(r,Number.NEGATIVE_INFINITY),n=qs(n,Number.POSITIVE_INFINITY),a=qs(a,Number.NEGATIVE_INFINITY),{min:qs(t,n),max:qs(r,a),minDefined:vs(t),maxDefined:vs(r)}}getMinMax(t){let{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),o;if(a&&i)return{min:r,max:n};const c=this.getMatchingVisibleMetas();for(let d=0,h=c.length;d<h;++d)o=c[d].controller.getMinMax(this,t),a||(r=Math.min(r,o.min)),i||(n=Math.max(n,o.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:qs(r,qs(n,r)),max:qs(n,qs(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(t,r,n){const{beginAtZero:a,grace:i,ticks:o}=this.options,c=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=LR(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=c<this.ticks.length;this._convertTicksToLabels(d?sj(this.ticks,c):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=u8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,t=!t),this._startPixel=r,this._endPixel=n,this._reversePixels=t,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ft(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n],i.label=ft(r.callback,[i.value,n,t],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,n=rj(this.ticks.length,t.ticks.maxTicksLimit),a=r.minRotation||0,i=r.maxRotation;let o=a,c,d,h;if(!this._isVisible()||!r.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}const m=this._getLabelSizes(),g=m.widest.width,p=m.highest.height,v=fr(this.chart.width-g,0,this.maxWidth);c=t.offset?this.maxWidth/n:v/(n-1),g+6>c&&(c=v/(n-(t.offset?.5:1)),d=this.maxHeight-xl(t.grid)-r.padding-nj(t.title,this.chart.options.font),h=Math.sqrt(g*g+p*p),o=tR(Math.min(Math.asin(fr((m.highest.height+6)/c,-1,1)),Math.asin(fr(d/h,-1,1))-Math.asin(fr(p/h,-1,1)))),o=Math.max(a,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:n,title:a,grid:i}}=this,o=this._isVisible(),c=this.isHorizontal();if(o){const d=nj(a,r.options.font);if(c?(t.width=this.maxWidth,t.height=xl(i)+d):(t.height=this.maxHeight,t.width=xl(i)+d),n.display&&this.ticks.length){const{first:h,last:m,widest:g,highest:p}=this._getLabelSizes(),v=n.padding*2,x=ii(this.labelRotation),w=Math.cos(x),y=Math.sin(x);if(c){const k=n.mirror?0:y*g.width+w*p.height;t.height=Math.min(this.maxHeight,t.height+k+v)}else{const k=n.mirror?0:w*g.width+y*p.height;t.width=Math.min(this.maxWidth,t.width+k+v)}this._calculatePadding(h,m,y,w)}}this._handleMargins(),c?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,n,a){const{ticks:{align:i,padding:o},position:c}=this.options,d=this.labelRotation!==0,h=c!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,v=0;d?h?(p=a*t.width,v=n*r.height):(p=n*t.height,v=a*r.width):i==="start"?v=r.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,v=r.width/2),this.paddingLeft=Math.max((p-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((v-g+o)*this.width/(this.width-g),0)}else{let m=r.height/2,g=t.height/2;i==="start"?(m=0,g=t.height):i==="end"&&(m=r.height,g=0),this.paddingTop=m+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,n;for(r=0,n=t.length;r<n;r++)Qe(t[r].label)&&(t.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=sj(n,r)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,n){const{ctx:a,_longestTextCache:i}=this,o=[],c=[],d=Math.floor(r/rj(r,n));let h=0,m=0,g,p,v,x,w,y,k,j,N,C,P;for(g=0;g<r;g+=d){if(x=t[g].label,w=this._resolveTickFontOptions(g),a.font=y=w.string,k=i[y]=i[y]||{data:{},gc:[]},j=w.lineHeight,N=C=0,!Qe(x)&&!Ut(x))N=Tk(a,k.data,k.gc,N,x),C=j;else if(Ut(x))for(p=0,v=x.length;p<v;++p)P=x[p],!Qe(P)&&!Ut(P)&&(N=Tk(a,k.data,k.gc,N,P),C+=j);o.push(N),c.push(C),h=Math.max(N,h),m=Math.max(C,m)}b8(i,r);const E=o.indexOf(h),I=c.indexOf(m),M=T=>({width:o[T]||0,height:c[T]||0});return{first:M(0),last:M(r-1),widest:M(E),highest:M(I),widths:o,heights:c}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return sR(this._alignToPixels?Ka(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const n=r[t];return n.$context||(n.$context=w8(this.getContext(),t,n))}return this.$context||(this.$context=v8(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=ii(this.labelRotation),n=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,c=i?i.widest.width+o:0,d=i?i.highest.height+o:0;return this.isHorizontal()?d*n>c*a?c/n:d/a:d*a<c*n?d/n:c/a}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,n=this.chart,a=this.options,{grid:i,position:o,border:c}=a,d=i.offset,h=this.isHorizontal(),g=this.ticks.length+(d?1:0),p=xl(i),v=[],x=c.setContext(this.getContext()),w=x.display?x.width:0,y=w/2,k=function(G){return Ka(n,G,w)};let j,N,C,P,E,I,M,T,H,J,$,D;if(o==="top")j=k(this.bottom),I=this.bottom-p,T=j-y,J=k(t.top)+y,D=t.bottom;else if(o==="bottom")j=k(this.top),J=t.top,D=k(t.bottom)-y,I=j+y,T=this.top+p;else if(o==="left")j=k(this.right),E=this.right-p,M=j-y,H=k(t.left)+y,$=t.right;else if(o==="right")j=k(this.left),H=t.left,$=k(t.right)-y,E=j+y,M=this.left+p;else if(r==="x"){if(o==="center")j=k((t.top+t.bottom)/2+.5);else if(Ge(o)){const G=Object.keys(o)[0],R=o[G];j=k(this.chart.scales[G].getPixelForValue(R))}J=t.top,D=t.bottom,I=j+y,T=I+p}else if(r==="y"){if(o==="center")j=k((t.left+t.right)/2);else if(Ge(o)){const G=Object.keys(o)[0],R=o[G];j=k(this.chart.scales[G].getPixelForValue(R))}E=j-y,M=E-p,H=t.left,$=t.right}const W=Be(a.ticks.maxTicksLimit,g),X=Math.max(1,Math.ceil(g/W));for(N=0;N<g;N+=X){const G=this.getContext(N),R=i.setContext(G),O=c.setContext(G),q=R.lineWidth,Q=R.color,le=O.dash||[],V=O.dashOffset,ne=R.tickWidth,pe=R.tickColor,ye=R.tickBorderDash||[],z=R.tickBorderDashOffset;C=y8(this,N,d),C!==void 0&&(P=Ka(n,C,q),h?E=M=H=$=P:I=T=J=D=P,v.push({tx1:E,ty1:I,tx2:M,ty2:T,x1:H,y1:J,x2:$,y2:D,width:q,color:Q,borderDash:le,borderDashOffset:V,tickWidth:ne,tickColor:pe,tickBorderDash:ye,tickBorderDashOffset:z}))}return this._ticksLength=g,this._borderValue=j,v}_computeLabelItems(t){const r=this.axis,n=this.options,{position:a,ticks:i}=n,o=this.isHorizontal(),c=this.ticks,{align:d,crossAlign:h,padding:m,mirror:g}=i,p=xl(n.grid),v=p+m,x=g?-m:v,w=-ii(this.labelRotation),y=[];let k,j,N,C,P,E,I,M,T,H,J,$,D="middle";if(a==="top")E=this.bottom-x,I=this._getXAxisLabelAlignment();else if(a==="bottom")E=this.top+x,I=this._getXAxisLabelAlignment();else if(a==="left"){const X=this._getYAxisLabelAlignment(p);I=X.textAlign,P=X.x}else if(a==="right"){const X=this._getYAxisLabelAlignment(p);I=X.textAlign,P=X.x}else if(r==="x"){if(a==="center")E=(t.top+t.bottom)/2+v;else if(Ge(a)){const X=Object.keys(a)[0],G=a[X];E=this.chart.scales[X].getPixelForValue(G)+v}I=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")P=(t.left+t.right)/2-v;else if(Ge(a)){const X=Object.keys(a)[0],G=a[X];P=this.chart.scales[X].getPixelForValue(G)}I=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(d==="start"?D="top":d==="end"&&(D="bottom"));const W=this._getLabelSizes();for(k=0,j=c.length;k<j;++k){N=c[k],C=N.label;const X=i.setContext(this.getContext(k));M=this.getPixelForTick(k)+i.labelOffset,T=this._resolveTickFontOptions(k),H=T.lineHeight,J=Ut(C)?C.length:1;const G=J/2,R=X.color,O=X.textStrokeColor,q=X.textStrokeWidth;let Q=I;o?(P=M,I==="inner"&&(k===j-1?Q=this.options.reverse?"left":"right":k===0?Q=this.options.reverse?"right":"left":Q="center"),a==="top"?h==="near"||w!==0?$=-J*H+H/2:h==="center"?$=-W.highest.height/2-G*H+H:$=-W.highest.height+H/2:h==="near"||w!==0?$=H/2:h==="center"?$=W.highest.height/2-G*H:$=W.highest.height-J*H,g&&($*=-1),w!==0&&!X.showLabelBackdrop&&(P+=H/2*Math.sin(w))):(E=M,$=(1-J)*H/2);let le;if(X.showLabelBackdrop){const V=ws(X.backdropPadding),ne=W.heights[k],pe=W.widths[k];let ye=$-V.top,z=0-V.left;switch(D){case"middle":ye-=ne/2;break;case"bottom":ye-=ne;break}switch(I){case"center":z-=pe/2;break;case"right":z-=pe;break;case"inner":k===j-1?z-=pe:k>0&&(z-=pe/2);break}le={left:z,top:ye,width:pe+V.width,height:ne+V.height,color:X.backdropColor}}y.push({label:C,font:T,textOffset:$,options:{rotation:w,color:R,strokeColor:O,strokeWidth:q,textAlign:Q,textBaseline:D,translation:[P,E],backdrop:le}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-ii(this.labelRotation))return t==="top"?"left":"right";let a="center";return r.align==="start"?a="left":r.align==="end"?a="right":r.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,o=this._getLabelSizes(),c=t+i,d=o.widest.width;let h,m;return r==="left"?a?(m=this.right+i,n==="near"?h="left":n==="center"?(h="center",m+=d/2):(h="right",m+=d)):(m=this.right-c,n==="near"?h="right":n==="center"?(h="center",m-=d/2):(h="left",m=this.left)):r==="right"?a?(m=this.left+i,n==="near"?h="right":n==="center"?(h="center",m-=d/2):(h="left",m-=d)):(m=this.left+c,n==="near"?h="left":n==="center"?(h="center",m+=d/2):(h="right",m=this.right)):h="right",{textAlign:h,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:n,top:a,width:i,height:o}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(n,a,i,o),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const a=this.ticks.findIndex(i=>i.value===t);return a>=0?r.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){const r=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const c=(d,h,m)=>{!m.width||!m.color||(n.save(),n.lineWidth=m.width,n.strokeStyle=m.color,n.setLineDash(m.borderDash||[]),n.lineDashOffset=m.borderDashOffset,n.beginPath(),n.moveTo(d.x,d.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(r.display)for(i=0,o=a.length;i<o;++i){const d=a[i];r.drawOnChartArea&&c({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),r.drawTicks&&c({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const c=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let h,m,g,p;this.isHorizontal()?(h=Ka(t,this.left,o)-o/2,m=Ka(t,this.right,c)+c/2,g=p=d):(g=Ka(t,this.top,o)-o/2,p=Ka(t,this.bottom,c)+c/2,h=m=d),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(h,g),r.lineTo(m,p),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,a=this._computeLabelArea();a&&Uy(n,a);const i=this.getLabelItems(t);for(const o of i){const c=o.options,d=o.font,h=o.label,m=o.textOffset;Vc(n,h,0,m,d,c)}a&&Vy(n)}drawTitle(){const{ctx:t,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;const i=gr(n.font),o=ws(n.padding),c=n.align;let d=i.lineHeight/2;r==="bottom"||r==="center"||Ge(r)?(d+=o.bottom,Ut(n.text)&&(d+=i.lineHeight*(n.text.length-1))):d+=o.top;const{titleX:h,titleY:m,maxWidth:g,rotation:p}=j8(this,d,r,c);Vc(t,n.text,0,0,i,{color:n.color,maxWidth:g,rotation:p,textAlign:k8(c,r,a),textBaseline:"middle",translation:[h,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,n=Be(t.grid&&t.grid.z,-1),a=Be(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Vo.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let i,o;for(i=0,o=r.length;i<o;++i){const c=r[i];c[n]===this.id&&(!t||c.type===t)&&a.push(c)}return a}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return gr(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class au{constructor(t,r,n){this.type=t,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let n;S8(r)&&(n=this.register(r));const a=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in a||(a[i]=t,N8(t,o,n),this.override&&Et.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const r=this.items,n=t.id,a=this.scope;n in r&&delete r[n],a&&n in Et[a]&&(delete Et[a][n],this.override&&delete Ni[n])}}function N8(e,t,r){const n=zc(Object.create(null),[r?Et.get(r):{},Et.get(t),e.defaults]);Et.set(t,n),e.defaultRoutes&&_8(t,e.defaultRoutes),e.descriptors&&Et.describe(t,e.descriptors)}function _8(e,t){Object.keys(t).forEach(r=>{const n=r.split("."),a=n.pop(),i=[e].concat(n).join("."),o=t[r].split("."),c=o.pop(),d=o.join(".");Et.route(i,a,d,c)})}function S8(e){return"id"in e&&"defaults"in e}class C8{constructor(){this.controllers=new au(yo,"datasets",!0),this.elements=new au(Wn,"elements"),this.plugins=new au(Object,"plugins"),this.scales=new au(Vo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,n){[...r].forEach(a=>{const i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(t,i,a):tt(a,o=>{const c=n||this._getRegistryForType(o);this._exec(t,c,o)})})}_exec(t,r,n){const a=Dy(t);ft(n["before"+a],[],n),r[t](n),ft(n["after"+a],[],n)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(t))return n}return this.plugins}_get(t,r,n){const a=r.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return a}}var Gs=new C8;class P8{constructor(){this._init=void 0}notify(t,r,n,a){if(r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=a?this._descriptors(t).filter(a):this._descriptors(t),o=this._notify(i,t,r,n);return r==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,r,n,a){a=a||{};for(const i of t){const o=i.plugin,c=o[n],d=[r,a,i.options];if(ft(c,d,o)===!1&&a.cancelable)return!1}return!0}invalidate(){Qe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const n=t&&t.config,a=Be(n.options&&n.options.plugins,{}),i=E8(n);return a===!1&&!r?[]:T8(t,i,a,r)}_notifyStateChanges(t){const r=this._oldCache||[],n=this._cache,a=(i,o)=>i.filter(c=>!o.some(d=>c.plugin.id===d.plugin.id));this._notify(a(r,n),t,"stop"),this._notify(a(n,r),t,"start")}}function E8(e){const t={},r=[],n=Object.keys(Gs.plugins.items);for(let i=0;i<n.length;i++)r.push(Gs.getPlugin(n[i]));const a=e.plugins||[];for(let i=0;i<a.length;i++){const o=a[i];r.indexOf(o)===-1&&(r.push(o),t[o.id]=!0)}return{plugins:r,localIds:t}}function L8(e,t){return!t&&e===!1?null:e===!0?{}:e}function T8(e,{plugins:t,localIds:r},n,a){const i=[],o=e.getContext();for(const c of t){const d=c.id,h=L8(n[d],a);h!==null&&i.push({plugin:c,options:I8(e.config,{plugin:c,local:r[d]},h,o)})}return i}function I8(e,{plugin:t,local:r},n,a){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(n,i);return r&&t.defaults&&o.push(t.defaults),e.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function V0(e,t){const r=Et.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function A8(e,t){let r=e;return e==="_index_"?r=t:e==="_value_"&&(r=t==="x"?"y":"x"),r}function M8(e,t){return e===t?"_index_":"_value_"}function aj(e){if(e==="x"||e==="y"||e==="r")return e}function O8(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function H0(e,...t){if(aj(e))return e;for(const r of t){const n=r.axis||O8(r.position)||e.length>1&&aj(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function ij(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function R8(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(r.length)return ij(e,"x",r[0])||ij(e,"y",r[0])}return{}}function D8(e,t){const r=Ni[e.type]||{scales:{}},n=t.scales||{},a=V0(e.type,t),i=Object.create(null);return Object.keys(n).forEach(o=>{const c=n[o];if(!Ge(c))return console.error(`Invalid scale configuration for scale: ${o}`);if(c._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const d=H0(o,c,R8(o,e),Et.scales[c.type]),h=M8(d,a),m=r.scales||{};i[o]=tc(Object.create(null),[{axis:d},c,m[d],m[h]])}),e.data.datasets.forEach(o=>{const c=o.type||e.type,d=o.indexAxis||V0(c,t),m=(Ni[c]||{}).scales||{};Object.keys(m).forEach(g=>{const p=A8(g,d),v=o[p+"AxisID"]||p;i[v]=i[v]||Object.create(null),tc(i[v],[{axis:p},n[v],m[g]])})}),Object.keys(i).forEach(o=>{const c=i[o];tc(c,[Et.scales[c.type],Et.scale])}),i}function GS(e){const t=e.options||(e.options={});t.plugins=Be(t.plugins,{}),t.scales=D8(e,t)}function YS(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function F8(e){return e=e||{},e.data=YS(e.data),GS(e),e}const oj=new Map,JS=new Set;function iu(e,t){let r=oj.get(e);return r||(r=t(),oj.set(e,r),JS.add(r)),r}const yl=(e,t,r)=>{const n=To(t,r);n!==void 0&&e.add(n)};class z8{constructor(t){this._config=F8(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=YS(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),GS(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return iu(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return iu(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return iu(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,n=this.type;return iu(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const n=this._scopeCache;let a=n.get(t);return(!a||r)&&(a=new Map,n.set(t,a)),a}getOptionScopes(t,r,n){const{options:a,type:i}=this,o=this._cachedScopes(t,n),c=o.get(r);if(c)return c;const d=new Set;r.forEach(m=>{t&&(d.add(t),m.forEach(g=>yl(d,t,g))),m.forEach(g=>yl(d,a,g)),m.forEach(g=>yl(d,Ni[i]||{},g)),m.forEach(g=>yl(d,Et,g)),m.forEach(g=>yl(d,$0,g))});const h=Array.from(d);return h.length===0&&h.push(Object.create(null)),JS.has(r)&&o.set(r,h),h}chartOptionScopes(){const{options:t,type:r}=this;return[t,Ni[r]||{},Et.datasets[r]||{},{type:r},Et,$0]}resolveNamedOptions(t,r,n,a=[""]){const i={$shared:!0},{resolver:o,subPrefixes:c}=lj(this._resolverCache,t,a);let d=o;if($8(o,r)){i.$shared=!1,n=Ia(n)?n():n;const h=this.createResolver(t,n,c);d=Io(o,n,h)}for(const h of r)i[h]=d[h];return i}createResolver(t,r,n=[""],a){const{resolver:i}=lj(this._resolverCache,t,n);return Ge(r)?Io(i,r,void 0,a):i}}function lj(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=r.join();let i=n.get(a);return i||(i={resolver:Wy(t,r),subPrefixes:r.filter(c=>!c.toLowerCase().includes("hover"))},n.set(a,i)),i}const B8=e=>Ge(e)&&Object.getOwnPropertyNames(e).some(t=>Ia(e[t]));function $8(e,t){const{isScriptable:r,isIndexable:n}=AS(e);for(const a of t){const i=r(a),o=n(a),c=(o||i)&&e[a];if(i&&(Ia(c)||B8(c))||o&&Ut(c))return!0}return!1}var U8="4.5.1";const V8=["top","bottom","left","right","chartArea"];function cj(e,t){return e==="top"||e==="bottom"||V8.indexOf(e)===-1&&t==="x"}function dj(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function uj(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),ft(r&&r.onComplete,[e],t)}function H8(e){const t=e.chart,r=t.options.animation;ft(r&&r.onProgress,[e],t)}function XS(e){return Zy()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const oh={},hj=e=>{const t=XS(e);return Object.values(oh).filter(r=>r.canvas===t).pop()};function W8(e,t,r){const n=Object.keys(e);for(const a of n){const i=+a;if(i>=t){const o=e[a];delete e[a],(r>0||i>t)&&(e[i+r]=o)}}}function q8(e,t,r,n){return!r||e.type==="mouseout"?null:n?t:e}var Xn;let ad=(Xn=class{static register(...t){Gs.add(...t),mj()}static unregister(...t){Gs.remove(...t),mj()}constructor(t,r){const n=this.config=new z8(r),a=XS(t),i=hj(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||d8(a)),this.platform.updateConfig(n);const c=this.platform.acquireContext(a,o.aspectRatio),d=c&&c.canvas,h=d&&d.height,m=d&&d.width;if(this.id=UO(),this.ctx=c,this.canvas=d,this.width=m,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new P8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oR(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],oh[this.id]=this,!c||!d){console.error("Failed to create chart: can't acquire context from the given item");return}Sn.listen(this,"complete",uj),Sn.listen(this,"progress",H8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:n,height:a,_aspectRatio:i}=this;return Qe(t)?r&&i?i:a?n/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Gs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ok(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ik(this.canvas,this.ctx),this}stop(){return Sn.stop(this),this}resize(t,r){Sn.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,t,r,i),c=n.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ok(this,c,!0)&&(this.notifyPlugins("resize",{size:o}),ft(n.onResize,[this,o],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};tt(r,(n,a)=>{n.id=a})}buildOrUpdateScales(){const t=this.options,r=t.scales,n=this.scales,a=Object.keys(n).reduce((o,c)=>(o[c]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const c=r[o],d=H0(o,c),h=d==="r",m=d==="x";return{options:c,dposition:h?"chartArea":m?"bottom":"left",dtype:h?"radialLinear":m?"category":"linear"}}))),tt(i,o=>{const c=o.options,d=c.id,h=H0(d,c),m=Be(c.type,o.dtype);(c.position===void 0||cj(c.position,h)!==cj(o.dposition))&&(c.position=o.dposition),a[d]=!0;let g=null;if(d in n&&n[d].type===m)g=n[d];else{const p=Gs.getScale(m);g=new p({id:d,type:m,ctx:this.ctx,chart:this}),n[g.id]=g}g.init(c,t)}),tt(a,(o,c)=>{o||delete n[c]}),tt(n,o=>{ps.configure(this,o,o.options),ps.addBox(this,o)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,n=t.length;if(t.sort((a,i)=>a.index-i.index),n>r){for(let a=r;a<n;++a)this._destroyDatasetMeta(a);t.splice(r,n-r)}this._sortedMetasets=t.slice(0).sort(dj("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((n,a)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=r.length;n<a;n++){const i=r[n];let o=this.getDatasetMeta(n);const c=i.type||this.config.type;if(o.type&&o.type!==c&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=c,o.indexAxis=i.indexAxis||V0(c,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const d=Gs.getController(c),{datasetElementType:h,dataElementType:m}=Et.datasets[c];Object.assign(d,{dataElementType:Gs.getElement(m),datasetElementType:h&&Gs.getElement(h)}),o.controller=new d(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){tt(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,m=this.data.datasets.length;h<m;h++){const{controller:g}=this.getDatasetMeta(h),p=!a&&i.indexOf(g)===-1;g.buildOrUpdateElements(p),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),a||tt(i,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(dj("z","_idx"));const{_active:c,_lastEvent:d}=this;d?this._eventHandler(d,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){tt(this.scales,t=>{ps.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!kk(r,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:i}of r){const o=n==="_removeElements"?-i:i;W8(t,a,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(t.filter(o=>o[0]===i).map((o,c)=>c+","+o.splice(1).join(","))),a=n(0);for(let i=1;i<r;i++)if(!kk(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ps.update(this,this.width,this.height,t);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],tt(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Ia(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const n=this.getDatasetMeta(t),a={meta:n,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(r),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Sn.has(this)?this.attached&&!Sn.running(this)&&Sn.start(this):(this.draw(),uj({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,n=[];let a,i;for(a=0,i=r.length;a<i;++a){const o=r[a];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,n={meta:t,index:t.index,cancelable:!0},a=mD(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&Uy(r,a),t.controller.draw(),a&&Vy(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Uc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,n,a){const i=VD.modes[r];return typeof i=="function"?i(this,t,n,a):[]}getDatasetMeta(t){const r=this.data.datasets[t],n=this._metasets;let a=n.filter(i=>i&&i._dataset===r).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=Ci(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(t,r){const n=this.getDatasetMeta(t);n.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,n){const a=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,a);Bc(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update(c=>c.datasetIndex===t?a:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Sn.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ik(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete oh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,n=(i,o)=>{r.addEventListener(this,i,o),t[i]=o},a=(i,o,c)=>{i.offsetX=o,i.offsetY=c,this._eventHandler(i)};tt(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,n=(d,h)=>{r.addEventListener(this,d,h),t[d]=h},a=(d,h)=>{t[d]&&(r.removeEventListener(this,d,h),delete t[d])},i=(d,h)=>{this.canvas&&this.resize(d,h)};let o;const c=()=>{a("attach",c),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",c)},r.isAttached(this.canvas)?c():o()}unbindEvents(){tt(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},tt(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,n){const a=n?"set":"remove";let i,o,c,d;for(r==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),c=0,d=t.length;c<d;++c){o=t[c];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],n=t.map(({datasetIndex:i,index:o})=>{const c=this.getDatasetMeta(i);if(!c)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:c.data[o],index:o}});!em(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(t,r,n){return this._plugins.notify(this,t,r,n)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,n){const a=this.options.hover,i=(d,h)=>d.filter(m=>!h.some(g=>m.datasetIndex===g.datasetIndex&&m.index===g.index)),o=i(r,t),c=n?t:i(t,r);o.length&&this.updateHoverStyle(o,a.mode,!1),c.length&&a.mode&&this.updateHoverStyle(c,a.mode,!0)}_eventHandler(t,r){const n={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},a=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;const i=this._handleEvent(t,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(t,r,n){const{_active:a=[],options:i}=this,o=r,c=this._getActiveElements(t,a,n,o),d=ZO(t),h=q8(t,this._lastEvent,n,d);n&&(this._lastEvent=null,ft(i.onHover,[t,c,this],this),d&&ft(i.onClick,[t,c,this],this));const m=!em(c,a);return(m||r)&&(this._active=c,this._updateHoverStyles(c,a,r)),this._lastEvent=h,m}_getActiveElements(t,r,n,a){if(t.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,a)}},Pe(Xn,"defaults",Et),Pe(Xn,"instances",oh),Pe(Xn,"overrides",Ni),Pe(Xn,"registry",Gs),Pe(Xn,"version",U8),Pe(Xn,"getChart",hj),Xn);function mj(){return tt(ad.instances,e=>e._plugins.invalidate())}function K8(e,t,r){const{startAngle:n,x:a,y:i,outerRadius:o,innerRadius:c,options:d}=t,{borderWidth:h,borderJoinStyle:m}=d,g=Math.min(h/o,Ls(n-r));if(e.beginPath(),e.arc(a,i,o-h/2,n+g/2,r-g/2),c>0){const p=Math.min(h/c,Ls(n-r));e.arc(a,i,c+h/2,r-p/2,n+p/2,!0)}else{const p=Math.min(h/2,o*Ls(n-r));if(m==="round")e.arc(a,i,p,r-lt/2,n+lt/2,!0);else if(m==="bevel"){const v=2*p*p,x=-v*Math.cos(r+lt/2)+a,w=-v*Math.sin(r+lt/2)+i,y=v*Math.cos(n+lt/2)+a,k=v*Math.sin(n+lt/2)+i;e.lineTo(x,w),e.lineTo(y,k)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Z8(e,t,r){const{startAngle:n,pixelMargin:a,x:i,y:o,outerRadius:c,innerRadius:d}=t;let h=a/c;e.beginPath(),e.arc(i,o,c,n-h,r+h),d>a?(h=a/d,e.arc(i,o,d,r+h,n-h,!0)):e.arc(i,o,a,r+tr,n-tr),e.closePath(),e.clip()}function G8(e){return Hy(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Y8(e,t,r,n){const a=G8(e.options.borderRadius),i=(r-t)/2,o=Math.min(i,n*t/2),c=d=>{const h=(r-Math.min(i,d))*n/2;return fr(d,0,Math.min(i,h))};return{outerStart:c(a.outerStart),outerEnd:c(a.outerEnd),innerStart:fr(a.innerStart,0,o),innerEnd:fr(a.innerEnd,0,o)}}function Bi(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function im(e,t,r,n,a,i){const{x:o,y:c,startAngle:d,pixelMargin:h,innerRadius:m}=t,g=Math.max(t.outerRadius+n+r-h,0),p=m>0?m+n+r+h:0;let v=0;const x=a-d;if(n){const X=m>0?m-n:0,G=g>0?g-n:0,R=(X+G)/2,O=R!==0?x*R/(R+n):x;v=(x-O)/2}const w=Math.max(.001,x*g-r/lt)/g,y=(x-w)/2,k=d+y+v,j=a-y-v,{outerStart:N,outerEnd:C,innerStart:P,innerEnd:E}=Y8(t,p,g,j-k),I=g-N,M=g-C,T=k+N/I,H=j-C/M,J=p+P,$=p+E,D=k+P/J,W=j-E/$;if(e.beginPath(),i){const X=(T+H)/2;if(e.arc(o,c,g,T,X),e.arc(o,c,g,X,H),C>0){const q=Bi(M,H,o,c);e.arc(q.x,q.y,C,H,j+tr)}const G=Bi($,j,o,c);if(e.lineTo(G.x,G.y),E>0){const q=Bi($,W,o,c);e.arc(q.x,q.y,E,j+tr,W+Math.PI)}const R=(j-E/p+(k+P/p))/2;if(e.arc(o,c,p,j-E/p,R,!0),e.arc(o,c,p,R,k+P/p,!0),P>0){const q=Bi(J,D,o,c);e.arc(q.x,q.y,P,D+Math.PI,k-tr)}const O=Bi(I,k,o,c);if(e.lineTo(O.x,O.y),N>0){const q=Bi(I,T,o,c);e.arc(q.x,q.y,N,k-tr,T)}}else{e.moveTo(o,c);const X=Math.cos(T)*g+o,G=Math.sin(T)*g+c;e.lineTo(X,G);const R=Math.cos(H)*g+o,O=Math.sin(H)*g+c;e.lineTo(R,O)}e.closePath()}function J8(e,t,r,n,a){const{fullCircles:i,startAngle:o,circumference:c}=t;let d=t.endAngle;if(i){im(e,t,r,n,d,a);for(let h=0;h<i;++h)e.fill();isNaN(c)||(d=o+(c%nr||nr))}return im(e,t,r,n,d,a),e.fill(),d}function X8(e,t,r,n,a){const{fullCircles:i,startAngle:o,circumference:c,options:d}=t,{borderWidth:h,borderJoinStyle:m,borderDash:g,borderDashOffset:p,borderRadius:v}=d,x=d.borderAlign==="inner";if(!h)return;e.setLineDash(g||[]),e.lineDashOffset=p,x?(e.lineWidth=h*2,e.lineJoin=m||"round"):(e.lineWidth=h,e.lineJoin=m||"bevel");let w=t.endAngle;if(i){im(e,t,r,n,w,a);for(let y=0;y<i;++y)e.stroke();isNaN(c)||(w=o+(c%nr||nr))}x&&Z8(e,t,w),d.selfJoin&&w-o>=lt&&v===0&&m!=="miter"&&K8(e,t,w),i||(im(e,t,r,n,w,a),e.stroke())}class ro extends Wn{constructor(r){super();Pe(this,"circumference");Pe(this,"endAngle");Pe(this,"fullCircles");Pe(this,"innerRadius");Pe(this,"outerRadius");Pe(this,"pixelMargin");Pe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.getProps(["x","y"],a),{angle:o,distance:c}=NS(i,{x:r,y:n}),{startAngle:d,endAngle:h,innerRadius:m,outerRadius:g,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),v=(this.options.spacing+this.options.borderWidth)/2,x=Be(p,h-d),w=Fy(o,d,h)&&d!==h,y=x>=nr||w,k=da(c,m+v,g+v);return y&&k}getCenterPoint(r){const{x:n,y:a,startAngle:i,endAngle:o,innerRadius:c,outerRadius:d}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:h,spacing:m}=this.options,g=(i+o)/2,p=(c+d+m+h)/2;return{x:n+Math.cos(g)*p,y:a+Math.sin(g)*p}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:a}=this,i=(n.offset||0)/4,o=(n.spacing||0)/2,c=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=a>nr?Math.floor(a/nr):0,a===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const d=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(d)*i,Math.sin(d)*i);const h=1-Math.sin(Math.min(lt,a||0)),m=i*h;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,J8(r,this,m,o,c),X8(r,this,m,o,c),r.restore()}}Pe(ro,"id","arc"),Pe(ro,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Pe(ro,"defaultRoutes",{backgroundColor:"backgroundColor"}),Pe(ro,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function QS(e,t,r=t){e.lineCap=Be(r.borderCapStyle,t.borderCapStyle),e.setLineDash(Be(r.borderDash,t.borderDash)),e.lineDashOffset=Be(r.borderDashOffset,t.borderDashOffset),e.lineJoin=Be(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Be(r.borderWidth,t.borderWidth),e.strokeStyle=Be(r.borderColor,t.borderColor)}function Q8(e,t,r){e.lineTo(r.x,r.y)}function eF(e){return e.stepped?wR:e.tension||e.cubicInterpolationMode==="monotone"?kR:Q8}function e4(e,t,r={}){const n=e.length,{start:a=0,end:i=n-1}=r,{start:o,end:c}=t,d=Math.max(a,o),h=Math.min(i,c),m=a<o&&i<o||a>c&&i>c;return{count:n,start:d,loop:t.loop,ilen:h<d&&!m?n+h-d:h-d}}function tF(e,t,r,n){const{points:a,options:i}=t,{count:o,start:c,loop:d,ilen:h}=e4(a,r,n),m=eF(i);let{move:g=!0,reverse:p}=n||{},v,x,w;for(v=0;v<=h;++v)x=a[(c+(p?h-v:v))%o],!x.skip&&(g?(e.moveTo(x.x,x.y),g=!1):m(e,w,x,p,i.stepped),w=x);return d&&(x=a[(c+(p?h:0))%o],m(e,w,x,p,i.stepped)),!!d}function rF(e,t,r,n){const a=t.points,{count:i,start:o,ilen:c}=e4(a,r,n),{move:d=!0,reverse:h}=n||{};let m=0,g=0,p,v,x,w,y,k;const j=C=>(o+(h?c-C:C))%i,N=()=>{w!==y&&(e.lineTo(m,y),e.lineTo(m,w),e.lineTo(m,k))};for(d&&(v=a[j(0)],e.moveTo(v.x,v.y)),p=0;p<=c;++p){if(v=a[j(p)],v.skip)continue;const C=v.x,P=v.y,E=C|0;E===x?(P<w?w=P:P>y&&(y=P),m=(g*m+C)/++g):(N(),e.lineTo(C,P),x=E,g=0,w=y=P),k=P}N()}function W0(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?rF:tF}function sF(e){return e.stepped?eD:e.tension||e.cubicInterpolationMode==="monotone"?tD:ei}function nF(e,t,r,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,r,n)&&a.closePath()),QS(e,t.options),e.stroke(a)}function aF(e,t,r,n){const{segments:a,options:i}=t,o=W0(t);for(const c of a)QS(e,i,c.style),e.beginPath(),o(e,t,c,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}const iF=typeof Path2D=="function";function oF(e,t,r,n){iF&&!t.options.segment?nF(e,t,r,n):aF(e,t,r,n)}class so extends Wn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;qR(this._points,n,t,a,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cD(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,n=t.length;return n&&r[t[n-1].end]}interpolate(t,r){const n=this.options,a=t[r],i=this.points,o=iD(this,{property:r,start:a,end:a});if(!o.length)return;const c=[],d=sF(n);let h,m;for(h=0,m=o.length;h<m;++h){const{start:g,end:p}=o[h],v=i[g],x=i[p];if(v===x){c.push(v);continue}const w=Math.abs((a-v[r])/(x[r]-v[r])),y=d(v,x,w,n.stepped);y[r]=t[r],c.push(y)}return c.length===1?c[0]:c}pathSegment(t,r,n){return W0(this)(t,this,r,n)}path(t,r,n){const a=this.segments,i=W0(this);let o=this._loop;r=r||0,n=n||this.points.length-r;for(const c of a)o&=i(t,this,c,{start:r,end:r+n-1});return!!o}draw(t,r,n,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),oF(t,this,n,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Pe(so,"id","line"),Pe(so,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Pe(so,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Pe(so,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function fj(e,t,r,n){const a=e.options,{[r]:i}=e.getProps([r],n);return Math.abs(t-i)<a.radius+a.hitRadius}class ac extends Wn{constructor(r){super();Pe(this,"parsed");Pe(this,"skip");Pe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.options,{x:o,y:c}=this.getProps(["x","y"],a);return Math.pow(r-o,2)+Math.pow(n-c,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return fj(this,r,"x",n)}inYRange(r,n){return fj(this,r,"y",n)}getCenterPoint(r){const{x:n,y:a}=this.getProps(["x","y"],r);return{x:n,y:a}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const a=n&&r.borderWidth||0;return(n+a)*2}draw(r,n){const a=this.options;this.skip||a.radius<.1||!Uc(this,n,this.size(a)/2)||(r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.fillStyle=a.backgroundColor,U0(r,a,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}Pe(ac,"id","point"),Pe(ac,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Pe(ac,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function t4(e,t){const{x:r,y:n,base:a,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let c,d,h,m,g;return e.horizontal?(g=o/2,c=Math.min(r,a),d=Math.max(r,a),h=n-g,m=n+g):(g=i/2,c=r-g,d=r+g,h=Math.min(n,a),m=Math.max(n,a)),{left:c,top:h,right:d,bottom:m}}function ha(e,t,r,n){return e?0:fr(t,r,n)}function lF(e,t,r){const n=e.options.borderWidth,a=e.borderSkipped,i=IS(n);return{t:ha(a.top,i.top,0,r),r:ha(a.right,i.right,0,t),b:ha(a.bottom,i.bottom,0,r),l:ha(a.left,i.left,0,t)}}function cF(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,i=po(a),o=Math.min(t,r),c=e.borderSkipped,d=n||Ge(a);return{topLeft:ha(!d||c.top||c.left,i.topLeft,0,o),topRight:ha(!d||c.top||c.right,i.topRight,0,o),bottomLeft:ha(!d||c.bottom||c.left,i.bottomLeft,0,o),bottomRight:ha(!d||c.bottom||c.right,i.bottomRight,0,o)}}function dF(e){const t=t4(e),r=t.right-t.left,n=t.bottom-t.top,a=lF(e,r/2,n/2),i=cF(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function Qg(e,t,r,n){const a=t===null,i=r===null,c=e&&!(a&&i)&&t4(e,n);return c&&(a||da(t,c.left,c.right))&&(i||da(r,c.top,c.bottom))}function uF(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function hF(e,t){e.rect(t.x,t.y,t.w,t.h)}function ep(e,t,r={}){const n=e.x!==r.x?-t:0,a=e.y!==r.y?-t:0,i=(e.x+e.w!==r.x+r.w?t:0)-n,o=(e.y+e.h!==r.y+r.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+i,h:e.h+o,radius:e.radius}}class ic extends Wn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:o}=dF(this),c=uF(o.radius)?sm:hF;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),c(t,ep(o,r,i)),t.clip(),c(t,ep(i,-r,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),c(t,ep(i,r)),t.fillStyle=a,t.fill(),t.restore()}inRange(t,r,n){return Qg(this,t,r,n)}inXRange(t,r){return Qg(this,t,null,r)}inYRange(t,r){return Qg(this,null,t,r)}getCenterPoint(t){const{x:r,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(r+a)/2:r,y:i?n:(n+a)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Pe(ic,"id","bar"),Pe(ic,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Pe(ic,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const gj=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}},mF=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class pj extends Wn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,n){this.maxWidth=t,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=ft(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(n=>t.filter(n,this.chart.data))),t.sort&&(r=r.sort((n,a)=>t.sort(n,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,a=gr(n.font),i=a.size,o=this._computeTitleHeight(),{boxWidth:c,itemHeight:d}=gj(n,i);let h,m;r.font=a.string,this.isHorizontal()?(h=this.maxWidth,m=this._fitRows(o,i,c,d)+10):(m=this.maxHeight,h=this._fitCols(o,a,c,d)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,r,n,a){const{ctx:i,maxWidth:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],h=this.lineWidths=[0],m=a+c;let g=t;i.textAlign="left",i.textBaseline="middle";let p=-1,v=-m;return this.legendItems.forEach((x,w)=>{const y=n+r/2+i.measureText(x.text).width;(w===0||h[h.length-1]+y+2*c>o)&&(g+=m,h[h.length-(w>0?0:1)]=0,v+=m,p++),d[w]={left:0,top:v,row:p,width:y,height:a},h[h.length-1]+=y+c}),g}_fitCols(t,r,n,a){const{ctx:i,maxHeight:o,options:{labels:{padding:c}}}=this,d=this.legendHitBoxes=[],h=this.columnSizes=[],m=o-t;let g=c,p=0,v=0,x=0,w=0;return this.legendItems.forEach((y,k)=>{const{itemWidth:j,itemHeight:N}=fF(n,r,i,y,a);k>0&&v+N+2*c>m&&(g+=p+c,h.push({width:p,height:v}),x+=p+c,w++,p=v=0),d[k]={left:x,top:v,col:w,width:j,height:N},p=Math.max(p,j),v+=N+c}),g+=p,h.push({width:p,height:v}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:a},rtl:i}}=this,o=xo(i,this.left,this.width);if(this.isHorizontal()){let c=0,d=ur(n,this.left+a,this.right-this.lineWidths[c]);for(const h of r)c!==h.row&&(c=h.row,d=ur(n,this.left+a,this.right-this.lineWidths[c])),h.top+=this.top+t+a,h.left=o.leftForLtr(o.x(d),h.width),d+=h.width+a}else{let c=0,d=ur(n,this.top+t+a,this.bottom-this.columnSizes[c].height);for(const h of r)h.col!==c&&(c=h.col,d=ur(n,this.top+t+a,this.bottom-this.columnSizes[c].height)),h.top=d,h.left+=this.left+a,h.left=o.leftForLtr(o.x(h.left),h.width),d+=h.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Uy(t,this),this._draw(),Vy(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:n,ctx:a}=this,{align:i,labels:o}=t,c=Et.color,d=xo(t.rtl,this.left,this.width),h=gr(o.font),{padding:m}=o,g=h.size,p=g/2;let v;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=h.string;const{boxWidth:x,boxHeight:w,itemHeight:y}=gj(o,g),k=function(E,I,M){if(isNaN(x)||x<=0||isNaN(w)||w<0)return;a.save();const T=Be(M.lineWidth,1);if(a.fillStyle=Be(M.fillStyle,c),a.lineCap=Be(M.lineCap,"butt"),a.lineDashOffset=Be(M.lineDashOffset,0),a.lineJoin=Be(M.lineJoin,"miter"),a.lineWidth=T,a.strokeStyle=Be(M.strokeStyle,c),a.setLineDash(Be(M.lineDash,[])),o.usePointStyle){const H={radius:w*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:T},J=d.xPlus(E,x/2),$=I+p;TS(a,H,J,$,o.pointStyleWidth&&x)}else{const H=I+Math.max((g-w)/2,0),J=d.leftForLtr(E,x),$=po(M.borderRadius);a.beginPath(),Object.values($).some(D=>D!==0)?sm(a,{x:J,y:H,w:x,h:w,radius:$}):a.rect(J,H,x,w),a.fill(),T!==0&&a.stroke()}a.restore()},j=function(E,I,M){Vc(a,M.text,E,I+y/2,h,{strikethrough:M.hidden,textAlign:d.textAlign(M.textAlign)})},N=this.isHorizontal(),C=this._computeTitleHeight();N?v={x:ur(i,this.left+m,this.right-n[0]),y:this.top+m+C,line:0}:v={x:this.left+m,y:ur(i,this.top+C+m,this.bottom-r[0].height),line:0},FS(this.ctx,t.textDirection);const P=y+m;this.legendItems.forEach((E,I)=>{a.strokeStyle=E.fontColor,a.fillStyle=E.fontColor;const M=a.measureText(E.text).width,T=d.textAlign(E.textAlign||(E.textAlign=o.textAlign)),H=x+p+M;let J=v.x,$=v.y;d.setWidth(this.width),N?I>0&&J+H+m>this.right&&($=v.y+=P,v.line++,J=v.x=ur(i,this.left+m,this.right-n[v.line])):I>0&&$+P>this.bottom&&(J=v.x=J+r[v.line].width+m,v.line++,$=v.y=ur(i,this.top+C+m,this.bottom-r[v.line].height));const D=d.x(J);if(k(D,$,E),J=lR(T,J+x+p,N?J+H:this.right,t.rtl),j(d.x(J),$,E),N)v.x+=H+m;else if(typeof E.text!="string"){const W=h.lineHeight;v.y+=r4(E,W)+m}else v.y+=P}),zS(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,n=gr(r.font),a=ws(r.padding);if(!r.display)return;const i=xo(t.rtl,this.left,this.width),o=this.ctx,c=r.position,d=n.size/2,h=a.top+d;let m,g=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+h,g=ur(t.align,g,this.right-p);else{const x=this.columnSizes.reduce((w,y)=>Math.max(w,y.height),0);m=h+ur(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const v=ur(c,g,g+p);o.textAlign=i.textAlign(By(c)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=n.string,Vc(o,r.text,v,m,n)}_computeTitleHeight(){const t=this.options.title,r=gr(t.font),n=ws(t.padding);return t.display?r.lineHeight+n.height:0}_getLegendItemAt(t,r){let n,a,i;if(da(t,this.left,this.right)&&da(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],da(t,a.left,a.left+a.width)&&da(r,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(t){const r=this.options;if(!xF(t.type,r))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const a=this._hoveredItem,i=mF(a,n);a&&!i&&ft(r.onLeave,[t,a,this],this),this._hoveredItem=n,n&&!i&&ft(r.onHover,[t,n,this],this)}else n&&ft(r.onClick,[t,n,this],this)}}function fF(e,t,r,n,a){const i=gF(n,e,t,r),o=pF(a,n,t.lineHeight);return{itemWidth:i,itemHeight:o}}function gF(e,t,r,n){let a=e.text;return a&&typeof a!="string"&&(a=a.reduce((i,o)=>i.length>o.length?i:o)),t+r.size/2+n.measureText(a).width}function pF(e,t,r){let n=e;return typeof t.text!="string"&&(n=r4(t,r)),n}function r4(e,t){const r=e.text?e.text.length:0;return t*r}function xF(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var s4={id:"legend",_element:pj,start(e,t,r){const n=e.legend=new pj({ctx:e.ctx,options:r,chart:e});ps.configure(e,n,r),ps.addBox(e,n)},stop(e){ps.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;ps.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:o,borderRadius:c}}=e.legend.options;return e._getSortedDatasetMetas().map(d=>{const h=d.controller.getStyle(r?0:void 0),m=ws(h.borderWidth);return{text:t[d.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!d.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:a||h.textAlign,borderRadius:o&&(c||h.borderRadius),datasetIndex:d.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class n4 extends Wn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const a=Ut(n.text)?n.text.length:1;this._padding=ws(n.padding);const i=a*gr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:n,bottom:a,right:i,options:o}=this,c=o.align;let d=0,h,m,g;return this.isHorizontal()?(m=ur(c,n,i),g=r+t,h=i-n):(o.position==="left"?(m=n+t,g=ur(c,a,r),d=lt*-.5):(m=i-t,g=ur(c,r,a),d=lt*.5),h=a-r),{titleX:m,titleY:g,maxWidth:h,rotation:d}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const n=gr(r.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:c,maxWidth:d,rotation:h}=this._drawArgs(i);Vc(t,r.text,0,0,n,{color:r.color,maxWidth:d,rotation:h,textAlign:By(r.align),textBaseline:"middle",translation:[o,c]})}}function yF(e,t){const r=new n4({ctx:e.ctx,options:t,chart:e});ps.configure(e,r,t),ps.addBox(e,r),e.titleBlock=r}var a4={id:"title",_element:n4,start(e,t,r){yF(e,r)},stop(e){const t=e.titleBlock;ps.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;ps.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pl={average(e){if(!e.length)return!1;let t,r,n=new Set,a=0,i=0;for(t=0,r=e.length;t<r;++t){const c=e[t].element;if(c&&c.hasValue()){const d=c.tooltipPosition();n.add(d.x),a+=d.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((c,d)=>c+d)/n.size,y:a/i}},nearest(e,t){if(!e.length)return!1;let r=t.x,n=t.y,a=Number.POSITIVE_INFINITY,i,o,c;for(i=0,o=e.length;i<o;++i){const d=e[i].element;if(d&&d.hasValue()){const h=d.getCenterPoint(),m=B0(t,h);m<a&&(a=m,c=d)}}if(c){const d=c.tooltipPosition();r=d.x,n=d.y}return{x:r,y:n}}};function Ks(e,t){return t&&(Ut(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Cn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function bF(e,t){const{element:r,datasetIndex:n,index:a}=t,i=e.getDatasetMeta(n).controller,{label:o,value:c}=i.getLabelAndValue(a);return{chart:e,label:o,parsed:i.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:c,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function xj(e,t){const r=e.chart.ctx,{body:n,footer:a,title:i}=e,{boxWidth:o,boxHeight:c}=t,d=gr(t.bodyFont),h=gr(t.titleFont),m=gr(t.footerFont),g=i.length,p=a.length,v=n.length,x=ws(t.padding);let w=x.height,y=0,k=n.reduce((C,P)=>C+P.before.length+P.lines.length+P.after.length,0);if(k+=e.beforeBody.length+e.afterBody.length,g&&(w+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),k){const C=t.displayColors?Math.max(c,d.lineHeight):d.lineHeight;w+=v*C+(k-v)*d.lineHeight+(k-1)*t.bodySpacing}p&&(w+=t.footerMarginTop+p*m.lineHeight+(p-1)*t.footerSpacing);let j=0;const N=function(C){y=Math.max(y,r.measureText(C).width+j)};return r.save(),r.font=h.string,tt(e.title,N),r.font=d.string,tt(e.beforeBody.concat(e.afterBody),N),j=t.displayColors?o+2+t.boxPadding:0,tt(n,C=>{tt(C.before,N),tt(C.lines,N),tt(C.after,N)}),j=0,r.font=m.string,tt(e.footer,N),r.restore(),y+=x.width,{width:y,height:w}}function vF(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}function wF(e,t,r,n){const{x:a,width:i}=n,o=r.caretSize+r.caretPadding;if(e==="left"&&a+i+o>t.width||e==="right"&&a-i-o<0)return!0}function kF(e,t,r,n){const{x:a,width:i}=r,{width:o,chartArea:{left:c,right:d}}=e;let h="center";return n==="center"?h=a<=(c+d)/2?"left":"right":a<=i/2?h="left":a>=o-i/2&&(h="right"),wF(h,e,t,r)&&(h="center"),h}function yj(e,t,r){const n=r.yAlign||t.yAlign||vF(e,r);return{xAlign:r.xAlign||t.xAlign||kF(e,t,r,n),yAlign:n}}function jF(e,t){let{x:r,width:n}=e;return t==="right"?r-=n:t==="center"&&(r-=n/2),r}function NF(e,t,r){let{y:n,height:a}=e;return t==="top"?n+=r:t==="bottom"?n-=a+r:n-=a/2,n}function bj(e,t,r,n){const{caretSize:a,caretPadding:i,cornerRadius:o}=e,{xAlign:c,yAlign:d}=r,h=a+i,{topLeft:m,topRight:g,bottomLeft:p,bottomRight:v}=po(o);let x=jF(t,c);const w=NF(t,d,h);return d==="center"?c==="left"?x+=h:c==="right"&&(x-=h):c==="left"?x-=Math.max(m,p)+a:c==="right"&&(x+=Math.max(g,v)+a),{x:fr(x,0,n.width-t.width),y:fr(w,0,n.height-t.height)}}function ou(e,t,r){const n=ws(r.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function vj(e){return Ks([],Cn(e))}function _F(e,t,r){return Ci(e,{tooltip:t,tooltipItems:r,type:"tooltip"})}function wj(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const i4={beforeTitle:_n,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:_n,beforeBody:_n,beforeLabel:_n,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return Qe(r)||(t+=r),t},labelColor(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:_n,afterBody:_n,beforeFooter:_n,footer:_n,afterFooter:_n};function Lr(e,t,r,n){const a=e[t].call(r,n);return typeof a>"u"?i4[t].call(r,n):a}class q0 extends Wn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&r.options.animation&&n.animations,i=new $S(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=_F(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:n}=r,a=Lr(n,"beforeTitle",this,t),i=Lr(n,"title",this,t),o=Lr(n,"afterTitle",this,t);let c=[];return c=Ks(c,Cn(a)),c=Ks(c,Cn(i)),c=Ks(c,Cn(o)),c}getBeforeBody(t,r){return vj(Lr(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:n}=r,a=[];return tt(t,i=>{const o={before:[],lines:[],after:[]},c=wj(n,i);Ks(o.before,Cn(Lr(c,"beforeLabel",this,i))),Ks(o.lines,Lr(c,"label",this,i)),Ks(o.after,Cn(Lr(c,"afterLabel",this,i))),a.push(o)}),a}getAfterBody(t,r){return vj(Lr(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:n}=r,a=Lr(n,"beforeFooter",this,t),i=Lr(n,"footer",this,t),o=Lr(n,"afterFooter",this,t);let c=[];return c=Ks(c,Cn(a)),c=Ks(c,Cn(i)),c=Ks(c,Cn(o)),c}_createItems(t){const r=this._active,n=this.chart.data,a=[],i=[],o=[];let c=[],d,h;for(d=0,h=r.length;d<h;++d)c.push(bF(this.chart,r[d]));return t.filter&&(c=c.filter((m,g,p)=>t.filter(m,g,p,n))),t.itemSort&&(c=c.sort((m,g)=>t.itemSort(m,g,n))),tt(c,m=>{const g=wj(t.callbacks,m);a.push(Lr(g,"labelColor",this,m)),i.push(Lr(g,"labelPointStyle",this,m)),o.push(Lr(g,"labelTextColor",this,m))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=c,c}update(t,r){const n=this.options.setContext(this.getContext()),a=this._active;let i,o=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const c=Pl[n.position].call(this,a,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const d=this._size=xj(this,n),h=Object.assign({},c,d),m=yj(this.chart,n,h),g=bj(n,h,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:g.x,y:g.y,width:d.width,height:d.height,caretX:c.x,caretY:c.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,n,a){const i=this.getCaretPosition(t,n,a);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(t,r,n){const{xAlign:a,yAlign:i}=this,{caretSize:o,cornerRadius:c}=n,{topLeft:d,topRight:h,bottomLeft:m,bottomRight:g}=po(c),{x:p,y:v}=t,{width:x,height:w}=r;let y,k,j,N,C,P;return i==="center"?(C=v+w/2,a==="left"?(y=p,k=y-o,N=C+o,P=C-o):(y=p+x,k=y+o,N=C-o,P=C+o),j=y):(a==="left"?k=p+Math.max(d,m)+o:a==="right"?k=p+x-Math.max(h,g)-o:k=this.caretX,i==="top"?(N=v,C=N-o,y=k-o,j=k+o):(N=v+w,C=N+o,y=k+o,j=k-o),P=N),{x1:y,x2:k,x3:j,y1:N,y2:C,y3:P}}drawTitle(t,r,n){const a=this.title,i=a.length;let o,c,d;if(i){const h=xo(n.rtl,this.x,this.width);for(t.x=ou(this,n.titleAlign,n),r.textAlign=h.textAlign(n.titleAlign),r.textBaseline="middle",o=gr(n.titleFont),c=n.titleSpacing,r.fillStyle=n.titleColor,r.font=o.string,d=0;d<i;++d)r.fillText(a[d],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+c,d+1===i&&(t.y+=n.titleMarginBottom-c)}}_drawColorBox(t,r,n,a,i){const o=this.labelColors[n],c=this.labelPointStyles[n],{boxHeight:d,boxWidth:h}=i,m=gr(i.bodyFont),g=ou(this,"left",i),p=a.x(g),v=d<m.lineHeight?(m.lineHeight-d)/2:0,x=r.y+v;if(i.usePointStyle){const w={radius:Math.min(h,d)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=a.leftForLtr(p,h)+h/2,k=x+d/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,U0(t,w,y,k),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,U0(t,w,y,k)}else{t.lineWidth=Ge(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const w=a.leftForLtr(p,h),y=a.leftForLtr(a.xPlus(p,1),h-2),k=po(o.borderRadius);Object.values(k).some(j=>j!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,sm(t,{x:w,y:x,w:h,h:d,radius:k}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),sm(t,{x:y,y:x+1,w:h-2,h:d-2,radius:k}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(w,x,h,d),t.strokeRect(w,x,h,d),t.fillStyle=o.backgroundColor,t.fillRect(y,x+1,h-2,d-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,r,n){const{body:a}=this,{bodySpacing:i,bodyAlign:o,displayColors:c,boxHeight:d,boxWidth:h,boxPadding:m}=n,g=gr(n.bodyFont);let p=g.lineHeight,v=0;const x=xo(n.rtl,this.x,this.width),w=function(M){r.fillText(M,x.x(t.x+v),t.y+p/2),t.y+=p+i},y=x.textAlign(o);let k,j,N,C,P,E,I;for(r.textAlign=o,r.textBaseline="middle",r.font=g.string,t.x=ou(this,y,n),r.fillStyle=n.bodyColor,tt(this.beforeBody,w),v=c&&y!=="right"?o==="center"?h/2+m:h+2+m:0,C=0,E=a.length;C<E;++C){for(k=a[C],j=this.labelTextColors[C],r.fillStyle=j,tt(k.before,w),N=k.lines,c&&N.length&&(this._drawColorBox(r,t,C,x,n),p=Math.max(g.lineHeight,d)),P=0,I=N.length;P<I;++P)w(N[P]),p=g.lineHeight;tt(k.after,w)}v=0,p=g.lineHeight,tt(this.afterBody,w),t.y-=i}drawFooter(t,r,n){const a=this.footer,i=a.length;let o,c;if(i){const d=xo(n.rtl,this.x,this.width);for(t.x=ou(this,n.footerAlign,n),t.y+=n.footerMarginTop,r.textAlign=d.textAlign(n.footerAlign),r.textBaseline="middle",o=gr(n.footerFont),r.fillStyle=n.footerColor,r.font=o.string,c=0;c<i;++c)r.fillText(a[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,r,n,a){const{xAlign:i,yAlign:o}=this,{x:c,y:d}=t,{width:h,height:m}=n,{topLeft:g,topRight:p,bottomLeft:v,bottomRight:x}=po(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(c+g,d),o==="top"&&this.drawCaret(t,r,n,a),r.lineTo(c+h-p,d),r.quadraticCurveTo(c+h,d,c+h,d+p),o==="center"&&i==="right"&&this.drawCaret(t,r,n,a),r.lineTo(c+h,d+m-x),r.quadraticCurveTo(c+h,d+m,c+h-x,d+m),o==="bottom"&&this.drawCaret(t,r,n,a),r.lineTo(c+v,d+m),r.quadraticCurveTo(c,d+m,c,d+m-v),o==="center"&&i==="left"&&this.drawCaret(t,r,n,a),r.lineTo(c,d+g),r.quadraticCurveTo(c,d,c+g,d),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){const o=Pl[t.position].call(this,this._active,this._eventPosition);if(!o)return;const c=this._size=xj(this,t),d=Object.assign({},o,this._size),h=yj(r,t,d),m=bj(t,d,h,r);(a._to!==m.x||i._to!==m.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=ws(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,a,r),FS(t,r.textDirection),i.y+=o.top,this.drawTitle(i,t,r),this.drawBody(i,t,r),this.drawFooter(i,t,r),zS(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const n=this._active,a=t.map(({datasetIndex:c,index:d})=>{const h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[d],index:d}}),i=!em(n,a),o=this._positionChanged(a,r);(i||o)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],o=this._getActiveElements(t,i,r,n),c=this._positionChanged(o,t),d=r||!em(o,i)||c;return d&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),d}_getActiveElements(t,r,n,a){const i=this.options;if(t.type==="mouseout")return[];if(!a)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,r){const{caretX:n,caretY:a,options:i}=this,o=Pl[i.position].call(this,t,r);return o!==!1&&(n!==o.x||a!==o.y)}}Pe(q0,"positioners",Pl);var o4={id:"tooltip",_element:q0,positioners:Pl,afterInit(e,t,r){r&&(e.tooltip=new q0({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:i4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const SF=(e,t,r,n)=>(typeof t=="string"?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function CF(e,t,r,n){const a=e.indexOf(t);if(a===-1)return SF(e,t,r,n);const i=e.lastIndexOf(t);return a!==i?r:a}const PF=(e,t)=>e===null?null:fr(Math.round(e),0,t);function kj(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class om extends Vo{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:a,label:i}of r)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Qe(t))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===t?r:CF(n,t,Be(r,t),this._addedLabels),PF(r,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),r||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const t=this.min,r=this.max,n=this.options.offset,a=[];let i=this.getLabels();i=t===0&&r===i.length-1?i:i.slice(t,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=r;o++)a.push({value:o});return a}getLabelForValue(t){return kj.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Pe(om,"id","category"),Pe(om,"defaults",{ticks:{callback:kj}});function EF(e,t){const r=[],{bounds:a,step:i,min:o,max:c,precision:d,count:h,maxTicks:m,maxDigits:g,includeBounds:p}=e,v=i||1,x=m-1,{min:w,max:y}=t,k=!Qe(o),j=!Qe(c),N=!Qe(h),C=(y-w)/(g+1);let P=Nk((y-w)/x/v)*v,E,I,M,T;if(P<1e-14&&!k&&!j)return[{value:w},{value:y}];T=Math.ceil(y/P)-Math.floor(w/P),T>x&&(P=Nk(T*P/x/v)*v),Qe(d)||(E=Math.pow(10,d),P=Math.ceil(P*E)/E),a==="ticks"?(I=Math.floor(w/P)*P,M=Math.ceil(y/P)*P):(I=w,M=y),k&&j&&i&&QO((c-o)/i,P/1e3)?(T=Math.round(Math.min((c-o)/P,m)),P=(c-o)/T,I=o,M=c):N?(I=k?o:I,M=j?c:M,T=h-1,P=(M-I)/T):(T=(M-I)/P,rc(T,Math.round(T),P/1e3)?T=Math.round(T):T=Math.ceil(T));const H=Math.max(_k(P),_k(I));E=Math.pow(10,Qe(d)?H:d),I=Math.round(I*E)/E,M=Math.round(M*E)/E;let J=0;for(k&&(p&&I!==o?(r.push({value:o}),I<o&&J++,rc(Math.round((I+J*P)*E)/E,o,jj(o,C,e))&&J++):I<o&&J++);J<T;++J){const $=Math.round((I+J*P)*E)/E;if(j&&$>c)break;r.push({value:$})}return j&&p&&M!==c?r.length&&rc(r[r.length-1].value,c,jj(c,C,e))?r[r.length-1].value=c:r.push({value:c}):(!j||M===c)&&r.push({value:M}),r}function jj(e,t,{horizontal:r,minRotation:n}){const a=ii(n),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class LF extends Vo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return Qe(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:a,max:i}=this;const o=d=>a=r?a:d,c=d=>i=n?i:d;if(t){const d=cn(a),h=cn(i);d<0&&h<0?c(0):d>0&&h>0&&o(0)}if(a===i){let d=i===0?1:Math.abs(i*.05);c(i+d),t||o(a-d)}this.min=a,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=t,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=EF(a,i);return t.bounds==="ticks"&&eR(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const a=(n-r)/Math.max(t.length-1,1)/2;r-=a,n+=a}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(t){return ES(t,this.chart.options.locale,this.options.ticks.format)}}class lm extends LF{determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=vs(t)?t:0,this.max=vs(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,n=ii(this.options.ticks.minRotation),a=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/a))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Pe(lm,"id","linear"),Pe(lm,"defaults",{ticks:{callback:LS.formatters.numeric}});const gf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ar=Object.keys(gf);function Nj(e,t){return e-t}function _j(e,t){if(Qe(t))return null;const r=e._adapter,{parser:n,round:a,isoWeekday:i}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),vs(o)||(o=typeof n=="string"?r.parse(o,n):r.parse(o)),o===null?null:(a&&(o=a==="week"&&($c(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,a)),+o)}function Sj(e,t,r,n){const a=Ar.length;for(let i=Ar.indexOf(e);i<a-1;++i){const o=gf[Ar[i]],c=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-t)/(c*o.size))<=n)return Ar[i]}return Ar[a-1]}function TF(e,t,r,n,a){for(let i=Ar.length-1;i>=Ar.indexOf(r);i--){const o=Ar[i];if(gf[o].common&&e._adapter.diff(a,n,o)>=t-1)return o}return Ar[r?Ar.indexOf(r):0]}function IF(e){for(let t=Ar.indexOf(e)+1,r=Ar.length;t<r;++t)if(gf[Ar[t]].common)return Ar[t]}function Cj(e,t,r){if(!r)e[t]=!0;else if(r.length){const{lo:n,hi:a}=zy(r,t),i=r[n]>=t?r[n]:r[a];e[i]=!0}}function AF(e,t,r,n){const a=e._adapter,i=+a.startOf(t[0].value,n),o=t[t.length-1].value;let c,d;for(c=i;c<=o;c=+a.add(c,1,n))d=r[c],d>=0&&(t[d].major=!0);return t}function Pj(e,t,r){const n=[],a={},i=t.length;let o,c;for(o=0;o<i;++o)c=t[o],a[c]=o,n.push({value:c,major:!1});return i===0||!r?n:AF(e,n,a,r)}class cm extends Vo{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const n=t.time||(t.time={}),a=this._adapter=new FD._date(t.adapters.date);a.init(r),tc(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:_j(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,n=t.time.unit||"day";let{min:a,max:i,minDefined:o,maxDefined:c}=this.getUserBounds();function d(h){!o&&!isNaN(h.min)&&(a=Math.min(a,h.min)),!c&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!o||!c)&&(d(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=vs(a)&&!isNaN(a)?a:+r.startOf(Date.now(),n),i=vs(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],n=t[t.length-1]),{min:r,max:n}}buildTicks(){const t=this.options,r=t.time,n=t.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,o=this.max,c=aR(a,i,o);return this._unit=r.unit||(n.autoSkip?Sj(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):TF(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:IF(this._unit),this.initOffsets(a),t.reverse&&c.reverse(),Pj(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,n=0,a,i;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?r=1-a:r=(this.getDecimalForValue(t[1])-a)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?n=i:n=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=fr(r,0,o),n=fr(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const t=this._adapter,r=this.min,n=this.max,a=this.options,i=a.time,o=i.unit||Sj(i.minUnit,r,n,this._getLabelCapacity(r)),c=Be(a.ticks.stepSize,1),d=o==="week"?i.isoWeekday:!1,h=$c(d)||d===!0,m={};let g=r,p,v;if(h&&(g=+t.startOf(g,"isoWeek",d)),g=+t.startOf(g,h?"day":o),t.diff(n,r,o)>1e5*c)throw new Error(r+" and "+n+" are too far apart with stepSize of "+c+" "+o);const x=a.ticks.source==="data"&&this.getDataTimestamps();for(p=g,v=0;p<n;p=+t.add(p,c,o),v++)Cj(m,p,x);return(p===n||a.bounds==="ticks"||v===1)&&Cj(m,p,x),Object.keys(m).sort(Nj).map(w=>+w)}getLabelForValue(t){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(t,n.tooltipFormat):r.format(t,n.displayFormats.datetime)}format(t,r){const a=this.options.time.displayFormats,i=this._unit,o=r||a[i];return this._adapter.format(t,o)}_tickFormatFunction(t,r,n,a){const i=this.options,o=i.ticks.callback;if(o)return ft(o,[t,r,n],this);const c=i.time.displayFormats,d=this._unit,h=this._majorUnit,m=d&&c[d],g=h&&c[h],p=n[r],v=h&&g&&p&&p.major;return this._adapter.format(t,a||(v?g:m))}generateTickLabels(t){let r,n,a;for(r=0,n=t.length;r<n;++r)a=t[r],a.label=this._tickFormatFunction(a.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,n=this.ctx.measureText(t).width,a=ii(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(a),o=Math.sin(a),c=this._resolveTickFontOptions(0).size;return{w:n*i+c*o,h:n*o+c*i}}_getLabelCapacity(t){const r=this.options.time,n=r.displayFormats,a=n[r.unit]||n.millisecond,i=this._tickFormatFunction(t,0,Pj(this,[t],this._majorUnit),a),o=this._getLabelSize(i),c=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,n;if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,n=a.length;r<n;++r)t=t.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,n;if(t.length)return t;const a=this.getLabels();for(r=0,n=a.length;r<n;++r)t.push(_j(this,a[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return SS(t.sort(Nj))}}Pe(cm,"id","time"),Pe(cm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function lu(e,t,r){let n=0,a=e.length-1,i,o,c,d;r?(t>=e[n].pos&&t<=e[a].pos&&({lo:n,hi:a}=oi(e,"pos",t)),{pos:i,time:c}=e[n],{pos:o,time:d}=e[a]):(t>=e[n].time&&t<=e[a].time&&({lo:n,hi:a}=oi(e,"time",t)),{time:i,pos:c}=e[n],{time:o,pos:d}=e[a]);const h=o-i;return h?c+(d-c)*(t-i)/h:c}class Ej extends cm{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=lu(r,this.min),this._tableRange=lu(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:n}=this,a=[],i=[];let o,c,d,h,m;for(o=0,c=t.length;o<c;++o)h=t[o],h>=r&&h<=n&&a.push(h);if(a.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(o=0,c=a.length;o<c;++o)m=a[o+1],d=a[o-1],h=a[o],Math.round((m+d)/2)!==h&&i.push({time:h,pos:o/(c-1)});return i}_generate(){const t=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?t=this.normalize(r.concat(n)):t=r.length?r:n,t=this._cache.all=t,t}getDecimalForValue(t){return(lu(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return lu(this._table,n*this._tableRange+this._minPos,!0)}}Pe(Ej,"id","timeseries"),Pe(Ej,"defaults",cm.defaults);const l4="label";function Lj(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function MF(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function c4(e,t){e.labels=t}function d4(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:l4;const n=[];e.datasets=t.map(a=>{const i=e.datasets.find(o=>o[r]===a[r]);return!i||!a.data||n.includes(i)?{...a}:(n.push(i),Object.assign(i,a),i)})}function OF(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l4;const r={labels:[],datasets:[]};return c4(r,e.labels),d4(r,e.datasets,t),r}function RF(e,t){const{height:r=150,width:n=300,redraw:a=!1,datasetIdKey:i,type:o,data:c,options:d,plugins:h=[],fallbackContent:m,updateMode:g,...p}=e,v=S.useRef(null),x=S.useRef(null),w=()=>{v.current&&(x.current=new ad(v.current,{type:o,data:OF(c,i),options:d&&{...d},plugins:h}),Lj(t,x.current))},y=()=>{Lj(t,null),x.current&&(x.current.destroy(),x.current=null)};return S.useEffect(()=>{!a&&x.current&&d&&MF(x.current,d)},[a,d]),S.useEffect(()=>{!a&&x.current&&c4(x.current.config.data,c.labels)},[a,c.labels]),S.useEffect(()=>{!a&&x.current&&c.datasets&&d4(x.current.config.data,c.datasets,i)},[a,c.datasets]),S.useEffect(()=>{x.current&&(a?(y(),setTimeout(w)):x.current.update(g))},[a,d,c.labels,c.datasets,g]),S.useEffect(()=>{x.current&&(y(),setTimeout(w))},[o]),S.useEffect(()=>(w(),()=>y()),[]),bt.createElement("canvas",{ref:v,role:"img",height:r,width:n,...p},m)}const DF=S.forwardRef(RF);function u4(e,t){return ad.register(t),S.forwardRef((r,n)=>bt.createElement(DF,{...r,ref:n,type:e}))}const h4=u4("line",ah),FF=u4("bar",nh),oc=ve("analytics/fetchAnalytics",async(e="30d",{rejectWithValue:t})=>{var r,n,a;try{const i=await ue.get(`/analytics?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch analytics data")}}),lc=ve("analytics/fetchRevenueTrend",async(e="30d",{rejectWithValue:t})=>{var r,n,a;try{const i=await ue.get(`/analytics/revenue-trend?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch revenue trend data")}}),zF={metrics:{revenue:{current:0,previous:0,growth:0},orders:{current:0,previous:0,growth:0},customers:{current:0,previous:0,growth:0},products:{current:0,previous:0,growth:0}},orderStatusDistribution:[],topProducts:[],revenueTrend:[],timeRange:"30d",period:{current:{start:null,end:null},previous:{start:null,end:null}},isLoading:!1,error:null},BF=Vr({name:"analytics",initialState:zF,reducers:{clearError:e=>{e.error=null},setTimeRange:(e,t)=>{e.timeRange=t.payload}},extraReducers:e=>{e.addCase(oc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(oc.fulfilled,(t,r)=>{t.isLoading=!1,t.metrics=r.payload.metrics,t.orderStatusDistribution=r.payload.orderStatusDistribution,t.topProducts=r.payload.topProducts,t.timeRange=r.payload.timeRange,t.period=r.payload.period}).addCase(oc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(lc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(lc.fulfilled,(t,r)=>{t.isLoading=!1,t.revenueTrend=r.payload}).addCase(lc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),$F=BF.reducer;ad.register(om,lm,ac,so,ic,a4,o4,s4,ro);const UF=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(y=>y.auth),{metrics:n,orderStatusDistribution:a,topProducts:i,revenueTrend:o,isLoading:c}=ke(y=>y.analytics),[d,h]=S.useState("30d");S.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(oc(d)),t(lc(d)))},[t,r,d]);const m=y=>{h(y),t(oc(y)),t(lc(y))},g=y=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(y),p=y=>y>=0?"text-green-600":"text-red-600",v=y=>y>=0?Tn:A0,x=({title:y,value:k,growth:j,icon:N,color:C="blue"})=>{const P=v(j),E=p(j);return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:y}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:k}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(P,{className:`h-4 w-4 mr-1 ${E}`}),s.jsxs("span",{className:`text-sm font-medium ${E}`,children:[j>=0?"+":"",j.toFixed(1),"%"]}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminAnalytics.vsPreviousPeriod")})]})]}),s.jsx("div",{className:`p-3 rounded-lg bg-${C}-100 dark:bg-${C}-900/20`,children:s.jsx(N,{className:`h-6 w-6 text-${C}-600 dark:text-${C}-400`})})]})})},w=[{value:"7d",label:e("adminAnalytics.last7Days")},{value:"30d",label:e("adminAnalytics.last30Days")},{value:"90d",label:e("adminAnalytics.last90Days")},{value:"1y",label:e("adminAnalytics.lastYear")}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(_e,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminAnalytics.analyticsDashboard")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminAnalytics.businessInsights")})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[s.jsx("select",{value:d,onChange:y=>m(y.target.value),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:w.map(y=>s.jsx("option",{value:y.value,children:y.label},y.value))}),s.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(hn,{className:"h-4 w-4 mr-2"}),e("adminAnalytics.export")]})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-10",children:c?s.jsxs("div",{className:"col-span-full flex items-center justify-center py-12",children:[s.jsx(Wt,{className:"h-8 w-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]}):s.jsxs(s.Fragment,{children:[s.jsx(x,{title:e("adminAnalytics.totalRevenue"),value:g(n.revenue.current),previous:n.revenue.previous,growth:n.revenue.growth,icon:sf,color:"green"}),s.jsx(x,{title:e("adminAnalytics.totalOrders"),value:n.orders.current.toLocaleString(),previous:n.orders.previous,growth:n.orders.growth,icon:$r,color:"blue"}),s.jsx(x,{title:e("adminAnalytics.totalCustomers"),value:n.customers.current.toLocaleString(),previous:n.customers.previous,growth:n.customers.growth,icon:ki,color:"purple"}),s.jsx(x,{title:e("adminAnalytics.totalProducts"),value:n.products.current,previous:n.products.previous,growth:n.products.growth,icon:Ue,color:"indigo"})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.revenueTrend")})}),s.jsx("div",{className:"p-6",children:c?s.jsx("div",{className:"h-80 flex items-center justify-center",children:s.jsx(Wt,{className:"h-8 w-8 animate-spin text-blue-600"})}):o!=null&&o.dailyRevenue&&o.dailyRevenue.length>0?s.jsx("div",{className:"h-80",children:s.jsx(h4,{data:{labels:o.dailyRevenue.map(y=>new Date(y.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminAnalytics.revenue"),data:o.dailyRevenue.map(y=>parseFloat(y.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:y=>g(y.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:y=>g(y)}}}}})}):s.jsx("div",{className:"h-80 flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Tn,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noRevenueData")})]})})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.orderStatusDistribution")})}),s.jsx("div",{className:"p-6",children:c?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(Wt,{className:"h-6 w-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]}):a&&a.length>0?s.jsx("div",{className:"h-80",children:s.jsx(FF,{data:{labels:a.map(y=>({DELIVERED:e("adminAnalytics.delivered"),SHIPPED:e("adminAnalytics.shipped"),PROCESSING:e("adminAnalytics.processing"),PENDING:e("adminAnalytics.pending"),CANCELLED:e("adminAnalytics.cancelled")})[y.status]||y.status),datasets:[{label:e("adminAnalytics.orders"),data:a.map(y=>y.count||0),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(245, 158, 11, 0.8)","rgba(156, 163, 175, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(59, 130, 246)","rgb(245, 158, 11)","rgb(156, 163, 175)","rgb(239, 68, 68)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:y=>`${y.parsed.y} ${e("adminAnalytics.orders").toLowerCase()}`}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})}):s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noData")})})]})]}),s.jsx("div",{className:"mt-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.topPerformingProducts")})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.product")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.category")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.sales")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.revenue")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.growth")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(Wt,{className:"h-6 w-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]})})}):i.length>0?i.map((y,k)=>{var j,N,C,P,E;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:((j=y.product)==null?void 0:j.name)||e("adminAnalytics.unknownProduct")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:((C=(N=y.product)==null?void 0:N.category)==null?void 0:C.name)||e("adminAnalytics.unknownCategory")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((P=y._sum)==null?void 0:P.quantity)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:g(((E=y._sum)==null?void 0:E.price)||0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:e("adminAnalytics.topPerformer")})})]},y.productId||k)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noProducts")})})})]})})})]})})]})})]})})},VF=()=>{const{t:e}=xe(),{user:t}=ke(P=>P.auth),[r,n]=S.useState([]),[a,i]=S.useState(!0),[o,c]=S.useState(""),[d,h]=S.useState(""),[m,g]=S.useState(null),[p,v]=S.useState({page:1,limit:20,total:0,pages:0}),x=async(P=1,E="",I="")=>{var M,T,H;try{i(!0);const J=new URLSearchParams({page:P.toString(),limit:"20"});E&&J.append("search",E),I&&J.append("status",I);const $=await ue.get("/customers?${params","toString()}");console.log("Customers API response:",$),console.log("Response data:",$.data),console.log("Customers array:",((M=$.data)==null?void 0:M.customers)||$.customers),n(((T=$.data)==null?void 0:T.customers)||$.customers||[]),v(((H=$.data)==null?void 0:H.pagination)||$.pagination||{page:1,limit:20,total:0,pages:0})}catch(J){console.error("Error fetching customers:",J),n([]),v({page:1,limit:20,total:0,pages:0})}finally{i(!1)}};S.useEffect(()=>{(t==null?void 0:t.role)==="ADMIN"&&x()},[t]),S.useEffect(()=>{if((t==null?void 0:t.role)==="ADMIN"){const P=setTimeout(()=>{x(1,o,d)},300);return()=>clearTimeout(P)}},[o,d,t]);const w=P=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(P),y=P=>new Date(P).toLocaleDateString("is-IS"),k=P=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",vip:"bg-purple-100 text-purple-800",new:"bg-blue-100 text-blue-800"})[P]||"bg-gray-100 text-gray-800",j=P=>{const E=`adminCustomers.status${P.charAt(0).toUpperCase()}${P.slice(1)}`;return e(E)},N=P=>{c(P.target.value)},C=P=>{h(P.target.value)};return(t==null?void 0:t.role)!=="ADMIN"?s.jsxs(_e,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):s.jsxs(_e,{children:[s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminCustomers.customerManagement")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminCustomers.manageCustomerInfo")})]}),s.jsx("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:s.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(hn,{className:"h-4 w-4 mr-2"}),e("adminCustomers.export")]})})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminCustomers.searchCustomers"),value:o,onChange:N,className:"input pl-10 pr-3"})]}),s.jsxs("select",{value:d,onChange:C,className:"input",children:[s.jsx("option",{value:"",children:e("adminCustomers.allStatus")}),s.jsx("option",{value:"active",children:e("adminCustomers.active")}),s.jsx("option",{value:"inactive",children:e("adminCustomers.inactive")}),s.jsx("option",{value:"vip",children:e("adminCustomers.vip")}),s.jsx("option",{value:"new",children:e("adminCustomers.new")})]}),s.jsxs("div",{className:"flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-md px-4 py-2",children:[s.jsx(ki,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("adminCustomers.customersCount",{filtered:r.length,total:p.total})})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminCustomers.customerList")})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.customer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.contact")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.orders")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.totalSpent")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.status")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.lastOrder")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(Wt,{className:"h-6 w-6 animate-spin text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-500",children:e("common.loading")})]})})}):r.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:P.name.split(" ").map(E=>E[0]).join("")})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("adminCustomers.idLabel")," ",P.id]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zr,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),P.email]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(wi,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),P.phone]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:P.totalOrders}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:w(P.totalSpent)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k(P.status)}`,children:j(P.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:y(P.lastOrder)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>g(P),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3 transition-colors duration-200",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(S_,{className:"h-4 w-4"})})]})]},P.id))})]})})]}),!a&&r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ki,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminCustomers.noCustomersFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminCustomers.adjustSearchCriteria")})]})]})})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e("adminCustomers.customerDetails")}),s.jsxs("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600",children:[s.jsx("span",{className:"sr-only",children:e("adminCustomers.close")}),s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-medium text-gray-700",children:m.name.split(" ").map(P=>P[0]).join("")})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:m.name}),s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.customerSince",{date:y(m.joinDate)})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.contactInformation")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zr,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.email})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(wi,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.phone})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(mn,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.address})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.orderStatistics")}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.totalOrders")}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalOrders})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.totalSpent")}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w(m.totalSpent)})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.status")}),s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${k(m.status)}`,children:j(m.status)})]})]})]})})]})},cc=ve("reports/fetchReports",async({reportType:e,timeRange:t,startDate:r,endDate:n},{rejectWithValue:a})=>{var i,o,c,d,h,m;try{const g=new URLSearchParams({timeRange:t,...r&&{startDate:r},...n&&{endDate:n}});let p;switch(e){case"sales":return p=await ue.get(`/reports/sales?${g}`),{sales:((i=p.data)==null?void 0:i.data)||p.data};case"products":return p=await ue.get(`/reports/inventory?${g}`),{products:((o=p.data)==null?void 0:o.data)||p.data};case"customers":return p=await ue.get(`/reports/customers?${g}`),{customers:((c=p.data)==null?void 0:c.data)||p.data};case"orders":return p=await ue.get(`/analytics?timeRange=${t}`),{orders:((d=p.data)==null?void 0:d.data)||p.data};default:return{}}}catch(g){return a(((m=(h=g.response)==null?void 0:h.data)==null?void 0:m.message)||"Failed to fetch reports data")}}),tp=ve("reports/fetchSalesReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const c=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),d=await ue.get(`/reports/sales?${c}`);return((a=d.data)==null?void 0:a.data)||d.data}catch(c){return n(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch sales report")}}),rp=ve("reports/fetchProductsReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const c=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),d=await ue.get(`/reports/products?${c}`);return((a=d.data)==null?void 0:a.data)||d.data}catch(c){return n(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch products report")}}),sp=ve("reports/fetchCustomersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const c=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),d=await ue.get(`/reports/customers?${c}`);return((a=d.data)==null?void 0:a.data)||d.data}catch(c){return n(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch customers report")}}),np=ve("reports/fetchOrdersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const c=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),d=await ue.get(`/reports/orders?${c}`);return((a=d.data)==null?void 0:a.data)||d.data}catch(c){return n(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch orders report")}}),HF={sales:{totalRevenue:0,totalOrders:0,averageOrderValue:0,growthRate:0,dailySales:[]},products:{totalProducts:0,activeProducts:0,outOfStock:0,topSelling:[],categoryBreakdown:[]},customers:{totalCustomers:0,newCustomers:0,returningCustomers:0,averageOrderFrequency:0,customerSegments:[],topCustomers:[]},orders:{totalOrders:0,completedOrders:0,pendingOrders:0,cancelledOrders:0,averageProcessingTime:0,deliveryMethods:[],orderStatusTrend:[]},currentReport:"sales",timeRange:"last30days",dateRange:{start:null,end:null},isLoading:!1,error:null},m4=Vr({name:"reports",initialState:HF,reducers:{clearError:e=>{e.error=null},setCurrentReport:(e,t)=>{e.currentReport=t.payload},setTimeRange:(e,t)=>{e.timeRange=t.payload},setDateRange:(e,t)=>{e.dateRange=t.payload}},extraReducers:e=>{e.addCase(cc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(cc.fulfilled,(t,r)=>{t.isLoading=!1;const{sales:n,products:a,customers:i,orders:o}=r.payload;n&&(t.sales=n),a&&(t.products=a),i&&(t.customers=i),o&&(t.orders=o)}).addCase(cc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(tp.pending,t=>{t.isLoading=!0,t.error=null}).addCase(tp.fulfilled,(t,r)=>{t.isLoading=!1,t.sales=r.payload}).addCase(tp.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(rp.pending,t=>{t.isLoading=!0,t.error=null}).addCase(rp.fulfilled,(t,r)=>{t.isLoading=!1,t.products=r.payload}).addCase(rp.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(sp.pending,t=>{t.isLoading=!0,t.error=null}).addCase(sp.fulfilled,(t,r)=>{t.isLoading=!1,t.customers=r.payload}).addCase(sp.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(np.pending,t=>{t.isLoading=!0,t.error=null}).addCase(np.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload}).addCase(np.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setCurrentReport:WF,setTimeRange:qF,setDateRange:Tj}=m4.actions,KF=m4.reducer;ad.register(om,lm,ac,so,ic,a4,o4,s4,ro);const ZF=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(E=>E.auth),{sales:n,products:a,customers:i,orders:o,currentReport:c,timeRange:d,dateRange:h,isLoading:m}=ke(E=>E.reports);S.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(cc({reportType:c,timeRange:d,startDate:h.start,endDate:h.end}))},[t,r,c,d,h]);const g=E=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(E),p=E=>new Date(E).toLocaleDateString("is-IS"),v=E=>E>=0?s.jsx(Tn,{className:"h-4 w-4 text-green-500"}):s.jsx(A0,{className:"h-4 w-4 text-red-500"}),x=E=>E>=0?"text-green-600":"text-red-600",w=E=>{console.log(`Exporting ${c} report as ${E}`);const I={sales:n,products:a,customers:i,orders:o}[c],M=JSON.stringify(I,null,2),T="data:application/json;charset=utf-8,"+encodeURIComponent(M),H=`${c}_report_${new Date().toISOString().split("T")[0]}.${E}`,J=document.createElement("a");J.setAttribute("href",T),J.setAttribute("download",H),J.click()},y=({title:E,value:I,subtitle:M,icon:T,growth:H,color:J="blue"})=>s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:E}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:I}),M&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:M}),H!==void 0&&s.jsxs("div",{className:"flex items-center mt-2",children:[v(H),s.jsxs("span",{className:`text-sm font-medium ml-1 ${x(H)}`,children:[H>=0?"+":"",H,"%"]}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminReports.vsPreviousPeriod")})]})]}),s.jsx("div",{className:`p-3 rounded-lg bg-${J}-100 dark:bg-${J}-900/20`,children:s.jsx(T,{className:`h-6 w-6 text-${J}-600 dark:text-${J}-400`})})]})}),k=({title:E,children:I,actions:M})=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:E}),M&&s.jsx("div",{className:"flex items-center space-x-2",children:M})]})}),s.jsx("div",{className:"p-8",children:I})]}),j=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(y,{title:e("adminReports.totalRevenue"),value:g(n.totalRevenue||0),icon:sf,growth:n.growthRate,color:"green"}),s.jsx(y,{title:e("adminReports.totalOrders"),value:(n.totalOrders||0).toLocaleString(),icon:$r,growth:8.3,color:"blue"}),s.jsx(y,{title:e("adminReports.averageOrderValue"),value:g(n.averageOrderValue||0),icon:Tn,growth:5.2,color:"purple"}),s.jsx(y,{title:e("adminReports.growthRate"),value:`${n.growthRate||0}%`,icon:Vh,growth:n.growthRate,color:"indigo"})]}),s.jsx(k,{title:e("adminReports.dailySalesTrend"),actions:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:s.jsx(hn,{className:"h-4 w-4"})})]}),children:n.dailySales&&n.dailySales.length>0?s.jsx("div",{className:"h-80",children:s.jsx(h4,{data:{labels:n.dailySales.map(E=>new Date(E.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminReports.revenue"),data:n.dailySales.map(E=>parseFloat(E.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:E=>g(E.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:E=>g(E)}}}}})}):s.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:e("adminReports.noData")})})]}),N=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(y,{title:e("adminReports.totalProducts"),value:a.totalProducts,icon:Ue,growth:15.2,color:"blue"}),s.jsx(y,{title:e("adminReports.activeProducts"),value:a.activeProducts,subtitle:`${Math.round(a.activeProducts/a.totalProducts*100)}% ${e("adminReports.ofTotal")}`,icon:wt,color:"green"}),s.jsx(y,{title:e("adminReports.outOfStock"),value:a.outOfStock,subtitle:`${Math.round(a.outOfStock/a.totalProducts*100)}% ${e("adminReports.ofTotal")}`,icon:pt,color:"red"})]}),s.jsx(k,{title:e("adminReports.topSellingProducts"),children:s.jsx("div",{className:"space-y-4",children:a.topSelling.length>0?a.topSelling.map((E,I)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:I+1})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[E.sales," sales"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g(E.revenue)}),s.jsxs("div",{className:"flex items-center",children:[v(E.growth),s.jsxs("span",{className:`text-xs ml-1 ${x(E.growth)}`,children:["+",E.growth,"%"]})]})]})]},E.name)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(k,{title:e("adminReports.revenueByCategory"),children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.categoryBreakdown.length>0?a.categoryBreakdown.map(E=>s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:E.category}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:E.count}),s.jsx("p",{className:"text-xs text-gray-500",children:e("adminReports.products")}),s.jsx("p",{className:"text-sm font-medium text-blue-600 mt-1",children:g(E.revenue)})]},E.category)):s.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]}),C=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(y,{title:e("adminReports.totalCustomers"),value:i.totalCustomers,icon:ki,growth:6.7,color:"blue"}),s.jsx(y,{title:e("adminReports.newCustomers"),value:i.newCustomers,subtitle:e("adminReports.thisPeriod"),icon:Tn,growth:12.3,color:"green"}),s.jsx(y,{title:e("adminReports.avgOrderFrequency"),value:i.averageOrderFrequency,subtitle:e("adminReports.ordersPerCustomer"),icon:$r,growth:-2.1,color:"purple"})]}),s.jsx(k,{title:e("adminReports.customerSegmentation"),children:s.jsx("div",{className:"space-y-4",children:i.customerSegments.length>0?i.customerSegments.map(E=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.segment})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${E.percentage}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 w-12",children:E.count}),s.jsxs("span",{className:"text-sm text-gray-500 w-12",children:[E.percentage,"%"]})]})]},E.segment)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(k,{title:e("adminReports.topCustomersByRevenue"),children:s.jsx("div",{className:"space-y-4",children:i.topCustomers.length>0?i.topCustomers.map((E,I)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-green-600",children:I+1})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[E.orders," ",e("adminReports.orders")]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g(E.totalSpent)}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e("adminReports.last"),": ",p(E.lastOrder)]})]})]},E.name)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]}),P=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(y,{title:e("adminReports.totalOrders"),value:o.totalOrders,icon:$r,growth:8.3,color:"blue"}),s.jsx(y,{title:e("adminReports.completedOrders"),value:o.completedOrders,subtitle:`${Math.round(o.completedOrders/o.totalOrders*100)}% ${e("adminReports.completionRate")}`,icon:wt,growth:12.1,color:"green"}),s.jsx(y,{title:e("adminReports.pendingOrders"),value:o.pendingOrders,icon:Ht,growth:-15.2,color:"yellow"}),s.jsx(y,{title:e("adminReports.avgProcessingTime"),value:`${o.averageProcessingTime} ${e("adminReports.days")}`,icon:Tn,growth:-5.3,color:"purple"})]}),s.jsx(k,{title:e("adminReports.orderDistributionByDeliveryMethod"),children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.deliveryMethods.length>0?o.deliveryMethods.map(E=>s.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:E.method==="HOME_DELIVERY"?e("adminPage.homeDelivery"):e("ordersPage.pickup")}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:E.count}),s.jsxs("p",{className:"text-sm text-gray-500",children:[E.percentage,"% ",e("adminReports.ofTotalOrders")]})]},E.method)):s.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(k,{title:e("adminReports.orderStatusDistribution"),children:s.jsx("div",{className:"space-y-4",children:o.orderStatusTrend.length>0?o.orderStatusTrend.map(E=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-4 h-4 rounded-full mr-3 ${E.status==="delivered"?"bg-green-500":E.status==="shipped"?"bg-blue-500":E.status==="confirmed"?"bg-yellow-500":E.status==="pending"?"bg-orange-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:E.status})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:s.jsx("div",{className:`h-2 rounded-full ${E.status==="delivered"?"bg-green-500":E.status==="shipped"?"bg-blue-500":E.status==="confirmed"?"bg-yellow-500":E.status==="pending"?"bg-orange-500":"bg-red-500"}`,style:{width:`${E.count/o.totalOrders*100}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 w-12",children:E.count}),s.jsx("div",{className:"flex items-center ml-2",children:E.trend==="up"?s.jsx(Tn,{className:"h-4 w-4 text-green-500"}):E.trend==="down"?s.jsx(A0,{className:"h-4 w-4 text-red-500"}):s.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})})]})]},E.status)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]});return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):m?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSidebar.reportsAnalytics")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSidebar.comprehensiveInsights")})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[s.jsxs("button",{onClick:()=>w("pdf"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(N_,{className:"h-4 w-4 mr-2"}),e("adminReports.exportPDF")]}),s.jsxs("button",{onClick:()=>w("csv"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(hn,{className:"h-4 w-4 mr-2"}),e("adminReports.exportCSV")]})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.reportType")}),s.jsxs("select",{value:c,onChange:E=>t(WF(E.target.value)),className:"input w-full",children:[s.jsx("option",{value:"sales",children:e("adminReports.salesReport")}),s.jsx("option",{value:"products",children:e("adminReports.productsReport")}),s.jsx("option",{value:"customers",children:e("adminReports.customersReport")}),s.jsx("option",{value:"orders",children:e("adminReports.ordersReport")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.timePeriod")}),s.jsxs("select",{value:d,onChange:E=>t(qF(E.target.value)),className:"input w-full",children:[s.jsx("option",{value:"last7days",children:e("adminReports.last7Days")}),s.jsx("option",{value:"last30days",children:e("adminReports.last30Days")}),s.jsx("option",{value:"last90days",children:e("adminReports.last90Days")}),s.jsx("option",{value:"lastyear",children:e("adminReports.lastYear")}),s.jsx("option",{value:"custom",children:e("adminReports.customRange")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.startDate")}),s.jsx("input",{type:"date",value:h.start||"",onChange:E=>t(Tj({...h,start:E.target.value})),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.endDate")}),s.jsx("input",{type:"date",value:h.end||"",onChange:E=>t(Tj({...h,end:E.target.value})),className:"input w-full"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("button",{onClick:()=>{t(cc({reportType:c,timeRange:d,startDate:h.start,endDate:h.end}))},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(ut,{className:"h-4 w-4 mr-2"}),e("adminReports.refreshData")]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(Rn,{className:"h-4 w-4"}),s.jsxs("span",{children:["Last updated: ",new Date().toLocaleString("is-IS")]})]})]})]}),s.jsxs("div",{className:"space-y-8",children:[c==="sales"&&s.jsx(j,{}),c==="products"&&s.jsx(N,{}),c==="customers"&&s.jsx(C,{}),c==="orders"&&s.jsx(P,{})]})]})})]})})},GF=()=>{const{t:e}=xe(),{user:t}=ke(R=>R.auth),[r,n]=S.useState(!0),[a,i]=S.useState([]),[o,c]=S.useState([]),[d,h]=S.useState(""),[m,g]=S.useState(""),[p,v]=S.useState(""),[x,w]=S.useState([]),[y,k]=S.useState(!1),[j,N]=S.useState({email:!0,push:!0,sms:!1,orderUpdates:!0,systemAlerts:!0,marketing:!1,securityAlerts:!0}),C=S.useMemo(()=>[{id:1,type:"order",priority:"high",title:"New Order Received",message:"Order #1234 has been placed by Jn Jnsson for ISK 4,500",timestamp:"2025-01-13T14:30:00Z",isRead:!1,isArchived:!1,actions:["view","process","archive"],metadata:{orderId:1234,customerName:"Jn Jnsson",amount:4500}},{id:2,type:"system",priority:"medium",title:"Low Stock Alert",message:"Vnflaska - Rauvn is running low (5 items remaining)",timestamp:"2025-01-13T13:15:00Z",isRead:!0,isArchived:!1,actions:["view","restock","archive"],metadata:{productId:1,productName:"Vnflaska - Rauvn",stockLevel:5}},{id:3,type:"payment",priority:"high",title:"Payment Failed",message:"Payment for Order #1231 failed. Customer needs to update payment method.",timestamp:"2025-01-13T12:45:00Z",isRead:!1,isArchived:!1,actions:["view","contact","archive"],metadata:{orderId:1231,customerName:"Anna Ptursdttir",paymentMethod:"Credit Card"}},{id:4,type:"delivery",priority:"medium",title:"Delivery Completed",message:"Order #1228 has been successfully delivered to Magns Gumundsson",timestamp:"2025-01-13T11:20:00Z",isRead:!0,isArchived:!1,actions:["view","archive"],metadata:{orderId:1228,customerName:"Magns Gumundsson",deliveryTime:"11:20"}},{id:5,type:"security",priority:"high",title:"Suspicious Login Attempt",message:"Multiple failed login attempts detected for admin account",timestamp:"2025-01-13T10:30:00Z",isRead:!1,isArchived:!1,actions:["view","investigate","archive"],metadata:{ipAddress:"192.168.1.100",attempts:5,account:"admin"}},{id:6,type:"marketing",priority:"low",title:"New Customer Registration",message:"Sigrn lafsdttir has registered for a new account",timestamp:"2025-01-13T09:15:00Z",isRead:!0,isArchived:!0,actions:["view","archive"],metadata:{customerId:456,customerName:"Sigrn lafsdttir",registrationDate:"2025-01-13"}},{id:7,type:"system",priority:"medium",title:"Server Maintenance Scheduled",message:"Scheduled maintenance will occur tonight from 2:00 AM to 4:00 AM",timestamp:"2025-01-13T08:00:00Z",isRead:!0,isArchived:!1,actions:["view","archive"],metadata:{startTime:"2025-01-14T02:00:00Z",endTime:"2025-01-14T04:00:00Z",type:"scheduled"}},{id:8,type:"order",priority:"medium",title:"Order Cancelled",message:"Order #1225 has been cancelled by Einar Bjrnsson",timestamp:"2025-01-12T16:45:00Z",isRead:!0,isArchived:!1,actions:["view","refund","archive"],metadata:{orderId:1225,customerName:"Einar Bjrnsson",reason:"Customer requested"}}],[]);S.useEffect(()=>{n(!0),setTimeout(()=>{i(C),c(C),n(!1)},1e3)},[C]),S.useEffect(()=>{let R=a;d&&(R=R.filter(O=>O.title.toLowerCase().includes(d.toLowerCase())||O.message.toLowerCase().includes(d.toLowerCase()))),m&&(m==="unread"?R=R.filter(O=>!O.isRead):m==="read"?R=R.filter(O=>O.isRead):m==="archived"&&(R=R.filter(O=>O.isArchived))),p&&(R=R.filter(O=>O.type===p)),c(R)},[a,d,m,p]);const P=(R,O)=>{const q=`h-5 w-5 ${O==="high"?"text-red-500":O==="medium"?"text-yellow-500":"text-blue-500"}`;switch(R){case"order":return s.jsx($r,{className:q});case"payment":return s.jsx(un,{className:q});case"delivery":return s.jsx(Ue,{className:q});case"system":return s.jsx(on,{className:q});case"security":return s.jsx(On,{className:q});case"marketing":return s.jsx(Zr,{className:q});default:return s.jsx($i,{className:q})}},E=R=>{switch(R){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},I=R=>{const O=new Date(R),Q=Math.floor((new Date-O)/(1e3*60));return Q<1?"Just now":Q<60?`${Q}m ago`:Q<1440?`${Math.floor(Q/60)}h ago`:O.toLocaleDateString("is-IS")},M=R=>{i(O=>O.map(q=>q.id===R?{...q,isRead:!0}:q)),Z.success(e("adminNotifications.notificationMarkedRead"))},T=R=>{i(O=>O.map(q=>q.id===R?{...q,isRead:!1}:q)),Z.success(e("adminNotifications.notificationMarkedUnread"))},H=R=>{i(O=>O.map(q=>q.id===R?{...q,isArchived:!0}:q)),Z.success(e("adminNotifications.notificationArchived"))},J=R=>{i(O=>O.map(q=>q.id===R?{...q,isArchived:!1}:q)),Z.success(e("adminNotifications.notificationUnarchived"))},$=R=>{i(O=>O.filter(q=>q.id!==R)),Z.success(e("adminNotifications.notificationDeleted"))},D=R=>{if(x.length===0){Z.error(e("adminNotifications.selectNotificationsFirst"));return}switch(R){case"mark-read":i(O=>O.map(q=>x.includes(q.id)?{...q,isRead:!0}:q)),Z.success(e("adminNotifications.bulkMarkedRead",{count:x.length}));break;case"mark-unread":i(O=>O.map(q=>x.includes(q.id)?{...q,isRead:!1}:q)),Z.success(e("adminNotifications.bulkMarkedUnread",{count:x.length}));break;case"archive":i(O=>O.map(q=>x.includes(q.id)?{...q,isArchived:!0}:q)),Z.success(e("adminNotifications.bulkArchived",{count:x.length}));break;case"delete":i(O=>O.filter(q=>!x.includes(q.id))),Z.success(e("adminNotifications.bulkDeleted",{count:x.length}));break}w([])},W=()=>{x.length===o.length?w([]):w(o.map(R=>R.id))},X=a.filter(R=>!R.isRead&&!R.isArchived).length,G=a.filter(R=>R.isArchived).length;return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsxs(_e,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx($i,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mr-3"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminNotifications.title")}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[e("adminNotifications.unreadCount",{count:X}),"  ",e("adminNotifications.archivedCount",{count:G}),"  ",e("adminNotifications.totalCount",{count:a.length})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[s.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(on,{className:"h-4 w-4 mr-2"}),e("adminNotifications.settings")]}),s.jsxs("button",{onClick:()=>D("mark-read"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(wt,{className:"h-4 w-4 mr-2"}),e("adminNotifications.markAllRead")]})]})]})})}),s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminNotifications.searchNotifications"),value:d,onChange:R=>h(R.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:m,onChange:R=>g(R.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminNotifications.allStatus")}),s.jsx("option",{value:"unread",children:e("adminNotifications.unread")}),s.jsx("option",{value:"read",children:e("adminNotifications.read")}),s.jsx("option",{value:"archived",children:e("adminNotifications.archived")})]}),s.jsxs("select",{value:p,onChange:R=>v(R.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminNotifications.allTypes")}),s.jsx("option",{value:"order",children:e("adminNotifications.orders")}),s.jsx("option",{value:"payment",children:e("adminNotifications.payments")}),s.jsx("option",{value:"delivery",children:e("adminNotifications.delivery")}),s.jsx("option",{value:"system",children:e("adminNotifications.system")}),s.jsx("option",{value:"security",children:e("adminNotifications.security")}),s.jsx("option",{value:"marketing",children:e("adminNotifications.marketing")})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:x.length===o.length&&o.length>0,onChange:W,className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications.selectAll")})]})]}),x.length>0&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 pt-4 border-t border-gray-200",children:[s.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications.selected",{count:x.length})}),s.jsxs("button",{onClick:()=>D("mark-read"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(wt,{className:"h-4 w-4 mr-1"}),e("adminNotifications.markRead")]}),s.jsxs("button",{onClick:()=>D("mark-unread"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(kr,{className:"h-4 w-4 mr-1"}),e("adminNotifications.markUnread")]}),s.jsxs("button",{onClick:()=>D("archive"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(Ig,{className:"h-4 w-4 mr-1"}),e("adminNotifications.archive")]}),s.jsxs("button",{onClick:()=>D("delete"),className:"inline-flex items-center px-3 py-1 border border-red-300 rounded-md text-sm text-red-700 bg-red-50 hover:bg-red-100",children:[s.jsx(sr,{className:"h-4 w-4 mr-1"}),e("adminNotifications.delete")]})]})]}),s.jsx("div",{className:"space-y-4",children:o.map(R=>s.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 border-l-4 ${E(R.priority)} ${R.isRead?"":"ring-2 ring-blue-100 dark:ring-blue-900/20"}`,children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[s.jsx("input",{type:"checkbox",checked:x.includes(R.id),onChange:O=>{O.target.checked?w(q=>[...q,R.id]):w(q=>q.filter(Q=>Q!==R.id))},className:"mt-1 rounded"}),s.jsx("div",{className:"flex-shrink-0",children:P(R.type,R.priority)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h3",{className:`text-lg font-semibold ${R.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:R.title}),!R.isRead&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R.priority==="high"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400":R.priority==="medium"?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400"}`,children:R.priority}),R.isArchived&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:"Archived"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:R.message}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ht,{className:"h-4 w-4 mr-1"}),I(R.timestamp)]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx($i,{className:"h-4 w-4 mr-1"}),R.type]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[R.isRead?s.jsx("button",{onClick:()=>T(R.id),className:"p-2 text-gray-400 hover:text-gray-600",title:e("tooltips.markAsUnread"),children:s.jsx(kr,{className:"h-4 w-4"})}):s.jsx("button",{onClick:()=>M(R.id),className:"p-2 text-gray-400 hover:text-blue-600",title:e("tooltips.markAsRead"),children:s.jsx($t,{className:"h-4 w-4"})}),R.isArchived?s.jsx("button",{onClick:()=>J(R.id),className:"p-2 text-gray-400 hover:text-green-600",title:e("tooltips.unarchive"),children:s.jsx(Ig,{className:"h-4 w-4"})}):s.jsx("button",{onClick:()=>H(R.id),className:"p-2 text-gray-400 hover:text-yellow-600",title:e("tooltips.archive"),children:s.jsx(Ig,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>$(R.id),className:"p-2 text-gray-400 hover:text-red-600",title:e("tooltips.delete"),children:s.jsx(sr,{className:"h-4 w-4"})})]})]})})},R.id))}),o.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx($i,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("notifications.noNotifications")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:d||m||p?"Try adjusting your search criteria or filters.":"You're all caught up! No new notifications."})]})]}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e("notifications.settings")}),s.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ct,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:e("notifications.deliveryMethods")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.email,onChange:R=>N(O=>({...O,email:R.target.checked})),className:"rounded mr-3"}),s.jsx(Zr,{className:"h-4 w-4 mr-2"}),e("notifications.emailNotifications")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.push,onChange:R=>N(O=>({...O,push:R.target.checked})),className:"rounded mr-3"}),s.jsx($i,{className:"h-4 w-4 mr-2"}),e("notifications.pushNotifications")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.sms,onChange:R=>N(O=>({...O,sms:R.target.checked})),className:"rounded mr-3"}),s.jsx(wi,{className:"h-4 w-4 mr-2"}),e("notifications.smsNotifications")]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:e("notifications.types")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.orderUpdates,onChange:R=>N(O=>({...O,orderUpdates:R.target.checked})),className:"rounded mr-3"}),s.jsx($r,{className:"h-4 w-4 mr-2"}),e("notifications.orderUpdates")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.systemAlerts,onChange:R=>N(O=>({...O,systemAlerts:R.target.checked})),className:"rounded mr-3"}),s.jsx(on,{className:"h-4 w-4 mr-2"}),e("notifications.systemAlerts")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.marketing,onChange:R=>N(O=>({...O,marketing:R.target.checked})),className:"rounded mr-3"}),s.jsx(Zr,{className:"h-4 w-4 mr-2"}),e("notifications.marketing")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.securityAlerts,onChange:R=>N(O=>({...O,securityAlerts:R.target.checked})),className:"rounded mr-3"}),s.jsx(On,{className:"h-4 w-4 mr-2"}),e("notifications.securityAlerts")]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>k(!1),className:"btn btn-outline",children:"Cancel"}),s.jsx("button",{onClick:()=>{Z.success("Notification settings saved!"),k(!1)},className:"btn btn-primary",children:"Save Settings"})]})]})})]})},YF=()=>{const{t:e}=xe(),{user:t}=ke(n=>n.auth);if((t==null?void 0:t.role)==="ADMIN")return s.jsx(Ic,{to:"/admin/settings/general",replace:!0});if((t==null?void 0:t.role)!=="ADMIN")return s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ut,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})});const r=[{title:e("adminSettings.storeSettings"),description:e("adminSettings.storeSettingsDescription"),icon:on,color:"blue",items:[{name:e("adminSettings.general"),description:e("adminSettings.generalDescription"),href:"/admin/settings/general",icon:on},{name:e("adminSettings.business"),description:e("adminSettings.businessDescription"),href:"/admin/settings/business",icon:PA},{name:e("adminSettings.shipping"),description:e("adminSettings.shippingDescription"),href:"/admin/settings/shipping",icon:Nr},{name:e("adminSettings.vat"),description:e("adminSettings.vatDescription"),href:"/admin/settings/vat",icon:C_}]},{title:e("adminSettings.integrations"),description:e("adminSettings.integrationsDescription"),icon:M0,color:"green",items:[{name:e("adminSettings.apiKeys"),description:e("adminSettings.apiKeysDescription"),href:"/admin/settings/api-keys",icon:Rc},{name:e("adminSettings.paymentGateways"),description:e("adminSettings.paymentGatewayDescription"),href:"/admin/settings/payment-gateways",icon:un},{name:e("adminSettings.integrations"),description:e("adminSettings.integrationsDescription"),href:"/admin/settings/integrations",icon:M0}]}];return s.jsx(_e,{children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.settings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSettings.manageSystemSettings")})]}),s.jsx("div",{className:"space-y-8",children:r.map(n=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 bg-${n.color}-100 dark:bg-${n.color}-900/20 rounded-lg flex items-center justify-center`,children:s.jsx(n.icon,{className:`w-4 h-4 text-${n.color}-600 dark:text-${n.color}-400`})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.description})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.items.map(a=>s.jsx(Te,{to:a.href,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/20 transition-colors",children:s.jsx(a.icon,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:a.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.description})]})]})},a.name))})]},n.title))})]})})},dc=ve("smtpSettings/fetchSMTPSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get("/smtp-settings")).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch SMTP settings")}}),uc=ve("smtpSettings/updateSMTPSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.put("/smtp-settings",e)).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update SMTP settings")}}),hc=ve("smtpSettings/testSMTPConnection",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.post("/smtp-settings/test",e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"SMTP test failed")}}),JF={settings:null,isLoading:!1,error:null,testResult:null,isTesting:!1},f4=Vr({name:"smtpSettings",initialState:JF,reducers:{clearError:e=>{e.error=null},clearTestResult:e=>{e.testResult=null},updateSettingsField:(e,t)=>{const{field:r,value:n}=t.payload;e.settings&&(e.settings[r]=n)}},extraReducers:e=>{e.addCase(dc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(dc.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(dc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(uc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(uc.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(uc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(hc.pending,t=>{t.isTesting=!0,t.error=null,t.testResult=null}).addCase(hc.fulfilled,(t,r)=>{t.isTesting=!1,t.testResult={success:!0,message:r.payload.message,details:r.payload.details},t.error=null}).addCase(hc.rejected,(t,r)=>{t.isTesting=!1,t.testResult={success:!1,message:r.payload},t.error=r.payload})}}),{updateSettingsField:g4}=f4.actions,XF=f4.reducer,QF=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(ee=>ee.auth),{settings:n,testResult:a,isTesting:i}=ke(ee=>ee.smtpSettings),[o,c]=S.useState("general"),[d,h]=S.useState(!0),[m,g]=S.useState(!1),[p,v]=S.useState(!1),[x,w]=S.useState({storeName:"lfng",storeDescription:"Icelandic wine and beer shop with home delivery",storeEmail:"info@olfong.is",storePhone:"+354 555 1234",storeAddress:"Laugavegur 123, 101 Reykjavk, Iceland",currency:"ISK",language:"is",dateFormat:"DD/MM/YYYY",timeFormat:"24h"}),[y,k]=S.useState({openingHours:{monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"23:59",closed:!1},sunday:{open:"12:00",close:"23:59",closed:!1}},ageRestriction:{enabled:!0,nicotineAge:18,alcoholNicotineAge:20,generalProducts:0}}),[j,N]=S.useState(!1),[C,P]=S.useState({host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"lfng",fromNameIs:"lfng",isEnabled:!1}),[E,I]=S.useState(!1),[M,T]=S.useState({}),[H,J]=S.useState({}),[$,D]=S.useState({});S.useEffect(()=>{W()},[o]);const W=async()=>{var ee,K,be;h(!0);try{const Ne=await fetch("/api/settings?category=GENERAL",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Ne.ok){const Fe=await Ne.json(),Ye={};(ee=Fe.data.settings.GENERAL)==null||ee.forEach(Je=>{Ye[Je.key]=Je.value||""}),w(Je=>({...Je,...Ye}))}if(o==="apiKeys"){const Fe=await fetch("/api/settings?category=API_KEYS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Fe.ok){const Ye=await Fe.json(),Je={};(K=Ye.data.settings.API_KEYS)==null||K.forEach(et=>{Je[et.key]=et.value||""}),T(Je)}}if(o==="business"||o==="ageRestrictions"){const Fe=await fetch("/api/settings?category=BUSINESS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Fe.ok){const Ye=await Fe.json(),Je={};(be=Ye.data.settings.BUSINESS)==null||be.forEach(et=>{et.key==="openingHours"?Je.openingHours=JSON.parse(et.value):et.key==="ageRestrictionEnabled"?Je.ageRestriction={...Je.ageRestriction,enabled:et.value==="true"}:et.key==="nicotineAge"?Je.ageRestriction={...Je.ageRestriction,nicotineAge:parseInt(et.value)}:et.key==="alcoholNicotineAge"?Je.ageRestriction={...Je.ageRestriction,alcoholNicotineAge:parseInt(et.value)}:et.key==="generalProductsAge"&&(Je.ageRestriction={...Je.ageRestriction,generalProducts:parseInt(et.value)})}),k(et=>({...et,...Je}))}}o==="smtp"&&t(dc())}catch(Ne){console.error("Error loading settings:",Ne),Z.error("Failed to load settings")}finally{h(!1)}},X=()=>{const ee={};return x.storeName.trim()||(ee.storeName="Store name is required"),x.storeEmail.trim()?/\S+@\S+\.\S+/.test(x.storeEmail)||(ee.storeEmail="Please enter a valid email address"):ee.storeEmail="Store email is required",x.storePhone.trim()||(ee.storePhone="Phone number is required"),x.storeAddress.trim()||(ee.storeAddress="Store address is required"),D(ee),Object.keys(ee).length===0},G=async()=>{if(!X()){Z.error("Please fix the validation errors before saving");return}v(!0);try{const ee=[{key:"storeName",value:x.storeName,category:"GENERAL",description:"Store name"},{key:"storeDescription",value:x.storeDescription,category:"GENERAL",description:"Store description"},{key:"storeEmail",value:x.storeEmail,category:"GENERAL",description:"Store email"},{key:"storePhone",value:x.storePhone,category:"GENERAL",description:"Store phone number"},{key:"storeAddress",value:x.storeAddress,category:"GENERAL",description:"Store address"},{key:"currency",value:x.currency,category:"GENERAL",description:"Store currency"},{key:"language",value:x.language,category:"GENERAL",description:"Default language"},{key:"dateFormat",value:x.dateFormat,category:"GENERAL",description:"Date format"},{key:"timeFormat",value:x.timeFormat,category:"GENERAL",description:"Time format"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:ee})})).ok)throw new Error("Failed to save settings");Z.success(e("adminSettings.settingsSaved")),g(!1),D({})}catch(ee){console.error("Error saving settings:",ee),Z.error("Failed to save settings")}finally{v(!1)}},R=(ee,K)=>{w(be=>({...be,[ee]:K})),g(!0),$[ee]&&D(be=>({...be,[ee]:""}))},O=async(ee,K)=>{v(!0);try{const be=[{key:ee,value:K,category:"API_KEYS",description:`${ee} API key`}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:be})})).ok)throw new Error("Failed to save API key");Z.success(e("adminSettings.settingsSaved")),g(!1)}catch(be){console.error("Error saving API key:",be),Z.error("Failed to save API key")}finally{v(!1)}},q=ee=>{J(K=>({...K,[ee]:!K[ee]}))},Q=async()=>{v(!0);try{const ee=[{key:"openingHours",value:JSON.stringify(y.openingHours),category:"BUSINESS",description:"Store opening hours"},{key:"ageRestrictionEnabled",value:y.ageRestriction.enabled.toString(),category:"BUSINESS",description:"Age restriction enabled"},{key:"nicotineAge",value:y.ageRestriction.nicotineAge.toString(),category:"BUSINESS",description:"Minimum age for nicotine products"},{key:"alcoholNicotineAge",value:y.ageRestriction.alcoholNicotineAge.toString(),category:"BUSINESS",description:"Minimum age for alcohol and nicotine products"},{key:"generalProductsAge",value:y.ageRestriction.generalProducts.toString(),category:"BUSINESS",description:"Minimum age for general products"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:ee})})).ok)throw new Error("Failed to save settings");Z.success(e("adminSettings.settingsSaved")),g(!1)}catch(ee){console.error("Error saving settings:",ee),Z.error("Failed to save settings")}finally{v(!1)}},le=ee=>{const K=y.openingHours[ee],be={};Object.keys(y.openingHours).forEach(Ne=>{be[Ne]={...K}}),k(Ne=>({...Ne,openingHours:be})),g(!0),N(!1),Z.success(e("adminSettings.copiedHoursToAllDays").replace("{day}",ye(ee)))},V=()=>{const ee={...y.openingHours};["monday","tuesday","wednesday","thursday","friday"].forEach(K=>{ee[K]={open:"10:00",close:"22:00",closed:!1}}),k(K=>({...K,openingHours:ee})),g(!0),Z.success(e("adminSettings.setWeekdayHoursSuccess"))},ne=()=>{const ee={...y.openingHours};["saturday","sunday"].forEach(K=>{ee[K]={open:"12:00",close:"23:59",closed:!1}}),k(K=>({...K,openingHours:ee})),g(!0),Z.success(e("adminSettings.setWeekendHoursSuccess"))},pe=()=>{const ee={};Object.keys(y.openingHours).forEach(K=>{ee[K]={open:"00:00",close:"23:59",closed:!1}}),k(K=>({...K,openingHours:ee})),g(!0),Z.success(e("adminSettings.set24hSuccess"))},ye=ee=>({monday:e("adminSettings.monday"),tuesday:e("adminSettings.tuesday"),wednesday:e("adminSettings.wednesday"),thursday:e("adminSettings.thursday"),friday:e("adminSettings.friday"),saturday:e("adminSettings.saturday"),sunday:e("adminSettings.sunday")})[ee]||ee,z=ee=>{if(ee.closed)return null;const K=parseInt(ee.open.split(":")[0]),be=parseInt(ee.open.split(":")[1]),Ne=parseInt(ee.close.split(":")[0]),Fe=parseInt(ee.close.split(":")[1]),Ye=Ne*60+Fe-(K*60+be),Je=Math.floor(Ye/60),et=Ye%60;return{hours:Je,minutes:et,total:Ye/60}};S.useEffect(()=>{n&&o==="smtp"&&P({host:n.host||"",port:n.port||587,secure:n.secure||!1,username:n.username||"",password:"",fromEmail:n.fromEmail||"",fromName:n.fromName||"lfng",fromNameIs:n.fromNameIs||"lfng",isEnabled:n.isEnabled||!1})},[n,o]);const ge=(ee,K)=>{P(be=>({...be,[ee]:K})),t(g4({field:ee,value:K})),g(!0)},Me=async()=>{v(!0);try{await t(uc(C)).unwrap(),Z.success("SMTP settings saved successfully!"),g(!1)}catch(ee){Z.error(ee||"Failed to save settings")}finally{v(!1)}},De=async()=>{if(!C.host||!C.username||!C.password||!C.fromEmail){Z.error("Please fill in all required fields before testing");return}try{await t(hc(C)).unwrap(),a!=null&&a.success&&Z.success("SMTP test successful!")}catch(ee){Z.error(ee||"SMTP test failed")}};return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ut,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e("admin.accessDeniedMessage")})]})})}):d?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Te,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200",children:s.jsx(pn,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl xl:text-4xl 2xl:text-5xl font-bold text-gray-900 dark:text-white flex items-center",children:[s.jsx(on,{className:"w-8 h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 text-blue-600 dark:text-blue-400 mr-3"}),e("adminSettings.generalSettings")]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSettings.generalDescription")})]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[m?s.jsxs("div",{className:"flex items-center text-amber-600 dark:text-amber-400",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"Unsaved Changes"})]}):s.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[s.jsx(wt,{className:"w-5 h-5 mr-2"}),s.jsx("span",{className:"text-sm font-medium",children:"All Saved"})]}),s.jsxs("button",{onClick:G,disabled:p||!m,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p?s.jsx(ut,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Or,{className:"w-4 h-4 mr-2"}),e(p?"common.loading":"adminSettings.saveChanges")]})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:s.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>c("general"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o==="general"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(on,{className:"w-5 h-5 mr-2"}),e("adminSettings.general")]})}),s.jsx("button",{onClick:()=>c("apiKeys"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o==="apiKeys"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Rc,{className:"w-5 h-5 mr-2"}),e("adminSettings.apiKeys")]})}),s.jsx("button",{onClick:()=>c("business"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o==="business"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ht,{className:"w-5 h-5 mr-2"}),e("adminSettings.openingHours")||"Opnunartmar"]})}),s.jsx("button",{onClick:()=>c("ageRestrictions"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o==="ageRestrictions"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(pt,{className:"w-5 h-5 mr-2"}),e("adminSettings.ageRestrictions")||"Aldurstakmrk"]})}),s.jsx("button",{onClick:()=>c("smtp"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${o==="smtp"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Zr,{className:"w-5 h-5 mr-2"}),e("adminSettings.smtp")]})})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-6",children:s.jsx("div",{className:"space-y-6",children:o==="general"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(GA,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.storeInformation")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.storeInformationDesc")})]}),s.jsxs("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeName")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:x.storeName,onChange:ee=>R("storeName",ee.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${$.storeName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store name"}),$.storeName&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:$.storeName})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeEmail")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",value:x.storeEmail,onChange:ee=>R("storeEmail",ee.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${$.storeEmail?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"info@yourstore.com"})]}),$.storeEmail&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:$.storeEmail})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.phoneNumber")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(wi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:x.storePhone,onChange:ee=>R("storePhone",ee.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${$.storePhone?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"+354 555 1234"})]}),$.storePhone&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:$.storePhone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeAddress")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(mn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("textarea",{value:x.storeAddress,onChange:ee=>R("storeAddress",ee.target.value),rows:3,className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${$.storeAddress?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store address"})]}),$.storeAddress&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:$.storeAddress})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.storeDescription")}),s.jsx("textarea",{value:x.storeDescription,onChange:ee=>R("storeDescription",ee.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Describe your store and what makes it special"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Hh,{className:"w-6 h-6 text-green-600 dark:text-green-400 mr-3"}),s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.preferences")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.preferencesDesc")})]}),s.jsx("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-4 gap-4 xl:gap-6 2xl:gap-8",children:[s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.currency")}),s.jsxs("div",{className:"relative",children:[s.jsx(sf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.currency,onChange:ee=>R("currency",ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"ISK",children:e("adminSettings.currencyISK")}),s.jsx("option",{value:"USD",children:e("adminSettings.currencyUSD")}),s.jsx("option",{value:"EUR",children:e("adminSettings.currencyEUR")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.language")}),s.jsxs("div",{className:"relative",children:[s.jsx(Hh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.language,onChange:ee=>R("language",ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"is",children:e("adminSettings.languageIcelandic")}),s.jsx("option",{value:"en",children:e("adminSettings.languageEnglish")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.dateFormat")}),s.jsxs("div",{className:"relative",children:[s.jsx(Rn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.dateFormat,onChange:ee=>R("dateFormat",ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"DD/MM/YYYY",children:e("adminSettings.dateFormatDDMMYYYY")}),s.jsx("option",{value:"MM/DD/YYYY",children:e("adminSettings.dateFormatMMDDYYYY")}),s.jsx("option",{value:"YYYY-MM-DD",children:e("adminSettings.dateFormatYYYYMMDD")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.timeFormat")}),s.jsxs("div",{className:"relative",children:[s.jsx(Ht,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.timeFormat,onChange:ee=>R("timeFormat",ee.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"24h",children:e("adminSettings.timeFormat24h")}),s.jsx("option",{value:"12h",children:e("adminSettings.timeFormat12h")})]})]})]})]})})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4 xl:p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Fu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm xl:text-base font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.needHelp")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:e("adminSettings.settingsControlDesc")}),s.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.storeNameAppears")]}),s.jsxs("li",{children:[" ",e("adminSettings.currencyAffects")]}),s.jsxs("li",{children:[" ",e("adminSettings.languageSets")]}),s.jsxs("li",{children:[" ",e("adminSettings.dateTimeFormats")]})]})]})]})})]}):o==="apiKeys"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Rc,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.apiKeysConfiguration")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.apiKeysDescription")})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-pink-600 dark:text-pink-400 font-semibold text-sm",children:"U"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.unsplashApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.unsplashDevelopers")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:H.unsplash?"text":"password",placeholder:e("adminSettings.enterUnsplashApiKey"),value:M.unsplash||"",onChange:ee=>{T(K=>({...K,unsplash:ee.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>q("unsplash"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:H.unsplash?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>O("unsplash",M.unsplash||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:"P"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pexelsApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pexelsApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:H.pexels?"text":"password",placeholder:e("adminSettings.enterPexelsApiKey"),value:M.pexels||"",onChange:ee=>{T(K=>({...K,pexels:ee.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>q("pexels"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:H.pexels?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>O("pexels",M.pexels||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold text-sm",children:"PX"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pixabayApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pixabayApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:H.pixabay?"text":"password",placeholder:e("adminSettings.enterPixabayApiKey"),value:M.pixabay||"",onChange:ee=>{T(K=>({...K,pixabay:ee.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>q("pixabay"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:H.pixabay?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>O("pixabay",M.pixabay||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold text-sm",children:"G"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.googleApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.googleCloudConsole")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:H.google?"text":"password",placeholder:e("adminSettings.enterGoogleApiKey"),value:M.google||"",onChange:ee=>{T(K=>({...K,google:ee.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>q("google"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:H.google?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>O("google",M.google||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:e("adminSettings.enterGoogleSearchEngineId"),value:M.googleSearchEngineId||"",onChange:ee=>{T(K=>({...K,googleSearchEngineId:ee.target.value})),g(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{onClick:()=>O("googleSearchEngineId",M.googleSearchEngineId||""),disabled:p||!m,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.test")})]})]})]})]}),s.jsxs("div",{className:"mt-8 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-3",children:e("adminSettings.importantNotes")}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote1")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote2")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote3")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote4")]})]})]})]}):o==="business"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(E_,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.quickActions")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:V,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekdayHours")})]}),s.jsxs("button",{onClick:ne,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekendHours")})]}),s.jsxs("button",{onClick:pe,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Ht,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.operation24h")})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>N(!j),className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(j_,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.copyHours")})]}),j&&s.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10 overflow-hidden",children:Object.keys(y.openingHours).map(ee=>s.jsxs("button",{onClick:()=>le(ee),className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300 transition-colors capitalize",children:[e("adminSettings.copy")," ",ye(ee)]},ee))})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Ht,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.openingHours")})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(y.openingHours).map(([ee,K])=>{const be=z(K);return s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:ye(ee)})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",value:K.open,onChange:Ne=>{const Fe=Ne.target.value;(Fe===""||/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(Fe)||/^([0-1]?[0-9]?|2[0-3]?)(:([0-5]?[0-9]?)?)?$/.test(Fe))&&(k(Ye=>({...Ye,openingHours:{...Ye.openingHours,[ee]:{...K,open:Fe}}})),g(!0))},disabled:K.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800 font-mono",title:e("adminSettings.openingTime"),placeholder:"HH:MM",pattern:"^([0-1][0-9]|2[0-3]):[0-5][0-9]$"})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:""})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",value:K.close,onChange:Ne=>{const Fe=Ne.target.value;(Fe===""||/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(Fe)||/^([0-1]?[0-9]?|2[0-3]?)(:([0-5]?[0-9]?)?)?$/.test(Fe))&&(k(Ye=>({...Ye,openingHours:{...Ye.openingHours,[ee]:{...K,close:Fe}}})),g(!0))},disabled:K.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800 font-mono",title:e("adminSettings.closingTime"),placeholder:"HH:MM",pattern:"^([0-1][0-9]|2[0-3]):[0-5][0-9]$"})}),s.jsx("div",{className:"col-span-2 text-center",children:be?s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[be.hours,"h ",be.minutes,"m"]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:K.closed,onChange:Ne=>{k(Fe=>({...Fe,openingHours:{...Fe.openingHours,[ee]:{...K,closed:Ne.target.checked}}})),g(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.closed")})]})})]},ee)})}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Fu,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:e("adminSettings.weeklySummary")}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.openDays")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(y.openingHours).filter(ee=>!ee.closed).length,"/7"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.totalHoursPerWeek")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(y.openingHours).reduce((ee,K)=>{const be=z(K);return ee+((be==null?void 0:be.total)||0)},0).toFixed(1),"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.avgHoursPerDay")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[(Object.values(y.openingHours).reduce((ee,K)=>{const be=z(K);return ee+((be==null?void 0:be.total)||0)},0)/Object.values(y.openingHours).filter(ee=>!ee.closed).length).toFixed(1),"h"]})]})]})]})]})})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:Q,disabled:p||!m,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p?s.jsx(ut,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Or,{className:"w-4 h-4 mr-2"}),e(p?"common.saving":"adminSettings.saveChanges")]})})})]}):o==="ageRestrictions"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(pt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.ageRestriction")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"enableAgeRestriction",checked:y.ageRestriction.enabled,onChange:ee=>{k(K=>({...K,ageRestriction:{...K.ageRestriction,enabled:ee.target.checked}})),g(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"enableAgeRestriction",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.enableRestrictions")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.nicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:y.ageRestriction.nicotineAge,onChange:ee=>{k(K=>({...K,ageRestriction:{...K.ageRestriction,nicotineAge:parseInt(ee.target.value)||18}})),g(!0)},disabled:!y.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.nicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.alcoholNicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:y.ageRestriction.alcoholNicotineAge,onChange:ee=>{k(K=>({...K,ageRestriction:{...K.ageRestriction,alcoholNicotineAge:parseInt(ee.target.value)||20}})),g(!0)},disabled:!y.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.alcoholNicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.generalProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:y.ageRestriction.generalProducts,onChange:ee=>{k(K=>({...K,ageRestriction:{...K.ageRestriction,generalProducts:parseInt(ee.target.value)||0}})),g(!0)},disabled:!y.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.generalProductsDescription")})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.ageRestrictionNotice")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.ageRestrictionDescription")})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsx("button",{onClick:Q,disabled:p||!m,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:p?s.jsxs(s.Fragment,{children:[s.jsx(ut,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}),e("common.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-5 h-5 mr-2"}),e("adminSettings.saveChanges")]})})})})]}):o==="smtp"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(I0,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.smtpSettings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.smtp.description")})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:C.isEnabled,onChange:ee=>ge("isEnabled",ee.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.smtp.enableSmtp")})]})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.host")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(I0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:C.host,onChange:ee=>ge("host",ee.target.value),placeholder:"smtp.gmail.com",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.hostHelp")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.port")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:C.port,onChange:ee=>ge("port",parseInt(ee.target.value)||587),placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.portHelp")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:C.secure,onChange:ee=>ge("secure",ee.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx(T0,{className:"w-4 h-4 ml-2 mr-1 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.smtp.useSecure")})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:e("adminSettings.smtp.secureHelp")})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Ur,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.authCredentials")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.username")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:C.username,onChange:ee=>ge("username",ee.target.value),placeholder:"your-email@example.com",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.password")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(T0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:E?"text":"password",value:C.password,onChange:ee=>ge("password",ee.target.value),placeholder:"Enter SMTP password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>I(!E),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:E?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.passwordHelp")})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Zr,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.senderInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.fromEmail")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",value:C.fromEmail,onChange:ee=>ge("fromEmail",ee.target.value),placeholder:"noreply@olfong.is",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.fromEmailHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.smtp.fromNameEn")}),s.jsx("input",{type:"text",value:C.fromName,onChange:ee=>ge("fromName",ee.target.value),placeholder:"lfng",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.smtp.fromNameIs")}),s.jsx("input",{type:"text",value:C.fromNameIs,onChange:ee=>ge("fromNameIs",ee.target.value),placeholder:"lfng",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:De,disabled:i||!C.host||!C.username||!C.password||!C.fromEmail,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:i?s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2 animate-spin"}),e("adminSettings.smtp.testingConnection")]}):s.jsxs(s.Fragment,{children:[s.jsx(wy,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.testConnection")]})}),s.jsxs("button",{onClick:Me,disabled:p||!m,className:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p?s.jsx(ut,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Or,{className:"w-4 h-4 mr-2"}),e(p?"common.saving":"adminSettings.smtp.saveSettings")]})]})}),a&&s.jsx("div",{className:`p-4 rounded-md ${a.success?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:s.jsxs("div",{className:"flex items-start",children:[a.success?s.jsx(wt,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-3 mt-0.5"}):s.jsx(pt,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-sm font-medium ${a.success?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:a.success?e("adminSettings.smtp.connectionSuccess"):e("adminSettings.smtp.connectionFailed")}),s.jsx("p",{className:`text-sm mt-1 ${a.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a.message||(a.success?e("adminSettings.smtp.connectionSuccessMsg"):e("adminSettings.smtp.connectionFailedMsg"))})]})]})})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Fu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.smtp.commonProviders")}),s.jsxs("div",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-300",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Gmail:"})," ",e("adminSettings.smtp.providerGmail")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Outlook/Office365:"})," ",e("adminSettings.smtp.providerOutlook")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Yahoo:"})," ",e("adminSettings.smtp.providerYahoo")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"SendGrid:"})," ",e("adminSettings.smtp.providerSendGrid")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Mailgun:"})," ",e("adminSettings.smtp.providerMailgun")]})]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-3",children:e("adminSettings.smtp.gmailTip")})]})]})})]}):null})})})]})})},e9=()=>{const{t:e}=xe(),{user:t}=ke(C=>C.auth),[r,n]=S.useState(!0),[a,i]=S.useState(!1),[o,c]=S.useState(!1),[d,h]=S.useState(!1),[m,g]=S.useState({openingHours:{monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"24:00",closed:!1},sunday:{open:"12:00",close:"24:00",closed:!1}},ageRestriction:{enabled:!0,nicotineAge:18,alcoholNicotineAge:20,generalProducts:0}});S.useEffect(()=>{p()},[]);const p=async()=>{var C;n(!0);try{const P=await fetch("/api/settings?category=BUSINESS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(P.ok){const E=await P.json(),I={};(C=E.data.settings.BUSINESS)==null||C.forEach(M=>{M.key==="openingHours"?I.openingHours=JSON.parse(M.value):M.key==="ageRestrictionEnabled"?I.ageRestriction={...I.ageRestriction,enabled:M.value==="true"}:M.key==="nicotineAge"?I.ageRestriction={...I.ageRestriction,nicotineAge:parseInt(M.value)}:M.key==="alcoholNicotineAge"?I.ageRestriction={...I.ageRestriction,alcoholNicotineAge:parseInt(M.value)}:M.key==="generalProductsAge"&&(I.ageRestriction={...I.ageRestriction,generalProducts:parseInt(M.value)})}),g(M=>({...M,...I}))}}catch(P){console.error("Error loading settings:",P),Z.error("Failed to load settings")}finally{n(!1)}},v=async()=>{c(!0);try{const C=[{key:"openingHours",value:JSON.stringify(m.openingHours),category:"BUSINESS",description:"Store opening hours"},{key:"ageRestrictionEnabled",value:m.ageRestriction.enabled.toString(),category:"BUSINESS",description:"Age restriction enabled"},{key:"nicotineAge",value:m.ageRestriction.nicotineAge.toString(),category:"BUSINESS",description:"Minimum age for nicotine products"},{key:"alcoholNicotineAge",value:m.ageRestriction.alcoholNicotineAge.toString(),category:"BUSINESS",description:"Minimum age for alcohol and nicotine products"},{key:"generalProductsAge",value:m.ageRestriction.generalProducts.toString(),category:"BUSINESS",description:"Minimum age for general products"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:C})})).ok)throw new Error("Failed to save settings");Z.success(e("adminSettings.settingsSaved")),i(!1)}catch(C){console.error("Error saving settings:",C),Z.error("Failed to save settings")}finally{c(!1)}},x=C=>{const P=m.openingHours[C],E={};Object.keys(m.openingHours).forEach(I=>{E[I]={...P}}),g(I=>({...I,openingHours:E})),i(!0),h(!1),Z.success(e("adminSettings.copiedHoursToAllDays").replace("{day}",j(C)))},w=()=>{const C={...m.openingHours};["monday","tuesday","wednesday","thursday","friday"].forEach(P=>{C[P]={open:"10:00",close:"22:00",closed:!1}}),g(P=>({...P,openingHours:C})),i(!0),Z.success(e("adminSettings.setWeekdayHoursSuccess"))},y=()=>{const C={...m.openingHours};["saturday","sunday"].forEach(P=>{C[P]={open:"12:00",close:"24:00",closed:!1}}),g(P=>({...P,openingHours:C})),i(!0),Z.success(e("adminSettings.setWeekendHoursSuccess"))},k=()=>{const C={};Object.keys(m.openingHours).forEach(P=>{C[P]={open:"00:00",close:"23:59",closed:!1}}),g(P=>({...P,openingHours:C})),i(!0),Z.success(e("adminSettings.set24hSuccess"))},j=C=>({monday:e("adminSettings.monday"),tuesday:e("adminSettings.tuesday"),wednesday:e("adminSettings.wednesday"),thursday:e("adminSettings.thursday"),friday:e("adminSettings.friday"),saturday:e("adminSettings.saturday"),sunday:e("adminSettings.sunday")})[C]||C,N=C=>{if(C.closed)return null;const P=parseInt(C.open.split(":")[0]),E=parseInt(C.open.split(":")[1]),I=parseInt(C.close.split(":")[0]),M=parseInt(C.close.split(":")[1]),T=I*60+M-(P*60+E),H=Math.floor(T/60),J=T%60;return{hours:H,minutes:J,total:T/60}};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ut,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Te,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(pn,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.businessSettings")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.businessDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(E_,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.quickActions")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:w,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekdayHours")})]}),s.jsxs("button",{onClick:y,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Rn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekendHours")})]}),s.jsxs("button",{onClick:k,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Ht,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.operation24h")})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!d),className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(j_,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.copyHours")})]}),d&&s.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10 overflow-hidden",children:Object.keys(m.openingHours).map(C=>s.jsxs("button",{onClick:()=>x(C),className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300 transition-colors capitalize",children:[e("adminSettings.copy")," ",j(C)]},C))})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Ht,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.openingHours")})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(m.openingHours).map(([C,P])=>{const E=N(P);return s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:j(C)})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"time",value:P.open,onChange:I=>{g(M=>({...M,openingHours:{...M.openingHours,[C]:{...P,open:I.target.value}}})),i(!0)},disabled:P.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800",title:e("adminSettings.openingTime")})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:""})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"time",value:P.close,onChange:I=>{g(M=>({...M,openingHours:{...M.openingHours,[C]:{...P,close:I.target.value}}})),i(!0)},disabled:P.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800",title:e("adminSettings.closingTime")})}),s.jsx("div",{className:"col-span-2 text-center",children:E?s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.hours,"h ",E.minutes,"m"]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:P.closed,onChange:I=>{g(M=>({...M,openingHours:{...M.openingHours,[C]:{...P,closed:I.target.checked}}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.closed")})]})})]},C)})}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Fu,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:e("adminSettings.weeklySummary")}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.openDays")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(m.openingHours).filter(C=>!C.closed).length,"/7"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.totalHoursPerWeek")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(m.openingHours).reduce((C,P)=>{const E=N(P);return C+((E==null?void 0:E.total)||0)},0).toFixed(1),"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.avgHoursPerDay")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[(Object.values(m.openingHours).reduce((C,P)=>{const E=N(P);return C+((E==null?void 0:E.total)||0)},0)/Object.values(m.openingHours).filter(C=>!C.closed).length).toFixed(1),"h"]})]})]})]})]})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(pt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.ageRestriction")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"enableAgeRestriction",checked:m.ageRestriction.enabled,onChange:C=>{g(P=>({...P,ageRestriction:{...P.ageRestriction,enabled:C.target.checked}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"enableAgeRestriction",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.enableAgeRestriction")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.nicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.nicotineAge,onChange:C=>{g(P=>({...P,ageRestriction:{...P.ageRestriction,nicotineAge:parseInt(C.target.value)||18}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.nicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.alcoholNicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.alcoholNicotineAge,onChange:C=>{g(P=>({...P,ageRestriction:{...P.ageRestriction,alcoholNicotineAge:parseInt(C.target.value)||20}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.alcoholNicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.generalProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.generalProducts,onChange:C=>{g(P=>({...P,ageRestriction:{...P.ageRestriction,generalProducts:parseInt(C.target.value)||0}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.generalProductsDescription")})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.ageRestrictionNotice")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.ageRestrictionDescription")})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:v,disabled:o||!a,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?s.jsx(ut,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Or,{className:"w-4 h-4 mr-2"}),e(o?"common.loading":"adminSettings.saveChanges")]})})})]})})},t9=()=>{const{t:e,currentLanguage:t}=xe(),{user:r}=ke(k=>k.auth),[n,a]=S.useState(!0),[i,o]=S.useState([]),[c,d]=S.useState(!1),[h,m]=S.useState({});S.useEffect(()=>{g()},[]);const g=async()=>{a(!0);try{const k=await fetch("/api/shipping/active",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(k.ok){const j=await k.json();o(j.data||[])}}catch(k){console.error("Error loading shipping options:",k),Z.error("Failed to load shipping options")}finally{a(!1)}},p=async(k,j)=>{try{if((await fetch(`/api/shipping/${k}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:j})})).ok)o(C=>C.map(P=>P.id===k?{...P,isEnabled:j}:P)),Z.success(`Shipping option ${j?"enabled":"disabled"} successfully`);else throw new Error("Failed to toggle shipping option")}catch(N){console.error("Error toggling shipping option:",N),Z.error("Failed to toggle shipping option")}},v=async k=>{if(window.confirm(e("adminSettings.confirmDeleteShipping")))try{if((await fetch(`/api/shipping/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)o(N=>N.filter(C=>C.id!==k)),Z.success("Shipping option deleted successfully");else throw new Error("Failed to delete shipping option")}catch(j){console.error("Error deleting shipping option:",j),Z.error("Failed to delete shipping option")}},x=async k=>{try{const j=await fetch("/api/shipping",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(k)});if(j.ok){const N=await j.json();o(C=>[...C,N.data]),d(!1),m({}),Z.success("Shipping option created successfully")}else throw new Error("Failed to create shipping option")}catch(j){console.error("Error creating shipping option:",j),Z.error("Failed to create shipping option")}},w=async(k,j)=>{try{const N=await fetch(`/api/shipping/${k}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(j)});if(N.ok){const C=await N.json();o(P=>P.map(E=>E.id===k?C.data:E)),d(!1),m({}),Z.success("Shipping option updated successfully")}else throw new Error("Failed to update shipping option")}catch(N){console.error("Error updating shipping option:",N),Z.error("Failed to update shipping option")}};if((r==null?void 0:r.role)!=="ADMIN")return s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ut,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})});if(n)return s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})});const y=()=>c?s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h.id?e("adminSettings.editShippingOption"):e("adminSettings.addShippingOption")}),s.jsx("button",{onClick:()=>{d(!1),m({})},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:k=>{k.preventDefault();const j=new FormData(k.target),N=Object.fromEntries(j.entries());N.fee=parseFloat(N.fee)||0,N.estimatedDays=parseInt(N.estimatedDays)||1,N.sortOrder=parseInt(N.sortOrder)||0,h.id?w(h.id,N):x(N)},children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.nameEnglish")}),s.jsx("input",{type:"text",name:"name",defaultValue:h.name||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.nameIcelandic")}),s.jsx("input",{type:"text",name:"nameIs",defaultValue:h.nameIs||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.type")}),s.jsxs("select",{name:"type",defaultValue:h.type||"DELIVERY",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"DELIVERY",children:e("adminSettings.delivery")}),s.jsx("option",{value:"PICKUP",children:e("adminSettings.pickup")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.price")," (ISK)"]}),s.jsx("input",{type:"number",name:"fee",defaultValue:h.fee||0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.estimatedDays")}),s.jsx("input",{type:"number",name:"estimatedDays",defaultValue:h.estimatedDays||1,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.sortOrder")}),s.jsx("input",{type:"number",name:"sortOrder",defaultValue:h.sortOrder||0,min:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.descriptionEnglish")}),s.jsx("textarea",{name:"description",defaultValue:h.description||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.descriptionIcelandic")}),s.jsx("textarea",{name:"descriptionIs",defaultValue:h.descriptionIs||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>{d(!1),m({})},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:e("adminSettings.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:h.id?e("adminSettings.update"):e("adminSettings.create")})]})]})]})})}):null;return s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Te,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(pn,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.shipping")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.shippingDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5",children:""}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminSettings.shippingConfiguration")}),s.jsx("p",{children:e("adminSettings.shippingDescription")})]})]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{}),s.jsxs("button",{onClick:()=>{m({}),d(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(yr,{className:"h-4 w-4 mr-2"}),e("adminSettings.addShippingOption")]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.map(k=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(Nr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t==="is"?k.nameIs:k.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t==="is"?k.name:k.nameIs})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>v(k.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:e("adminSettings.delete"),children:s.jsx(sr,{className:"h-4 w-4"})}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:k.isEnabled,onChange:j=>p(k.id,j.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:t==="is"?k.descriptionIs:k.description}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-4 leading-relaxed italic",children:t==="is"?k.description:k.descriptionIs}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${k.isEnabled?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:k.isEnabled?e("adminSettings.enabled"):e("adminSettings.disabled")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[k.fee," ISK"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:k.type})]})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsx("button",{onClick:()=>{m(k),d(!0)},className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:e("adminSettings.edit")})})]},k.id))}),i.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Nr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminSettings.noShippingOptions")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminSettings.noShippingOptionsDescription")}),s.jsxs("button",{onClick:()=>{m({}),d(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(yr,{className:"h-4 w-4 mr-2"}),e("adminSettings.addFirstShippingOption")]})]}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mr-3 mt-0.5",children:""}),s.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminSettings.shippingNotes")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:e("adminSettings.shippingNote1")}),s.jsx("li",{children:e("adminSettings.shippingNote2")}),s.jsx("li",{children:e("adminSettings.shippingNote3")})]})]})]})})]})}),y()]})})},r9=()=>{const{t:e}=xe(),{user:t}=ke(p=>p.auth),[r,n]=S.useState(!0),[a,i]=S.useState(!1),[o,c]=S.useState(!1),[d,h]=S.useState({enabled:!0,rate:24,country:"IS",displayInAdmin:!0,includeInCustomerPrice:!0,showVatBreakdown:!1});S.useEffect(()=>{m()},[]);const m=async()=>{var p;n(!0);try{const v=await fetch("/api/settings?category=VAT",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(v.ok){const x=await v.json(),w={};(p=x.data.settings.VAT)==null||p.forEach(y=>{y.key==="vatEnabled"?w.enabled=y.value==="true":y.key==="vatRate"?w.rate=parseFloat(y.value):y.key==="vatCountry"?w.country=y.value:y.key==="vatDisplayInAdmin"?w.displayInAdmin=y.value==="true":y.key==="vatIncludeInCustomerPrice"?w.includeInCustomerPrice=y.value==="true":y.key==="vatShowBreakdown"&&(w.showVatBreakdown=y.value==="true")}),h(y=>({...y,...w}))}}catch(v){console.error("Error loading settings:",v),Z.error("Failed to load settings")}finally{n(!1)}},g=async()=>{c(!0);try{const p=[{key:"vatEnabled",value:d.enabled.toString(),category:"VAT",description:"VAT enabled"},{key:"vatRate",value:d.rate.toString(),category:"VAT",description:"VAT rate"},{key:"vatCountry",value:d.country,category:"VAT",description:"VAT country"},{key:"vatDisplayInAdmin",value:d.displayInAdmin.toString(),category:"VAT",description:"Show VAT in admin"},{key:"vatIncludeInCustomerPrice",value:d.includeInCustomerPrice.toString(),category:"VAT",description:"Include VAT in customer price"},{key:"vatShowBreakdown",value:d.showVatBreakdown.toString(),category:"VAT",description:"Show VAT breakdown"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:p})})).ok)throw new Error("Failed to save settings");Z.success(e("adminSettings.settingsSaved")),i(!1)}catch(p){console.error("Error saving settings:",p),Z.error("Failed to save settings")}finally{c(!1)}};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ut,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Te,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(pn,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.vatSettings")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.vatDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(C_,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatSettings")})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings.vatConfiguration")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"vatEnabled",checked:d.enabled,onChange:p=>{h(v=>({...v,enabled:p.target.checked})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"vatEnabled",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.vatEnabled")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.vatRate")," (%)"]}),s.jsx("input",{type:"number",value:d.rate,onChange:p=>{h(v=>({...v,rate:parseFloat(p.target.value)||0})),i(!0)},disabled:!d.enabled,min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"24.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.country")}),s.jsxs("select",{name:"country",value:d.country,onChange:p=>{h(v=>({...v,country:p.target.value})),i(!0)},disabled:!d.enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"IS",children:e("adminSettings.iceland")}),s.jsx("option",{value:"EU",children:e("adminSettings.euCountries")}),s.jsx("option",{value:"OTHER",children:e("adminSettings.otherCountries")})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.vatInformation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.vatInformationDescription")})]})})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings.vatDisplaySettings")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showVatInAdmin",checked:d.displayInAdmin,onChange:p=>{h(v=>({...v,displayInAdmin:p.target.checked})),i(!0)},disabled:!d.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"showVatInAdmin",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatInAdmin")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.showVatInAdminDescription")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"includeVatInCustomerPrice",checked:d.includeInCustomerPrice,onChange:p=>{h(v=>({...v,includeInCustomerPrice:p.target.checked})),i(!0)},disabled:!d.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"includeVatInCustomerPrice",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.includeVatInCustomerPrice")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.includeVatInCustomerPriceDescription")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showVatBreakdown",checked:d.showVatBreakdown,onChange:p=>{h(v=>({...v,showVatBreakdown:p.target.checked})),i(!0)},disabled:!d.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"showVatBreakdown",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatBreakdown")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.showVatBreakdownDescription")})]})]})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:g,disabled:o||!a,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?s.jsx(ut,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Or,{className:"w-4 h-4 mr-2"}),e(o?"common.loading":"adminSettings.saveChanges")]})})})]})})},s9=()=>{const{t:e}=xe(),{user:t}=ke(w=>w.auth),[r,n]=S.useState(!0),[a,i]=S.useState(!1),[o,c]=S.useState(!1),[d,h]=S.useState({}),[m,g]=S.useState({});S.useEffect(()=>{p()},[]);const p=async()=>{var w;n(!0);try{const y=await fetch("/api/settings?category=API_KEYS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(y.ok){const k=await y.json(),j={};(w=k.data.settings.API_KEYS)==null||w.forEach(N=>{j[N.key]=N.value||""}),h(j)}}catch(y){console.error("Error loading settings:",y),Z.error("Failed to load settings")}finally{n(!1)}},v=async(w,y)=>{c(!0);try{const k=[{key:w,value:y,category:"API_KEYS",description:`${w} API key`}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:k})})).ok)throw new Error("Failed to save API key");Z.success(e("adminSettings.settingsSaved")),i(!1)}catch(k){console.error("Error saving API key:",k),Z.error("Failed to save API key")}finally{c(!1)}},x=w=>{g(y=>({...y,[w]:!y[w]}))};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ut,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Te,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(pn,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.apiKeysDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Rc,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.apiKeysConfiguration")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.apiKeysDescription")})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-pink-600 dark:text-pink-400 font-semibold text-sm",children:"U"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.unsplashApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.unsplashDevelopers")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.unsplash?"text":"password",placeholder:e("adminSettings.enterUnsplashApiKey"),value:d.unsplash||"",onChange:w=>{h(y=>({...y,unsplash:w.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("unsplash"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.unsplash?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:"P"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pexelsApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pexelsApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.pexels?"text":"password",placeholder:e("adminSettings.enterPexelsApiKey"),value:d.pexels||"",onChange:w=>{h(y=>({...y,pexels:w.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("pexels"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.pexels?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>v("pexels",d.pexels||""),disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold text-sm",children:"PX"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pixabayApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pixabayApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.pixabay?"text":"password",placeholder:e("adminSettings.enterPixabayApiKey"),value:d.pixabay||"",onChange:w=>{h(y=>({...y,pixabay:w.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("pixabay"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.pixabay?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>v("pixabay",d.pixabay||""),disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold text-sm",children:"G"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.googleApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.googleCloudConsole")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.google?"text":"password",placeholder:e("adminSettings.enterGoogleApiKey"),value:d.google||"",onChange:w=>{h(y=>({...y,google:w.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("google"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.google?s.jsx(kr,{className:"h-4 w-4 text-gray-400"}):s.jsx($t,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>v("google",d.google||""),disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:e("adminSettings.enterGoogleSearchEngineId"),value:d.googleSearchEngineId||"",onChange:w=>{h(y=>({...y,googleSearchEngineId:w.target.value})),i(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{onClick:()=>v("googleSearchEngineId",d.googleSearchEngineId||""),disabled:o||!a,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ut,{className:"w-4 h-4 animate-spin"}):e("adminSettings.test")})]})]})]})]}),s.jsxs("div",{className:"mt-8 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-3",children:e("adminSettings.importantNotes")}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote1")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote2")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote3")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote4")]})]})]})]})})]})})},n9=()=>{const{t:e}=xe();return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Te,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(pn,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.paymentGateways")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.paymentGatewayDescription")})]})]})})})},p4=({gateway:e,onToggle:t,onTest:r,onEdit:n})=>{var i,o;const{t:a}=xe();return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(un,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:e.displayName}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.provider})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-400 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20",title:a("adminSettings.testConnection"),children:s.jsx(M0,{className:"h-4 w-4"})}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.isEnabled,onChange:c=>t(e.id,c.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e.isEnabled?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.isEnabled?a("adminSettings.enabled"):a("adminSettings.disabled")})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.environment})})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(i=e.supportedMethods)==null?void 0:i.slice(0,4).map(c=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:c},c)),((o=e.supportedMethods)==null?void 0:o.length)>4&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:["+",e.supportedMethods.length-4]})]})}),s.jsx("div",{className:"flex space-x-3",children:s.jsx("button",{onClick:()=>n(e),className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:a("adminSettings.edit")})})]})};p4.propTypes={gateway:me.shape({id:me.number.isRequired,displayName:me.string.isRequired,provider:me.string.isRequired,description:me.string,isEnabled:me.bool.isRequired,environment:me.string.isRequired,supportedMethods:me.arrayOf(me.string)}).isRequired,onToggle:me.func.isRequired,onTest:me.func.isRequired,onEdit:me.func.isRequired};const a9=({onAddGateway:e})=>{const{t}=xe();return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(un,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("adminSettings.noPaymentGateways")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t("adminSettings.noPaymentGatewaysDescription")}),s.jsxs("button",{onClick:e,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(yr,{className:"h-4 w-4 mr-2"}),t("adminSettings.addFirstPaymentGateway")]})]})},i9=()=>{const{t:e}=xe();return s.jsx(s.Fragment,{children:s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5",children:""}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminSettings.paymentGatewayConfiguration")}),s.jsx("p",{children:e("adminSettings.paymentGatewayDescription")})]})]})})})},x4=({isOpen:e,onClose:t,gatewayData:r,onSave:n})=>{const{t:a}=xe(),[i,o]=S.useState({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}}),[c,d]=S.useState({}),[h,m]=S.useState(!1);S.useEffect(()=>{r&&e?o({displayName:r.displayName||"",provider:r.provider||"",description:r.description||"",environment:r.environment||"sandbox",isEnabled:r.isEnabled||!1,supportedMethods:r.supportedMethods||[],merchantId:r.merchantId||"",apiKey:r.apiKey||"",secretKey:r.secretKey||"",webhookSecret:r.webhookSecret||"",accessKey:r.accessKey||"",publishableKey:r.publishableKey||"",clientId:r.clientId||"",clientSecret:r.clientSecret||"",applicationId:r.applicationId||"",paymentGatewayId:r.paymentGatewayId||"",privateKey:r.privateKey||"",publicKey:r.publicKey||"",config:r.config||{}}):e&&o({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}})},[r,e]);const g=async y=>{y.preventDefault();try{await n(i),t()}catch(k){console.error("Error saving payment gateway:",k),Z.error(a("adminSettings.errorSavingPaymentGateway"))}},p=y=>{const{name:k,value:j,type:N,checked:C}=y.target;o(P=>({...P,[k]:N==="checkbox"?C:j}))},v=y=>{d(k=>({...k,[y]:!k[y]}))},x=async()=>{if(!i.provider){Z.error(a("adminSettings.pleaseSelectProvider"));return}m(!0);try{const y=await fetch("/api/payment-gateways/test",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({provider:i.provider,environment:i.environment,...i})}),k=await y.json();y.ok?Z.success(a("adminSettings.connectionTestSuccessful")):Z.error(k.message||a("adminSettings.connectionTestFailed"))}catch(y){console.error("Connection test error:",y),Z.error(a("adminSettings.connectionTestFailed"))}finally{m(!1)}},w=()=>{switch(i.provider){case"valitor":return[{name:"merchantId",label:a("adminSettings.merchantId"),type:"text",required:!0,placeholder:a("adminSettings.enterMerchantId")},{name:"apiKey",label:a("adminSettings.apiKey"),type:"password",required:!0,placeholder:a("adminSettings.enterApiKey")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"rapyd":return[{name:"accessKey",label:a("adminSettings.accessKey"),type:"password",required:!0,placeholder:a("adminSettings.enterAccessKey")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"stripe":return[{name:"publishableKey",label:a("adminSettings.publishableKey"),type:"password",required:!0,placeholder:a("adminSettings.enterPublishableKey")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"paypal":return[{name:"clientId",label:a("adminSettings.clientId"),type:"password",required:!0,placeholder:a("adminSettings.enterClientId")},{name:"clientSecret",label:a("adminSettings.clientSecret"),type:"password",required:!0,placeholder:a("adminSettings.enterClientSecret")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"netgiro":return[{name:"applicationId",label:a("adminSettings.applicationId"),type:"text",required:!0,placeholder:a("adminSettings.enterApplicationId")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"teya":return[{name:"merchantId",label:a("adminSettings.merchantId"),type:"text",required:!0,placeholder:a("adminSettings.enterMerchantId")},{name:"paymentGatewayId",label:a("adminSettings.paymentGatewayId"),type:"text",required:!0,placeholder:a("adminSettings.enterPaymentGatewayId")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"privateKey",label:a("adminSettings.privateKey"),type:"password",required:!1,placeholder:a("adminSettings.enterPrivateKey")},{name:"publicKey",label:a("adminSettings.publicKey"),type:"password",required:!1,placeholder:a("adminSettings.enterPublicKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];default:return[]}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r!=null&&r.id?a("adminSettings.editPaymentGateway"):a("adminSettings.addPaymentGateway")}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.displayName")}),s.jsx("input",{type:"text",name:"displayName",value:i.displayName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.provider")}),s.jsxs("select",{name:"provider",value:i.provider,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"",children:a("adminSettings.selectPaymentProvider")}),s.jsx("option",{value:"valitor",children:a("adminSettings.valitor")}),s.jsx("option",{value:"rapyd",children:a("adminSettings.rapyd")}),s.jsx("option",{value:"stripe",children:a("adminSettings.stripe")}),s.jsx("option",{value:"paypal",children:a("adminSettings.paypal")}),s.jsx("option",{value:"netgiro",children:a("adminSettings.netgiro")}),s.jsx("option",{value:"teya",children:a("adminSettings.teya")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.description")}),s.jsx("textarea",{name:"description",value:i.description,onChange:p,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.environment")}),s.jsxs("select",{name:"environment",value:i.environment,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"sandbox",children:a("adminSettings.sandbox")}),s.jsx("option",{value:"production",children:a("adminSettings.production")})]})]}),i.provider&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:i.provider?`${i.provider.charAt(0).toUpperCase()+i.provider.slice(1)} ${a("adminSettings.configuration")}`:a("adminSettings.configuration")}),s.jsxs("button",{type:"button",onClick:x,disabled:h,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[s.jsx(wy,{className:"h-4 w-4 mr-2"}),a(h?"adminSettings.testing":"adminSettings.testConnection")]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w().map(y=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[y.label,y.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:y.type==="password"&&!c[y.name]?"password":"text",name:y.name,value:i[y.name]||"",onChange:p,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:y.required,placeholder:a("adminSettings.enterFieldLabel",{fieldLabel:y.label.toLowerCase()})}),y.type==="password"&&s.jsx("button",{type:"button",onClick:()=>v(y.name),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:c[y.name]?s.jsx(kr,{className:"h-4 w-4"}):s.jsx($t,{className:"h-4 w-4"})})]})]},y.name))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.supportedPaymentMethods")}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["card","visa","mastercard","amex","diners","jcb","paypal","apple_pay","google_pay","bank_transfer","sepa","ideal","sofort","giropay","eps","bancontact"].map(y=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:i.supportedMethods.includes(y),onChange:k=>{k.target.checked?o(j=>({...j,supportedMethods:[...j.supportedMethods,y]})):o(j=>({...j,supportedMethods:j.supportedMethods.filter(N=>N!==y)}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 capitalize",children:y.replace("_"," ")})]},y))})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"isEnabled",checked:i.isEnabled,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:a("adminSettings.enabled")})]}),s.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.provider&&s.jsxs("p",{children:[s.jsx("strong",{children:"Provider:"})," ",i.provider.charAt(0).toUpperCase()+i.provider.slice(1)," |",s.jsx("strong",{children:" Environment:"})," ",i.environment]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md transition-colors",children:a("adminSettings.cancel")}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(Or,{className:"h-4 w-4 mr-2"}),r!=null&&r.id?a("adminSettings.updateGateway"):a("adminSettings.createGateway")]})]})]})]})]})}):null};x4.propTypes={isOpen:me.bool.isRequired,onClose:me.func.isRequired,gatewayData:me.shape({id:me.string,displayName:me.string,provider:me.string,description:me.string,environment:me.string,isEnabled:me.bool,supportedMethods:me.arrayOf(me.string),merchantId:me.string,apiKey:me.string,secretKey:me.string,webhookSecret:me.string,accessKey:me.string,publishableKey:me.string,clientId:me.string,clientSecret:me.string,applicationId:me.string,paymentGatewayId:me.string,privateKey:me.string,publicKey:me.string,config:me.object}),onSave:me.func.isRequired};const o9=()=>{const{t:e}=xe(),{user:t}=ke(y=>y.auth),[r,n]=S.useState(!0),[a,i]=S.useState([]),[o,c]=S.useState(!1),[d,h]=S.useState({});S.useEffect(()=>{m()},[]);const m=S.useCallback(async()=>{n(!0);try{const y=await fetch("/api/payment-gateways",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(y.ok){const k=await y.json();i(k.data.gateways||[])}}catch(y){console.error("Error loading payment gateways:",y),Z.error(e("adminSettings.errorLoadingPaymentGateways"))}finally{n(!1)}},[e]),g=async(y,k)=>{try{if((await fetch(`/api/payment-gateways/${y}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:k})})).ok)i(N=>N.map(C=>C.id===y?{...C,isEnabled:k}:C)),Z.success(e(k?"adminSettings.paymentGatewayEnabled":"adminSettings.paymentGatewayDisabled"));else throw new Error(e("adminSettings.errorTogglingPaymentGateway"))}catch(j){console.error("Error toggling payment gateway:",j),Z.error(e("adminSettings.errorTogglingPaymentGateway"))}},p=async y=>{try{const k=await fetch(`/api/payment-gateways/${y}/test`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(k.ok)Z.success(e("adminSettings.paymentGatewayTestSuccessful"));else{const j=await k.json();Z.error(e("adminSettings.paymentGatewayTestFailed",{message:j.message||"Unknown error"}))}}catch(k){console.error("Error testing payment gateway:",k),Z.error(e("adminSettings.errorTestingPaymentGateway"))}},v=y=>{h(y),c(!0)},x=async y=>{try{if((await fetch(`/api/payment-gateways/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(y)})).ok)await m(),Z.success(e("adminSettings.paymentGatewayUpdatedSuccessfully"));else throw new Error(e("adminSettings.errorUpdatingPaymentGateway"))}catch(k){throw console.error("Error updating payment gateway:",k),Z.error(e("adminSettings.errorUpdatingPaymentGateway")),k}},w=()=>{c(!1),h({})};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ut,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminSettings.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("adminSettings.noPermissionMessage")})]})})}):r?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(n9,{}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[s.jsx(i9,{}),a.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(y=>s.jsx(p4,{gateway:y,onToggle:g,onTest:p,onEdit:v},y.id))}):s.jsx(a9,{})]})}),s.jsx(x4,{isOpen:o,onClose:w,gatewayData:d,onSave:x})]})})},l9=()=>{const{t:e}=xe(),t=it(),{settings:r,isLoading:n,uploadProgress:a}=ke(y=>y.receiptSettings),[i,o]=S.useState({companyName:"",companyNameIs:"",companyAddress:"",companyAddressIs:"",companyPhone:"",companyEmail:"",companyWebsite:"",taxId:"",headerColor:"#1e40af",accentColor:"#3b82f6",fontFamily:"Inter, system-ui, sans-serif",fontSize:"14px",footerText:"",footerTextIs:"",showBarcode:!0,showQrCode:!0,template:"modern",paperSize:"80mm"}),[c,d]=S.useState(!0),[h,m]=S.useState(!1);S.useEffect(()=>{t(ec())},[t]),S.useEffect(()=>{r&&o({companyName:r.companyName||"",companyNameIs:r.companyNameIs||"",companyAddress:r.companyAddress||"",companyAddressIs:r.companyAddressIs||"",companyPhone:r.companyPhone||"",companyEmail:r.companyEmail||"",companyWebsite:r.companyWebsite||"",taxId:r.taxId||"",headerColor:r.headerColor||"#1e40af",accentColor:r.accentColor||"#3b82f6",fontFamily:r.fontFamily||"Inter, system-ui, sans-serif",fontSize:r.fontSize||"14px",footerText:r.footerText||"",footerTextIs:r.footerTextIs||"",showBarcode:r.showBarcode!==void 0?r.showBarcode:!0,showQrCode:r.showQrCode!==void 0?r.showQrCode:!0,template:r.template||"modern",paperSize:r.paperSize||"80mm"})},[r]);const g=(y,k)=>{o(j=>({...j,[y]:k})),t(VM({field:y,value:k}))},p=y=>{const k=y.target.files[0];if(k){if(k.size>5*1024*1024){Z.error(e("adminSettings.fileSizeTooLarge"));return}t(th(k))}},v=async()=>{m(!0);try{await t(eh(i)).unwrap(),Z.success(e("adminSettings.receiptSettingsSaved"))}catch(y){Z.error(y||e("adminSettings.failedToSaveSettings"))}finally{m(!1)}},x=()=>{window.confirm(e("adminSettings.confirmDeleteLogo"))&&t(rh())},w=()=>`
      <div class="receipt receipt-${i.template}" style="max-width: ${i.paperSize==="80mm"?"300px":"100%"}; margin: 0 auto; font-family: ${i.fontFamily}; font-size: ${i.fontSize}; background: white; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">
        <div class="header" style="background: ${i.headerColor}; color: white; text-align: center; padding: 15px;">
          <h1 style="font-size: 18px; font-weight: bold; margin: 0 0 5px 0;">${i.companyNameIs||i.companyName}</h1>
          ${i.companyAddress?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyAddressIs||i.companyAddress}</div>`:""}
          ${i.companyPhone?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyPhone}</div>`:""}
          ${i.companyEmail?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyEmail}</div>`:""}
        </div>
        
        <div class="content" style="padding: 15px;">
          <div class="order-info" style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e5e7eb;">
            <div style="font-weight: bold; font-size: 16px; color: ${i.accentColor}; margin-bottom: 5px;">Pntun: #12345</div>
            <div style="display: flex; justify-content: space-between; font-size: 12px; color: #6b7280;">
              <span>Dagsetning: ${new Date().toLocaleDateString()}</span>
              <span>Staa: CONFIRMED</span>
            </div>
          </div>

          <div class="items" style="margin-bottom: 15px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Vn - Rauvn</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 2  2,500 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">5,000 ISK</div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Bjr - Pilsner</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 1  800 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">800 ISK</div>
            </div>
          </div>

          <div class="totals" style="border-top: 2px solid ${i.accentColor}; padding-top: 10px; margin-top: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Vrur:</span>
              <span>5,800 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Sending:</span>
              <span>500 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 16px; color: ${i.headerColor}; border-top: 1px solid #e5e7eb; padding-top: 8px; margin-top: 8px;">
              <span>Heildarupph:</span>
              <span>6,300 ISK</span>
            </div>
          </div>
        </div>

        <div class="footer" style="text-align: center; padding: 15px; background: #f9fafb; font-size: 11px; color: #6b7280;">
          ${i.footerTextIs||i.footerText||"Takk fyrir viskiptin!"}
        </div>
      </div>
    `;return n&&!r?s.jsx(_e,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Wt,{className:"w-8 h-8 animate-spin text-blue-600"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.receiptSettings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.receiptSettingsDescription")})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(on,{className:"w-5 h-5 mr-2"}),"Company Information"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name (English)"}),s.jsx("input",{type:"text",value:i.companyName,onChange:y=>g("companyName",y.target.value),className:"input w-full",placeholder:"lfng"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name (Icelandic)"}),s.jsx("input",{type:"text",value:i.companyNameIs,onChange:y=>g("companyNameIs",y.target.value),className:"input w-full",placeholder:"lfng"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address (English)"}),s.jsx("input",{type:"text",value:i.companyAddress,onChange:y=>g("companyAddress",y.target.value),className:"input w-full",placeholder:"Reykjavk, Iceland"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address (Icelandic)"}),s.jsx("input",{type:"text",value:i.companyAddressIs,onChange:y=>g("companyAddressIs",y.target.value),className:"input w-full",placeholder:"Reykjavk, sland"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone"}),s.jsx("input",{type:"tel",value:i.companyPhone,onChange:y=>g("companyPhone",y.target.value),className:"input w-full",placeholder:"+354 555 1234"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:i.companyEmail,onChange:y=>g("companyEmail",y.target.value),className:"input w-full",placeholder:"info@olfong.is"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),s.jsx("input",{type:"url",value:i.companyWebsite,onChange:y=>g("companyWebsite",y.target.value),className:"input w-full",placeholder:"www.olfong.is"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tax ID (Kennitala)"}),s.jsx("input",{type:"text",value:i.taxId,onChange:y=>g("taxId",y.target.value),className:"input w-full",placeholder:"1234567890"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(pr,{className:"w-5 h-5 mr-2"}),"Logo"]}),s.jsxs("div",{className:"space-y-4",children:[r!=null&&r.logoUrl?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("img",{src:r.logoUrl,alt:"Company Logo",className:"w-20 h-20 object-contain border border-gray-200 rounded-lg"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current logo"}),s.jsxs("button",{onClick:x,className:"text-red-600 hover:text-red-800 text-sm flex items-center mt-1",children:[s.jsx(sr,{className:"w-4 h-4 mr-1"}),"Remove"]})]})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx(pr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:e("adminSettings.noLogoUploaded")}),s.jsx("p",{className:"text-sm text-gray-500",children:e("adminSettings.uploadLogoDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.uploadLogo")}),s.jsx("input",{type:"file",accept:"image/*",onChange:p,className:"input w-full"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e("adminSettings.uploadLogoFormats")})]}),a>0&&a<100&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${a}%`}})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(VA,{className:"w-5 h-5 mr-2"}),"Design & Colors"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Header Color"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:i.headerColor,onChange:y=>g("headerColor",y.target.value),className:"w-12 h-10 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:i.headerColor,onChange:y=>g("headerColor",y.target.value),className:"input flex-1"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Accent Color"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:i.accentColor,onChange:y=>g("accentColor",y.target.value),className:"w-12 h-10 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:i.accentColor,onChange:y=>g("accentColor",y.target.value),className:"input flex-1"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Font Family"}),s.jsxs("select",{value:i.fontFamily,onChange:y=>g("fontFamily",y.target.value),className:"input w-full",children:[s.jsx("option",{value:"Inter, system-ui, sans-serif",children:"Inter"}),s.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),s.jsx("option",{value:"Helvetica, sans-serif",children:"Helvetica"}),s.jsx("option",{value:"Georgia, serif",children:"Georgia"}),s.jsx("option",{value:"Times New Roman, serif",children:"Times New Roman"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Font Size"}),s.jsxs("select",{value:i.fontSize,onChange:y=>g("fontSize",y.target.value),className:"input w-full",children:[s.jsx("option",{value:"12px",children:"12px"}),s.jsx("option",{value:"14px",children:"14px"}),s.jsx("option",{value:"16px",children:"16px"}),s.jsx("option",{value:"18px",children:"18px"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(JA,{className:"w-5 h-5 mr-2"}),"Template & Layout"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["modern","classic","minimal"].map(y=>s.jsx("button",{onClick:()=>g("template",y),className:`p-3 rounded-lg border text-sm font-medium capitalize ${i.template===y?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:y},y))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Paper Size"}),s.jsxs("select",{value:i.paperSize,onChange:y=>g("paperSize",y.target.value),className:"input w-full",children:[s.jsx("option",{value:"80mm",children:"80mm (Thermal)"}),s.jsx("option",{value:"A4",children:"A4"}),s.jsx("option",{value:"letter",children:"Letter"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showBarcode",checked:i.showBarcode,onChange:y=>g("showBarcode",y.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"showBarcode",className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.showBarcode")})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showQrCode",checked:i.showQrCode,onChange:y=>g("showQrCode",y.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"showQrCode",className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.showQRCode")})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminSettings.footerMessages")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.footerTextEnglish")}),s.jsx("textarea",{value:i.footerText,onChange:y=>g("footerText",y.target.value),className:"input w-full h-20 resize-none",placeholder:e("adminSettings.footerTextEnPlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.footerTextIcelandic")}),s.jsx("textarea",{value:i.footerTextIs,onChange:y=>g("footerTextIs",y.target.value),className:"input w-full h-20 resize-none",placeholder:e("adminSettings.footerTextIsPlaceholder")})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:v,disabled:h,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:h?s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-4 h-4 mr-2"}),e("adminSettings.saveSettings")]})})})]}),s.jsx("div",{className:"lg:sticky lg:top-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx($t,{className:"w-5 h-5 mr-2"}),e("adminSettings.livePreview")]}),s.jsxs("button",{onClick:()=>d(!c),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(by,{className:"w-4 h-4 mr-1"}),e(c?"adminSettings.screenView":"adminSettings.printView")]})]}),s.jsx("div",{className:`border rounded-lg p-4 ${c?"bg-gray-50":"bg-white"}`,children:s.jsx("div",{dangerouslySetInnerHTML:{__html:w()},className:c?"transform scale-75 origin-top-left":""})})]})})]})})})]})})},c9=()=>{const e=it(),{settings:t,isLoading:r,testResult:n,isTesting:a}=ke(x=>x.smtpSettings),[i,o]=S.useState({host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"lfng",fromNameIs:"lfng",isEnabled:!1}),[c,d]=S.useState(!1),[h,m]=S.useState(!1);S.useEffect(()=>{e(dc())},[e]),S.useEffect(()=>{t&&o({host:t.host||"",port:t.port||587,secure:t.secure||!1,username:t.username||"",password:"",fromEmail:t.fromEmail||"",fromName:t.fromName||"lfng",fromNameIs:t.fromNameIs||"lfng",isEnabled:t.isEnabled||!1})},[t]);const g=(x,w)=>{o(y=>({...y,[x]:w})),e(g4({field:x,value:w}))},p=async()=>{m(!0);try{await e(uc(i)).unwrap(),Z.success("SMTP settings saved successfully!")}catch(x){Z.error(x||"Failed to save settings")}finally{m(!1)}},v=async()=>{if(!i.host||!i.username||!i.password||!i.fromEmail){Z.error("Please fill in all required fields before testing");return}try{await e(hc(i)).unwrap(),n!=null&&n.success&&Z.success("SMTP test successful!")}catch(x){Z.error(x||"SMTP test failed")}};return r&&!t?s.jsx(_e,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(Wt,{className:"w-8 h-8 animate-spin text-blue-600"})})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email Settings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure SMTP settings for sending receipt emails"})]})}),n&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center ${n.success?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300"}`,children:[n.success?s.jsx(wt,{className:"w-5 h-5 mr-3 flex-shrink-0"}):s.jsx(pt,{className:"w-5 h-5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:n.message}),n.details&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Host:"})," ",n.details.host]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Port:"})," ",n.details.port]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Secure:"})," ",n.details.secure?"Yes":"No"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Username:"})," ",n.details.username]}),s.jsxs("p",{children:[s.jsx("strong",{children:"From Email:"})," ",n.details.fromEmail]})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(I0,{className:"w-5 h-5 mr-2"}),"SMTP Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SMTP Host *"}),s.jsx("input",{type:"text",value:i.host,onChange:x=>g("host",x.target.value),className:"input w-full",placeholder:"smtp.gmail.com",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port *"}),s.jsx("input",{type:"number",value:i.port,onChange:x=>g("port",parseInt(x.target.value)),className:"input w-full",placeholder:"587",min:"1",max:"65535",required:!0})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"secure",checked:i.secure,onChange:x=>g("secure",x.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"secure",className:"text-sm text-gray-700 dark:text-gray-300",children:"Use TLS/SSL (recommended for port 587/465)"})]})})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Rc,{className:"w-5 h-5 mr-2"}),"Authentication"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",value:i.username,onChange:x=>g("username",x.target.value),className:"input pl-10 w-full",placeholder:"your-email@gmail.com",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(T0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:c?"text":"password",value:i.password,onChange:x=>g("password",x.target.value),className:"input pl-10 pr-10 w-full",placeholder:"Your app password",required:!0}),s.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?s.jsx(kr,{className:"w-4 h-4"}):s.jsx($t,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Zr,{className:"w-5 h-5 mr-2"}),"Sender Information"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Email Address *"}),s.jsx("input",{type:"email",value:i.fromEmail,onChange:x=>g("fromEmail",x.target.value),className:"input w-full",placeholder:"noreply@olfong.is",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (English)"}),s.jsx("input",{type:"text",value:i.fromName,onChange:x=>g("fromName",x.target.value),className:"input w-full",placeholder:"lfng"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (Icelandic)"}),s.jsx("input",{type:"text",value:i.fromNameIs,onChange:x=>g("fromNameIs",x.target.value),className:"input w-full",placeholder:"lfng"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isEnabled",checked:i.isEnabled,onChange:x=>g("isEnabled",x.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"isEnabled",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable email sending"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, receipt emails will be sent to customers"})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:v,disabled:a||!i.host||!i.username||!i.password||!i.fromEmail,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center",children:a?s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(wy,{className:"w-4 h-4 mr-2"}),"Test Connection"]})}),s.jsx("button",{onClick:p,disabled:h,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:h?s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})]})}),s.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-3",children:"Common SMTP Settings"}),s.jsxs("div",{className:"space-y-3 text-sm text-blue-800 dark:text-blue-200",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Gmail:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp.gmail.com"}),s.jsx("li",{children:" Port: 587 (TLS) or 465 (SSL)"}),s.jsx("li",{children:" Username: your-email@gmail.com"}),s.jsx("li",{children:" Password: Use App Password (not your regular password)"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Outlook/Hotmail:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp-mail.outlook.com"}),s.jsx("li",{children:" Port: 587"}),s.jsx("li",{children:" Username: your-email@outlook.com"}),s.jsx("li",{children:" Password: Your regular password"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Yahoo:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp.mail.yahoo.com"}),s.jsx("li",{children:" Port: 587 or 465"}),s.jsx("li",{children:" Username: your-email@yahoo.com"}),s.jsx("li",{children:" Password: Use App Password"})]})]})]})]})]})})},d9=()=>{const{t:e,isLoading:t}=xe(),r=it(),{banners:n,isLoading:a,error:i}=ke(T=>T.banners),{categories:o}=ke(T=>T.categories),{products:c}=ke(T=>T.products),[d,h]=S.useState(!1),[m,g]=S.useState(!1),[p,v]=S.useState(null),[x,w]=S.useState(!1),[y,k]=S.useState({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null,isHero:!1,backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:"",backgroundOpacity:1,marqueeText:"",marqueeTextIs:"",marqueeSpeed:50,marqueeCount:3,heroLogoUrl:"",heroButtonText:"",heroButtonTextIs:"",heroButtonLink:"",heroSubtitle:"",heroSubtitleIs:"",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0});S.useEffect(()=>{r(Wl({includeInactive:!0})),r(hi()),r(ln())},[r]),S.useEffect(()=>{const T=H=>{x&&!H.target.closest(".link-dropdown-container")&&w(!1)};return document.addEventListener("mousedown",T),()=>{document.removeEventListener("mousedown",T)}},[x]);const j=async T=>{T.preventDefault();try{p?await r(Zu({id:p.id,...y})):await r(Ku(y)),h(!1),v(null),k({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0})}catch(H){console.error("Error saving banner:",H)}},N=T=>{v(T),k({title:T.title||"",titleIs:T.titleIs||"",description:T.description||"",descriptionIs:T.descriptionIs||"",imageUrl:T.imageUrl||"",alt:T.alt||"",link:T.link||"",sortOrder:T.sortOrder||0,isFeatured:T.isFeatured||!1,featuredOrder:T.featuredOrder||null,isHero:T.isHero||!1,backgroundType:T.backgroundType||"gradient",gradientStartColor:T.gradientStartColor||"#374151",gradientEndColor:T.gradientEndColor||"#111827",gradientDirection:T.gradientDirection||"to-r",backgroundImageUrl:T.backgroundImageUrl||"",backgroundOpacity:T.backgroundOpacity!==void 0?T.backgroundOpacity:1,marqueeText:T.marqueeText||"",marqueeTextIs:T.marqueeTextIs||"",marqueeSpeed:T.marqueeSpeed||50,marqueeCount:T.marqueeCount||3,heroLogoUrl:T.heroLogoUrl||"",heroButtonText:T.heroButtonText||"",heroButtonTextIs:T.heroButtonTextIs||"",heroButtonLink:T.heroButtonLink||"",heroSubtitle:T.heroSubtitle||"",heroSubtitleIs:T.heroSubtitleIs||"",textColor:T.textColor||"#ffffff",buttonBgColor:T.buttonBgColor||"#ffffff",buttonTextColor:T.buttonTextColor||"#1f2937",overlayOpacity:T.overlayOpacity!==void 0?T.overlayOpacity:0}),h(!0)},C=async T=>{window.confirm(e("admin.banners.confirmDelete"))&&await r(Gu(T))},P=async T=>{await r(Yu(T))},E=async T=>{if(T.isFeatured)await r(Zl(T.id));else{const J=n.filter(D=>D.isFeatured).map(D=>D.featuredOrder).filter(Boolean);let $=1;for(;J.includes($);)$++;await r(Kl({id:T.id,featuredOrder:$}))}},I=T=>{T&&T.url&&k({...y,imageUrl:T.url}),g(!1)},M=()=>{h(!1),v(null),k({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null,isHero:!1,backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:"",backgroundOpacity:1,marqueeText:"",marqueeTextIs:"",marqueeSpeed:50,marqueeCount:3,heroLogoUrl:"",heroButtonText:"",heroButtonTextIs:"",heroButtonLink:"",heroSubtitle:"",heroSubtitleIs:"",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0})};return a||t?s.jsx(_e,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(nt,{size:"large"})})}):s.jsxs(_e,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("admin.banners.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("admin.banners.subtitle")})]}),s.jsxs("button",{onClick:()=>h(!0),className:"btn btn-primary flex items-center gap-2",children:[s.jsx(yr,{className:"w-4 h-4"}),e("admin.banners.addBanner")]})]}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(T=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[s.jsxs("div",{className:"relative h-48 bg-gray-100 dark:bg-gray-700",children:[T.imageUrl?s.jsx("img",{src:T.imageUrl,alt:T.alt||"Banner",className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(pr,{className:"w-12 h-12 text-gray-400"})}),s.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[T.isFeatured&&s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[e("admin.banners.featured")," #",T.featuredOrder]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:T.isActive?e("common.active"):e("common.inactive")})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:T.titleIs||T.title||e("admin.banners.untitled")}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:T.descriptionIs||T.description||e("admin.banners.noDescription")}),T.link&&s.jsxs("div",{className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 mb-3",children:[s.jsx(L0,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:T.link})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N(T),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:e("common.edit"),children:s.jsx(fn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>E(T),className:`p-2 transition-colors ${T.isFeatured?"text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"}`,title:T.isFeatured?e("admin.banners.removeFromFeatured"):e("admin.banners.addToFeatured"),children:s.jsx($t,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>P(T.id),className:`p-2 transition-colors ${T.isActive?"text-gray-400 hover:text-orange-600 dark:hover:text-orange-400":"text-gray-400 hover:text-green-600 dark:hover:text-green-400"}`,title:T.isActive?e("admin.banners.deactivate"):e("admin.banners.activate"),children:T.isActive?s.jsx(kr,{className:"w-4 h-4"}):s.jsx($t,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(T.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:e("common.delete"),children:s.jsx(sr,{className:"w-4 h-4"})})]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",T.sortOrder]})]})]})]},T.id))}),n.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("admin.banners.noBanners")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("admin.banners.noBannersDescription")}),s.jsx("button",{onClick:()=>h(!0),className:"btn btn-primary",children:e("admin.banners.addFirstBanner")})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e(p?"admin.banners.editBanner":"admin.banners.addBanner")}),s.jsx("button",{onClick:M,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.titleEn")}),s.jsx("input",{type:"text",value:y.title,onChange:T=>k({...y,title:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.titlePlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.titleIs")}),s.jsx("input",{type:"text",value:y.titleIs,onChange:T=>k({...y,titleIs:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.titlePlaceholderIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.descriptionEn")}),s.jsx("textarea",{value:y.description,onChange:T=>k({...y,description:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.descriptionPlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.descriptionIs")}),s.jsx("textarea",{value:y.descriptionIs,onChange:T=>k({...y,descriptionIs:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.descriptionPlaceholderIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("admin.banners.imageUrl")," *"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:e("admin.banners.imageHelpText")}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"url",value:y.imageUrl,onChange:T=>k({...y,imageUrl:T.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders.enterImageUrl"),required:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>g(!0),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(La,{className:"w-4 h-4"}),s.jsx("span",{children:e("adminMedia.select")})]}),s.jsxs("button",{type:"button",onClick:()=>window.open("/admin/media?collection=BANNERS","_blank"),className:"px-3 py-2 border border-blue-300 dark:border-blue-600 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(pr,{className:"w-4 h-4"}),s.jsx("span",{children:e("admin.banners.manageImages")})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.altText")}),s.jsx("input",{type:"text",value:y.alt,onChange:T=>k({...y,alt:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.altPlaceholder")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"link-dropdown-container",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.link")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"url",value:y.link,onChange:T=>k({...y,link:T.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders.enterWebsiteUrl")}),s.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:e("admin.banners.selectLink"),children:s.jsx(LA,{className:"w-4 h-4"})})]}),x&&s.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[o.map(T=>s.jsxs("div",{children:[s.jsx("button",{type:"button",onClick:()=>{k({...y,link:`/products?category=${T.name.toUpperCase()}`}),w(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ag,{className:"w-4 h-4"}),s.jsxs("span",{children:[T.nameIs||T.name," (",e("admin.banners.category"),")"]})]})}),T.subcategories&&T.subcategories.map(H=>s.jsx("button",{type:"button",onClick:()=>{k({...y,link:`/products?category=${T.name.toUpperCase()}&subcategory=${H.name.toUpperCase()}`}),w(!1)},className:"w-full px-6 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ag,{className:"w-3 h-3"}),s.jsxs("span",{children:[H.nameIs||H.name," (",e("admin.banners.subcategory"),")"]})]})},H.id))]},T.id)),c.slice(0,20).map(T=>s.jsx("button",{type:"button",onClick:()=>{k({...y,link:`/products/${T.id}`}),w(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ag,{className:"w-4 h-4"}),s.jsxs("span",{children:[T.nameIs||T.name," (",e("admin.banners.product"),")"]})]})},T.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.sortOrder")}),s.jsx("input",{type:"number",value:y.sortOrder,onChange:T=>k({...y,sortOrder:parseInt(T.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:y.isFeatured,onChange:T=>k({...y,isFeatured:T.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("admin.banners.featuredBanner")})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("admin.banners.featuredBannerHelp")})]}),y.isFeatured&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.featuredOrder")}),s.jsxs("select",{value:y.featuredOrder||"",onChange:T=>k({...y,featuredOrder:T.target.value?parseInt(T.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:e("admin.banners.selectPosition")}),s.jsxs("option",{value:"1",children:[e("admin.banners.position")," 1"]}),s.jsxs("option",{value:"2",children:[e("admin.banners.position")," 2"]}),s.jsxs("option",{value:"3",children:[e("admin.banners.position")," 3"]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4 mt-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:y.isHero,onChange:T=>k({...y,isHero:T.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Hero Banner (Homepage)"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use this banner as the hero section on the homepage"})]}),y.isHero&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Background Type"}),s.jsxs("select",{value:y.backgroundType,onChange:T=>k({...y,backgroundType:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"gradient",children:"Color Gradient"}),s.jsx("option",{value:"image",children:"Background Image"}),s.jsx("option",{value:"marquee",children:"Marquee Background"})]})]}),y.backgroundType==="gradient"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Color"}),s.jsx("input",{type:"color",value:y.gradientStartColor,onChange:T=>k({...y,gradientStartColor:T.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Color"}),s.jsx("input",{type:"color",value:y.gradientEndColor,onChange:T=>k({...y,gradientEndColor:T.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direction"}),s.jsxs("select",{value:y.gradientDirection,onChange:T=>k({...y,gradientDirection:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"to-r",children:"Left to Right"}),s.jsx("option",{value:"to-l",children:"Right to Left"}),s.jsx("option",{value:"to-t",children:"Bottom to Top"}),s.jsx("option",{value:"to-b",children:"Top to Bottom"}),s.jsx("option",{value:"to-br",children:"Top-Left to Bottom-Right"}),s.jsx("option",{value:"to-bl",children:"Top-Right to Bottom-Left"}),s.jsx("option",{value:"to-tr",children:"Bottom-Left to Top-Right"}),s.jsx("option",{value:"to-tl",children:"Bottom-Right to Top-Left"})]})]})]}),y.backgroundType==="image"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Background Image URL"}),s.jsx("input",{type:"url",value:y.backgroundImageUrl,onChange:T=>k({...y,backgroundImageUrl:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter background image URL"})]}),y.backgroundType==="marquee"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Marquee Text (English)"}),s.jsx("input",{type:"text",value:y.marqueeText,onChange:T=>k({...y,marqueeText:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter scrolling text"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Marquee Text (Icelandic)"}),s.jsx("input",{type:"text",value:y.marqueeTextIs,onChange:T=>k({...y,marqueeTextIs:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Slu inn rllunartext"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Speed (px/sec)"}),s.jsx("input",{type:"number",value:y.marqueeSpeed,onChange:T=>k({...y,marqueeSpeed:parseInt(T.target.value)||50}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"10",max:"200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Repeat Count"}),s.jsx("input",{type:"number",value:y.marqueeCount,onChange:T=>k({...y,marqueeCount:parseInt(T.target.value)||3}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"1",max:"10"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Subtitle (English)"}),s.jsx("input",{type:"text",value:y.heroSubtitle,onChange:T=>k({...y,heroSubtitle:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter hero subtitle"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Subtitle (Icelandic)"}),s.jsx("input",{type:"text",value:y.heroSubtitleIs,onChange:T=>k({...y,heroSubtitleIs:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Slu inn undirtitil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Logo URL"}),s.jsx("input",{type:"url",value:y.heroLogoUrl,onChange:T=>k({...y,heroLogoUrl:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter logo URL (leave empty for default)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text (EN)"}),s.jsx("input",{type:"text",value:y.heroButtonText,onChange:T=>k({...y,heroButtonText:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Button text"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text (IS)"}),s.jsx("input",{type:"text",value:y.heroButtonTextIs,onChange:T=>k({...y,heroButtonTextIs:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Texti  hnapp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Link"}),s.jsx("input",{type:"text",value:y.heroButtonLink,onChange:T=>k({...y,heroButtonLink:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"/products"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Text Color"}),s.jsx("input",{type:"color",value:y.textColor,onChange:T=>k({...y,textColor:T.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Background"}),s.jsx("input",{type:"color",value:y.buttonBgColor,onChange:T=>k({...y,buttonBgColor:T.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text Color"}),s.jsx("input",{type:"color",value:y.buttonTextColor,onChange:T=>k({...y,buttonTextColor:T.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Overlay Opacity (",y.overlayOpacity,")"]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:y.overlayOpacity,onChange:T=>k({...y,overlayOpacity:parseFloat(T.target.value)}),className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Adds a dark overlay to improve text readability"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:M,className:"btn btn-outline",children:e("common.cancel")}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",children:[s.jsx(Or,{className:"w-4 h-4"}),e(p?"common.update":"common.create")]})]})]})]})})}),s.jsx(Ty,{isOpen:m,onClose:()=>g(!1),onSelect:I,collection:"BANNERS",multiple:!1})]})},lh=ve("chat/fetchConversations",async(e={})=>{var r;const t=await ue.get("/chat/conversations",{params:e});return((r=t.data)==null?void 0:r.data)||t.data}),ap=ve("chat/fetchMessages",async e=>{var r;const t=await ue.get(`/chat/conversations/${e}/messages`);return((r=t.data)==null?void 0:r.data)||t.data}),ch=ve("chat/sendMessage",async({conversationId:e,content:t,messageType:r="TEXT",metadata:n})=>(await ue.post(`/chat/conversations/${e}/messages`,{content:t,messageType:r,metadata:n})).data.data),u9=ve("chat/createConversation",async e=>(await ue.post("/chat/conversations",e)).data.data),h9=ve("chat/joinConversation",async e=>(await ue.post(`/chat/conversations/${e}/join`)).data.data),y4=ve("chat/updateConversationStatus",async({conversationId:e,status:t,priority:r})=>(await ue.patch(`/chat/conversations/${e}`,{status:t,priority:r})).data.data),m9=ve("chat/fetchUnreadCount",async()=>(await ue.get("/chat/unread-count")).data.unreadCount),b4=ve("chat/markMessagesAsRead",async e=>(await ue.post(`/chat/conversations/${e}/messages/read`)).data),v4=Vr({name:"chat",initialState:{conversations:[],currentConversation:null,messages:[],unreadCount:0,isLoading:!1,isTyping:!1,otherUserTyping:!1,error:null,isWidgetOpen:!1,isWidgetMinimized:!1,filters:{status:"ACTIVE",type:"",priority:""},pagination:{page:1,limit:20,total:0,pages:0}},reducers:{toggleWidget:e=>{e.isWidgetOpen=!e.isWidgetOpen,e.isWidgetOpen&&(e.isWidgetMinimized=!1)},minimizeWidget:e=>{e.isWidgetMinimized=!e.isWidgetMinimized},closeWidget:e=>{e.isWidgetOpen=!1,e.isWidgetMinimized=!1},setCurrentConversation:(e,t)=>{e.currentConversation=t.payload,e.messages=[]},addMessage:(e,t)=>{e.messages.push(t.payload)},updateMessage:(e,t)=>{const{messageId:r,updates:n}=t.payload,a=e.messages.findIndex(i=>i.id===r);a!==-1&&(e.messages[a]={...e.messages[a],...n})},markMessageAsRead:(e,t)=>{const r=t.payload,n=e.messages.find(a=>a.id===r);n&&(n.isRead=!0,n.readAt=new Date().toISOString())},markAllMessagesAsRead:(e,t)=>{const r=t.payload;e.messages.forEach(n=>{n.conversationId===r&&(n.isRead=!0,n.readAt=new Date().toISOString())})},setTyping:(e,t)=>{e.isTyping=t.payload},setOtherUserTyping:(e,t)=>{e.otherUserTyping=t.payload},handleNewMessage:(e,t)=>{var i;const{message:r,conversationId:n}=t.payload;((i=e.currentConversation)==null?void 0:i.id)===n&&e.messages.push(r);const a=e.conversations.findIndex(o=>o.id===n);a!==-1&&(e.conversations[a].lastMessageAt=r.createdAt,e.conversations[a].messages=[r]),r.senderId!==t.payload.currentUserId&&(e.unreadCount+=1)},handleConversationUpdate:(e,t)=>{var a;const r=t.payload,n=e.conversations.findIndex(i=>i.id===r.id);n!==-1&&(e.conversations[n]=r),((a=e.currentConversation)==null?void 0:a.id)===r.id&&(e.currentConversation=r)},handleUserTyping:(e,t)=>{const{userId:r,isTyping:n,currentUserId:a}=t.payload;r!==a&&(e.otherUserTyping=n)},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload},e.pagination.page=1},clearFilters:e=>{e.filters={status:"ACTIVE",type:"",priority:""},e.pagination.page=1},setPage:(e,t)=>{e.pagination.page=t.payload},clearError:e=>{e.error=null},resetChat:e=>{e.conversations=[],e.currentConversation=null,e.messages=[],e.unreadCount=0,e.isWidgetOpen=!1,e.isWidgetMinimized=!1,e.error=null}},extraReducers:e=>{e.addCase(lh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(lh.fulfilled,(t,r)=>{t.isLoading=!1,t.conversations=r.payload.conversations,t.pagination=r.payload.pagination}).addCase(lh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(ap.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ap.fulfilled,(t,r)=>{t.isLoading=!1,t.messages=r.payload.messages}).addCase(ap.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(ch.pending,t=>{t.error=null}).addCase(ch.fulfilled,(t,r)=>{t.messages.push(r.payload)}).addCase(ch.rejected,(t,r)=>{t.error=r.error.message}).addCase(u9.fulfilled,(t,r)=>{t.conversations.unshift(r.payload),t.currentConversation=r.payload,t.messages=[]}).addCase(h9.fulfilled,(t,r)=>{const n=r.payload,a=t.conversations.findIndex(i=>i.id===n.id);a!==-1&&(t.conversations[a]=n)}).addCase(y4.fulfilled,(t,r)=>{var i;const n=r.payload,a=t.conversations.findIndex(o=>o.id===n.id);a!==-1&&(t.conversations[a]=n),((i=t.currentConversation)==null?void 0:i.id)===n.id&&(t.currentConversation=n)}).addCase(m9.fulfilled,(t,r)=>{t.unreadCount=r.payload}).addCase(b4.fulfilled,(t,r)=>{t.unreadCount=Math.max(0,t.unreadCount-t.messages.filter(n=>!n.isRead).length)})}}),{setCurrentConversation:f9,handleNewMessage:Ij}=v4.actions,g9=v4.reducer,p9=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:n})=>{const{t:a}=xe();return s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:a("adminChat.searchConversations"),value:e,onChange:i=>t(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("select",{value:r,onChange:i=>n(i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:a("adminChat.allStatuses")}),s.jsx("option",{value:"ACTIVE",children:a("adminChat.active")}),s.jsx("option",{value:"ARCHIVED",children:a("adminChat.archived")}),s.jsx("option",{value:"RESOLVED",children:a("adminChat.resolved")})]})})]})})},x9=({conversation:e,isSelected:t,onSelect:r})=>{var d,h,m;const n=g=>{switch(g){case"ACTIVE":return s.jsx(wt,{className:"h-4 w-4 text-green-500"});case"ARCHIVED":return s.jsx(pt,{className:"h-4 w-4 text-gray-500"});case"RESOLVED":return s.jsx(wt,{className:"h-4 w-4 text-blue-500"});default:return s.jsx(Ht,{className:"h-4 w-4 text-gray-400"})}},a=(d=e.participants.find(g=>g.user.role==="CUSTOMER"))==null?void 0:d.user,i=(h=e.messages)==null?void 0:h[0],o=((m=e._count)==null?void 0:m.messages)||0,c=g=>{const p=new Date(g),x=(new Date-p)/(1e3*60*60);return x<1?"Just now":x<24?`${Math.floor(x)}h ago`:x<48?"Yesterday":p.toLocaleDateString()};return s.jsx("div",{onClick:r,className:`p-4 cursor-pointer border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${t?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":""}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx(Ur,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(a==null?void 0:a.fullName)||(a==null?void 0:a.username)||"Unknown Customer"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[n(e.status),o>0&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:o})]})]}),i&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:i.content}),s.jsx("div",{className:"flex items-center justify-between mt-2",children:s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c(i?i.createdAt:e.createdAt)})})]})]})})},y9=({isLoading:e,selectedConversation:t,onSelectConversation:r,filteredConversations:n})=>{const{t:a}=xe();return e?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(nt,{size:"small"})}):n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Lo,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("adminChat.noConversations")})]}):s.jsx("div",{className:"space-y-1",children:n.map(i=>s.jsx(x9,{conversation:i,isSelected:(t==null?void 0:t.id)===i.id,onSelect:()=>r(i)},i.id))})},b9=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:n,conversations:a,isLoading:i,selectedConversation:o,onSelectConversation:c,filteredConversations:d})=>s.jsxs("div",{className:"w-full sm:w-1/3 lg:w-1/4 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex flex-col h-full",children:[s.jsx(p9,{searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:n}),s.jsx(y9,{conversations:a,isLoading:i,selectedConversation:o,onSelectConversation:c,filteredConversations:d})]}),v9=({conversation:e,otherUserTyping:t,onUpdateStatus:r})=>{var i,o;const{t:n}=xe(),a=(i=e.participants.find(c=>c.user.role==="CUSTOMER"))==null?void 0:i.user;return s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>window.history.back(),className:"sm:hidden p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(pn,{className:"h-5 w-5"})}),s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx(Ur,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(a==null?void 0:a.fullName)||(a==null?void 0:a.username)||n("adminChat.unknownCustomer")}),((o=e.metadata)==null?void 0:o.orderNumber)&&s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[s.jsx(Bl,{className:"h-3 w-3 mr-1"}),n("order.orderNumber"),": ",e.metadata.orderNumber]})}),t&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:n("adminChat.customerTyping")})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("select",{value:e.status,onChange:c=>r(e.id,c.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"ACTIVE",children:n("adminChat.active")}),s.jsx("option",{value:"ARCHIVED",children:n("adminChat.archived")}),s.jsx("option",{value:"RESOLVED",children:n("adminChat.resolved")})]})})]})})},w9=({message:e})=>{const{user:t}=ke(a=>a.auth),r=t&&e.senderId===t.id,n=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s.jsx("div",{className:`flex ${r?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${r?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[s.jsx("p",{className:"text-sm",children:e.content}),s.jsx("p",{className:`text-xs mt-1 ${r?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:n(e.createdAt)})]})})},k9=({messages:e,isLoading:t})=>{const{t:r}=xe(),n=S.useRef(null),a=()=>{var i;(i=n.current)==null||i.scrollIntoView({behavior:"smooth"})};return S.useEffect(()=>{a()},[e]),t?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(nt,{size:"small"})}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Lo,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r("adminChat.noMessages")})]}):s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"space-y-4",children:[e.map(i=>s.jsx(w9,{message:i},i.id)),s.jsx("div",{ref:n})]})})},j9=({newMessage:e,onSendMessage:t,onTyping:r,onKeyPress:n,isLoading:a,currentConversation:i})=>{const{t:o}=xe();return s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"flex items-end space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s.jsx(HA,{className:"h-5 w-5"})}),s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:e,onChange:r,onKeyPress:n,placeholder:o(i?"chat.typeMessage":"chat.initializing"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:1,disabled:a})}),s.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s.jsx(ZA,{className:"h-5 w-5"})}),s.jsx("button",{onClick:t,disabled:!e.trim()||!i||a,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:s.jsx(vy,{className:"h-5 w-5"})})]})})},N9=({conversation:e})=>{var r;const{t}=xe();return(r=e.metadata)!=null&&r.orderId?s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-blue-50 dark:bg-blue-900/20 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Bl,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t("adminChat.orderDetails")})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:[t("order.orderNumber"),":"]})," ",e.metadata.orderNumber]}),s.jsxs("p",{children:[s.jsxs("strong",{children:[t("chat.topics.topic"),":"]})," ",e.metadata.topic]}),e.metadata.customTopic&&s.jsxs("p",{children:[s.jsxs("strong",{children:[t("chat.customTopic"),":"]})," ",e.metadata.customTopic]})]})]}):null},_9=()=>{const{t:e}=xe();return s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Lo,{className:"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminChat.selectConversation")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat.selectConversationMessage")})]})})},S9=({currentConversation:e,messages:t,newMessage:r,setNewMessage:n,isLoading:a,otherUserTyping:i,onSendMessage:o,onTyping:c,onKeyPress:d,onUpdateStatus:h})=>e?s.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-gray-800 h-full rounded-r-lg",children:[s.jsx(v9,{conversation:e,otherUserTyping:i,onUpdateStatus:h}),s.jsx(N9,{conversation:e}),s.jsx(k9,{messages:t,isLoading:a}),s.jsx(j9,{newMessage:r,setNewMessage:n,onSendMessage:o,onTyping:c,onKeyPress:d,isLoading:a,currentConversation:e})]}):s.jsx(_9,{}),C9=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(I=>I.auth),{conversations:n,currentConversation:a,messages:i,isLoading:o,otherUserTyping:c}=ke(I=>I.chat),[d,h]=S.useState(""),[m,g]=S.useState("ACTIVE"),[p,v]=S.useState(""),[x,w]=S.useState(null),y=S.useRef(null);S.useEffect(()=>{if(r&&!["ADMIN","DELIVERY"].includes(r.role)){Xe.error(e("adminChat.accessDeniedMessage"));return}},[r,e]),S.useEffect(()=>{r&&["ADMIN","DELIVERY"].includes(r.role)&&t(lh())},[t,r]),S.useEffect(()=>{if(!r)return;const I=T=>{t(Ij({message:T,currentUserId:r.id}))},M=T=>{t(Ij({message:{...T,isRead:!0,readAt:T.readAt},currentUserId:r.id}))};return ot.on("new-message",I),ot.on("message-read",M),()=>{ot.removeListener("new-message",I),ot.removeListener("message-read",M)}},[t,r]);const k=n.filter(I=>{var H;const M=!d||I.participants.some(J=>{var $,D;return(($=J.user.fullName)==null?void 0:$.toLowerCase().includes(d.toLowerCase()))||((D=J.user.username)==null?void 0:D.toLowerCase().includes(d.toLowerCase()))})||((H=I.messages)==null?void 0:H.some(J=>J.content.toLowerCase().includes(d.toLowerCase()))),T=!m||I.status===m;return M&&T}),j=async I=>{w(I),await t(f9(I)).unwrap();try{await t(b4(I.id)).unwrap()}catch(M){console.warn("Failed to mark messages as read:",M)}},N=async()=>{if(!(!p.trim()||!a))try{await t(ch({conversationId:a.id,content:p.trim(),messageType:"TEXT"})).unwrap(),v(""),a&&ot.emitTypingStop(a.id,r.id)}catch{Xe.error(e("adminChat.sendMessageError"))}},C=I=>{v(I.target.value),a&&ot.emitTypingStart(a.id,r.id),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{a&&ot.emitTypingStop(a.id,r.id)},1e3)},P=I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),N())},E=async(I,M)=>{try{await t(y4({conversationId:I,status:M})).unwrap(),Xe.success(e("adminChat.statusUpdated"))}catch{Xe.error(e("adminChat.updateStatusError"))}};return!r||!["ADMIN","DELIVERY"].includes(r.role)?s.jsx(_e,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e("adminChat.accessDenied")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat.accessDeniedMessage")})]})})}):s.jsx(_e,{children:s.jsxs("div",{className:"h-[calc(100vh-2rem)] flex flex-col mt-0",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 rounded-t-lg",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4",children:s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminChat.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminChat.subtitle")})]})})})}),s.jsx("div",{className:"flex-1 flex flex-col h-[calc(100vh-2rem)] bg-white dark:bg-gray-800 border-l border-r border-b border-gray-200 dark:border-gray-700 rounded-b-lg",children:s.jsxs("div",{className:"flex flex-1 overflow-hidden h-full",children:[s.jsx(b9,{searchTerm:d,setSearchTerm:h,statusFilter:m,setStatusFilter:g,conversations:n,isLoading:o,selectedConversation:x,onSelectConversation:j,filteredConversations:k}),s.jsx(S9,{currentConversation:a,messages:i,newMessage:p,setNewMessage:v,isLoading:o,otherUserTyping:c,onSendMessage:N,onTyping:C,onKeyPress:P,onUpdateStatus:E})]})})]})})},P9=()=>{const{t:e}=xe(),[t,r]=S.useState(!1),[n,a]=S.useState(null),i=async()=>{r(!0),a("insert");try{const h=await(await fetch("/api/admin/demo-data/insert",{method:"POST",headers:{"Content-Type":"application/json"}})).json();h.success?Xe.success(e("demoData.insertSuccess")):Xe.error(h.message||e("demoData.insertError"))}catch(d){console.error("Error inserting demo data:",d),Xe.error(e("demoData.insertError"))}finally{r(!1),a(null)}},o=async()=>{r(!0),a("remove");try{const h=await(await fetch("/api/admin/demo-data/remove",{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();h.success?Xe.success(e("demoData.removeSuccess")):Xe.error(h.message||e("demoData.removeError"))}catch(d){console.error("Error removing demo data:",d),Xe.error(e("demoData.removeError"))}finally{r(!1),a(null)}},c=[{type:"customers",count:5,description:e("demoData.customersDescription"),details:["Anna Johnson (anna.johnson@example.com)","Bjrn Andersson (bjorn.andersson@example.com)","Kristn Petersen (kristin.petersen@example.com)","Magns orsteinsson (magnus.thorsteinsson@example.com)","Sara Gumundsdttir (sara.gudmundsdottir@example.com)"]},{type:"addresses",count:5,description:e("demoData.addressesDescription"),details:["Reykjavk addresses for each customer","Default shipping addresses","Various locations around Reykjavk"]},{type:"orders",count:8,description:e("demoData.ordersDescription"),details:["Various order statuses (PENDING, CONFIRMED, PREPARING, etc.)","Different shipping methods (delivery & pickup)","Mixed product types (wine, beer, nicotine, food)","Realistic order amounts and dates"]},{type:"orderItems",count:15,description:e("demoData.orderItemsDescription"),details:["Multiple items per order","Various quantities and prices","Links orders to products correctly"]}];return s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("demoData.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2",children:e("demoData.description")})]})})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData.overview")}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.map(d=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:e("demoData.${item","type}")}),s.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-base font-medium px-3 py-1 rounded-lg",children:d.count})]}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 mb-4",children:d.description}),s.jsx("ul",{className:"text-sm text-gray-500 dark:text-gray-500 space-y-2",children:d.details.map((h,m)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-500 mt-1",children:""}),h]},m))})]},d.type))})]})}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(On,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200",children:e("demoData.warningTitle")}),s.jsx("p",{className:"text-base text-yellow-700 dark:text-yellow-300 mt-2",children:e("demoData.warningMessage")})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData.actions")}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[s.jsxs("button",{onClick:i,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&n==="insert"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsx(qh,{className:"h-5 w-5"}),e("demoData.insertButton")]}),s.jsxs("button",{onClick:o,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&n==="remove"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsx(sr,{className:"h-5 w-5"}),e("demoData.removeButton")]})]}),s.jsxs("div",{className:"mt-6 text-base text-gray-600 dark:text-gray-400",children:[s.jsxs("p",{className:"flex items-center gap-3 mb-3",children:[s.jsx(wt,{className:"h-5 w-5 text-green-500"}),e("demoData.insertNote")]}),s.jsxs("p",{className:"flex items-center gap-3",children:[s.jsx(lf,{className:"h-5 w-5 text-red-500"}),e("demoData.removeNote")]})]})]})})]})})},cr="http://192.168.8.62:5000/api";class E9{getAuthHeaders(){const t=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}async getAllTranslations(t=null,r=null){var n;try{if(console.log("TranslationService: getAllTranslations called with language:",t),t){const d=`${cr}/translations/language/${t}`;console.log("TranslationService: Making request to:",d);const h=await fetch(d,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("TranslationService: Response status:",h.status),console.log("TranslationService: Response ok:",h.ok),!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const m=await h.json();return console.log("TranslationService: Response data received, success:",m.success),console.log("TranslationService: Response data length:",(n=m.data)==null?void 0:n.length),m}const a=new URLSearchParams;r&&a.append("format",r);const i=`${cr}/translations${a.toString()?`?${a.toString()}`:""}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(a){throw console.error("Error fetching translations:",a),a}}async getTranslationsBySection(t=null){try{const r=new URLSearchParams;t&&r.append("language",t),r.append("format","grouped");const n=`${cr}/translations?${r.toString()}`,a=await fetch(n,{method:"GET",headers:this.getAuthHeaders()});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error fetching translations by section:",r),r}}async searchTranslations(t,r=null,n=null){try{const a=new URLSearchParams;r&&a.append("language",r),n&&a.append("section",n);const i=`${cr}/translations/search/${encodeURIComponent(t)}?${a.toString()}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(a){throw console.error("Error searching translations:",a),a}}async getTranslationStats(){try{const t=`${cr}/translations/stats`,r=await fetch(t,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching translation stats:",t),t}}async getRecentChanges(t=10){try{const r=`${cr}/translations/recent?limit=${t}`,n=await fetch(r,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error fetching recent changes:",r),r}}async getTranslation(t,r){try{const n=`${cr}/translations/${encodeURIComponent(t)}/${r}`,a=await fetch(n,{method:"GET",headers:this.getAuthHeaders()});if(!a.ok){if(a.status===404)return null;throw new Error(`HTTP error! status: ${a.status}`)}return await a.json()}catch(n){throw console.error("Error fetching translation:",n),n}}async createTranslation(t){try{const r=`${cr}/translations`,n=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error creating translation:",r),r}}async upsertTranslation(t){try{const r=`${cr}/translations/upsert`,n=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error upserting translation:",r),r}}async getAllTranslationsMultiLang(){try{const t=`${cr}/translations/all`,r=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching multi-lang translations:",t),t}}async updateTranslation(t,r){try{const n=`${cr}/translations/${t}`,a=await fetch(n,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(r)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(n){throw console.error("Error updating translation:",n),n}}async deleteTranslation(t){try{const r=`${cr}/translations/${t}`,n=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error deleting translation:",r),r}}async bulkUpdateTranslations(t){try{const r=`${cr}/translations/bulk-update`,n=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({updates:t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error bulk updating translations:",r),r}}async bulkDeleteTranslations(t){try{const r=`${cr}/translations/bulk-delete`,n=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders(),body:JSON.stringify({ids:t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error bulk deleting translations:",r),r}}async exportTranslations(t="json",r=null){try{const n=new URLSearchParams;n.append("format",t),r&&n.append("language",r);const a=`${cr}/translations/export?${n.toString()}`,i=await fetch(a,{method:"GET",headers:this.getAuthHeaders()});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.blob(),c=window.URL.createObjectURL(o),d=document.createElement("a");return d.href=c,d.download=`translations_${r||"all"}_${new Date().toISOString().split("T")[0]}.${t}`,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(c),{success:!0,message:"Export completed successfully"}}catch(n){throw console.error("Error exporting translations:",n),n}}async importTranslations(t,r="json"){try{const n=`${cr}/translations/import`,a=await fetch(n,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({data:t,format:r})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(n){throw console.error("Error importing translations:",n),n}}async loadTranslationsForI18next(t){try{const r=await this.getAllTranslations(t);if(r.success&&r.data){const n=this.transformToNestedObject(r.data);return localStorage.setItem(`translations_${t}`,JSON.stringify(n)),localStorage.setItem(`translations_${t}_timestamp`,Date.now().toString()),n}return console.warn("No translations found in API response"),{}}catch(r){return console.error("Failed to load translations from API:",r),{}}}transformToNestedObject(t){const r={};return t.forEach(n=>{const a=n.key.split(".");let i=r;for(let o=0;o<a.length-1;o++)(!i[a[o]]||typeof i[a[o]]!="object")&&(i[a[o]]={}),i=i[a[o]];i[a[a.length-1]]=n.value}),r}isCacheValid(t,r=24*60*60*1e3){try{const n=localStorage.getItem(`translations_${t}_timestamp`);return n?Date.now()-parseInt(n)<r:!1}catch{return!1}}getCachedTranslations(t){try{const r=localStorage.getItem(`translations_${t}`);return r?JSON.parse(r):null}catch(r){return console.error("Error getting cached translations:",r),null}}clearCache(t=null){try{t?(localStorage.removeItem(`translations_${t}`),localStorage.removeItem(`translations_${t}_timestamp`)):Object.keys(localStorage).forEach(r=>{r.startsWith("translations_")&&localStorage.removeItem(r)})}catch(r){console.error("Error clearing cache:",r)}}async refreshTranslations(t,r){try{this.clearCache(t);const n=await this.loadTranslationsForI18next(t);return r&&n&&(r.addResourceBundle(t,"translation",n,!0,!0),r.reloadResources(t)),n}catch(n){throw console.error("Error refreshing translations:",n),n}}}const Ga=new E9,L9=()=>{const{t:e}=xe(),t=S.useRef(null),[r,n]=S.useState([]),[a,i]=S.useState([]),[o,c]=S.useState(null),[d,h]=S.useState(!0),[m,g]=S.useState(!1),[p,v]=S.useState(""),[x,w]=S.useState(1),[y,k]=S.useState(null),[j,N]=S.useState({key:"",is:"",en:""}),[C,P]=S.useState(!1),[E,I]=S.useState(!0),M=20,T=S.useCallback(async()=>{h(!0);try{const V=await Ga.getAllTranslationsMultiLang();V.success&&(n(V.data.is||[]),i(V.data.en||[]))}catch(V){console.error("Error fetching translations:",V),Z.error(e("adminTranslations.errorFetching"))}finally{h(!1)}},[e]),H=S.useCallback(async()=>{g(!0);try{const V=await fetch("/api/translations/stats");if(V.ok){const ne=await V.json();c(ne.data)}}catch(V){console.error("Error fetching stats:",V)}finally{g(!1)}},[]);S.useEffect(()=>{T(),H()},[T,H]);const J=S.useMemo(()=>{const V=new Map;return r.forEach(ne=>{V.set(ne.key,{key:ne.key,is:ne.value,isId:ne.id,en:"",enId:null})}),a.forEach(ne=>{const pe=V.get(ne.key);pe?(pe.en=ne.value,pe.enId=ne.id):V.set(ne.key,{key:ne.key,is:"",isId:null,en:ne.value,enId:ne.id})}),Array.from(V.values()).sort((ne,pe)=>ne.key.localeCompare(pe.key))},[r,a]),$=S.useMemo(()=>{if(!p)return J;const V=p.toLowerCase();return J.filter(ne=>ne.key.toLowerCase().includes(V)||ne.is.toLowerCase().includes(V)||ne.en.toLowerCase().includes(V))},[J,p]),D=S.useMemo(()=>{const V=(x-1)*M;return $.slice(V,V+M)},[$,x]),W=Math.ceil($.length/M),X=V=>{k(V.key),N({key:V.key,is:V.is,en:V.en})},G=async()=>{try{const V=[];j.is&&V.push(Ga.upsertTranslation({key:j.key,value:j.is,locale:"is"})),j.en&&V.push(Ga.upsertTranslation({key:j.key,value:j.en,locale:"en"})),await Promise.all(V),Z.success(e("adminTranslations.translationUpdated")),k(null),T(),H()}catch(V){console.error("Error saving translation:",V),Z.error(e("adminTranslations.errorSaving"))}},R=()=>{k(null),N({key:"",is:"",en:""})},O=async V=>{if(window.confirm(e("adminTranslations.confirmDelete")))try{const ne=[];V.isId&&ne.push(Ga.deleteTranslation(V.isId)),V.enId&&ne.push(Ga.deleteTranslation(V.enId)),await Promise.all(ne),Z.success(e("adminTranslations.translationDeleted")),T(),H()}catch(ne){console.error("Error deleting translation:",ne),Z.error(e("adminTranslations.errorDeleting"))}},q=async V=>{V.preventDefault();try{const ne=[];j.is&&ne.push(Ga.createTranslation({key:j.key,value:j.is,locale:"is"})),j.en&&ne.push(Ga.createTranslation({key:j.key,value:j.en,locale:"en"})),await Promise.all(ne),Z.success(e("adminTranslations.translationAdded")),P(!1),N({key:"",is:"",en:""}),T(),H()}catch(ne){console.error("Error adding translation:",ne),Z.error(e("adminTranslations.errorSaving"))}},Q=async V=>{try{const ne=await fetch(`/api/translations/export?format=${V}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!ne.ok)throw new Error("Export failed");const pe=await ne.blob(),ye=window.URL.createObjectURL(pe),z=document.createElement("a");z.href=ye,z.download=`translations.${V}`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(ye),Z.success(e("adminTranslations.exportSuccess"))}catch(ne){console.error("Error exporting:",ne),Z.error(e("adminTranslations.exportError"))}},le=async V=>{var pe;const ne=(pe=V.target.files)==null?void 0:pe[0];if(ne){try{const ye=await ne.text(),z=ne.name.endsWith(".csv")?"csv":"json",ge=z==="json"?JSON.parse(ye):ye,Me=await fetch("/api/translations/import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({data:ge,format:z})});if(!Me.ok)throw new Error("Import failed");const De=await Me.json();Z.success(`${e("adminTranslations.importSuccess")} (${De.data.imported})`),T(),H()}catch(ye){console.error("Error importing:",ye),Z.error(e("adminTranslations.importError"))}t.current&&(t.current.value="")}};return d?s.jsx(_e,{children:s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Wt,{className:"w-8 h-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-3 text-lg text-gray-700 dark:text-gray-300",children:e("common.loading")})]})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminTranslations.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminTranslations.subtitle")})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("button",{onClick:()=>I(!E),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[s.jsx(Vh,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e(E?"adminTranslations.hideStats":"adminTranslations.showStats")})]}),s.jsxs("button",{onClick:T,className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors",children:[s.jsx(ut,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.refresh")})]}),s.jsx("div",{className:"relative",children:s.jsxs("button",{onClick:()=>Q("json"),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[s.jsx(IA,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.exportJSON")})]})}),s.jsxs("button",{onClick:()=>Q("csv"),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[s.jsx(AA,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.exportCSV")})]}),s.jsxs("label",{className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 cursor-pointer transition-colors",children:[s.jsx(La,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.import")}),s.jsx("input",{ref:t,type:"file",accept:".json,.csv",onChange:le,className:"hidden"})]}),s.jsxs("button",{onClick:()=>{P(!0),N({key:"",is:"",en:""})},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx(yr,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.addTranslation")})]})]})]})})}),E&&o&&s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Vh,{className:"w-5 h-5 mr-2"}),e("adminTranslations.statistics")]}),m&&s.jsx(Wt,{className:"w-5 h-5 animate-spin text-blue-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:e("adminTranslations.totalEntries")}),s.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:o.total})]}),s.jsx(Hh,{className:"w-10 h-10 text-blue-400 dark:text-blue-600"})]})}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:e("adminTranslations.icelandic")}),s.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:o.byLocale.is}),s.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[o.completeness.icelandic,"%"]})]}),s.jsx(wt,{className:"w-10 h-10 text-green-400 dark:text-green-600"})]})}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:e("adminTranslations.english")}),s.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:o.byLocale.en}),s.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:[o.completeness.english,"%"]})]}),s.jsx(wt,{className:"w-10 h-10 text-purple-400 dark:text-purple-600"})]})}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:e("adminTranslations.uniqueKeys")}),s.jsx("p",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:o.uniqueKeys}),s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:[o.completeness.overall,"% ",e("adminTranslations.complete")]})]}),s.jsx(pt,{className:"w-10 h-10 text-amber-400 dark:text-amber-600"})]})})]}),(o.missingTranslations.missingInEnglish>0||o.missingTranslations.missingInIcelandic>0)&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-2",children:e("adminTranslations.missingTranslations")}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[e("adminTranslations.missingInEnglish"),": ",s.jsx("span",{className:"font-bold",children:o.missingTranslations.missingInEnglish})]})}),s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[e("adminTranslations.missingInIcelandic"),": ",s.jsx("span",{className:"font-bold",children:o.missingTranslations.missingInIcelandic})]})})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:e("adminTranslations.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",value:p,onChange:V=>{v(V.target.value),w(1)}})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/4",children:e("adminTranslations.key")}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/3",children:e("adminTranslations.icelandic")}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/3",children:e("adminTranslations.english")}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-24",children:e("adminTranslations.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:D.length>0?D.map(V=>s.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:y===V.key?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"text",value:j.key,disabled:!0,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-600 dark:text-white"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("textarea",{value:j.is,onChange:ne=>N({...j,is:ne.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",rows:2})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("textarea",{value:j.en,onChange:ne=>N({...j,en:ne.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",rows:2})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:G,className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:e("common.save"),children:s.jsx(Or,{className:"w-4 h-4"})}),s.jsx("button",{onClick:R,className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",title:e("common.cancel"),children:s.jsx(ct,{className:"w-4 h-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:V.key}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:V.is||s.jsx("span",{className:"text-red-500 italic",children:e("adminTranslations.missing")})}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:V.en||s.jsx("span",{className:"text-red-500 italic",children:e("adminTranslations.missing")})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>X(V),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:e("common.edit"),children:s.jsx(qA,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>O(V),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:e("common.delete"),children:s.jsx(sr,{className:"w-4 h-4"})})]})})]})},V.key)):s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:e("adminTranslations.noTranslationsFound")})})})]})}),W>1&&s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:[e("common.showing")," ",(x-1)*M+1," ",e("common.to")," ",Math.min(x*M,$.length)," ",e("common.of")," ",$.length," ",e("common.results")]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>w(V=>Math.max(V-1,1)),disabled:x===1,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e("common.previous")}),s.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300",children:[x," / ",W]}),s.jsx("button",{onClick:()=>w(V=>Math.min(V+1,W)),disabled:x===W,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e("common.next")})]})]})]})}),C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("adminTranslations.addTranslation")}),s.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ct,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:q,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminTranslations.key")," *"]}),s.jsx("input",{type:"text",value:j.key,onChange:V=>N({...j,key:V.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"e.g., common.greeting"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminTranslations.icelandic")}),s.jsx("textarea",{value:j.is,onChange:V=>N({...j,is:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Icelandic translation"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminTranslations.english")}),s.jsx("textarea",{value:j.en,onChange:V=>N({...j,en:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"English translation"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e("common.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s.jsx("span",{children:e("common.add")})})]})]})]})})]})})},T9=({media:e,selectedItems:t,onSelectItem:r,onEdit:n,onDelete:a,formatFileSize:i,formatDate:o})=>{const{t:c}=xe(),[d,h]=S.useState(new Set),m=p=>t.includes(p.id),g=p=>{h(v=>{const x=new Set(v);return x.delete(p),x})};return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(p=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white flex items-center justify-center relative",children:p.mimeType.startsWith("image/")?s.jsxs(s.Fragment,{children:[d.has(p.id)&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-gray-600",children:s.jsx(Dc,{className:"w-6 h-6 animate-spin text-gray-400"})}),s.jsx("img",{src:p.thumbnailUrl||p.url,alt:p.alt||p.originalName,className:`w-full h-full object-contain transition-opacity duration-300 ${d.has(p.id)?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:()=>g(p.id),onError:()=>g(p.id)})]}):s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(pr,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("span",{className:"text-xs",children:p.mimeType.split("/")[1].toUpperCase()})]})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("input",{type:"checkbox",checked:m(p),onChange:v=>{v.target.checked?r(p.id,!0):r(p.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[s.jsx("button",{onClick:()=>n(p),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-gray-50 dark:hover:bg-gray-600",title:c("adminMedia.edit"),children:s.jsx(fn,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>a(p.id),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600",title:c("adminMedia.delete"),children:s.jsx(sr,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate mb-1",children:p.originalName}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(p.size)}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(p.createdAt)})]})]},p.id))})},I9=({media:e,selectedItems:t,onSelectItem:r,onEdit:n,onDelete:a,formatFileSize:i,formatDate:o})=>{const{t:c}=xe(),d=h=>t.includes(h.id);return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:s.jsx("input",{type:"checkbox",checked:t.length===e.length&&e.length>0,onChange:h=>{h.target.checked?r(e.map(m=>m.id),!0):r([],!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:c("adminMedia.preview")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:c("adminMedia.name")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:c("adminMedia.type")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:c("adminMedia.size")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:c("adminMedia.uploaded")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:c("adminMedia.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(h=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:d(h),onChange:m=>{m.target.checked?r(h.id,!0):r(h.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center",children:h.mimeType.startsWith("image/")?s.jsx("img",{src:h.thumbnailUrl||h.url,alt:h.alt||h.originalName,className:"w-full h-full object-cover rounded",loading:"lazy"}):s.jsx(pr,{className:"w-6 h-6 text-gray-400"})})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h.originalName}),h.alt&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.alt})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:h.mimeType}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i(h.size)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o(h.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>n(h),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:s.jsx(fn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>a(h.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(sr,{className:"h-4 w-4"})})]})})]},h.id))})]})})})},A9=({searchQuery:e,onSearchChange:t,viewMode:r,onViewModeChange:n,selectedItems:a,onBulkDelete:i,collections:o,selectedCollection:c,onCollectionChange:d,onUploadClick:h})=>{const{t:m}=xe();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(g=>s.jsxs("button",{onClick:()=>d(g.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===g.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"mr-2",children:g.icon}),g.name]},g.id))})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:m("adminMedia.searchMedia"),value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>n("grid"),className:`p-2 rounded-md ${r==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(af,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>n("list"),className:`p-2 rounded-md ${r==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(of,{className:"h-4 w-4"})}),a.length>0&&s.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx("span",{className:"mr-2",children:""}),m("adminMedia.deleteSelected")," (",a.length,")"]}),s.jsxs("button",{onClick:h,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx(La,{className:"h-4 w-4 mr-2"}),m("adminMedia.upload")]})]})]})})]})},M9=({isOpen:e,onClose:t,media:r,onSave:n})=>{const{t:a}=xe(),[i,o]=S.useState({alt:"",caption:"",description:""}),[c,d]=S.useState(!1);S.useEffect(()=>{r&&e&&o({alt:r.alt||"",caption:r.caption||"",description:r.description||""})},[r,e]);const h=async g=>{if(g.preventDefault(),!!r){d(!0);try{const p=await fetch(`/api/media/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)});if(p.ok){const v=await p.json();n(v.data.media),t(),Z.success("Media updated successfully")}else throw new Error("Failed to update media")}catch(p){console.error("Update media error:",p),Z.error("Failed to update media")}finally{d(!1)}}},m=(g,p)=>{o(v=>({...v,[g]:p}))};return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a("adminMedia.editMedia")}),s.jsx("button",{type:"button",onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(ct,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:r.mimeType.startsWith("image/")?s.jsx("img",{src:r.thumbnailUrl||r.url,alt:r.alt||r.originalName,className:"w-full h-full object-cover rounded-lg"}):s.jsx("div",{className:"text-center text-gray-400",children:s.jsx("span",{className:"text-sm",children:r.mimeType.split("/")[1].toUpperCase()})})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.originalName}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[r.mimeType,"  ",O9(r.size)]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminMedia.altText")}),s.jsx("input",{type:"text",value:i.alt,onChange:g=>m("alt",g.target.value),placeholder:a("adminMedia.altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("adminMedia.altTextDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminMedia.caption")}),s.jsx("input",{type:"text",value:i.caption,onChange:g=>m("caption",g.target.value),placeholder:a("adminMedia.captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("adminMedia.captionDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminMedia.description")}),s.jsx("textarea",{value:i.description,onChange:g=>m("description",g.target.value),placeholder:a("adminMedia.descriptionPlaceholder"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("adminMedia.descriptionDescription")})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:a("adminMedia.cancel")}),s.jsx("button",{type:"submit",disabled:c,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Dc,{className:"h-4 w-4 mr-2 animate-spin"}),a("adminMedia.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(Or,{className:"h-4 w-4 mr-2"}),a("adminMedia.save")]})})]})]})})})},O9=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+r[n]},R9=()=>{const{t:e}=xe(),{user:t}=ke(R=>R.auth),[r,n]=S.useState(!0),[a,i]=S.useState([]),[o,c]=S.useState("PRODUCTS"),[d,h]=S.useState("grid"),[m,g]=S.useState(""),[p,v]=S.useState([]),[,x]=S.useState(!1),[w,y]=S.useState(!1),[k,j]=S.useState(null),N=(R,O)=>{Array.isArray(R)?v(R):v(O?q=>[...q,R]:q=>q.filter(Q=>Q!==R))},C=R=>{c(R),T(O=>({...O,page:1})),v([])},P=R=>{g(R)},E=R=>{h(R)},I=()=>{window.open("/admin/media/upload","_blank")},[M,T]=S.useState({page:1,limit:20,total:0,pages:0}),H=[{id:"PRODUCTS",name:e("adminMedia.products"),icon:""},{id:"CATEGORIES",name:e("adminMedia.categories"),icon:""},{id:"PROFILE",name:e("adminMedia.profile"),icon:""},{id:"DOCUMENTS",name:e("adminMedia.documents"),icon:""},{id:"VIDEOS",name:e("adminMedia.videos"),icon:""}],J=S.useCallback(async()=>{n(!0);try{const R=new URLSearchParams({collection:o,page:M.page,limit:M.limit,...m&&{search:m}}),O=await fetch(`/api/media?${R}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(O.ok){const q=await O.json();i(q.data.media),T(q.data.pagination)}else throw new Error("Failed to load media")}catch(R){console.error("Load media error:",R),Z.error("Failed to load media")}finally{n(!1)}},[o,M.page,M.limit,m]);S.useEffect(()=>{J()},[J]);const $=async R=>{if(window.confirm(e("adminMedia.confirmDelete")))try{if((await fetch(`/api/media/${R}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)i(q=>q.filter(Q=>Q.id!==R)),Z.success("Media deleted successfully");else throw new Error("Failed to delete media")}catch(O){console.error("Delete media error:",O),Z.error("Failed to delete media")}},D=async()=>{if(p.length!==0&&window.confirm(e("adminMedia","confirmBulkDelete",{count:p.length})))try{const R=await fetch("/api/media/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({ids:p})});if(R.ok){const O=await R.json();Z.success(`Deleted ${O.data.deletedCount} of ${p.length} items`),v([]),J()}else throw new Error("Failed to bulk delete media")}catch(R){console.error("Bulk delete error:",R),Z.error("Failed to bulk delete media")}},W=R=>{j(R),y(!0)},X=R=>{if(R===0)return"0 Bytes";const O=1024,q=["Bytes","KB","MB","GB"],Q=Math.floor(Math.log(R)/Math.log(O));return parseFloat((R/Math.pow(O,Q)).toFixed(2))+" "+q[Q]},G=R=>new Date(R).toLocaleDateString();return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(On,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):s.jsx(_e,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminNavigation.media")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminMedia.manageMediaDescription")})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>window.open("/admin/media/upload","_blank"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(La,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadMedia")]})})]}),s.jsx(A9,{searchQuery:m,onSearchChange:P,viewMode:d,onViewModeChange:E,selectedItems:p,onBulkDelete:D,collections:H.map(R=>({...R,name:R.name,...o===R.id&&{count:M.total}})),selectedCollection:o,onCollectionChange:C,onUploadClick:I}),r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(nt,{size:"large"})}):a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(pr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia.noMediaFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia.noMediaDescription")}),s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(yr,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadFirstMedia")]})]}):s.jsxs(s.Fragment,{children:[d==="grid"?s.jsx(T9,{media:a,selectedItems:p,onSelectItem:N,onEdit:W,onDelete:$,formatFileSize:X,formatDate:G}):s.jsx(I9,{media:a,selectedItems:p,onSelectItem:N,onEdit:W,onDelete:$,formatFileSize:X,formatDate:G}),M.pages>1&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e("adminMedia.showing")," ",(M.page-1)*M.limit+1," ",e("adminMedia.to")," ",Math.min(M.page*M.limit,M.total)," ",e("adminMedia.of")," ",M.total," ",e("adminMedia.results")]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>T(R=>({...R,page:R.page-1})),disabled:M.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia.previous")}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[M.page," / ",M.pages]}),s.jsx("button",{onClick:()=>T(R=>({...R,page:R.page+1})),disabled:M.page===M.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia.next")})]})]})]}),s.jsx(M9,{isOpen:w,onClose:()=>{y(!1),j(null)},media:k,onSave:R=>{i(O=>O.map(q=>q.id===R.id?R:q)),y(!1),j(null)}})]})})},D9=()=>{const{t:e}=xe(),{user:t}=ke(G=>G.auth),[r,n]=S.useState("PRODUCTS"),[a,i]=S.useState([]),[o,c]=S.useState(!1),[d,h]=S.useState({}),[m,g]=S.useState({}),[p,v]=S.useState({}),[x,w]=S.useState({}),[y,k]=S.useState({}),j=[{id:"PRODUCTS",name:e("adminMedia.products"),icon:"",accept:"image/*"},{id:"CATEGORIES",name:e("adminMedia.categories"),icon:"",accept:"image/*"},{id:"BANNERS",name:e("adminMedia.banners"),icon:"",accept:"image/*"},{id:"PROFILE",name:e("adminMedia.profile"),icon:"",accept:"image/*"},{id:"DOCUMENTS",name:e("adminMedia.documents"),icon:"",accept:".pdf,.doc,.docx"},{id:"VIDEOS",name:e("adminMedia.videos"),icon:"",accept:"video/*"}],N=j.find(G=>G.id===r),C=S.useCallback(G=>{const R=Array.from(G.target.files),O=[],q=[];R.forEach(Q=>{const le=$(r);if(Q.size>le){q.push(`${Q.name}: File too large (max ${W(le)})`);return}if(!D(Q,r)){q.push(`${Q.name}: Invalid file type`);return}O.push(Q)}),q.length>0&&Z.error(q.join(`
`)),O.length>0&&(i(Q=>[...Q,...O]),O.forEach(Q=>{if(Q.type.startsWith("image/")){const le=new FileReader;le.onload=V=>{k(ne=>({...ne,[Q.name+Q.size]:V.target.result}))},le.readAsDataURL(Q)}}))},[r]),P=S.useCallback(G=>{G.preventDefault();const R=Array.from(G.dataTransfer.files);C({target:{files:R}})},[C]),E=S.useCallback(G=>{G.preventDefault()},[]),I=G=>{const R=a[G],O=R.name+R.size;i(q=>q.filter((Q,le)=>le!==G)),k(q=>{const Q={...q};return delete Q[O],Q}),g(q=>{const Q={...q};return delete Q[G],Q}),v(q=>{const Q={...q};return delete Q[G],Q}),w(q=>{const Q={...q};return delete Q[G],Q})},M=(G,R)=>{g(O=>({...O,[G]:R}))},T=(G,R)=>{v(O=>({...O,[G]:R}))},H=(G,R)=>{w(O=>({...O,[G]:R}))},J=async()=>{if(a.length===0){Z.error("Please select files to upload");return}c(!0);const G=[];for(let q=0;q<a.length;q++){const Q=a[q],le=new FormData;le.append("file",Q),le.append("collection",r),m[q]&&le.append("alt",m[q]),p[q]&&le.append("caption",p[q]),x[q]&&le.append("description",x[q]);try{h(ne=>({...ne,[q]:0}));const V=await fetch("/api/media/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:le});if(V.ok){const ne=await V.json();G.push({success:!0,data:ne.data}),h(pe=>({...pe,[q]:100}))}else{const ne=await V.json();G.push({success:!1,error:ne.message||"Upload failed"})}}catch(V){console.error("Upload error:",V),G.push({success:!1,error:V.message})}}c(!1),h({});const R=G.filter(q=>q.success).length,O=G.filter(q=>!q.success).length;R>0&&(Z.success(`Successfully uploaded ${R} file(s)`),i([]),g({}),v({}),w({})),O>0&&Z.error(`Failed to upload ${O} file(s)`)},$=G=>({PRODUCTS:5242880,CATEGORIES:2097152,BANNERS:10485760,PROFILE:2097152,DOCUMENTS:10485760,VIDEOS:52428800})[G]||5*1024*1024,D=(G,R)=>{var q;return((q={PRODUCTS:["image/jpeg","image/png","image/webp","image/gif"],CATEGORIES:["image/jpeg","image/png","image/webp"],BANNERS:["image/jpeg","image/png","image/webp"],PROFILE:["image/jpeg","image/png","image/webp"],DOCUMENTS:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],VIDEOS:["video/mp4","video/webm","video/avi"]}[R])==null?void 0:q.includes(G.type))||!1},W=G=>{if(G===0)return"0 Bytes";const R=1024,O=["Bytes","KB","MB","GB"],q=Math.floor(Math.log(G)/Math.log(R));return parseFloat((G/Math.pow(R,q)).toFixed(2))+" "+O[q]},X=G=>{if(G.type.startsWith("image/")){const R=G.name+G.size;return y[R]?s.jsx("img",{src:y[R],alt:G.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}):s.jsx(pr,{className:"w-8 h-8 text-blue-500"})}return G.type.startsWith("video/")?s.jsx(XA,{className:"w-8 h-8 text-red-500"}):s.jsx(MA,{className:"w-8 h-8 text-gray-500"})};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(_e,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(On,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):s.jsx(_e,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminMedia.uploadMedia")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminMedia.uploadMediaDescription")})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminMedia.selectCollection")}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:j.map(G=>s.jsxs("button",{onClick:()=>n(G.id),className:`p-4 rounded-lg border-2 transition-colors ${r===G.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"text-2xl mb-2",children:G.icon}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:G.name}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Max: ",W($(G.id))]})]},G.id))})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{onDrop:P,onDragOver:E,className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors",children:[s.jsx(La,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia.dragDropFiles")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia.orClickToSelect")}),s.jsx("input",{type:"file",multiple:!0,accept:N==null?void 0:N.accept,onChange:C,className:"hidden",id:"file-upload"}),s.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer",children:[s.jsx(yr,{className:"h-4 w-4 mr-2"}),e("adminMedia.selectFiles")]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e("adminMedia.supportedFormats"),": ",N==null?void 0:N.accept]})]})}),a.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminMedia.selectedFiles")," (",a.length,")"]}),s.jsx("div",{className:"space-y-4",children:a.map((G,R)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[X(G),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:G.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:W(G.size)}),d[R]!==void 0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[d[R]<100?s.jsx(Dc,{className:"w-4 h-4 animate-spin text-blue-500"}):s.jsx(wt,{className:"w-4 h-4 text-green-500"}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[d[R],"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${d[R]}%`}})})]})]})]}),s.jsx("button",{onClick:()=>I(R),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",disabled:o,children:s.jsx(ct,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.altText")}),s.jsx("input",{type:"text",value:m[R]||"",onChange:O=>M(R,O.target.value),placeholder:e("adminMedia.altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.caption")}),s.jsx("input",{type:"text",value:p[R]||"",onChange:O=>T(R,O.target.value),placeholder:e("adminMedia.captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.description")}),s.jsx("input",{type:"text",value:x[R]||"",onChange:O=>H(R,O.target.value),placeholder:e("adminMedia.descriptionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]})]})]},R))}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:J,disabled:o||a.length===0,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Dc,{className:"h-4 w-4 mr-2 animate-spin"}),e("adminMedia.uploading")]}):s.jsxs(s.Fragment,{children:[s.jsx(La,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadFiles")," (",a.length,")"]})})})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(On,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminMedia.uploadGuidelines")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[e("adminMedia.maxFileSize"),": ",W($(r))]}),s.jsxs("li",{children:[e("adminMedia.supportedFormats"),": ",N==null?void 0:N.accept]}),s.jsx("li",{children:e("adminMedia.automaticOptimization")}),s.jsx("li",{children:e("adminMedia.altTextRecommendation")})]})]})]})})]})})},F9=()=>{const{t:e}=xe(),t=it(),{user:r}=ke(I=>I.auth),{orders:n,isLoading:a}=ke(I=>I.orders),[i,o]=S.useState([]),[c,d]=S.useState(!1),[h,m]=S.useState(null),[g,p]=S.useState(!1),[v,x]=S.useState("");S.useEffect(()=>{(r==null?void 0:r.role)==="DELIVERY"?t(fo({deliveryPersonId:r.id})):(r==null?void 0:r.role)==="ADMIN"&&t(fo())},[t,r]),S.useEffect(()=>{if(n){if((r==null?void 0:r.role)==="DELIVERY"){const I=n.filter(M=>{var T;return((T=M.deliveryPerson)==null?void 0:T.id)===(r==null?void 0:r.id)&&["CONFIRMED","PREPARING","OUT_FOR_DELIVERY"].includes(M.status)});o(I)}else if((r==null?void 0:r.role)==="ADMIN"){const I=n.filter(M=>M.deliveryMethod==="DELIVERY"&&["CONFIRMED","PREPARING","OUT_FOR_DELIVERY"].includes(M.status));o(I)}}},[n,r]),S.useEffect(()=>{let I;return c&&navigator.geolocation&&(I=navigator.geolocation.watchPosition(()=>{},M=>{console.error("Error getting location:",M),Z.error("Villa vi a f stasetningu")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e4})),()=>{I&&navigator.geolocation.clearWatch(I)}},[c,t,r,e]);const w=I=>{switch(I){case"CONFIRMED":return s.jsx(Ue,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Nr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(wt,{className:"w-5 h-5 text-green-600"});default:return s.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},y=I=>{switch(I){case"CONFIRMED":return"Stafest";case"PREPARING":return"Undirbningur";case"OUT_FOR_DELIVERY":return" afhendingu";case"DELIVERED":return"Afhent";default:return I}},k=I=>{switch(I){case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=async()=>{try{await t(zl({orderId:h.id,status:v})).unwrap(),Z.success("Staa uppfrt!"),p(!1),m(null),x("")}catch(I){Z.error(I.message||"Villa kom upp")}},N=()=>{d(!c),c?Z.info("Stasetning stvu"):Z.success("Stasetning byrja")},C=I=>{m(I),x("OUT_FOR_DELIVERY"),p(!0)},P=I=>{m(I),x("DELIVERED"),p(!0)},E=[{value:"CONFIRMED",label:"Stafest"},{value:"PREPARING",label:"Undirbningur"},{value:"OUT_FOR_DELIVERY",label:" afhendingu"},{value:"DELIVERED",label:"Afhent"}];return(r==null?void 0:r.role)!=="DELIVERY"&&(r==null?void 0:r.role)!=="ADMIN"?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("delivery.title")}),s.jsxs("div",{className:"card p-8",children:[s.jsx(pt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Agangur bannaur"}),s.jsx("p",{className:"text-gray-600",children:" hefur ekki leyfi til a skoa essa su."})]})]})})}):a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})}):s.jsx(_e,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(r==null?void 0:r.role)==="ADMIN"?"Yfirlit afhendinga":"Afhendingarbor"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:(r==null?void 0:r.role)==="ADMIN"?"Fylgstu me llum afhendingum  kerfinu.":"Velkomin, "+((r==null?void 0:r.fullName)||(r==null?void 0:r.username))+". Stjrnau afhendingum num."})]}),(r==null?void 0:r.role)==="DELIVERY"&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${c?"bg-green-500 animate-pulse":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:c?"Stasetning virk":"Stasetning virk"})]}),s.jsxs("button",{onClick:N,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${c?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200`,children:[c?s.jsx(WA,{className:"w-4 h-4 mr-2"}):s.jsx(qh,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:c?"Stva":"Byrja"})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Ue,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:(r==null?void 0:r.role)==="ADMIN"?"Allar pantanir":"thlutaar pantanir"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.length})]})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(Nr,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:" afhendingu"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(I=>I.status==="OUT_FOR_DELIVERY").length})]})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(wt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Afhent  dag"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(I=>I.status==="DELIVERED"&&new Date(I.updatedAt).toDateString()===new Date().toDateString()).length})]})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(Ht,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Bur afhendingar"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(I=>["CONFIRMED","PREPARING"].includes(I.status)).length})]})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(r==null?void 0:r.role)==="ADMIN"?"Afhendingarpantanir":"thlutaar pantanir"}),i.length===0?s.jsxs("div",{className:"card p-8 text-center",children:[s.jsx(Nr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:(r==null?void 0:r.role)==="ADMIN"?"Engar afhendingarpantanir":"Engar pantanir thlutaar"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:(r==null?void 0:r.role)==="ADMIN"?"Engar afhendingarpantanir fundust  kerfinu.":"Engar pantanir hafa veri thlutaar r enn."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(I=>{var M,T,H;return s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pntun #",I.orderNumber]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(I.createdAt).toLocaleDateString()})]}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${k(I.status)}`,children:[w(I.status),s.jsx("span",{children:y(I.status)})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Ur,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-900",children:((M=I.user)==null?void 0:M.fullName)||((T=I.user)==null?void 0:T.username)})]}),((H=I.user)==null?void 0:H.phone)&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(wi,{className:"w-4 h-4 text-gray-400"}),s.jsx("a",{href:`tel:${I.user.phone}`,className:"text-primary-600 hover:text-primary-700",children:I.user.phone})]})]}),I.deliveryMethod==="DELIVERY"&&I.address&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(mn,{className:"w-4 h-4 text-gray-400 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Afhendingarstaur"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[I.address.street,s.jsx("br",{}),I.address.city,", ",I.address.postalCode]})]})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Vrur:"}),s.jsxs("div",{className:"space-y-1",children:[I.items.slice(0,3).map((J,$)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[J.quantity,"x ",J.product.nameIs||J.product.name]}),s.jsxs("span",{className:"font-medium",children:[(J.price*J.quantity).toLocaleString()," ",e("common.currency")]})]},$)),I.items.length>3&&s.jsx("p",{className:"text-xs text-gray-500",children:"fleiri"})]})]}),s.jsx("div",{className:"border-t pt-4 mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Samtals:"}),s.jsxs("span",{className:"text-lg font-bold text-primary-600",children:[I.totalAmount.toLocaleString()," ",e("common.currency")]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[I.status==="CONFIRMED"&&s.jsxs("button",{onClick:()=>C(I),className:"btn btn-primary flex-1 flex items-center justify-center space-x-2",children:[s.jsx(qh,{className:"w-4 h-4"}),"Byrja afhendingu"]}),I.status==="OUT_FOR_DELIVERY"&&s.jsxs("button",{onClick:()=>P(I),className:"btn btn-success flex-1 flex items-center justify-center space-x-2",children:[s.jsx(wt,{className:"w-4 h-4"}),"Ljka afhendingu"]}),s.jsx("button",{onClick:()=>{m(I),x(I.status),p(!0)},className:"btn btn-outline",children:"Breyta"})]})]},I.id)})})]}),g&&h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Uppfra pntun #",h.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N staa"}),s.jsx("select",{value:v,onChange:I=>x(I.target.value),className:"input w-full",children:E.map(I=>s.jsx("option",{value:I.value,children:I.label},I.value))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{p(!1),m(null),x("")},className:"btn btn-outline flex-1",children:"Htta vi"}),s.jsx("button",{onClick:j,className:"btn btn-primary flex-1",children:"Uppfra"})]})]})})]})})};function z9(){const e=it(),t=Cr(),{isAuthenticated:r,user:n,isLoading:a}=ke(o=>o.auth),i=t.pathname.startsWith("/admin")||t.pathname.startsWith("/delivery");return S.useEffect(()=>{(()=>{document.title="lfng - Vn og Bjrverslun"})();const c=()=>{var h;if(typeof window<"u"&&((h=window.Capacitor)!=null&&h.isNativePlatform())){const m=document.documentElement.classList.contains("dark");ek.setStyle({style:m?Uh.Dark:Uh.Light}).catch(g=>{console.warn("Status bar styling not available:",g)}),ek.setBackgroundColor({color:m?"#1f2937":"#ffffff"}).catch(g=>{console.warn("Status bar background color not available:",g)})}};c();const d=new MutationObserver(h=>{h.forEach(m=>{m.attributeName==="class"&&c()})});return d.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>d.disconnect()},[]),S.useEffect(()=>{requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})})},[t.pathname]),S.useEffect(()=>{localStorage.getItem("token")&&!r&&e(Iu())},[e,r]),S.useEffect(()=>{if(r&&n)try{ot.connect(),n.role==="ADMIN"?ot.joinAdminRoom():n.role==="DELIVERY"&&ot.joinDeliveryRoom(n.id)}catch(o){console.warn("Socket connection failed, continuing without real-time features:",o)}return()=>{ot.isSocketConnected()&&ot.disconnect()}},[r,n]),S.useEffect(()=>{if(r){const o=c=>{e(mA(c))};return ot.onOrderStatusUpdate(o),()=>{ot.removeListener("order-status-update",o)}}},[r,e]),a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(nt,{size:"large"})}):s.jsx(N2,{children:s.jsx(JE,{children:s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(g7,{}),s.jsx("main",{className:"flex-1 pt-16-safe pb-16-safe md:pb-0",children:s.jsxs(YP,{children:[s.jsx(Re,{path:"/",element:s.jsx(L7,{})}),s.jsx(Re,{path:"/products",element:s.jsx(B7,{})}),s.jsx(Re,{path:"/products/:id",element:s.jsx(uM,{})}),s.jsx(Re,{path:"/login",element:s.jsx(kM,{})}),s.jsx(Re,{path:"/admin-login",element:s.jsx(NM,{})}),s.jsx(Re,{path:"/auth/callback",element:s.jsx(jM,{})}),s.jsxs(Re,{element:s.jsx(Dg,{}),children:[s.jsx(Re,{path:"/cart",element:s.jsx(gM,{})}),s.jsx(Re,{path:"/orders",element:s.jsx(Ic,{to:"/profile",replace:!0})}),s.jsx(Re,{path:"/orders/:id",element:s.jsx(yM,{})}),s.jsx(Re,{path:"/profile",element:s.jsx(bM,{})})]}),s.jsxs(Re,{element:s.jsx(Dg,{requiredRole:"ADMIN"}),children:[s.jsx(Re,{path:"/admin",element:s.jsx(LM,{})}),s.jsx(Re,{path:"/admin/products",element:s.jsx(OM,{})}),s.jsx(Re,{path:"/admin/categories",element:s.jsx($M,{})}),s.jsx(Re,{path:"/admin/orders",element:s.jsx(yO,{})}),s.jsx(Re,{path:"/admin/pos",element:s.jsx(bO,{})}),s.jsx(Re,{path:"/admin/customers",element:s.jsx(VF,{})}),s.jsx(Re,{path:"/admin/chat",element:s.jsx(C9,{})}),s.jsx(Re,{path:"/admin/analytics",element:s.jsx(UF,{})}),s.jsx(Re,{path:"/admin/reports",element:s.jsx(ZF,{})}),s.jsx(Re,{path:"/admin/notifications",element:s.jsx(GF,{})}),s.jsx(Re,{path:"/admin/media",element:s.jsx(R9,{})}),s.jsx(Re,{path:"/admin/media/upload",element:s.jsx(D9,{})}),s.jsx(Re,{path:"/admin/banners",element:s.jsx(d9,{})}),s.jsx(Re,{path:"/admin/demo-data",element:s.jsx(P9,{})}),s.jsx(Re,{path:"/admin/translations",element:s.jsx(L9,{})}),s.jsx(Re,{path:"/admin/settings",element:s.jsx(YF,{})}),s.jsx(Re,{path:"/admin/settings/general",element:s.jsx(QF,{})}),s.jsx(Re,{path:"/admin/settings/business",element:s.jsx(e9,{})}),s.jsx(Re,{path:"/admin/settings/shipping",element:s.jsx(t9,{})}),s.jsx(Re,{path:"/admin/settings/vat",element:s.jsx(r9,{})}),s.jsx(Re,{path:"/admin/settings/api-keys",element:s.jsx(s9,{})}),s.jsx(Re,{path:"/admin/settings/payment-gateways",element:s.jsx(o9,{})}),s.jsx(Re,{path:"/admin/settings/receipts",element:s.jsx(l9,{})}),s.jsx(Re,{path:"/admin/settings/smtp",element:s.jsx(c9,{})})]}),s.jsx(Re,{element:s.jsx(Dg,{requiredRoles:["ADMIN","DELIVERY"]}),children:s.jsx(Re,{path:"/delivery",element:s.jsx(F9,{})})}),s.jsx(Re,{path:"*",element:s.jsx(Ic,{to:"/",replace:!0})})]})}),!i&&s.jsx(p7,{}),!i&&s.jsx(x7,{}),s.jsx(y7,{}),s.jsx(n7,{})]})})})}const ip=ve("subscriptions/fetchUserSubscriptions",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await ue.get(`/subscriptions/my-subscriptions?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subscriptions")}}),op=ve("subscriptions/fetchSubscription",async(e,{rejectWithValue:t})=>{var r,n;try{return(await ue.get(`/subscriptions/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subscription")}}),lp=ve("subscriptions/createSubscription",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await ue.post("/subscriptions",e);return Z.success("skrift stofnu"),o.data}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a stofna skrift"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create subscription")}}),cp=ve("subscriptions/updateSubscription",async({id:e,subscriptionData:t},{rejectWithValue:r})=>{var n,a,i,o;try{const c=await ue.put(`/subscriptions/${e}`,t);return Z.success("skrift uppfr"),c.data}catch(c){return Z.error(((a=(n=c.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a uppfra skrift"),r(((o=(i=c.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update subscription")}}),dp=ve("subscriptions/deleteSubscription",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await ue.delete(`/subscriptions/${e}`),Z.success("skrift htt vi"),e}catch(o){return Z.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a htta vi skrift"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to cancel subscription")}}),up=ve("subscriptions/fetchAllSubscriptions",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await ue.get(`/subscriptions?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subscriptions")}}),B9={subscriptions:[],currentSubscription:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},$9=Vr({name:"subscriptions",initialState:B9,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentSubscription:e=>{e.currentSubscription=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(ip.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ip.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(ip.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(op.pending,t=>{t.isLoading=!0,t.error=null}).addCase(op.fulfilled,(t,r)=>{t.isLoading=!1,t.currentSubscription=r.payload,t.error=null}).addCase(op.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(lp.pending,t=>{t.isLoading=!0,t.error=null}).addCase(lp.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions.unshift(r.payload),t.error=null}).addCase(lp.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(cp.pending,t=>{t.isLoading=!0,t.error=null}).addCase(cp.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.subscriptions.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.subscriptions[n]=r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload.id&&(t.currentSubscription=r.payload),t.error=null}).addCase(cp.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(dp.pending,t=>{t.isLoading=!0,t.error=null}).addCase(dp.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=t.subscriptions.filter(n=>n.id!==r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload&&(t.currentSubscription=null),t.error=null}).addCase(dp.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(up.pending,t=>{t.isLoading=!0,t.error=null}).addCase(up.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(up.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),U9=$9.reducer,Dn=EL({reducer:{auth:cA,products:o7,categories:k7,cart:d7,orders:fA,addresses:fM,subscriptions:U9,dashboard:SM,banners:_7,chat:g9,analytics:$F,reports:KF,receiptSettings:HM,smtpSettings:XF},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})});console.log("Store created:",Dn);console.log("Store state:",Dn.getState());typeof window<"u"&&(window.store=Dn);console.log("Store in main.jsx:",Dn);console.log("Store state in main:",Dn==null?void 0:Dn.getState());typeof window<"u"&&(window.store=Dn);hp.createRoot(document.getElementById("root")).render(s.jsx(bt.StrictMode,{children:s.jsx(eP,{store:Dn,children:s.jsxs(nE,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[s.jsx(N2,{children:s.jsx(z9,{})}),s.jsx(YE,{position:"top-right",toastOptions:{duration:4e3,success:{style:{background:"#10b981",color:"#fff",padding:"16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500"},iconTheme:{primary:"#fff",secondary:"#10b981"}},error:{style:{background:"#ef4444",color:"#fff",padding:"16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500"},iconTheme:{primary:"#fff",secondary:"#ef4444"}}}})]})})}));
