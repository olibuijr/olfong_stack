var VC=Object.defineProperty;var HC=(e,t,r)=>t in e?VC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Ce=(e,t,r)=>HC(e,typeof t!="symbol"?t+"":t,r);function WC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var qC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zj={exports:{}},mm={},Bj={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=Symbol.for("react.element"),KC=Symbol.for("react.portal"),ZC=Symbol.for("react.fragment"),GC=Symbol.for("react.strict_mode"),YC=Symbol.for("react.profiler"),JC=Symbol.for("react.provider"),XC=Symbol.for("react.context"),QC=Symbol.for("react.forward_ref"),e6=Symbol.for("react.suspense"),t6=Symbol.for("react.memo"),r6=Symbol.for("react.lazy"),tv=Symbol.iterator;function s6(e){return e===null||typeof e!="object"?null:(e=tv&&e[tv]||e["@@iterator"],typeof e=="function"?e:null)}var $j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uj=Object.assign,Vj={};function Do(e,t,r){this.props=e,this.context=t,this.refs=Vj,this.updater=r||$j}Do.prototype.isReactComponent={};Do.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Do.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Hj(){}Hj.prototype=Do.prototype;function Jp(e,t,r){this.props=e,this.context=t,this.refs=Vj,this.updater=r||$j}var Xp=Jp.prototype=new Hj;Xp.constructor=Jp;Uj(Xp,Do.prototype);Xp.isPureReactComponent=!0;var rv=Array.isArray,Wj=Object.prototype.hasOwnProperty,Qp={current:null},qj={key:!0,ref:!0,__self:!0,__source:!0};function Kj(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Wj.call(t,n)&&!qj.hasOwnProperty(n)&&(a[n]=t[n]);var d=arguments.length-2;if(d===1)a.children=r;else if(1<d){for(var c=Array(d),h=0;h<d;h++)c[h]=arguments[h+2];a.children=c}if(e&&e.defaultProps)for(n in d=e.defaultProps,d)a[n]===void 0&&(a[n]=d[n]);return{$$typeof:Gd,type:e,key:i,ref:o,props:a,_owner:Qp.current}}function n6(e,t){return{$$typeof:Gd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ex(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gd}function a6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var sv=/\/+/g;function Hg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?a6(""+e.key):t.toString(36)}function fu(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Gd:case KC:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Hg(o,0):n,rv(a)?(r="",e!=null&&(r=e.replace(sv,"$&/")+"/"),fu(a,t,r,"",function(h){return h})):a!=null&&(ex(a)&&(a=n6(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(sv,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",rv(e))for(var d=0;d<e.length;d++){i=e[d];var c=n+Hg(i,d);o+=fu(i,t,r,c,a)}else if(c=s6(e),typeof c=="function")for(e=c.call(e),d=0;!(i=e.next()).done;)i=i.value,c=n+Hg(i,d++),o+=fu(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Tc(e,t,r){if(e==null)return e;var n=[],a=0;return fu(e,n,"","",function(i){return t.call(r,i,a++)}),n}function i6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pr={current:null},pu={transition:null},o6={ReactCurrentDispatcher:Pr,ReactCurrentBatchConfig:pu,ReactCurrentOwner:Qp};function Zj(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Tc,forEach:function(e,t,r){Tc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Tc(e,function(){t++}),t},toArray:function(e){return Tc(e,function(t){return t})||[]},only:function(e){if(!ex(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=Do;Ve.Fragment=ZC;Ve.Profiler=YC;Ve.PureComponent=Jp;Ve.StrictMode=GC;Ve.Suspense=e6;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o6;Ve.act=Zj;Ve.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Uj({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Qp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(c in t)Wj.call(t,c)&&!qj.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&d!==void 0?d[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){d=Array(c);for(var h=0;h<c;h++)d[h]=arguments[h+2];n.children=d}return{$$typeof:Gd,type:e.type,key:a,ref:i,props:n,_owner:o}};Ve.createContext=function(e){return e={$$typeof:XC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:JC,_context:e},e.Consumer=e};Ve.createElement=Kj;Ve.createFactory=function(e){var t=Kj.bind(null,e);return t.type=e,t};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:QC,render:e}};Ve.isValidElement=ex;Ve.lazy=function(e){return{$$typeof:r6,_payload:{_status:-1,_result:e},_init:i6}};Ve.memo=function(e,t){return{$$typeof:t6,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=pu.transition;pu.transition={};try{e()}finally{pu.transition=t}};Ve.unstable_act=Zj;Ve.useCallback=function(e,t){return Pr.current.useCallback(e,t)};Ve.useContext=function(e){return Pr.current.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e){return Pr.current.useDeferredValue(e)};Ve.useEffect=function(e,t){return Pr.current.useEffect(e,t)};Ve.useId=function(){return Pr.current.useId()};Ve.useImperativeHandle=function(e,t,r){return Pr.current.useImperativeHandle(e,t,r)};Ve.useInsertionEffect=function(e,t){return Pr.current.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return Pr.current.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return Pr.current.useMemo(e,t)};Ve.useReducer=function(e,t,r){return Pr.current.useReducer(e,t,r)};Ve.useRef=function(e){return Pr.current.useRef(e)};Ve.useState=function(e){return Pr.current.useState(e)};Ve.useSyncExternalStore=function(e,t,r){return Pr.current.useSyncExternalStore(e,t,r)};Ve.useTransition=function(){return Pr.current.useTransition()};Ve.version="18.3.1";Bj.exports=Ve;var _=Bj.exports;const wt=Yp(_),l6=WC({__proto__:null,default:wt},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d6=_,c6=Symbol.for("react.element"),u6=Symbol.for("react.fragment"),h6=Object.prototype.hasOwnProperty,m6=d6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g6={key:!0,ref:!0,__self:!0,__source:!0};function Gj(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)h6.call(t,n)&&!g6.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:c6,type:e,key:i,ref:o,props:a,_owner:m6.current}}mm.Fragment=u6;mm.jsx=Gj;mm.jsxs=Gj;zj.exports=mm;var s=zj.exports,g0={},Yj={exports:{}},ss={},Jj={exports:{}},Xj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,q){var J=R.length;R.push(q);e:for(;0<J;){var re=J-1>>>1,V=R[re];if(0<a(V,q))R[re]=q,R[J]=V,J=re;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var q=R[0],J=R.pop();if(J!==q){R[0]=J;e:for(var re=0,V=R.length,ae=V>>>1;re<ae;){var fe=2*(re+1)-1,be=R[fe],z=fe+1,xe=R[z];if(0>a(be,J))z<V&&0>a(xe,be)?(R[re]=xe,R[z]=J,re=z):(R[re]=be,R[fe]=J,re=fe);else if(z<V&&0>a(xe,J))R[re]=xe,R[z]=J,re=z;else break e}}return q}function a(R,q){var J=R.sortIndex-q.sortIndex;return J!==0?J:R.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();e.unstable_now=function(){return o.now()-d}}var c=[],h=[],m=1,f=null,p=3,w=!1,x=!1,k=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(R){for(var q=r(h);q!==null;){if(q.callback===null)n(h);else if(q.startTime<=R)n(h),q.sortIndex=q.expirationTime,t(c,q);else break;q=r(h)}}function C(R){if(k=!1,N(R),!x)if(r(c)!==null)x=!0,G(P);else{var q=r(h);q!==null&&F(C,q.startTime-R)}}function P(R,q){x=!1,k&&(k=!1,b(O),O=-1),w=!0;var J=p;try{for(N(q),f=r(c);f!==null&&(!(f.expirationTime>q)||R&&!X());){var re=f.callback;if(typeof re=="function"){f.callback=null,p=f.priorityLevel;var V=re(f.expirationTime<=q);q=e.unstable_now(),typeof V=="function"?f.callback=V:f===r(c)&&n(c),N(q)}else n(c);f=r(c)}if(f!==null)var ae=!0;else{var fe=r(h);fe!==null&&F(C,fe.startTime-q),ae=!1}return ae}finally{f=null,p=J,w=!1}}var E=!1,T=null,O=-1,I=5,W=-1;function X(){return!(e.unstable_now()-W<I)}function B(){if(T!==null){var R=e.unstable_now();W=R;var q=!0;try{q=T(!0,R)}finally{q?D():(E=!1,T=null)}}else E=!1}var D;if(typeof j=="function")D=function(){j(B)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Z=U.port2;U.port1.onmessage=B,D=function(){Z.postMessage(null)}}else D=function(){y(B,0)};function G(R){T=R,E||(E=!0,D())}function F(R,q){O=y(function(){R(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){x||w||(x=!0,G(P))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var J=p;p=q;try{return R()}finally{p=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=p;p=R;try{return q()}finally{p=J}},e.unstable_scheduleCallback=function(R,q,J){var re=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?re+J:re):J=re,R){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=J+V,R={id:m++,callback:q,priorityLevel:R,startTime:J,expirationTime:V,sortIndex:-1},J>re?(R.sortIndex=J,t(h,R),r(c)===null&&R===r(h)&&(k?(b(O),O=-1):k=!0,F(C,J-re))):(R.sortIndex=V,t(c,R),x||w||(x=!0,G(P))),R},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(R){var q=p;return function(){var J=p;p=q;try{return R.apply(this,arguments)}finally{p=J}}}})(Xj);Jj.exports=Xj;var f6=Jj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p6=_,ts=f6;function me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qj=new Set,pd={};function Ci(e,t){ko(e,t),ko(e+"Capture",t)}function ko(e,t){for(pd[e]=t,e=0;e<t.length;e++)Qj.add(t[e])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f0=Object.prototype.hasOwnProperty,x6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nv={},av={};function y6(e){return f0.call(av,e)?!0:f0.call(nv,e)?!1:x6.test(e)?av[e]=!0:(nv[e]=!0,!1)}function b6(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function v6(e,t,r,n){if(t===null||typeof t>"u"||b6(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Er(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){or[e]=new Er(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];or[t]=new Er(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){or[e]=new Er(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){or[e]=new Er(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){or[e]=new Er(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){or[e]=new Er(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){or[e]=new Er(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){or[e]=new Er(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){or[e]=new Er(e,5,!1,e.toLowerCase(),null,!1,!1)});var tx=/[\-:]([a-z])/g;function rx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tx,rx);or[t]=new Er(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tx,rx);or[t]=new Er(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tx,rx);or[t]=new Er(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){or[e]=new Er(e,1,!1,e.toLowerCase(),null,!1,!1)});or.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){or[e]=new Er(e,1,!1,e.toLowerCase(),null,!0,!0)});function sx(e,t,r,n){var a=or.hasOwnProperty(t)?or[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(v6(t,r,a,n)&&(r=null),n||a===null?y6(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Wn=p6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lc=Symbol.for("react.element"),Wi=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),nx=Symbol.for("react.strict_mode"),p0=Symbol.for("react.profiler"),e1=Symbol.for("react.provider"),t1=Symbol.for("react.context"),ax=Symbol.for("react.forward_ref"),x0=Symbol.for("react.suspense"),y0=Symbol.for("react.suspense_list"),ix=Symbol.for("react.memo"),ea=Symbol.for("react.lazy"),r1=Symbol.for("react.offscreen"),iv=Symbol.iterator;function il(e){return e===null||typeof e!="object"?null:(e=iv&&e[iv]||e["@@iterator"],typeof e=="function"?e:null)}var St=Object.assign,Wg;function kl(e){if(Wg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wg=t&&t[1]||""}return`
`+Wg+e}var qg=!1;function Kg(e,t){if(!e||qg)return"";qg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var a=h.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,d=i.length-1;1<=o&&0<=d&&a[o]!==i[d];)d--;for(;1<=o&&0<=d;o--,d--)if(a[o]!==i[d]){if(o!==1||d!==1)do if(o--,d--,0>d||a[o]!==i[d]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=d);break}}}finally{qg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?kl(e):""}function w6(e){switch(e.tag){case 5:return kl(e.type);case 16:return kl("Lazy");case 13:return kl("Suspense");case 19:return kl("SuspenseList");case 0:case 2:case 15:return e=Kg(e.type,!1),e;case 11:return e=Kg(e.type.render,!1),e;case 1:return e=Kg(e.type,!0),e;default:return""}}function b0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qi:return"Fragment";case Wi:return"Portal";case p0:return"Profiler";case nx:return"StrictMode";case x0:return"Suspense";case y0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case t1:return(e.displayName||"Context")+".Consumer";case e1:return(e._context.displayName||"Context")+".Provider";case ax:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ix:return t=e.displayName||null,t!==null?t:b0(e.type)||"Memo";case ea:t=e._payload,e=e._init;try{return b0(e(t))}catch{}}return null}function k6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return b0(t);case 8:return t===nx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ea(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function s1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function j6(e){var t=s1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mc(e){e._valueTracker||(e._valueTracker=j6(e))}function n1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=s1(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function gh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function v0(e,t){var r=t.checked;return St({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ov(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Ea(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function a1(e,t){t=t.checked,t!=null&&sx(e,"checked",t,!1)}function w0(e,t){a1(e,t);var r=Ea(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?k0(e,t.type,r):t.hasOwnProperty("defaultValue")&&k0(e,t.type,Ea(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function k0(e,t,r){(t!=="number"||gh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var jl=Array.isArray;function io(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Ea(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function j0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(me(91));return St({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function dv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(me(92));if(jl(r)){if(1<r.length)throw Error(me(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ea(r)}}function i1(e,t){var r=Ea(t.value),n=Ea(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function cv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function o1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?o1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ac,l1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ac=Ac||document.createElement("div"),Ac.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ac.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ml={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},N6=["Webkit","ms","Moz","O"];Object.keys(Ml).forEach(function(e){N6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ml[t]=Ml[e]})});function d1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ml.hasOwnProperty(e)&&Ml[e]?(""+t).trim():t+"px"}function c1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=d1(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var _6=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _0(e,t){if(t){if(_6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(me(62))}}function S0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var C0=null;function ox(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var P0=null,oo=null,lo=null;function uv(e){if(e=Xd(e)){if(typeof P0!="function")throw Error(me(280));var t=e.stateNode;t&&(t=ym(t),P0(e.stateNode,e.type,t))}}function u1(e){oo?lo?lo.push(e):lo=[e]:oo=e}function h1(){if(oo){var e=oo,t=lo;if(lo=oo=null,uv(e),t)for(e=0;e<t.length;e++)uv(t[e])}}function m1(e,t){return e(t)}function g1(){}var Zg=!1;function f1(e,t,r){if(Zg)return e(t,r);Zg=!0;try{return m1(e,t,r)}finally{Zg=!1,(oo!==null||lo!==null)&&(g1(),h1())}}function yd(e,t){var r=e.stateNode;if(r===null)return null;var n=ym(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(me(231,t,typeof r));return r}var E0=!1;if(zn)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){E0=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch{E0=!1}function S6(e,t,r,n,a,i,o,d,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(m){this.onError(m)}}var Al=!1,fh=null,ph=!1,I0=null,C6={onError:function(e){Al=!0,fh=e}};function P6(e,t,r,n,a,i,o,d,c){Al=!1,fh=null,S6.apply(C6,arguments)}function E6(e,t,r,n,a,i,o,d,c){if(P6.apply(this,arguments),Al){if(Al){var h=fh;Al=!1,fh=null}else throw Error(me(198));ph||(ph=!0,I0=h)}}function Pi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function p1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hv(e){if(Pi(e)!==e)throw Error(me(188))}function I6(e){var t=e.alternate;if(!t){if(t=Pi(e),t===null)throw Error(me(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return hv(a),e;if(i===n)return hv(a),t;i=i.sibling}throw Error(me(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,d=a.child;d;){if(d===r){o=!0,r=a,n=i;break}if(d===n){o=!0,n=a,r=i;break}d=d.sibling}if(!o){for(d=i.child;d;){if(d===r){o=!0,r=i,n=a;break}if(d===n){o=!0,n=i,r=a;break}d=d.sibling}if(!o)throw Error(me(189))}}if(r.alternate!==n)throw Error(me(190))}if(r.tag!==3)throw Error(me(188));return r.stateNode.current===r?e:t}function x1(e){return e=I6(e),e!==null?y1(e):null}function y1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=y1(e);if(t!==null)return t;e=e.sibling}return null}var b1=ts.unstable_scheduleCallback,mv=ts.unstable_cancelCallback,T6=ts.unstable_shouldYield,L6=ts.unstable_requestPaint,Et=ts.unstable_now,M6=ts.unstable_getCurrentPriorityLevel,lx=ts.unstable_ImmediatePriority,v1=ts.unstable_UserBlockingPriority,xh=ts.unstable_NormalPriority,A6=ts.unstable_LowPriority,w1=ts.unstable_IdlePriority,gm=null,an=null;function O6(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(gm,e,void 0,(e.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:F6,R6=Math.log,D6=Math.LN2;function F6(e){return e>>>=0,e===0?32:31-(R6(e)/D6|0)|0}var Oc=64,Rc=4194304;function Nl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var d=o&~a;d!==0?n=Nl(d):(i&=o,i!==0&&(n=Nl(i)))}else o=r&~a,o!==0?n=Nl(o):i!==0&&(n=Nl(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Fs(t),a=1<<r,n|=e[r],t&=~a;return n}function z6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function B6(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Fs(i),d=1<<o,c=a[o];c===-1?(!(d&r)||d&n)&&(a[o]=z6(d,t)):c<=t&&(e.expiredLanes|=d),i&=~d}}function T0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function k1(){var e=Oc;return Oc<<=1,!(Oc&4194240)&&(Oc=64),e}function Gg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Yd(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fs(t),e[t]=r}function $6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Fs(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function dx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Fs(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var rt=0;function j1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var N1,cx,_1,S1,C1,L0=!1,Dc=[],ga=null,fa=null,pa=null,bd=new Map,vd=new Map,ra=[],U6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gv(e,t){switch(e){case"focusin":case"focusout":ga=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":bd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vd.delete(t.pointerId)}}function ll(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Xd(t),t!==null&&cx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function V6(e,t,r,n,a){switch(t){case"focusin":return ga=ll(ga,e,t,r,n,a),!0;case"dragenter":return fa=ll(fa,e,t,r,n,a),!0;case"mouseover":return pa=ll(pa,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return bd.set(i,ll(bd.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,vd.set(i,ll(vd.get(i)||null,e,t,r,n,a)),!0}return!1}function P1(e){var t=ni(e.target);if(t!==null){var r=Pi(t);if(r!==null){if(t=r.tag,t===13){if(t=p1(r),t!==null){e.blockedOn=t,C1(e.priority,function(){_1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=M0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);C0=n,r.target.dispatchEvent(n),C0=null}else return t=Xd(r),t!==null&&cx(t),e.blockedOn=r,!1;t.shift()}return!0}function fv(e,t,r){xu(e)&&r.delete(t)}function H6(){L0=!1,ga!==null&&xu(ga)&&(ga=null),fa!==null&&xu(fa)&&(fa=null),pa!==null&&xu(pa)&&(pa=null),bd.forEach(fv),vd.forEach(fv)}function dl(e,t){e.blockedOn===t&&(e.blockedOn=null,L0||(L0=!0,ts.unstable_scheduleCallback(ts.unstable_NormalPriority,H6)))}function wd(e){function t(a){return dl(a,e)}if(0<Dc.length){dl(Dc[0],e);for(var r=1;r<Dc.length;r++){var n=Dc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ga!==null&&dl(ga,e),fa!==null&&dl(fa,e),pa!==null&&dl(pa,e),bd.forEach(t),vd.forEach(t),r=0;r<ra.length;r++)n=ra[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ra.length&&(r=ra[0],r.blockedOn===null);)P1(r),r.blockedOn===null&&ra.shift()}var co=Wn.ReactCurrentBatchConfig,bh=!0;function W6(e,t,r,n){var a=rt,i=co.transition;co.transition=null;try{rt=1,ux(e,t,r,n)}finally{rt=a,co.transition=i}}function q6(e,t,r,n){var a=rt,i=co.transition;co.transition=null;try{rt=4,ux(e,t,r,n)}finally{rt=a,co.transition=i}}function ux(e,t,r,n){if(bh){var a=M0(e,t,r,n);if(a===null)af(e,t,n,vh,r),gv(e,n);else if(V6(a,e,t,r,n))n.stopPropagation();else if(gv(e,n),t&4&&-1<U6.indexOf(e)){for(;a!==null;){var i=Xd(a);if(i!==null&&N1(i),i=M0(e,t,r,n),i===null&&af(e,t,n,vh,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else af(e,t,n,null,r)}}var vh=null;function M0(e,t,r,n){if(vh=null,e=ox(n),e=ni(e),e!==null)if(t=Pi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=p1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vh=e,null}function E1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M6()){case lx:return 1;case v1:return 4;case xh:case A6:return 16;case w1:return 536870912;default:return 16}default:return 16}}var oa=null,hx=null,yu=null;function I1(){if(yu)return yu;var e,t=hx,r=t.length,n,a="value"in oa?oa.value:oa.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return yu=a.slice(e,1<n?1-n:void 0)}function bu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Fc(){return!0}function pv(){return!1}function ns(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fc:pv,this.isPropagationStopped=pv,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fc)},persist:function(){},isPersistent:Fc}),t}var Fo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mx=ns(Fo),Jd=St({},Fo,{view:0,detail:0}),K6=ns(Jd),Yg,Jg,cl,fm=St({},Jd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gx,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cl&&(cl&&e.type==="mousemove"?(Yg=e.screenX-cl.screenX,Jg=e.screenY-cl.screenY):Jg=Yg=0,cl=e),Yg)},movementY:function(e){return"movementY"in e?e.movementY:Jg}}),xv=ns(fm),Z6=St({},fm,{dataTransfer:0}),G6=ns(Z6),Y6=St({},Jd,{relatedTarget:0}),Xg=ns(Y6),J6=St({},Fo,{animationName:0,elapsedTime:0,pseudoElement:0}),X6=ns(J6),Q6=St({},Fo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),e3=ns(Q6),t3=St({},Fo,{data:0}),yv=ns(t3),r3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=n3[e])?!!t[e]:!1}function gx(){return a3}var i3=St({},Jd,{key:function(e){if(e.key){var t=r3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?s3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gx,charCode:function(e){return e.type==="keypress"?bu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),o3=ns(i3),l3=St({},fm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bv=ns(l3),d3=St({},Jd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gx}),c3=ns(d3),u3=St({},Fo,{propertyName:0,elapsedTime:0,pseudoElement:0}),h3=ns(u3),m3=St({},fm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g3=ns(m3),f3=[9,13,27,32],fx=zn&&"CompositionEvent"in window,Ol=null;zn&&"documentMode"in document&&(Ol=document.documentMode);var p3=zn&&"TextEvent"in window&&!Ol,T1=zn&&(!fx||Ol&&8<Ol&&11>=Ol),vv=" ",wv=!1;function L1(e,t){switch(e){case"keyup":return f3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ki=!1;function x3(e,t){switch(e){case"compositionend":return M1(t);case"keypress":return t.which!==32?null:(wv=!0,vv);case"textInput":return e=t.data,e===vv&&wv?null:e;default:return null}}function y3(e,t){if(Ki)return e==="compositionend"||!fx&&L1(e,t)?(e=I1(),yu=hx=oa=null,Ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return T1&&t.locale!=="ko"?null:t.data;default:return null}}var b3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b3[e.type]:t==="textarea"}function A1(e,t,r,n){u1(n),t=wh(t,"onChange"),0<t.length&&(r=new mx("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Rl=null,kd=null;function v3(e){W1(e,0)}function pm(e){var t=Yi(e);if(n1(t))return e}function w3(e,t){if(e==="change")return t}var O1=!1;if(zn){var Qg;if(zn){var ef="oninput"in document;if(!ef){var jv=document.createElement("div");jv.setAttribute("oninput","return;"),ef=typeof jv.oninput=="function"}Qg=ef}else Qg=!1;O1=Qg&&(!document.documentMode||9<document.documentMode)}function Nv(){Rl&&(Rl.detachEvent("onpropertychange",R1),kd=Rl=null)}function R1(e){if(e.propertyName==="value"&&pm(kd)){var t=[];A1(t,kd,e,ox(e)),f1(v3,t)}}function k3(e,t,r){e==="focusin"?(Nv(),Rl=t,kd=r,Rl.attachEvent("onpropertychange",R1)):e==="focusout"&&Nv()}function j3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pm(kd)}function N3(e,t){if(e==="click")return pm(t)}function _3(e,t){if(e==="input"||e==="change")return pm(t)}function S3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bs=typeof Object.is=="function"?Object.is:S3;function jd(e,t){if(Bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!f0.call(t,a)||!Bs(e[a],t[a]))return!1}return!0}function _v(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sv(e,t){var r=_v(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=_v(r)}}function D1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?D1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function F1(){for(var e=window,t=gh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=gh(e.document)}return t}function px(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function C3(e){var t=F1(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&D1(r.ownerDocument.documentElement,r)){if(n!==null&&px(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Sv(r,i);var o=Sv(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var P3=zn&&"documentMode"in document&&11>=document.documentMode,Zi=null,A0=null,Dl=null,O0=!1;function Cv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;O0||Zi==null||Zi!==gh(n)||(n=Zi,"selectionStart"in n&&px(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Dl&&jd(Dl,n)||(Dl=n,n=wh(A0,"onSelect"),0<n.length&&(t=new mx("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Zi)))}function zc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Gi={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionend:zc("Transition","TransitionEnd")},tf={},z1={};zn&&(z1=document.createElement("div").style,"AnimationEvent"in window||(delete Gi.animationend.animation,delete Gi.animationiteration.animation,delete Gi.animationstart.animation),"TransitionEvent"in window||delete Gi.transitionend.transition);function xm(e){if(tf[e])return tf[e];if(!Gi[e])return e;var t=Gi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in z1)return tf[e]=t[r];return e}var B1=xm("animationend"),$1=xm("animationiteration"),U1=xm("animationstart"),V1=xm("transitionend"),H1=new Map,Pv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(e,t){H1.set(e,t),Ci(t,[e])}for(var rf=0;rf<Pv.length;rf++){var sf=Pv[rf],E3=sf.toLowerCase(),I3=sf[0].toUpperCase()+sf.slice(1);Ra(E3,"on"+I3)}Ra(B1,"onAnimationEnd");Ra($1,"onAnimationIteration");Ra(U1,"onAnimationStart");Ra("dblclick","onDoubleClick");Ra("focusin","onFocus");Ra("focusout","onBlur");Ra(V1,"onTransitionEnd");ko("onMouseEnter",["mouseout","mouseover"]);ko("onMouseLeave",["mouseout","mouseover"]);ko("onPointerEnter",["pointerout","pointerover"]);ko("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T3=new Set("cancel close invalid load scroll toggle".split(" ").concat(_l));function Ev(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,E6(n,t,void 0,e),e.currentTarget=null}function W1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var d=n[o],c=d.instance,h=d.currentTarget;if(d=d.listener,c!==i&&a.isPropagationStopped())break e;Ev(a,d,h),i=c}else for(o=0;o<n.length;o++){if(d=n[o],c=d.instance,h=d.currentTarget,d=d.listener,c!==i&&a.isPropagationStopped())break e;Ev(a,d,h),i=c}}}if(ph)throw e=I0,ph=!1,I0=null,e}function ft(e,t){var r=t[B0];r===void 0&&(r=t[B0]=new Set);var n=e+"__bubble";r.has(n)||(q1(t,e,2,!1),r.add(n))}function nf(e,t,r){var n=0;t&&(n|=4),q1(r,e,n,t)}var Bc="_reactListening"+Math.random().toString(36).slice(2);function Nd(e){if(!e[Bc]){e[Bc]=!0,Qj.forEach(function(r){r!=="selectionchange"&&(T3.has(r)||nf(r,!1,e),nf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Bc]||(t[Bc]=!0,nf("selectionchange",!1,t))}}function q1(e,t,r,n){switch(E1(t)){case 1:var a=W6;break;case 4:a=q6;break;default:a=ux}r=a.bind(null,t,r,e),a=void 0,!E0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function af(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var d=n.stateNode.containerInfo;if(d===a||d.nodeType===8&&d.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;d!==null;){if(o=ni(d),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}d=d.parentNode}}n=n.return}f1(function(){var h=i,m=ox(r),f=[];e:{var p=H1.get(e);if(p!==void 0){var w=mx,x=e;switch(e){case"keypress":if(bu(r)===0)break e;case"keydown":case"keyup":w=o3;break;case"focusin":x="focus",w=Xg;break;case"focusout":x="blur",w=Xg;break;case"beforeblur":case"afterblur":w=Xg;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=xv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=G6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=c3;break;case B1:case $1:case U1:w=X6;break;case V1:w=h3;break;case"scroll":w=K6;break;case"wheel":w=g3;break;case"copy":case"cut":case"paste":w=e3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=bv}var k=(t&4)!==0,y=!k&&e==="scroll",b=k?p!==null?p+"Capture":null:p;k=[];for(var j=h,N;j!==null;){N=j;var C=N.stateNode;if(N.tag===5&&C!==null&&(N=C,b!==null&&(C=yd(j,b),C!=null&&k.push(_d(j,C,N)))),y)break;j=j.return}0<k.length&&(p=new w(p,x,null,r,m),f.push({event:p,listeners:k}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",p&&r!==C0&&(x=r.relatedTarget||r.fromElement)&&(ni(x)||x[Bn]))break e;if((w||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,w?(x=r.relatedTarget||r.toElement,w=h,x=x?ni(x):null,x!==null&&(y=Pi(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(w=null,x=h),w!==x)){if(k=xv,C="onMouseLeave",b="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(k=bv,C="onPointerLeave",b="onPointerEnter",j="pointer"),y=w==null?p:Yi(w),N=x==null?p:Yi(x),p=new k(C,j+"leave",w,r,m),p.target=y,p.relatedTarget=N,C=null,ni(m)===h&&(k=new k(b,j+"enter",x,r,m),k.target=N,k.relatedTarget=y,C=k),y=C,w&&x)t:{for(k=w,b=x,j=0,N=k;N;N=zi(N))j++;for(N=0,C=b;C;C=zi(C))N++;for(;0<j-N;)k=zi(k),j--;for(;0<N-j;)b=zi(b),N--;for(;j--;){if(k===b||b!==null&&k===b.alternate)break t;k=zi(k),b=zi(b)}k=null}else k=null;w!==null&&Iv(f,p,w,k,!1),x!==null&&y!==null&&Iv(f,y,x,k,!0)}}e:{if(p=h?Yi(h):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var P=w3;else if(kv(p))if(O1)P=_3;else{P=j3;var E=k3}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=N3);if(P&&(P=P(e,h))){A1(f,P,r,m);break e}E&&E(e,p,h),e==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&k0(p,"number",p.value)}switch(E=h?Yi(h):window,e){case"focusin":(kv(E)||E.contentEditable==="true")&&(Zi=E,A0=h,Dl=null);break;case"focusout":Dl=A0=Zi=null;break;case"mousedown":O0=!0;break;case"contextmenu":case"mouseup":case"dragend":O0=!1,Cv(f,r,m);break;case"selectionchange":if(P3)break;case"keydown":case"keyup":Cv(f,r,m)}var T;if(fx)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Ki?L1(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(T1&&r.locale!=="ko"&&(Ki||O!=="onCompositionStart"?O==="onCompositionEnd"&&Ki&&(T=I1()):(oa=m,hx="value"in oa?oa.value:oa.textContent,Ki=!0)),E=wh(h,O),0<E.length&&(O=new yv(O,e,null,r,m),f.push({event:O,listeners:E}),T?O.data=T:(T=M1(r),T!==null&&(O.data=T)))),(T=p3?x3(e,r):y3(e,r))&&(h=wh(h,"onBeforeInput"),0<h.length&&(m=new yv("onBeforeInput","beforeinput",null,r,m),f.push({event:m,listeners:h}),m.data=T))}W1(f,t)})}function _d(e,t,r){return{instance:e,listener:t,currentTarget:r}}function wh(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=yd(e,r),i!=null&&n.unshift(_d(e,i,a)),i=yd(e,t),i!=null&&n.push(_d(e,i,a))),e=e.return}return n}function zi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Iv(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var d=r,c=d.alternate,h=d.stateNode;if(c!==null&&c===n)break;d.tag===5&&h!==null&&(d=h,a?(c=yd(r,i),c!=null&&o.unshift(_d(r,c,d))):a||(c=yd(r,i),c!=null&&o.push(_d(r,c,d)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var L3=/\r\n?/g,M3=/\u0000|\uFFFD/g;function Tv(e){return(typeof e=="string"?e:""+e).replace(L3,`
`).replace(M3,"")}function $c(e,t,r){if(t=Tv(t),Tv(e)!==t&&r)throw Error(me(425))}function kh(){}var R0=null,D0=null;function F0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var z0=typeof setTimeout=="function"?setTimeout:void 0,A3=typeof clearTimeout=="function"?clearTimeout:void 0,Lv=typeof Promise=="function"?Promise:void 0,O3=typeof queueMicrotask=="function"?queueMicrotask:typeof Lv<"u"?function(e){return Lv.resolve(null).then(e).catch(R3)}:z0;function R3(e){setTimeout(function(){throw e})}function of(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),wd(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);wd(t)}function xa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var zo=Math.random().toString(36).slice(2),en="__reactFiber$"+zo,Sd="__reactProps$"+zo,Bn="__reactContainer$"+zo,B0="__reactEvents$"+zo,D3="__reactListeners$"+zo,F3="__reactHandles$"+zo;function ni(e){var t=e[en];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bn]||r[en]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Mv(e);e!==null;){if(r=e[en])return r;e=Mv(e)}return t}e=r,r=e.parentNode}return null}function Xd(e){return e=e[en]||e[Bn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function ym(e){return e[Sd]||null}var $0=[],Ji=-1;function Da(e){return{current:e}}function xt(e){0>Ji||(e.current=$0[Ji],$0[Ji]=null,Ji--)}function mt(e,t){Ji++,$0[Ji]=e.current,e.current=t}var Ia={},br=Da(Ia),zr=Da(!1),xi=Ia;function jo(e,t){var r=e.type.contextTypes;if(!r)return Ia;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Br(e){return e=e.childContextTypes,e!=null}function jh(){xt(zr),xt(br)}function Av(e,t,r){if(br.current!==Ia)throw Error(me(168));mt(br,t),mt(zr,r)}function K1(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(me(108,k6(e)||"Unknown",a));return St({},r,n)}function Nh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,xi=br.current,mt(br,e),mt(zr,zr.current),!0}function Ov(e,t,r){var n=e.stateNode;if(!n)throw Error(me(169));r?(e=K1(e,t,xi),n.__reactInternalMemoizedMergedChildContext=e,xt(zr),xt(br),mt(br,e)):xt(zr),mt(zr,r)}var In=null,bm=!1,lf=!1;function Z1(e){In===null?In=[e]:In.push(e)}function z3(e){bm=!0,Z1(e)}function Fa(){if(!lf&&In!==null){lf=!0;var e=0,t=rt;try{var r=In;for(rt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}In=null,bm=!1}catch(a){throw In!==null&&(In=In.slice(e+1)),b1(lx,Fa),a}finally{rt=t,lf=!1}}return null}var Xi=[],Qi=0,_h=null,Sh=0,fs=[],ps=0,yi=null,Mn=1,An="";function Qa(e,t){Xi[Qi++]=Sh,Xi[Qi++]=_h,_h=e,Sh=t}function G1(e,t,r){fs[ps++]=Mn,fs[ps++]=An,fs[ps++]=yi,yi=e;var n=Mn;e=An;var a=32-Fs(n)-1;n&=~(1<<a),r+=1;var i=32-Fs(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Mn=1<<32-Fs(t)+a|r<<a|n,An=i+e}else Mn=1<<i|r<<a|n,An=e}function xx(e){e.return!==null&&(Qa(e,1),G1(e,1,0))}function yx(e){for(;e===_h;)_h=Xi[--Qi],Xi[Qi]=null,Sh=Xi[--Qi],Xi[Qi]=null;for(;e===yi;)yi=fs[--ps],fs[ps]=null,An=fs[--ps],fs[ps]=null,Mn=fs[--ps],fs[ps]=null}var Qr=null,Xr=null,kt=!1,Ms=null;function Y1(e,t){var r=ys(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Rv(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qr=e,Xr=xa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qr=e,Xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=yi!==null?{id:Mn,overflow:An}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ys(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qr=e,Xr=null,!0):!1;default:return!1}}function U0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function V0(e){if(kt){var t=Xr;if(t){var r=t;if(!Rv(e,t)){if(U0(e))throw Error(me(418));t=xa(r.nextSibling);var n=Qr;t&&Rv(e,t)?Y1(n,r):(e.flags=e.flags&-4097|2,kt=!1,Qr=e)}}else{if(U0(e))throw Error(me(418));e.flags=e.flags&-4097|2,kt=!1,Qr=e}}}function Dv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qr=e}function Uc(e){if(e!==Qr)return!1;if(!kt)return Dv(e),kt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!F0(e.type,e.memoizedProps)),t&&(t=Xr)){if(U0(e))throw J1(),Error(me(418));for(;t;)Y1(e,t),t=xa(t.nextSibling)}if(Dv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xr=xa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xr=null}}else Xr=Qr?xa(e.stateNode.nextSibling):null;return!0}function J1(){for(var e=Xr;e;)e=xa(e.nextSibling)}function No(){Xr=Qr=null,kt=!1}function bx(e){Ms===null?Ms=[e]:Ms.push(e)}var B3=Wn.ReactCurrentBatchConfig;function ul(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(me(309));var n=r.stateNode}if(!n)throw Error(me(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var d=a.refs;o===null?delete d[i]:d[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(me(284));if(!r._owner)throw Error(me(290,e))}return e}function Vc(e,t){throw e=Object.prototype.toString.call(t),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fv(e){var t=e._init;return t(e._payload)}function X1(e){function t(b,j){if(e){var N=b.deletions;N===null?(b.deletions=[j],b.flags|=16):N.push(j)}}function r(b,j){if(!e)return null;for(;j!==null;)t(b,j),j=j.sibling;return null}function n(b,j){for(b=new Map;j!==null;)j.key!==null?b.set(j.key,j):b.set(j.index,j),j=j.sibling;return b}function a(b,j){return b=wa(b,j),b.index=0,b.sibling=null,b}function i(b,j,N){return b.index=N,e?(N=b.alternate,N!==null?(N=N.index,N<j?(b.flags|=2,j):N):(b.flags|=2,j)):(b.flags|=1048576,j)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function d(b,j,N,C){return j===null||j.tag!==6?(j=ff(N,b.mode,C),j.return=b,j):(j=a(j,N),j.return=b,j)}function c(b,j,N,C){var P=N.type;return P===qi?m(b,j,N.props.children,C,N.key):j!==null&&(j.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ea&&Fv(P)===j.type)?(C=a(j,N.props),C.ref=ul(b,j,N),C.return=b,C):(C=Su(N.type,N.key,N.props,null,b.mode,C),C.ref=ul(b,j,N),C.return=b,C)}function h(b,j,N,C){return j===null||j.tag!==4||j.stateNode.containerInfo!==N.containerInfo||j.stateNode.implementation!==N.implementation?(j=pf(N,b.mode,C),j.return=b,j):(j=a(j,N.children||[]),j.return=b,j)}function m(b,j,N,C,P){return j===null||j.tag!==7?(j=hi(N,b.mode,C,P),j.return=b,j):(j=a(j,N),j.return=b,j)}function f(b,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return j=ff(""+j,b.mode,N),j.return=b,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Lc:return N=Su(j.type,j.key,j.props,null,b.mode,N),N.ref=ul(b,null,j),N.return=b,N;case Wi:return j=pf(j,b.mode,N),j.return=b,j;case ea:var C=j._init;return f(b,C(j._payload),N)}if(jl(j)||il(j))return j=hi(j,b.mode,N,null),j.return=b,j;Vc(b,j)}return null}function p(b,j,N,C){var P=j!==null?j.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return P!==null?null:d(b,j,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Lc:return N.key===P?c(b,j,N,C):null;case Wi:return N.key===P?h(b,j,N,C):null;case ea:return P=N._init,p(b,j,P(N._payload),C)}if(jl(N)||il(N))return P!==null?null:m(b,j,N,C,null);Vc(b,N)}return null}function w(b,j,N,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return b=b.get(N)||null,d(j,b,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Lc:return b=b.get(C.key===null?N:C.key)||null,c(j,b,C,P);case Wi:return b=b.get(C.key===null?N:C.key)||null,h(j,b,C,P);case ea:var E=C._init;return w(b,j,N,E(C._payload),P)}if(jl(C)||il(C))return b=b.get(N)||null,m(j,b,C,P,null);Vc(j,C)}return null}function x(b,j,N,C){for(var P=null,E=null,T=j,O=j=0,I=null;T!==null&&O<N.length;O++){T.index>O?(I=T,T=null):I=T.sibling;var W=p(b,T,N[O],C);if(W===null){T===null&&(T=I);break}e&&T&&W.alternate===null&&t(b,T),j=i(W,j,O),E===null?P=W:E.sibling=W,E=W,T=I}if(O===N.length)return r(b,T),kt&&Qa(b,O),P;if(T===null){for(;O<N.length;O++)T=f(b,N[O],C),T!==null&&(j=i(T,j,O),E===null?P=T:E.sibling=T,E=T);return kt&&Qa(b,O),P}for(T=n(b,T);O<N.length;O++)I=w(T,b,O,N[O],C),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?O:I.key),j=i(I,j,O),E===null?P=I:E.sibling=I,E=I);return e&&T.forEach(function(X){return t(b,X)}),kt&&Qa(b,O),P}function k(b,j,N,C){var P=il(N);if(typeof P!="function")throw Error(me(150));if(N=P.call(N),N==null)throw Error(me(151));for(var E=P=null,T=j,O=j=0,I=null,W=N.next();T!==null&&!W.done;O++,W=N.next()){T.index>O?(I=T,T=null):I=T.sibling;var X=p(b,T,W.value,C);if(X===null){T===null&&(T=I);break}e&&T&&X.alternate===null&&t(b,T),j=i(X,j,O),E===null?P=X:E.sibling=X,E=X,T=I}if(W.done)return r(b,T),kt&&Qa(b,O),P;if(T===null){for(;!W.done;O++,W=N.next())W=f(b,W.value,C),W!==null&&(j=i(W,j,O),E===null?P=W:E.sibling=W,E=W);return kt&&Qa(b,O),P}for(T=n(b,T);!W.done;O++,W=N.next())W=w(T,b,O,W.value,C),W!==null&&(e&&W.alternate!==null&&T.delete(W.key===null?O:W.key),j=i(W,j,O),E===null?P=W:E.sibling=W,E=W);return e&&T.forEach(function(B){return t(b,B)}),kt&&Qa(b,O),P}function y(b,j,N,C){if(typeof N=="object"&&N!==null&&N.type===qi&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Lc:e:{for(var P=N.key,E=j;E!==null;){if(E.key===P){if(P=N.type,P===qi){if(E.tag===7){r(b,E.sibling),j=a(E,N.props.children),j.return=b,b=j;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ea&&Fv(P)===E.type){r(b,E.sibling),j=a(E,N.props),j.ref=ul(b,E,N),j.return=b,b=j;break e}r(b,E);break}else t(b,E);E=E.sibling}N.type===qi?(j=hi(N.props.children,b.mode,C,N.key),j.return=b,b=j):(C=Su(N.type,N.key,N.props,null,b.mode,C),C.ref=ul(b,j,N),C.return=b,b=C)}return o(b);case Wi:e:{for(E=N.key;j!==null;){if(j.key===E)if(j.tag===4&&j.stateNode.containerInfo===N.containerInfo&&j.stateNode.implementation===N.implementation){r(b,j.sibling),j=a(j,N.children||[]),j.return=b,b=j;break e}else{r(b,j);break}else t(b,j);j=j.sibling}j=pf(N,b.mode,C),j.return=b,b=j}return o(b);case ea:return E=N._init,y(b,j,E(N._payload),C)}if(jl(N))return x(b,j,N,C);if(il(N))return k(b,j,N,C);Vc(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,j!==null&&j.tag===6?(r(b,j.sibling),j=a(j,N),j.return=b,b=j):(r(b,j),j=ff(N,b.mode,C),j.return=b,b=j),o(b)):r(b,j)}return y}var _o=X1(!0),Q1=X1(!1),Ch=Da(null),Ph=null,eo=null,vx=null;function wx(){vx=eo=Ph=null}function kx(e){var t=Ch.current;xt(Ch),e._currentValue=t}function H0(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function uo(e,t){Ph=e,vx=eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Fr=!0),e.firstContext=null)}function ws(e){var t=e._currentValue;if(vx!==e)if(e={context:e,memoizedValue:t,next:null},eo===null){if(Ph===null)throw Error(me(308));eo=e,Ph.dependencies={lanes:0,firstContext:e}}else eo=eo.next=e;return t}var ai=null;function jx(e){ai===null?ai=[e]:ai.push(e)}function eN(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,jx(t)):(r.next=a.next,a.next=r),t.interleaved=r,$n(e,n)}function $n(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ta=!1;function Nx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function On(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ya(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ze&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,$n(e,r)}return a=n.interleaved,a===null?(t.next=t,jx(n)):(t.next=a.next,a.next=t),n.interleaved=t,$n(e,r)}function vu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dx(e,r)}}function zv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Eh(e,t,r,n){var a=e.updateQueue;ta=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,d=a.shared.pending;if(d!==null){a.shared.pending=null;var c=d,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,d=m.lastBaseUpdate,d!==o&&(d===null?m.firstBaseUpdate=h:d.next=h,m.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,m=h=c=null,d=i;do{var p=d.lane,w=d.eventTime;if((n&p)===p){m!==null&&(m=m.next={eventTime:w,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var x=e,k=d;switch(p=t,w=r,k.tag){case 1:if(x=k.payload,typeof x=="function"){f=x.call(w,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=k.payload,p=typeof x=="function"?x.call(w,f,p):x,p==null)break e;f=St({},f,p);break e;case 2:ta=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,p=a.effects,p===null?a.effects=[d]:p.push(d))}else w={eventTime:w,lane:p,tag:d.tag,payload:d.payload,callback:d.callback,next:null},m===null?(h=m=w,c=f):m=m.next=w,o|=p;if(d=d.next,d===null){if(d=a.shared.pending,d===null)break;p=d,d=p.next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}while(!0);if(m===null&&(c=f),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);vi|=o,e.lanes=o,e.memoizedState=f}}function Bv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(me(191,a));a.call(n)}}}var Qd={},on=Da(Qd),Cd=Da(Qd),Pd=Da(Qd);function ii(e){if(e===Qd)throw Error(me(174));return e}function _x(e,t){switch(mt(Pd,t),mt(Cd,e),mt(on,Qd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:N0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=N0(t,e)}xt(on),mt(on,t)}function So(){xt(on),xt(Cd),xt(Pd)}function rN(e){ii(Pd.current);var t=ii(on.current),r=N0(t,e.type);t!==r&&(mt(Cd,e),mt(on,r))}function Sx(e){Cd.current===e&&(xt(on),xt(Cd))}var Nt=Da(0);function Ih(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var df=[];function Cx(){for(var e=0;e<df.length;e++)df[e]._workInProgressVersionPrimary=null;df.length=0}var wu=Wn.ReactCurrentDispatcher,cf=Wn.ReactCurrentBatchConfig,bi=0,_t=null,$t=null,Gt=null,Th=!1,Fl=!1,Ed=0,$3=0;function dr(){throw Error(me(321))}function Px(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Bs(e[r],t[r]))return!1;return!0}function Ex(e,t,r,n,a,i){if(bi=i,_t=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wu.current=e===null||e.memoizedState===null?W3:q3,e=r(n,a),Fl){i=0;do{if(Fl=!1,Ed=0,25<=i)throw Error(me(301));i+=1,Gt=$t=null,t.updateQueue=null,wu.current=K3,e=r(n,a)}while(Fl)}if(wu.current=Lh,t=$t!==null&&$t.next!==null,bi=0,Gt=$t=_t=null,Th=!1,t)throw Error(me(300));return e}function Ix(){var e=Ed!==0;return Ed=0,e}function Js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?_t.memoizedState=Gt=e:Gt=Gt.next=e,Gt}function ks(){if($t===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var t=Gt===null?_t.memoizedState:Gt.next;if(t!==null)Gt=t,$t=e;else{if(e===null)throw Error(me(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Gt===null?_t.memoizedState=Gt=e:Gt=Gt.next=e}return Gt}function Id(e,t){return typeof t=="function"?t(e):t}function uf(e){var t=ks(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var n=$t,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var d=o=null,c=null,h=i;do{var m=h.lane;if((bi&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var f={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(d=c=f,o=n):c=c.next=f,_t.lanes|=m,vi|=m}h=h.next}while(h!==null&&h!==i);c===null?o=n:c.next=d,Bs(n,t.memoizedState)||(Fr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,_t.lanes|=i,vi|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function hf(e){var t=ks(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Bs(i,t.memoizedState)||(Fr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function sN(){}function nN(e,t){var r=_t,n=ks(),a=t(),i=!Bs(n.memoizedState,a);if(i&&(n.memoizedState=a,Fr=!0),n=n.queue,Tx(oN.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Gt!==null&&Gt.memoizedState.tag&1){if(r.flags|=2048,Td(9,iN.bind(null,r,n,a,t),void 0,null),Yt===null)throw Error(me(349));bi&30||aN(r,t,a)}return a}function aN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function iN(e,t,r,n){t.value=r,t.getSnapshot=n,lN(t)&&dN(e)}function oN(e,t,r){return r(function(){lN(t)&&dN(e)})}function lN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Bs(e,r)}catch{return!0}}function dN(e){var t=$n(e,1);t!==null&&zs(t,e,1,-1)}function $v(e){var t=Js();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:e},t.queue=e,e=e.dispatch=H3.bind(null,_t,e),[t.memoizedState,e]}function Td(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function cN(){return ks().memoizedState}function ku(e,t,r,n){var a=Js();_t.flags|=e,a.memoizedState=Td(1|t,r,void 0,n===void 0?null:n)}function vm(e,t,r,n){var a=ks();n=n===void 0?null:n;var i=void 0;if($t!==null){var o=$t.memoizedState;if(i=o.destroy,n!==null&&Px(n,o.deps)){a.memoizedState=Td(t,r,i,n);return}}_t.flags|=e,a.memoizedState=Td(1|t,r,i,n)}function Uv(e,t){return ku(8390656,8,e,t)}function Tx(e,t){return vm(2048,8,e,t)}function uN(e,t){return vm(4,2,e,t)}function hN(e,t){return vm(4,4,e,t)}function mN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gN(e,t,r){return r=r!=null?r.concat([e]):null,vm(4,4,mN.bind(null,t,e),r)}function Lx(){}function fN(e,t){var r=ks();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Px(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function pN(e,t){var r=ks();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Px(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function xN(e,t,r){return bi&21?(Bs(r,t)||(r=k1(),_t.lanes|=r,vi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Fr=!0),e.memoizedState=r)}function U3(e,t){var r=rt;rt=r!==0&&4>r?r:4,e(!0);var n=cf.transition;cf.transition={};try{e(!1),t()}finally{rt=r,cf.transition=n}}function yN(){return ks().memoizedState}function V3(e,t,r){var n=va(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bN(e))vN(t,r);else if(r=eN(e,t,r,n),r!==null){var a=Sr();zs(r,e,n,a),wN(r,t,n)}}function H3(e,t,r){var n=va(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bN(e))vN(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,d=i(o,r);if(a.hasEagerState=!0,a.eagerState=d,Bs(d,o)){var c=t.interleaved;c===null?(a.next=a,jx(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=eN(e,t,a,n),r!==null&&(a=Sr(),zs(r,e,n,a),wN(r,t,n))}}function bN(e){var t=e.alternate;return e===_t||t!==null&&t===_t}function vN(e,t){Fl=Th=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function wN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dx(e,r)}}var Lh={readContext:ws,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useInsertionEffect:dr,useLayoutEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useMutableSource:dr,useSyncExternalStore:dr,useId:dr,unstable_isNewReconciler:!1},W3={readContext:ws,useCallback:function(e,t){return Js().memoizedState=[e,t===void 0?null:t],e},useContext:ws,useEffect:Uv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ku(4194308,4,mN.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ku(4194308,4,e,t)},useInsertionEffect:function(e,t){return ku(4,2,e,t)},useMemo:function(e,t){var r=Js();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Js();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=V3.bind(null,_t,e),[n.memoizedState,e]},useRef:function(e){var t=Js();return e={current:e},t.memoizedState=e},useState:$v,useDebugValue:Lx,useDeferredValue:function(e){return Js().memoizedState=e},useTransition:function(){var e=$v(!1),t=e[0];return e=U3.bind(null,e[1]),Js().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=_t,a=Js();if(kt){if(r===void 0)throw Error(me(407));r=r()}else{if(r=t(),Yt===null)throw Error(me(349));bi&30||aN(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Uv(oN.bind(null,n,i,e),[e]),n.flags|=2048,Td(9,iN.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Js(),t=Yt.identifierPrefix;if(kt){var r=An,n=Mn;r=(n&~(1<<32-Fs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ed++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},q3={readContext:ws,useCallback:fN,useContext:ws,useEffect:Tx,useImperativeHandle:gN,useInsertionEffect:uN,useLayoutEffect:hN,useMemo:pN,useReducer:uf,useRef:cN,useState:function(){return uf(Id)},useDebugValue:Lx,useDeferredValue:function(e){var t=ks();return xN(t,$t.memoizedState,e)},useTransition:function(){var e=uf(Id)[0],t=ks().memoizedState;return[e,t]},useMutableSource:sN,useSyncExternalStore:nN,useId:yN,unstable_isNewReconciler:!1},K3={readContext:ws,useCallback:fN,useContext:ws,useEffect:Tx,useImperativeHandle:gN,useInsertionEffect:uN,useLayoutEffect:hN,useMemo:pN,useReducer:hf,useRef:cN,useState:function(){return hf(Id)},useDebugValue:Lx,useDeferredValue:function(e){var t=ks();return $t===null?t.memoizedState=e:xN(t,$t.memoizedState,e)},useTransition:function(){var e=hf(Id)[0],t=ks().memoizedState;return[e,t]},useMutableSource:sN,useSyncExternalStore:nN,useId:yN,unstable_isNewReconciler:!1};function Es(e,t){if(e&&e.defaultProps){t=St({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function W0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:St({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var wm={isMounted:function(e){return(e=e._reactInternals)?Pi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Sr(),a=va(e),i=On(n,a);i.payload=t,r!=null&&(i.callback=r),t=ya(e,i,a),t!==null&&(zs(t,e,a,n),vu(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Sr(),a=va(e),i=On(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ya(e,i,a),t!==null&&(zs(t,e,a,n),vu(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Sr(),n=va(e),a=On(r,n);a.tag=2,t!=null&&(a.callback=t),t=ya(e,a,n),t!==null&&(zs(t,e,n,r),vu(t,e,n))}};function Vv(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!jd(r,n)||!jd(a,i):!0}function kN(e,t,r){var n=!1,a=Ia,i=t.contextType;return typeof i=="object"&&i!==null?i=ws(i):(a=Br(t)?xi:br.current,n=t.contextTypes,i=(n=n!=null)?jo(e,a):Ia),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wm,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&wm.enqueueReplaceState(t,t.state,null)}function q0(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Nx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ws(i):(i=Br(t)?xi:br.current,a.context=jo(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(W0(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&wm.enqueueReplaceState(a,a.state,null),Eh(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Co(e,t){try{var r="",n=t;do r+=w6(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function mf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function K0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Z3=typeof WeakMap=="function"?WeakMap:Map;function jN(e,t,r){r=On(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ah||(Ah=!0,sp=n),K0(e,t)},r}function NN(e,t,r){r=On(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){K0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){K0(e,t),typeof n!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Wv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Z3;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=l5.bind(null,e,t,r),t.then(e,e))}function qv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kv(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=On(-1,1),t.tag=2,ya(r,t,1))),r.lanes|=1),e)}var G3=Wn.ReactCurrentOwner,Fr=!1;function kr(e,t,r,n){t.child=e===null?Q1(t,null,r,n):_o(t,e.child,r,n)}function Zv(e,t,r,n,a){r=r.render;var i=t.ref;return uo(t,a),n=Ex(e,t,r,n,i,a),r=Ix(),e!==null&&!Fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Un(e,t,a)):(kt&&r&&xx(t),t.flags|=1,kr(e,t,n,a),t.child)}function Gv(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Bx(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,_N(e,t,i,n,a)):(e=Su(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:jd,r(o,n)&&e.ref===t.ref)return Un(e,t,a)}return t.flags|=1,e=wa(i,n),e.ref=t.ref,e.return=t,t.child=e}function _N(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(jd(i,n)&&e.ref===t.ref)if(Fr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Fr=!0);else return t.lanes=e.lanes,Un(e,t,a)}return Z0(e,t,r,n,a)}function SN(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(ro,Gr),Gr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,mt(ro,Gr),Gr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,mt(ro,Gr),Gr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,mt(ro,Gr),Gr|=n;return kr(e,t,a,r),t.child}function CN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Z0(e,t,r,n,a){var i=Br(r)?xi:br.current;return i=jo(t,i),uo(t,a),r=Ex(e,t,r,n,i,a),n=Ix(),e!==null&&!Fr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Un(e,t,a)):(kt&&n&&xx(t),t.flags|=1,kr(e,t,r,a),t.child)}function Yv(e,t,r,n,a){if(Br(r)){var i=!0;Nh(t)}else i=!1;if(uo(t,a),t.stateNode===null)ju(e,t),kN(t,r,n),q0(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,d=t.memoizedProps;o.props=d;var c=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=ws(h):(h=Br(r)?xi:br.current,h=jo(t,h));var m=r.getDerivedStateFromProps,f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==n||c!==h)&&Hv(t,o,n,h),ta=!1;var p=t.memoizedState;o.state=p,Eh(t,n,o,a),c=t.memoizedState,d!==n||p!==c||zr.current||ta?(typeof m=="function"&&(W0(t,r,m,n),c=t.memoizedState),(d=ta||Vv(t,r,d,n,p,c,h))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=h,n=d):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,tN(e,t),d=t.memoizedProps,h=t.type===t.elementType?d:Es(t.type,d),o.props=h,f=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ws(c):(c=Br(r)?xi:br.current,c=jo(t,c));var w=r.getDerivedStateFromProps;(m=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==f||p!==c)&&Hv(t,o,n,c),ta=!1,p=t.memoizedState,o.state=p,Eh(t,n,o,a);var x=t.memoizedState;d!==f||p!==x||zr.current||ta?(typeof w=="function"&&(W0(t,r,w,n),x=t.memoizedState),(h=ta||Vv(t,r,h,n,p,x,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=h):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return G0(e,t,r,n,i,a)}function G0(e,t,r,n,a,i){CN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Ov(t,r,!1),Un(e,t,i);n=t.stateNode,G3.current=t;var d=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=_o(t,e.child,null,i),t.child=_o(t,null,d,i)):kr(e,t,d,i),t.memoizedState=n.state,a&&Ov(t,r,!0),t.child}function PN(e){var t=e.stateNode;t.pendingContext?Av(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Av(e,t.context,!1),_x(e,t.containerInfo)}function Jv(e,t,r,n,a){return No(),bx(a),t.flags|=256,kr(e,t,r,n),t.child}var Y0={dehydrated:null,treeContext:null,retryLane:0};function J0(e){return{baseLanes:e,cachePool:null,transitions:null}}function EN(e,t,r){var n=t.pendingProps,a=Nt.current,i=!1,o=(t.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(a&2)!==0),d?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),mt(Nt,a&1),e===null)return V0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nm(o,n,0,null),e=hi(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=J0(r),t.memoizedState=Y0,e):Mx(t,o));if(a=e.memoizedState,a!==null&&(d=a.dehydrated,d!==null))return Y3(e,t,o,n,d,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,d=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=wa(a,c),n.subtreeFlags=a.subtreeFlags&14680064),d!==null?i=wa(d,i):(i=hi(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?J0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Y0,n}return i=e.child,e=i.sibling,n=wa(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Mx(e,t){return t=Nm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Hc(e,t,r,n){return n!==null&&bx(n),_o(t,e.child,null,r),e=Mx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Y3(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=mf(Error(me(422))),Hc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Nm({mode:"visible",children:n.children},a,0,null),i=hi(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&_o(t,e.child,null,o),t.child.memoizedState=J0(o),t.memoizedState=Y0,i);if(!(t.mode&1))return Hc(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var d=n.dgst;return n=d,i=Error(me(419)),n=mf(i,n,void 0),Hc(e,t,o,n)}if(d=(o&e.childLanes)!==0,Fr||d){if(n=Yt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,$n(e,a),zs(n,e,a,-1))}return zx(),n=mf(Error(me(421))),Hc(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=d5.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Xr=xa(a.nextSibling),Qr=t,kt=!0,Ms=null,e!==null&&(fs[ps++]=Mn,fs[ps++]=An,fs[ps++]=yi,Mn=e.id,An=e.overflow,yi=t),t=Mx(t,n.children),t.flags|=4096,t)}function Xv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),H0(e.return,t,r)}function gf(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function IN(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(kr(e,t,n.children,r),n=Nt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xv(e,r,t);else if(e.tag===19)Xv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(mt(Nt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ih(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),gf(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ih(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}gf(t,!0,r,null,i);break;case"together":gf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ju(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Un(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(me(153));if(t.child!==null){for(e=t.child,r=wa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function J3(e,t,r){switch(t.tag){case 3:PN(t),No();break;case 5:rN(t);break;case 1:Br(t.type)&&Nh(t);break;case 4:_x(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;mt(Ch,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(mt(Nt,Nt.current&1),t.flags|=128,null):r&t.child.childLanes?EN(e,t,r):(mt(Nt,Nt.current&1),e=Un(e,t,r),e!==null?e.sibling:null);mt(Nt,Nt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return IN(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),mt(Nt,Nt.current),n)break;return null;case 22:case 23:return t.lanes=0,SN(e,t,r)}return Un(e,t,r)}var TN,X0,LN,MN;TN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};X0=function(){};LN=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ii(on.current);var i=null;switch(r){case"input":a=v0(e,a),n=v0(e,n),i=[];break;case"select":a=St({},a,{value:void 0}),n=St({},n,{value:void 0}),i=[];break;case"textarea":a=j0(e,a),n=j0(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=kh)}_0(r,n);var o;r=null;for(h in a)if(!n.hasOwnProperty(h)&&a.hasOwnProperty(h)&&a[h]!=null)if(h==="style"){var d=a[h];for(o in d)d.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(pd.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var c=n[h];if(d=a!=null?a[h]:void 0,n.hasOwnProperty(h)&&c!==d&&(c!=null||d!=null))if(h==="style")if(d){for(o in d)!d.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&d[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(pd.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&ft("scroll",e),i||d===c||(i=[])):(i=i||[]).push(h,c))}r&&(i=i||[]).push("style",r);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};MN=function(e,t,r,n){r!==n&&(t.flags|=4)};function hl(e,t){if(!kt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function X3(e,t,r){var n=t.pendingProps;switch(yx(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(t),null;case 1:return Br(t.type)&&jh(),cr(t),null;case 3:return n=t.stateNode,So(),xt(zr),xt(br),Cx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Uc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ms!==null&&(ip(Ms),Ms=null))),X0(e,t),cr(t),null;case 5:Sx(t);var a=ii(Pd.current);if(r=t.type,e!==null&&t.stateNode!=null)LN(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(me(166));return cr(t),null}if(e=ii(on.current),Uc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[en]=t,n[Sd]=i,e=(t.mode&1)!==0,r){case"dialog":ft("cancel",n),ft("close",n);break;case"iframe":case"object":case"embed":ft("load",n);break;case"video":case"audio":for(a=0;a<_l.length;a++)ft(_l[a],n);break;case"source":ft("error",n);break;case"img":case"image":case"link":ft("error",n),ft("load",n);break;case"details":ft("toggle",n);break;case"input":ov(n,i),ft("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ft("invalid",n);break;case"textarea":dv(n,i),ft("invalid",n)}_0(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var d=i[o];o==="children"?typeof d=="string"?n.textContent!==d&&(i.suppressHydrationWarning!==!0&&$c(n.textContent,d,e),a=["children",d]):typeof d=="number"&&n.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&$c(n.textContent,d,e),a=["children",""+d]):pd.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&ft("scroll",n)}switch(r){case"input":Mc(n),lv(n,i,!0);break;case"textarea":Mc(n),cv(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=kh)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=o1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[en]=t,e[Sd]=n,TN(e,t,!1,!1),t.stateNode=e;e:{switch(o=S0(r,n),r){case"dialog":ft("cancel",e),ft("close",e),a=n;break;case"iframe":case"object":case"embed":ft("load",e),a=n;break;case"video":case"audio":for(a=0;a<_l.length;a++)ft(_l[a],e);a=n;break;case"source":ft("error",e),a=n;break;case"img":case"image":case"link":ft("error",e),ft("load",e),a=n;break;case"details":ft("toggle",e),a=n;break;case"input":ov(e,n),a=v0(e,n),ft("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=St({},n,{value:void 0}),ft("invalid",e);break;case"textarea":dv(e,n),a=j0(e,n),ft("invalid",e);break;default:a=n}_0(r,a),d=a;for(i in d)if(d.hasOwnProperty(i)){var c=d[i];i==="style"?c1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&l1(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&xd(e,c):typeof c=="number"&&xd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(pd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ft("scroll",e):c!=null&&sx(e,i,c,o))}switch(r){case"input":Mc(e),lv(e,n,!1);break;case"textarea":Mc(e),cv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Ea(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?io(e,!!n.multiple,i,!1):n.defaultValue!=null&&io(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=kh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cr(t),null;case 6:if(e&&t.stateNode!=null)MN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(me(166));if(r=ii(Pd.current),ii(on.current),Uc(t)){if(n=t.stateNode,r=t.memoizedProps,n[en]=t,(i=n.nodeValue!==r)&&(e=Qr,e!==null))switch(e.tag){case 3:$c(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$c(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[en]=t,t.stateNode=n}return cr(t),null;case 13:if(xt(Nt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(kt&&Xr!==null&&t.mode&1&&!(t.flags&128))J1(),No(),t.flags|=98560,i=!1;else if(i=Uc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(me(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(me(317));i[en]=t}else No(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cr(t),i=!1}else Ms!==null&&(ip(Ms),Ms=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Nt.current&1?Ht===0&&(Ht=3):zx())),t.updateQueue!==null&&(t.flags|=4),cr(t),null);case 4:return So(),X0(e,t),e===null&&Nd(t.stateNode.containerInfo),cr(t),null;case 10:return kx(t.type._context),cr(t),null;case 17:return Br(t.type)&&jh(),cr(t),null;case 19:if(xt(Nt),i=t.memoizedState,i===null)return cr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)hl(i,!1);else{if(Ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ih(e),o!==null){for(t.flags|=128,hl(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return mt(Nt,Nt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Et()>Po&&(t.flags|=128,n=!0,hl(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ih(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!kt)return cr(t),null}else 2*Et()-i.renderingStartTime>Po&&r!==1073741824&&(t.flags|=128,n=!0,hl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Et(),t.sibling=null,r=Nt.current,mt(Nt,n?r&1|2:r&1),t):(cr(t),null);case 22:case 23:return Fx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Gr&1073741824&&(cr(t),t.subtreeFlags&6&&(t.flags|=8192)):cr(t),null;case 24:return null;case 25:return null}throw Error(me(156,t.tag))}function Q3(e,t){switch(yx(t),t.tag){case 1:return Br(t.type)&&jh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return So(),xt(zr),xt(br),Cx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sx(t),null;case 13:if(xt(Nt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(me(340));No()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xt(Nt),null;case 4:return So(),null;case 10:return kx(t.type._context),null;case 22:case 23:return Fx(),null;case 24:return null;default:return null}}var Wc=!1,gr=!1,e5=typeof WeakSet=="function"?WeakSet:Set,ke=null;function to(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ct(e,t,n)}else r.current=null}function Q0(e,t,r){try{r()}catch(n){Ct(e,t,n)}}var Qv=!1;function t5(e,t){if(R0=bh,e=F1(),px(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,d=-1,c=-1,h=0,m=0,f=e,p=null;t:for(;;){for(var w;f!==r||a!==0&&f.nodeType!==3||(d=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(w=f.firstChild)!==null;)p=f,f=w;for(;;){if(f===e)break t;if(p===r&&++h===a&&(d=o),p===i&&++m===n&&(c=o),(w=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=w}r=d===-1||c===-1?null:{start:d,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(D0={focusedElem:e,selectionRange:r},bh=!1,ke=t;ke!==null;)if(t=ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ke=e;else for(;ke!==null;){t=ke;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var k=x.memoizedProps,y=x.memoizedState,b=t.stateNode,j=b.getSnapshotBeforeUpdate(t.elementType===t.type?k:Es(t.type,k),y);b.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(C){Ct(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,ke=e;break}ke=t.return}return x=Qv,Qv=!1,x}function zl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Q0(t,r,i)}a=a.next}while(a!==n)}}function km(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ep(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function AN(e){var t=e.alternate;t!==null&&(e.alternate=null,AN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[en],delete t[Sd],delete t[B0],delete t[D3],delete t[F3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ON(e){return e.tag===5||e.tag===3||e.tag===4}function ew(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ON(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=kh));else if(n!==4&&(e=e.child,e!==null))for(tp(e,t,r),e=e.sibling;e!==null;)tp(e,t,r),e=e.sibling}function rp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(rp(e,t,r),e=e.sibling;e!==null;)rp(e,t,r),e=e.sibling}var er=null,Is=!1;function Jn(e,t,r){for(r=r.child;r!==null;)RN(e,t,r),r=r.sibling}function RN(e,t,r){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(gm,r)}catch{}switch(r.tag){case 5:gr||to(r,t);case 6:var n=er,a=Is;er=null,Jn(e,t,r),er=n,Is=a,er!==null&&(Is?(e=er,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):er.removeChild(r.stateNode));break;case 18:er!==null&&(Is?(e=er,r=r.stateNode,e.nodeType===8?of(e.parentNode,r):e.nodeType===1&&of(e,r),wd(e)):of(er,r.stateNode));break;case 4:n=er,a=Is,er=r.stateNode.containerInfo,Is=!0,Jn(e,t,r),er=n,Is=a;break;case 0:case 11:case 14:case 15:if(!gr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Q0(r,t,o),a=a.next}while(a!==n)}Jn(e,t,r);break;case 1:if(!gr&&(to(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(d){Ct(r,t,d)}Jn(e,t,r);break;case 21:Jn(e,t,r);break;case 22:r.mode&1?(gr=(n=gr)||r.memoizedState!==null,Jn(e,t,r),gr=n):Jn(e,t,r);break;default:Jn(e,t,r)}}function tw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new e5),t.forEach(function(n){var a=c5.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Ps(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,d=o;e:for(;d!==null;){switch(d.tag){case 5:er=d.stateNode,Is=!1;break e;case 3:er=d.stateNode.containerInfo,Is=!0;break e;case 4:er=d.stateNode.containerInfo,Is=!0;break e}d=d.return}if(er===null)throw Error(me(160));RN(i,o,a),er=null,Is=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(h){Ct(a,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)DN(t,e),t=t.sibling}function DN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ps(t,e),Ks(e),n&4){try{zl(3,e,e.return),km(3,e)}catch(k){Ct(e,e.return,k)}try{zl(5,e,e.return)}catch(k){Ct(e,e.return,k)}}break;case 1:Ps(t,e),Ks(e),n&512&&r!==null&&to(r,r.return);break;case 5:if(Ps(t,e),Ks(e),n&512&&r!==null&&to(r,r.return),e.flags&32){var a=e.stateNode;try{xd(a,"")}catch(k){Ct(e,e.return,k)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,d=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&a1(a,i),S0(d,o);var h=S0(d,i);for(o=0;o<c.length;o+=2){var m=c[o],f=c[o+1];m==="style"?c1(a,f):m==="dangerouslySetInnerHTML"?l1(a,f):m==="children"?xd(a,f):sx(a,m,f,h)}switch(d){case"input":w0(a,i);break;case"textarea":i1(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?io(a,!!i.multiple,w,!1):p!==!!i.multiple&&(i.defaultValue!=null?io(a,!!i.multiple,i.defaultValue,!0):io(a,!!i.multiple,i.multiple?[]:"",!1))}a[Sd]=i}catch(k){Ct(e,e.return,k)}}break;case 6:if(Ps(t,e),Ks(e),n&4){if(e.stateNode===null)throw Error(me(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(k){Ct(e,e.return,k)}}break;case 3:if(Ps(t,e),Ks(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{wd(t.containerInfo)}catch(k){Ct(e,e.return,k)}break;case 4:Ps(t,e),Ks(e);break;case 13:Ps(t,e),Ks(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Rx=Et())),n&4&&tw(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(gr=(h=gr)||m,Ps(t,e),gr=h):Ps(t,e),Ks(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!m&&e.mode&1)for(ke=e,m=e.child;m!==null;){for(f=ke=m;ke!==null;){switch(p=ke,w=p.child,p.tag){case 0:case 11:case 14:case 15:zl(4,p,p.return);break;case 1:to(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(k){Ct(n,r,k)}}break;case 5:to(p,p.return);break;case 22:if(p.memoizedState!==null){sw(f);continue}}w!==null?(w.return=p,ke=w):sw(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{a=f.stateNode,h?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=d1("display",o))}catch(k){Ct(e,e.return,k)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(k){Ct(e,e.return,k)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ps(t,e),Ks(e),n&4&&tw(e);break;case 21:break;default:Ps(t,e),Ks(e)}}function Ks(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ON(r)){var n=r;break e}r=r.return}throw Error(me(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(xd(a,""),n.flags&=-33);var i=ew(e);rp(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,d=ew(e);tp(e,d,o);break;default:throw Error(me(161))}}catch(c){Ct(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function r5(e,t,r){ke=e,FN(e)}function FN(e,t,r){for(var n=(e.mode&1)!==0;ke!==null;){var a=ke,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Wc;if(!o){var d=a.alternate,c=d!==null&&d.memoizedState!==null||gr;d=Wc;var h=gr;if(Wc=o,(gr=c)&&!h)for(ke=a;ke!==null;)o=ke,c=o.child,o.tag===22&&o.memoizedState!==null?nw(a):c!==null?(c.return=o,ke=c):nw(a);for(;i!==null;)ke=i,FN(i),i=i.sibling;ke=a,Wc=d,gr=h}rw(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ke=i):rw(e)}}function rw(e){for(;ke!==null;){var t=ke;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:gr||km(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!gr)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Es(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Bv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Bv(t,o,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&wd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}gr||t.flags&512&&ep(t)}catch(p){Ct(t,t.return,p)}}if(t===e){ke=null;break}if(r=t.sibling,r!==null){r.return=t.return,ke=r;break}ke=t.return}}function sw(e){for(;ke!==null;){var t=ke;if(t===e){ke=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ke=r;break}ke=t.return}}function nw(e){for(;ke!==null;){var t=ke;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{km(4,t)}catch(c){Ct(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ct(t,a,c)}}var i=t.return;try{ep(t)}catch(c){Ct(t,i,c)}break;case 5:var o=t.return;try{ep(t)}catch(c){Ct(t,o,c)}}}catch(c){Ct(t,t.return,c)}if(t===e){ke=null;break}var d=t.sibling;if(d!==null){d.return=t.return,ke=d;break}ke=t.return}}var s5=Math.ceil,Mh=Wn.ReactCurrentDispatcher,Ax=Wn.ReactCurrentOwner,vs=Wn.ReactCurrentBatchConfig,Ze=0,Yt=null,Dt=null,nr=0,Gr=0,ro=Da(0),Ht=0,Ld=null,vi=0,jm=0,Ox=0,Bl=null,Rr=null,Rx=0,Po=1/0,En=null,Ah=!1,sp=null,ba=null,qc=!1,la=null,Oh=0,$l=0,np=null,Nu=-1,_u=0;function Sr(){return Ze&6?Et():Nu!==-1?Nu:Nu=Et()}function va(e){return e.mode&1?Ze&2&&nr!==0?nr&-nr:B3.transition!==null?(_u===0&&(_u=k1()),_u):(e=rt,e!==0||(e=window.event,e=e===void 0?16:E1(e.type)),e):1}function zs(e,t,r,n){if(50<$l)throw $l=0,np=null,Error(me(185));Yd(e,r,n),(!(Ze&2)||e!==Yt)&&(e===Yt&&(!(Ze&2)&&(jm|=r),Ht===4&&sa(e,nr)),$r(e,n),r===1&&Ze===0&&!(t.mode&1)&&(Po=Et()+500,bm&&Fa()))}function $r(e,t){var r=e.callbackNode;B6(e,t);var n=yh(e,e===Yt?nr:0);if(n===0)r!==null&&mv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&mv(r),t===1)e.tag===0?z3(aw.bind(null,e)):Z1(aw.bind(null,e)),O3(function(){!(Ze&6)&&Fa()}),r=null;else{switch(j1(n)){case 1:r=lx;break;case 4:r=v1;break;case 16:r=xh;break;case 536870912:r=w1;break;default:r=xh}r=qN(r,zN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zN(e,t){if(Nu=-1,_u=0,Ze&6)throw Error(me(327));var r=e.callbackNode;if(ho()&&e.callbackNode!==r)return null;var n=yh(e,e===Yt?nr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Rh(e,n);else{t=n;var a=Ze;Ze|=2;var i=$N();(Yt!==e||nr!==t)&&(En=null,Po=Et()+500,ui(e,t));do try{i5();break}catch(d){BN(e,d)}while(!0);wx(),Mh.current=i,Ze=a,Dt!==null?t=0:(Yt=null,nr=0,t=Ht)}if(t!==0){if(t===2&&(a=T0(e),a!==0&&(n=a,t=ap(e,a))),t===1)throw r=Ld,ui(e,0),sa(e,n),$r(e,Et()),r;if(t===6)sa(e,n);else{if(a=e.current.alternate,!(n&30)&&!n5(a)&&(t=Rh(e,n),t===2&&(i=T0(e),i!==0&&(n=i,t=ap(e,i))),t===1))throw r=Ld,ui(e,0),sa(e,n),$r(e,Et()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(me(345));case 2:ei(e,Rr,En);break;case 3:if(sa(e,n),(n&130023424)===n&&(t=Rx+500-Et(),10<t)){if(yh(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Sr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=z0(ei.bind(null,e,Rr,En),t);break}ei(e,Rr,En);break;case 4:if(sa(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Fs(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Et()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*s5(n/1960))-n,10<n){e.timeoutHandle=z0(ei.bind(null,e,Rr,En),n);break}ei(e,Rr,En);break;case 5:ei(e,Rr,En);break;default:throw Error(me(329))}}}return $r(e,Et()),e.callbackNode===r?zN.bind(null,e):null}function ap(e,t){var r=Bl;return e.current.memoizedState.isDehydrated&&(ui(e,t).flags|=256),e=Rh(e,t),e!==2&&(t=Rr,Rr=r,t!==null&&ip(t)),e}function ip(e){Rr===null?Rr=e:Rr.push.apply(Rr,e)}function n5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Bs(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sa(e,t){for(t&=~Ox,t&=~jm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Fs(t),n=1<<r;e[r]=-1,t&=~n}}function aw(e){if(Ze&6)throw Error(me(327));ho();var t=yh(e,0);if(!(t&1))return $r(e,Et()),null;var r=Rh(e,t);if(e.tag!==0&&r===2){var n=T0(e);n!==0&&(t=n,r=ap(e,n))}if(r===1)throw r=Ld,ui(e,0),sa(e,t),$r(e,Et()),r;if(r===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ei(e,Rr,En),$r(e,Et()),null}function Dx(e,t){var r=Ze;Ze|=1;try{return e(t)}finally{Ze=r,Ze===0&&(Po=Et()+500,bm&&Fa())}}function wi(e){la!==null&&la.tag===0&&!(Ze&6)&&ho();var t=Ze;Ze|=1;var r=vs.transition,n=rt;try{if(vs.transition=null,rt=1,e)return e()}finally{rt=n,vs.transition=r,Ze=t,!(Ze&6)&&Fa()}}function Fx(){Gr=ro.current,xt(ro)}function ui(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,A3(r)),Dt!==null)for(r=Dt.return;r!==null;){var n=r;switch(yx(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&jh();break;case 3:So(),xt(zr),xt(br),Cx();break;case 5:Sx(n);break;case 4:So();break;case 13:xt(Nt);break;case 19:xt(Nt);break;case 10:kx(n.type._context);break;case 22:case 23:Fx()}r=r.return}if(Yt=e,Dt=e=wa(e.current,null),nr=Gr=t,Ht=0,Ld=null,Ox=jm=vi=0,Rr=Bl=null,ai!==null){for(t=0;t<ai.length;t++)if(r=ai[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ai=null}return e}function BN(e,t){do{var r=Dt;try{if(wx(),wu.current=Lh,Th){for(var n=_t.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Th=!1}if(bi=0,Gt=$t=_t=null,Fl=!1,Ed=0,Ax.current=null,r===null||r.return===null){Ht=1,Ld=t,Dt=null;break}e:{var i=e,o=r.return,d=r,c=t;if(t=nr,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=d,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=qv(o);if(w!==null){w.flags&=-257,Kv(w,o,d,i,t),w.mode&1&&Wv(i,h,t),t=w,c=h;var x=t.updateQueue;if(x===null){var k=new Set;k.add(c),t.updateQueue=k}else x.add(c);break e}else{if(!(t&1)){Wv(i,h,t),zx();break e}c=Error(me(426))}}else if(kt&&d.mode&1){var y=qv(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Kv(y,o,d,i,t),bx(Co(c,d));break e}}i=c=Co(c,d),Ht!==4&&(Ht=2),Bl===null?Bl=[i]:Bl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=jN(i,c,t);zv(i,b);break e;case 1:d=c;var j=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof j.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(ba===null||!ba.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=NN(i,d,t);zv(i,C);break e}}i=i.return}while(i!==null)}VN(r)}catch(P){t=P,Dt===r&&r!==null&&(Dt=r=r.return);continue}break}while(!0)}function $N(){var e=Mh.current;return Mh.current=Lh,e===null?Lh:e}function zx(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Yt===null||!(vi&268435455)&&!(jm&268435455)||sa(Yt,nr)}function Rh(e,t){var r=Ze;Ze|=2;var n=$N();(Yt!==e||nr!==t)&&(En=null,ui(e,t));do try{a5();break}catch(a){BN(e,a)}while(!0);if(wx(),Ze=r,Mh.current=n,Dt!==null)throw Error(me(261));return Yt=null,nr=0,Ht}function a5(){for(;Dt!==null;)UN(Dt)}function i5(){for(;Dt!==null&&!T6();)UN(Dt)}function UN(e){var t=WN(e.alternate,e,Gr);e.memoizedProps=e.pendingProps,t===null?VN(e):Dt=t,Ax.current=null}function VN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Q3(r,t),r!==null){r.flags&=32767,Dt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,Dt=null;return}}else if(r=X3(r,t,Gr),r!==null){Dt=r;return}if(t=t.sibling,t!==null){Dt=t;return}Dt=t=e}while(t!==null);Ht===0&&(Ht=5)}function ei(e,t,r){var n=rt,a=vs.transition;try{vs.transition=null,rt=1,o5(e,t,r,n)}finally{vs.transition=a,rt=n}return null}function o5(e,t,r,n){do ho();while(la!==null);if(Ze&6)throw Error(me(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if($6(e,i),e===Yt&&(Dt=Yt=null,nr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qc||(qc=!0,qN(xh,function(){return ho(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=vs.transition,vs.transition=null;var o=rt;rt=1;var d=Ze;Ze|=4,Ax.current=null,t5(e,r),DN(r,e),C3(D0),bh=!!R0,D0=R0=null,e.current=r,r5(r),L6(),Ze=d,rt=o,vs.transition=i}else e.current=r;if(qc&&(qc=!1,la=e,Oh=a),i=e.pendingLanes,i===0&&(ba=null),O6(r.stateNode),$r(e,Et()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ah)throw Ah=!1,e=sp,sp=null,e;return Oh&1&&e.tag!==0&&ho(),i=e.pendingLanes,i&1?e===np?$l++:($l=0,np=e):$l=0,Fa(),null}function ho(){if(la!==null){var e=j1(Oh),t=vs.transition,r=rt;try{if(vs.transition=null,rt=16>e?16:e,la===null)var n=!1;else{if(e=la,la=null,Oh=0,Ze&6)throw Error(me(331));var a=Ze;for(Ze|=4,ke=e.current;ke!==null;){var i=ke,o=i.child;if(ke.flags&16){var d=i.deletions;if(d!==null){for(var c=0;c<d.length;c++){var h=d[c];for(ke=h;ke!==null;){var m=ke;switch(m.tag){case 0:case 11:case 15:zl(8,m,i)}var f=m.child;if(f!==null)f.return=m,ke=f;else for(;ke!==null;){m=ke;var p=m.sibling,w=m.return;if(AN(m),m===h){ke=null;break}if(p!==null){p.return=w,ke=p;break}ke=w}}}var x=i.alternate;if(x!==null){var k=x.child;if(k!==null){x.child=null;do{var y=k.sibling;k.sibling=null,k=y}while(k!==null)}}ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ke=o;else e:for(;ke!==null;){if(i=ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:zl(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ke=b;break e}ke=i.return}}var j=e.current;for(ke=j;ke!==null;){o=ke;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,ke=N;else e:for(o=j;ke!==null;){if(d=ke,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:km(9,d)}}catch(P){Ct(d,d.return,P)}if(d===o){ke=null;break e}var C=d.sibling;if(C!==null){C.return=d.return,ke=C;break e}ke=d.return}}if(Ze=a,Fa(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(gm,e)}catch{}n=!0}return n}finally{rt=r,vs.transition=t}}return!1}function iw(e,t,r){t=Co(r,t),t=jN(e,t,1),e=ya(e,t,1),t=Sr(),e!==null&&(Yd(e,1,t),$r(e,t))}function Ct(e,t,r){if(e.tag===3)iw(e,e,r);else for(;t!==null;){if(t.tag===3){iw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ba===null||!ba.has(n))){e=Co(r,e),e=NN(t,e,1),t=ya(t,e,1),e=Sr(),t!==null&&(Yd(t,1,e),$r(t,e));break}}t=t.return}}function l5(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Sr(),e.pingedLanes|=e.suspendedLanes&r,Yt===e&&(nr&r)===r&&(Ht===4||Ht===3&&(nr&130023424)===nr&&500>Et()-Rx?ui(e,0):Ox|=r),$r(e,t)}function HN(e,t){t===0&&(e.mode&1?(t=Rc,Rc<<=1,!(Rc&130023424)&&(Rc=4194304)):t=1);var r=Sr();e=$n(e,t),e!==null&&(Yd(e,t,r),$r(e,r))}function d5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),HN(e,r)}function c5(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(me(314))}n!==null&&n.delete(t),HN(e,r)}var WN;WN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||zr.current)Fr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Fr=!1,J3(e,t,r);Fr=!!(e.flags&131072)}else Fr=!1,kt&&t.flags&1048576&&G1(t,Sh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ju(e,t),e=t.pendingProps;var a=jo(t,br.current);uo(t,r),a=Ex(null,t,n,e,a,r);var i=Ix();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Br(n)?(i=!0,Nh(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Nx(t),a.updater=wm,t.stateNode=a,a._reactInternals=t,q0(t,n,e,r),t=G0(null,t,n,!0,i,r)):(t.tag=0,kt&&i&&xx(t),kr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ju(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=h5(n),e=Es(n,e),a){case 0:t=Z0(null,t,n,e,r);break e;case 1:t=Yv(null,t,n,e,r);break e;case 11:t=Zv(null,t,n,e,r);break e;case 14:t=Gv(null,t,n,Es(n.type,e),r);break e}throw Error(me(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),Z0(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),Yv(e,t,n,a,r);case 3:e:{if(PN(t),e===null)throw Error(me(387));n=t.pendingProps,i=t.memoizedState,a=i.element,tN(e,t),Eh(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Co(Error(me(423)),t),t=Jv(e,t,n,r,a);break e}else if(n!==a){a=Co(Error(me(424)),t),t=Jv(e,t,n,r,a);break e}else for(Xr=xa(t.stateNode.containerInfo.firstChild),Qr=t,kt=!0,Ms=null,r=Q1(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(No(),n===a){t=Un(e,t,r);break e}kr(e,t,n,r)}t=t.child}return t;case 5:return rN(t),e===null&&V0(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,F0(n,a)?o=null:i!==null&&F0(n,i)&&(t.flags|=32),CN(e,t),kr(e,t,o,r),t.child;case 6:return e===null&&V0(t),null;case 13:return EN(e,t,r);case 4:return _x(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=_o(t,null,n,r):kr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),Zv(e,t,n,a,r);case 7:return kr(e,t,t.pendingProps,r),t.child;case 8:return kr(e,t,t.pendingProps.children,r),t.child;case 12:return kr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,mt(Ch,n._currentValue),n._currentValue=o,i!==null)if(Bs(i.value,o)){if(i.children===a.children&&!zr.current){t=Un(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var d=i.dependencies;if(d!==null){o=i.child;for(var c=d.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=On(-1,r&-r),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),H0(i.return,r,t),d.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(me(341));o.lanes|=r,d=o.alternate,d!==null&&(d.lanes|=r),H0(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,uo(t,r),a=ws(a),n=n(a),t.flags|=1,kr(e,t,n,r),t.child;case 14:return n=t.type,a=Es(n,t.pendingProps),a=Es(n.type,a),Gv(e,t,n,a,r);case 15:return _N(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:Es(n,a),ju(e,t),t.tag=1,Br(n)?(e=!0,Nh(t)):e=!1,uo(t,r),kN(t,n,a),q0(t,n,a,r),G0(null,t,n,!0,e,r);case 19:return IN(e,t,r);case 22:return SN(e,t,r)}throw Error(me(156,t.tag))};function qN(e,t){return b1(e,t)}function u5(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ys(e,t,r,n){return new u5(e,t,r,n)}function Bx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function h5(e){if(typeof e=="function")return Bx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ax)return 11;if(e===ix)return 14}return 2}function wa(e,t){var r=e.alternate;return r===null?(r=ys(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Su(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Bx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case qi:return hi(r.children,a,i,t);case nx:o=8,a|=8;break;case p0:return e=ys(12,r,t,a|2),e.elementType=p0,e.lanes=i,e;case x0:return e=ys(13,r,t,a),e.elementType=x0,e.lanes=i,e;case y0:return e=ys(19,r,t,a),e.elementType=y0,e.lanes=i,e;case r1:return Nm(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case e1:o=10;break e;case t1:o=9;break e;case ax:o=11;break e;case ix:o=14;break e;case ea:o=16,n=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return t=ys(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function hi(e,t,r,n){return e=ys(7,e,n,t),e.lanes=r,e}function Nm(e,t,r,n){return e=ys(22,e,n,t),e.elementType=r1,e.lanes=r,e.stateNode={isHidden:!1},e}function ff(e,t,r){return e=ys(6,e,null,t),e.lanes=r,e}function pf(e,t,r){return t=ys(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function m5(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gg(0),this.expirationTimes=Gg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gg(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function $x(e,t,r,n,a,i,o,d,c){return e=new m5(e,t,r,d,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ys(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nx(i),e}function g5(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wi,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function KN(e){if(!e)return Ia;e=e._reactInternals;e:{if(Pi(e)!==e||e.tag!==1)throw Error(me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Br(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(me(171))}if(e.tag===1){var r=e.type;if(Br(r))return K1(e,r,t)}return t}function ZN(e,t,r,n,a,i,o,d,c){return e=$x(r,n,!0,e,a,i,o,d,c),e.context=KN(null),r=e.current,n=Sr(),a=va(r),i=On(n,a),i.callback=t??null,ya(r,i,a),e.current.lanes=a,Yd(e,a,n),$r(e,n),e}function _m(e,t,r,n){var a=t.current,i=Sr(),o=va(a);return r=KN(r),t.context===null?t.context=r:t.pendingContext=r,t=On(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ya(a,t,o),e!==null&&(zs(e,a,o,i),vu(e,a,o)),o}function Dh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ow(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ux(e,t){ow(e,t),(e=e.alternate)&&ow(e,t)}function f5(){return null}var GN=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vx(e){this._internalRoot=e}Sm.prototype.render=Vx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(me(409));_m(e,t,null,null)};Sm.prototype.unmount=Vx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;wi(function(){_m(null,e,null,null)}),t[Bn]=null}};function Sm(e){this._internalRoot=e}Sm.prototype.unstable_scheduleHydration=function(e){if(e){var t=S1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ra.length&&t!==0&&t<ra[r].priority;r++);ra.splice(r,0,e),r===0&&P1(e)}};function Hx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lw(){}function p5(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var h=Dh(o);i.call(h)}}var o=ZN(t,n,e,0,null,!1,!1,"",lw);return e._reactRootContainer=o,e[Bn]=o.current,Nd(e.nodeType===8?e.parentNode:e),wi(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var d=n;n=function(){var h=Dh(c);d.call(h)}}var c=$x(e,0,!1,null,null,!1,!1,"",lw);return e._reactRootContainer=c,e[Bn]=c.current,Nd(e.nodeType===8?e.parentNode:e),wi(function(){_m(t,c,r,n)}),c}function Pm(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var d=a;a=function(){var c=Dh(o);d.call(c)}}_m(t,o,e,a)}else o=p5(r,t,e,a,n);return Dh(o)}N1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Nl(t.pendingLanes);r!==0&&(dx(t,r|1),$r(t,Et()),!(Ze&6)&&(Po=Et()+500,Fa()))}break;case 13:wi(function(){var n=$n(e,1);if(n!==null){var a=Sr();zs(n,e,1,a)}}),Ux(e,1)}};cx=function(e){if(e.tag===13){var t=$n(e,134217728);if(t!==null){var r=Sr();zs(t,e,134217728,r)}Ux(e,134217728)}};_1=function(e){if(e.tag===13){var t=va(e),r=$n(e,t);if(r!==null){var n=Sr();zs(r,e,t,n)}Ux(e,t)}};S1=function(){return rt};C1=function(e,t){var r=rt;try{return rt=e,t()}finally{rt=r}};P0=function(e,t,r){switch(t){case"input":if(w0(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ym(n);if(!a)throw Error(me(90));n1(n),w0(n,a)}}}break;case"textarea":i1(e,r);break;case"select":t=r.value,t!=null&&io(e,!!r.multiple,t,!1)}};m1=Dx;g1=wi;var x5={usingClientEntryPoint:!1,Events:[Xd,Yi,ym,u1,h1,Dx]},ml={findFiberByHostInstance:ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y5={bundleType:ml.bundleType,version:ml.version,rendererPackageName:ml.rendererPackageName,rendererConfig:ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=x1(e),e===null?null:e.stateNode},findFiberByHostInstance:ml.findFiberByHostInstance||f5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{gm=Kc.inject(y5),an=Kc}catch{}}ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x5;ss.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hx(t))throw Error(me(200));return g5(e,t,null,r)};ss.createRoot=function(e,t){if(!Hx(e))throw Error(me(299));var r=!1,n="",a=GN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=$x(e,1,!1,null,null,r,!1,n,a),e[Bn]=t.current,Nd(e.nodeType===8?e.parentNode:e),new Vx(t)};ss.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=x1(t),e=e===null?null:e.stateNode,e};ss.flushSync=function(e){return wi(e)};ss.hydrate=function(e,t,r){if(!Cm(t))throw Error(me(200));return Pm(null,e,t,!0,r)};ss.hydrateRoot=function(e,t,r){if(!Hx(e))throw Error(me(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=GN;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=ZN(t,null,e,1,r??null,a,!1,i,o),e[Bn]=t.current,Nd(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Sm(t)};ss.render=function(e,t,r){if(!Cm(t))throw Error(me(200));return Pm(null,e,t,!1,r)};ss.unmountComponentAtNode=function(e){if(!Cm(e))throw Error(me(40));return e._reactRootContainer?(wi(function(){Pm(null,null,e,!1,function(){e._reactRootContainer=null,e[Bn]=null})}),!0):!1};ss.unstable_batchedUpdates=Dx;ss.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Cm(r))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return Pm(e,t,r,!1,n)};ss.version="18.3.1-next-f1338f8080-20240426";function YN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(YN)}catch(e){console.error(e)}}YN(),Yj.exports=ss;var JN=Yj.exports,dw=JN;g0.createRoot=dw.createRoot,g0.hydrateRoot=dw.hydrateRoot;var XN={exports:{}},QN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=_;function b5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var v5=typeof Object.is=="function"?Object.is:b5,w5=Eo.useState,k5=Eo.useEffect,j5=Eo.useLayoutEffect,N5=Eo.useDebugValue;function _5(e,t){var r=t(),n=w5({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return j5(function(){a.value=r,a.getSnapshot=t,xf(a)&&i({inst:a})},[e,r,t]),k5(function(){return xf(a)&&i({inst:a}),e(function(){xf(a)&&i({inst:a})})},[e]),N5(r),r}function xf(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!v5(e,r)}catch{return!0}}function S5(e,t){return t()}var C5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?S5:_5;QN.useSyncExternalStore=Eo.useSyncExternalStore!==void 0?Eo.useSyncExternalStore:C5;XN.exports=QN;var P5=XN.exports,e2={exports:{}},t2={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=_,E5=P5;function I5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var T5=typeof Object.is=="function"?Object.is:I5,L5=E5.useSyncExternalStore,M5=Em.useRef,A5=Em.useEffect,O5=Em.useMemo,R5=Em.useDebugValue;t2.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=M5(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=O5(function(){function c(w){if(!h){if(h=!0,m=w,w=n(w),a!==void 0&&o.hasValue){var x=o.value;if(a(x,w))return f=x}return f=w}if(x=f,T5(m,w))return x;var k=n(w);return a!==void 0&&a(x,k)?(m=w,x):(m=w,f=k)}var h=!1,m,f,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,n,a]);var d=L5(e,i[0],i[1]);return A5(function(){o.hasValue=!0,o.value=d},[d]),R5(d),d};e2.exports=t2;var D5=e2.exports;function F5(e){e()}let r2=F5;const z5=e=>r2=e,B5=()=>r2,cw=Symbol.for("react-redux-context"),uw=typeof globalThis<"u"?globalThis:{};function $5(){var e;if(!_.createContext)return{};const t=(e=uw[cw])!=null?e:uw[cw]=new Map;let r=t.get(_.createContext);return r||(r=_.createContext(null),t.set(_.createContext,r)),r}const Ta=$5();function Wx(e=Ta){return function(){return _.useContext(e)}}const s2=Wx(),U5=()=>{throw new Error("uSES not initialized!")};let n2=U5;const V5=e=>{n2=e},H5=(e,t)=>e===t;function W5(e=Ta){const t=e===Ta?s2:Wx(e);return function(n,a={}){const{equalityFn:i=H5,stabilityCheck:o=void 0,noopCheck:d=void 0}=typeof a=="function"?{equalityFn:a}:a,{store:c,subscription:h,getServerState:m,stabilityCheck:f,noopCheck:p}=t();_.useRef(!0);const w=_.useCallback({[n.name](k){return n(k)}}[n.name],[n,f,o]),x=n2(h.addNestedSub,c.getState,m||c.getState,w,i);return _.useDebugValue(x),x}}const we=W5();var a2={exports:{}},st={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jt=typeof Symbol=="function"&&Symbol.for,qx=Jt?Symbol.for("react.element"):60103,Kx=Jt?Symbol.for("react.portal"):60106,Im=Jt?Symbol.for("react.fragment"):60107,Tm=Jt?Symbol.for("react.strict_mode"):60108,Lm=Jt?Symbol.for("react.profiler"):60114,Mm=Jt?Symbol.for("react.provider"):60109,Am=Jt?Symbol.for("react.context"):60110,Zx=Jt?Symbol.for("react.async_mode"):60111,Om=Jt?Symbol.for("react.concurrent_mode"):60111,Rm=Jt?Symbol.for("react.forward_ref"):60112,Dm=Jt?Symbol.for("react.suspense"):60113,q5=Jt?Symbol.for("react.suspense_list"):60120,Fm=Jt?Symbol.for("react.memo"):60115,zm=Jt?Symbol.for("react.lazy"):60116,K5=Jt?Symbol.for("react.block"):60121,Z5=Jt?Symbol.for("react.fundamental"):60117,G5=Jt?Symbol.for("react.responder"):60118,Y5=Jt?Symbol.for("react.scope"):60119;function as(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case qx:switch(e=e.type,e){case Zx:case Om:case Im:case Lm:case Tm:case Dm:return e;default:switch(e=e&&e.$$typeof,e){case Am:case Rm:case zm:case Fm:case Mm:return e;default:return t}}case Kx:return t}}}function i2(e){return as(e)===Om}st.AsyncMode=Zx;st.ConcurrentMode=Om;st.ContextConsumer=Am;st.ContextProvider=Mm;st.Element=qx;st.ForwardRef=Rm;st.Fragment=Im;st.Lazy=zm;st.Memo=Fm;st.Portal=Kx;st.Profiler=Lm;st.StrictMode=Tm;st.Suspense=Dm;st.isAsyncMode=function(e){return i2(e)||as(e)===Zx};st.isConcurrentMode=i2;st.isContextConsumer=function(e){return as(e)===Am};st.isContextProvider=function(e){return as(e)===Mm};st.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===qx};st.isForwardRef=function(e){return as(e)===Rm};st.isFragment=function(e){return as(e)===Im};st.isLazy=function(e){return as(e)===zm};st.isMemo=function(e){return as(e)===Fm};st.isPortal=function(e){return as(e)===Kx};st.isProfiler=function(e){return as(e)===Lm};st.isStrictMode=function(e){return as(e)===Tm};st.isSuspense=function(e){return as(e)===Dm};st.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Im||e===Om||e===Lm||e===Tm||e===Dm||e===q5||typeof e=="object"&&e!==null&&(e.$$typeof===zm||e.$$typeof===Fm||e.$$typeof===Mm||e.$$typeof===Am||e.$$typeof===Rm||e.$$typeof===Z5||e.$$typeof===G5||e.$$typeof===Y5||e.$$typeof===K5)};st.typeOf=as;a2.exports=st;var J5=a2.exports,o2=J5,X5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Q5={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l2={};l2[o2.ForwardRef]=X5;l2[o2.Memo]=Q5;var ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx=Symbol.for("react.element"),Yx=Symbol.for("react.portal"),Bm=Symbol.for("react.fragment"),$m=Symbol.for("react.strict_mode"),Um=Symbol.for("react.profiler"),Vm=Symbol.for("react.provider"),Hm=Symbol.for("react.context"),eP=Symbol.for("react.server_context"),Wm=Symbol.for("react.forward_ref"),qm=Symbol.for("react.suspense"),Km=Symbol.for("react.suspense_list"),Zm=Symbol.for("react.memo"),Gm=Symbol.for("react.lazy"),tP=Symbol.for("react.offscreen"),d2;d2=Symbol.for("react.module.reference");function _s(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Gx:switch(e=e.type,e){case Bm:case Um:case $m:case qm:case Km:return e;default:switch(e=e&&e.$$typeof,e){case eP:case Hm:case Wm:case Gm:case Zm:case Vm:return e;default:return t}}case Yx:return t}}}ot.ContextConsumer=Hm;ot.ContextProvider=Vm;ot.Element=Gx;ot.ForwardRef=Wm;ot.Fragment=Bm;ot.Lazy=Gm;ot.Memo=Zm;ot.Portal=Yx;ot.Profiler=Um;ot.StrictMode=$m;ot.Suspense=qm;ot.SuspenseList=Km;ot.isAsyncMode=function(){return!1};ot.isConcurrentMode=function(){return!1};ot.isContextConsumer=function(e){return _s(e)===Hm};ot.isContextProvider=function(e){return _s(e)===Vm};ot.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gx};ot.isForwardRef=function(e){return _s(e)===Wm};ot.isFragment=function(e){return _s(e)===Bm};ot.isLazy=function(e){return _s(e)===Gm};ot.isMemo=function(e){return _s(e)===Zm};ot.isPortal=function(e){return _s(e)===Yx};ot.isProfiler=function(e){return _s(e)===Um};ot.isStrictMode=function(e){return _s(e)===$m};ot.isSuspense=function(e){return _s(e)===qm};ot.isSuspenseList=function(e){return _s(e)===Km};ot.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Bm||e===Um||e===$m||e===qm||e===Km||e===tP||typeof e=="object"&&e!==null&&(e.$$typeof===Gm||e.$$typeof===Zm||e.$$typeof===Vm||e.$$typeof===Hm||e.$$typeof===Wm||e.$$typeof===d2||e.getModuleId!==void 0)};ot.typeOf=_s;function rP(){const e=B5();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){let n=[],a=t;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!a||t===null||(a=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const hw={notify(){},get:()=>[]};function sP(e,t){let r,n=hw,a=0,i=!1;function o(k){m();const y=n.subscribe(k);let b=!1;return()=>{b||(b=!0,y(),f())}}function d(){n.notify()}function c(){x.onStateChange&&x.onStateChange()}function h(){return i}function m(){a++,r||(r=e.subscribe(c),n=rP())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=hw)}function p(){i||(i=!0,m())}function w(){i&&(i=!1,f())}const x={addNestedSub:o,notifyNestedSubs:d,handleChangeWrapper:c,isSubscribed:h,trySubscribe:p,tryUnsubscribe:w,getListeners:()=>n};return x}const nP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aP=nP?_.useLayoutEffect:_.useEffect;function iP({store:e,context:t,children:r,serverState:n,stabilityCheck:a="once",noopCheck:i="once"}){const o=_.useMemo(()=>{const h=sP(e);return{store:e,subscription:h,getServerState:n?()=>n:void 0,stabilityCheck:a,noopCheck:i}},[e,n,a,i]),d=_.useMemo(()=>e.getState(),[e]);aP(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),d!==e.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,d]);const c=t||Ta;return _.createElement(c.Provider,{value:o},r)}function c2(e=Ta){const t=e===Ta?s2:Wx(e);return function(){const{store:n}=t();return n}}const oP=c2();function lP(e=Ta){const t=e===Ta?oP:c2(e);return function(){return t().dispatch}}const nt=lP();V5(D5.useSyncExternalStoreWithSelector);z5(JN.unstable_batchedUpdates);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Md(){return Md=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Md.apply(this,arguments)}var da;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(da||(da={}));const mw="popstate";function dP(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:d}=n.location;return op("",{pathname:i,search:o,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Fh(a)}return uP(t,r,null,e)}function Tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function u2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cP(){return Math.random().toString(36).substr(2,8)}function gw(e,t){return{usr:e.state,key:e.key,idx:t}}function op(e,t,r,n){return r===void 0&&(r=null),Md({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Bo(t):t,{state:r,key:t&&t.key||n||cP()})}function Fh(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Bo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function uP(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,d=da.Pop,c=null,h=m();h==null&&(h=0,o.replaceState(Md({},o.state,{idx:h}),""));function m(){return(o.state||{idx:null}).idx}function f(){d=da.Pop;let y=m(),b=y==null?null:y-h;h=y,c&&c({action:d,location:k.location,delta:b})}function p(y,b){d=da.Push;let j=op(k.location,y,b);h=m()+1;let N=gw(j,h),C=k.createHref(j);try{o.pushState(N,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;a.location.assign(C)}i&&c&&c({action:d,location:k.location,delta:1})}function w(y,b){d=da.Replace;let j=op(k.location,y,b);h=m();let N=gw(j,h),C=k.createHref(j);o.replaceState(N,"",C),i&&c&&c({action:d,location:k.location,delta:0})}function x(y){let b=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof y=="string"?y:Fh(y);return j=j.replace(/ $/,"%20"),Tt(b,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,b)}let k={get action(){return d},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(mw,f),c=y,()=>{a.removeEventListener(mw,f),c=null}},createHref(y){return t(a,y)},createURL:x,encodeLocation(y){let b=x(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:w,go(y){return o.go(y)}};return k}var fw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(fw||(fw={}));function hP(e,t,r){return r===void 0&&(r="/"),mP(e,t,r)}function mP(e,t,r,n){let a=typeof t=="string"?Bo(t):t,i=Jx(a.pathname||"/",r);if(i==null)return null;let o=h2(e);gP(o);let d=null;for(let c=0;d==null&&c<o.length;++c){let h=SP(i);d=jP(o[c],h)}return d}function h2(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,d)=>{let c={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Tt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let h=ka([n,c.relativePath]),m=r.concat(c);i.children&&i.children.length>0&&(Tt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),h2(i.children,t,m,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:wP(h,i.index),routesMeta:m})};return e.forEach((i,o)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))a(i,o);else for(let c of m2(i.path))a(i,o,c)}),t}function m2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=m2(n.join("/")),d=[];return d.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&d.push(...o),d.map(c=>e.startsWith("/")&&c===""?"/":c)}function gP(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:kP(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const fP=/^:[\w-]+$/,pP=3,xP=2,yP=1,bP=10,vP=-2,pw=e=>e==="*";function wP(e,t){let r=e.split("/"),n=r.length;return r.some(pw)&&(n+=vP),t&&(n+=xP),r.filter(a=>!pw(a)).reduce((a,i)=>a+(fP.test(i)?pP:i===""?yP:bP),n)}function kP(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function jP(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let d=0;d<n.length;++d){let c=n[d],h=d===n.length-1,m=i==="/"?t:t.slice(i.length)||"/",f=NP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},m),p=c.route;if(!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:ka([i,f.pathname]),pathnameBase:IP(ka([i,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(i=ka([i,f.pathnameBase]))}return o}function NP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=_P(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((h,m,f)=>{let{paramName:p,isOptional:w}=m;if(p==="*"){let k=d[f]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const x=d[f];return w&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:e}}function _P(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),u2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,c)=>(n.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function SP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return u2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Jx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function CP(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Bo(e):e;return{pathname:r?r.startsWith("/")?r:PP(r,t):t,search:TP(n),hash:LP(a)}}function PP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function yf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EP(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Xx(e,t){let r=EP(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Qx(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Bo(e):(a=Md({},e),Tt(!a.pathname||!a.pathname.includes("?"),yf("?","pathname","search",a)),Tt(!a.pathname||!a.pathname.includes("#"),yf("#","pathname","hash",a)),Tt(!a.search||!a.search.includes("#"),yf("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,d;if(o==null)d=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;a.pathname=p.join("/")}d=f>=0?t[f]:"/"}let c=CP(a,d),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||m)&&(c.pathname+="/"),c}const ka=e=>e.join("/").replace(/\/\/+/g,"/"),IP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),TP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function MP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const g2=["post","put","patch","delete"];new Set(g2);const AP=["get",...g2];new Set(AP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ad(){return Ad=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ad.apply(this,arguments)}const ey=_.createContext(null),OP=_.createContext(null),za=_.createContext(null),Ym=_.createContext(null),xn=_.createContext({outlet:null,matches:[],isDataRoute:!1}),f2=_.createContext(null);function RP(e,t){let{relative:r}=t===void 0?{}:t;$o()||Tt(!1);let{basename:n,navigator:a}=_.useContext(za),{hash:i,pathname:o,search:d}=y2(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:ka([n,o])),a.createHref({pathname:c,search:d,hash:i})}function $o(){return _.useContext(Ym)!=null}function Ir(){return $o()||Tt(!1),_.useContext(Ym).location}function p2(e){_.useContext(za).static||_.useLayoutEffect(e)}function is(){let{isDataRoute:e}=_.useContext(xn);return e?JP():DP()}function DP(){$o()||Tt(!1);let e=_.useContext(ey),{basename:t,future:r,navigator:n}=_.useContext(za),{matches:a}=_.useContext(xn),{pathname:i}=Ir(),o=JSON.stringify(Xx(a,r.v7_relativeSplatPath)),d=_.useRef(!1);return p2(()=>{d.current=!0}),_.useCallback(function(h,m){if(m===void 0&&(m={}),!d.current)return;if(typeof h=="number"){n.go(h);return}let f=Qx(h,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ka([t,f.pathname])),(m.replace?n.replace:n.push)(f,m.state,m)},[t,n,o,i,e])}const FP=_.createContext(null);function zP(e){let t=_.useContext(xn).outlet;return t&&_.createElement(FP.Provider,{value:e},t)}function x2(){let{matches:e}=_.useContext(xn),t=e[e.length-1];return t?t.params:{}}function y2(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=_.useContext(za),{matches:a}=_.useContext(xn),{pathname:i}=Ir(),o=JSON.stringify(Xx(a,n.v7_relativeSplatPath));return _.useMemo(()=>Qx(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function BP(e,t){return $P(e,t)}function $P(e,t,r,n){$o()||Tt(!1);let{navigator:a}=_.useContext(za),{matches:i}=_.useContext(xn),o=i[i.length-1],d=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Ir(),m;if(t){var f;let y=typeof t=="string"?Bo(t):t;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Tt(!1),m=y}else m=h;let p=m.pathname||"/",w=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");w="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=hP(e,{pathname:w}),k=qP(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},d,y.params),pathname:ka([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ka([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&k?_.createElement(Ym.Provider,{value:{location:Ad({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:da.Pop}},k):k}function UP(){let e=YP(),t=MP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:a},r):null,null)}const VP=_.createElement(UP,null);class HP extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(xn.Provider,{value:this.props.routeContext},_.createElement(f2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WP(e){let{routeContext:t,match:r,children:n}=e,a=_.useContext(ey);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(xn.Provider,{value:t},n)}function qP(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,d=(a=r)==null?void 0:a.errors;if(d!=null){let m=o.findIndex(f=>f.route.id&&(d==null?void 0:d[f.route.id])!==void 0);m>=0||Tt(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,h=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<o.length;m++){let f=o[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(h=m),f.route.id){let{loaderData:p,errors:w}=r,x=f.route.loader&&p[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||x){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,f,p)=>{let w,x=!1,k=null,y=null;r&&(w=d&&f.route.id?d[f.route.id]:void 0,k=f.route.errorElement||VP,c&&(h<0&&p===0?(XP("route-fallback"),x=!0,y=null):h===p&&(x=!0,y=f.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,p+1)),j=()=>{let N;return w?N=k:x?N=y:f.route.Component?N=_.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=m,_.createElement(WP,{match:f,routeContext:{outlet:m,matches:b,isDataRoute:r!=null},children:N})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?_.createElement(HP,{location:r.location,revalidation:r.revalidation,component:k,error:w,children:j(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):j()},null)}var b2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(b2||{}),v2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(v2||{});function KP(e){let t=_.useContext(ey);return t||Tt(!1),t}function ZP(e){let t=_.useContext(OP);return t||Tt(!1),t}function GP(e){let t=_.useContext(xn);return t||Tt(!1),t}function w2(e){let t=GP(),r=t.matches[t.matches.length-1];return r.route.id||Tt(!1),r.route.id}function YP(){var e;let t=_.useContext(f2),r=ZP(),n=w2();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function JP(){let{router:e}=KP(b2.UseNavigateStable),t=w2(v2.UseNavigateStable),r=_.useRef(!1);return p2(()=>{r.current=!0}),_.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Ad({fromRouteId:t},i)))},[e,t])}const xw={};function XP(e,t,r){xw[e]||(xw[e]=!0)}function QP(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Od(e){let{to:t,replace:r,state:n,relative:a}=e;$o()||Tt(!1);let{future:i,static:o}=_.useContext(za),{matches:d}=_.useContext(xn),{pathname:c}=Ir(),h=is(),m=Qx(t,Xx(d,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(m);return _.useEffect(()=>h(JSON.parse(f),{replace:r,state:n,relative:a}),[h,f,a,r,n]),null}function eE(e){return zP(e.context)}function Fe(e){Tt(!1)}function tE(e){let{basename:t="/",children:r=null,location:n,navigationType:a=da.Pop,navigator:i,static:o=!1,future:d}=e;$o()&&Tt(!1);let c=t.replace(/^\/*/,"/"),h=_.useMemo(()=>({basename:c,navigator:i,static:o,future:Ad({v7_relativeSplatPath:!1},d)}),[c,d,i,o]);typeof n=="string"&&(n=Bo(n));let{pathname:m="/",search:f="",hash:p="",state:w=null,key:x="default"}=n,k=_.useMemo(()=>{let y=Jx(m,c);return y==null?null:{location:{pathname:y,search:f,hash:p,state:w,key:x},navigationType:a}},[c,m,f,p,w,x,a]);return k==null?null:_.createElement(za.Provider,{value:h},_.createElement(Ym.Provider,{children:r,value:k}))}function rE(e){let{children:t,location:r}=e;return BP(lp(t),r)}new Promise(()=>{});function lp(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,a)=>{if(!_.isValidElement(n))return;let i=[...t,a];if(n.type===_.Fragment){r.push.apply(r,lp(n.props.children,i));return}n.type!==Fe&&Tt(!1),!n.props.index||!n.props.children||Tt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=lp(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dp.apply(this,arguments)}function sE(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function nE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function aE(e,t){return e.button===0&&(!t||t==="_self")&&!nE(e)}function cp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function iE(e,t){let r=cp(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const oE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lE="6";try{window.__reactRouterVersion=lE}catch{}const dE="startTransition",yw=l6[dE];function cE(e){let{basename:t,children:r,future:n,window:a}=e,i=_.useRef();i.current==null&&(i.current=dP({window:a,v5Compat:!0}));let o=i.current,[d,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:h}=n||{},m=_.useCallback(f=>{h&&yw?yw(()=>c(f)):c(f)},[c,h]);return _.useLayoutEffect(()=>o.listen(m),[o,m]),_.useEffect(()=>QP(n),[n]),_.createElement(tE,{basename:t,children:r,location:d.location,navigationType:d.action,navigator:o,future:n})}const uE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=_.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:d,target:c,to:h,preventScrollReset:m,viewTransition:f}=t,p=sE(t,oE),{basename:w}=_.useContext(za),x,k=!1;if(typeof h=="string"&&hE.test(h)&&(x=h,uE))try{let N=new URL(window.location.href),C=h.startsWith("//")?new URL(N.protocol+h):new URL(h),P=Jx(C.pathname,w);C.origin===N.origin&&P!=null?h=P+C.search+C.hash:k=!0}catch{}let y=RP(h,{relative:a}),b=mE(h,{replace:o,state:d,target:c,preventScrollReset:m,relative:a,viewTransition:f});function j(N){n&&n(N),N.defaultPrevented||b(N)}return _.createElement("a",dp({},p,{href:x||y,onClick:k||i?n:j,ref:r,target:c}))});var bw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bw||(bw={}));var vw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vw||(vw={}));function mE(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:d}=t===void 0?{}:t,c=is(),h=Ir(),m=y2(e,{relative:o});return _.useCallback(f=>{if(aE(f,r)){f.preventDefault();let p=n!==void 0?n:Fh(h)===Fh(m);c(e,{replace:p,state:a,preventScrollReset:i,relative:o,viewTransition:d})}},[h,c,m,n,a,r,e,i,o,d])}function gE(e){let t=_.useRef(cp(e)),r=_.useRef(!1),n=Ir(),a=_.useMemo(()=>iE(n.search,r.current?null:t.current),[n.search]),i=is(),o=_.useCallback((d,c)=>{const h=cp(typeof d=="function"?d(a):d);r.current=!0,i("?"+h,c)},[i,a]);return[a,o]}let fE={data:""},pE=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||fE},xE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yE=/\/\*[^]*?\*\/|  +/g,ww=/\n+/g,na=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?na(o,i):i+"{"+na(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=na(o,t?t.replace(/([^,])+/g,d=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,d):d?d+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=na.p?na.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},jn={},k2=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+k2(e[r]);return t}return e},bE=(e,t,r,n,a)=>{let i=k2(e),o=jn[i]||(jn[i]=(c=>{let h=0,m=11;for(;h<c.length;)m=101*m+c.charCodeAt(h++)>>>0;return"go"+m})(i));if(!jn[o]){let c=i!==e?e:(h=>{let m,f,p=[{}];for(;m=xE.exec(h.replace(yE,""));)m[4]?p.shift():m[3]?(f=m[3].replace(ww," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][m[1]]=m[2].replace(ww," ").trim();return p[0]})(e);jn[o]=na(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let d=r&&jn.g?jn.g:null;return r&&(jn.g=jn[o]),((c,h,m,f)=>{f?h.data=h.data.replace(f,c):h.data.indexOf(c)===-1&&(h.data=m?c+h.data:h.data+c)})(jn[o],t,n,d),o},vE=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let d=o(r),c=d&&d.props&&d.props.className||/^go/.test(d)&&d;o=c?"."+c:d&&typeof d=="object"?d.props?"":na(d,""):d===!1?"":d}return n+a+(o??"")},"");function Jm(e){let t=this||{},r=e.call?e(t.p):e;return bE(r.unshift?r.raw?vE(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,pE(t.target),t.g,t.o,t.k)}let j2,up,hp;Jm.bind({g:1});let Vn=Jm.bind({k:1});function wE(e,t,r,n){na.p=t,j2=e,up=r,hp=n}function Ba(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let d=Object.assign({},i),c=d.className||a.className;r.p=Object.assign({theme:up&&up()},d),r.o=/ *go\d+/.test(c),d.className=Jm.apply(r,n)+(c?" "+c:"");let h=e;return e[0]&&(h=d.as||e,delete d.as),hp&&h[0]&&hp(d),j2(h,d)}return a}}var kE=e=>typeof e=="function",zh=(e,t)=>kE(e)?e(t):e,jE=(()=>{let e=0;return()=>(++e).toString()})(),N2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),NE=20,ty="default",_2=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return _2(e,{type:e.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Cu=[],S2={toasts:[],pausedAt:void 0,settings:{toastLimit:NE}},sn={},C2=(e,t=ty)=>{sn[t]=_2(sn[t]||S2,e),Cu.forEach(([r,n])=>{r===t&&n(sn[t])})},P2=e=>Object.keys(sn).forEach(t=>C2(e,t)),_E=e=>Object.keys(sn).find(t=>sn[t].toasts.some(r=>r.id===e)),Xm=(e=ty)=>t=>{C2(t,e)},SE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},CE=(e={},t=ty)=>{let[r,n]=_.useState(sn[t]||S2),a=_.useRef(sn[t]);_.useEffect(()=>(a.current!==sn[t]&&n(sn[t]),Cu.push([t,n]),()=>{let o=Cu.findIndex(([d])=>d===t);o>-1&&Cu.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var d,c,h;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((d=e[o.type])==null?void 0:d.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||SE[o.type],style:{...e.style,...(h=e[o.type])==null?void 0:h.style,...o.style}}});return{...r,toasts:i}},PE=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||jE()}),ec=e=>(t,r)=>{let n=PE(t,e,r);return Xm(n.toasterId||_E(n.id))({type:2,toast:n}),n.id},Qe=(e,t)=>ec("blank")(e,t);Qe.error=ec("error");Qe.success=ec("success");Qe.loading=ec("loading");Qe.custom=ec("custom");Qe.dismiss=(e,t)=>{let r={type:3,toastId:e};t?Xm(t)(r):P2(r)};Qe.dismissAll=e=>Qe.dismiss(void 0,e);Qe.remove=(e,t)=>{let r={type:4,toastId:e};t?Xm(t)(r):P2(r)};Qe.removeAll=e=>Qe.remove(void 0,e);Qe.promise=(e,t,r)=>{let n=Qe.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?zh(t.success,a):void 0;return i?Qe.success(i,{id:n,...r,...r==null?void 0:r.success}):Qe.dismiss(n),a}).catch(a=>{let i=t.error?zh(t.error,a):void 0;i?Qe.error(i,{id:n,...r,...r==null?void 0:r.error}):Qe.dismiss(n)}),e};var EE=1e3,IE=(e,t="default")=>{let{toasts:r,pausedAt:n}=CE(e,t),a=_.useRef(new Map).current,i=_.useCallback((f,p=EE)=>{if(a.has(f))return;let w=setTimeout(()=>{a.delete(f),o({type:4,toastId:f})},p);a.set(f,w)},[]);_.useEffect(()=>{if(n)return;let f=Date.now(),p=r.map(w=>{if(w.duration===1/0)return;let x=(w.duration||0)+w.pauseDuration-(f-w.createdAt);if(x<0){w.visible&&Qe.dismiss(w.id);return}return setTimeout(()=>Qe.dismiss(w.id,t),x)});return()=>{p.forEach(w=>w&&clearTimeout(w))}},[r,n,t]);let o=_.useCallback(Xm(t),[t]),d=_.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=_.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),h=_.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),m=_.useCallback((f,p)=>{let{reverseOrder:w=!1,gutter:x=8,defaultPosition:k}=p||{},y=r.filter(N=>(N.position||k)===(f.position||k)&&N.height),b=y.findIndex(N=>N.id===f.id),j=y.filter((N,C)=>C<b&&N.visible).length;return y.filter(N=>N.visible).slice(...w?[j+1]:[0,j]).reduce((N,C)=>N+(C.height||0)+x,0)},[r]);return _.useEffect(()=>{r.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let p=a.get(f.id);p&&(clearTimeout(p),a.delete(f.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:d,endPause:h,calculateOffset:m}}},TE=Vn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,LE=Vn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ME=Vn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,AE=Ba("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${TE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${LE} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ME} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,OE=Vn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,RE=Ba("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${OE} 1s linear infinite;
`,DE=Vn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,FE=Vn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zE=Ba("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${DE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${FE} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,BE=Ba("div")`
  position: absolute;
`,$E=Ba("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,UE=Vn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,VE=Ba("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${UE} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,HE=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?_.createElement(VE,null,t):t:r==="blank"?null:_.createElement($E,null,_.createElement(RE,{...n}),r!=="loading"&&_.createElement(BE,null,r==="error"?_.createElement(AE,{...n}):_.createElement(zE,{...n})))},WE=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qE=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,KE="0%{opacity:0;} 100%{opacity:1;}",ZE="0%{opacity:1;} 100%{opacity:0;}",GE=Ba("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,YE=Ba("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,JE=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=N2()?[KE,ZE]:[WE(r),qE(r)];return{animation:t?`${Vn(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Vn(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},XE=_.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?JE(e.position||t||"top-center",e.visible):{opacity:0},i=_.createElement(HE,{toast:e}),o=_.createElement(YE,{...e.ariaProps},zh(e.message,e));return _.createElement(GE,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):_.createElement(_.Fragment,null,i,o))});wE(_.createElement);var QE=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=_.useCallback(o=>{if(o){let d=()=>{let c=o.getBoundingClientRect().height;n(e,c)};d(),new MutationObserver(d).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return _.createElement("div",{ref:i,className:t,style:r},a)},eI=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:N2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},tI=Jm`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Zc=16,rI=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,toasterId:i,containerStyle:o,containerClassName:d})=>{let{toasts:c,handlers:h}=IE(r,i);return _.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Zc,left:Zc,right:Zc,bottom:Zc,pointerEvents:"none",...o},className:d,onMouseEnter:h.startPause,onMouseLeave:h.endPause},c.map(m=>{let f=m.position||t,p=h.calculateOffset(m,{reverseOrder:e,gutter:n,defaultPosition:t}),w=eI(f,p);return _.createElement(QE,{id:m.id,key:m.id,onHeightUpdate:h.updateHeight,className:m.visible?tI:"",style:w},m.type==="custom"?zh(m.message,m):a?a(m):_.createElement(XE,{toast:m,position:f}))}))},K=Qe;const E2=_.createContext(void 0),I2=({children:e})=>{const[t,r]=_.useState(()=>localStorage.getItem("preferred_language")==="en"?"en":"is"),[n,a]=_.useState({}),[i,o]=_.useState(!1),d=["is","en"],c=_.useCallback((x,k)=>{let y=n[x];return y?(k&&Object.keys(k).forEach(b=>{const j=new RegExp(`\\{${b}\\}`,"g");y=y.replace(j,String(k[b]))}),y):x},[n,t]),h=_.useCallback(async()=>{o(!0);try{const k=await fetch(`http://192.168.8.62:5000/api/translations?locale=${t}`);if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const y=await k.json();if(y.success&&Array.isArray(y.data)){const b=y.data.reduce((j,N)=>(j[N.key]=N.value,j),{});a(b)}else console.error("Failed to load translations: Invalid response format",y),m()}catch(x){console.error("Error loading translations:",x),m()}finally{o(!1)}},[t]),m=()=>{const x={is:{"nav.home":"Heim","nav.products":"Vrur","nav.cart":"Karfa","nav.orders":"Pantanir","nav.profile":"Prfll","nav.admin":"Stjrnbor","nav.login":"Innskrning","nav.logout":"tskrning","common.loading":"Hleur...","common.error":"Villa","common.success":"Tkst","common.save":"Vista","common.cancel":"Htta vi","common.delete":"Eya","common.edit":"Breyta","common.add":"Bta vi","common.search":"Leita","common.filter":"Sa","common.sort":"Raa","common.yes":"J","common.no":"Nei","common.close":"Loka","common.sending":"Sendir...","common.unknown":"ekkt","adminPage.update":"Uppfra","adminPage.updateOrder":"Uppfra pntun","adminPage.newStatus":"N staa","adminPage.assign":"thluta","adminPage.assignDeliveryPerson":"thluta afhendingaraila","adminPage.deliveryPerson":"Afhendingaraili","receipts.print":"Prenta","receipts.downloadPdf":"Skja PDF","receipts.emailReceipt":"Senda kvittun  tlvupsti","receipts.emailSent":"Tlvupstur sendur","receipts.emailSentSuccess":"Kvittun send","receipts.emailSendError":"Villa vi a senda tlvupst","receipts.noEmailAddress":"Enginn tlvupstur skrur","receipts.pdfDownloadError":"Villa vi a skja PDF","receipts.receipt":"Kvittun","receipts.receiptForOrder":"Kvittun fyrir pntun","receipts.settingsNotFound":"Stillingar fundust ekki","receipts.viewReceipt":"Skoa kvittun","receipts.configureInSettings":"Vinsamlegast stilltu kvittanastillingar til a birta kvittunina na","adminMenu.sales":"Slur","adminMenu.orders":"Pantanir","adminMenu.pointOfSale":"Slustaur","adminMenu.deliveries":"Afhendingar","adminMenu.catalog":"Vrulisti","adminMenu.products":"Vrur","adminMenu.categories":"Flokkar","adminMenu.media":"Myndefni","adminMenu.analytics":"Greiningar","adminMenu.analyticsLink":"Greiningar","adminMenu.customers":"Viskiptavinir","adminMenu.reports":"Skrslur","adminMenu.content":"Innihald","adminMenu.banners":"Borar","adminMenu.messages":"Skilabo","adminMenu.notifications":"Tilkynningar","adminMenu.settingsSection":"Stillingar","adminMenu.general":"Almennt","adminMenu.payment":"Greislur","adminMenu.receipts":"Kvittanir","adminMenu.system":"Kerfi","adminMenu.translations":"ingar","adminMenu.demoData":"Snisggn","adminMenu.dashboard":"Mlabor","adminMenu.manageBusinessSettings":"Hafu umsjn me fyrirtkinu og stillingum","adminMenu.helpText":"Vantar ig hjlp? Kktu ","adminMenu.supportCenter":"jnustuveri"},en:{"nav.home":"Home","nav.products":"Products","nav.cart":"Cart","nav.orders":"Orders","nav.profile":"Profile","nav.admin":"Admin","nav.login":"Login","nav.logout":"Logout","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.save":"Save","common.cancel":"Cancel","common.delete":"Delete","common.edit":"Edit","common.add":"Add","common.search":"Search","common.filter":"Filter","common.sort":"Sort","common.yes":"Yes","common.no":"No","common.close":"Close","common.sending":"Sending...","common.unknown":"Unknown","adminPage.update":"Update","adminPage.updateOrder":"Update Order","adminPage.newStatus":"New Status","adminPage.assign":"Assign","adminPage.assignDeliveryPerson":"Assign Delivery Person","adminPage.deliveryPerson":"Delivery Person","receipts.print":"Print","receipts.downloadPdf":"Download PDF","receipts.emailReceipt":"Email Receipt","receipts.emailSent":"Email Sent","receipts.emailSentSuccess":"Receipt sent successfully","receipts.emailSendError":"Error sending email","receipts.noEmailAddress":"No email address on file","receipts.pdfDownloadError":"Error downloading PDF","receipts.receipt":"Receipt","receipts.receiptForOrder":"Receipt for Order","receipts.settingsNotFound":"Settings Not Found","receipts.viewReceipt":"View Receipt","receipts.configureInSettings":"Please configure receipt settings to display your receipt","adminMenu.sales":"Sales","adminMenu.orders":"Orders","adminMenu.pointOfSale":"Point of Sale","adminMenu.deliveries":"Deliveries","adminMenu.catalog":"Catalog","adminMenu.products":"Products","adminMenu.categories":"Categories","adminMenu.media":"Media","adminMenu.analytics":"Analytics","adminMenu.analyticsLink":"Analytics","adminMenu.customers":"Customers","adminMenu.reports":"Reports","adminMenu.content":"Content","adminMenu.banners":"Banners","adminMenu.messages":"Messages","adminMenu.notifications":"Notifications","adminMenu.settingsSection":"Settings","adminMenu.general":"General","adminMenu.payment":"Payment","adminMenu.receipts":"Receipts","adminMenu.system":"System","adminMenu.translations":"Translations","adminMenu.demoData":"Demo Data","adminMenu.dashboard":"Dashboard","adminMenu.manageBusinessSettings":"Manage your business and settings","adminMenu.helpText":"Need help? Check the","adminMenu.supportCenter":"support center"}};a(x[t]||x.is)};_.useEffect(()=>{h()},[h]);const f=_.useCallback(x=>{d.includes(x)?(r(x),localStorage.setItem("preferred_language",x)):console.error(`Invalid language: ${x}. Available languages:`,d)},[d]),p=_.useCallback(async()=>{await h()},[h]),w={currentLanguage:t,setCurrentLanguage:f,t:c,isLoading:i,refreshTranslations:p,availableLanguages:d};return s.jsx(E2.Provider,{value:w,children:e})},pe=()=>{const e=_.useContext(E2);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e},T2=_.createContext(void 0),sI=({children:e})=>{const[t,r]=_.useState(!1),a={sidebarOpen:t,setSidebarOpen:r,toggleSidebar:()=>{r(i=>!i)}};return s.jsx(T2.Provider,{value:a,children:e})},ry=()=>{const e=_.useContext(T2);if(e===void 0)throw new Error("useAdminSidebar must be used within an AdminSidebarProvider");return e};function As(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function La(e){return!!e&&!!e[vt]}function Hn(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var a=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===hI}(e)||Array.isArray(e)||!!e[Pw]||!!(!((t=e.constructor)===null||t===void 0)&&t[Pw])||sy(e)||ny(e))}function ki(e,t,r){r===void 0&&(r=!1),Uo(e)===0?(r?Object.keys:go)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,a){return t(a,n,e)})}function Uo(e){var t=e[vt];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:sy(e)?2:ny(e)?3:0}function mo(e,t){return Uo(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nI(e,t){return Uo(e)===2?e.get(t):e[t]}function L2(e,t,r){var n=Uo(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function M2(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function sy(e){return cI&&e instanceof Map}function ny(e){return uI&&e instanceof Set}function ti(e){return e.o||e.t}function ay(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=O2(e);delete t[vt];for(var r=go(t),n=0;n<r.length;n++){var a=r[n],i=t[a];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function iy(e,t){return t===void 0&&(t=!1),oy(e)||La(e)||!Hn(e)||(Uo(e)>1&&(e.set=e.add=e.clear=e.delete=aI),Object.freeze(e),t&&ki(e,function(r,n){return iy(n,!0)},!0)),e}function aI(){As(2)}function oy(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ln(e){var t=pp[e];return t||As(18,e),t}function iI(e,t){pp[e]||(pp[e]=t)}function mp(){return Rd}function bf(e,t){t&&(ln("Patches"),e.u=[],e.s=[],e.v=t)}function Bh(e){gp(e),e.p.forEach(oI),e.p=null}function gp(e){e===Rd&&(Rd=e.l)}function kw(e){return Rd={p:[],l:Rd,h:e,m:!0,_:0}}function oI(e){var t=e[vt];t.i===0||t.i===1?t.j():t.g=!0}function vf(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||ln("ES5").S(t,e,n),n?(r[vt].P&&(Bh(t),As(4)),Hn(e)&&(e=$h(t,e),t.l||Uh(t,e)),t.u&&ln("Patches").M(r[vt].t,e,t.u,t.s)):e=$h(t,r,[]),Bh(t),t.u&&t.v(t.u,t.s),e!==A2?e:void 0}function $h(e,t,r){if(oy(t))return t;var n=t[vt];if(!n)return ki(t,function(d,c){return jw(e,n,t,d,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Uh(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=n.i===4||n.i===5?n.o=ay(n.k):n.o,i=a,o=!1;n.i===3&&(i=new Set(a),a.clear(),o=!0),ki(i,function(d,c){return jw(e,n,a,d,c,r,o)}),Uh(e,a,!1),r&&e.u&&ln("Patches").N(n,r,e.u,e.s)}return n.o}function jw(e,t,r,n,a,i,o){if(La(a)){var d=$h(e,a,i&&t&&t.i!==3&&!mo(t.R,n)?i.concat(n):void 0);if(L2(r,n,d),!La(d))return;e.m=!1}else o&&r.add(a);if(Hn(a)&&!oy(a)){if(!e.h.D&&e._<1)return;$h(e,a),t&&t.A.l||Uh(e,a)}}function Uh(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&iy(t,r)}function wf(e,t){var r=e[vt];return(r?ti(r):e)[t]}function Nw(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function aa(e){e.P||(e.P=!0,e.l&&aa(e.l))}function kf(e){e.o||(e.o=ay(e.t))}function fp(e,t,r){var n=sy(t)?ln("MapSet").F(t,r):ny(t)?ln("MapSet").T(t,r):e.O?function(a,i){var o=Array.isArray(a),d={i:o?1:0,A:i?i.A:mp(),P:!1,I:!1,R:{},l:i,t:a,k:null,o:null,j:null,C:!1},c=d,h=Dd;o&&(c=[d],h=Sl);var m=Proxy.revocable(c,h),f=m.revoke,p=m.proxy;return d.k=p,d.j=f,p}(t,r):ln("ES5").J(t,r);return(r?r.A:mp()).p.push(n),n}function lI(e){return La(e)||As(22,e),function t(r){if(!Hn(r))return r;var n,a=r[vt],i=Uo(r);if(a){if(!a.P&&(a.i<4||!ln("ES5").K(a)))return a.t;a.I=!0,n=_w(r,i),a.I=!1}else n=_w(r,i);return ki(n,function(o,d){a&&nI(a.t,o)===d||L2(n,o,t(d))}),i===3?new Set(n):n}(e)}function _w(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ay(e)}function dI(){function e(i,o){var d=a[i];return d?d.enumerable=o:a[i]=d={configurable:!0,enumerable:o,get:function(){var c=this[vt];return Dd.get(c,i)},set:function(c){var h=this[vt];Dd.set(h,i,c)}},d}function t(i){for(var o=i.length-1;o>=0;o--){var d=i[o][vt];if(!d.P)switch(d.i){case 5:n(d)&&aa(d);break;case 4:r(d)&&aa(d)}}}function r(i){for(var o=i.t,d=i.k,c=go(d),h=c.length-1;h>=0;h--){var m=c[h];if(m!==vt){var f=o[m];if(f===void 0&&!mo(o,m))return!0;var p=d[m],w=p&&p[vt];if(w?w.t!==f:!M2(p,f))return!0}}var x=!!o[vt];return c.length!==go(o).length+(x?0:1)}function n(i){var o=i.k;if(o.length!==i.t.length)return!0;var d=Object.getOwnPropertyDescriptor(o,o.length-1);if(d&&!d.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var a={};iI("ES5",{J:function(i,o){var d=Array.isArray(i),c=function(m,f){if(m){for(var p=Array(f.length),w=0;w<f.length;w++)Object.defineProperty(p,""+w,e(w,!0));return p}var x=O2(f);delete x[vt];for(var k=go(x),y=0;y<k.length;y++){var b=k[y];x[b]=e(b,m||!!x[b].enumerable)}return Object.create(Object.getPrototypeOf(f),x)}(d,i),h={i:d?5:4,A:o?o.A:mp(),P:!1,I:!1,R:{},l:o,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,vt,{value:h,writable:!0}),c},S:function(i,o,d){d?La(o)&&o[vt].A===i&&t(i.p):(i.u&&function c(h){if(h&&typeof h=="object"){var m=h[vt];if(m){var f=m.t,p=m.k,w=m.R,x=m.i;if(x===4)ki(p,function(N){N!==vt&&(f[N]!==void 0||mo(f,N)?w[N]||c(p[N]):(w[N]=!0,aa(m)))}),ki(f,function(N){p[N]!==void 0||mo(p,N)||(w[N]=!1,aa(m))});else if(x===5){if(n(m)&&(aa(m),w.length=!0),p.length<f.length)for(var k=p.length;k<f.length;k++)w[k]=!1;else for(var y=f.length;y<p.length;y++)w[y]=!0;for(var b=Math.min(p.length,f.length),j=0;j<b;j++)p.hasOwnProperty(j)||(w[j]=!0),w[j]===void 0&&c(p[j])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var Sw,Rd,ly=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",cI=typeof Map<"u",uI=typeof Set<"u",Cw=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",A2=ly?Symbol.for("immer-nothing"):((Sw={})["immer-nothing"]=!0,Sw),Pw=ly?Symbol.for("immer-draftable"):"__$immer_draftable",vt=ly?Symbol.for("immer-state"):"__$immer_state",hI=""+Object.prototype.constructor,go=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,O2=Object.getOwnPropertyDescriptors||function(e){var t={};return go(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},pp={},Dd={get:function(e,t){if(t===vt)return e;var r=ti(e);if(!mo(r,t))return function(a,i,o){var d,c=Nw(i,o);return c?"value"in c?c.value:(d=c.get)===null||d===void 0?void 0:d.call(a.k):void 0}(e,r,t);var n=r[t];return e.I||!Hn(n)?n:n===wf(e.t,t)?(kf(e),e.o[t]=fp(e.A.h,n,e)):n},has:function(e,t){return t in ti(e)},ownKeys:function(e){return Reflect.ownKeys(ti(e))},set:function(e,t,r){var n=Nw(ti(e),t);if(n!=null&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=wf(ti(e),t),i=a==null?void 0:a[vt];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(M2(r,a)&&(r!==void 0||mo(e.t,t)))return!0;kf(e),aa(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return wf(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,kf(e),aa(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=ti(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){As(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){As(12)}},Sl={};ki(Dd,function(e,t){Sl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Sl.deleteProperty=function(e,t){return Sl.set.call(this,e,t,void 0)},Sl.set=function(e,t,r){return Dd.set.call(this,e[0],t,r,e[0])};var mI=function(){function e(r){var n=this;this.O=Cw,this.D=!0,this.produce=function(a,i,o){if(typeof a=="function"&&typeof i!="function"){var d=i;i=a;var c=n;return function(k){var y=this;k===void 0&&(k=d);for(var b=arguments.length,j=Array(b>1?b-1:0),N=1;N<b;N++)j[N-1]=arguments[N];return c.produce(k,function(C){var P;return(P=i).call.apply(P,[y,C].concat(j))})}}var h;if(typeof i!="function"&&As(6),o!==void 0&&typeof o!="function"&&As(7),Hn(a)){var m=kw(n),f=fp(n,a,void 0),p=!0;try{h=i(f),p=!1}finally{p?Bh(m):gp(m)}return typeof Promise<"u"&&h instanceof Promise?h.then(function(k){return bf(m,o),vf(k,m)},function(k){throw Bh(m),k}):(bf(m,o),vf(h,m))}if(!a||typeof a!="object"){if((h=i(a))===void 0&&(h=a),h===A2&&(h=void 0),n.D&&iy(h,!0),o){var w=[],x=[];ln("Patches").M(a,h,w,x),o(w,x)}return h}As(21,a)},this.produceWithPatches=function(a,i){if(typeof a=="function")return function(h){for(var m=arguments.length,f=Array(m>1?m-1:0),p=1;p<m;p++)f[p-1]=arguments[p];return n.produceWithPatches(h,function(w){return a.apply(void 0,[w].concat(f))})};var o,d,c=n.produce(a,i,function(h,m){o=h,d=m});return typeof Promise<"u"&&c instanceof Promise?c.then(function(h){return[h,o,d]}):[c,o,d]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Hn(r)||As(8),La(r)&&(r=lI(r));var n=kw(this),a=fp(this,r,void 0);return a[vt].C=!0,gp(n),a},t.finishDraft=function(r,n){var a=r&&r[vt],i=a.A;return bf(i,n),vf(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Cw&&As(20),this.O=r},t.applyPatches=function(r,n){var a;for(a=n.length-1;a>=0;a--){var i=n[a];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}a>-1&&(n=n.slice(a+1));var o=ln("Patches").$;return La(r)?o(r,n):this.produce(r,function(d){return o(d,n)})},e}(),rs=new mI,R2=rs.produce;rs.produceWithPatches.bind(rs);rs.setAutoFreeze.bind(rs);rs.setUseProxies.bind(rs);rs.applyPatches.bind(rs);rs.createDraft.bind(rs);rs.finishDraft.bind(rs);function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function gI(e,t){if(Fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fI(e){var t=gI(e,"string");return Fd(t)=="symbol"?t:t+""}function pI(e,t,r){return(t=fI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ew(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ew(Object(r),!0).forEach(function(n){pI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ew(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Tw=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),jf=function(){return Math.random().toString(36).substring(7).split("").join(".")},Vh={INIT:"@@redux/INIT"+jf(),REPLACE:"@@redux/REPLACE"+jf(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+jf()}};function xI(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function D2(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(hr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(hr(1));return r(D2)(e,t)}if(typeof e!="function")throw new Error(hr(2));var a=e,i=t,o=[],d=o,c=!1;function h(){d===o&&(d=o.slice())}function m(){if(c)throw new Error(hr(3));return i}function f(k){if(typeof k!="function")throw new Error(hr(4));if(c)throw new Error(hr(5));var y=!0;return h(),d.push(k),function(){if(y){if(c)throw new Error(hr(6));y=!1,h();var j=d.indexOf(k);d.splice(j,1),o=null}}}function p(k){if(!xI(k))throw new Error(hr(7));if(typeof k.type>"u")throw new Error(hr(8));if(c)throw new Error(hr(9));try{c=!0,i=a(i,k)}finally{c=!1}for(var y=o=d,b=0;b<y.length;b++){var j=y[b];j()}return k}function w(k){if(typeof k!="function")throw new Error(hr(10));a=k,p({type:Vh.REPLACE})}function x(){var k,y=f;return k={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(hr(11));function N(){j.next&&j.next(m())}N();var C=y(N);return{unsubscribe:C}}},k[Tw]=function(){return this},k}return p({type:Vh.INIT}),n={dispatch:p,subscribe:f,getState:m,replaceReducer:w},n[Tw]=x,n}function yI(e){Object.keys(e).forEach(function(t){var r=e[t],n=r(void 0,{type:Vh.INIT});if(typeof n>"u")throw new Error(hr(12));if(typeof r(void 0,{type:Vh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(hr(13))})}function bI(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];typeof e[a]=="function"&&(r[a]=e[a])}var i=Object.keys(r),o;try{yI(r)}catch(d){o=d}return function(c,h){if(c===void 0&&(c={}),o)throw o;for(var m=!1,f={},p=0;p<i.length;p++){var w=i[p],x=r[w],k=c[w],y=x(k,h);if(typeof y>"u")throw h&&h.type,new Error(hr(14));f[w]=y,m=m||y!==k}return m=m||i.length!==Object.keys(c).length,m?f:c}}function Hh(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(n){return n}:t.length===1?t[0]:t.reduce(function(n,a){return function(){return n(a.apply(void 0,arguments))}})}function vI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){return function(){var a=n.apply(void 0,arguments),i=function(){throw new Error(hr(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},d=t.map(function(c){return c(o)});return i=Hh.apply(void 0,d)(a.dispatch),Iw(Iw({},a),{},{dispatch:i})}}}function F2(e){var t=function(n){var a=n.dispatch,i=n.getState;return function(o){return function(d){return typeof d=="function"?d(a,i,e):o(d)}}};return t}var xp=F2();xp.withExtraArgument=F2;var z2=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wI=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function d(h){return function(m){return c([h,m])}}function c(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(i=h[0]&2?a.return:h[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,h[1])).done)return i;switch(a=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,a=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],a=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Io=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},kI=Object.defineProperty,jI=Object.defineProperties,NI=Object.getOwnPropertyDescriptors,Lw=Object.getOwnPropertySymbols,_I=Object.prototype.hasOwnProperty,SI=Object.prototype.propertyIsEnumerable,Mw=function(e,t,r){return t in e?kI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ja=function(e,t){for(var r in t||(t={}))_I.call(t,r)&&Mw(e,r,t[r]);if(Lw)for(var n=0,a=Lw(t);n<a.length;n++){var r=a[n];SI.call(t,r)&&Mw(e,r,t[r])}return e},Nf=function(e,t){return jI(e,NI(t))},CI=function(e,t,r){return new Promise(function(n,a){var i=function(c){try{d(r.next(c))}catch(h){a(h)}},o=function(c){try{d(r.throw(c))}catch(h){a(h)}},d=function(c){return c.done?n(c.value):Promise.resolve(c.value).then(i,o)};d((r=r.apply(e,t)).next())})},PI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Hh:Hh.apply(null,arguments)};function EI(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function Na(e,t){function r(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ja(ja({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(n){return n.type===e},r}var II=function(e){z2(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Io([void 0],r[0].concat(this)))):new(t.bind.apply(t,Io([void 0],r.concat(this))))},t}(Array),TI=function(e){z2(t,e);function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Io([void 0],r[0].concat(this)))):new(t.bind.apply(t,Io([void 0],r.concat(this))))},t}(Array);function yp(e){return Hn(e)?R2(e,function(){}):e}function LI(e){return typeof e=="boolean"}function MI(){return function(t){return AI(t)}}function AI(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var n=new II;return r&&(LI(r)?n.push(xp):n.push(xp.withExtraArgument(r.extraArgument))),n}function OI(e){var t=MI(),r=e||{},n=r.reducer,a=n===void 0?void 0:n,i=r.middleware,o=i===void 0?t():i,d=r.devTools,c=d===void 0?!0:d,h=r.preloadedState,m=h===void 0?void 0:h,f=r.enhancers,p=f===void 0?void 0:f,w;if(typeof a=="function")w=a;else if(EI(a))w=bI(a);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var x=o;typeof x=="function"&&(x=x(t));var k=vI.apply(void 0,x),y=Hh;c&&(y=PI(ja({trace:!1},typeof c=="object"&&c)));var b=new TI(k),j=b;Array.isArray(p)?j=Io([k],p):typeof p=="function"&&(j=p(b));var N=y.apply(void 0,j);return D2(w,m,N)}function B2(e){var t={},r=[],n,a={addCase:function(i,o){var d=typeof i=="string"?i:i.type;if(!d)throw new Error("`builder.addCase` cannot be called with an empty action type");if(d in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[d]=o,a},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase:function(i){return n=i,a}};return e(a),[t,r,n]}function RI(e){return typeof e=="function"}function DI(e,t,r,n){r===void 0&&(r=[]);var a=typeof t=="function"?B2(t):[t,r,n],i=a[0],o=a[1],d=a[2],c;if(RI(e))c=function(){return yp(e())};else{var h=yp(e);c=function(){return h}}function m(f,p){f===void 0&&(f=c());var w=Io([i[p.type]],o.filter(function(x){var k=x.matcher;return k(p)}).map(function(x){var k=x.reducer;return k}));return w.filter(function(x){return!!x}).length===0&&(w=[d]),w.reduce(function(x,k){if(k)if(La(x)){var y=x,b=k(y,p);return b===void 0?x:b}else{if(Hn(x))return R2(x,function(j){return k(j,p)});var b=k(x,p);if(b===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return x},f)}return m.getInitialState=c,m}function FI(e,t){return e+"/"+t}function Wr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:yp(e.initialState),n=e.reducers||{},a=Object.keys(n),i={},o={},d={};a.forEach(function(m){var f=n[m],p=FI(t,m),w,x;"reducer"in f?(w=f.reducer,x=f.prepare):w=f,i[m]=w,o[p]=w,d[m]=x?Na(p,x):Na(p)});function c(){var m=typeof e.extraReducers=="function"?B2(e.extraReducers):[e.extraReducers],f=m[0],p=f===void 0?{}:f,w=m[1],x=w===void 0?[]:w,k=m[2],y=k===void 0?void 0:k,b=ja(ja({},p),o);return DI(r,function(j){for(var N in b)j.addCase(N,b[N]);for(var C=0,P=x;C<P.length;C++){var E=P[C];j.addMatcher(E.matcher,E.reducer)}y&&j.addDefaultCase(y)})}var h;return{name:t,reducer:function(m,f){return h||(h=c()),h(m,f)},actions:d,caseReducers:i,getInitialState:function(){return h||(h=c()),h.getInitialState()}}}var zI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",BI=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=zI[Math.random()*64|0];return t},$I=["name","message","stack","code"],_f=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Aw=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),UI=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,n=$I;r<n.length;r++){var a=n[r];typeof e[a]=="string"&&(t[a]=e[a])}return t}return{message:String(e)}},ye=function(){function e(t,r,n){var a=Na(t+"/fulfilled",function(h,m,f,p){return{payload:h,meta:Nf(ja({},p||{}),{arg:f,requestId:m,requestStatus:"fulfilled"})}}),i=Na(t+"/pending",function(h,m,f){return{payload:void 0,meta:Nf(ja({},f||{}),{arg:m,requestId:h,requestStatus:"pending"})}}),o=Na(t+"/rejected",function(h,m,f,p,w){return{payload:p,error:(n&&n.serializeError||UI)(h||"Rejected"),meta:Nf(ja({},w||{}),{arg:f,requestId:m,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(h==null?void 0:h.name)==="AbortError",condition:(h==null?void 0:h.name)==="ConditionError"})}}),d=typeof AbortController<"u"?AbortController:function(){function h(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return h.prototype.abort=function(){},h}();function c(h){return function(m,f,p){var w=n!=null&&n.idGenerator?n.idGenerator(h):BI(),x=new d,k;function y(j){k=j,x.abort()}var b=function(){return CI(this,null,function(){var j,N,C,P,E,T,O;return wI(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),P=(j=n==null?void 0:n.condition)==null?void 0:j.call(n,h,{getState:f,extra:p}),HI(P)?[4,P]:[3,2];case 1:P=I.sent(),I.label=2;case 2:if(P===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return E=new Promise(function(W,X){return x.signal.addEventListener("abort",function(){return X({name:"AbortError",message:k||"Aborted"})})}),m(i(w,h,(N=n==null?void 0:n.getPendingMeta)==null?void 0:N.call(n,{requestId:w,arg:h},{getState:f,extra:p}))),[4,Promise.race([E,Promise.resolve(r(h,{dispatch:m,getState:f,extra:p,requestId:w,signal:x.signal,abort:y,rejectWithValue:function(W,X){return new _f(W,X)},fulfillWithValue:function(W,X){return new Aw(W,X)}})).then(function(W){if(W instanceof _f)throw W;return W instanceof Aw?a(W.payload,w,h,W.meta):a(W,w,h)})])];case 3:return C=I.sent(),[3,5];case 4:return T=I.sent(),C=T instanceof _f?o(null,w,h,T.payload,T.meta):o(T,w,h),[3,5];case 5:return O=n&&!n.dispatchConditionRejection&&o.match(C)&&C.meta.condition,O||m(C),[2,C]}})})}();return Object.assign(b,{abort:y,requestId:w,arg:h,unwrap:function(){return b.then(VI)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:a,typePrefix:t})}return e.withTypes=function(){return e},e}();function VI(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function HI(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var dy="listenerMiddleware";Na(dy+"/add");Na(dy+"/removeAll");Na(dy+"/remove");var Ow;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);dI();function $2(e,t){return function(){return e.apply(t,arguments)}}const{toString:WI}=Object.prototype,{getPrototypeOf:cy}=Object,{iterator:Qm,toStringTag:U2}=Symbol,eg=(e=>t=>{const r=WI.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),$s=e=>(e=e.toLowerCase(),t=>eg(t)===e),tg=e=>t=>typeof t===e,{isArray:Vo}=Array,To=tg("undefined");function tc(e){return e!==null&&!To(e)&&e.constructor!==null&&!To(e.constructor)&&Ur(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const V2=$s("ArrayBuffer");function qI(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&V2(e.buffer),t}const KI=tg("string"),Ur=tg("function"),H2=tg("number"),rc=e=>e!==null&&typeof e=="object",ZI=e=>e===!0||e===!1,Pu=e=>{if(eg(e)!=="object")return!1;const t=cy(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(U2 in e)&&!(Qm in e)},GI=e=>{if(!rc(e)||tc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},YI=$s("Date"),JI=$s("File"),XI=$s("Blob"),QI=$s("FileList"),eT=e=>rc(e)&&Ur(e.pipe),tT=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ur(e.append)&&((t=eg(e))==="formdata"||t==="object"&&Ur(e.toString)&&e.toString()==="[object FormData]"))},rT=$s("URLSearchParams"),[sT,nT,aT,iT]=["ReadableStream","Request","Response","Headers"].map($s),oT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sc(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Vo(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(tc(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let d;for(n=0;n<o;n++)d=i[n],t.call(null,e[d],d,e)}}function W2(e,t){if(tc(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const oi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,q2=e=>!To(e)&&e!==oi;function bp(){const{caseless:e,skipUndefined:t}=q2(this)&&this||{},r={},n=(a,i)=>{const o=e&&W2(r,i)||i;Pu(r[o])&&Pu(a)?r[o]=bp(r[o],a):Pu(a)?r[o]=bp({},a):Vo(a)?r[o]=a.slice():(!t||!To(a))&&(r[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&sc(arguments[a],n);return r}const lT=(e,t,r,{allOwnKeys:n}={})=>(sc(t,(a,i)=>{r&&Ur(a)?e[i]=$2(a,r):e[i]=a},{allOwnKeys:n}),e),dT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),cT=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},uT=(e,t,r,n)=>{let a,i,o;const d={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!d[o]&&(t[o]=e[o],d[o]=!0);e=r!==!1&&cy(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},hT=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},mT=e=>{if(!e)return null;if(Vo(e))return e;let t=e.length;if(!H2(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},gT=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&cy(Uint8Array)),fT=(e,t)=>{const n=(e&&e[Qm]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},pT=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},xT=$s("HTMLFormElement"),yT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Rw=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),bT=$s("RegExp"),K2=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};sc(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},vT=e=>{K2(e,(t,r)=>{if(Ur(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(Ur(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},wT=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Vo(e)?n(e):n(String(e).split(t)),r},kT=()=>{},jT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function NT(e){return!!(e&&Ur(e.append)&&e[U2]==="FormData"&&e[Qm])}const _T=e=>{const t=new Array(10),r=(n,a)=>{if(rc(n)){if(t.indexOf(n)>=0)return;if(tc(n))return n;if(!("toJSON"in n)){t[a]=n;const i=Vo(n)?[]:{};return sc(n,(o,d)=>{const c=r(o,a+1);!To(c)&&(i[d]=c)}),t[a]=void 0,i}}return n};return r(e,0)},ST=$s("AsyncFunction"),CT=e=>e&&(rc(e)||Ur(e))&&Ur(e.then)&&Ur(e.catch),Z2=((e,t)=>e?setImmediate:t?((r,n)=>(oi.addEventListener("message",({source:a,data:i})=>{a===oi&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),oi.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ur(oi.postMessage)),PT=typeof queueMicrotask<"u"?queueMicrotask.bind(oi):typeof process<"u"&&process.nextTick||Z2,ET=e=>e!=null&&Ur(e[Qm]),ne={isArray:Vo,isArrayBuffer:V2,isBuffer:tc,isFormData:tT,isArrayBufferView:qI,isString:KI,isNumber:H2,isBoolean:ZI,isObject:rc,isPlainObject:Pu,isEmptyObject:GI,isReadableStream:sT,isRequest:nT,isResponse:aT,isHeaders:iT,isUndefined:To,isDate:YI,isFile:JI,isBlob:XI,isRegExp:bT,isFunction:Ur,isStream:eT,isURLSearchParams:rT,isTypedArray:gT,isFileList:QI,forEach:sc,merge:bp,extend:lT,trim:oT,stripBOM:dT,inherits:cT,toFlatObject:uT,kindOf:eg,kindOfTest:$s,endsWith:hT,toArray:mT,forEachEntry:fT,matchAll:pT,isHTMLForm:xT,hasOwnProperty:Rw,hasOwnProp:Rw,reduceDescriptors:K2,freezeMethods:vT,toObjectSet:wT,toCamelCase:yT,noop:kT,toFiniteNumber:jT,findKey:W2,global:oi,isContextDefined:q2,isSpecCompliantForm:NT,toJSONObject:_T,isAsyncFn:ST,isThenable:CT,setImmediate:Z2,asap:PT,isIterable:ET};function Re(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}ne.inherits(Re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ne.toJSONObject(this.config),code:this.code,status:this.status}}});const G2=Re.prototype,Y2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Y2[e]={value:e}});Object.defineProperties(Re,Y2);Object.defineProperty(G2,"isAxiosError",{value:!0});Re.from=(e,t,r,n,a,i)=>{const o=Object.create(G2);ne.toFlatObject(e,o,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const d=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return Re.call(o,d,c,r,n,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const IT=null;function vp(e){return ne.isPlainObject(e)||ne.isArray(e)}function J2(e){return ne.endsWith(e,"[]")?e.slice(0,-2):e}function Dw(e,t,r){return e?e.concat(t).map(function(a,i){return a=J2(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function TT(e){return ne.isArray(e)&&!e.some(vp)}const LT=ne.toFlatObject(ne,{},null,function(t){return/^is[A-Z]/.test(t)});function rg(e,t,r){if(!ne.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=ne.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,y){return!ne.isUndefined(y[k])});const n=r.metaTokens,a=r.visitor||m,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&ne.isSpecCompliantForm(t);if(!ne.isFunction(a))throw new TypeError("visitor must be a function");function h(x){if(x===null)return"";if(ne.isDate(x))return x.toISOString();if(ne.isBoolean(x))return x.toString();if(!c&&ne.isBlob(x))throw new Re("Blob is not supported. Use a Buffer instead.");return ne.isArrayBuffer(x)||ne.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function m(x,k,y){let b=x;if(x&&!y&&typeof x=="object"){if(ne.endsWith(k,"{}"))k=n?k:k.slice(0,-2),x=JSON.stringify(x);else if(ne.isArray(x)&&TT(x)||(ne.isFileList(x)||ne.endsWith(k,"[]"))&&(b=ne.toArray(x)))return k=J2(k),b.forEach(function(N,C){!(ne.isUndefined(N)||N===null)&&t.append(o===!0?Dw([k],C,i):o===null?k:k+"[]",h(N))}),!1}return vp(x)?!0:(t.append(Dw(y,k,i),h(x)),!1)}const f=[],p=Object.assign(LT,{defaultVisitor:m,convertValue:h,isVisitable:vp});function w(x,k){if(!ne.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+k.join("."));f.push(x),ne.forEach(x,function(b,j){(!(ne.isUndefined(b)||b===null)&&a.call(t,b,ne.isString(j)?j.trim():j,k,p))===!0&&w(b,k?k.concat(j):[j])}),f.pop()}}if(!ne.isObject(e))throw new TypeError("data must be an object");return w(e),t}function Fw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function uy(e,t){this._pairs=[],e&&rg(e,this,t)}const X2=uy.prototype;X2.append=function(t,r){this._pairs.push([t,r])};X2.toString=function(t){const r=t?function(n){return t.call(this,n,Fw)}:Fw;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function MT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Q2(e,t,r){if(!t)return e;const n=r&&r.encode||MT;ne.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=ne.isURLSearchParams(t)?t.toString():new uy(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class zw{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ne.forEach(this.handlers,function(n){n!==null&&t(n)})}}const e_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},AT=typeof URLSearchParams<"u"?URLSearchParams:uy,OT=typeof FormData<"u"?FormData:null,RT=typeof Blob<"u"?Blob:null,DT={isBrowser:!0,classes:{URLSearchParams:AT,FormData:OT,Blob:RT},protocols:["http","https","file","blob","url","data"]},hy=typeof window<"u"&&typeof document<"u",wp=typeof navigator=="object"&&navigator||void 0,FT=hy&&(!wp||["ReactNative","NativeScript","NS"].indexOf(wp.product)<0),zT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",BT=hy&&window.location.href||"http://localhost",$T=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hy,hasStandardBrowserEnv:FT,hasStandardBrowserWebWorkerEnv:zT,navigator:wp,origin:BT},Symbol.toStringTag,{value:"Module"})),fr={...$T,...DT};function UT(e,t){return rg(e,new fr.classes.URLSearchParams,{visitor:function(r,n,a,i){return fr.isNode&&ne.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function VT(e){return ne.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function HT(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function t_(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),c=i>=r.length;return o=!o&&ne.isArray(a)?a.length:o,c?(ne.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!d):((!a[o]||!ne.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&ne.isArray(a[o])&&(a[o]=HT(a[o])),!d)}if(ne.isFormData(e)&&ne.isFunction(e.entries)){const r={};return ne.forEachEntry(e,(n,a)=>{t(VT(n),a,r,0)}),r}return null}function WT(e,t,r){if(ne.isString(e))try{return(t||JSON.parse)(e),ne.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const nc={transitional:e_,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=ne.isObject(t);if(i&&ne.isHTMLForm(t)&&(t=new FormData(t)),ne.isFormData(t))return a?JSON.stringify(t_(t)):t;if(ne.isArrayBuffer(t)||ne.isBuffer(t)||ne.isStream(t)||ne.isFile(t)||ne.isBlob(t)||ne.isReadableStream(t))return t;if(ne.isArrayBufferView(t))return t.buffer;if(ne.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return UT(t,this.formSerializer).toString();if((d=ne.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return rg(d?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),WT(t)):t}],transformResponse:[function(t){const r=this.transitional||nc.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(ne.isResponse(t)||ne.isReadableStream(t))return t;if(t&&ne.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(d){if(o)throw d.name==="SyntaxError"?Re.from(d,Re.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ne.forEach(["delete","get","head","post","put","patch"],e=>{nc.headers[e]={}});const qT=ne.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),KT=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&qT[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Bw=Symbol("internals");function gl(e){return e&&String(e).trim().toLowerCase()}function Eu(e){return e===!1||e==null?e:ne.isArray(e)?e.map(Eu):String(e)}function ZT(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const GT=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sf(e,t,r,n,a){if(ne.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!ne.isString(t)){if(ne.isString(n))return t.indexOf(n)!==-1;if(ne.isRegExp(n))return n.test(t)}}function YT(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function JT(e,t){const r=ne.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let Vr=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(d,c,h){const m=gl(c);if(!m)throw new Error("header name must be a non-empty string");const f=ne.findKey(a,m);(!f||a[f]===void 0||h===!0||h===void 0&&a[f]!==!1)&&(a[f||c]=Eu(d))}const o=(d,c)=>ne.forEach(d,(h,m)=>i(h,m,c));if(ne.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(ne.isString(t)&&(t=t.trim())&&!GT(t))o(KT(t),r);else if(ne.isObject(t)&&ne.isIterable(t)){let d={},c,h;for(const m of t){if(!ne.isArray(m))throw TypeError("Object iterator must return a key-value pair");d[h=m[0]]=(c=d[h])?ne.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(d,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=gl(t),t){const n=ne.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return ZT(a);if(ne.isFunction(r))return r.call(this,a,n);if(ne.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=gl(t),t){const n=ne.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Sf(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=gl(o),o){const d=ne.findKey(n,o);d&&(!r||Sf(n,n[d],d,r))&&(delete n[d],a=!0)}}return ne.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||Sf(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return ne.forEach(this,(a,i)=>{const o=ne.findKey(n,i);if(o){r[o]=Eu(a),delete r[i];return}const d=t?YT(i):String(i).trim();d!==i&&delete r[i],r[d]=Eu(a),n[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ne.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&ne.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Bw]=this[Bw]={accessors:{}}).accessors,a=this.prototype;function i(o){const d=gl(o);n[d]||(JT(a,o),n[d]=!0)}return ne.isArray(t)?t.forEach(i):i(t),this}};Vr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ne.reduceDescriptors(Vr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});ne.freezeMethods(Vr);function Cf(e,t){const r=this||nc,n=t||r,a=Vr.from(n.headers);let i=n.data;return ne.forEach(e,function(d){i=d.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function r_(e){return!!(e&&e.__CANCEL__)}function Ho(e,t,r){Re.call(this,e??"canceled",Re.ERR_CANCELED,t,r),this.name="CanceledError"}ne.inherits(Ho,Re,{__CANCEL__:!0});function s_(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Re("Request failed with status code "+r.status,[Re.ERR_BAD_REQUEST,Re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function XT(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function QT(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const h=Date.now(),m=n[i];o||(o=h),r[a]=c,n[a]=h;let f=i,p=0;for(;f!==a;)p+=r[f++],f=f%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),h-o<t)return;const w=m&&h-m;return w?Math.round(p*1e3/w):void 0}}function eL(e,t){let r=0,n=1e3/t,a,i;const o=(h,m=Date.now())=>{r=m,a=null,i&&(clearTimeout(i),i=null),e(...h)};return[(...h)=>{const m=Date.now(),f=m-r;f>=n?o(h,m):(a=h,i||(i=setTimeout(()=>{i=null,o(a)},n-f)))},()=>a&&o(a)]}const Wh=(e,t,r=3)=>{let n=0;const a=QT(50,250);return eL(i=>{const o=i.loaded,d=i.lengthComputable?i.total:void 0,c=o-n,h=a(c),m=o<=d;n=o;const f={loaded:o,total:d,progress:d?o/d:void 0,bytes:c,rate:h||void 0,estimated:h&&d&&m?(d-o)/h:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(f)},r)},$w=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Uw=e=>(...t)=>ne.asap(()=>e(...t)),tL=fr.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,fr.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(fr.origin),fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent)):()=>!0,rL=fr.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];ne.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),ne.isString(n)&&o.push("path="+n),ne.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function sL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nL(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function n_(e,t,r){let n=!sL(t);return e&&(n||r==!1)?nL(e,t):t}const Vw=e=>e instanceof Vr?{...e}:e;function ji(e,t){t=t||{};const r={};function n(h,m,f,p){return ne.isPlainObject(h)&&ne.isPlainObject(m)?ne.merge.call({caseless:p},h,m):ne.isPlainObject(m)?ne.merge({},m):ne.isArray(m)?m.slice():m}function a(h,m,f,p){if(ne.isUndefined(m)){if(!ne.isUndefined(h))return n(void 0,h,f,p)}else return n(h,m,f,p)}function i(h,m){if(!ne.isUndefined(m))return n(void 0,m)}function o(h,m){if(ne.isUndefined(m)){if(!ne.isUndefined(h))return n(void 0,h)}else return n(void 0,m)}function d(h,m,f){if(f in t)return n(h,m);if(f in e)return n(void 0,h)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(h,m,f)=>a(Vw(h),Vw(m),f,!0)};return ne.forEach(Object.keys({...e,...t}),function(m){const f=c[m]||a,p=f(e[m],t[m],m);ne.isUndefined(p)&&f!==d||(r[m]=p)}),r}const a_=e=>{const t=ji({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:d}=t;if(t.headers=o=Vr.from(o),t.url=Q2(n_(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),ne.isFormData(r)){if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ne.isFunction(r.getHeaders)){const c=r.getHeaders(),h=["content-type","content-length"];Object.entries(c).forEach(([m,f])=>{h.includes(m.toLowerCase())&&o.set(m,f)})}}if(fr.hasStandardBrowserEnv&&(n&&ne.isFunction(n)&&(n=n(t)),n||n!==!1&&tL(t.url))){const c=a&&i&&rL.read(i);c&&o.set(a,c)}return t},aL=typeof XMLHttpRequest<"u",iL=aL&&function(e){return new Promise(function(r,n){const a=a_(e);let i=a.data;const o=Vr.from(a.headers).normalize();let{responseType:d,onUploadProgress:c,onDownloadProgress:h}=a,m,f,p,w,x;function k(){w&&w(),x&&x(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let y=new XMLHttpRequest;y.open(a.method.toUpperCase(),a.url,!0),y.timeout=a.timeout;function b(){if(!y)return;const N=Vr.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),P={data:!d||d==="text"||d==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:N,config:e,request:y};s_(function(T){r(T),k()},function(T){n(T),k()},P),y=null}"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(b)},y.onabort=function(){y&&(n(new Re("Request aborted",Re.ECONNABORTED,e,y)),y=null)},y.onerror=function(C){const P=C&&C.message?C.message:"Network Error",E=new Re(P,Re.ERR_NETWORK,e,y);E.event=C||null,n(E),y=null},y.ontimeout=function(){let C=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const P=a.transitional||e_;a.timeoutErrorMessage&&(C=a.timeoutErrorMessage),n(new Re(C,P.clarifyTimeoutError?Re.ETIMEDOUT:Re.ECONNABORTED,e,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&ne.forEach(o.toJSON(),function(C,P){y.setRequestHeader(P,C)}),ne.isUndefined(a.withCredentials)||(y.withCredentials=!!a.withCredentials),d&&d!=="json"&&(y.responseType=a.responseType),h&&([p,x]=Wh(h,!0),y.addEventListener("progress",p)),c&&y.upload&&([f,w]=Wh(c),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",w)),(a.cancelToken||a.signal)&&(m=N=>{y&&(n(!N||N.type?new Ho(null,e,y):N),y.abort(),y=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const j=XT(a.url);if(j&&fr.protocols.indexOf(j)===-1){n(new Re("Unsupported protocol "+j+":",Re.ERR_BAD_REQUEST,e));return}y.send(i||null)})},oL=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(h){if(!a){a=!0,d();const m=h instanceof Error?h:this.reason;n.abort(m instanceof Re?m:new Ho(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new Re(`timeout ${t} of ms exceeded`,Re.ETIMEDOUT))},t);const d=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),e=null)};e.forEach(h=>h.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>ne.asap(d),c}},lL=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},dL=async function*(e,t){for await(const r of cL(e))yield*lL(r,t)},cL=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Hw=(e,t,r,n)=>{const a=dL(e,t);let i=0,o,d=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:h,value:m}=await a.next();if(h){d(),c.close();return}let f=m.byteLength;if(r){let p=i+=f;r(p)}c.enqueue(new Uint8Array(m))}catch(h){throw d(h),h}},cancel(c){return d(c),a.return()}},{highWaterMark:2})},Ww=64*1024,{isFunction:Gc}=ne,uL=(({Request:e,Response:t})=>({Request:e,Response:t}))(ne.global),{ReadableStream:qw,TextEncoder:Kw}=ne.global,Zw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},hL=e=>{e=ne.merge.call({skipUndefined:!0},uL,e);const{fetch:t,Request:r,Response:n}=e,a=t?Gc(t):typeof fetch=="function",i=Gc(r),o=Gc(n);if(!a)return!1;const d=a&&Gc(qw),c=a&&(typeof Kw=="function"?(x=>k=>x.encode(k))(new Kw):async x=>new Uint8Array(await new r(x).arrayBuffer())),h=i&&d&&Zw(()=>{let x=!1;const k=new r(fr.origin,{body:new qw,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!k}),m=o&&d&&Zw(()=>ne.isReadableStream(new n("").body)),f={stream:m&&(x=>x.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(k,y)=>{let b=k&&k[x];if(b)return b.call(k);throw new Re(`Response type '${x}' is not supported`,Re.ERR_NOT_SUPPORT,y)})});const p=async x=>{if(x==null)return 0;if(ne.isBlob(x))return x.size;if(ne.isSpecCompliantForm(x))return(await new r(fr.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(ne.isArrayBufferView(x)||ne.isArrayBuffer(x))return x.byteLength;if(ne.isURLSearchParams(x)&&(x=x+""),ne.isString(x))return(await c(x)).byteLength},w=async(x,k)=>{const y=ne.toFiniteNumber(x.getContentLength());return y??p(k)};return async x=>{let{url:k,method:y,data:b,signal:j,cancelToken:N,timeout:C,onDownloadProgress:P,onUploadProgress:E,responseType:T,headers:O,withCredentials:I="same-origin",fetchOptions:W}=a_(x),X=t||fetch;T=T?(T+"").toLowerCase():"text";let B=oL([j,N&&N.toAbortSignal()],C),D=null;const U=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let Z;try{if(E&&h&&y!=="get"&&y!=="head"&&(Z=await w(O,b))!==0){let re=new r(k,{method:"POST",body:b,duplex:"half"}),V;if(ne.isFormData(b)&&(V=re.headers.get("content-type"))&&O.setContentType(V),re.body){const[ae,fe]=$w(Z,Wh(Uw(E)));b=Hw(re.body,Ww,ae,fe)}}ne.isString(I)||(I=I?"include":"omit");const G=i&&"credentials"in r.prototype,F={...W,signal:B,method:y.toUpperCase(),headers:O.normalize().toJSON(),body:b,duplex:"half",credentials:G?I:void 0};D=i&&new r(k,F);let R=await(i?X(D,W):X(k,F));const q=m&&(T==="stream"||T==="response");if(m&&(P||q&&U)){const re={};["status","statusText","headers"].forEach(be=>{re[be]=R[be]});const V=ne.toFiniteNumber(R.headers.get("content-length")),[ae,fe]=P&&$w(V,Wh(Uw(P),!0))||[];R=new n(Hw(R.body,Ww,ae,()=>{fe&&fe(),U&&U()}),re)}T=T||"text";let J=await f[ne.findKey(f,T)||"text"](R,x);return!q&&U&&U(),await new Promise((re,V)=>{s_(re,V,{data:J,headers:Vr.from(R.headers),status:R.status,statusText:R.statusText,config:x,request:D})})}catch(G){throw U&&U(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Re("Network Error",Re.ERR_NETWORK,x,D),{cause:G.cause||G}):Re.from(G,G&&G.code,x,D)}}},mL=new Map,i_=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:a}=t,i=[n,a,r];let o=i.length,d=o,c,h,m=mL;for(;d--;)c=i[d],h=m.get(c),h===void 0&&m.set(c,h=d?new Map:hL(t)),m=h;return h};i_();const kp={http:IT,xhr:iL,fetch:{get:i_}};ne.forEach(kp,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Gw=e=>`- ${e}`,gL=e=>ne.isFunction(e)||e===null||e===!1,o_={getAdapter:(e,t)=>{e=ne.isArray(e)?e:[e];const{length:r}=e;let n,a;const i={};for(let o=0;o<r;o++){n=e[o];let d;if(a=n,!gL(n)&&(a=kp[(d=String(n)).toLowerCase()],a===void 0))throw new Re(`Unknown adapter '${d}'`);if(a&&(ne.isFunction(a)||(a=a.get(t))))break;i[d||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let d=r?o.length>1?`since :
`+o.map(Gw).join(`
`):" "+Gw(o[0]):"as no adapter specified";throw new Re("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return a},adapters:kp};function Pf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ho(null,e)}function Yw(e){return Pf(e),e.headers=Vr.from(e.headers),e.data=Cf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),o_.getAdapter(e.adapter||nc.adapter,e)(e).then(function(n){return Pf(e),n.data=Cf.call(e,e.transformResponse,n),n.headers=Vr.from(n.headers),n},function(n){return r_(n)||(Pf(e),n&&n.response&&(n.response.data=Cf.call(e,e.transformResponse,n.response),n.response.headers=Vr.from(n.response.headers))),Promise.reject(n)})}const l_="1.12.2",sg={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sg[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Jw={};sg.transitional=function(t,r,n){function a(i,o){return"[Axios v"+l_+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,d)=>{if(t===!1)throw new Re(a(o," has been removed"+(r?" in "+r:"")),Re.ERR_DEPRECATED);return r&&!Jw[o]&&(Jw[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,d):!0}};sg.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function fL(e,t,r){if(typeof e!="object")throw new Re("options must be an object",Re.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const d=e[i],c=d===void 0||o(d,i,e);if(c!==!0)throw new Re("option "+i+" must be "+c,Re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Re("Unknown option "+i,Re.ERR_BAD_OPTION)}}const Iu={assertOptions:fL,validators:sg},Zs=Iu.validators;let mi=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zw,response:new zw}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ji(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Iu.assertOptions(n,{silentJSONParsing:Zs.transitional(Zs.boolean),forcedJSONParsing:Zs.transitional(Zs.boolean),clarifyTimeoutError:Zs.transitional(Zs.boolean)},!1),a!=null&&(ne.isFunction(a)?r.paramsSerializer={serialize:a}:Iu.assertOptions(a,{encode:Zs.function,serialize:Zs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Iu.assertOptions(r,{baseUrl:Zs.spelling("baseURL"),withXsrfToken:Zs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&ne.merge(i.common,i[r.method]);i&&ne.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=Vr.concat(o,i);const d=[];let c=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(r)===!1||(c=c&&k.synchronous,d.unshift(k.fulfilled,k.rejected))});const h=[];this.interceptors.response.forEach(function(k){h.push(k.fulfilled,k.rejected)});let m,f=0,p;if(!c){const x=[Yw.bind(this),void 0];for(x.unshift(...d),x.push(...h),p=x.length,m=Promise.resolve(r);f<p;)m=m.then(x[f++],x[f++]);return m}p=d.length;let w=r;for(;f<p;){const x=d[f++],k=d[f++];try{w=x(w)}catch(y){k.call(this,y);break}}try{m=Yw.call(this,w)}catch(x){return Promise.reject(x)}for(f=0,p=h.length;f<p;)m=m.then(h[f++],h[f++]);return m}getUri(t){t=ji(this.defaults,t);const r=n_(t.baseURL,t.url,t.allowAbsoluteUrls);return Q2(r,t.params,t.paramsSerializer)}};ne.forEach(["delete","get","head","options"],function(t){mi.prototype[t]=function(r,n){return this.request(ji(n||{},{method:t,url:r,data:(n||{}).data}))}});ne.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,d){return this.request(ji(d||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}mi.prototype[t]=r(),mi.prototype[t+"Form"]=r(!0)});let pL=class d_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(d=>{n.subscribe(d),i=d}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,d){n.reason||(n.reason=new Ho(i,o,d),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new d_(function(a){t=a}),cancel:t}}};function xL(e){return function(r){return e.apply(null,r)}}function yL(e){return ne.isObject(e)&&e.isAxiosError===!0}const jp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jp).forEach(([e,t])=>{jp[t]=e});function c_(e){const t=new mi(e),r=$2(mi.prototype.request,t);return ne.extend(r,mi.prototype,t,{allOwnKeys:!0}),ne.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return c_(ji(e,a))},r}const Lt=c_(nc);Lt.Axios=mi;Lt.CanceledError=Ho;Lt.CancelToken=pL;Lt.isCancel=r_;Lt.VERSION=l_;Lt.toFormData=rg;Lt.AxiosError=Re;Lt.Cancel=Lt.CanceledError;Lt.all=function(t){return Promise.all(t)};Lt.spread=xL;Lt.isAxiosError=yL;Lt.mergeConfig=ji;Lt.AxiosHeaders=Vr;Lt.formToJSON=e=>t_(ne.isHTMLForm(e)?new FormData(e):e);Lt.getAdapter=o_.getAdapter;Lt.HttpStatusCode=jp;Lt.default=Lt;const{Axios:Z9,AxiosError:G9,CanceledError:Y9,isCancel:J9,CancelToken:X9,VERSION:Q9,all:ez,Cancel:tz,isAxiosError:rz,spread:sz,toFormData:nz,AxiosHeaders:az,HttpStatusCode:iz,formToJSON:oz,getAdapter:lz,mergeConfig:dz}=Lt,u_="http://192.168.8.62:5000/api";console.log("[API] API_BASE_URL:",u_);const he=Lt.create({baseURL:u_,headers:{"Content-Type":"application/json"}});he.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));he.interceptors.response.use(e=>(e.data&&e.data.data,e.data),e=>{var r,n,a,i;const t=((n=(r=e.response)==null?void 0:r.data)==null?void 0:n.message)||"Something went wrong";return((a=e.response)==null?void 0:a.status)!==401&&((i=e.response)==null?void 0:i.status)!==404&&K.error(t),Promise.reject(e)});const hn=Object.create(null);hn.open="0";hn.close="1";hn.ping="2";hn.pong="3";hn.message="4";hn.upgrade="5";hn.noop="6";const Tu=Object.create(null);Object.keys(hn).forEach(e=>{Tu[hn[e]]=e});const Np={type:"error",data:"parser error"},h_=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",m_=typeof ArrayBuffer=="function",g_=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,my=({type:e,data:t},r,n)=>h_&&t instanceof Blob?r?n(t):Xw(t,n):m_&&(t instanceof ArrayBuffer||g_(t))?r?n(t):Xw(new Blob([t]),n):n(hn[e]+(t||"")),Xw=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Qw(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ef;function bL(e,t){if(h_&&e.data instanceof Blob)return e.data.arrayBuffer().then(Qw).then(t);if(m_&&(e.data instanceof ArrayBuffer||g_(e.data)))return t(Qw(e.data));my(e,!1,r=>{Ef||(Ef=new TextEncoder),t(Ef.encode(r))})}const ek="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Cl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ek.length;e++)Cl[ek.charCodeAt(e)]=e;const vL=e=>{let t=e.length*.75,r=e.length,n,a=0,i,o,d,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),m=new Uint8Array(h);for(n=0;n<r;n+=4)i=Cl[e.charCodeAt(n)],o=Cl[e.charCodeAt(n+1)],d=Cl[e.charCodeAt(n+2)],c=Cl[e.charCodeAt(n+3)],m[a++]=i<<2|o>>4,m[a++]=(o&15)<<4|d>>2,m[a++]=(d&3)<<6|c&63;return h},wL=typeof ArrayBuffer=="function",gy=(e,t)=>{if(typeof e!="string")return{type:"message",data:f_(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:kL(e.substring(1),t)}:Tu[r]?e.length>1?{type:Tu[r],data:e.substring(1)}:{type:Tu[r]}:Np},kL=(e,t)=>{if(wL){const r=vL(e);return f_(r,t)}else return{base64:!0,data:e}},f_=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},p_="",jL=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((i,o)=>{my(i,!1,d=>{n[o]=d,++a===r&&t(n.join(p_))})})},NL=(e,t)=>{const r=e.split(p_),n=[];for(let a=0;a<r.length;a++){const i=gy(r[a],t);if(n.push(i),i.type==="error")break}return n};function _L(){return new TransformStream({transform(e,t){bL(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let If;function Yc(e){return e.reduce((t,r)=>t+r.length,0)}function Jc(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function SL(e,t){If||(If=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,d){for(r.push(o);;){if(n===0){if(Yc(r)<1)break;const c=Jc(r,1);i=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Yc(r)<2)break;const c=Jc(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Yc(r)<8)break;const c=Jc(r,8),h=new DataView(c.buffer,c.byteOffset,c.length),m=h.getUint32(0);if(m>Math.pow(2,21)-1){d.enqueue(Np);break}a=m*Math.pow(2,32)+h.getUint32(4),n=3}else{if(Yc(r)<a)break;const c=Jc(r,a);d.enqueue(gy(i?c:If.decode(c),t)),n=0}if(a===0||a>e){d.enqueue(Np);break}}}})}const x_=4;function Ft(e){if(e)return CL(e)}function CL(e){for(var t in Ft.prototype)e[t]=Ft.prototype[t];return e}Ft.prototype.on=Ft.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Ft.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Ft.prototype.off=Ft.prototype.removeListener=Ft.prototype.removeAllListeners=Ft.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Ft.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};Ft.prototype.emitReserved=Ft.prototype.emit;Ft.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Ft.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ng=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),xs=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),PL="arraybuffer";function y_(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const EL=xs.setTimeout,IL=xs.clearTimeout;function ag(e,t){t.useNativeTimers?(e.setTimeoutFn=EL.bind(xs),e.clearTimeoutFn=IL.bind(xs)):(e.setTimeoutFn=xs.setTimeout.bind(xs),e.clearTimeoutFn=xs.clearTimeout.bind(xs))}const TL=1.33;function LL(e){return typeof e=="string"?ML(e):Math.ceil((e.byteLength||e.size)*TL)}function ML(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function b_(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function AL(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function OL(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class RL extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class fy extends Ft{constructor(t){super(),this.writable=!1,ag(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new RL(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=gy(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=AL(t);return r.length?"?"+r:""}}class DL extends fy{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};NL(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,jL(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=b_()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let v_=!1;try{v_=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const FL=v_;function zL(){}class BL extends DL{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class dn extends Ft{constructor(t,r,n){super(),this.createRequest=t,ag(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=y_(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=dn.requestsCount++,dn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=zL,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}dn.requestsCount=0;dn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",tk);else if(typeof addEventListener=="function"){const e="onpagehide"in xs?"pagehide":"unload";addEventListener(e,tk,!1)}}function tk(){for(let e in dn.requests)dn.requests.hasOwnProperty(e)&&dn.requests[e].abort()}const $L=function(){const e=w_({xdomain:!1});return e&&e.responseType!==null}();class UL extends BL{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=$L&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new dn(w_,this.uri(),t)}}function w_(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||FL))return new XMLHttpRequest}catch{}if(!t)try{return new xs[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const k_=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class VL extends fy{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=k_?{}:y_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;my(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&ng(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=b_()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Tf=xs.WebSocket||xs.MozWebSocket;class HL extends VL{createSocket(t,r,n){return k_?new Tf(t,r,n):r?new Tf(t,r):new Tf(t)}doWrite(t,r){this.ws.send(r)}}class WL extends fy{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=SL(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=_L();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:d,value:c})=>{d||(this.onPacket(c),i())}).catch(d=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&ng(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const qL={websocket:HL,webtransport:WL,polling:UL},KL=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ZL=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _p(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=KL.exec(e||""),i={},o=14;for(;o--;)i[ZL[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=GL(i,i.path),i.queryKey=YL(i,i.query),i}function GL(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function YL(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const Sp=typeof addEventListener=="function"&&typeof removeEventListener=="function",Lu=[];Sp&&addEventListener("offline",()=>{Lu.forEach(e=>e())},!1);class _a extends Ft{constructor(t,r){if(super(),this.binaryType=PL,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=_p(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=_p(r.host).host);ag(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=OL(this.opts.query)),Sp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Lu.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=x_,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&_a.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",_a.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=LL(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ng(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(_a.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Sp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Lu.indexOf(this._offlineEventListener);n!==-1&&Lu.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}_a.protocol=x_;class JL extends _a{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;_a.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;_a.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(m(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=r.name,this.emitReserved("upgradeError",p)}}))};function i(){n||(n=!0,m(),r.close(),r=null)}const o=f=>{const p=new Error("probe error: "+f);p.transport=r.name,i(),this.emitReserved("upgradeError",p)};function d(){o("transport closed")}function c(){o("socket closed")}function h(f){r&&f.name!==r.name&&i()}const m=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",d),this.off("close",c),this.off("upgrading",h)};r.once("open",a),r.once("error",o),r.once("close",d),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let XL=class extends JL{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>qL[a]).filter(a=>!!a)),super(t,n)}};function QL(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=_p(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const eM=typeof ArrayBuffer=="function",tM=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,j_=Object.prototype.toString,rM=typeof Blob=="function"||typeof Blob<"u"&&j_.call(Blob)==="[object BlobConstructor]",sM=typeof File=="function"||typeof File<"u"&&j_.call(File)==="[object FileConstructor]";function py(e){return eM&&(e instanceof ArrayBuffer||tM(e))||rM&&e instanceof Blob||sM&&e instanceof File}function Mu(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Mu(e[r]))return!0;return!1}if(py(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Mu(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Mu(e[r]))return!0;return!1}function nM(e){const t=[],r=e.data,n=e;return n.data=Cp(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Cp(e,t){if(!e)return e;if(py(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Cp(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Cp(e[n],t));return r}return e}function aM(e,t){return e.data=Pp(e.data,t),delete e.attachments,e}function Pp(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Pp(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Pp(e[r],t));return e}const iM=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],oM=5;var He;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(He||(He={}));class lM{constructor(t){this.replacer=t}encode(t){return(t.type===He.EVENT||t.type===He.ACK)&&Mu(t)?this.encodeAsBinary({type:t.type===He.EVENT?He.BINARY_EVENT:He.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===He.BINARY_EVENT||t.type===He.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=nM(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function rk(e){return Object.prototype.toString.call(e)==="[object Object]"}class xy extends Ft{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===He.BINARY_EVENT;n||r.type===He.BINARY_ACK?(r.type=n?He.EVENT:He.ACK,this.reconstructor=new dM(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(py(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(He[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===He.BINARY_EVENT||n.type===He.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(xy.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case He.CONNECT:return rk(r);case He.DISCONNECT:return r===void 0;case He.CONNECT_ERROR:return typeof r=="string"||rk(r);case He.EVENT:case He.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&iM.indexOf(r[0])===-1);case He.ACK:case He.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class dM{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=aM(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const cM=Object.freeze(Object.defineProperty({__proto__:null,Decoder:xy,Encoder:lM,get PacketType(){return He},protocol:oM},Symbol.toStringTag,{value:"Module"}));function Ts(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const uM=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class N_ extends Ft{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ts(t,"open",this.onopen.bind(this)),Ts(t,"packet",this.onpacket.bind(this)),Ts(t,"error",this.onerror.bind(this)),Ts(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,i;if(uM.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:He.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const m=this.ids++,f=r.pop();this._registerAckCallback(m,f),o.id=m}const d=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!d||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);r.call(this,new Error("operation has timed out"))},a),o=(...d)=>{this.io.clearTimeoutFn(i),r.apply(this,d)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,a)=>{const i=(o,d)=>o?a(o):n(d);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:He.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case He.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case He.EVENT:case He.BINARY_EVENT:this.onevent(t);break;case He.ACK:case He.BINARY_ACK:this.onack(t);break;case He.DISCONNECT:this.ondisconnect();break;case He.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:He.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:He.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Wo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Wo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Wo.prototype.reset=function(){this.attempts=0};Wo.prototype.setMin=function(e){this.ms=e};Wo.prototype.setMax=function(e){this.max=e};Wo.prototype.setJitter=function(e){this.jitter=e};class Ep extends Ft{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,ag(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Wo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||cM;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new XL(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Ts(r,"open",function(){n.onopen(),t&&t()}),i=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},o=Ts(r,"error",i);if(this._timeout!==!1){const d=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},d);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ts(t,"ping",this.onping.bind(this)),Ts(t,"data",this.ondata.bind(this)),Ts(t,"error",this.onerror.bind(this)),Ts(t,"close",this.onclose.bind(this)),Ts(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){ng(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new N_(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const fl={};function Au(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=QL(e,t.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=fl[a]&&i in fl[a].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return d?c=new Ep(n,t):(fl[a]||(fl[a]=new Ep(n,t)),c=fl[a]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Au,{Manager:Ep,Socket:N_,io:Au,connect:Au});class hM{constructor(){this.socket=null,this.isConnected=!1}connect(){if(!this.socket){const r="http://192.168.8.62:5000/api".replace("/api","");this.socket=Au(r,{transports:["websocket"],timeout:2e4,forceNew:!0}),this.socket.on("connect",()=>{this.isConnected=!0,console.log("Connected to server")}),this.socket.on("disconnect",()=>{this.isConnected=!1,console.log("Disconnected from server")}),this.socket.on("connect_error",n=>{console.error("Connection error:",n),this.isConnected=!1}),this.socket.on("connect_timeout",()=>{console.error("Connection timeout"),this.isConnected=!1})}}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}joinUserRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-user-room",t)}joinAdminRoom(){this.socket&&this.isConnected&&this.socket.emit("join-admin-room")}joinDeliveryRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-delivery-room",t)}onOrderStatusUpdate(t){this.socket&&this.socket.on("order-status-update",t)}onDeliveryLocationUpdate(t){this.socket&&this.socket.on("delivery-location-update",t)}updateLocation(t){this.socket&&this.isConnected&&this.socket.emit("location-update",t)}updateOrderStatus(t){this.socket&&this.isConnected&&this.socket.emit("order-status-update",t)}joinConversation(t){this.socket&&this.isConnected&&this.socket.emit("join-conversation",t)}leaveConversation(t){this.socket&&this.isConnected&&this.socket.emit("leave-conversation",t)}emitTypingStart(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-start",{conversationId:t,userId:r})}emitTypingStop(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-stop",{conversationId:t,userId:r})}onNewMessage(t){this.socket&&this.socket.on("new-message",t)}onUserTyping(t){this.socket&&this.socket.on("user-typing",t)}onConversationUpdate(t){this.socket&&this.socket.on("conversation-updated",t)}on(t,r){this.socket&&this.socket.on(t,r)}onChatNotification(t){this.socket&&this.socket.on("chat-notification",t)}removeListener(t,r){this.socket&&this.socket.off(t,r)}off(t,r){this.removeListener(t,r)}emit(t,r){this.socket&&this.isConnected?this.socket.emit(t,r):console.warn(`Socket not connected. Cannot emit event: ${t}`)}isSocketConnected(){return this.socket&&this.isConnected}}const dt=new hM,Ul=ye("auth/login",async({username:e,password:t},{rejectWithValue:r})=>{var n,a,i,o;try{const d=await he.post("/auth/login",{username:e,password:t});return localStorage.setItem("token",d.data.token),dt.connect(),dt.joinUserRoom(d.data.user.id),K.success("Skrir inn"),d.data}catch(d){return K.error(((a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)||"Innskrning mistkst"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Login failed")}}),Ou=ye("auth/kenniLogin",async({idToken:e},{rejectWithValue:t})=>{var r,n,a,i;try{const o=await he.post("/auth/kenni/login",{idToken:e});return localStorage.setItem("token",o.data.token),dt.connect(),dt.joinUserRoom(o.data.user.id),K.success("Innskrur me Kenni"),o.data}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Kenni innskrning mistkst"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Kenni login failed")}}),Ru=ye("auth/dummyLogin",async({phone:e},{rejectWithValue:t})=>{var r,n,a,i;try{const o=await he.post("/auth/dummy/login",{phone:e});return localStorage.setItem("token",o.data.token),dt.connect(),dt.joinUserRoom(o.data.user.id),K.success("Innskrur me dummy login"),o.data}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Dummy innskrning mistkst"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Dummy login failed")}}),Lf=ye("auth/register",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await he.post("/auth/register",e);return localStorage.setItem("token",o.data.token),dt.connect(),dt.joinUserRoom(o.data.user.id),K.success("Nskrning tkst"),o.data}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Nskrning mistkst"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Registration failed")}}),Du=ye("auth/getProfile",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/auth/profile")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to get profile")}}),Fu=ye("auth/updateProfile",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await he.put("/auth/profile",e);return K.success("Prfll uppfrur"),o.data}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a uppfra prfll"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to update profile")}}),mM={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!!localStorage.getItem("token"),error:null},__=Wr({name:"auth",initialState:mM,reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),dt.disconnect(),K.success("tskrur")},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0}},extraReducers:e=>{e.addCase(Ul.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ul.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Ul.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ou.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ou.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Ou.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ru.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ru.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Ru.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Lf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Lf.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Lf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Du.pending,t=>{t.isLoading=!0}).addCase(Du.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload,t.isAuthenticated=!0}).addCase(Du.rejected,(t,r)=>{var n,a,i;t.isLoading=!1,t.error=r.payload,((n=r.payload)!=null&&n.includes("token")||(a=r.payload)!=null&&a.includes("401")||(i=r.payload)!=null&&i.includes("Invalid"))&&(t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token"))}).addCase(Fu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Fu.fulfilled,(t,r)=>{t.isLoading=!1,t.user={...t.user,...r.payload},t.error=null}).addCase(Fu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{logout:yy,clearError:gM}=__.actions,fM=__.reducer,fo=ye("orders/fetchUserOrders",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await he.get(`/orders/my-orders?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch orders")}}),zu=ye("orders/fetchOrder",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get(`/orders/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch order")}}),Bu=ye("orders/createOrder",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await he.post("/orders",e);return K.success("Pntun stofnu"),o.data}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a stofna pntun"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create order")}}),Vl=ye("orders/updateOrderStatus",async({id:e,status:t,estimatedDelivery:r},{rejectWithValue:n})=>{var a,i,o,d;try{const c=await he.put(`/orders/${e}/status`,{status:t,estimatedDelivery:r});return K.success("Pntunarstaa uppfr"),c.data}catch(c){return K.error(((i=(a=c.response)==null?void 0:a.data)==null?void 0:i.message)||"Mistkst a uppfra pntunarstaa"),n(((d=(o=c.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to update order status")}}),$u=ye("orders/assignDeliveryPerson",async({id:e,deliveryPersonId:t},{rejectWithValue:r})=>{var n,a,i,o;try{const d=await he.put(`/orders/${e}/assign-delivery`,{deliveryPersonId:t});return K.success("Afhendingarmaur thlutaur"),d.data}catch(d){return K.error(((a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a thluta afhendingarmanni"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to assign delivery person")}}),po=ye("orders/fetchAllOrders",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await he.get(`/orders?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch orders")}}),Uu=ye("orders/sendReceiptEmail",async({orderId:e,email:t},{rejectWithValue:r})=>{var n,a;try{return(await he.post(`/orders/${e}/receipt/email`,{email:t})).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to send receipt email")}}),pM={orders:[],currentOrder:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},S_=Wr({name:"orders",initialState:pM,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentOrder:e=>{e.currentOrder=null},clearError:e=>{e.error=null},updateOrderStatusRealtime:(e,t)=>{const{orderId:r,status:n}=t.payload,a=e.orders.findIndex(i=>i.id===r);a!==-1&&(e.orders[a].status=n,e.orders[a].updatedAt=new Date().toISOString()),e.currentOrder&&e.currentOrder.id===r&&(e.currentOrder.status=n,e.currentOrder.updatedAt=new Date().toISOString())}},extraReducers:e=>{e.addCase(fo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(fo.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(fo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(zu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(zu.fulfilled,(t,r)=>{t.isLoading=!1,t.currentOrder=r.payload,t.error=null}).addCase(zu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Bu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Bu.fulfilled,(t,r)=>{t.isLoading=!1,t.orders.unshift(r.payload),t.error=null}).addCase(Bu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Vl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Vl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.orders.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.orders[n]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase(Vl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase($u.pending,t=>{t.isLoading=!0,t.error=null}).addCase($u.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.orders.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.orders[n]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase($u.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(po.pending,t=>{t.isLoading=!0,t.error=null}).addCase(po.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(po.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Uu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Uu.fulfilled,(t,r)=>{t.isLoading=!1,t.error=null}).addCase(Uu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:xM,clearCurrentOrder:yM,updateOrderStatusRealtime:bM}=S_.actions,vM=S_.reducer;/*! Capacitor: https://capacitorjs.com/ - MIT License */var Lo;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Lo||(Lo={}));class Mf extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const wM=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},kM=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},n=r.Plugins=r.Plugins||{},a=()=>t!==null?t.name:wM(e),i=()=>a()!=="web",o=f=>{const p=h.get(f);return!!(p!=null&&p.platforms.has(a())||d(f))},d=f=>{var p;return(p=r.PluginHeaders)===null||p===void 0?void 0:p.find(w=>w.name===f)},c=f=>e.console.error(f),h=new Map,m=(f,p={})=>{const w=h.get(f);if(w)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),w.proxy;const x=a(),k=d(f);let y;const b=async()=>(!y&&x in p?y=typeof p[x]=="function"?y=await p[x]():y=p[x]:t!==null&&!y&&"web"in p&&(y=typeof p.web=="function"?y=await p.web():y=p.web),y),j=(O,I)=>{var W,X;if(k){const B=k==null?void 0:k.methods.find(D=>I===D.name);if(B)return B.rtype==="promise"?D=>r.nativePromise(f,I.toString(),D):(D,U)=>r.nativeCallback(f,I.toString(),D,U);if(O)return(W=O[I])===null||W===void 0?void 0:W.bind(O)}else{if(O)return(X=O[I])===null||X===void 0?void 0:X.bind(O);throw new Mf(`"${f}" plugin is not implemented on ${x}`,Lo.Unimplemented)}},N=O=>{let I;const W=(...X)=>{const B=b().then(D=>{const U=j(D,O);if(U){const Z=U(...X);return I=Z==null?void 0:Z.remove,Z}else throw new Mf(`"${f}.${O}()" is not implemented on ${x}`,Lo.Unimplemented)});return O==="addListener"&&(B.remove=async()=>I()),B};return W.toString=()=>`${O.toString()}() { [capacitor code] }`,Object.defineProperty(W,"name",{value:O,writable:!1,configurable:!1}),W},C=N("addListener"),P=N("removeListener"),E=(O,I)=>{const W=C({eventName:O},I),X=async()=>{const D=await W;P({eventName:O,callbackId:D},I)},B=new Promise(D=>W.then(()=>D({remove:X})));return B.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await X()},B},T=new Proxy({},{get(O,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return k?E:C;case"removeListener":return P;default:return N(I)}}});return n[f]=T,h.set(f,{name:f,proxy:T,platforms:new Set([...Object.keys(p),...k?[x]:[]])}),T};return r.convertFileSrc||(r.convertFileSrc=f=>f),r.getPlatform=a,r.handleError=c,r.isNativePlatform=i,r.isPluginAvailable=o,r.registerPlugin=m,r.Exception=Mf,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},jM=e=>e.Capacitor=kM(e),Ip=jM(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),by=Ip.registerPlugin;class C_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,r);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const a=this.listeners[t];if(!a){if(n){let i=this.retainedEventArguments[t];i||(i=[]),i.push(r),this.retainedEventArguments[t]=i}return}a.forEach(i=>i(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new Ip.Exception(t,Lo.Unimplemented)}unavailable(t="not available"){return new Ip.Exception(t,Lo.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const a=n.indexOf(r);this.listeners[t].splice(a,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const sk=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),nk=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class NM extends C_{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[a,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=nk(a).trim(),i=nk(i).trim(),r[a]=i}),r}async setCookie(t){try{const r=sk(t.key),n=sk(t.value),a=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${a}; path=${i}; ${o};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}by("CapacitorCookies",{web:()=>new NM});const _M=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const a=n.result;t(a.indexOf(",")>=0?a.split(",")[1]:a)},n.onerror=a=>r(a),n.readAsDataURL(e)}),SM=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(a=>a.toLocaleLowerCase()).reduce((a,i,o)=>(a[i]=e[t[o]],a),{})},CM=(e,t=!0)=>e?Object.entries(e).reduce((n,a)=>{const[i,o]=a;let d,c;return Array.isArray(o)?(c="",o.forEach(h=>{d=t?encodeURIComponent(h):h,c+=`${i}=${d}&`}),c.slice(0,-1)):(d=t?encodeURIComponent(o):o,c=`${i}=${d}`),`${n}&${c}`},"").substr(1):null,PM=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),a=SM(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(a.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,d]of Object.entries(e.data||{}))i.set(o,d);r.body=i.toString()}else if(a.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((d,c)=>{i.append(c,d)});else for(const d of Object.keys(e.data))i.append(d,e.data[d]);r.body=i;const o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(a.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class EM extends C_{async request(t){const r=PM(t,t.webFetchExtra),n=CM(t.params,t.shouldEncodeUrlParams),a=n?`${t.url}?${n}`:t.url,i=await fetch(a,r),o=i.headers.get("content-type")||"";let{responseType:d="text"}=i.ok?t:{};o.includes("application/json")&&(d="json");let c,h;switch(d){case"arraybuffer":case"blob":h=await i.blob(),c=await _M(h);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const m={};return i.headers.forEach((f,p)=>{m[p]=f}),{data:c,headers:m,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}by("CapacitorHttp",{web:()=>new EM});var qh;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(qh||(qh={}));var ak;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(ak||(ak={}));const ik=by("StatusBar");/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(e,t)=>{const r=_.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,...h},m)=>_.createElement("svg",{ref:m,...IM,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${TM(e)}`,d].join(" "),...h},[...t.map(([f,p])=>_.createElement(f,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ue("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=ue("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=ue("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=ue("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=ue("Beer",[["path",{d:"M17 11h1a3 3 0 0 1 0 6h-1",key:"1yp76v"}],["path",{d:"M9 12v6",key:"1u1cab"}],["path",{d:"M13 12v6",key:"1sugkk"}],["path",{d:"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z",key:"1510fo"}],["path",{d:"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"19jb7n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=ue("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=ue("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ue("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=ue("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I_=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=ue("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=ue("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lp=ue("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ue("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ky=ue("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=ue("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=ue("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=ue("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=ue("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=ue("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=ue("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=ue("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=ue("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=ue("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=ue("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ue("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ue("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=ue("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=ue("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=ue("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=ue("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zh=ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M_=ue("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ue("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=ue("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=ue("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ue("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=ue("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=ue("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ue("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=ue("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=ue("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=ue("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=ue("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=ue("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ue("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=ue("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=ue("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ue("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=ue("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=ue("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=ue("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=ue("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=ue("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O_=ue("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dg=ue("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var R_={exports:{}},tA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rA=tA,sA=rA;function D_(){}function F_(){}F_.resetWarningCache=D_;var nA=function(){function e(n,a,i,o,d,c){if(c!==sA){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:F_,resetWarningCache:D_};return r.PropTypes=r,r};R_.exports=nA();var Py=R_.exports;const de=Yp(Py),aA=()=>{const[e,t]=_.useState(0),[r,n]=_.useState(!1),{user:a}=we(o=>o.auth),i=_.useCallback(async()=>{if(!(!a||a.role!=="ADMIN"))try{n(!0);const o=await he.get("/chat/unread-count");t(o.data.unreadCount||0)}catch(o){console.error("Error fetching unread count:",o),t(0)}finally{n(!1)}},[a]);return _.useEffect(()=>{i();const o=setInterval(i,3e4);return()=>clearInterval(o)},[a,i]),{unreadCount:e,isLoading:r,refetch:i}},Ey=({isMobile:e=!1,onCollapseChange:t})=>{const{t:r}=pe(),{setSidebarOpen:n}=ry(),[a,i]=_.useState(()=>{const y=localStorage.getItem("adminSidebarCollapsed");return y?JSON.parse(y):!1}),[o,d]=_.useState(()=>{const y=localStorage.getItem("adminSettingsExpanded");return y?JSON.parse(y):!1}),c=Ir(),h=nt(),{unreadCount:m}=aA();_.useEffect(()=>{t&&t(a)},[a,t]);const f=()=>{i(y=>{const b=!y;return localStorage.setItem("adminSidebarCollapsed",JSON.stringify(b)),t&&t(b),b})},p=()=>{d(y=>{const b=!y;return localStorage.setItem("adminSettingsExpanded",JSON.stringify(b)),b})},w=[{title:r("adminSidebar.overview"),items:[{name:r("adminNavigation.dashboard"),href:"/admin",icon:BM}]},{title:r("adminSidebar.sales"),items:[{name:r("adminNavigation.orders"),href:"/admin/orders",icon:yr},{name:r("adminNavigation.pos"),href:"/admin/pos",icon:E_},{name:r("adminNavigation.delivery"),href:"/delivery",icon:Cr}]},{title:r("adminSidebar.catalog"),items:[{name:r("adminNavigation.products"),href:"/admin/products",icon:Ue},{name:r("adminNavigation.categories"),href:"/admin/categories",icon:ac}]},{title:r("adminSidebar.content"),items:[{name:r("adminNavigation.media"),href:"/admin/media",icon:ky},{name:r("adminNavigation.banners"),href:"/admin/banners",icon:rr}]},{title:r("adminSidebar.customersAndCommunication"),items:[{name:r("adminNavigation.customers"),href:"/admin/customers",icon:Ca},{name:r("adminNavigation.chat"),href:"/admin/chat",icon:Sa,unreadCount:m},{name:r("adminNavigation.notifications"),href:"/admin/notifications",icon:Vi}]},{title:r("adminSidebar.analytics"),items:[{name:r("adminNavigation.analytics"),href:"/admin/analytics",icon:Mo},{name:r("adminNavigation.reports"),href:"/admin/reports",icon:Mp}]},{title:r("adminSidebar.settings"),items:[{name:r("adminSettings.general"),href:"/admin/settings/general",icon:es},{name:r("adminSettings.shipping"),href:"/admin/settings/shipping",icon:Cr},{name:r("adminSettings.paymentGateways"),href:"/admin/settings/payment-gateways",icon:mn},{name:r("adminSettings.receipts"),href:"/admin/settings/receipts",icon:_y}]},{title:r("adminSidebar.system"),items:[{name:r("adminNavigation.translations"),href:"/admin/translations",icon:jy},{name:r("adminNavigation.demoData"),href:"/admin/demo-data",icon:$d}]}],x=()=>{h(yy())},k=y=>y==="/admin"?c.pathname===y||c.pathname==="/admin/":c.pathname===y||c.pathname.startsWith(y+"/");return s.jsxs("div",{className:`bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${e?"w-full h-full":"rounded-r-lg shadow-sm border border-gray-200 dark:border-gray-700"} transition-all duration-300 ease-in-out ${e?"w-full h-full":a?"w-16":"w-56"} h-full flex flex-col overflow-hidden`,children:[!e&&s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 p-3",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:f,className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 hover:scale-110 active:scale-95",children:s.jsx("div",{className:"transition-transform duration-300 ease-in-out",children:a?s.jsx(wy,{className:"h-4 w-4"}):s.jsx(vy,{className:"h-4 w-4"})})})})}),s.jsx("nav",{className:"flex-1 px-2 py-2 space-y-2",children:w.map((y,b)=>{const j=y.title===r("adminSidebar.settings");return s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:`px-2 py-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 h-0 py-0 overflow-hidden":"opacity-100 h-auto"}`,children:s.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider transition-colors duration-200",children:y.title})}),s.jsxs("div",{className:"space-y-0",children:[j?s.jsxs("button",{onClick:p,className:"relative flex items-center w-full px-2 py-1.5 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all duration-300 ease-in-out group",title:a&&!e?r("adminSidebar.settings"):void 0,children:[s.jsx(es,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${a&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),s.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[s.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:r("adminSidebar.settings")}),!a&&s.jsx(I_,{className:`h-4 w-4 transition-transform duration-300 ${o?"rotate-180":""}`})]})]}):null,j&&o?s.jsx("div",{className:"pl-2 space-y-0.5 border-l-2 border-gray-200 dark:border-gray-700 ml-2",children:y.items.map(N=>{const C=N.icon,P=k(N.href);return s.jsxs(je,{to:N.href,onClick:()=>{e&&n(!1)},className:`relative flex items-center px-2 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out group ${P?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:a?N.name:void 0,children:[s.jsx(C,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${a&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),s.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[s.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:N.name}),N.unreadCount>0&&s.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full transition-all duration-200 ${P?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:N.unreadCount})]}),a&&!e&&N.unreadCount>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center transition-all duration-200 animate-pulse",children:N.unreadCount})]},N.name)})}):j?null:y.items.map(N=>{const C=N.icon,P=k(N.href);return s.jsxs(je,{to:N.href,onClick:()=>{e&&n(!1)},className:`relative flex items-center px-2 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out group ${P?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:a?N.name:void 0,children:[s.jsx(C,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${a&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),s.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[s.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:N.name}),N.unreadCount>0&&s.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full transition-all duration-200 ${P?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:N.unreadCount})]}),a&&!e&&N.unreadCount>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center transition-all duration-200 animate-pulse",children:N.unreadCount})]},N.name)})]}),b<w.length-1&&s.jsx("div",{className:"px-2",children:s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"})})]},y.title)})}),s.jsxs("div",{className:`border-b border-gray-200 dark:border-gray-700 flex-shrink-0 space-y-1.5 transition-all duration-300 ease-in-out ${e?"p-3":"px-3 pt-3 pb-3"}`,children:[s.jsxs("div",{className:"flex items-center p-1.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 transition-all duration-300 ease-in-out",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 transition-transform duration-200 hover:scale-105",children:s.jsx("span",{className:"text-white text-sm font-medium transition-colors duration-200",children:"A"})}),s.jsxs("div",{className:`min-w-0 flex-1 transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate transition-colors duration-200",children:r("adminNavigation.adminUser")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate transition-colors duration-200",children:r("adminSidebar.adminEmail")})]})]}),s.jsxs("button",{onClick:x,className:`flex items-center w-full px-3 py-1.5 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-all duration-300 ease-in-out hover:scale-[1.02] active:scale-[0.98] ${a&&!e?"justify-center px-2":""}`,title:a&&!e?r("adminNavigation.logout"):void 0,children:[s.jsx($M,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-200 group-hover:scale-110"}),s.jsx("span",{className:`transition-all duration-300 ease-in-out ${a&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:r("adminNavigation.logout")})]})]})]})};Ey.propTypes={isMobile:de.bool,onCollapseChange:de.func};const iA=()=>{const{sidebarOpen:e,setSidebarOpen:t}=ry(),{user:r}=we(a=>a.auth),{t:n}=pe();return!r||r.role!=="ADMIN"?null:s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>t(!1),children:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),s.jsx("div",{className:`fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-gray-800 shadow-2xl transform transition-transform duration-300 ease-in-out z-50 lg:hidden ${e?"translate-x-0":"translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:n("navigation.menu")}),s.jsx("button",{onClick:()=>t(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors","aria-label":"Close sidebar",children:s.jsx(L_,{className:"w-6 h-6 rotate-45"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:s.jsx(Ey,{isMobile:!0})})]})})]})},yo=ye("receiptSettings/fetchReceiptSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/receipt-settings")).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch receipt settings")}}),Vu=ye("receiptSettings/updateReceiptSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.put("/receipt-settings",e)).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update receipt settings")}}),Hu=ye("receiptSettings/uploadReceiptLogo",async(e,{rejectWithValue:t})=>{var r,n;try{const a=new FormData;return a.append("logo",e),(await he.post("/receipt-settings/logo",a,{headers:{"Content-Type":void 0}})).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to upload logo")}}),Wu=ye("receiptSettings/deleteReceiptLogo",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.delete("/receipt-settings/logo")).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete logo")}}),oA={settings:{logoInversion:"none"},isLoading:!1,error:null,uploadProgress:0},z_=Wr({name:"receiptSettings",initialState:oA,reducers:{clearError:e=>{e.error=null},setUploadProgress:(e,t)=>{e.uploadProgress=t.payload},updateSettingsField:(e,t)=>{const{field:r,value:n}=t.payload;e.settings&&(e.settings[r]=n)}},extraReducers:e=>{e.addCase(yo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(yo.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(yo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Vu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Vu.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(Vu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Hu.pending,t=>{t.uploadProgress=0,t.error=null}).addCase(Hu.fulfilled,(t,r)=>{t.uploadProgress=100,t.settings=r.payload.settings,t.error=null}).addCase(Hu.rejected,(t,r)=>{t.uploadProgress=0,t.error=r.payload}).addCase(Wu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Wu.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(Wu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{updateSettingsField:lA}=z_.actions,dA=z_.reducer,cA=()=>{const e=nt(),{settings:t}=we(r=>r.receiptSettings);return _.useEffect(()=>{t||e(yo())},[e,t]),_.useEffect(()=>{if(t&&t.customCss){let r=document.getElementById("receipt-settings-css");r||(r=document.createElement("style"),r.id="receipt-settings-css",document.head.appendChild(r)),r.textContent=t.customCss}},[t]),{settings:t}},cn=ye("products/fetchProducts",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.category&&e.category.trim()!==""&&a.append("category",e.category),e.subcategory&&e.subcategory.trim()!==""&&a.append("subcategory",e.subcategory),e.search&&a.append("search",e.search),e.minPrice&&a.append("minPrice",e.minPrice),e.maxPrice&&a.append("maxPrice",e.maxPrice),e.minAlcoholVolume&&a.append("minAlcoholVolume",e.minAlcoholVolume),e.maxAlcoholVolume&&a.append("maxAlcoholVolume",e.maxAlcoholVolume),e.sortBy&&a.append("sortBy",e.sortBy),e.sortOrder&&a.append("sortOrder",e.sortOrder),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await he.get(`/products?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch products")}}),qu=ye("products/fetchProduct",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get(`/products/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch product")}}),Wl=ye("products/fetchCategories",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/categories")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch categories")}}),Rf=ye("products/fetchSubcategories",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get(`/products/subcategories?categoryId=${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subcategories")}}),Df=ye("products/fetchDiscountedProducts",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.limit&&a.append("limit",e.limit),(await he.get(`/products/discounted?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch discounted products")}}),ql=ye("products/createProduct",async(e,{rejectWithValue:t})=>{var r,n;try{const a=new FormData;return Object.keys(e).forEach(o=>{e[o]!==null&&e[o]!==void 0&&a.append(o,e[o])}),(await he.post("/products",a,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create product")}}),Kl=ye("products/updateProduct",async({id:e,productData:t},{rejectWithValue:r})=>{var n,a;try{const i=new FormData;return Object.keys(t).forEach(d=>{t[d]!==null&&t[d]!==void 0&&i.append(d,t[d])}),(await he.put(`/products/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update product")}}),Ku=ye("products/deleteProduct",async(e,{rejectWithValue:t})=>{var r,n;try{return await he.delete(`/products/${e}`),e}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete product")}}),uA={products:[],discountedProducts:[],currentProduct:null,categories:[],subcategories:[],pagination:{page:1,limit:20,total:0,pages:0},filters:{category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"},isLoading:!1,error:null},B_=Wr({name:"products",initialState:uA,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"}},clearCurrentProduct:e=>{e.currentProduct=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(cn.pending,t=>{t.isLoading=!0,t.error=null}).addCase(cn.fulfilled,(t,r)=>{var n,a;t.isLoading=!1,t.products=r.payload.products||((n=r.payload.data)==null?void 0:n.products)||[],t.pagination=r.payload.pagination||((a=r.payload.data)==null?void 0:a.pagination)||{},t.error=null}).addCase(cn.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(qu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(qu.fulfilled,(t,r)=>{t.isLoading=!1,t.currentProduct=r.payload,t.error=null}).addCase(qu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Wl.pending,t=>{t.isLoading=!0}).addCase(Wl.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload}).addCase(Wl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Rf.pending,t=>{t.isLoading=!0}).addCase(Rf.fulfilled,(t,r)=>{t.isLoading=!1,t.subcategories=r.payload}).addCase(Rf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Df.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Df.fulfilled,(t,r)=>{t.isLoading=!1,t.discountedProducts=r.payload,t.error=null}).addCase(Df.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ql.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ql.fulfilled,(t,r)=>{t.isLoading=!1,t.products.unshift(r.payload),t.error=null}).addCase(ql.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Kl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Kl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.products.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.products[n]=r.payload),t.currentProduct&&t.currentProduct.id===r.payload.id&&(t.currentProduct=r.payload),t.error=null}).addCase(Kl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ku.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ku.fulfilled,(t,r)=>{t.isLoading=!1,t.products=t.products.filter(n=>n.id!==r.payload),t.currentProduct&&t.currentProduct.id===r.payload&&(t.currentProduct=null),t.error=null}).addCase(Ku.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:us,clearCurrentProduct:hA}=B_.actions,mA=B_.reducer,Zu=ye("cart/fetchCart",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/cart")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch cart")}}),gi=ye("cart/addToCart",async({productId:e,quantity:t=1},{rejectWithValue:r})=>{var n,a,i,o;try{const d=await he.post("/cart/items",{productId:e,quantity:t});return K.success("Vru btt  krfu"),d.data}catch(d){return K.error(((a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a bta vru  krfu"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to add to cart")}}),Gu=ye("cart/updateCartItem",async({itemId:e,quantity:t},{rejectWithValue:r})=>{var n,a,i,o;try{return(await he.put(`/cart/items/${e}`,{quantity:t})).data}catch(d){return K.error(((a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a uppfra krfu"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update cart item")}}),Zl=ye("cart/removeFromCart",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await he.delete(`/cart/items/${e}`),K.success("Vru fjarlg r krfu"),e}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a fjarlgja vru r krfu"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to remove from cart")}}),Yu=ye("cart/clearCart",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await he.delete("/cart"),K.success("Krfa tmd"),!0}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a tma krfu"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to clear cart")}}),gA={cart:null,isLoading:!1,error:null},fA=Wr({name:"cart",initialState:gA,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Zu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Zu.fulfilled,(t,r)=>{t.isLoading=!1,t.cart=r.payload,t.error=null}).addCase(Zu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(gi.pending,t=>{t.isLoading=!0,t.error=null}).addCase(gi.fulfilled,(t,r)=>{t.isLoading=!1,r.payload&&r.payload.items&&(t.cart=r.payload),t.error=null}).addCase(gi.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Gu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Gu.fulfilled,(t,r)=>{if(t.isLoading=!1,t.cart&&t.cart.items){const n=t.cart.items.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.cart.items[n]=r.payload)}t.error=null}).addCase(Gu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Zl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Zl.fulfilled,(t,r)=>{t.isLoading=!1,t.cart&&t.cart.items&&(t.cart.items=t.cart.items.filter(n=>n.id!==r.payload)),t.error=null}).addCase(Zl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Yu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Yu.fulfilled,t=>{t.isLoading=!1,t.cart&&(t.cart.items=[]),t.error=null}).addCase(Yu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),pA=fA.reducer,xA=()=>{const[e,t]=_.useState(!1);_.useEffect(()=>{const n=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(n==="dark"||!n&&a)&&(t(!0),document.documentElement.classList.add("dark"))},[]);const r=()=>{const n=!e;t(n),console.log("Toggling dark mode:",n),n?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),console.log("Added dark class to document")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),console.log("Removed dark class from document"))};return s.jsx("button",{onClick:r,className:"p-2 text-gray-700 hover:text-primary-600 transition-colors dark:text-gray-300 dark:hover:text-primary-400","aria-label":`Switch to ${e?"light":"dark"} mode`,children:e?s.jsx(XM,{className:"w-5 h-5","aria-hidden":"true"}):s.jsx(HM,{className:"w-5 h-5","aria-hidden":"true"})})},Iy={monday:{open:"10:00",close:"22:00"},tuesday:{open:"10:00",close:"22:00"},wednesday:{open:"10:00",close:"22:00"},thursday:{open:"10:00",close:"22:00"},friday:{open:"10:00",close:"22:00"},saturday:{open:"10:00",close:"22:00"},sunday:{open:"10:00",close:"22:00"}},yA=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],bA=e=>Iy[e.toLowerCase()],El=()=>{const e=new Date().getDay(),t=yA[e];return bA(t)},vA=()=>{const e=new Date,t=El();if(!t)return!1;const r=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;return r>=t.open&&r<t.close},Ff=(e="is")=>{const t={is:{monday:"Mnudagur",tuesday:"rijudagur",wednesday:"Mivikudagur",thursday:"Fimmtudagur",friday:"Fstudagur",saturday:"Laugardagur",sunday:"Sunnudagur"},en:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},r=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],n=[];let a=null;return r.forEach((i,o)=>{const d=Iy[i],c=`${d.open} - ${d.close}`;a?a.hours===c?a.days.push(i):(n.push(a),a={days:[i],hours:c}):a={days:[i],hours:c},o===r.length-1&&n.push(a)}),n.map(i=>{const o=t[e]||t.is;let d;if(i.days.length===1)d=o[i.days[0]];else if(i.days.length===7)d=e==="is"?"Alla daga":"Every day";else{const c=o[i.days[0]],h=o[i.days[i.days.length-1]];d=`${c} - ${h}`}return{days:d,hours:i.hours}})},wA=()=>{var $,Y;const{t:e,currentLanguage:t,setCurrentLanguage:r}=pe(),n=Ir(),{setSidebarOpen:a}=ry(),i=is(),o=nt(),{isAuthenticated:d,user:c}=we(M=>M.auth),{cart:h}=we(M=>M.cart),{categories:m}=we(M=>M.products);n.pathname.startsWith("/admin");const[f,p]=_.useState(!1),[w,x]=_.useState(!1),[k,y]=_.useState(!1),[b,j]=_.useState(!1),[N,C]=_.useState(!1),[P,E]=_.useState(null),[T,O]=_.useState(""),[I,W]=_.useState([]),[X,B]=_.useState(!1),[D,U]=_.useState(!1),[Z,G]=_.useState(-1),[F,R]=_.useState(window.innerWidth<768),q=_.useRef(null),J=_.useRef(null),re=_.useRef(null),V=_.useRef(null),ae=_.useRef(null),fe=_.useRef(null),be=_.useRef(null),z=(($=h==null?void 0:h.items)==null?void 0:$.reduce((M,te)=>M+te.quantity,0))||0;_.useEffect(()=>{o(Wl()),xe()},[o]),_.useEffect(()=>{const M=()=>{R(window.innerWidth<768)};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]);const xe=async()=>{var M;try{const te=await fetch("/api/settings/opening-hours");if(te.ok){const oe=await te.json();(M=oe.data)!=null&&M.openingHours?E(oe.data.openingHours):E(El())}}catch(te){console.error("Error fetching opening hours:",te),E(El())}},Me=()=>{if(!P)return El();const M=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],te=new Date().getDay(),oe=M[te];return P[oe]||El()},ze=()=>{if(!P)return vA();const M=Me();if(M.closed)return!1;const te=new Date,oe=`${te.getHours().toString().padStart(2,"0")}:${te.getMinutes().toString().padStart(2,"0")}`;return oe>=M.open&&oe<M.close};_.useEffect(()=>{const M=te=>{ae.current&&!ae.current.contains(te.target)&&x(!1)};return w&&document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[w]),_.useEffect(()=>{const M=te=>{fe.current&&!fe.current.contains(te.target)&&j(!1)};return b&&document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[b]);const Ee=()=>{o(yy()),i("/"),x(!1),p(!1)},ie=(c==null?void 0:c.role)==="ADMIN",Te=(c==null?void 0:c.role)==="DELIVERY",Ae=_.useCallback(async M=>{var te;if(!M.trim()){W([]),B(!1);return}U(!0);try{const oe=await he.get(`/products?search=${encodeURIComponent(M)}&limit=5`);W(((te=oe.data)==null?void 0:te.products)||[]),B(!0)}catch(oe){console.error("Search error:",oe),W([])}finally{U(!1)}},[]),Q=_.useCallback(M=>{re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{Ae(M)},300)},[Ae]),ge=M=>{const te=M.target.value;O(te),G(-1),te.trim()?Q(te):(W([]),B(!1))},Le=()=>{T.trim()&&(i(`/products?search=${encodeURIComponent(T)}`),B(!1),O(""),W([]))},at=M=>{i(`/products/${M.id}`),B(!1),O(""),W([])},Je=async(M,te)=>{M.stopPropagation();try{await o(gi({productId:te.id,quantity:1})).unwrap(),K.success(e("cart.itemAdded"))}catch(oe){console.error("Add to cart error:",oe),K.error(oe.message||e("cart.addError"))}},Xe=M=>{var te;if(!X||I.length===0){M.key==="Enter"&&Le();return}switch(M.key){case"ArrowDown":M.preventDefault(),G(oe=>oe<I.length-1?oe+1:oe);break;case"ArrowUp":M.preventDefault(),G(oe=>oe>0?oe-1:-1);break;case"Enter":M.preventDefault(),Z>=0&&Z<I.length?at(I[Z]):Le();break;case"Escape":B(!1),G(-1),(te=q.current)==null||te.blur();break}};return _.useEffect(()=>{const M=te=>{J.current&&!J.current.contains(te.target)&&q.current&&!q.current.contains(te.target)&&(B(!1),G(-1))};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[]),_.useEffect(()=>{const M=te=>{V.current&&!V.current.contains(te.target)&&!te.target.closest("[data-shop-menu-trigger]")&&y(!1)};return k&&document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[k]),_.useEffect(()=>{const M=te=>{be.current&&!be.current.contains(te.target)&&!te.target.closest("[data-admin-menu-trigger]")&&C(!1)};return N&&document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[N]),_.useEffect(()=>()=>{re.current&&clearTimeout(re.current)},[]),s.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700 fixed top-0 left-0 right-0 z-50 pt-safe",role:"navigation","aria-label":e("aria.mainNavigation"),children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(je,{to:"/",className:"flex items-center","aria-label":e("aria.homepage"),children:s.jsx("img",{src:"/logo_black-web.webp",alt:e("aria.logo"),className:"h-10 sm:h-12 w-auto dark:invert"})}),s.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-sm",children:[s.jsx(Wt,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("div",{className:"flex items-center gap-2",children:Me().closed?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t==="is"?" dag":"Today",":"]}),s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:t==="is"?"Loka":"Closed"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t==="is"?" dag":"Today",": ",Me().open," - ",Me().close]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${ze()?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:ze()?t==="is"?"Opi":"Open":t==="is"?"Loka":"Closed"})]})})]})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[s.jsxs("div",{className:"relative",ref:J,children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:q,type:"text",value:T,onChange:ge,onKeyDown:Xe,placeholder:e("search.placeholder"),className:"w-64 pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-all duration-200",autoComplete:"off"}),s.jsx("button",{onClick:Le,className:"absolute right-2 top-2 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-colors","aria-label":"Search",children:s.jsx(zt,{className:"w-4 h-4"})})]}),X&&s.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-[512px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-[70]",children:D?s.jsx("div",{className:"px-4 py-3 text-center text-gray-500 dark:text-gray-400",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),s.jsx("span",{children:e("search.searching")})]})}):I.length>0?s.jsxs("div",{children:[I.map((M,te)=>{var oe;return s.jsx("div",{className:`w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${te===Z?"bg-primary-50 dark:bg-primary-900/20":""}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("button",{onClick:()=>at(M),className:"flex-shrink-0 w-16 h-16 bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600 hover:border-primary-400 dark:hover:border-primary-600 transition-colors",children:M.imageUrl?s.jsx("img",{src:M.imageUrl,alt:M.name,className:"w-full h-full object-contain p-1"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Ue,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})}),s.jsxs("button",{onClick:()=>at(M),className:"flex-1 min-w-0 text-left",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white line-clamp-1",children:M.nameIs||M.name}),s.jsxs("span",{className:"text-sm font-semibold text-primary-600 dark:text-primary-400 flex-shrink-0",children:[M.price.toLocaleString()," ",e("common.currency")]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:M.descriptionIs||M.description}),s.jsxs("div",{className:"flex items-center mt-1.5 space-x-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",children:((oe=M.category)==null?void 0:oe.nameIs)||"Flokkur"}),M.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[M.alcoholContent,"% ",e("product.abv")]})]})]}),d&&s.jsx("button",{onClick:ce=>Je(ce,M),className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors shadow-sm hover:shadow-md",title:e("cart.addToCart"),children:s.jsx(vr,{className:"w-4 h-4"})})]})},M.id)}),s.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700",children:s.jsxs("button",{onClick:Le,className:"w-full px-4 py-3 text-center text-primary-600 dark:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:[e("search.viewAllResults"),' "',T,'"']})})]}):T.trim()&&!D?s.jsxs("div",{className:"px-4 py-6 text-center",children:[s.jsx(Ue,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("search.noResults"),' "',T,'"']})]}):null})]}),s.jsx(je,{to:"/products",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("productsPage.all")}),s.jsxs("div",{className:"relative",ref:V,children:[s.jsxs("button",{"data-shop-menu-trigger":!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center",children:[e("navigation.shop"),s.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s.jsxs("div",{onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),className:`fixed top-[4rem] left-1/2 transform -translate-x-1/2 mt-2 w-[1100px] max-w-[90vw] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[999] transition-all duration-300 overflow-hidden ${k?"opacity-100 visible scale-100":"opacity-0 invisible scale-95"}`,children:[s.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("navigation.shop")}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:e("navigation.discoverCategories")})]}),s.jsx(je,{to:"/products",onClick:()=>y(!1),className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors font-semibold text-base",children:e("navigation.viewAllProducts")})]})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.filter(M=>M.isActive).map(M=>{var te;return s.jsxs(je,{to:`/products?category=${M.name}`,onClick:()=>y(!1),className:"group block p-4 bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 hover:shadow-md transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-primary-300 dark:hover:border-primary-600",children:[M.imageUrl&&s.jsx("div",{className:"mb-3 flex items-center justify-center w-full h-32 bg-white dark:bg-white rounded-lg overflow-hidden border border-gray-200 dark:border-gray-200",children:s.jsx("img",{src:M.imageUrl.startsWith("http")?M.imageUrl:`http://192.168.8.62:5000${M.imageUrl}`,alt:M.name,className:"w-full h-full object-contain p-2 group-hover:scale-105 transition-transform duration-200"})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[!M.imageUrl&&s.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/30 dark:to-primary-800/30 rounded-lg flex-shrink-0",children:s.jsxs("span",{className:"text-xl",children:[M.name==="WINE"&&"",M.name==="BEER"&&"",M.name==="SPIRITS"&&"",M.name==="VAPE"&&"",M.name==="NICOTINEPADS"&&"",!["WINE","BEER","SPIRITS","VAPE","NICOTINEPADS"].includes(M.name)&&""]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors text-base truncate",children:M.nameIs}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[((te=M._count)==null?void 0:te.products)||0," ",e("common.itemsLabel")]}),M.subcategories&&M.subcategories.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[M.subcategories.length," ",e("adminCategories.subcategories").toLowerCase()]})]})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3 leading-relaxed",children:M.descriptionIs||M.description||e("category.fallbackDescription")}),M.subcategories&&M.subcategories.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.subcategories.slice(0,4).map(oe=>s.jsx("span",{className:"inline-block px-3 py-1.5 text-sm bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-md font-medium",children:oe.nameIs||oe.name},oe.id)),M.subcategories.length>4&&s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 px-3 py-1.5 font-medium",children:["+",M.subcategories.length-4]})]})]},M.id)})})}),s.jsx("div",{className:"px-8 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e("navigation.needHelp")," ",s.jsx("a",{href:"/contact",className:"text-primary-600 dark:text-primary-400 hover:underline font-semibold",children:e("navigation.contactUs")})]})})})]})]}),d&&s.jsx(s.Fragment,{children:Te&&s.jsx(je,{to:"/delivery",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.delivery")})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(xA,{}),!d&&s.jsxs("div",{className:"relative",ref:fe,children:[s.jsx("button",{onClick:()=>j(!b),className:"p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Change language","aria-expanded":b,children:s.jsx(Kh,{className:"w-5 h-5","aria-hidden":"true"})}),b&&s.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-[70] border border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>{r("is"),j(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="is"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"slenska",t==="is"&&s.jsx("span",{className:"ml-auto",children:""})]})}),s.jsx("button",{onClick:()=>{r("en"),j(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="en"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"English",t==="en"&&s.jsx("span",{className:"ml-auto",children:""})]})})]})]}),d&&ie&&s.jsxs("div",{className:"relative",ref:be,children:[s.jsx("button",{"data-admin-menu-trigger":!0,onClick:()=>C(!N),onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),className:"hidden md:flex p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("navigation.admin"),children:s.jsx(es,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>a(!0),className:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("navigation.admin"),children:s.jsx(es,{className:"w-5 h-5"})}),s.jsxs("div",{onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),className:`hidden md:block fixed top-[4rem] left-1/2 transform -translate-x-1/2 mt-2 w-[1100px] max-w-[90vw] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[999] transition-all duration-300 overflow-hidden ${N?"opacity-100 visible scale-100":"opacity-0 invisible scale-95"}`,children:[s.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("navigation.admin")}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:e("adminMenu.manageBusinessSettings")})]}),s.jsx(je,{to:"/admin",onClick:()=>C(!1),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-semibold text-base",children:e("adminMenu.dashboard")})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(yr,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.sales")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(je,{to:"/admin/orders",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.orders")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/pos",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.pointOfSale")})}),s.jsx("li",{children:s.jsx(je,{to:"/delivery",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.deliveries")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Ue,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.catalog")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(je,{to:"/admin/products",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.products")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/categories",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.categories")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/media",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.media")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Mo,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.analytics")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(je,{to:"/admin/customers",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.customers")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/analytics",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.analyticsLink")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/reports",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.reports")})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(ky,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.content")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(je,{to:"/admin/banners",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.banners")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/chat",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.messages")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/notifications",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.notifications")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(es,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.settingsSection")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(je,{to:"/admin/settings/general",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.general")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/settings/payment-gateways",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.payment")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/settings/receipts",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.receipts")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(jy,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.system")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(je,{to:"/admin/translations",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.translations")})}),s.jsx("li",{children:s.jsx(je,{to:"/admin/demo-data",onClick:()=>C(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.demoData")})})]})]})]})]}),s.jsx("div",{className:"px-8 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e("adminMenu.helpText")," ",s.jsx("a",{href:"/contact",className:"text-primary-600 dark:text-primary-400 hover:underline font-semibold",children:e("adminMenu.supportCenter")})]})})]})]}),d&&s.jsxs(je,{to:"/cart",className:"relative p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":`Shopping cart with ${z} items`,children:[s.jsx(yr,{className:"w-5 h-5","aria-hidden":"true"}),z>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-label":`${z} items in cart`,children:z})]}),d?s.jsxs("div",{className:"relative",ref:ae,children:[s.jsxs("button",{onClick:()=>x(!w),className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.userMenu"),"aria-expanded":w,"aria-haspopup":"true",children:[s.jsx(Hr,{className:"w-5 h-5","aria-hidden":"true"}),s.jsx("span",{className:"hidden sm:block text-gray-900 dark:text-white",children:((Y=c==null?void 0:c.fullName)==null?void 0:Y.split(" ")[0])||(c==null?void 0:c.username)})]}),w&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-[70] border border-gray-200 dark:border-gray-700",role:"menu","aria-label":e("aria.userMenu"),children:[s.jsx(je,{to:"/profile",onClick:()=>x(!1),className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.profile")}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 py-1",children:[s.jsx("button",{onClick:()=>{r("is"),x(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="is"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,role:"menuitem",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"slenska",t==="is"&&s.jsx("span",{className:"ml-auto",children:""})]})}),s.jsx("button",{onClick:()=>{r("en"),x(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="en"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,role:"menuitem",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"English",t==="en"&&s.jsx("span",{className:"ml-auto",children:""})]})})]}),s.jsx("button",{onClick:Ee,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.logout")})]})]}):s.jsxs(je,{to:"/login",className:"btn btn-outline p-2 sm:px-4","aria-label":e("navigation.login"),children:[s.jsx(Hr,{className:"w-5 h-5 sm:hidden","aria-hidden":"true"}),s.jsx("span",{className:"hidden sm:inline",children:e("navigation.login")})]}),s.jsx("button",{onClick:()=>p(!f),className:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.toggleMobileMenu"),"aria-expanded":f,children:f?s.jsx(ut,{className:"w-5 h-5","aria-hidden":"true"}):s.jsx(L_,{className:"w-5 h-5","aria-hidden":"true"})})]})]}),f&&s.jsx("div",{className:"fixed inset-0 z-[60] md:hidden",onClick:()=>p(!1),children:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),s.jsx("div",{className:`fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-gray-800 shadow-2xl transform transition-transform duration-300 ease-in-out z-[70] md:hidden ${f?"translate-x-0":"translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("navigation.menu")}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(ut,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto py-4",children:[s.jsx("div",{className:"px-4 mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:T,onChange:ge,onKeyDown:M=>{M.key==="Enter"&&(Le(),p(!1))},placeholder:e("search.placeholder"),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",autoComplete:"off"}),s.jsx("button",{onClick:()=>{Le(),p(!1)},className:"absolute right-3 top-3 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400",children:s.jsx(zt,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"flex flex-col space-y-2 px-4",children:[s.jsx(je,{to:"/products",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("productsPage.all")}),m.map(M=>s.jsx(je,{to:`/products?category=${M.name}`,onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:M.nameIs},M.id)),d&&s.jsxs(s.Fragment,{children:[s.jsx(je,{to:"/profile",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.profile")}),ie&&s.jsx(je,{to:"/admin",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.admin")}),Te&&s.jsx(je,{to:"/delivery",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.delivery")}),s.jsx("button",{onClick:Ee,className:"text-left text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 w-full",children:e("navigation.logout")})]})]})]})]})})]})})},kA=()=>{const{t:e,currentLanguage:t}=pe(),[r,n]=_.useState(null);_.useEffect(()=>{a()},[]);const a=async()=>{var o;try{const d=await he.get("/settings/opening-hours");(o=d.data)!=null&&o.openingHours?n(i(d.data.openingHours,t)):n(Ff(t))}catch(d){console.error("Error fetching opening hours:",d),n(Ff(t))}},i=(o,d)=>{const c={is:{monday:"Mnudagur",tuesday:"rijudagur",wednesday:"Mivikudagur",thursday:"Fimmtudagur",friday:"Fstudagur",saturday:"Laugardagur",sunday:"Sunnudagur"},en:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},h=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],m=[];let f=null;h.forEach((w,x)=>{const k=o[w],y=k.closed?"Closed":`${k.open} - ${k.close}`;f?f.hours===y?f.days.push(w):(m.push(f),f={days:[w],hours:y}):f={days:[w],hours:y},x===h.length-1&&m.push(f)});const p=c[d]||c.is;return m.map(w=>{let x;if(w.days.length===1)x=p[w.days[0]];else if(w.days.length===7)x=d==="is"?"Alla daga":"Every day";else{const k=p[w.days[0]],y=p[w.days[w.days.length-1]];x=`${k} - ${y}`}return{days:x,hours:w.hours}})};return s.jsx("footer",{className:"bg-white dark:bg-gray-800 shadow-lg border-t border-gray-200 dark:border-gray-700 pb-16-safe md:pb-0",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 max-w-md",children:e("footer.aboutUs")}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:" +354 555 1234"}),s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:" info@olfong.is"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:e("footer.quickLinks")}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(je,{to:"/products",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.products")})}),s.jsx("li",{children:s.jsx(je,{to:"/products?category=WINE",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.wine")})}),s.jsx("li",{children:s.jsx(je,{to:"/products?category=BEER",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.beer")})}),s.jsx("li",{children:s.jsx(je,{to:"/products?category=SPIRITS",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.spirits")})}),s.jsx("li",{children:s.jsx(je,{to:"/products?category=NON_ALCOHOLIC",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.nonAlcoholic")})})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(Wt,{className:"w-5 h-5"}),t==="is"?"Opnunartmar":"Opening Hours"]}),s.jsx("ul",{className:"space-y-2",children:(r||Ff(t)).map((o,d)=>s.jsxs("li",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:o.days}),s.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:o.hours})]},d))})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-8 pt-8 text-center",children:[s.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[" 2025 lfng. ",e("footer.copyright")]}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:e("footer.legal")})]})]})})},jA=()=>{var o;const{t:e}=pe(),t=Ir(),{isAuthenticated:r}=we(d=>d.auth),{cart:n}=we(d=>d.cart),a=((o=n==null?void 0:n.items)==null?void 0:o.length)||0,i=[{to:"/",icon:zM,label:e("navigation.home"),active:t.pathname==="/"},{to:"/products",icon:Ue,label:e("navigation.products"),active:t.pathname==="/products"||t.pathname.startsWith("/products/")},...r?[{to:"/cart",icon:yr,label:e("navigation.cart"),active:t.pathname==="/cart",badge:a>0?a:null}]:[],...r?[{to:"/profile",icon:Hr,label:e("navigation.profile"),active:t.pathname==="/profile"}]:[{to:"/login",icon:Hr,label:e("navigation.login"),active:t.pathname==="/login"}]];return s.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 pb-safe",children:s.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(d=>{const c=d.icon;return s.jsxs(je,{to:d.to,className:`flex flex-col items-center justify-center flex-1 py-2 px-1 text-xs transition-colors min-h-[44px] ${d.active?"text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"w-5 h-5 mb-1"}),d.badge&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:d.badge})]}),s.jsx("span",{className:"text-center leading-tight",children:d.label})]},d.to)})})})},it=({size:e="medium",className:t=""})=>{const r={small:"w-4 h-4",medium:"w-6 h-6",large:"w-8 h-8"};return s.jsx("div",{className:`flex items-center justify-center ${t}`,children:s.jsx(qt,{className:`${r[e]} animate-spin text-primary-600`})})};it.propTypes={size:de.oneOf(["small","medium","large"]),className:de.string};const zf=({children:e,requiredRole:t,requiredRoles:r})=>{const{isAuthenticated:n,user:a,isLoading:i}=we(d=>d.auth),o=Ir();if(i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})});if(!n){const d=t==="ADMIN"||r!=null&&r.includes("ADMIN")?"/admin-login":"/login";return s.jsx(Od,{to:d,state:{from:o},replace:!0})}return(t||r)&&!(r||[t]).includes(a==null?void 0:a.role)?s.jsx(Od,{to:"/",replace:!0}):e||s.jsx(eE,{})},NA=()=>{const{t:e}=pe(),t=Ir(),r=is(),{user:n,isAuthenticated:a}=we(G=>G.auth),[i,o]=_.useState(!1),[d,c]=_.useState(!1),[h,m]=_.useState(null),[f,p]=_.useState(!1),[w]=_.useState(null),[x,k]=_.useState([]),[y,b]=_.useState(""),[j,N]=_.useState(0),[C,P]=_.useState(!1),E=_.useRef(null),T=_.useRef(null),O=_.useRef(null),I=async()=>{if(a)try{P(!0);const G=await he.get("/chat/conversations");G.data.length>0&&(m(G.data[0]),await W(G.data[0].id))}catch(G){console.error("Failed to initialize chat:",G)}finally{P(!1)}},W=async G=>{try{const F=await he.get(`/chat/conversations/${G}/messages`);k(F.data),X()}catch(F){console.error("Failed to load messages:",F)}},X=()=>{E.current&&E.current.scrollIntoView({behavior:"smooth"})},B=async()=>{if(!y.trim()||!h)return;const G={conversationId:h.id,content:y.trim(),topic:w};try{const F=await he.post("/chat/messages",G);k(R=>[...R,F.data]),b(""),X()}catch(F){console.error("Failed to send message:",F),Qe.error("Failed to send message")}},D=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),B())},U=()=>{T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{},1e3)};return _.useEffect(()=>{I()},[a]),_.useEffect(()=>{X()},[x]),_.useEffect(()=>{h&&W(h.id)},[h]),_.useEffect(()=>{if(!a)return;const G=R=>{R.conversationId===(h==null?void 0:h.id)&&k(q=>[...q,R]),N(q=>q+1)},F=R=>{R.conversationId===(h==null?void 0:h.id)&&p(R.isTyping)};return dt.on("newMessage",G),dt.on("typingStatus",F),()=>{dt.off("newMessage",G),dt.off("typingStatus",F)}},[a,h]),t.pathname.startsWith("/admin")?null:a?s.jsx("div",{className:"fixed bottom-20 right-6 z-50 md:bottom-6 md:right-6",children:i?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-[calc(100vw-2rem)] h-[500px] flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-700 dark:to-primary-800 text-white p-4 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg",children:s.jsx(Sa,{size:18})}),s.jsx("h3",{className:"font-semibold text-lg",children:e("chat.title")})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>c(!d),className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors","aria-label":d?"Expand":"Minimize",children:d?s.jsx(UM,{size:18}):s.jsx(VM,{size:18})}),s.jsx("button",{onClick:()=>o(!1),className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors","aria-label":"Close chat",children:s.jsx(ut,{size:18})})]})]}),!d&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-900/50",children:[C?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("common.loading")})]})}):x.length===0?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:"No messages yet. Start a conversation!"})}):x.map(G=>s.jsx("div",{className:`flex ${G.senderId===(n==null?void 0:n.id)?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-xl text-sm transition-all duration-200 ${G.senderId===(n==null?void 0:n.id)?"bg-primary-600 dark:bg-primary-700 text-white rounded-br-none shadow-sm":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-none shadow-sm border border-gray-200 dark:border-gray-600"}`,children:[s.jsx("p",{className:"break-words",children:G.content}),s.jsx("p",{className:`text-xs mt-1 opacity-70 ${G.senderId===(n==null?void 0:n.id)?"text-white":"text-gray-600 dark:text-gray-400"}`,children:new Date(G.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},G.id)),f&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white p-3 rounded-xl rounded-bl-none shadow-sm border border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"flex space-x-1.5",children:[s.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:E})]}),s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex-shrink-0",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{ref:O,type:"text",value:y,onChange:G=>{b(G.target.value),U()},onKeyPress:D,placeholder:e("chat.typeMessage"),className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200"}),s.jsx("button",{onClick:B,disabled:!y.trim(),className:"bg-primary-600 dark:bg-primary-700 hover:bg-primary-700 dark:hover:bg-primary-800 disabled:opacity-50 disabled:cursor-not-allowed text-white p-2.5 rounded-lg transition-all duration-200 active:scale-95","aria-label":"Send message",children:s.jsx(Sy,{size:18})})]})})]})]}):s.jsxs("button",{onClick:()=>o(!0),className:"bg-primary-600 dark:bg-primary-500 text-white p-4 rounded-full shadow-lg hover:bg-primary-700 dark:hover:bg-primary-600 active:scale-95 transition-all duration-200 hover:shadow-xl relative","aria-label":e("chat.title"),children:[s.jsx(Sa,{size:24}),j>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-semibold animate-pulse","aria-label":`${j} unread messages`,children:j})]})}):s.jsx("div",{className:"fixed bottom-6 right-6 z-50 md:bottom-4 md:right-4",children:s.jsx("button",{onClick:()=>r("/login"),className:"bg-primary-600 dark:bg-primary-500 text-white p-4 rounded-full shadow-lg hover:bg-primary-700 dark:hover:bg-primary-600 active:scale-95 transition-all duration-200 hover:shadow-xl","aria-label":e("chat.title"),children:s.jsx(Sa,{size:24})})})},_A=()=>{const{user:e,isAuthenticated:t}=we(r=>r.auth);return t&&(e==null?void 0:e.role)==="ADMIN"},fi=ye("categories/fetchCategories",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.includeInactive&&a.append("includeInactive","true"),(await he.get(`/categories?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch categories")}}),Bf=ye("categories/fetchCategory",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get(`/categories/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch category")}}),Ju=ye("categories/createCategory",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.post("/categories",e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create category")}}),Xu=ye("categories/updateCategory",async({id:e,...t},{rejectWithValue:r})=>{var n,a;try{return(await he.put(`/categories/${e}`,t)).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update category")}}),Qu=ye("categories/deleteCategory",async(e,{rejectWithValue:t})=>{var r,n;try{return await he.delete(`/categories/${e}`),e}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete category")}}),SA={categories:[],currentCategory:null,isLoading:!1,error:null},CA=Wr({name:"categories",initialState:SA,reducers:{clearCurrentCategory:e=>{e.currentCategory=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(fi.pending,t=>{t.isLoading=!0,t.error=null}).addCase(fi.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload,t.error=null}).addCase(fi.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Bf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Bf.fulfilled,(t,r)=>{t.isLoading=!1,t.currentCategory=r.payload,t.error=null}).addCase(Bf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ju.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ju.fulfilled,(t,r)=>{t.isLoading=!1,t.categories.push(r.payload),t.error=null}).addCase(Ju.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Xu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Xu.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.categories.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.categories[n]=r.payload),t.currentCategory&&t.currentCategory.id===r.payload.id&&(t.currentCategory=r.payload),t.error=null}).addCase(Xu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Qu.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Qu.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=t.categories.filter(n=>n.id!==r.payload),t.currentCategory&&t.currentCategory.id===r.payload&&(t.currentCategory=null),t.error=null}).addCase(Qu.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),PA=CA.reducer,Gl=ye("banners/fetchBanners",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.includeInactive&&a.append("includeInactive","true"),(await he.get(`/banners?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch banners")}}),$f=ye("banners/fetchBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get(`/banners/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch banner")}}),eh=ye("banners/createBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.post("/banners",e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to create banner")}}),th=ye("banners/updateBanner",async({id:e,...t},{rejectWithValue:r})=>{var n,a;try{return(await he.put(`/banners/${e}`,t)).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to update banner")}}),rh=ye("banners/deleteBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return await he.delete(`/banners/${e}`),e}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to delete banner")}}),sh=ye("banners/toggleBannerStatus",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.patch(`/banners/${e}/toggle`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to toggle banner status")}}),Yl=ye("banners/fetchFeaturedBanners",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/banners/featured")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch featured banners")}}),nh=ye("banners/fetchHeroBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/banners/hero/active")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch hero banner")}}),Jl=ye("banners/setFeaturedBanner",async({id:e,featuredOrder:t},{rejectWithValue:r})=>{var n,a;try{return(await he.patch(`/banners/${e}/featured`,{featuredOrder:t})).data}catch(i){return r(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to set banner as featured")}}),Xl=ye("banners/removeFeaturedBanner",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.delete(`/banners/${e}/featured`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to remove banner from featured")}}),EA={banners:[],featuredBanners:[],heroBanner:null,currentBanner:null,isLoading:!1,error:null},IA=Wr({name:"banners",initialState:EA,reducers:{clearCurrentBanner:e=>{e.currentBanner=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Gl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Gl.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=r.payload,t.error=null}).addCase(Gl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase($f.pending,t=>{t.isLoading=!0,t.error=null}).addCase($f.fulfilled,(t,r)=>{t.isLoading=!1,t.currentBanner=r.payload,t.error=null}).addCase($f.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(eh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(eh.fulfilled,(t,r)=>{t.isLoading=!1,t.banners.push(r.payload),t.error=null}).addCase(eh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(th.pending,t=>{t.isLoading=!0,t.error=null}).addCase(th.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.banners[n]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(th.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(rh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(rh.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=t.banners.filter(n=>n.id!==r.payload),t.currentBanner&&t.currentBanner.id===r.payload&&(t.currentBanner=null),t.error=null}).addCase(rh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(sh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(sh.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.banners[n]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(sh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Yl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Yl.fulfilled,(t,r)=>{t.isLoading=!1,t.featuredBanners=r.payload,t.error=null}).addCase(Yl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(nh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(nh.fulfilled,(t,r)=>{t.isLoading=!1,t.heroBanner=r.payload,t.error=null}).addCase(nh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Jl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Jl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);if(n!==-1&&(t.banners[n]=r.payload),r.payload.isFeatured){const a=t.featuredBanners.findIndex(i=>i.id===r.payload.id);a!==-1?t.featuredBanners[a]=r.payload:(t.featuredBanners.push(r.payload),t.featuredBanners.sort((i,o)=>(i.featuredOrder||0)-(o.featuredOrder||0)))}t.error=null}).addCase(Jl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Xl.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Xl.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.banners.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.banners[n]=r.payload),t.featuredBanners=t.featuredBanners.filter(a=>a.id!==r.payload.id),t.error=null}).addCase(Xl.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),TA=IA.reducer,Ty=(e,t,r)=>e==="is"?t||r||"":r||t||"",$_=(e,t,r)=>e==="is"?t&&t.length>0?t:r||[]:r&&r.length>0?r:t||[],Aa=(e,t)=>Ty(e,t.nameIs,t.name),cg=(e,t)=>Ty(e,t.descriptionIs,t.description),LA=(e,t)=>Ty(e,t.countryIs,t.country),so=(e,t)=>$_(e,t.foodPairingsIs,t.foodPairings),ok=(e,t)=>$_(e,t.specialAttributesIs,t.specialAttributes),ic=({product:e,className:t="w-full h-64 object-contain",currentLanguage:r="is"})=>{var c;const[n,a]=_.useState(!1),i=h=>typeof h=="string"?h:h&&typeof h=="object"&&(h.name||h.slug)||"",o=h=>{const m=i(h);switch(m==null?void 0:m.toUpperCase()){case"WINE":return s.jsx(O_,{className:"w-16 h-16 text-primary-300"});case"BEER":return s.jsx(P_,{className:"w-16 h-16 text-primary-300"});case"NICOTINE":return s.jsx(Ue,{className:"w-16 h-16 text-primary-300"});default:return s.jsx(Ue,{className:"w-16 h-16 text-primary-300"})}},d=h=>{const m=i(h);switch(m==null?void 0:m.toUpperCase()){case"WINE":return"from-red-50 to-red-100";case"BEER":return"from-amber-50 to-amber-100";case"NICOTINE":return"from-gray-50 to-gray-100";default:return"from-gray-50 to-gray-100"}};return!e.imageUrl||n?s.jsx("div",{className:`bg-gradient-to-br ${d(e.category)} flex items-center justify-center relative ${t}`,children:s.jsxs("div",{className:"text-center",children:[o(e.category),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-primary-400 text-sm font-medium",children:((c=i(e.category))==null?void 0:c.toLowerCase())||"Product"})})]})}):s.jsx("img",{src:e.imageUrl.startsWith("http")?e.imageUrl:`http://192.168.8.62:5000${e.imageUrl}`,alt:Aa(r,e),className:t,onError:()=>a(!0),loading:"lazy"})};ic.propTypes={product:de.object.isRequired,className:de.string,currentLanguage:de.string};const MA=({category:e,limit:t=6})=>{const{t:r,currentLanguage:n}=pe(),a=nt(),[i,o]=_.useState([]),[d,c]=_.useState(!0);_.useEffect(()=>{(async()=>{try{c(!0);const w=await he.get(`/products?category=${e.name}&limit=${t}`);o(w.data.products||[])}catch(w){console.error("Error fetching category products:",w),o([])}finally{c(!1)}})()},[e.name,t]);const h=p=>{p.scrollBy({left:-300,behavior:"smooth"})},m=p=>{p.scrollBy({left:300,behavior:"smooth"})},f=async(p,w)=>{p.preventDefault(),p.stopPropagation(),await a(gi({productId:w.id,quantity:1}))};return d&&i.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name})}),s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(it,{size:"medium"})})]}):i.length===0?null:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.length," ",r("common.itemsLabel")]})]}),s.jsx(je,{to:`/products?category=${e.name}`,className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:r("common.viewAll")})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(p=>s.jsx("div",{className:"flex-shrink-0 w-64",children:s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(je,{to:`/products/${p.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white p-2",children:[s.jsx(ic,{product:p,className:"w-full h-48 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:n}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${p.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:p.stock>0?r("products.inStock"):r("products.outOfStock")})})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-3 flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white line-clamp-2 leading-tight flex-1",children:Aa(n,p)}),s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[p.volume&&s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap",children:p.volume}),p.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:[p.alcoholContent,"%"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:cg(n,p)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[p.price.toLocaleString()," ",r("common.currency")]}),s.jsx("button",{onClick:w=>f(w,p),disabled:p.stock===0,className:"btn btn-sm bg-primary-600 hover:bg-primary-700 text-white disabled:bg-gray-300 disabled:cursor-not-allowed min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":r("products.addToCart"),children:s.jsx(yr,{className:"w-4 h-4"})})]})]})]})})},p.id))}),s.jsx("button",{onClick:p=>h(p.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(vy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:p=>m(p.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(wy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},AA=({limit:e=6})=>{const{t,currentLanguage:r}=pe(),n=nt(),{products:a,isLoading:i}=we(m=>m.products),o=a.filter(m=>m.discountPercentage&&m.discountPercentage>0).slice(0,e),d=m=>{m.scrollBy({left:-300,behavior:"smooth"})},c=m=>{m.scrollBy({left:300,behavior:"smooth"})},h=async(m,f)=>{m.preventDefault(),m.stopPropagation(),await n(gi({productId:f.id,quantity:1}))};return i&&o.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted.title")})}),s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(it,{size:"medium"})})]}):o.length===0?null:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted.title")}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.length," ",t("common.itemsLabel")]})]}),s.jsx(je,{to:"/products?discounted=true",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:t("common.viewAll")})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:o.map(m=>{var f;return s.jsx("div",{className:"flex-shrink-0 w-64",children:s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(je,{to:`/products/${m.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white p-2",children:[s.jsx(ic,{product:m,className:"w-full h-48 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:r}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${m.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:m.stock>0?t("products.inStock"):t("products.outOfStock")}),s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:["-",m.discountPercentage,"%"]})]})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-3 flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white line-clamp-2 leading-tight flex-1",children:Aa(r,m)}),s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[m.volume&&s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap",children:m.volume}),m.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:[m.alcoholContent,"%"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:cg(r,m)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[(f=m.discountedPrice)==null?void 0:f.toLocaleString()," ",t("common.currency")]}),s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[m.price.toLocaleString()," ",t("common.currency")]})]}),s.jsx("button",{onClick:p=>h(p,m),disabled:m.stock===0,className:"btn btn-sm bg-primary-600 hover:bg-primary-700 text-white disabled:bg-gray-300 disabled:cursor-not-allowed min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":t("products.addToCart"),children:s.jsx(yr,{className:"w-4 h-4"})})]})]})]})})},m.id)})}),s.jsx("button",{onClick:m=>d(m.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(vy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:m=>c(m.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(wy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},OA=({text:e,speed:t=50,count:r=3,className:n=""})=>{const a=_.useMemo(()=>e.length*10/t,[e,t]),i=_.useMemo(()=>Array(r).fill(e).join("  "),[e,r]);return s.jsxs("div",{className:`overflow-hidden whitespace-nowrap ${n}`,children:[s.jsxs("div",{className:"inline-block animate-marquee",style:{animation:`marquee ${a}s linear infinite`},children:[s.jsx("span",{className:"inline-block px-4",children:i}),s.jsx("span",{className:"inline-block px-4",children:i})]}),s.jsx("style",{children:`
        @keyframes marquee {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(-50%);
          }
        }
      `})]})},RA=()=>{var N,C;const{t:e,language:t}=pe(),r=nt(),n=_A(),{categories:a,isLoading:i}=we(P=>P.categories),{banners:o,featuredBanners:d,heroBanner:c}=we(P=>P.banners),{products:h}=we(P=>P.products);_.useEffect(()=>{r(fi()),r(Yl()),r(nh()),n&&r(Gl({includeInactive:!0})),r(cn({limit:100}))},[r,n]);const m=_.useMemo(()=>d.map(P=>({id:P.id,imageUrl:P.imageUrl,alt:P.alt||"lfng Banner",title:P.titleIs||P.title,description:P.descriptionIs||P.description,link:P.link,featuredOrder:P.featuredOrder})),[d]),f=h.some(P=>P.discountPercentage&&P.discountPercentage>0),[p,w]=_.useState([]);_.useEffect(()=>{if(m.length===0){w([]);return}const E=[...m].sort((T,O)=>(T.featuredOrder||0)-(O.featuredOrder||0)).slice(0,Math.min(3,m.length));w(E)},[m]);const x=P=>p[P]||null,k=async(P,E)=>{if(n)try{const T=p[P];T&&T.id&&await r(Xl(T.id)),E&&await r(Jl({id:E,featuredOrder:P+1})),r(Yl())}catch(T){console.error("Error switching banner:",T)}},y=_.useMemo(()=>[{icon:s.jsx(O_,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.wineTitle"),description:e("home.features.wineDescription"),link:"/products?category=WINE"},{icon:s.jsx(P_,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.beerTitle"),description:e("home.features.beerDescription"),link:"/products?category=BEER"},{icon:s.jsx(Cr,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.deliveryTitle"),description:e("home.features.deliveryDescription"),link:"/products"},{icon:s.jsx(GM,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.ageVerificationTitle"),description:e("home.features.ageVerificationDescription"),link:"/products"}],[e]),b=_.useMemo(()=>c?{backgroundType:c.backgroundType||"gradient",gradientStartColor:c.gradientStartColor||"#374151",gradientEndColor:c.gradientEndColor||"#111827",gradientDirection:c.gradientDirection||"to-r",backgroundImageUrl:c.backgroundImageUrl,backgroundOpacity:c.backgroundOpacity!==void 0?c.backgroundOpacity:1,marqueeText:t==="is"&&c.marqueeTextIs||c.marqueeText,marqueeSpeed:c.marqueeSpeed||50,marqueeCount:c.marqueeCount||3,logoUrl:c.heroLogoUrl||"/logo_black-web.webp",subtitle:t==="is"?c.heroSubtitleIs||c.heroSubtitle||e("home.hero.subtitle"):c.heroSubtitle||e("home.hero.subtitle"),buttonText:t==="is"?c.heroButtonTextIs||c.heroButtonText||e("home.hero.startShopping"):c.heroButtonText||e("home.hero.startShopping"),buttonLink:c.heroButtonLink||"/products",textColor:c.textColor||"#ffffff",buttonBgColor:c.buttonBgColor||"#ffffff",buttonTextColor:c.buttonTextColor||"#1f2937",overlayOpacity:c.overlayOpacity!==void 0?c.overlayOpacity:0}:{backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:null,backgroundOpacity:1,marqueeText:null,marqueeSpeed:50,marqueeCount:3,logoUrl:"/logo_black-web.webp",subtitle:e("home.hero.subtitle"),buttonText:e("home.hero.startShopping"),buttonLink:"/products",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0},[c,t,e]),j=()=>{const{backgroundType:P,gradientStartColor:E,gradientEndColor:T,gradientDirection:O,backgroundImageUrl:I,backgroundOpacity:W}=b;return P==="image"&&I?{backgroundImage:`url(${I})`,backgroundSize:"cover",backgroundPosition:"center",opacity:W}:P==="gradient"?{background:`linear-gradient(${{"to-r":"to right","to-l":"to left","to-t":"to top","to-b":"to bottom","to-br":"to bottom right","to-bl":"to bottom left","to-tr":"to top right","to-tl":"to top left"}[O]||"to right"}, ${E}, ${T})`,opacity:W}:{}};return s.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[s.jsxs("section",{className:"relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0",style:j()}),b.backgroundType==="marquee"&&b.marqueeText&&s.jsx("div",{className:"absolute inset-0 flex flex-col justify-center",style:{background:`linear-gradient(to right, ${b.gradientStartColor}, ${b.gradientEndColor})`},children:Array.from({length:10}).map((P,E)=>s.jsx(OA,{text:b.marqueeText,speed:b.marqueeSpeed,count:b.marqueeCount,className:"text-6xl md:text-8xl font-bold opacity-5",style:{color:b.textColor}},E))}),b.overlayOpacity>0&&s.jsx("div",{className:"absolute inset-0 bg-black",style:{opacity:b.overlayOpacity}}),s.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("img",{src:b.logoUrl,alt:e("home.olfongLogoAlt"),className:"h-20 md:h-32 w-auto",style:{filter:b.logoUrl==="/logo_black-web.webp"?"invert(1)":"none"}})}),s.jsx("p",{className:"text-xl md:text-2xl mb-8",style:{color:b.textColor},children:b.subtitle}),s.jsx("div",{className:"flex justify-center",children:s.jsx(je,{to:b.buttonLink,className:"btn px-8 py-3 text-lg transition-colors duration-200",style:{backgroundColor:b.buttonBgColor,color:b.buttonTextColor},children:b.buttonText})})]})})]}),s.jsx("section",{className:"py-16 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.why.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.why.subtitle")})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:y.map((P,E)=>s.jsxs(je,{to:P.link,className:"card p-6 text-center hover:shadow-lg transition-shadow duration-200",children:[s.jsx("div",{className:"flex justify-center mb-4",children:P.icon}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:P.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:P.description})]},E))})]})})}),f&&s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.discounted.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.discounted.subtitle")})]}),s.jsx(AA,{limit:6})]})}),x(0)&&s.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[s.jsx("img",{src:x(0).imageUrl,alt:x(0).alt,className:"w-full h-64 md:h-80 object-cover"}),(x(0).title||x(0).description)&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:s.jsxs("div",{className:"p-6 text-white",children:[x(0).title&&s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:x(0).title}),x(0).description&&s.jsx("p",{className:"text-lg opacity-90",children:x(0).description})]})}),n&&s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((N=x(0))==null?void 0:N.id)||"",onChange:P=>k(0,P.target.value||null),children:[s.jsx("option",{value:"",children:"Select Banner"}),o.filter(P=>P.isActive).map(P=>s.jsx("option",{value:P.id,children:P.titleIs||P.title||`Banner ${P.id}`},P.id))]})})]})})}),!i&&a.length>0&&s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.categories.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.categories.subtitle")})]}),s.jsx("div",{className:"space-y-8",children:a.map(P=>s.jsx(MA,{category:P,limit:6},P.id))})]})}),x(1)&&s.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[s.jsx("img",{src:x(1).imageUrl,alt:x(1).alt,className:"w-full h-64 md:h-80 object-cover"}),(x(1).title||x(1).description)&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:s.jsxs("div",{className:"p-6 text-white",children:[x(1).title&&s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:x(1).title}),x(1).description&&s.jsx("p",{className:"text-lg opacity-90",children:x(1).description})]})}),n&&s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((C=x(1))==null?void 0:C.id)||"",onChange:P=>k(1,P.target.value||null),children:[s.jsx("option",{value:"",children:"Select Banner"}),o.filter(P=>P.isActive).map(P=>s.jsx("option",{value:P.id,children:P.titleIs||P.title||`Banner ${P.id}`},P.id))]})})]})})}),s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800 hidden md:block",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.testimonials.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.testimonials.subtitle")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review1"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review1Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review1Location")})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review2"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review2Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review2Location")})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review3"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review3Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review3Location")})]})]})]})})]})};var U_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lk=wt.createContext&&wt.createContext(U_),DA=["attr","size","title"];function FA(e,t){if(e==null)return{};var r=zA(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zA(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yh.apply(this,arguments)}function dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(r),!0).forEach(function(n){BA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BA(e,t,r){return t=$A(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $A(e){var t=UA(e,"string");return typeof t=="symbol"?t:t+""}function UA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V_(e){return e&&e.map((t,r)=>wt.createElement(t.tag,Jh({key:r},t.attr),V_(t.child)))}function yn(e){return t=>wt.createElement(VA,Yh({attr:Jh({},e.attr)},t),V_(e.child))}function VA(e){var t=r=>{var{attr:n,size:a,title:i}=e,o=FA(e,DA),d=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),wt.createElement("svg",Yh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,o,{className:c,style:Jh(Jh({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&wt.createElement("title",null,i),e.children)};return lk!==void 0?wt.createElement(lk.Consumer,null,r=>t(r)):t(U_)}function H_(e){return yn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 384c-28.02 0-31.26-32-74.5-32-43.43 0-46.825 32-74.75 32-27.695 0-31.454-32-74.75-32-42.842 0-47.218 32-74.5 32-28.148 0-31.202-32-74.75-32-43.547 0-46.653 32-74.75 32v-80c0-26.5 21.5-48 48-48h16V112h64v144h64V112h64v144h64V112h64v144h16c26.5 0 48 21.5 48 48v80zm0 128H0v-96c43.356 0 46.767-32 74.75-32 27.951 0 31.253 32 74.75 32 42.843 0 47.217-32 74.5-32 28.148 0 31.201 32 74.75 32 43.357 0 46.767-32 74.75-32 27.488 0 31.252 32 74.5 32v96zM96 96c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40z"},child:[]}]})(e)}function W_(e){return yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M298.2 156.6c-52.7-25.7-114.5-10.5-150.2 32.8l55.2 55.2c6.3 6.3 6.3 16.4 0 22.6-3.1 3.1-7.2 4.7-11.3 4.7s-8.2-1.6-11.3-4.7L130.4 217 2.3 479.7c-2.9 6-3.1 13.3 0 19.7 5.4 11.1 18.9 15.7 30 10.3l133.6-65.2-49.2-49.2c-6.3-6.2-6.3-16.4 0-22.6 6.3-6.2 16.4-6.2 22.6 0l57 57 102-49.8c24-11.7 44.5-31.3 57.1-57.1 30.1-61.7 4.5-136.1-57.2-166.2zm92.1-34.9C409.8 81 399.7 32.9 360 0c-50.3 41.7-52.5 107.5-7.9 151.9l8 8c44.4 44.6 110.3 42.4 151.9-7.9-32.9-39.7-81-49.8-121.7-30.3z"},child:[]}]})(e)}function q_(e){return yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 288v160a32 32 0 0 0 32 32h448a32 32 0 0 0 32-32V288zM299.83 32a32 32 0 0 0-21.13 7L0 256h512c0-119.89-94-217.8-212.17-224z"},child:[]}]})(e)}function tn(e){return yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.8 49.57a169.44 169.44 0 0 0-239.5 0C187.82 85 160.13 128 160.13 192v85.83l-40.62 40.59c-9.7 9.69-24 11.07-36.78 6a60.33 60.33 0 0 0-65 98.72C33 438.39 54.24 442.7 73.85 438.21c-4.5 19.6-.18 40.83 15.1 56.1a60.35 60.35 0 0 0 98.8-65c-5.09-12.73-3.72-27 6-36.75L234.36 352h85.89a187.87 187.87 0 0 0 61.89-10c-39.64-43.89-39.83-110.23 1.05-151.07 34.38-34.36 86.76-39.46 128.74-16.8 1.3-44.96-14.81-90.28-49.13-124.56z"},child:[]}]})(e)}function Xh(e){return yn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M327.1 96c-89.97 0-168.54 54.77-212.27 101.63L27.5 131.58c-12.13-9.18-30.24.6-27.14 14.66L24.54 256 .35 365.77c-3.1 14.06 15.01 23.83 27.14 14.66l87.33-66.05C158.55 361.23 237.13 416 327.1 416 464.56 416 576 288 576 256S464.56 96 327.1 96zm87.43 184c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24 13.26 0 24 10.74 24 24 0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function K_(e){return yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256H48a48 48 0 0 0 0 96h416a48 48 0 0 0 0-96zm16 128H32a16 16 0 0 0-16 16v16a64 64 0 0 0 64 64h352a64 64 0 0 0 64-64v-16a16 16 0 0 0-16-16zM58.64 224h394.72c34.57 0 54.62-43.9 34.82-75.88C448 83.2 359.55 32.1 256 32c-103.54.1-192 51.2-232.18 116.11C4 180.09 24.07 224 58.64 224zM384 112a16 16 0 1 1-16 16 16 16 0 0 1 16-16zM256 80a16 16 0 1 1-16 16 16 16 0 0 1 16-16zm-128 32a16 16 0 1 1-16 16 16 16 0 0 1 16-16z"},child:[]}]})(e)}function Z_(e){return yn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z"},child:[]}]})(e)}function G_(e){return yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M158.87.15c-16.16-1.52-31.2 8.42-35.33 24.12l-14.81 56.27c187.62 5.49 314.54 130.61 322.48 317l56.94-15.78c15.72-4.36 25.49-19.68 23.62-35.9C490.89 165.08 340.78 17.32 158.87.15zm-58.47 112L.55 491.64a16.21 16.21 0 0 0 20 19.75l379-105.1c-4.27-174.89-123.08-292.14-299.15-294.1zM128 416a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm48-152a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm104 104a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"},child:[]}]})(e)}function Qh(e){return yn({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(e)}function em(e){return yn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M468.958 108.958c-27.507 2.08-48.997 7.94-71.375 22.572-5.333-2.214-12.62-17.738-16-16-11.82 6.08-14.892 19.555-4.916 32.817l-59.084 9.916c-24.776 3.341-49.567 4.838-74.187 5.334 1.326 3.832 2.96 7.636 4.812 10.05 5.219 6.802 20.323 6.21 21.07 14.75 1.935 22.098-24.876 47.415-47.056 47.057-15.401-.248-17.017-28.762-31.604-33.713-19.097-6.482-41.62 18.77-59.699 9.832-15.267-7.547-24.992-39.8-27.836-50.41-10.213-.127-20.327-.142-30.316.035-12.564.366-22.902 5.645-29.408 14.239-8.676 11.458-11.652 26.658-13.254 42.925-1.78 18.057 6.147 53.007 5.517 70.282-.504 13.85-7.493 11.87-11.912 18.888-13.52 21.47 8.894 20.83 17.014 5.56 12.482-23.473 4.253-63.11 7.195-92.974 1.855-35.76 10.597-23.937 15.664-24.588-4.2 13.065-6.21 30.962-7 51.334 6.895-2.342 36.498-11.6 42.73-.174 6.872 12.598-27.802 22.016-23.878 35.819 2.464 8.666 22.95 2.378 24.582 11.238 3.322 18.035-32.13 38.713-42.236 44.209.812 23.329 1.564 45.567 1.238 65.086H88.91c-4.234-16.543-12.038-49.944-4.06-55.084 21.425-18.091 29.836-37.484 42.732-56.428 8.755 2.556 16.92 4.787 24.782 6.672 3.553.972 7.244 1.771 10.984 2.44 24.859 4.967 61.553 5.678 90.783-.172 3.76 34.12 7.263 68.452 4.602 102.572h28.957c-12.375-26.902-4.263-65.044 13.892-86.27l44.934-33.462c24.881-16.384 42.93-37.996 55.982-63.38 30.402 3.413 57.086 3.29 77.192-.786l12.84-19.55c-24.257-17.857-43.3-36.585-62.948-58.13 10.063-14.533 25.027-22.765 39.375-32.506zm-39.375 54.572a8 8 0 1 1 0 16 8 8 0 0 1 0-16zM366.2 183.481c5.029 9.822-26.17 10.808-24.933 21.772.998 8.847 22.204 3.839 23.53 12.643 3.818 25.373-28.44 53.805-54.08 54.78-14.262.544-34.902-14.06-32.308-28.093 2.605-14.092 34.551-1.657 40.383-14.748 4.724-10.603-18.352-22.01-12.992-32.307 6.264-12.032 30.364-22.553 41.934-22.646 11.57-.093 15.606 3.347 18.466 8.6zm-26.585 126.346l-34.707 23.96 6.464 69.255h34.414c-11.783-22.454-15.58-55.506-6.171-93.215zm-204.561 1.41c-6.047 12.184-14.147 21.97-22.174 31.242 5.97 3.235 11.648 5.414 17.154 6.614 11.218 2.443 21.636.333 29.948-4.408 10.056-5.737 17.521-14.452 24.115-23.368-14.615-.869-32.96-2.962-49.043-10.08zm24.252 52c-8.737 2.585-17.452 3.7-25.566 2.96 5.167 12.624 10.45 24.152 15.824 36.845h28.306c-10.393-18.48-16.148-29.285-18.564-39.805z"},child:[]}]})(e)}const Y_=({type:e="card",count:t=1,className:r=""})=>{const n=()=>{switch(e){case"card":return s.jsxs("div",{className:`card overflow-hidden ${r}`,children:[s.jsx("div",{className:"w-full h-64 bg-gray-200 animate-pulse"}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4 mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]})]});case"product":return s.jsx("div",{className:"group",children:s.jsxs("div",{className:`card overflow-hidden hover:shadow-xl transition-all duration-300 border-0 shadow-md ${r}`,children:[s.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse"}),s.jsxs("div",{className:"p-6 bg-white",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}),s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"})}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]})]})});case"text":return s.jsxs("div",{className:`space-y-2 ${r}`,children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-4/6"})]});case"button":return s.jsx("div",{className:`h-10 bg-gray-200 rounded animate-pulse ${r}`});case"image":return s.jsx("div",{className:`bg-gray-200 animate-pulse ${r}`});default:return s.jsx("div",{className:`bg-gray-200 animate-pulse rounded ${r}`})}};return t===1?n():s.jsx("div",{className:"space-y-4",children:Array.from({length:t},(a,i)=>s.jsx("div",{children:n()},i))})};Y_.propTypes={type:de.oneOf(["card","product","text","button","image"]),count:de.number,className:de.string};const Xc=({min:e=0,max:t=100,step:r=1,value:n=[e,t],onChange:a,className:i="",label:o="",formatValue:d=h=>h,disabled:c=!1})=>{const[h,m]=_.useState(null),f=_.useRef(null),[p,w]=_.useState(n);_.useEffect(()=>{w(n)},[n]);const x=_.useCallback(P=>(P-e)/(t-e)*100,[e,t]),k=_.useCallback(P=>e+P/100*(t-e),[e,t]),y=_.useCallback(P=>E=>{c||(E.preventDefault(),m(P))},[c]),b=_.useCallback(P=>{if(!h||!f.current||c)return;const E=f.current.getBoundingClientRect(),T=Math.max(0,Math.min(100,(P.clientX-E.left)/E.width*100)),O=k(T),I=Math.round(O/r)*r,W=Math.max(e,Math.min(t,I));let X=[...p];h==="min"?X[0]=Math.min(W,X[1]):h==="max"&&(X[1]=Math.max(W,X[0])),w(X),a&&a(X)},[h,p,c,r,e,t,k,a]),j=_.useCallback(()=>{m(null)},[]);_.useEffect(()=>{if(h)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",j),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",j)}},[h,b,j]);const N=x(p[0]),C=x(p[1]);return s.jsxs("div",{className:`dual-thumb-slider ${i}`,children:[o&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{ref:f,className:"relative h-2 bg-gray-200 dark:bg-gray-600 rounded-lg cursor-pointer",children:[s.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-600 rounded-lg"}),s.jsx("div",{className:"absolute h-2 bg-primary-500 rounded-lg",style:{left:`${N}%`,width:`${C-N}%`}}),s.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-x-1/2 -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${c?"opacity-50 cursor-not-allowed":""}`,style:{left:`${N}%`},onMouseDown:y("min")}),s.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-x-1/2 -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${c?"opacity-50 cursor-not-allowed":""}`,style:{left:`${C}%`},onMouseDown:y("max")})]}),s.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:d(p[0])}),s.jsx("span",{children:d(p[1])})]})]})]})},HA=({category:e,subcategory:t})=>{const{currentLanguage:r}=pe();if(!e)return null;if(t){const a=r==="is"?t.descriptionIs||t.description:t.description||t.descriptionIs,i=r==="is"?t.nameIs:t.name;return a?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-900/10 rounded-lg border border-primary-200 dark:border-primary-800/30",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:i}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:a})]}):null}const n=r==="is"?e.descriptionIs||e.description:e.description||e.descriptionIs;return n?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-900/10 rounded-lg border border-primary-200 dark:border-primary-800/30",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r==="is"?e.nameIs:e.name}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:n})]}):null},WA=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?s.jsx(Xh,{className:"w-4 h-4 text-gray-500"}):t.includes("beef")||t.includes("nautakjt")?s.jsx(em,{className:"w-4 h-4 text-gray-500"}):t.includes("lamb")||t.includes("lambakjt")?s.jsx(tn,{className:"w-4 h-4 text-gray-500"}):t.includes("pork")||t.includes("svnakjt")?s.jsx(K_,{className:"w-4 h-4 text-gray-500"}):t.includes("fowl")||t.includes("fuglakjt")||t.includes("poultry")?s.jsx(tn,{className:"w-4 h-4 text-gray-500"}):t.includes("cheese")||t.includes("ostur")?s.jsx(q_,{className:"w-4 h-4 text-gray-500"}):t.includes("vegetable")||t.includes("grnmeti")?s.jsx(W_,{className:"w-4 h-4 text-gray-500"}):t.includes("dessert")||t.includes("eftirrttur")?s.jsx(H_,{className:"w-4 h-4 text-gray-500"}):t.includes("seafood")||t.includes("sjvarfiskur")?s.jsx(Xh,{className:"w-4 h-4 text-gray-500"}):t.includes("pasta")||t.includes("pasta")?s.jsx(Qh,{className:"w-4 h-4 text-gray-500"}):t.includes("pizza")||t.includes("pizza")?s.jsx(G_,{className:"w-4 h-4 text-gray-500"}):t.includes("salad")||t.includes("salat")?s.jsx(Z_,{className:"w-4 h-4 text-gray-500"}):t.includes("meat")||t.includes("kjt")?s.jsx(em,{className:"w-4 h-4 text-gray-500"}):t.includes("chicken")||t.includes("kjklingur")?s.jsx(tn,{className:"w-4 h-4 text-gray-500"}):t.includes("duck")||t.includes("nd")?s.jsx(tn,{className:"w-4 h-4 text-gray-500"}):t.includes("turkey")||t.includes("kalknn")?s.jsx(tn,{className:"w-4 h-4 text-gray-500"}):s.jsx(Qh,{className:"w-4 h-4 text-gray-500"})},qA=()=>{const{t:e,currentLanguage:t,isLoading:r}=pe(),n=nt(),a=is(),[i]=gE(),{products:o,categories:d,filters:c,isLoading:h}=we(D=>D.products),{isAuthenticated:m}=we(D=>D.auth),[f,p]=_.useState(!1),[w,x]=_.useState(null),[k,y]=_.useState(null);_.useEffect(()=>{n(Wl())},[n]);const b=d.filter(D=>{var U;return((U=D._count)==null?void 0:U.products)>0});_.useEffect(()=>{var Z;const D=i.get("category"),U=i.get("subcategory");if(D&&(D!==c.category||U!==c.subcategory)){n(us({category:D,subcategory:U||""}));const G=d.find(F=>F.name===D);if(x(G||null),U&&G){const F=(Z=G.subcategories)==null?void 0:Z.find(R=>R.name===U);y(F||null)}else y(null)}else!D&&c.category&&(n(us({category:"",subcategory:""})),x(null),y(null))},[i,n,c.category,c.subcategory,d]),_.useEffect(()=>{n(cn(c))},[n,c]),_.useEffect(()=>{o.length===0&&!h&&n(cn(c))},[n,c,o.length,h]);const j=D=>{const U=typeof D=="string"?D:(D==null?void 0:D.name)||"";n(us({category:U,subcategory:""})),p(!1);const Z=new URLSearchParams(i);U&&U.trim()!==""?(Z.set("category",U),Z.delete("subcategory")):(Z.delete("category"),Z.delete("subcategory")),a(`/products?${Z.toString()}`,{replace:!0})},N=D=>{n(us({search:D}))},C=(D,U)=>{n(us({sortBy:D,sortOrder:U}))},P=(D,U)=>{n(us({minPrice:D,maxPrice:U}))},E=(D,U)=>{n(us({minAlcoholVolume:D,maxAlcoholVolume:U}))},T=()=>{if(o.length===0)return{min:0,max:5e4};const D=o.map(G=>G.price).filter(G=>G!=null);if(D.length===0)return{min:0,max:5e4};const U=Math.min(...D),Z=Math.max(...D);return{min:U,max:Z}},O=()=>{if(o.length===0)return{min:0,max:50};const D=o.map(G=>G.alcoholContent).filter(G=>G!=null);if(D.length===0)return{min:0,max:50};const U=Math.min(...D),Z=Math.max(...D);return{min:U,max:Z}},I=T(),W=O(),[X,B]=_.useState(!1);return _.useEffect(()=>{!h&&!X&&B(!0)},[h,X]),r||h&&!X?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-6 w-48"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:Array.from({length:8},(D,U)=>s.jsx(Y_,{type:"product"},U))})]})}):s.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:[s.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex gap-8",children:[s.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:s.jsx("div",{className:"sticky top-24",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(xo,{className:"w-5 h-5 mr-2"}),e("productsPage.filters")]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common.search")}),s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"text",placeholder:e("common.search"),value:c.search,onChange:D=>N(D.target.value),className:"input pl-10 pr-3","aria-label":e("aria.searchProducts")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage.category")}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>j(""),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c.category===""?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":c.category==="",children:e("productsPage.all")}),b.map(D=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>j(D),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c.category===D.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":c.category===D.name,children:t==="is"?D.nameIs:D.name}),c.category===D.name&&D.subcategories&&D.subcategories.filter(U=>{var Z;return((Z=U._count)==null?void 0:Z.products)>0}).length>0&&s.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[s.jsx("button",{onClick:()=>{n(us({subcategory:""})),y(null);const U=new URLSearchParams(i);U.set("category",D.name),U.delete("subcategory"),a(`/products?${U.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!c.subcategory||c.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage.all")}),D.subcategories.filter(U=>{var Z;return((Z=U._count)==null?void 0:Z.products)>0}).map(U=>s.jsx("button",{onClick:()=>{n(us({subcategory:U.name})),y(U);const Z=new URLSearchParams(i);Z.set("category",D.name),Z.set("subcategory",U.name),a(`/products?${Z.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${c.subcategory===U.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?U.nameIs:U.name},U.id))]})]},D.id))]})]}),s.jsx("div",{children:s.jsx(Xc,{min:I.min,max:I.max,step:100,value:[c.minPrice||I.min,c.maxPrice||I.max],onChange:D=>P(D[0],D[1]),label:`${e("productsPage.priceRange")} (${c.minPrice||I.min} - ${c.maxPrice||I.max} kr)`,formatValue:D=>`${D} kr`})}),s.jsx("div",{children:s.jsx(Xc,{min:W.min,max:W.max,step:.5,value:[c.minAlcoholVolume||W.min,c.maxAlcoholVolume||W.max],onChange:D=>E(D[0],D[1]),label:`${e("productsPage.alcoholContent")} (${c.minAlcoholVolume||W.min} - ${c.maxAlcoholVolume||W.max}%)`,formatValue:D=>`${D}%`})})]})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("productsPage.title")}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none min-w-0",children:[s.jsx(LM,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),s.jsxs("select",{value:`${c.sortBy}-${c.sortOrder}`,onChange:D=>{const[U,Z]=D.target.value.split("-");C(U,Z)},className:"flex-1 sm:flex-none px-3 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"name-asc",children:e("productsPage.sortOptions.nameAZ")}),s.jsx("option",{value:"name-desc",children:e("productsPage.sortOptions.nameZA")}),s.jsx("option",{value:"price-asc",children:e("productsPage.sortOptions.priceLowToHigh")}),s.jsx("option",{value:"price-desc",children:e("productsPage.sortOptions.priceHighToLow")}),s.jsx("option",{value:"alcoholVolume-asc",children:e("productsPage.sortBy")}),s.jsx("option",{value:"alcoholVolume-desc",children:e("productsPage.sortBy")})]})]}),s.jsxs("button",{onClick:()=>p(!0),className:"lg:hidden btn btn-outline flex items-center justify-center gap-2 py-2 px-3 text-sm sm:text-base flex-1 sm:flex-none whitespace-nowrap",children:[s.jsx(xo,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("productsPage.filters")}),s.jsx("span",{className:"sm:hidden",children:e("productsPage.filters")})]})]})]})}),w&&s.jsx(HA,{category:w,subcategory:k}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 custom-scrollbar",children:[s.jsx("button",{onClick:()=>{x(null),j("")},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${!w&&c.category===""?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:e("productsPage.all")}),b.map(D=>s.jsx("button",{onClick:()=>{x(D),j(D)},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${(w==null?void 0:w.id)===D.id?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t==="is"?D.nameIs:D.name},D.id))]}),w&&w.subcategories&&w.subcategories.filter(D=>{var U;return((U=D._count)==null?void 0:U.products)>0}).length>0&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 overflow-x-auto pb-2 pl-4 border-l-2 border-primary-200 dark:border-primary-800 custom-scrollbar",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium flex-shrink-0",children:[e("productsPage.subcategory"),":"]}),s.jsx("button",{onClick:()=>j(w),className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${c.category===w.name&&!c.subcategory?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e("productsPage.all")}),w.subcategories.filter(D=>{var U;return((U=D._count)==null?void 0:U.products)>0}).map(D=>s.jsx("button",{onClick:()=>{n(us({category:w.name,subcategory:D.name})),p(!1);const U=new URLSearchParams(i);U.set("category",w.name),U.set("subcategory",D.name),a(`/products?${U.toString()}`,{replace:!0})},className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${c.subcategory===D.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:t==="is"?D.nameIs:D.name},D.id))]})]}),s.jsxs("div",{className:"relative",children:[h&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent"})}),o.length===0?s.jsx("div",{className:"text-center py-20",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("productsPage.noProducts")}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:e("productsPage.tryAdjusting")}),s.jsx("button",{onClick:()=>N(""),className:"btn btn-outline",children:e("productsPage.clearFilters")})]})}):s.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 transition-opacity duration-200 ${h?"opacity-60 pointer-events-none":"opacity-100"}`,children:o.map(D=>s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(je,{to:`/products/${D.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white",children:[s.jsx(ic,{product:D,className:"w-full h-64 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:t}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),D.stock===0&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:e("productsPage.outOfStock")})})]})}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-4 flex-1",children:[s.jsx("h3",{className:"font-bold text-xl mb-3 text-gray-900 dark:text-white line-clamp-2 leading-tight",children:Aa(t,D)}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-3",children:cg(t,D)}),(D.volume||D.alcoholContent||D.country)&&s.jsxs("div",{className:"mt-3 space-y-1",children:[D.volume&&D.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.volume"),":"]})," ",D.volume," - ",D.alcoholContent,"%"]}),D.volume&&!D.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.volume"),":"]})," ",D.volume]}),!D.volume&&D.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.abv"),":"]})," ",D.alcoholContent,"%"]}),D.country&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.origin"),":"]})," ",LA(t,D)]})]})]}),s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[D.price.toLocaleString()," ",e("common.currency")]})}),so(t,D).length>0&&s.jsx("div",{className:"mt-3 mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[so(t,D).slice(0,4).map((U,Z)=>s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full",title:U,children:WA(U)},Z)),so(t,D).length>4&&s.jsxs("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full text-xs text-gray-500",children:["+",so(t,D).length-4]})]})}),s.jsxs("div",{className:"mt-auto",children:[m&&D.stock>0&&s.jsxs(je,{to:`/products/${D.id}`,className:"btn btn-primary w-full py-3 text-sm font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),e("productsPage.addToCart")]}),!m&&s.jsxs(je,{to:`/products/${D.id}`,className:"btn btn-outline w-full py-3 text-sm font-medium hover:shadow-md transition-all duration-200 flex items-center justify-center",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e("common.view")]})]})]})]})},D.id))})]})]})]})}),f&&s.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>p(!1)}),s.jsxs("div",{className:"absolute inset-y-0 left-0 max-w-xs w-full bg-white dark:bg-gray-800 shadow-xl p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[s.jsx(xo,{className:"w-5 h-5 mr-2"}),e("productsPage.filters")]}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common.search")}),s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"text",placeholder:e("common.search"),value:c.search,onChange:D=>N(D.target.value),className:"input pl-10 pr-3","aria-label":e("aria.filterBy")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage.category")}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>j(null),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${!c.category||c.category===""||c.category===null?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":!c.category||c.category===""||c.category===null,children:e("productsPage.all")}),b.map(D=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>j(D),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c.category===D.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":c.category===D.name,children:t==="is"?D.nameIs:D.name}),c.category===D.name&&D.subcategories&&D.subcategories.filter(U=>{var Z;return((Z=U._count)==null?void 0:Z.products)>0}).length>0&&s.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[s.jsx("button",{onClick:()=>{n(us({subcategory:""}));const U=new URLSearchParams(i);U.set("category",D.name),U.delete("subcategory"),a(`/products?${U.toString()}`,{replace:!0}),p(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!c.subcategory||c.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage.all")}),D.subcategories.filter(U=>{var Z;return((Z=U._count)==null?void 0:Z.products)>0}).map(U=>s.jsx("button",{onClick:()=>{n(us({subcategory:U.name}));const Z=new URLSearchParams(i);Z.set("category",D.name),Z.set("subcategory",U.name),a(`/products?${Z.toString()}`,{replace:!0}),p(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${c.subcategory===U.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?U.nameIs:U.name},U.id))]})]},D.id))]})]}),s.jsx("div",{className:"mb-6",children:s.jsx(Xc,{min:0,max:5e4,step:100,value:[c.minPrice||0,c.maxPrice||5e4],onChange:D=>P(D[0],D[1]),label:`${e("productsPage.priceRange")} (${c.minPrice||0} - ${c.maxPrice||5e4} kr)`,formatValue:D=>`${D} kr`})}),s.jsx("div",{className:"mb-6",children:s.jsx(Xc,{min:0,max:50,step:.5,value:[c.minAlcoholVolume||0,c.maxAlcoholVolume||50],onChange:D=>E(D[0],D[1]),label:`${e("productsPage.alcoholContent")} (${c.minAlcoholVolume||0} - ${c.maxAlcoholVolume||50}%)`,formatValue:D=>`${D}%`})})]})]})]})};var oc=e=>e.type==="checkbox",li=e=>e instanceof Date,jr=e=>e==null;const J_=e=>typeof e=="object";var Bt=e=>!jr(e)&&!Array.isArray(e)&&J_(e)&&!li(e),KA=e=>Bt(e)&&e.target?oc(e.target)?e.target.checked:e.target.value:e,ZA=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,GA=(e,t)=>e.has(ZA(t)),YA=e=>{const t=e.constructor&&e.constructor.prototype;return Bt(t)&&t.hasOwnProperty("isPrototypeOf")},Ly=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Zt(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Ly&&(e instanceof Blob||n))&&(r||Bt(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!YA(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Zt(e[a]));else return e;return t}var ug=e=>/^\w*$/.test(e),Rt=e=>e===void 0,My=e=>Array.isArray(e)?e.filter(Boolean):[],Ay=e=>My(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_e=(e,t,r)=>{if(!t||!Bt(e))return r;const n=(ug(t)?[t]:Ay(t)).reduce((a,i)=>jr(a)?a:a[i],e);return Rt(n)||n===e?Rt(e[t])?r:e[t]:n},Qs=e=>typeof e=="boolean",bt=(e,t,r)=>{let n=-1;const a=ug(t)?[t]:Ay(t),i=a.length,o=i-1;for(;++n<i;){const d=a[n];let c=r;if(n!==o){const h=e[d];c=Bt(h)||Array.isArray(h)?h:isNaN(+a[n+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=c,e=e[d]}};const ck={BLUR:"blur",FOCUS_OUT:"focusout"},Os={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Nn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},JA=wt.createContext(null);JA.displayName="HookFormContext";var XA=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Os.all&&(t._proxyFormState[o]=!n||Os.all),e[o]}});return a};const QA=typeof window<"u"?wt.useLayoutEffect:wt.useEffect;var Jr=e=>typeof e=="string",e7=(e,t,r,n,a)=>Jr(e)?(n&&t.watch.add(e),_e(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),_e(r,i))):(n&&(t.watchAll=!0),r),Fp=e=>jr(e)||!J_(e);function ia(e,t,r=new WeakSet){if(Fp(e)||Fp(t))return e===t;if(li(e)&&li(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const d=t[i];if(li(o)&&li(d)||Bt(o)&&Bt(d)||Array.isArray(o)&&Array.isArray(d)?!ia(o,d,r):o!==d)return!1}}return!0}var t7=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Ql=e=>Array.isArray(e)?e:[e],uk=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function X_(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const a=e[n],i=t[n];if(a&&Bt(a)&&i){const o=X_(a,i);Bt(o)&&(r[n]=o)}else e[n]&&(r[n]=i)}return r}var Or=e=>Bt(e)&&!Object.keys(e).length,Oy=e=>e.type==="file",Rs=e=>typeof e=="function",tm=e=>{if(!Ly)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Q_=e=>e.type==="select-multiple",Ry=e=>e.type==="radio",r7=e=>Ry(e)||oc(e),Uf=e=>tm(e)&&e.isConnected;function s7(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Rt(e)?n++:e[t[n++]];return e}function n7(e){for(const t in e)if(e.hasOwnProperty(t)&&!Rt(e[t]))return!1;return!0}function Ot(e,t){const r=Array.isArray(t)?t:ug(t)?[t]:Ay(t),n=r.length===1?e:s7(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Bt(n)&&Or(n)||Array.isArray(n)&&n7(n))&&Ot(e,r.slice(0,-1)),e}var a7=e=>{for(const t in e)if(Rs(e[t]))return!0;return!1};function eS(e){return Array.isArray(e)||Bt(e)&&!a7(e)}function zp(e,t={}){for(const r in e)eS(e[r])?(t[r]=Array.isArray(e[r])?[]:{},zp(e[r],t[r])):jr(e[r])||(t[r]=!0);return t}function Hi(e,t,r){r||(r=zp(t));for(const n in e)eS(e[n])?Rt(t)||Fp(r[n])?r[n]=zp(e[n],Array.isArray(e[n])?[]:{}):Hi(e[n],jr(t)?{}:t[n],r[n]):r[n]=!ia(e[n],t[n]);return r}const hk={value:!1,isValid:!1},mk={value:!0,isValid:!0};var tS=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Rt(e[0].attributes.value)?Rt(e[0].value)||e[0].value===""?mk:{value:e[0].value,isValid:!0}:mk:hk}return hk},rS=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Rt(e)?e:t?e===""?NaN:e&&+e:r&&Jr(e)?new Date(e):n?n(e):e;const gk={isValid:!1,value:null};var sS=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,gk):gk;function fk(e){const t=e.ref;return Oy(t)?t.files:Ry(t)?sS(e.refs).value:Q_(t)?[...t.selectedOptions].map(({value:r})=>r):oc(t)?tS(e.refs).value:rS(Rt(t.value)?e.ref.value:t.value,e)}var i7=(e,t,r,n)=>{const a={};for(const i of e){const o=_e(t,i);o&&bt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},rm=e=>e instanceof RegExp,pl=e=>Rt(e)?e:rm(e)?e.source:Bt(e)?rm(e.value)?e.value.source:e.value:e,pk=e=>({isOnSubmit:!e||e===Os.onSubmit,isOnBlur:e===Os.onBlur,isOnChange:e===Os.onChange,isOnAll:e===Os.all,isOnTouch:e===Os.onTouched});const xk="AsyncFunction";var o7=e=>!!e&&!!e.validate&&!!(Rs(e.validate)&&e.validate.constructor.name===xk||Bt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===xk)),l7=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),yk=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const ed=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=_e(e,a);if(i){const{_f:o,...d}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(ed(d,t))break}else if(Bt(d)&&ed(d,t))break}}};function bk(e,t,r){const n=_e(e,r);if(n||ug(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=_e(t,i),d=_e(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};a.pop()}return{name:r}}var d7=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return Or(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||Os.all))},c7=(e,t,r)=>!e||!t||e===t||Ql(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),u7=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,h7=(e,t)=>!My(_e(e,t)).length&&Ot(e,t),m7=(e,t,r)=>{const n=Ql(_e(e,r));return bt(n,"root",t[r]),bt(e,r,n),e};function vk(e,t,r="validate"){if(Jr(e)||Array.isArray(e)&&e.every(Jr)||Qs(e)&&!e)return{type:r,message:Jr(e)?e:"",ref:t}}var Bi=e=>Bt(e)&&!rm(e)?e:{value:e,message:""},wk=async(e,t,r,n,a,i)=>{const{ref:o,refs:d,required:c,maxLength:h,minLength:m,min:f,max:p,pattern:w,validate:x,name:k,valueAsNumber:y,mount:b}=e._f,j=_e(r,k);if(!b||t.has(k))return{};const N=d?d[0]:o,C=B=>{a&&N.reportValidity&&(N.setCustomValidity(Qs(B)?"":B||""),N.reportValidity())},P={},E=Ry(o),T=oc(o),O=E||T,I=(y||Oy(o))&&Rt(o.value)&&Rt(j)||tm(o)&&o.value===""||j===""||Array.isArray(j)&&!j.length,W=t7.bind(null,k,n,P),X=(B,D,U,Z=Nn.maxLength,G=Nn.minLength)=>{const F=B?D:U;P[k]={type:B?Z:G,message:F,ref:o,...W(B?Z:G,F)}};if(i?!Array.isArray(j)||!j.length:c&&(!O&&(I||jr(j))||Qs(j)&&!j||T&&!tS(d).isValid||E&&!sS(d).isValid)){const{value:B,message:D}=Jr(c)?{value:!!c,message:c}:Bi(c);if(B&&(P[k]={type:Nn.required,message:D,ref:N,...W(Nn.required,D)},!n))return C(D),P}if(!I&&(!jr(f)||!jr(p))){let B,D;const U=Bi(p),Z=Bi(f);if(!jr(j)&&!isNaN(j)){const G=o.valueAsNumber||j&&+j;jr(U.value)||(B=G>U.value),jr(Z.value)||(D=G<Z.value)}else{const G=o.valueAsDate||new Date(j),F=J=>new Date(new Date().toDateString()+" "+J),R=o.type=="time",q=o.type=="week";Jr(U.value)&&j&&(B=R?F(j)>F(U.value):q?j>U.value:G>new Date(U.value)),Jr(Z.value)&&j&&(D=R?F(j)<F(Z.value):q?j<Z.value:G<new Date(Z.value))}if((B||D)&&(X(!!B,U.message,Z.message,Nn.max,Nn.min),!n))return C(P[k].message),P}if((h||m)&&!I&&(Jr(j)||i&&Array.isArray(j))){const B=Bi(h),D=Bi(m),U=!jr(B.value)&&j.length>+B.value,Z=!jr(D.value)&&j.length<+D.value;if((U||Z)&&(X(U,B.message,D.message),!n))return C(P[k].message),P}if(w&&!I&&Jr(j)){const{value:B,message:D}=Bi(w);if(rm(B)&&!j.match(B)&&(P[k]={type:Nn.pattern,message:D,ref:o,...W(Nn.pattern,D)},!n))return C(D),P}if(x){if(Rs(x)){const B=await x(j,r),D=vk(B,N);if(D&&(P[k]={...D,...W(Nn.validate,D.message)},!n))return C(D.message),P}else if(Bt(x)){let B={};for(const D in x){if(!Or(B)&&!n)break;const U=vk(await x[D](j,r),N,D);U&&(B={...U,...W(D,U.message)},C(U.message),n&&(P[k]=B))}if(!Or(B)&&(P[k]={ref:N,...B},!n))return P}}return C(!0),P};const g7={mode:Os.onSubmit,reValidateMode:Os.onChange,shouldFocusError:!0};function f7(e={}){let t={...g7,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Rs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Bt(t.defaultValues)||Bt(t.values)?Zt(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Zt(a),o={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,h=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...m};const p={array:uk(),state:uk()},w=t.criteriaMode===Os.all,x=$=>Y=>{clearTimeout(h),h=setTimeout($,Y)},k=async $=>{if(!t.disabled&&(m.isValid||f.isValid||$)){const Y=t.resolver?Or((await T()).errors):await I(n,!0);Y!==r.isValid&&p.state.next({isValid:Y})}},y=($,Y)=>{!t.disabled&&(m.isValidating||m.validatingFields||f.isValidating||f.validatingFields)&&(($||Array.from(d.mount)).forEach(M=>{M&&(Y?bt(r.validatingFields,M,Y):Ot(r.validatingFields,M))}),p.state.next({validatingFields:r.validatingFields,isValidating:!Or(r.validatingFields)}))},b=($,Y=[],M,te,oe=!0,ce=!0)=>{if(te&&M&&!t.disabled){if(o.action=!0,ce&&Array.isArray(_e(n,$))){const Se=M(_e(n,$),te.argA,te.argB);oe&&bt(n,$,Se)}if(ce&&Array.isArray(_e(r.errors,$))){const Se=M(_e(r.errors,$),te.argA,te.argB);oe&&bt(r.errors,$,Se),h7(r.errors,$)}if((m.touchedFields||f.touchedFields)&&ce&&Array.isArray(_e(r.touchedFields,$))){const Se=M(_e(r.touchedFields,$),te.argA,te.argB);oe&&bt(r.touchedFields,$,Se)}(m.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Hi(a,i)),p.state.next({name:$,isDirty:X($,Y),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else bt(i,$,Y)},j=($,Y)=>{bt(r.errors,$,Y),p.state.next({errors:r.errors})},N=$=>{r.errors=$,p.state.next({errors:r.errors,isValid:!1})},C=($,Y,M,te)=>{const oe=_e(n,$);if(oe){const ce=_e(i,$,Rt(M)?_e(a,$):M);Rt(ce)||te&&te.defaultChecked||Y?bt(i,$,Y?ce:fk(oe._f)):U($,ce),o.mount&&k()}},P=($,Y,M,te,oe)=>{let ce=!1,Se=!1;const qe={name:$};if(!t.disabled){if(!M||te){(m.isDirty||f.isDirty)&&(Se=r.isDirty,r.isDirty=qe.isDirty=X(),ce=Se!==qe.isDirty);const Ke=ia(_e(a,$),Y);Se=!!_e(r.dirtyFields,$),Ke?Ot(r.dirtyFields,$):bt(r.dirtyFields,$,!0),qe.dirtyFields=r.dirtyFields,ce=ce||(m.dirtyFields||f.dirtyFields)&&Se!==!Ke}if(M){const Ke=_e(r.touchedFields,$);Ke||(bt(r.touchedFields,$,M),qe.touchedFields=r.touchedFields,ce=ce||(m.touchedFields||f.touchedFields)&&Ke!==M)}ce&&oe&&p.state.next(qe)}return ce?qe:{}},E=($,Y,M,te)=>{const oe=_e(r.errors,$),ce=(m.isValid||f.isValid)&&Qs(Y)&&r.isValid!==Y;if(t.delayError&&M?(c=x(()=>j($,M)),c(t.delayError)):(clearTimeout(h),c=null,M?bt(r.errors,$,M):Ot(r.errors,$)),(M?!ia(oe,M):oe)||!Or(te)||ce){const Se={...te,...ce&&Qs(Y)?{isValid:Y}:{},errors:r.errors,name:$};r={...r,...Se},p.state.next(Se)}},T=async $=>{y($,!0);const Y=await t.resolver(i,t.context,i7($||d.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return y($),Y},O=async $=>{const{errors:Y}=await T($);if($)for(const M of $){const te=_e(Y,M);te?bt(r.errors,M,te):Ot(r.errors,M)}else r.errors=Y;return Y},I=async($,Y,M={valid:!0})=>{for(const te in $){const oe=$[te];if(oe){const{_f:ce,...Se}=oe;if(ce){const qe=d.array.has(ce.name),Ke=oe._f&&o7(oe._f);Ke&&m.validatingFields&&y([ce.name],!0);const lr=await wk(oe,d.disabled,i,w,t.shouldUseNativeValidation&&!Y,qe);if(Ke&&m.validatingFields&&y([ce.name]),lr[ce.name]&&(M.valid=!1,Y))break;!Y&&(_e(lr,ce.name)?qe?m7(r.errors,lr,ce.name):bt(r.errors,ce.name,lr[ce.name]):Ot(r.errors,ce.name))}!Or(Se)&&await I(Se,Y,M)}}return M.valid},W=()=>{for(const $ of d.unMount){const Y=_e(n,$);Y&&(Y._f.refs?Y._f.refs.every(M=>!Uf(M)):!Uf(Y._f.ref))&&xe($)}d.unMount=new Set},X=($,Y)=>!t.disabled&&($&&Y&&bt(i,$,Y),!ia(J(),a)),B=($,Y,M)=>e7($,d,{...o.mount?i:Rt(Y)?a:Jr($)?{[$]:Y}:Y},M,Y),D=$=>My(_e(o.mount?i:a,$,t.shouldUnregister?_e(a,$,[]):[])),U=($,Y,M={})=>{const te=_e(n,$);let oe=Y;if(te){const ce=te._f;ce&&(!ce.disabled&&bt(i,$,rS(Y,ce)),oe=tm(ce.ref)&&jr(Y)?"":Y,Q_(ce.ref)?[...ce.ref.options].forEach(Se=>Se.selected=oe.includes(Se.value)):ce.refs?oc(ce.ref)?ce.refs.forEach(Se=>{(!Se.defaultChecked||!Se.disabled)&&(Array.isArray(oe)?Se.checked=!!oe.find(qe=>qe===Se.value):Se.checked=oe===Se.value||!!oe)}):ce.refs.forEach(Se=>Se.checked=Se.value===oe):Oy(ce.ref)?ce.ref.value="":(ce.ref.value=oe,ce.ref.type||p.state.next({name:$,values:Zt(i)})))}(M.shouldDirty||M.shouldTouch)&&P($,oe,M.shouldTouch,M.shouldDirty,!0),M.shouldValidate&&q($)},Z=($,Y,M)=>{for(const te in Y){if(!Y.hasOwnProperty(te))return;const oe=Y[te],ce=$+"."+te,Se=_e(n,ce);(d.array.has($)||Bt(oe)||Se&&!Se._f)&&!li(oe)?Z(ce,oe,M):U(ce,oe,M)}},G=($,Y,M={})=>{const te=_e(n,$),oe=d.array.has($),ce=Zt(Y);bt(i,$,ce),oe?(p.array.next({name:$,values:Zt(i)}),(m.isDirty||m.dirtyFields||f.isDirty||f.dirtyFields)&&M.shouldDirty&&p.state.next({name:$,dirtyFields:Hi(a,i),isDirty:X($,ce)})):te&&!te._f&&!jr(ce)?Z($,ce,M):U($,ce,M),yk($,d)&&p.state.next({...r,name:$}),p.state.next({name:o.mount?$:void 0,values:Zt(i)})},F=async $=>{o.mount=!0;const Y=$.target;let M=Y.name,te=!0;const oe=_e(n,M),ce=Ke=>{te=Number.isNaN(Ke)||li(Ke)&&isNaN(Ke.getTime())||ia(Ke,_e(i,M,Ke))},Se=pk(t.mode),qe=pk(t.reValidateMode);if(oe){let Ke,lr;const Kn=Y.type?fk(oe._f):KA($),Lr=$.type===ck.BLUR||$.type===ck.FOCUS_OUT,Ko=!l7(oe._f)&&!t.resolver&&!_e(r.errors,M)&&!oe._f.deps||u7(Lr,_e(r.touchedFields,M),r.isSubmitted,qe,Se),qr=yk(M,d,Lr);bt(i,M,Kn),Lr?(!Y||!Y.readOnly)&&(oe._f.onBlur&&oe._f.onBlur($),c&&c(0)):oe._f.onChange&&oe._f.onChange($);const Kr=P(M,Kn,Lr),Zn=!Or(Kr)||qr;if(!Lr&&p.state.next({name:M,type:$.type,values:Zt(i)}),Ko)return(m.isValid||f.isValid)&&(t.mode==="onBlur"?Lr&&k():Lr||k()),Zn&&p.state.next({name:M,...qr?{}:Kr});if(!Lr&&qr&&p.state.next({...r}),t.resolver){const{errors:uc}=await T([M]);if(ce(Kn),te){const Ua=bk(r.errors,n,M),hc=bk(uc,n,Ua.name||M);Ke=hc.error,M=hc.name,lr=Or(uc)}}else y([M],!0),Ke=(await wk(oe,d.disabled,i,w,t.shouldUseNativeValidation))[M],y([M]),ce(Kn),te&&(Ke?lr=!1:(m.isValid||f.isValid)&&(lr=await I(n,!0)));te&&(oe._f.deps&&(!Array.isArray(oe._f.deps)||oe._f.deps.length>0)&&q(oe._f.deps),E(M,lr,Ke,Kr))}},R=($,Y)=>{if(_e(r.errors,Y)&&$.focus)return $.focus(),1},q=async($,Y={})=>{let M,te;const oe=Ql($);if(t.resolver){const ce=await O(Rt($)?$:oe);M=Or(ce),te=$?!oe.some(Se=>_e(ce,Se)):M}else $?(te=(await Promise.all(oe.map(async ce=>{const Se=_e(n,ce);return await I(Se&&Se._f?{[ce]:Se}:Se)}))).every(Boolean),!(!te&&!r.isValid)&&k()):te=M=await I(n);return p.state.next({...!Jr($)||(m.isValid||f.isValid)&&M!==r.isValid?{}:{name:$},...t.resolver||!$?{isValid:M}:{},errors:r.errors}),Y.shouldFocus&&!te&&ed(n,R,$?oe:d.mount),te},J=($,Y)=>{let M={...o.mount?i:a};return Y&&(M=X_(Y.dirtyFields?r.dirtyFields:r.touchedFields,M)),Rt($)?M:Jr($)?_e(M,$):$.map(te=>_e(M,te))},re=($,Y)=>({invalid:!!_e((Y||r).errors,$),isDirty:!!_e((Y||r).dirtyFields,$),error:_e((Y||r).errors,$),isValidating:!!_e(r.validatingFields,$),isTouched:!!_e((Y||r).touchedFields,$)}),V=$=>{$&&Ql($).forEach(Y=>Ot(r.errors,Y)),p.state.next({errors:$?r.errors:{}})},ae=($,Y,M)=>{const te=(_e(n,$,{_f:{}})._f||{}).ref,oe=_e(r.errors,$)||{},{ref:ce,message:Se,type:qe,...Ke}=oe;bt(r.errors,$,{...Ke,...Y,ref:te}),p.state.next({name:$,errors:r.errors,isValid:!1}),M&&M.shouldFocus&&te&&te.focus&&te.focus()},fe=($,Y)=>Rs($)?p.state.subscribe({next:M=>"values"in M&&$(B(void 0,Y),M)}):B($,Y,!0),be=$=>p.state.subscribe({next:Y=>{c7($.name,Y.name,$.exact)&&d7(Y,$.formState||m,at,$.reRenderRoot)&&$.callback({values:{...i},...r,...Y,defaultValues:a})}}).unsubscribe,z=$=>(o.mount=!0,f={...f,...$.formState},be({...$,formState:f})),xe=($,Y={})=>{for(const M of $?Ql($):d.mount)d.mount.delete(M),d.array.delete(M),Y.keepValue||(Ot(n,M),Ot(i,M)),!Y.keepError&&Ot(r.errors,M),!Y.keepDirty&&Ot(r.dirtyFields,M),!Y.keepTouched&&Ot(r.touchedFields,M),!Y.keepIsValidating&&Ot(r.validatingFields,M),!t.shouldUnregister&&!Y.keepDefaultValue&&Ot(a,M);p.state.next({values:Zt(i)}),p.state.next({...r,...Y.keepDirty?{isDirty:X()}:{}}),!Y.keepIsValid&&k()},Me=({disabled:$,name:Y})=>{(Qs($)&&o.mount||$||d.disabled.has(Y))&&($?d.disabled.add(Y):d.disabled.delete(Y))},ze=($,Y={})=>{let M=_e(n,$);const te=Qs(Y.disabled)||Qs(t.disabled);return bt(n,$,{...M||{},_f:{...M&&M._f?M._f:{ref:{name:$}},name:$,mount:!0,...Y}}),d.mount.add($),M?Me({disabled:Qs(Y.disabled)?Y.disabled:t.disabled,name:$}):C($,!0,Y.value),{...te?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:pl(Y.min),max:pl(Y.max),minLength:pl(Y.minLength),maxLength:pl(Y.maxLength),pattern:pl(Y.pattern)}:{},name:$,onChange:F,onBlur:F,ref:oe=>{if(oe){ze($,Y),M=_e(n,$);const ce=Rt(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,Se=r7(ce),qe=M._f.refs||[];if(Se?qe.find(Ke=>Ke===ce):ce===M._f.ref)return;bt(n,$,{_f:{...M._f,...Se?{refs:[...qe.filter(Uf),ce,...Array.isArray(_e(a,$))?[{}]:[]],ref:{type:ce.type,name:$}}:{ref:ce}}}),C($,!1,void 0,ce)}else M=_e(n,$,{}),M._f&&(M._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(GA(d.array,$)&&o.action)&&d.unMount.add($)}}},Ee=()=>t.shouldFocusError&&ed(n,R,d.mount),ie=$=>{Qs($)&&(p.state.next({disabled:$}),ed(n,(Y,M)=>{const te=_e(n,M);te&&(Y.disabled=te._f.disabled||$,Array.isArray(te._f.refs)&&te._f.refs.forEach(oe=>{oe.disabled=te._f.disabled||$}))},0,!1))},Te=($,Y)=>async M=>{let te;M&&(M.preventDefault&&M.preventDefault(),M.persist&&M.persist());let oe=Zt(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:ce,values:Se}=await T();r.errors=ce,oe=Zt(Se)}else await I(n);if(d.disabled.size)for(const ce of d.disabled)Ot(oe,ce);if(Ot(r.errors,"root"),Or(r.errors)){p.state.next({errors:{}});try{await $(oe,M)}catch(ce){te=ce}}else Y&&await Y({...r.errors},M),Ee(),setTimeout(Ee);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Or(r.errors)&&!te,submitCount:r.submitCount+1,errors:r.errors}),te)throw te},Ae=($,Y={})=>{_e(n,$)&&(Rt(Y.defaultValue)?G($,Zt(_e(a,$))):(G($,Y.defaultValue),bt(a,$,Zt(Y.defaultValue))),Y.keepTouched||Ot(r.touchedFields,$),Y.keepDirty||(Ot(r.dirtyFields,$),r.isDirty=Y.defaultValue?X($,Zt(_e(a,$))):X()),Y.keepError||(Ot(r.errors,$),m.isValid&&k()),p.state.next({...r}))},Q=($,Y={})=>{const M=$?Zt($):a,te=Zt(M),oe=Or($),ce=oe?a:te;if(Y.keepDefaultValues||(a=M),!Y.keepValues){if(Y.keepDirtyValues){const Se=new Set([...d.mount,...Object.keys(Hi(a,i))]);for(const qe of Array.from(Se))_e(r.dirtyFields,qe)?bt(ce,qe,_e(i,qe)):G(qe,_e(ce,qe))}else{if(Ly&&Rt($))for(const Se of d.mount){const qe=_e(n,Se);if(qe&&qe._f){const Ke=Array.isArray(qe._f.refs)?qe._f.refs[0]:qe._f.ref;if(tm(Ke)){const lr=Ke.closest("form");if(lr){lr.reset();break}}}}if(Y.keepFieldsRef)for(const Se of d.mount)G(Se,_e(ce,Se));else n={}}i=t.shouldUnregister?Y.keepDefaultValues?Zt(a):{}:Zt(ce),p.array.next({values:{...ce}}),p.state.next({values:{...ce}})}d={mount:Y.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:oe?!1:Y.keepDirty?r.isDirty:!!(Y.keepDefaultValues&&!ia($,a)),isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:oe?{}:Y.keepDirtyValues?Y.keepDefaultValues&&i?Hi(a,i):r.dirtyFields:Y.keepDefaultValues&&$?Hi(a,$):Y.keepDirty?r.dirtyFields:{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},ge=($,Y)=>Q(Rs($)?$(i):$,Y),Le=($,Y={})=>{const M=_e(n,$),te=M&&M._f;if(te){const oe=te.refs?te.refs[0]:te.ref;oe.focus&&(oe.focus(),Y.shouldSelect&&Rs(oe.select)&&oe.select())}},at=$=>{r={...r,...$}},Xe={control:{register:ze,unregister:xe,getFieldState:re,handleSubmit:Te,setError:ae,_subscribe:be,_runSchema:T,_focusError:Ee,_getWatch:B,_getDirty:X,_setValid:k,_setFieldArray:b,_setDisabledField:Me,_setErrors:N,_getFieldArray:D,_reset:Q,_resetDefaultValues:()=>Rs(t.defaultValues)&&t.defaultValues().then($=>{ge($,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:ie,_subjects:p,_proxyFormState:m,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state($){o=$},get _defaultValues(){return a},get _names(){return d},set _names($){d=$},get _formState(){return r},get _options(){return t},set _options($){t={...t,...$}}},subscribe:z,trigger:q,register:ze,handleSubmit:Te,watch:fe,setValue:G,getValues:J,reset:ge,resetField:Ae,clearErrors:V,unregister:xe,setError:ae,setFocus:Le,getFieldState:re};return{...Xe,formControl:Xe}}function _i(e={}){const t=wt.useRef(void 0),r=wt.useRef(void 0),[n,a]=wt.useState({isDirty:!1,isValidating:!1,isLoading:Rs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Rs(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Rs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...d}=f7(e);t.current={...d,formState:n}}const i=t.current.control;return i._options=e,QA(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),i._formState.isReady=!0,o},[i]),wt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),wt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),wt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),wt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),wt.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),wt.useEffect(()=>{e.values&&!ia(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),wt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=XA(n,i),t.current}const p7=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?s.jsx(Xh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("beef")||t.includes("nautakjt")?s.jsx(em,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("lamb")||t.includes("lambakjt")?s.jsx(tn,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pork")||t.includes("svnakjt")?s.jsx(K_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("fowl")||t.includes("fuglakjt")||t.includes("poultry")?s.jsx(tn,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("cheese")||t.includes("ostur")?s.jsx(q_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("vegetable")||t.includes("grnmeti")?s.jsx(W_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("dessert")||t.includes("eftirrttur")?s.jsx(H_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("seafood")||t.includes("sjvarfiskur")?s.jsx(Xh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pasta")||t.includes("pasta")?s.jsx(Qh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pizza")||t.includes("pizza")?s.jsx(G_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("salad")||t.includes("salat")?s.jsx(Z_,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("meat")||t.includes("kjt")?s.jsx(em,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("chicken")||t.includes("kjklingur")?s.jsx(tn,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("duck")||t.includes("nd")?s.jsx(tn,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("turkey")||t.includes("kalknn")?s.jsx(tn,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):s.jsx(Qh,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})},x7=()=>{const{t:e,currentLanguage:t}=pe(),{id:r}=x2(),n=is(),a=nt(),{currentProduct:i,isLoading:o,error:d}=we(z=>z.products),{user:c,isAuthenticated:h}=we(z=>z.auth),{isLoading:m}=we(z=>z.cart),[f,p]=_.useState(1),[w,x]=_.useState(!1),[k,y]=_.useState(!1),[b,j]=_.useState(!1),[N,C]=_.useState(!1),[P,E]=_.useState([]),[T,O]=_.useState([]),[I,W]=_.useState({intervalType:"WEEKLY",intervalValue:1,preferredDay:"",preferredTime:"15:00",quantity:1}),X="olfong_age_verified",B=()=>{try{const z=localStorage.getItem(X);if(!z)return!1;const{confirmed:xe}=JSON.parse(z);return xe}catch(z){return console.error("Error checking age verification:",z),!1}},D=z=>{try{const xe={confirmed:z};localStorage.setItem(X,JSON.stringify(xe))}catch(xe){console.error("Error storing age verification:",xe)}},{register:U,handleSubmit:Z,formState:{errors:G},reset:F,setValue:R}=_i({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:"",volume:"",volumeIs:"",alcoholContent:"",country:"",countryIs:"",region:"",regionIs:"",origin:"",originIs:"",producer:"",producerIs:"",distributor:"",distributorIs:"",packaging:"",packagingIs:"",packagingWeight:"",packagingWeightIs:"",carbonFootprint:"",carbonFootprintIs:"",vintage:"",grapeVariety:"",grapeVarietyIs:"",wineStyle:"",wineStyleIs:"",pricePerLiter:"",pricePerLiterIs:"",foodPairings:[],foodPairingsIs:[],specialAttributes:[],specialAttributesIs:[],certifications:[],certificationsIs:[],availability:"available",availabilityIs:"Til rstfunar",atvrProductId:"",atvrUrl:"",atvrImageUrl:""}});_.useEffect(()=>(r&&a(qu(r)),()=>{a(hA())}),[a,r]),_.useEffect(()=>{i&&i.category.name==="NICOTINE"&&c&&c.age<18&&(B()?y(!0):x(!0))},[i,c]),_.useEffect(()=>{i&&N&&(R("name",i.name),R("nameIs",i.nameIs||""),R("description",i.description||""),R("descriptionIs",i.descriptionIs||""),R("price",i.price),R("stock",i.stock),R("category",i.category.name),R("subcategory",i.subcategory||""),R("isAgeRestricted",i.ageRestriction>18),R("imageUrl",i.imageUrl||""),R("hasDiscount",i.hasDiscount||!1),R("originalPrice",i.originalPrice||0),R("discountPercentage",i.discountPercentage||0),R("discountStartDate",i.discountStartDate?i.discountStartDate.split("T")[0]:""),R("discountEndDate",i.discountEndDate?i.discountEndDate.split("T")[0]:""),R("discountReason",i.discountReason||""),R("discountReasonIs",i.discountReasonIs||""),R("volume",i.volume||""),R("volumeIs",i.volumeIs||""),R("alcoholContent",i.alcoholContent||""),R("country",i.country||""),R("countryIs",i.countryIs||""),R("region",i.region||""),R("regionIs",i.regionIs||""),R("origin",i.origin||""),R("originIs",i.originIs||""),R("producer",i.producer||""),R("producerIs",i.producerIs||""),R("distributor",i.distributor||""),R("distributorIs",i.distributorIs||""),R("packaging",i.packaging||""),R("packagingIs",i.packagingIs||""),R("packagingWeight",i.packagingWeight||""),R("packagingWeightIs",i.packagingWeightIs||""),R("carbonFootprint",i.carbonFootprint||""),R("carbonFootprintIs",i.carbonFootprintIs||""),R("vintage",i.vintage||""),R("grapeVariety",i.grapeVariety||""),R("grapeVarietyIs",i.grapeVarietyIs||""),R("wineStyle",i.wineStyle||""),R("wineStyleIs",i.wineStyleIs||""),R("pricePerLiter",i.pricePerLiter||""),R("pricePerLiterIs",i.pricePerLiterIs||""),R("foodPairings",i.foodPairings||[]),R("foodPairingsIs",i.foodPairingsIs||[]),R("specialAttributes",i.specialAttributes||[]),R("specialAttributesIs",i.specialAttributesIs||[]),R("certifications",i.certifications||[]),R("certificationsIs",i.certificationsIs||[]),R("availability",i.availability||"available"),R("availabilityIs",i.availabilityIs||"Til rstfunar"),R("atvrProductId",i.atvrProductId||""),R("atvrUrl",i.atvrUrl||""),R("atvrImageUrl",i.atvrImageUrl||""),E([]),O([]))},[i,N,R]);const q=z=>{const xe=Array.from(z.target.files),Me=[...P,...xe];E(Me);const ze=xe.map(Ee=>URL.createObjectURL(Ee));O(Ee=>[...Ee,...ze])},J=z=>{const xe=P.filter((ze,Ee)=>Ee!==z),Me=T.filter((ze,Ee)=>Ee!==z);E(xe),O(Me)},re=async z=>{try{const{category:xe,...Me}=z,ze=new FormData;Object.keys(Me).forEach(Ee=>{Ee==="foodPairings"||Ee==="foodPairingsIs"||Ee==="specialAttributes"||Ee==="specialAttributesIs"||Ee==="certifications"||Ee==="certificationsIs"||Ee==="subcategories"?ze.append(Ee,JSON.stringify(Me[Ee]||[])):ze.append(Ee,Me[Ee]||"")}),ze.append("categoryId",i.categoryId),ze.append("ageRestriction",z.isAgeRestricted?20:18),P.forEach(Ee=>{ze.append("images",Ee)}),await a(Kl({id:i.id,productData:ze})).unwrap(),K.success(e("common.success")),C(!1),F(),E([]),O([])}catch(xe){console.error("Error updating product:",xe),K.error(xe.message||e("common.error"))}},V=async()=>{if(!h){K.error(e("auth.loginRequired")),n("/login");return}if(i.category.name==="NICOTINE"&&c.age<18&&!k){x(!0);return}try{await a(gi({productId:i.id,quantity:f})).unwrap()}catch(z){console.error("Failed to add to cart:",z)}},ae=()=>{i&&f<i.stock&&p(f+1)},fe=()=>{f>1&&p(f-1)},be=()=>{y(!0),x(!1),D(!0)};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(it,{size:"large"})}):d||!i?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:[e("products.title")," ",e("orderDetailPage.orderNotFound")]}),s.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage.orderNotFoundDesc")}),s.jsx(je,{to:"/products",className:"btn btn-primary",children:e("common.back")})]})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors duration-200",children:[s.jsx(Us,{className:"w-5 h-5 mr-2"}),e("productDetailPage.back")]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsx("div",{className:"space-y-4",children:i.imageUrl?s.jsx("div",{className:"bg-white dark:bg-white rounded-lg p-4 shadow-lg",children:s.jsx("img",{src:i.imageUrl.startsWith("http")?i.imageUrl:`http://192.168.8.62:5000${i.imageUrl}`,alt:Aa(t,i),className:"w-full h-96 object-contain rounded-lg"})}):s.jsx("div",{className:"w-full h-96 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-lg",children:e("cartPage.noImage")})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:Aa(t,i)}),(c==null?void 0:c.role)==="ADMIN"&&s.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(pn,{className:"w-4 h-4 mr-2"}),e("common.edit")]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsxs("span",{className:"text-3xl font-bold text-primary-600",children:[i.price.toLocaleString()," ",e("common.currency")]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:e(`navigation.${i.category.name.toLowerCase()}`)}),i.subcategory&&s.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full text-sm font-medium",children:i.subcategory})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("productDetailPage.description")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:cg(t,i)||e("productDetailPage.noDescription")})]}),(i.volume||i.alcoholContent||i.producer||i.country||i.packaging)&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("productDetailPage.specifications")||"Specifications"}),s.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3",children:[(i.volume||i.volumeIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.volume")||"Volume"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.volumeIs?i.volumeIs:i.volume})]}),i.alcoholContent&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.alcoholContent")||"Alcohol Content"}),s.jsxs("dd",{className:"text-sm text-gray-900 dark:text-white",children:[i.alcoholContent,"%"]})]}),(i.producer||i.producerIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.producer")||"Producer"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.producerIs?i.producerIs:i.producer})]}),(i.country||i.countryIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.country")||"Country"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.countryIs?i.countryIs:i.country})]}),(i.packaging||i.packagingIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.packaging")||"Packaging"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&i.packagingIs?i.packagingIs:i.packaging})]})]})]}),so(t,i).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products.foodPairings")}),s.jsx("div",{className:"flex flex-wrap gap-3",children:so(t,i).map((z,xe)=>s.jsxs("div",{className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-2",children:p7(z)}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200 text-center font-medium",children:z})]},xe))})]}),ok(t,i).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products.specialAttributes")}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ok(t,i).map((z,xe)=>s.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:z},xe))})]}),i.availability&&i.availability!=="available"&&s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Rn,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:[e("products.availability"),": ",e("products",i.availability)]}),s.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[i.availability==="special-order"&&e("productDetailPage.specialOrderDesc"),i.availability==="coming-soon"&&e("productDetailPage.comingSoonDesc"),i.availability==="discontinued"&&e("productDetailPage.discontinuedDesc")]})]})]})}),i.category.name==="NICOTINE"&&s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Rn,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:e("productDetailPage.ageRestriction")}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:e("productDetailPage.ageRestrictionDesc")})]})]})}),i.stock>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage.quantity"),":"]}),s.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg",children:[s.jsx("button",{onClick:fe,disabled:f<=1,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:s.jsx(Zh,{className:"w-4 h-4"})}),s.jsx("span",{className:"px-4 py-2 text-center min-w-[60px] text-gray-900 dark:text-white",children:f}),s.jsx("button",{onClick:ae,disabled:f>=i.stock,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:s.jsx(vr,{className:"w-4 h-4"})})]}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.stock," ",e("productDetailPage.available")]})]}),s.jsxs("button",{onClick:V,disabled:m||!h,className:"btn btn-primary w-full flex items-center justify-center space-x-2 py-3",children:[s.jsx(yr,{className:"w-5 h-5"}),s.jsx("span",{children:e(h?m?"common.loading":"products.addToCart":"common.loginRequired")})]}),!h&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:[e("productDetailPage.loginToAdd"),s.jsx(je,{to:"/login",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 ml-1",children:e("productDetailPage.loginHere")})]}),h&&i.stock>0&&s.jsxs("button",{onClick:()=>j(!0),className:"btn btn-outline w-full flex items-center justify-center space-x-2 py-3 mt-3",children:[s.jsx(Dn,{className:"w-5 h-5"}),s.jsx("span",{children:e("productDetailPage.subscribe")})]})]})]})]})})]}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Rn,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e("ageVerification.title")}),s.jsx("p",{className:"text-gray-600 mb-6",children:e("ageVerification.message",{age:18})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{x(!1),y(!1),D(!1)},className:"btn btn-outline flex-1",children:e("common.no")}),s.jsx("button",{onClick:be,className:"btn btn-primary flex-1",children:e("common.yes")})]})]})})}),b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("productDetailPage.createSubscription")}),s.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:i.nameIs||i.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i.price.toLocaleString()," ",e("common.currency")," ",e("cartPage.each")]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.quantity")}),s.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg w-32",children:[s.jsx("button",{onClick:()=>W({...I,quantity:Math.max(1,I.quantity-1)}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:s.jsx(Zh,{className:"w-4 h-4"})}),s.jsx("span",{className:"px-4 py-2 text-center flex-1 text-gray-900 dark:text-white",children:I.quantity}),s.jsx("button",{onClick:()=>W({...I,quantity:I.quantity+1}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:s.jsx(vr,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.deliveryFrequency")}),s.jsxs("select",{value:I.intervalType,onChange:z=>W({...I,intervalType:z.target.value}),className:"input w-full",children:[s.jsx("option",{value:"WEEKLY",children:e("subscription.weekly")}),s.jsx("option",{value:"BIWEEKLY",children:e("subscription.biweekly")}),s.jsx("option",{value:"MONTHLY",children:e("subscription.monthly")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s.jsx(Dn,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage.preferredDayOptional")]}),s.jsxs("select",{value:I.preferredDay,onChange:z=>W({...I,preferredDay:z.target.value}),className:"input w-full",children:[s.jsx("option",{value:"",children:e("subscription.noSpecificDay")}),s.jsx("option",{value:"MONDAY",children:e("subscription.monday")}),s.jsx("option",{value:"TUESDAY",children:e("subscription.tuesday")}),s.jsx("option",{value:"WEDNESDAY",children:e("subscription.wednesday")}),s.jsx("option",{value:"THURSDAY",children:e("subscription.thursday")}),s.jsx("option",{value:"FRIDAY",children:e("subscription.friday")}),s.jsx("option",{value:"SATURDAY",children:e("subscription.saturday")}),s.jsx("option",{value:"SUNDAY",children:e("subscription.sunday")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx(Wt,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage.preferredTimeOptional")]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:e("subscription.selectPreferredTimeHelp")}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["09:00","10:00","11:00","12:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"].map(z=>s.jsx("button",{type:"button",onClick:()=>W({...I,preferredTime:z}),className:`p-2 text-sm rounded-lg border transition-colors ${I.preferredTime===z?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:z},z))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.notesOptional")}),s.jsx("textarea",{rows:3,placeholder:e("subscription.specialNotesPlaceholder"),className:"input w-full"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>j(!1),className:"btn btn-outline flex-1",children:e("subscription.cancel")}),s.jsx("button",{onClick:async()=>{if(!h){K.error(e("subscription.mustBeLoggedIn"));return}try{const z=await fetch("http://192.168.8.62:5000/api/payment-gateways/config"),{gateways:xe}=await z.json();if(!xe.some(ze=>ze.supportsSubscriptions&&ze.isEnabled)){K.error(e("subscription.noPaymentProviderSupport"));return}K.success(e("productDetailPage.subscriptionCreated")),j(!1)}catch(z){console.error("Error creating subscription:",z),K.error(e("subscription.creationFailed"))}},className:"btn btn-primary flex-1",children:e("subscription.createSubscription")})]})]})]})}),N&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("adminProductsPage.editProduct")}),s.jsx("button",{onClick:()=>{C(!1),F()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ut,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:Z(re),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminProductsPage.nameEn")," *"]}),s.jsx("input",{...U("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products.title")}),G.name&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.nameRequired")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.nameIs")}),s.jsx("input",{...U("nameIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage.nameIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("common.price")," * (",e("common.currency"),")"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",...U("price",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),G.price&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.priceRequired")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("products.stock")," *"]}),s.jsx("input",{type:"number",min:"0",...U("stock",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),G.stock&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.stockRequired")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("products.description")}),s.jsx("textarea",{...U("description"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products.description")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.descriptionIs")}),s.jsx("textarea",{...U("descriptionIs"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage.descriptionIs")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.productImages")}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:q,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),T.length>0&&s.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2",children:T.map((z,xe)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:z,alt:`Preview ${xe+1}`,className:"w-full h-20 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:()=>J(xe),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""})]},xe))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.imageUrl")}),s.jsx("input",{...U("imageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",...U("isAgeRestricted"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage.ageRestricted")})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>{C(!1),F()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common.save")})]})]})]})})]})},td=ye("addresses/fetchAddresses",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/addresses")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch addresses")}}),rd=ye("addresses/createAddress",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await he.post("/addresses",e);return K.success("Bta vi heimilisfangi"),o.data}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a bta vi heimilisfangi"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create address")}}),ah=ye("addresses/updateAddress",async({id:e,addressData:t},{rejectWithValue:r})=>{var n,a,i,o;try{const d=await he.put(`/addresses/${e}`,t);return K.success("Heimilisfang uppfrt"),d.data}catch(d){return K.error(((a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a uppfra heimilisfang"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update address")}}),ih=ye("addresses/deleteAddress",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await he.delete(`/addresses/${e}`),K.success("Heimilisfang eytt"),e}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a eya heimilisfangi"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to delete address")}}),y7={addresses:[],isLoading:!1,error:null},b7=Wr({name:"addresses",initialState:y7,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(td.pending,t=>{t.isLoading=!0,t.error=null}).addCase(td.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=r.payload,t.error=null}).addCase(td.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(rd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(rd.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses.push(r.payload),t.error=null}).addCase(rd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ah.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ah.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.addresses.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.addresses[n]=r.payload),t.error=null}).addCase(ah.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ih.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ih.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=t.addresses.filter(n=>n.id!==r.payload),t.error=null}).addCase(ih.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),v7=b7.reducer,w7=()=>{var Te,Ae,Q,ge,Le,at,Je,Xe,$,Y;const{t:e,currentLanguage:t}=pe(),r=nt(),n=is(),{register:a,handleSubmit:i,formState:{errors:o},setValue:d}=_i(),{cart:c,isLoading:h}=we(M=>M.cart),{addresses:m,isLoading:f}=we(M=>M.addresses),{isLoading:p}=we(M=>M.orders),{isAuthenticated:w}=we(M=>M.auth),[x,k]=_.useState(""),[y,b]=_.useState(!1),[j,N]=_.useState("valitor"),[C,P]=_.useState(""),[E,T]=_.useState(""),[O,I]=_.useState([]),[W,X]=_.useState(!0),[B,D]=_.useState([]),[U,Z]=_.useState(!0);_.useEffect(()=>{w&&(r(Zu()),r(td()),G(),F())},[r,w]);const G=async()=>{var M;try{X(!0);const te=await he.get("/payment-gateways/config");I(((M=te.data)==null?void 0:M.gateways)||[])}catch(te){console.error("Failed to fetch payment gateways:",te)}finally{X(!1)}},F=async()=>{try{Z(!0);const te=(await he.get("/shipping/active")).data||[];D(te),te&&te.length>0&&P(te[0].id)}catch(M){console.error("Failed to fetch shipping options:",M)}finally{Z(!1)}},R=()=>{const M=[],te=new Date,oe=te.getHours(),ce=te.getMinutes(),Se=te.getDay(),Ke=Iy[["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][Se]];if(!Ke)return M;const[lr,Kn]=Ke.open.split(":").map(Number),[Lr,Ko]=Ke.close.split(":").map(Number);for(let qr=lr;qr<Lr;qr++)for(let Kr=0;Kr<60&&!(qr===Lr-1&&Kr>=Ko);Kr+=30){const Zn=`${qr.toString().padStart(2,"0")}:${Kr.toString().padStart(2,"0")}`;(qr>oe||qr===oe&&Kr>ce+30)&&M.push({value:Zn,label:Zn,display:Zn})}return M},q=M=>O.some(te=>te.provider===M),J=()=>B.find(M=>M.id===C),re=()=>q("valitor"),V=()=>{const M=J();return q("cash_on_delivery")&&(M==null?void 0:M.type)==="delivery"},ae=()=>{const M=J();return q("pay_on_pickup")&&(M==null?void 0:M.type)==="pickup"},fe=async M=>{try{if(!C){K.error(e("checkoutPage.selectShippingOption"));return}const te=J(),oe={shippingOptionId:C,paymentMethod:j,notes:M.notes||""};if(te.type==="delivery"){if(!x){K.error(e("checkoutPage.selectDeliveryAddress"));return}oe.deliveryAddressId=x}else if(te.type==="pickup"){if(!E){K.error(e("checkoutPage.selectPickupTime"));return}oe.pickupTime=E}const ce=await r(Bu(oe)).unwrap();n(j==="valitor"?`/orders/${ce.id}`:j==="cash_on_delivery"?`/orders/${ce.id}`:j==="pay_on_pickup"?`/orders/${ce.id}`:`/orders/${ce.id}`)}catch(te){console.error("Failed to create order:",te)}},be=async M=>{try{const te=await r(rd(M)).unwrap();k(te.id),b(!1),d("addressId",te.id)}catch(te){console.error("Failed to create address:",te)}},z=async(M,te)=>{if(te<=0){await r(Zl(M));return}try{await r(Gu({itemId:M,quantity:te})).unwrap()}catch{K.error(e("common.error"))}},xe=async M=>{try{await r(Zl(M)).unwrap()}catch{K.error(e("common.error"))}},Me=async()=>{if(window.confirm(e("cartPage.clearCart")+"?"))try{await r(Yu()).unwrap()}catch{K.error(e("cart.failedToClearCart"))}};if(!w)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:e("cart.title")}),s.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[s.jsx(Hl,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.loginToViewCart")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage.mustLoginToViewCart")}),s.jsx(je,{to:"/login",className:"btn btn-primary w-full",children:e("cartPage.login")})]})]})})});if(h||f)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(it,{size:"large"})});if(!c||!c.items||c.items.length===0)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[s.jsx("div",{className:"flex items-center justify-between gap-2 sm:gap-4 flex-1 min-w-0",children:s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("cart.title")})}),s.jsx("div",{className:"hidden sm:flex flex-col gap-2",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e("cartPage.cartDescription")})})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Hl,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.emptyCart")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage.addItemsToStart")}),s.jsx(je,{to:"/products",className:"btn btn-primary",children:e("home.hero.startShopping")})]})})]})});const ze=c.items.reduce((M,te)=>M+te.product.price*te.quantity,0),Ee=((Te=J())==null?void 0:Te.fee)||0,ie=ze+Ee;return c.items.reduce((M,te)=>M+te.quantity,0),s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4 flex-1 min-w-0",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("cart.title")}),c.items.length>0&&s.jsxs("div",{className:"flex gap-2 sm:hidden flex-shrink-0",children:[s.jsx(je,{to:"/products",className:"btn btn-outline py-1.5 px-2 flex items-center justify-center gap-0 whitespace-nowrap",title:e("cartPage.continueShopping"),children:s.jsx(Us,{className:"w-4 h-4 flex-shrink-0"})}),s.jsx("button",{onClick:Me,className:"inline-flex items-center justify-center gap-0 px-2 py-1.5 border border-red-300 dark:border-red-600 rounded-md shadow-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 whitespace-nowrap flex-shrink-0",title:e("cartPage.clearCart"),children:s.jsx(ar,{className:"w-4 h-4 flex-shrink-0"})})]})]}),s.jsxs("div",{className:"hidden sm:flex flex-col gap-2",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e("cartPage.cartDescription")}),c.items.length>0&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx(je,{to:"/products",className:"btn btn-outline py-2 px-4 flex items-center justify-start gap-0 whitespace-nowrap",title:e("cartPage.continueShopping"),children:s.jsx("span",{children:e("cartPage.continueShopping")})}),s.jsxs("button",{onClick:Me,className:"inline-flex items-center justify-start gap-2 px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 whitespace-nowrap flex-shrink-0",title:e("cartPage.clearCart"),children:[s.jsx(ar,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:e("cartPage.clearCart")})]})]})]})]})})}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[s.jsx("div",{className:"lg:col-span-1 space-y-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Hl,{className:"w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"}),e("cartPage.cartItems")]}),s.jsx("div",{className:"space-y-4",children:c.items.map(M=>s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 py-3 sm:py-4 last:border-b-0",children:s.jsxs("div",{className:"flex gap-2 sm:gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:M.product.imageUrl?s.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-gray-50 dark:bg-gray-700 rounded-lg p-0.5 flex items-center justify-center",children:s.jsx("img",{src:M.product.imageUrl.startsWith("http")?M.product.imageUrl:`http://192.168.8.62:5000${M.product.imageUrl}`,alt:M.product.name,className:"w-full h-full object-contain rounded"})}):s.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-600",children:s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:e("cartPage.noImage")})})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-base font-medium text-gray-900 dark:text-white truncate leading-tight",children:Aa(t,M.product)}),s.jsxs("p",{className:"text-sm sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[M.product.price.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")," ",e("cartPage.each")]})]}),s.jsxs("div",{className:"flex items-center gap-1 mt-1 sm:mt-2",children:[s.jsx("button",{onClick:()=>z(M.id,M.quantity-1),disabled:M.quantity<=1,className:"p-0.5 sm:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-400 rounded transition-colors",children:s.jsx(Zh,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-center min-w-[28px] sm:min-w-[36px] font-medium text-xs sm:text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded",children:M.quantity}),s.jsx("button",{onClick:()=>z(M.id,M.quantity+1),disabled:M.quantity>=M.product.stock,className:"p-0.5 sm:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-400 rounded transition-colors",children:s.jsx(vr,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("button",{onClick:()=>xe(M.id),className:"p-0.5 sm:p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors ml-1",title:e("common.remove"),children:s.jsx(ar,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),s.jsx("div",{className:"flex-shrink-0 text-right flex flex-col justify-between",children:s.jsxs("div",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:[(M.product.price*M.quantity).toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})})]})},M.id))})]})}),s.jsx("div",{className:"lg:col-span-1 space-y-6",children:s.jsxs("form",{onSubmit:i(fe),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(mn,{className:"w-5 h-5 mr-2 text-primary-600 dark:text-primary-400"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("checkoutPage.checkout")})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Cr,{className:"w-4 h-4 mr-2"}),e("checkoutPage.shippingOptions")]}),U?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(it,{size:"small"}),s.jsx("span",{className:"ml-2 text-gray-600",children:e("common.loading")})]}):B.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500",children:s.jsx("p",{children:e("checkoutPage.noShippingOptions")})}):s.jsx("div",{className:"space-y-3",children:B.map(M=>s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",name:"shippingOption",value:M.id,checked:C==M.id,onChange:te=>P(parseInt(te.target.value)),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t==="is"?M.nameIs||M.name:M.name||M.nameEn}),s.jsx("div",{className:"text-sm font-semibold text-primary-600",children:M.fee===0?e("common.free"):`${M.fee.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})} ${e("common.currency")}`})]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t==="is"?M.descriptionIs||M.description:M.description||M.descriptionEn}),M.estimatedDays&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[e("checkoutPage.estimatedDelivery"),": ",M.estimatedDays," ",e("checkoutPage.days")]})]})]},M.id))})]}),((Ae=J())==null?void 0:Ae.type)==="delivery"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),e("checkoutPage.deliveryAddress")]}),m.length>0&&s.jsx("div",{className:"space-y-3 mb-4",children:m.map(M=>s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[s.jsx("input",{type:"radio",...a("addressId",{required:!0}),value:M.id,className:"mt-1",onChange:te=>k(te.target.value)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[M.street,", ",M.city]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[M.postalCode,", ",M.country]}),M.notes&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:M.notes})]})]},M.id))}),o.addressId&&s.jsx("p",{className:"text-red-600 text-sm mb-4",children:e("checkoutPage.selectDeliveryAddress")}),s.jsxs("button",{type:"button",onClick:()=>b(!0),className:"btn btn-outline text-sm",children:["+ ",e("addresses.add")]}),y&&s.jsxs("div",{className:"mt-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:e("checkoutPage.newAddress")}),s.jsxs("form",{onSubmit:i(be),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.street")}),s.jsx("input",{type:"text",...a("street",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.city")}),s.jsx("input",{type:"text",...a("city",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.postalCode")}),s.jsx("input",{type:"text",...a("postalCode",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.country")}),s.jsx("input",{type:"text",...a("country",{required:!0}),defaultValue:"Iceland",className:"input w-full"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.notesOptional")}),s.jsx("textarea",{...a("notes"),rows:3,className:"input w-full"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"submit",className:"btn btn-primary",children:e("checkoutPage.saveAddress")}),s.jsx("button",{type:"button",onClick:()=>b(!1),className:"btn btn-outline",children:e("common.cancel")})]})]})]})]}),((Q=J())==null?void 0:Q.type)==="pickup"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(fn,{className:"w-4 h-4 mr-2"}),e("checkoutPage.pickupTime")]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e("checkoutPage.selectPickupTimeHelp")}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:R().map(M=>s.jsx("button",{type:"button",onClick:()=>T(M.value),className:`p-2 text-sm rounded-lg border transition-colors ${E===M.value?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:M.display},M.value))}),R().length===0&&s.jsx("p",{className:"text-red-600 text-sm",children:e("checkoutPage.noPickupTimes")})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("checkoutPage.storeLocation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("checkoutPage.storeLocationValue")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(mn,{className:"w-4 h-4 mr-2"}),e("checkoutPage.paymentMethod")]}),s.jsx("div",{className:"space-y-3",children:W?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(it,{size:"small"}),s.jsx("span",{className:"ml-2 text-gray-600",children:e("common.loading")})]}):s.jsxs(s.Fragment,{children:[re()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"valitor",checked:j==="valitor",onChange:M=>N(M.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.valitorPayment")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.valitorDesc")})]})]}),V()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"cash_on_delivery",checked:j==="cash_on_delivery",onChange:M=>N(M.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.cashOnDelivery")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.cashOnDeliveryDesc")})]})]}),ae()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"pay_on_pickup",checked:j==="pay_on_pickup",onChange:M=>N(M.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.payOnPickup")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.payOnPickupDesc")})]})]}),!re()&&!V()&&!ae()&&s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx("p",{children:e("checkoutPage.noPaymentMethodsAvailable")}),s.jsx("p",{className:"text-sm mt-1",children:e("checkoutPage.contactAdmin")})]})]})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("checkoutPage.orderNotes")}),s.jsx("textarea",{...a("notes"),rows:3,placeholder:e("checkoutPage.orderNotes"),className:"input w-full"})]}),s.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.cartItems")}),s.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:c.items.map(M=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 truncate",children:Aa(t,M.product)}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["x",M.quantity]})]}),s.jsxs("p",{className:"text-gray-900 dark:text-white font-medium ml-2 flex-shrink-0",children:[(M.product.price*M.quantity).toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})]},M.id))}),s.jsx("div",{className:"border-t border-gray-300 dark:border-gray-500 mt-4 pt-4",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("checkoutPage.subtotal")}),s.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[ze.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})]})})]}),s.jsx("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-blue-900 dark:text-blue-100 font-medium",children:J()?t==="is"?J().nameIs||J().name:J().name||J().nameEn:e("checkoutPage.shipping")}),s.jsx("span",{className:"font-semibold text-blue-900 dark:text-blue-100",children:((ge=J())==null?void 0:ge.fee)===0?s.jsx("span",{className:"text-green-600",children:e("common.free")}):`${((at=(Le=J())==null?void 0:Le.fee)==null?void 0:at.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0}))||0} ${e("common.currency")}`})]})}),s.jsx("div",{className:"mb-6 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/30 dark:to-primary-800/30 rounded-lg p-4 border border-primary-200 dark:border-primary-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("common.total")}),s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[ie.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",e("common.currency")]})]})}),s.jsx("button",{type:"submit",disabled:p||!C||((Je=J())==null?void 0:Je.type)==="delivery"&&!x||((Xe=J())==null?void 0:Xe.type)==="pickup"&&!E,className:"btn btn-primary w-full py-3 text-lg mt-6",children:e(p?"checkoutPage.creatingOrder":"checkoutPage.placeOrder")}),!C&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectShippingOption")}),(($=J())==null?void 0:$.type)==="delivery"&&!x&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectDeliveryAddress")}),((Y=J())==null?void 0:Y.type)==="pickup"&&!E&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectPickupTime")})]})})]})})]})})};var Bp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,n){n(t)})(qC,function(r){var n="1.9.4";function a(l){var u,g,v,S;for(g=1,v=arguments.length;g<v;g++){S=arguments[g];for(u in S)l[u]=S[u]}return l}var i=Object.create||function(){function l(){}return function(u){return l.prototype=u,new l}}();function o(l,u){var g=Array.prototype.slice;if(l.bind)return l.bind.apply(l,g.call(arguments,1));var v=g.call(arguments,2);return function(){return l.apply(u,v.length?v.concat(g.call(arguments)):arguments)}}var d=0;function c(l){return"_leaflet_id"in l||(l._leaflet_id=++d),l._leaflet_id}function h(l,u,g){var v,S,A,H;return H=function(){v=!1,S&&(A.apply(g,S),S=!1)},A=function(){v?S=arguments:(l.apply(g,arguments),setTimeout(H,u),v=!0)},A}function m(l,u,g){var v=u[1],S=u[0],A=v-S;return l===v&&g?l:((l-S)%A+A)%A+S}function f(){return!1}function p(l,u){if(u===!1)return l;var g=Math.pow(10,u===void 0?6:u);return Math.round(l*g)/g}function w(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function x(l){return w(l).split(/\s+/)}function k(l,u){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?i(l.options):{});for(var g in u)l.options[g]=u[g];return l.options}function y(l,u,g){var v=[];for(var S in l)v.push(encodeURIComponent(g?S.toUpperCase():S)+"="+encodeURIComponent(l[S]));return(!u||u.indexOf("?")===-1?"?":"&")+v.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function j(l,u){return l.replace(b,function(g,v){var S=u[v];if(S===void 0)throw new Error("No value provided for variable "+g);return typeof S=="function"&&(S=S(u)),S})}var N=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function C(l,u){for(var g=0;g<l.length;g++)if(l[g]===u)return g;return-1}var P="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var T=0;function O(l){var u=+new Date,g=Math.max(0,16-(u-T));return T=u+g,window.setTimeout(l,g)}var I=window.requestAnimationFrame||E("RequestAnimationFrame")||O,W=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function X(l,u,g){if(g&&I===O)l.call(u);else return I.call(window,o(l,u))}function B(l){l&&W.call(window,l)}var D={__proto__:null,extend:a,create:i,bind:o,get lastId(){return d},stamp:c,throttle:h,wrapNum:m,falseFn:f,formatNum:p,trim:w,splitWords:x,setOptions:k,getParamString:y,template:j,isArray:N,indexOf:C,emptyImageUrl:P,requestFn:I,cancelFn:W,requestAnimFrame:X,cancelAnimFrame:B};function U(){}U.extend=function(l){var u=function(){k(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=u.__super__=this.prototype,v=i(g);v.constructor=u,u.prototype=v;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(u[S]=this[S]);return l.statics&&a(u,l.statics),l.includes&&(Z(l.includes),a.apply(null,[v].concat(l.includes))),a(v,l),delete v.statics,delete v.includes,v.options&&(v.options=g.options?i(g.options):{},a(v.options,l.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var A=0,H=v._initHooks.length;A<H;A++)v._initHooks[A].call(this)}},u},U.include=function(l){var u=this.prototype.options;return a(this.prototype,l),l.options&&(this.prototype.options=u,this.mergeOptions(l.options)),this},U.mergeOptions=function(l){return a(this.prototype.options,l),this},U.addInitHook=function(l){var u=Array.prototype.slice.call(arguments,1),g=typeof l=="function"?l:function(){this[l].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function Z(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=N(l)?l:[l];for(var u=0;u<l.length;u++)l[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var G={on:function(l,u,g){if(typeof l=="object")for(var v in l)this._on(v,l[v],u);else{l=x(l);for(var S=0,A=l.length;S<A;S++)this._on(l[S],u,g)}return this},off:function(l,u,g){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var v in l)this._off(v,l[v],u);else{l=x(l);for(var S=arguments.length===1,A=0,H=l.length;A<H;A++)S?this._off(l[A]):this._off(l[A],u,g)}return this},_on:function(l,u,g,v){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(l,u,g)===!1){g===this&&(g=void 0);var S={fn:u,ctx:g};v&&(S.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(S)}},_off:function(l,u,g){var v,S,A;if(this._events&&(v=this._events[l],!!v)){if(arguments.length===1){if(this._firingCount)for(S=0,A=v.length;S<A;S++)v[S].fn=f;delete this._events[l];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var H=this._listens(l,u,g);if(H!==!1){var ee=v[H];this._firingCount&&(ee.fn=f,this._events[l]=v=v.slice()),v.splice(H,1)}}},fire:function(l,u,g){if(!this.listens(l,g))return this;var v=a({},u,{type:l,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var S=this._events[l];if(S){this._firingCount=this._firingCount+1||1;for(var A=0,H=S.length;A<H;A++){var ee=S[A],se=ee.fn;ee.once&&this.off(l,se,ee.ctx),se.call(ee.ctx||this,v)}this._firingCount--}}return g&&this._propagateEvent(v),this},listens:function(l,u,g,v){typeof l!="string"&&console.warn('"string" type argument expected');var S=u;typeof u!="function"&&(v=!!u,S=void 0,g=void 0);var A=this._events&&this._events[l];if(A&&A.length&&this._listens(l,S,g)!==!1)return!0;if(v){for(var H in this._eventParents)if(this._eventParents[H].listens(l,u,g,v))return!0}return!1},_listens:function(l,u,g){if(!this._events)return!1;var v=this._events[l]||[];if(!u)return!!v.length;g===this&&(g=void 0);for(var S=0,A=v.length;S<A;S++)if(v[S].fn===u&&v[S].ctx===g)return S;return!1},once:function(l,u,g){if(typeof l=="object")for(var v in l)this._on(v,l[v],u,!0);else{l=x(l);for(var S=0,A=l.length;S<A;S++)this._on(l[S],u,g,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[c(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[c(l)],this},_propagateEvent:function(l){for(var u in this._eventParents)this._eventParents[u].fire(l.type,a({layer:l.target,propagatedFrom:l.target},l),!0)}};G.addEventListener=G.on,G.removeEventListener=G.clearAllEventListeners=G.off,G.addOneTimeEventListener=G.once,G.fireEvent=G.fire,G.hasEventListeners=G.listens;var F=U.extend(G);function R(l,u,g){this.x=g?Math.round(l):l,this.y=g?Math.round(u):u}var q=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(l){return this.clone()._add(J(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(J(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new R(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new R(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=q(this.x),this.y=q(this.y),this},distanceTo:function(l){l=J(l);var u=l.x-this.x,g=l.y-this.y;return Math.sqrt(u*u+g*g)},equals:function(l){return l=J(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=J(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function J(l,u,g){return l instanceof R?l:N(l)?new R(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new R(l.x,l.y):new R(l,u,g)}function re(l,u){if(l)for(var g=u?[l,u]:l,v=0,S=g.length;v<S;v++)this.extend(g[v])}re.prototype={extend:function(l){var u,g;if(!l)return this;if(l instanceof R||typeof l[0]=="number"||"x"in l)u=g=J(l);else if(l=V(l),u=l.min,g=l.max,!u||!g)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=g.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(l){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var u,g;return typeof l[0]=="number"||l instanceof R?l=J(l):l=V(l),l instanceof re?(u=l.min,g=l.max):u=g=l,u.x>=this.min.x&&g.x<=this.max.x&&u.y>=this.min.y&&g.y<=this.max.y},intersects:function(l){l=V(l);var u=this.min,g=this.max,v=l.min,S=l.max,A=S.x>=u.x&&v.x<=g.x,H=S.y>=u.y&&v.y<=g.y;return A&&H},overlaps:function(l){l=V(l);var u=this.min,g=this.max,v=l.min,S=l.max,A=S.x>u.x&&v.x<g.x,H=S.y>u.y&&v.y<g.y;return A&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var u=this.min,g=this.max,v=Math.abs(u.x-g.x)*l,S=Math.abs(u.y-g.y)*l;return V(J(u.x-v,u.y-S),J(g.x+v,g.y+S))},equals:function(l){return l?(l=V(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function V(l,u){return!l||l instanceof re?l:new re(l,u)}function ae(l,u){if(l)for(var g=u?[l,u]:l,v=0,S=g.length;v<S;v++)this.extend(g[v])}ae.prototype={extend:function(l){var u=this._southWest,g=this._northEast,v,S;if(l instanceof be)v=l,S=l;else if(l instanceof ae){if(v=l._southWest,S=l._northEast,!v||!S)return this}else return l?this.extend(z(l)||fe(l)):this;return!u&&!g?(this._southWest=new be(v.lat,v.lng),this._northEast=new be(S.lat,S.lng)):(u.lat=Math.min(v.lat,u.lat),u.lng=Math.min(v.lng,u.lng),g.lat=Math.max(S.lat,g.lat),g.lng=Math.max(S.lng,g.lng)),this},pad:function(l){var u=this._southWest,g=this._northEast,v=Math.abs(u.lat-g.lat)*l,S=Math.abs(u.lng-g.lng)*l;return new ae(new be(u.lat-v,u.lng-S),new be(g.lat+v,g.lng+S))},getCenter:function(){return new be((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new be(this.getNorth(),this.getWest())},getSouthEast:function(){return new be(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof be||"lat"in l?l=z(l):l=fe(l);var u=this._southWest,g=this._northEast,v,S;return l instanceof ae?(v=l.getSouthWest(),S=l.getNorthEast()):v=S=l,v.lat>=u.lat&&S.lat<=g.lat&&v.lng>=u.lng&&S.lng<=g.lng},intersects:function(l){l=fe(l);var u=this._southWest,g=this._northEast,v=l.getSouthWest(),S=l.getNorthEast(),A=S.lat>=u.lat&&v.lat<=g.lat,H=S.lng>=u.lng&&v.lng<=g.lng;return A&&H},overlaps:function(l){l=fe(l);var u=this._southWest,g=this._northEast,v=l.getSouthWest(),S=l.getNorthEast(),A=S.lat>u.lat&&v.lat<g.lat,H=S.lng>u.lng&&v.lng<g.lng;return A&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,u){return l?(l=fe(l),this._southWest.equals(l.getSouthWest(),u)&&this._northEast.equals(l.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function fe(l,u){return l instanceof ae?l:new ae(l,u)}function be(l,u,g){if(isNaN(l)||isNaN(u))throw new Error("Invalid LatLng object: ("+l+", "+u+")");this.lat=+l,this.lng=+u,g!==void 0&&(this.alt=+g)}be.prototype={equals:function(l,u){if(!l)return!1;l=z(l);var g=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return g<=(u===void 0?1e-9:u)},toString:function(l){return"LatLng("+p(this.lat,l)+", "+p(this.lng,l)+")"},distanceTo:function(l){return Me.distance(this,z(l))},wrap:function(){return Me.wrapLatLng(this)},toBounds:function(l){var u=180*l/40075017,g=u/Math.cos(Math.PI/180*this.lat);return fe([this.lat-u,this.lng-g],[this.lat+u,this.lng+g])},clone:function(){return new be(this.lat,this.lng,this.alt)}};function z(l,u,g){return l instanceof be?l:N(l)&&typeof l[0]!="object"?l.length===3?new be(l[0],l[1],l[2]):l.length===2?new be(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new be(l.lat,"lng"in l?l.lng:l.lon,l.alt):u===void 0?null:new be(l,u,g)}var xe={latLngToPoint:function(l,u){var g=this.projection.project(l),v=this.scale(u);return this.transformation._transform(g,v)},pointToLatLng:function(l,u){var g=this.scale(u),v=this.transformation.untransform(l,g);return this.projection.unproject(v)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var u=this.projection.bounds,g=this.scale(l),v=this.transformation.transform(u.min,g),S=this.transformation.transform(u.max,g);return new re(v,S)},infinite:!1,wrapLatLng:function(l){var u=this.wrapLng?m(l.lng,this.wrapLng,!0):l.lng,g=this.wrapLat?m(l.lat,this.wrapLat,!0):l.lat,v=l.alt;return new be(g,u,v)},wrapLatLngBounds:function(l){var u=l.getCenter(),g=this.wrapLatLng(u),v=u.lat-g.lat,S=u.lng-g.lng;if(v===0&&S===0)return l;var A=l.getSouthWest(),H=l.getNorthEast(),ee=new be(A.lat-v,A.lng-S),se=new be(H.lat-v,H.lng-S);return new ae(ee,se)}},Me=a({},xe,{wrapLng:[-180,180],R:6371e3,distance:function(l,u){var g=Math.PI/180,v=l.lat*g,S=u.lat*g,A=Math.sin((u.lat-l.lat)*g/2),H=Math.sin((u.lng-l.lng)*g/2),ee=A*A+Math.cos(v)*Math.cos(S)*H*H,se=2*Math.atan2(Math.sqrt(ee),Math.sqrt(1-ee));return this.R*se}}),ze=6378137,Ee={R:ze,MAX_LATITUDE:85.0511287798,project:function(l){var u=Math.PI/180,g=this.MAX_LATITUDE,v=Math.max(Math.min(g,l.lat),-g),S=Math.sin(v*u);return new R(this.R*l.lng*u,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(l){var u=180/Math.PI;return new be((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*u,l.x*u/this.R)},bounds:function(){var l=ze*Math.PI;return new re([-l,-l],[l,l])}()};function ie(l,u,g,v){if(N(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=u,this._c=g,this._d=v}ie.prototype={transform:function(l,u){return this._transform(l.clone(),u)},_transform:function(l,u){return u=u||1,l.x=u*(this._a*l.x+this._b),l.y=u*(this._c*l.y+this._d),l},untransform:function(l,u){return u=u||1,new R((l.x/u-this._b)/this._a,(l.y/u-this._d)/this._c)}};function Te(l,u,g,v){return new ie(l,u,g,v)}var Ae=a({},Me,{code:"EPSG:3857",projection:Ee,transformation:function(){var l=.5/(Math.PI*Ee.R);return Te(l,.5,-l,.5)}()}),Q=a({},Ae,{code:"EPSG:900913"});function ge(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Le(l,u){var g="",v,S,A,H,ee,se;for(v=0,A=l.length;v<A;v++){for(ee=l[v],S=0,H=ee.length;S<H;S++)se=ee[S],g+=(S?"L":"M")+se.x+" "+se.y;g+=u?Pe.svg?"z":"x":""}return g||"M0 0"}var at=document.documentElement.style,Je="ActiveXObject"in window,Xe=Je&&!document.addEventListener,$="msLaunchUri"in navigator&&!("documentMode"in document),Y=Vs("webkit"),M=Vs("android"),te=Vs("android 2")||Vs("android 3"),oe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ce=M&&Vs("Google")&&oe<537&&!("AudioNode"in window),Se=!!window.opera,qe=!$&&Vs("chrome"),Ke=Vs("gecko")&&!Y&&!Se&&!Je,lr=!qe&&Vs("safari"),Kn=Vs("phantom"),Lr="OTransition"in at,Ko=navigator.platform.indexOf("Win")===0,qr=Je&&"transition"in at,Kr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!te,Zn="MozPerspective"in at,uc=!window.L_DISABLE_3D&&(qr||Kr||Zn)&&!Lr&&!Kn,Ua=typeof orientation<"u"||Vs("mobile"),hc=Ua&&Y,C4=Ua&&Kr,sb=!window.PointerEvent&&window.MSPointerEvent,nb=!!(window.PointerEvent||sb),ab="ontouchstart"in window||!!window.TouchEvent,P4=!window.L_NO_TOUCH&&(ab||nb),E4=Ua&&Se,I4=Ua&&Ke,T4=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,L4=function(){var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",f,u),window.removeEventListener("testPassiveEventSupport",f,u)}catch{}return l}(),M4=function(){return!!document.createElement("canvas").getContext}(),xg=!!(document.createElementNS&&ge("svg").createSVGRect),A4=!!xg&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),O4=!xg&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var u=l.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),R4=navigator.platform.indexOf("Mac")===0,D4=navigator.platform.indexOf("Linux")===0;function Vs(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Pe={ie:Je,ielt9:Xe,edge:$,webkit:Y,android:M,android23:te,androidStock:ce,opera:Se,chrome:qe,gecko:Ke,safari:lr,phantom:Kn,opera12:Lr,win:Ko,ie3d:qr,webkit3d:Kr,gecko3d:Zn,any3d:uc,mobile:Ua,mobileWebkit:hc,mobileWebkit3d:C4,msPointer:sb,pointer:nb,touch:P4,touchNative:ab,mobileOpera:E4,mobileGecko:I4,retina:T4,passiveEvents:L4,canvas:M4,svg:xg,vml:O4,inlineSvg:A4,mac:R4,linux:D4},ib=Pe.msPointer?"MSPointerDown":"pointerdown",ob=Pe.msPointer?"MSPointerMove":"pointermove",lb=Pe.msPointer?"MSPointerUp":"pointerup",db=Pe.msPointer?"MSPointerCancel":"pointercancel",yg={touchstart:ib,touchmove:ob,touchend:lb,touchcancel:db},cb={touchstart:V4,touchmove:mc,touchend:mc,touchcancel:mc},Ii={},ub=!1;function F4(l,u,g){return u==="touchstart"&&U4(),cb[u]?(g=cb[u].bind(this,g),l.addEventListener(yg[u],g,!1),g):(console.warn("wrong event specified:",u),f)}function z4(l,u,g){if(!yg[u]){console.warn("wrong event specified:",u);return}l.removeEventListener(yg[u],g,!1)}function B4(l){Ii[l.pointerId]=l}function $4(l){Ii[l.pointerId]&&(Ii[l.pointerId]=l)}function hb(l){delete Ii[l.pointerId]}function U4(){ub||(document.addEventListener(ib,B4,!0),document.addEventListener(ob,$4,!0),document.addEventListener(lb,hb,!0),document.addEventListener(db,hb,!0),ub=!0)}function mc(l,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var g in Ii)u.touches.push(Ii[g]);u.changedTouches=[u],l(u)}}function V4(l,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Xt(u),mc(l,u)}function H4(l){var u={},g,v;for(v in l)g=l[v],u[v]=g&&g.bind?g.bind(l):g;return l=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var W4=200;function q4(l,u){l.addEventListener("dblclick",u);var g=0,v;function S(A){if(A.detail!==1){v=A.detail;return}if(!(A.pointerType==="mouse"||A.sourceCapabilities&&!A.sourceCapabilities.firesTouchEvents)){var H=xb(A);if(!(H.some(function(se){return se instanceof HTMLLabelElement&&se.attributes.for})&&!H.some(function(se){return se instanceof HTMLInputElement||se instanceof HTMLSelectElement}))){var ee=Date.now();ee-g<=W4?(v++,v===2&&u(H4(A))):v=1,g=ee}}}return l.addEventListener("click",S),{dblclick:u,simDblclick:S}}function K4(l,u){l.removeEventListener("dblclick",u.dblclick),l.removeEventListener("click",u.simDblclick)}var bg=pc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Zo=pc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),mb=Zo==="webkitTransition"||Zo==="OTransition"?Zo+"End":"transitionend";function gb(l){return typeof l=="string"?document.getElementById(l):l}function Go(l,u){var g=l.style[u]||l.currentStyle&&l.currentStyle[u];if((!g||g==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(l,null);g=v?v[u]:null}return g==="auto"?null:g}function Ge(l,u,g){var v=document.createElement(l);return v.className=u||"",g&&g.appendChild(v),v}function jt(l){var u=l.parentNode;u&&u.removeChild(l)}function gc(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Ti(l){var u=l.parentNode;u&&u.lastChild!==l&&u.appendChild(l)}function Li(l){var u=l.parentNode;u&&u.firstChild!==l&&u.insertBefore(l,u.firstChild)}function vg(l,u){if(l.classList!==void 0)return l.classList.contains(u);var g=fc(l);return g.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(g)}function De(l,u){if(l.classList!==void 0)for(var g=x(u),v=0,S=g.length;v<S;v++)l.classList.add(g[v]);else if(!vg(l,u)){var A=fc(l);wg(l,(A?A+" ":"")+u)}}function Pt(l,u){l.classList!==void 0?l.classList.remove(u):wg(l,w((" "+fc(l)+" ").replace(" "+u+" "," ")))}function wg(l,u){l.className.baseVal===void 0?l.className=u:l.className.baseVal=u}function fc(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function ls(l,u){"opacity"in l.style?l.style.opacity=u:"filter"in l.style&&Z4(l,u)}function Z4(l,u){var g=!1,v="DXImageTransform.Microsoft.Alpha";try{g=l.filters.item(v)}catch{if(u===1)return}u=Math.round(u*100),g?(g.Enabled=u!==100,g.Opacity=u):l.style.filter+=" progid:"+v+"(opacity="+u+")"}function pc(l){for(var u=document.documentElement.style,g=0;g<l.length;g++)if(l[g]in u)return l[g];return!1}function Va(l,u,g){var v=u||new R(0,0);l.style[bg]=(Pe.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(g?" scale("+g+")":"")}function Mt(l,u){l._leaflet_pos=u,Pe.any3d?Va(l,u):(l.style.left=u.x+"px",l.style.top=u.y+"px")}function Ha(l){return l._leaflet_pos||new R(0,0)}var Yo,Jo,kg;if("onselectstart"in document)Yo=function(){Oe(window,"selectstart",Xt)},Jo=function(){ht(window,"selectstart",Xt)};else{var Xo=pc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Yo=function(){if(Xo){var l=document.documentElement.style;kg=l[Xo],l[Xo]="none"}},Jo=function(){Xo&&(document.documentElement.style[Xo]=kg,kg=void 0)}}function jg(){Oe(window,"dragstart",Xt)}function Ng(){ht(window,"dragstart",Xt)}var xc,_g;function Sg(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(yc(),xc=l,_g=l.style.outlineStyle,l.style.outlineStyle="none",Oe(window,"keydown",yc))}function yc(){xc&&(xc.style.outlineStyle=_g,xc=void 0,_g=void 0,ht(window,"keydown",yc))}function fb(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Cg(l){var u=l.getBoundingClientRect();return{x:u.width/l.offsetWidth||1,y:u.height/l.offsetHeight||1,boundingClientRect:u}}var G4={__proto__:null,TRANSFORM:bg,TRANSITION:Zo,TRANSITION_END:mb,get:gb,getStyle:Go,create:Ge,remove:jt,empty:gc,toFront:Ti,toBack:Li,hasClass:vg,addClass:De,removeClass:Pt,setClass:wg,getClass:fc,setOpacity:ls,testProp:pc,setTransform:Va,setPosition:Mt,getPosition:Ha,get disableTextSelection(){return Yo},get enableTextSelection(){return Jo},disableImageDrag:jg,enableImageDrag:Ng,preventOutline:Sg,restoreOutline:yc,getSizedParentNode:fb,getScale:Cg};function Oe(l,u,g,v){if(u&&typeof u=="object")for(var S in u)Eg(l,S,u[S],g);else{u=x(u);for(var A=0,H=u.length;A<H;A++)Eg(l,u[A],g,v)}return this}var Hs="_leaflet_events";function ht(l,u,g,v){if(arguments.length===1)pb(l),delete l[Hs];else if(u&&typeof u=="object")for(var S in u)Ig(l,S,u[S],g);else if(u=x(u),arguments.length===2)pb(l,function(ee){return C(u,ee)!==-1});else for(var A=0,H=u.length;A<H;A++)Ig(l,u[A],g,v);return this}function pb(l,u){for(var g in l[Hs]){var v=g.split(/\d/)[0];(!u||u(v))&&Ig(l,v,null,null,g)}}var Pg={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Eg(l,u,g,v){var S=u+c(g)+(v?"_"+c(v):"");if(l[Hs]&&l[Hs][S])return this;var A=function(ee){return g.call(v||l,ee||window.event)},H=A;!Pe.touchNative&&Pe.pointer&&u.indexOf("touch")===0?A=F4(l,u,A):Pe.touch&&u==="dblclick"?A=q4(l,A):"addEventListener"in l?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?l.addEventListener(Pg[u]||u,A,Pe.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(A=function(ee){ee=ee||window.event,Lg(l,ee)&&H(ee)},l.addEventListener(Pg[u],A,!1)):l.addEventListener(u,H,!1):l.attachEvent("on"+u,A),l[Hs]=l[Hs]||{},l[Hs][S]=A}function Ig(l,u,g,v,S){S=S||u+c(g)+(v?"_"+c(v):"");var A=l[Hs]&&l[Hs][S];if(!A)return this;!Pe.touchNative&&Pe.pointer&&u.indexOf("touch")===0?z4(l,u,A):Pe.touch&&u==="dblclick"?K4(l,A):"removeEventListener"in l?l.removeEventListener(Pg[u]||u,A,!1):l.detachEvent("on"+u,A),l[Hs][S]=null}function Wa(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function Tg(l){return Eg(l,"wheel",Wa),this}function Qo(l){return Oe(l,"mousedown touchstart dblclick contextmenu",Wa),l._leaflet_disable_click=!0,this}function Xt(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function qa(l){return Xt(l),Wa(l),this}function xb(l){if(l.composedPath)return l.composedPath();for(var u=[],g=l.target;g;)u.push(g),g=g.parentNode;return u}function yb(l,u){if(!u)return new R(l.clientX,l.clientY);var g=Cg(u),v=g.boundingClientRect;return new R((l.clientX-v.left)/g.x-u.clientLeft,(l.clientY-v.top)/g.y-u.clientTop)}var Y4=Pe.linux&&Pe.chrome?window.devicePixelRatio:Pe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function bb(l){return Pe.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Y4:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Lg(l,u){var g=u.relatedTarget;if(!g)return!0;try{for(;g&&g!==l;)g=g.parentNode}catch{return!1}return g!==l}var J4={__proto__:null,on:Oe,off:ht,stopPropagation:Wa,disableScrollPropagation:Tg,disableClickPropagation:Qo,preventDefault:Xt,stop:qa,getPropagationPath:xb,getMousePosition:yb,getWheelDelta:bb,isExternalTarget:Lg,addListener:Oe,removeListener:ht},vb=F.extend({run:function(l,u,g,v){this.stop(),this._el=l,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=Ha(l),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=X(this._animate,this),this._step()},_step:function(l){var u=+new Date-this._startTime,g=this._duration*1e3;u<g?this._runFrame(this._easeOut(u/g),l):(this._runFrame(1),this._complete())},_runFrame:function(l,u){var g=this._startPos.add(this._offset.multiplyBy(l));u&&g._round(),Mt(this._el,g),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),We=F.extend({options:{crs:Ae,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,u){u=k(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(z(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Zo&&Pe.any3d&&!Pe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,mb,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,u,g){if(u=u===void 0?this._zoom:this._limitZoom(u),l=this._limitCenter(z(l),u,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=a({animate:g.animate},g.zoom),g.pan=a({animate:g.animate,duration:g.duration},g.pan));var v=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,u,g.zoom):this._tryAnimatedPan(l,g.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(l,u,g.pan&&g.pan.noMoveStart),this},setZoom:function(l,u){return this._loaded?this.setView(this.getCenter(),l,{zoom:u}):(this._zoom=l,this)},zoomIn:function(l,u){return l=l||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,u)},zoomOut:function(l,u){return l=l||(Pe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,u)},setZoomAround:function(l,u,g){var v=this.getZoomScale(u),S=this.getSize().divideBy(2),A=l instanceof R?l:this.latLngToContainerPoint(l),H=A.subtract(S).multiplyBy(1-1/v),ee=this.containerPointToLatLng(S.add(H));return this.setView(ee,u,{zoom:g})},_getBoundsCenterZoom:function(l,u){u=u||{},l=l.getBounds?l.getBounds():fe(l);var g=J(u.paddingTopLeft||u.padding||[0,0]),v=J(u.paddingBottomRight||u.padding||[0,0]),S=this.getBoundsZoom(l,!1,g.add(v));if(S=typeof u.maxZoom=="number"?Math.min(u.maxZoom,S):S,S===1/0)return{center:l.getCenter(),zoom:S};var A=v.subtract(g).divideBy(2),H=this.project(l.getSouthWest(),S),ee=this.project(l.getNorthEast(),S),se=this.unproject(H.add(ee).divideBy(2).add(A),S);return{center:se,zoom:S}},fitBounds:function(l,u){if(l=fe(l),!l.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(l,u);return this.setView(g.center,g.zoom,u)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,u){return this.setView(l,this._zoom,{pan:u})},panBy:function(l,u){if(l=J(l).round(),u=u||{},!l.x&&!l.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new vb,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){De(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,g,u.duration||.25,u.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,u,g){if(g=g||{},g.animate===!1||!Pe.any3d)return this.setView(l,u,g);this._stop();var v=this.project(this.getCenter()),S=this.project(l),A=this.getSize(),H=this._zoom;l=z(l),u=u===void 0?H:u;var ee=Math.max(A.x,A.y),se=ee*this.getZoomScale(H,u),le=S.distanceTo(v)||1,ve=1.42,Ie=ve*ve;function Be(At){var Ic=At?-1:1,zC=At?se:ee,BC=se*se-ee*ee+Ic*Ie*Ie*le*le,$C=2*zC*Ie*le,Vg=BC/$C,ev=Math.sqrt(Vg*Vg+1)-Vg,UC=ev<1e-9?-18:Math.log(ev);return UC}function wr(At){return(Math.exp(At)-Math.exp(-At))/2}function Kt(At){return(Math.exp(At)+Math.exp(-At))/2}function cs(At){return wr(At)/Kt(At)}var Mr=Be(0);function Fi(At){return ee*(Kt(Mr)/Kt(Mr+ve*At))}function OC(At){return ee*(Kt(Mr)*cs(Mr+ve*At)-wr(Mr))/Ie}function RC(At){return 1-Math.pow(1-At,1.5)}var DC=Date.now(),Xb=(Be(1)-Mr)/ve,FC=g.duration?1e3*g.duration:1e3*Xb*.8;function Qb(){var At=(Date.now()-DC)/FC,Ic=RC(At)*Xb;At<=1?(this._flyToFrame=X(Qb,this),this._move(this.unproject(v.add(S.subtract(v).multiplyBy(OC(Ic)/le)),H),this.getScaleZoom(ee/Fi(Ic),H),{flyTo:!0})):this._move(l,u)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Qb.call(this),this},flyToBounds:function(l,u){var g=this._getBoundsCenterZoom(l,u);return this.flyTo(g.center,g.zoom,u)},setMaxBounds:function(l){return l=fe(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var u=this.options.minZoom;return this.options.minZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var u=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,u){this._enforcingBounds=!0;var g=this.getCenter(),v=this._limitCenter(g,this._zoom,fe(l));return g.equals(v)||this.panTo(v,u),this._enforcingBounds=!1,this},panInside:function(l,u){u=u||{};var g=J(u.paddingTopLeft||u.padding||[0,0]),v=J(u.paddingBottomRight||u.padding||[0,0]),S=this.project(this.getCenter()),A=this.project(l),H=this.getPixelBounds(),ee=V([H.min.add(g),H.max.subtract(v)]),se=ee.getSize();if(!ee.contains(A)){this._enforcingBounds=!0;var le=A.subtract(ee.getCenter()),ve=ee.extend(A).getSize().subtract(se);S.x+=le.x<0?-ve.x:ve.x,S.y+=le.y<0?-ve.y:ve.y,this.panTo(this.unproject(S),u),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=a({animate:!1,pan:!0},l===!0?{animate:!0}:l);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),v=u.divideBy(2).round(),S=g.divideBy(2).round(),A=v.subtract(S);return!A.x&&!A.y?this:(l.animate&&l.pan?this.panBy(A):(l.pan&&this._rawPanBy(A),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=a({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=o(this._handleGeolocationResponse,this),g=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,g,l):navigator.geolocation.getCurrentPosition(u,g,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var u=l.code,g=l.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var u=l.coords.latitude,g=l.coords.longitude,v=new be(u,g),S=v.toBounds(l.coords.accuracy*2),A=this._locateOptions;if(A.setView){var H=this.getBoundsZoom(S);this.setView(v,A.maxZoom?Math.min(H,A.maxZoom):H)}var ee={latlng:v,bounds:S,timestamp:l.timestamp};for(var se in l.coords)typeof l.coords[se]=="number"&&(ee[se]=l.coords[se]);this.fire("locationfound",ee)}},addHandler:function(l,u){if(!u)return this;var g=this[l]=new u(this);return this._handlers.push(g),this.options[l]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),jt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)jt(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,u){var g="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),v=Ge("div",g,u||this._mapPane);return l&&(this._panes[l]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),u=this.unproject(l.getBottomLeft()),g=this.unproject(l.getTopRight());return new ae(u,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,u,g){l=fe(l),g=J(g||[0,0]);var v=this.getZoom()||0,S=this.getMinZoom(),A=this.getMaxZoom(),H=l.getNorthWest(),ee=l.getSouthEast(),se=this.getSize().subtract(g),le=V(this.project(ee,v),this.project(H,v)).getSize(),ve=Pe.any3d?this.options.zoomSnap:1,Ie=se.x/le.x,Be=se.y/le.y,wr=u?Math.max(Ie,Be):Math.min(Ie,Be);return v=this.getScaleZoom(wr,v),ve&&(v=Math.round(v/(ve/100))*(ve/100),v=u?Math.ceil(v/ve)*ve:Math.floor(v/ve)*ve),Math.max(S,Math.min(A,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,u){var g=this._getTopLeftPoint(l,u);return new re(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,u){var g=this.options.crs;return u=u===void 0?this._zoom:u,g.scale(l)/g.scale(u)},getScaleZoom:function(l,u){var g=this.options.crs;u=u===void 0?this._zoom:u;var v=g.zoom(l*g.scale(u));return isNaN(v)?1/0:v},project:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(z(l),u)},unproject:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(J(l),u)},layerPointToLatLng:function(l){var u=J(l).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(l){var u=this.project(z(l))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(z(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(fe(l))},distance:function(l,u){return this.options.crs.distance(z(l),z(u))},containerPointToLayerPoint:function(l){return J(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return J(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var u=this.containerPointToLayerPoint(J(l));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(z(l)))},mouseEventToContainerPoint:function(l){return yb(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var u=this._container=gb(l);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Oe(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Pe.any3d,De(l,"leaflet-container"+(Pe.touch?" leaflet-touch":"")+(Pe.retina?" leaflet-retina":"")+(Pe.ielt9?" leaflet-oldie":"")+(Pe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Go(l,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Mt(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(De(l.markerPane,"leaflet-zoom-hide"),De(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,u,g){Mt(this._mapPane,new R(0,0));var v=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var S=this._zoom!==u;this._moveStart(S,g)._move(l,u)._moveEnd(S),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(l,u){return l&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(l,u,g,v){u===void 0&&(u=this._zoom);var S=this._zoom!==u;return this._zoom=u,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),v?g&&g.pinch&&this.fire("zoom",g):((S||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Mt(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[c(this._container)]=this;var u=l?ht:Oe;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Pe.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=X(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,u){for(var g=[],v,S=u==="mouseout"||u==="mouseover",A=l.target||l.srcElement,H=!1;A;){if(v=this._targets[c(A)],v&&(u==="click"||u==="preclick")&&this._draggableMoved(v)){H=!0;break}if(v&&v.listens(u,!0)&&(S&&!Lg(A,l)||(g.push(v),S))||A===this._container)break;A=A.parentNode}return!g.length&&!H&&!S&&this.listens(u,!0)&&(g=[this]),g},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var u=l.target||l.srcElement;if(!(!this._loaded||u._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(u))){var g=l.type;g==="mousedown"&&Sg(u),this._fireDOMEvent(l,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,u,g){if(l.type==="click"){var v=a({},l);v.type="preclick",this._fireDOMEvent(v,v.type,g)}var S=this._findEventTargets(l,u);if(g){for(var A=[],H=0;H<g.length;H++)g[H].listens(u,!0)&&A.push(g[H]);S=A.concat(S)}if(S.length){u==="contextmenu"&&Xt(l);var ee=S[0],se={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var le=ee.getLatLng&&(!ee._radius||ee._radius<=10);se.containerPoint=le?this.latLngToContainerPoint(ee.getLatLng()):this.mouseEventToContainerPoint(l),se.layerPoint=this.containerPointToLayerPoint(se.containerPoint),se.latlng=le?ee.getLatLng():this.layerPointToLatLng(se.layerPoint)}for(H=0;H<S.length;H++)if(S[H].fire(u,se,!0),se.originalEvent._stopped||S[H].options.bubblingMouseEvents===!1&&C(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,u=this._handlers.length;l<u;l++)this._handlers[l].disable()},whenReady:function(l,u){return this._loaded?l.call(u||this,{target:this}):this.on("load",l,u),this},_getMapPanePos:function(){return Ha(this._mapPane)||new R(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,u){var g=l&&u!==void 0?this._getNewPixelOrigin(l,u):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,u){var g=this.getSize()._divideBy(2);return this.project(l,u)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,u,g){var v=this._getNewPixelOrigin(g,u);return this.project(l,u)._subtract(v)},_latLngBoundsToNewLayerBounds:function(l,u,g){var v=this._getNewPixelOrigin(g,u);return V([this.project(l.getSouthWest(),u)._subtract(v),this.project(l.getNorthWest(),u)._subtract(v),this.project(l.getSouthEast(),u)._subtract(v),this.project(l.getNorthEast(),u)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,u,g){if(!g)return l;var v=this.project(l,u),S=this.getSize().divideBy(2),A=new re(v.subtract(S),v.add(S)),H=this._getBoundsOffset(A,g,u);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?l:this.unproject(v.add(H),u)},_limitOffset:function(l,u){if(!u)return l;var g=this.getPixelBounds(),v=new re(g.min.add(l),g.max.add(l));return l.add(this._getBoundsOffset(v,u))},_getBoundsOffset:function(l,u,g){var v=V(this.project(u.getNorthEast(),g),this.project(u.getSouthWest(),g)),S=v.min.subtract(l.min),A=v.max.subtract(l.max),H=this._rebound(S.x,-A.x),ee=this._rebound(S.y,-A.y);return new R(H,ee)},_rebound:function(l,u){return l+u>0?Math.round(l-u)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(u))},_limitZoom:function(l){var u=this.getMinZoom(),g=this.getMaxZoom(),v=Pe.any3d?this.options.zoomSnap:1;return v&&(l=Math.round(l/v)*v),Math.max(u,Math.min(g,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,u){var g=this._getCenterOffset(l)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,u),!0)},_createAnimProxy:function(){var l=this._proxy=Ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(u){var g=bg,v=this._proxy.style[g];Va(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),v===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){jt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),u=this.getZoom();Va(this._proxy,this.project(l,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,u,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(u),S=this._getCenterOffset(l)._divideBy(1-1/v);return g.animate!==!0&&!this.getSize().contains(S)?!1:(X(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(l,u,!0)},this),!0)},_animateZoom:function(l,u,g,v){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=u,De(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:u,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Pt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function X4(l,u){return new We(l,u)}var Ss=U.extend({options:{position:"topright"},initialize:function(l){k(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var u=this._map;return u&&u.removeControl(this),this.options.position=l,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var u=this._container=this.onAdd(l),g=this.getPosition(),v=l._controlCorners[g];return De(u,"leaflet-control"),g.indexOf("bottom")!==-1?v.insertBefore(u,v.firstChild):v.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(jt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),el=function(l){return new Ss(l)};We.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},u="leaflet-",g=this._controlContainer=Ge("div",u+"control-container",this._container);function v(S,A){var H=u+S+" "+u+A;l[S+A]=Ge("div",H,g)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)jt(this._controlCorners[l]);jt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wb=Ss.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,u,g,v){return g<v?-1:v<g?1:0}},initialize:function(l,u,g){k(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in l)this._addLayer(l[v],v);for(v in u)this._addLayer(u[v],v,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return Ss.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,u){return this._addLayer(l,u),this._map?this._update():this},addOverlay:function(l,u){return this._addLayer(l,u,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(l));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){De(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(De(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Pt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",u=this._container=Ge("div",l),g=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Qo(u),Tg(u);var v=this._section=Ge("section",l+"-list");g&&(this._map.on("click",this.collapse,this),Oe(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=Ge("a",l+"-toggle",u);S.href="#",S.title="Layers",S.setAttribute("role","button"),Oe(S,{keydown:function(A){A.keyCode===13&&this._expandSafely()},click:function(A){Xt(A),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=Ge("div",l+"-base",v),this._separator=Ge("div",l+"-separator",v),this._overlaysList=Ge("div",l+"-overlays",v),u.appendChild(v)},_getLayer:function(l){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===l)return this._layers[u]},_addLayer:function(l,u,g){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:u,overlay:g}),this.options.sortLayers&&this._layers.sort(o(function(v,S){return this.options.sortFunction(v.layer,S.layer,v.name,S.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;gc(this._baseLayersList),gc(this._overlaysList),this._layerControlInputs=[];var l,u,g,v,S=0;for(g=0;g<this._layers.length;g++)v=this._layers[g],this._addItem(v),u=u||v.overlay,l=l||!v.overlay,S+=v.overlay?0:1;return this.options.hideSingleBase&&(l=l&&S>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=u&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var u=this._getLayer(c(l.target)),g=u.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;g&&this._map.fire(g,u)},_createRadioElement:function(l,u){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(u?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=g,v.firstChild},_addItem:function(l){var u=document.createElement("label"),g=this._map.hasLayer(l.layer),v;l.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=g):v=this._createRadioElement("leaflet-base-layers_"+c(this),g),this._layerControlInputs.push(v),v.layerId=c(l.layer),Oe(v,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+l.name;var A=document.createElement("span");u.appendChild(A),A.appendChild(v),A.appendChild(S);var H=l.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,u,g,v=[],S=[];this._handlingClick=!0;for(var A=l.length-1;A>=0;A--)u=l[A],g=this._getLayer(u.layerId).layer,u.checked?v.push(g):u.checked||S.push(g);for(A=0;A<S.length;A++)this._map.hasLayer(S[A])&&this._map.removeLayer(S[A]);for(A=0;A<v.length;A++)this._map.hasLayer(v[A])||this._map.addLayer(v[A]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,u,g,v=this._map.getZoom(),S=l.length-1;S>=0;S--)u=l[S],g=this._getLayer(u.layerId).layer,u.disabled=g.options.minZoom!==void 0&&v<g.options.minZoom||g.options.maxZoom!==void 0&&v>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Oe(l,"click",Xt),this.expand();var u=this;setTimeout(function(){ht(l,"click",Xt),u._preventClick=!1})}}),Q4=function(l,u,g){return new wb(l,u,g)},Mg=Ss.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var u="leaflet-control-zoom",g=Ge("div",u+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,u+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,u+"-out",g,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,u,g,v,S){var A=Ge("a",g,v);return A.innerHTML=l,A.href="#",A.title=u,A.setAttribute("role","button"),A.setAttribute("aria-label",u),Qo(A),Oe(A,"click",qa),Oe(A,"click",S,this),Oe(A,"click",this._refocusOnMap,this),A},_updateDisabled:function(){var l=this._map,u="leaflet-disabled";Pt(this._zoomInButton,u),Pt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(De(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(De(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});We.mergeOptions({zoomControl:!0}),We.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Mg,this.addControl(this.zoomControl))});var eC=function(l){return new Mg(l)},kb=Ss.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var u="leaflet-control-scale",g=Ge("div",u),v=this.options;return this._addScales(v,u+"-line",g),l.on(v.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),g},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,u,g){l.metric&&(this._mScale=Ge("div",u,g)),l.imperial&&(this._iScale=Ge("div",u,g))},_update:function(){var l=this._map,u=l.getSize().y/2,g=l.distance(l.containerPointToLatLng([0,u]),l.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(g)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var u=this._getRoundNum(l),g=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,g,u/l)},_updateImperial:function(l){var u=l*3.2808399,g,v,S;u>5280?(g=u/5280,v=this._getRoundNum(g),this._updateScale(this._iScale,v+" mi",v/g)):(S=this._getRoundNum(u),this._updateScale(this._iScale,S+" ft",S/u))},_updateScale:function(l,u,g){l.style.width=Math.round(this.options.maxWidth*g)+"px",l.innerHTML=u},_getRoundNum:function(l){var u=Math.pow(10,(Math.floor(l)+"").length-1),g=l/u;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,u*g}}),tC=function(l){return new kb(l)},rC='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ag=Ss.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Pe.inlineSvg?rC+" ":"")+"Leaflet</a>"},initialize:function(l){k(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=Ge("div","leaflet-control-attribution"),Qo(this._container);for(var u in l._layers)l._layers[u].getAttribution&&this.addAttribution(l._layers[u].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var u in this._attributions)this._attributions[u]&&l.push(u);var g=[];this.options.prefix&&g.push(this.options.prefix),l.length&&g.push(l.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});We.mergeOptions({attributionControl:!0}),We.addInitHook(function(){this.options.attributionControl&&new Ag().addTo(this)});var sC=function(l){return new Ag(l)};Ss.Layers=wb,Ss.Zoom=Mg,Ss.Scale=kb,Ss.Attribution=Ag,el.layers=Q4,el.zoom=eC,el.scale=tC,el.attribution=sC;var Ws=U.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ws.addTo=function(l,u){return l.addHandler(u,this),this};var nC={Events:G},jb=Pe.touch?"touchstart mousedown":"mousedown",Gn=F.extend({options:{clickTolerance:3},initialize:function(l,u,g,v){k(this,v),this._element=l,this._dragStartTarget=u||l,this._preventOutline=g},enable:function(){this._enabled||(Oe(this._dragStartTarget,jb,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gn._dragging===this&&this.finishDrag(!0),ht(this._dragStartTarget,jb,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!vg(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Gn._dragging===this&&this.finishDrag();return}if(!(Gn._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Gn._dragging=this,this._preventOutline&&Sg(this._element),jg(),Yo(),!this._moving)){this.fire("down");var u=l.touches?l.touches[0]:l,g=fb(this._element);this._startPoint=new R(u.clientX,u.clientY),this._startPos=Ha(this._element),this._parentScale=Cg(g);var v=l.type==="mousedown";Oe(document,v?"mousemove":"touchmove",this._onMove,this),Oe(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var u=l.touches&&l.touches.length===1?l.touches[0]:l,g=new R(u.clientX,u.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,Xt(l),this._moved||(this.fire("dragstart"),this._moved=!0,De(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),De(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Mt(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Pt(document.body,"leaflet-dragging"),this._lastTarget&&(Pt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ht(document,"mousemove touchmove",this._onMove,this),ht(document,"mouseup touchend touchcancel",this._onUp,this),Ng(),Jo();var u=this._moved&&this._moving;this._moving=!1,Gn._dragging=!1,u&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Nb(l,u,g){var v,S=[1,4,2,8],A,H,ee,se,le,ve,Ie,Be;for(A=0,ve=l.length;A<ve;A++)l[A]._code=Ka(l[A],u);for(ee=0;ee<4;ee++){for(Ie=S[ee],v=[],A=0,ve=l.length,H=ve-1;A<ve;H=A++)se=l[A],le=l[H],se._code&Ie?le._code&Ie||(Be=bc(le,se,Ie,u,g),Be._code=Ka(Be,u),v.push(Be)):(le._code&Ie&&(Be=bc(le,se,Ie,u,g),Be._code=Ka(Be,u),v.push(Be)),v.push(se));l=v}return l}function _b(l,u){var g,v,S,A,H,ee,se,le,ve;if(!l||l.length===0)throw new Error("latlngs not passed");ds(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ie=z([0,0]),Be=fe(l),wr=Be.getNorthWest().distanceTo(Be.getSouthWest())*Be.getNorthEast().distanceTo(Be.getNorthWest());wr<1700&&(Ie=Og(l));var Kt=l.length,cs=[];for(g=0;g<Kt;g++){var Mr=z(l[g]);cs.push(u.project(z([Mr.lat-Ie.lat,Mr.lng-Ie.lng])))}for(ee=se=le=0,g=0,v=Kt-1;g<Kt;v=g++)S=cs[g],A=cs[v],H=S.y*A.x-A.y*S.x,se+=(S.x+A.x)*H,le+=(S.y+A.y)*H,ee+=H*3;ee===0?ve=cs[0]:ve=[se/ee,le/ee];var Fi=u.unproject(J(ve));return z([Fi.lat+Ie.lat,Fi.lng+Ie.lng])}function Og(l){for(var u=0,g=0,v=0,S=0;S<l.length;S++){var A=z(l[S]);u+=A.lat,g+=A.lng,v++}return z([u/v,g/v])}var aC={__proto__:null,clipPolygon:Nb,polygonCenter:_b,centroid:Og};function Sb(l,u){if(!u||!l.length)return l.slice();var g=u*u;return l=lC(l,g),l=oC(l,g),l}function Cb(l,u,g){return Math.sqrt(tl(l,u,g,!0))}function iC(l,u,g){return tl(l,u,g)}function oC(l,u){var g=l.length,v=typeof Uint8Array<"u"?Uint8Array:Array,S=new v(g);S[0]=S[g-1]=1,Rg(l,S,u,0,g-1);var A,H=[];for(A=0;A<g;A++)S[A]&&H.push(l[A]);return H}function Rg(l,u,g,v,S){var A=0,H,ee,se;for(ee=v+1;ee<=S-1;ee++)se=tl(l[ee],l[v],l[S],!0),se>A&&(H=ee,A=se);A>g&&(u[H]=1,Rg(l,u,g,v,H),Rg(l,u,g,H,S))}function lC(l,u){for(var g=[l[0]],v=1,S=0,A=l.length;v<A;v++)dC(l[v],l[S])>u&&(g.push(l[v]),S=v);return S<A-1&&g.push(l[A-1]),g}var Pb;function Eb(l,u,g,v,S){var A=v?Pb:Ka(l,g),H=Ka(u,g),ee,se,le;for(Pb=H;;){if(!(A|H))return[l,u];if(A&H)return!1;ee=A||H,se=bc(l,u,ee,g,S),le=Ka(se,g),ee===A?(l=se,A=le):(u=se,H=le)}}function bc(l,u,g,v,S){var A=u.x-l.x,H=u.y-l.y,ee=v.min,se=v.max,le,ve;return g&8?(le=l.x+A*(se.y-l.y)/H,ve=se.y):g&4?(le=l.x+A*(ee.y-l.y)/H,ve=ee.y):g&2?(le=se.x,ve=l.y+H*(se.x-l.x)/A):g&1&&(le=ee.x,ve=l.y+H*(ee.x-l.x)/A),new R(le,ve,S)}function Ka(l,u){var g=0;return l.x<u.min.x?g|=1:l.x>u.max.x&&(g|=2),l.y<u.min.y?g|=4:l.y>u.max.y&&(g|=8),g}function dC(l,u){var g=u.x-l.x,v=u.y-l.y;return g*g+v*v}function tl(l,u,g,v){var S=u.x,A=u.y,H=g.x-S,ee=g.y-A,se=H*H+ee*ee,le;return se>0&&(le=((l.x-S)*H+(l.y-A)*ee)/se,le>1?(S=g.x,A=g.y):le>0&&(S+=H*le,A+=ee*le)),H=l.x-S,ee=l.y-A,v?H*H+ee*ee:new R(S,A)}function ds(l){return!N(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Ib(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ds(l)}function Tb(l,u){var g,v,S,A,H,ee,se,le;if(!l||l.length===0)throw new Error("latlngs not passed");ds(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var ve=z([0,0]),Ie=fe(l),Be=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Be<1700&&(ve=Og(l));var wr=l.length,Kt=[];for(g=0;g<wr;g++){var cs=z(l[g]);Kt.push(u.project(z([cs.lat-ve.lat,cs.lng-ve.lng])))}for(g=0,v=0;g<wr-1;g++)v+=Kt[g].distanceTo(Kt[g+1])/2;if(v===0)le=Kt[0];else for(g=0,A=0;g<wr-1;g++)if(H=Kt[g],ee=Kt[g+1],S=H.distanceTo(ee),A+=S,A>v){se=(A-v)/S,le=[ee.x-se*(ee.x-H.x),ee.y-se*(ee.y-H.y)];break}var Mr=u.unproject(J(le));return z([Mr.lat+ve.lat,Mr.lng+ve.lng])}var cC={__proto__:null,simplify:Sb,pointToSegmentDistance:Cb,closestPointOnSegment:iC,clipSegment:Eb,_getEdgeIntersection:bc,_getBitCode:Ka,_sqClosestPointOnSegment:tl,isFlat:ds,_flat:Ib,polylineCenter:Tb},Dg={project:function(l){return new R(l.lng,l.lat)},unproject:function(l){return new be(l.y,l.x)},bounds:new re([-180,-90],[180,90])},Fg={R:6378137,R_MINOR:6356752314245179e-9,bounds:new re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var u=Math.PI/180,g=this.R,v=l.lat*u,S=this.R_MINOR/g,A=Math.sqrt(1-S*S),H=A*Math.sin(v),ee=Math.tan(Math.PI/4-v/2)/Math.pow((1-H)/(1+H),A/2);return v=-g*Math.log(Math.max(ee,1e-10)),new R(l.lng*u*g,v)},unproject:function(l){for(var u=180/Math.PI,g=this.R,v=this.R_MINOR/g,S=Math.sqrt(1-v*v),A=Math.exp(-l.y/g),H=Math.PI/2-2*Math.atan(A),ee=0,se=.1,le;ee<15&&Math.abs(se)>1e-7;ee++)le=S*Math.sin(H),le=Math.pow((1-le)/(1+le),S/2),se=Math.PI/2-2*Math.atan(A*le)-H,H+=se;return new be(H*u,l.x*u/g)}},uC={__proto__:null,LonLat:Dg,Mercator:Fg,SphericalMercator:Ee},hC=a({},Me,{code:"EPSG:3395",projection:Fg,transformation:function(){var l=.5/(Math.PI*Fg.R);return Te(l,.5,-l,.5)}()}),Lb=a({},Me,{code:"EPSG:4326",projection:Dg,transformation:Te(1/180,1,-1/180,.5)}),mC=a({},xe,{projection:Dg,transformation:Te(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,u){var g=u.lng-l.lng,v=u.lat-l.lat;return Math.sqrt(g*g+v*v)},infinite:!0});xe.Earth=Me,xe.EPSG3395=hC,xe.EPSG3857=Ae,xe.EPSG900913=Q,xe.EPSG4326=Lb,xe.Simple=mC;var Cs=F.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[c(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[c(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var u=l.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var g=this.getEvents();u.on(g,this),this.once("remove",function(){u.off(g,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});We.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(l);return this._layers[u]?this:(this._layers[u]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var u=c(l);return this._layers[u]?(this._loaded&&l.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return c(l)in this._layers},eachLayer:function(l,u){for(var g in this._layers)l.call(u,this._layers[g]);return this},_addLayers:function(l){l=l?N(l)?l:[l]:[];for(var u=0,g=l.length;u<g;u++)this.addLayer(l[u])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[c(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var u=c(l);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,u=-1/0,g=this._getZoomSpan();for(var v in this._zoomBoundLayers){var S=this._zoomBoundLayers[v].options;l=S.minZoom===void 0?l:Math.min(l,S.minZoom),u=S.maxZoom===void 0?u:Math.max(u,S.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=l===1/0?void 0:l,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Mi=Cs.extend({initialize:function(l,u){k(this,u),this._layers={};var g,v;if(l)for(g=0,v=l.length;g<v;g++)this.addLayer(l[g])},addLayer:function(l){var u=this.getLayerId(l);return this._layers[u]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var u=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(l){var u=typeof l=="number"?l:this.getLayerId(l);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var u=Array.prototype.slice.call(arguments,1),g,v;for(g in this._layers)v=this._layers[g],v[l]&&v[l].apply(v,u);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,u){for(var g in this._layers)l.call(u,this._layers[g]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return c(l)}}),gC=function(l,u){return new Mi(l,u)},bn=Mi.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Mi.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Mi.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ae;for(var u in this._layers){var g=this._layers[u];l.extend(g.getBounds?g.getBounds():g.getLatLng())}return l}}),fC=function(l,u){return new bn(l,u)},Ai=U.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){k(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,u){var g=this._getIconUrl(l);if(!g){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(g,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(v,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(l,u){var g=this.options,v=g[u+"Size"];typeof v=="number"&&(v=[v,v]);var S=J(v),A=J(u==="shadow"&&g.shadowAnchor||g.iconAnchor||S&&S.divideBy(2,!0));l.className="leaflet-marker-"+u+" "+(g.className||""),A&&(l.style.marginLeft=-A.x+"px",l.style.marginTop=-A.y+"px"),S&&(l.style.width=S.x+"px",l.style.height=S.y+"px")},_createImg:function(l,u){return u=u||document.createElement("img"),u.src=l,u},_getIconUrl:function(l){return Pe.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function pC(l){return new Ai(l)}var rl=Ai.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof rl.imagePath!="string"&&(rl.imagePath=this._detectIconPath()),(this.options.imagePath||rl.imagePath)+Ai.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var u=function(g,v,S){var A=v.exec(g);return A&&A[S]};return l=u(l,/^url\((['"])?(.+)\1\)$/,2),l&&u(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=Ge("div","leaflet-default-icon-path",document.body),u=Go(l,"background-image")||Go(l,"backgroundImage");if(document.body.removeChild(l),u=this._stripUrl(u),u)return u;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),Mb=Ws.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Gn(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),De(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var u=this._marker,g=u._map,v=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,A=Ha(u._icon),H=g.getPixelBounds(),ee=g.getPixelOrigin(),se=V(H.min._subtract(ee).add(S),H.max._subtract(ee).subtract(S));if(!se.contains(A)){var le=J((Math.max(se.max.x,A.x)-se.max.x)/(H.max.x-se.max.x)-(Math.min(se.min.x,A.x)-se.min.x)/(H.min.x-se.min.x),(Math.max(se.max.y,A.y)-se.max.y)/(H.max.y-se.max.y)-(Math.min(se.min.y,A.y)-se.min.y)/(H.min.y-se.min.y)).multiplyBy(v);g.panBy(le,{animate:!1}),this._draggable._newPos._add(le),this._draggable._startPos._add(le),Mt(u._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=X(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=X(this._adjustPan.bind(this,l)))},_onDrag:function(l){var u=this._marker,g=u._shadow,v=Ha(u._icon),S=u._map.layerPointToLatLng(v);g&&Mt(g,v),u._latlng=S,l.latlng=S,l.oldLatLng=this._oldLatLng,u.fire("move",l).fire("drag",l)},_onDragEnd:function(l){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),vc=Cs.extend({options:{icon:new rl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,u){k(this,u),this._latlng=z(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var u=this._latlng;return this._latlng=z(l),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=l.icon.createIcon(this._icon),v=!1;g!==this._icon&&(this._icon&&this._removeIcon(),v=!0,l.title&&(g.title=l.title),g.tagName==="IMG"&&(g.alt=l.alt||"")),De(g,u),l.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Oe(g,"focus",this._panOnFocus,this);var S=l.icon.createShadow(this._shadow),A=!1;S!==this._shadow&&(this._removeShadow(),A=!0),S&&(De(S,u),S.alt=""),this._shadow=S,l.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&A&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ht(this._icon,"focus",this._panOnFocus,this),jt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&jt(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Mt(this._icon,l),this._shadow&&Mt(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(De(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mb)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mb(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&ls(this._icon,l),this._shadow&&ls(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var u=this.options.icon.options,g=u.iconSize?J(u.iconSize):J(0,0),v=u.iconAnchor?J(u.iconAnchor):J(0,0);l.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:g.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function xC(l,u){return new vc(l,u)}var Yn=Cs.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return k(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wc=Yn.extend({options:{fill:!0,radius:10},initialize:function(l,u){k(this,u),this._latlng=z(l),this._radius=this.options.radius},setLatLng:function(l){var u=this._latlng;return this._latlng=z(l),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var u=l&&l.radius||this._radius;return Yn.prototype.setStyle.call(this,l),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,u=this._radiusY||l,g=this._clickTolerance(),v=[l+g,u+g];this._pxBounds=new re(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yC(l,u){return new wc(l,u)}var zg=wc.extend({initialize:function(l,u,g){if(typeof u=="number"&&(u=a({},g,{radius:u})),k(this,u),this._latlng=z(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Yn.prototype.setStyle,_project:function(){var l=this._latlng.lng,u=this._latlng.lat,g=this._map,v=g.options.crs;if(v.distance===Me.distance){var S=Math.PI/180,A=this._mRadius/Me.R/S,H=g.project([u+A,l]),ee=g.project([u-A,l]),se=H.add(ee).divideBy(2),le=g.unproject(se).lat,ve=Math.acos((Math.cos(A*S)-Math.sin(u*S)*Math.sin(le*S))/(Math.cos(u*S)*Math.cos(le*S)))/S;(isNaN(ve)||ve===0)&&(ve=A/Math.cos(Math.PI/180*u)),this._point=se.subtract(g.getPixelOrigin()),this._radius=isNaN(ve)?0:se.x-g.project([le,l-ve]).x,this._radiusY=se.y-H.y}else{var Ie=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(Ie).x}this._updateBounds()}});function bC(l,u,g){return new zg(l,u,g)}var vn=Yn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,u){k(this,u),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var u=1/0,g=null,v=tl,S,A,H=0,ee=this._parts.length;H<ee;H++)for(var se=this._parts[H],le=1,ve=se.length;le<ve;le++){S=se[le-1],A=se[le];var Ie=v(l,S,A,!0);Ie<u&&(u=Ie,g=v(l,S,A))}return g&&(g.distance=Math.sqrt(u)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Tb(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,u){return u=u||this._defaultShape(),l=z(l),u.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ae,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return ds(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var u=[],g=ds(l),v=0,S=l.length;v<S;v++)g?(u[v]=z(l[v]),this._bounds.extend(u[v])):u[v]=this._convertLatLngs(l[v]);return u},_project:function(){var l=new re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),u=new R(l,l);this._rawPxBounds&&(this._pxBounds=new re([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(l,u,g){var v=l[0]instanceof be,S=l.length,A,H;if(v){for(H=[],A=0;A<S;A++)H[A]=this._map.latLngToLayerPoint(l[A]),g.extend(H[A]);u.push(H)}else for(A=0;A<S;A++)this._projectLatlngs(l[A],u,g)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,g,v,S,A,H,ee,se;for(g=0,S=0,A=this._rings.length;g<A;g++)for(se=this._rings[g],v=0,H=se.length;v<H-1;v++)ee=Eb(se[v],se[v+1],l,v,!0),ee&&(u[S]=u[S]||[],u[S].push(ee[0]),(ee[1]!==se[v+1]||v===H-2)&&(u[S].push(ee[1]),S++))}},_simplifyPoints:function(){for(var l=this._parts,u=this.options.smoothFactor,g=0,v=l.length;g<v;g++)l[g]=Sb(l[g],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,u){var g,v,S,A,H,ee,se=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(g=0,A=this._parts.length;g<A;g++)for(ee=this._parts[g],v=0,H=ee.length,S=H-1;v<H;S=v++)if(!(!u&&v===0)&&Cb(l,ee[S],ee[v])<=se)return!0;return!1}});function vC(l,u){return new vn(l,u)}vn._flat=Ib;var Oi=vn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _b(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var u=vn.prototype._convertLatLngs.call(this,l),g=u.length;return g>=2&&u[0]instanceof be&&u[0].equals(u[g-1])&&u.pop(),u},_setLatLngs:function(l){vn.prototype._setLatLngs.call(this,l),ds(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ds(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,u=this.options.weight,g=new R(u,u);if(l=new re(l.min.subtract(g),l.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,S=this._rings.length,A;v<S;v++)A=Nb(this._rings[v],l,!0),A.length&&this._parts.push(A)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var u=!1,g,v,S,A,H,ee,se,le;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(A=0,se=this._parts.length;A<se;A++)for(g=this._parts[A],H=0,le=g.length,ee=le-1;H<le;ee=H++)v=g[H],S=g[ee],v.y>l.y!=S.y>l.y&&l.x<(S.x-v.x)*(l.y-v.y)/(S.y-v.y)+v.x&&(u=!u);return u||vn.prototype._containsPoint.call(this,l,!0)}});function wC(l,u){return new Oi(l,u)}var wn=bn.extend({initialize:function(l,u){k(this,u),this._layers={},l&&this.addData(l)},addData:function(l){var u=N(l)?l:l.features,g,v,S;if(u){for(g=0,v=u.length;g<v;g++)S=u[g],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var A=this.options;if(A.filter&&!A.filter(l))return this;var H=kc(l,A);return H?(H.feature=_c(l),H.defaultOptions=H.options,this.resetStyle(H),A.onEachFeature&&A.onEachFeature(l,H),this.addLayer(H)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=a({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(u){this._setLayerStyle(u,l)},this)},_setLayerStyle:function(l,u){l.setStyle&&(typeof u=="function"&&(u=u(l.feature)),l.setStyle(u))}});function kc(l,u){var g=l.type==="Feature"?l.geometry:l,v=g?g.coordinates:null,S=[],A=u&&u.pointToLayer,H=u&&u.coordsToLatLng||Bg,ee,se,le,ve;if(!v&&!g)return null;switch(g.type){case"Point":return ee=H(v),Ab(A,l,ee,u);case"MultiPoint":for(le=0,ve=v.length;le<ve;le++)ee=H(v[le]),S.push(Ab(A,l,ee,u));return new bn(S);case"LineString":case"MultiLineString":return se=jc(v,g.type==="LineString"?0:1,H),new vn(se,u);case"Polygon":case"MultiPolygon":return se=jc(v,g.type==="Polygon"?1:2,H),new Oi(se,u);case"GeometryCollection":for(le=0,ve=g.geometries.length;le<ve;le++){var Ie=kc({geometry:g.geometries[le],type:"Feature",properties:l.properties},u);Ie&&S.push(Ie)}return new bn(S);case"FeatureCollection":for(le=0,ve=g.features.length;le<ve;le++){var Be=kc(g.features[le],u);Be&&S.push(Be)}return new bn(S);default:throw new Error("Invalid GeoJSON object.")}}function Ab(l,u,g,v){return l?l(u,g):new vc(g,v&&v.markersInheritOptions&&v)}function Bg(l){return new be(l[1],l[0],l[2])}function jc(l,u,g){for(var v=[],S=0,A=l.length,H;S<A;S++)H=u?jc(l[S],u-1,g):(g||Bg)(l[S]),v.push(H);return v}function $g(l,u){return l=z(l),l.alt!==void 0?[p(l.lng,u),p(l.lat,u),p(l.alt,u)]:[p(l.lng,u),p(l.lat,u)]}function Nc(l,u,g,v){for(var S=[],A=0,H=l.length;A<H;A++)S.push(u?Nc(l[A],ds(l[A])?0:u-1,g,v):$g(l[A],v));return!u&&g&&S.length>0&&S.push(S[0].slice()),S}function Ri(l,u){return l.feature?a({},l.feature,{geometry:u}):_c(u)}function _c(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Ug={toGeoJSON:function(l){return Ri(this,{type:"Point",coordinates:$g(this.getLatLng(),l)})}};vc.include(Ug),zg.include(Ug),wc.include(Ug),vn.include({toGeoJSON:function(l){var u=!ds(this._latlngs),g=Nc(this._latlngs,u?1:0,!1,l);return Ri(this,{type:(u?"Multi":"")+"LineString",coordinates:g})}}),Oi.include({toGeoJSON:function(l){var u=!ds(this._latlngs),g=u&&!ds(this._latlngs[0]),v=Nc(this._latlngs,g?2:u?1:0,!0,l);return u||(v=[v]),Ri(this,{type:(g?"Multi":"")+"Polygon",coordinates:v})}}),Mi.include({toMultiPoint:function(l){var u=[];return this.eachLayer(function(g){u.push(g.toGeoJSON(l).geometry.coordinates)}),Ri(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(l){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(l);var g=u==="GeometryCollection",v=[];return this.eachLayer(function(S){if(S.toGeoJSON){var A=S.toGeoJSON(l);if(g)v.push(A.geometry);else{var H=_c(A);H.type==="FeatureCollection"?v.push.apply(v,H.features):v.push(H)}}}),g?Ri(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function Ob(l,u){return new wn(l,u)}var kC=Ob,Sc=Cs.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,u,g){this._url=l,this._bounds=fe(u),k(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(De(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){jt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Ti(this._image),this},bringToBack:function(){return this._map&&Li(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=fe(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",u=this._image=l?this._url:Ge("img");if(De(u,"leaflet-image-layer"),this._zoomAnimated&&De(u,"leaflet-zoom-animated"),this.options.className&&De(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onload=o(this.fire,this,"load"),u.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(l){var u=this._map.getZoomScale(l.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Va(this._image,g,u)},_reset:function(){var l=this._image,u=new re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=u.getSize();Mt(l,u.min),l.style.width=g.x+"px",l.style.height=g.y+"px"},_updateOpacity:function(){ls(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),jC=function(l,u,g){return new Sc(l,u,g)},Rb=Sc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",u=this._image=l?this._url:Ge("video");if(De(u,"leaflet-image-layer"),this._zoomAnimated&&De(u,"leaflet-zoom-animated"),this.options.className&&De(u,this.options.className),u.onselectstart=f,u.onmousemove=f,u.onloadeddata=o(this.fire,this,"load"),l){for(var g=u.getElementsByTagName("source"),v=[],S=0;S<g.length;S++)v.push(g[S].src);this._url=g.length>0?v:[u.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var A=0;A<this._url.length;A++){var H=Ge("source");H.src=this._url[A],u.appendChild(H)}}});function NC(l,u,g){return new Rb(l,u,g)}var Db=Sc.extend({_initImage:function(){var l=this._image=this._url;De(l,"leaflet-image-layer"),this._zoomAnimated&&De(l,"leaflet-zoom-animated"),this.options.className&&De(l,this.options.className),l.onselectstart=f,l.onmousemove=f}});function _C(l,u,g){return new Db(l,u,g)}var qs=Cs.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,u){l&&(l instanceof be||N(l))?(this._latlng=z(l),k(this,u)):(k(this,l),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&ls(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&ls(this._container,1),this.bringToFront(),this.options.interactive&&(De(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(ls(this._container,0),this._removeTimeout=setTimeout(o(jt,void 0,this._container),200)):jt(this._container),this.options.interactive&&(Pt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=z(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ti(this._container),this},bringToBack:function(){return this._map&&Li(this._container),this},_prepareOpen:function(l){var u=this._source;if(!u._map)return!1;if(u instanceof bn){u=null;var g=this._source._layers;for(var v in g)if(g[v]._map){u=g[v];break}if(!u)return!1;this._source=u}if(!l)if(u.getCenter)l=u.getCenter();else if(u.getLatLng)l=u.getLatLng();else if(u.getBounds)l=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")l.innerHTML=u;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),u=J(this.options.offset),g=this._getAnchor();this._zoomAnimated?Mt(this._container,l.add(g)):u=u.add(l).add(g);var v=this._containerBottom=-u.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=v+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});We.include({_initOverlay:function(l,u,g,v){var S=u;return S instanceof l||(S=new l(v).setContent(u)),g&&S.setLatLng(g),S}}),Cs.include({_initOverlay:function(l,u,g,v){var S=g;return S instanceof l?(k(S,v),S._source=this):(S=u&&!v?u:new l(v,this),S.setContent(g)),S}});var Cc=qs.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,qs.prototype.openOn.call(this,l)},onAdd:function(l){qs.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Yn||this._source.on("preclick",Wa))},onRemove:function(l){qs.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Yn||this._source.off("preclick",Wa))},getEvents:function(){var l=qs.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",u=this._container=Ge("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=Ge("div",l+"-content-wrapper",u);if(this._contentNode=Ge("div",l+"-content",g),Qo(u),Tg(this._contentNode),Oe(u,"contextmenu",Wa),this._tipContainer=Ge("div",l+"-tip-container",u),this._tip=Ge("div",l+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=Ge("a",l+"-close-button",u);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',Oe(v,"click",function(S){Xt(S),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,u=l.style;u.width="",u.whiteSpace="nowrap";var g=l.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),u.width=g+1+"px",u.whiteSpace="",u.height="";var v=l.offsetHeight,S=this.options.maxHeight,A="leaflet-popup-scrolled";S&&v>S?(u.height=S+"px",De(l,A)):Pt(l,A),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),g=this._getAnchor();Mt(this._container,u.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,u=parseInt(Go(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+u,v=this._containerWidth,S=new R(this._containerLeft,-g-this._containerBottom);S._add(Ha(this._container));var A=l.layerPointToContainerPoint(S),H=J(this.options.autoPanPadding),ee=J(this.options.autoPanPaddingTopLeft||H),se=J(this.options.autoPanPaddingBottomRight||H),le=l.getSize(),ve=0,Ie=0;A.x+v+se.x>le.x&&(ve=A.x+v-le.x+se.x),A.x-ve-ee.x<0&&(ve=A.x-ee.x),A.y+g+se.y>le.y&&(Ie=A.y+g-le.y+se.y),A.y-Ie-ee.y<0&&(Ie=A.y-ee.y),(ve||Ie)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([ve,Ie]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),SC=function(l,u){return new Cc(l,u)};We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(l,u,g){return this._initOverlay(Cc,l,u,g).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Cs.include({bindPopup:function(l,u){return this._popup=this._initOverlay(Cc,this._popup,l,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof bn||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){qa(l);var u=l.layer||l.target;if(this._popup._source===u&&!(u instanceof Yn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=u,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Pc=qs.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){qs.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){qs.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=qs.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",u=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ge("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var u,g,v=this._map,S=this._container,A=v.latLngToContainerPoint(v.getCenter()),H=v.layerPointToContainerPoint(l),ee=this.options.direction,se=S.offsetWidth,le=S.offsetHeight,ve=J(this.options.offset),Ie=this._getAnchor();ee==="top"?(u=se/2,g=le):ee==="bottom"?(u=se/2,g=0):ee==="center"?(u=se/2,g=le/2):ee==="right"?(u=0,g=le/2):ee==="left"?(u=se,g=le/2):H.x<A.x?(ee="right",u=0,g=le/2):(ee="left",u=se+(ve.x+Ie.x)*2,g=le/2),l=l.subtract(J(u,g,!0)).add(ve).add(Ie),Pt(S,"leaflet-tooltip-right"),Pt(S,"leaflet-tooltip-left"),Pt(S,"leaflet-tooltip-top"),Pt(S,"leaflet-tooltip-bottom"),De(S,"leaflet-tooltip-"+ee),Mt(S,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&ls(this._container,l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(u)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),CC=function(l,u){return new Pc(l,u)};We.include({openTooltip:function(l,u,g){return this._initOverlay(Pc,l,u,g).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Cs.include({bindTooltip:function(l,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pc,this._tooltip,l,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var u=l?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[u](g),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof bn||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&(Oe(u,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Oe(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var u=l.latlng,g,v;this._tooltip.options.sticky&&l.originalEvent&&(g=this._map.mouseEventToContainerPoint(l.originalEvent),v=this._map.containerPointToLayerPoint(g),u=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(u)}});var Fb=Ai.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var u=l&&l.tagName==="DIV"?l:document.createElement("div"),g=this.options;if(g.html instanceof Element?(gc(u),u.appendChild(g.html)):u.innerHTML=g.html!==!1?g.html:"",g.bgPos){var v=J(g.bgPos);u.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function PC(l){return new Fb(l)}Ai.Default=rl;var sl=Cs.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Pe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){k(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),jt(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Li(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof R?l:new R(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var u=this.getPane().children,g=-l(-1/0,1/0),v=0,S=u.length,A;v<S;v++)A=u[v].style.zIndex,u[v]!==this._container&&A&&(g=l(g,+A));isFinite(g)&&(this.options.zIndex=g+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Pe.ielt9){ls(this._container,this.options.opacity);var l=+new Date,u=!1,g=!1;for(var v in this._tiles){var S=this._tiles[v];if(!(!S.current||!S.loaded)){var A=Math.min(1,(l-S.loaded)/200);ls(S.el,A),A<1?u=!0:(S.active?g=!0:this._onOpaqueTile(S),S.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),u&&(B(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,u=this.options.maxZoom;if(l!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===l?(this._levels[g].el.style.zIndex=u-Math.abs(l-g),this._onUpdateLevel(g)):(jt(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var v=this._levels[l],S=this._map;return v||(v=this._levels[l]={},v.el=Ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=u,v.origin=S.project(S.unproject(S.getPixelOrigin()),l).round(),v.zoom=l,this._setZoomTransform(v,S.getCenter(),S.getZoom()),f(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var l,u,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)u=this._tiles[l],u.retain=u.current;for(l in this._tiles)if(u=this._tiles[l],u.current&&!u.active){var v=u.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var u in this._tiles)this._tiles[u].coords.z===l&&this._removeTile(u)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)jt(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,u,g,v){var S=Math.floor(l/2),A=Math.floor(u/2),H=g-1,ee=new R(+S,+A);ee.z=+H;var se=this._tileCoordsToKey(ee),le=this._tiles[se];return le&&le.active?(le.retain=!0,!0):(le&&le.loaded&&(le.retain=!0),H>v?this._retainParent(S,A,H,v):!1)},_retainChildren:function(l,u,g,v){for(var S=2*l;S<2*l+2;S++)for(var A=2*u;A<2*u+2;A++){var H=new R(S,A);H.z=g+1;var ee=this._tileCoordsToKey(H),se=this._tiles[ee];if(se&&se.active){se.retain=!0;continue}else se&&se.loaded&&(se.retain=!0);g+1<v&&this._retainChildren(S,A,g+1,v)}},_resetView:function(l){var u=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var u=this.options;return u.minNativeZoom!==void 0&&l<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<l?u.maxNativeZoom:l},_setView:function(l,u,g,v){var S=Math.round(u);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var A=this.options.updateWhenZooming&&S!==this._tileZoom;(!v||A)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(l),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(l,u)},_setZoomTransforms:function(l,u){for(var g in this._levels)this._setZoomTransform(this._levels[g],l,u)},_setZoomTransform:function(l,u,g){var v=this._map.getZoomScale(g,l.zoom),S=l.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(u,g)).round();Pe.any3d?Va(l.el,S,v):Mt(l.el,S)},_resetGrid:function(){var l=this._map,u=l.options.crs,g=this._tileSize=this.getTileSize(),v=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,u.wrapLng[0]],v).x/g.x),Math.ceil(l.project([0,u.wrapLng[1]],v).x/g.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([u.wrapLat[0],0],v).y/g.x),Math.ceil(l.project([u.wrapLat[1],0],v).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var u=this._map,g=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),v=u.getZoomScale(g,this._tileZoom),S=u.project(l,this._tileZoom).floor(),A=u.getSize().divideBy(v*2);return new re(S.subtract(A),S.add(A))},_update:function(l){var u=this._map;if(u){var g=this._clampZoom(u.getZoom());if(l===void 0&&(l=u.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(l),S=this._pxBoundsToTileRange(v),A=S.getCenter(),H=[],ee=this.options.keepBuffer,se=new re(S.getBottomLeft().subtract([ee,-ee]),S.getTopRight().add([ee,-ee]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var le in this._tiles){var ve=this._tiles[le].coords;(ve.z!==this._tileZoom||!se.contains(new R(ve.x,ve.y)))&&(this._tiles[le].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(l,g);return}for(var Ie=S.min.y;Ie<=S.max.y;Ie++)for(var Be=S.min.x;Be<=S.max.x;Be++){var wr=new R(Be,Ie);if(wr.z=this._tileZoom,!!this._isValidTile(wr)){var Kt=this._tiles[this._tileCoordsToKey(wr)];Kt?Kt.current=!0:H.push(wr)}}if(H.sort(function(Mr,Fi){return Mr.distanceTo(A)-Fi.distanceTo(A)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var cs=document.createDocumentFragment();for(Be=0;Be<H.length;Be++)this._addTile(H[Be],cs);this._level.el.appendChild(cs)}}}},_isValidTile:function(l){var u=this._map.options.crs;if(!u.infinite){var g=this._globalTileRange;if(!u.wrapLng&&(l.x<g.min.x||l.x>g.max.x)||!u.wrapLat&&(l.y<g.min.y||l.y>g.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(l);return fe(this.options.bounds).overlaps(v)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var u=this._map,g=this.getTileSize(),v=l.scaleBy(g),S=v.add(g),A=u.unproject(v,l.z),H=u.unproject(S,l.z);return[A,H]},_tileCoordsToBounds:function(l){var u=this._tileCoordsToNwSe(l),g=new ae(u[0],u[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var u=l.split(":"),g=new R(+u[0],+u[1]);return g.z=+u[2],g},_removeTile:function(l){var u=this._tiles[l];u&&(jt(u.el),delete this._tiles[l],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){De(l,"leaflet-tile");var u=this.getTileSize();l.style.width=u.x+"px",l.style.height=u.y+"px",l.onselectstart=f,l.onmousemove=f,Pe.ielt9&&this.options.opacity<1&&ls(l,this.options.opacity)},_addTile:function(l,u){var g=this._getTilePos(l),v=this._tileCoordsToKey(l),S=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(S),this.createTile.length<2&&X(o(this._tileReady,this,l,null,S)),Mt(S,g),this._tiles[v]={el:S,coords:l,current:!0},u.appendChild(S),this.fire("tileloadstart",{tile:S,coords:l})},_tileReady:function(l,u,g){u&&this.fire("tileerror",{error:u,tile:g,coords:l});var v=this._tileCoordsToKey(l);g=this._tiles[v],g&&(g.loaded=+new Date,this._map._fadeAnimated?(ls(g.el,0),B(this._fadeFrame),this._fadeFrame=X(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),u||(De(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Pe.ielt9||!this._map._fadeAnimated?X(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var u=new R(this._wrapX?m(l.x,this._wrapX):l.x,this._wrapY?m(l.y,this._wrapY):l.y);return u.z=l.z,u},_pxBoundsToTileRange:function(l){var u=this.getTileSize();return new re(l.min.unscaleBy(u).floor(),l.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function EC(l){return new sl(l)}var Di=sl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,u){this._url=l,u=k(this,u),u.detectRetina&&Pe.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,u){return this._url===l&&u===void 0&&(u=!0),this._url=l,u||this.redraw(),this},createTile:function(l,u){var g=document.createElement("img");return Oe(g,"load",o(this._tileOnLoad,this,u,g)),Oe(g,"error",o(this._tileOnError,this,u,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(l),g},getTileUrl:function(l){var u={r:Pe.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-l.y;this.options.tms&&(u.y=g),u["-y"]=g}return j(this._url,a(u,this.options))},_tileOnLoad:function(l,u){Pe.ielt9?setTimeout(o(l,this,null,u),0):l(null,u)},_tileOnError:function(l,u,g){var v=this.options.errorTileUrl;v&&u.getAttribute("src")!==v&&(u.src=v),l(g,u)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,u=this.options.maxZoom,g=this.options.zoomReverse,v=this.options.zoomOffset;return g&&(l=u-l),l+v},_getSubdomain:function(l){var u=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var l,u;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(u=this._tiles[l].el,u.onload=f,u.onerror=f,!u.complete)){u.src=P;var g=this._tiles[l].coords;jt(u),delete this._tiles[l],this.fire("tileabort",{tile:u,coords:g})}},_removeTile:function(l){var u=this._tiles[l];if(u)return u.el.setAttribute("src",P),sl.prototype._removeTile.call(this,l)},_tileReady:function(l,u,g){if(!(!this._map||g&&g.getAttribute("src")===P))return sl.prototype._tileReady.call(this,l,u,g)}});function zb(l,u){return new Di(l,u)}var Bb=Di.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,u){this._url=l;var g=a({},this.defaultWmsParams);for(var v in u)v in this.options||(g[v]=u[v]);u=k(this,u);var S=u.detectRetina&&Pe.retina?2:1,A=this.getTileSize();g.width=A.x*S,g.height=A.y*S,this.wmsParams=g},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Di.prototype.onAdd.call(this,l)},getTileUrl:function(l){var u=this._tileCoordsToNwSe(l),g=this._crs,v=V(g.project(u[0]),g.project(u[1])),S=v.min,A=v.max,H=(this._wmsVersion>=1.3&&this._crs===Lb?[S.y,S.x,A.y,A.x]:[S.x,S.y,A.x,A.y]).join(","),ee=Di.prototype.getTileUrl.call(this,l);return ee+y(this.wmsParams,ee,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(l,u){return a(this.wmsParams,l),u||this.redraw(),this}});function IC(l,u){return new Bb(l,u)}Di.WMS=Bb,zb.wms=IC;var kn=Cs.extend({options:{padding:.1},initialize:function(l){k(this,l),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),De(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,u){var g=this._map.getZoomScale(u,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,u),A=v.multiplyBy(-g).add(S).subtract(this._map._getNewPixelOrigin(l,u));Pe.any3d?Va(this._container,A,g):Mt(this._container,A)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,u=this._map.getSize(),g=this._map.containerPointToLayerPoint(u.multiplyBy(-l)).round();this._bounds=new re(g,g.add(u.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),$b=kn.extend({options:{tolerance:0},getEvents:function(){var l=kn.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){kn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Oe(l,"mousemove",this._onMouseMove,this),Oe(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,jt(this._container),ht(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var u in this._layers)l=this._layers[u],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kn.prototype._update.call(this);var l=this._bounds,u=this._container,g=l.getSize(),v=Pe.retina?2:1;Mt(u,l.min),u.width=v*g.x,u.height=v*g.y,u.style.width=g.x+"px",u.style.height=g.y+"px",Pe.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){kn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[c(l)]=l;var u=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var u=l._order,g=u.next,v=u.prev;g?g.prev=v:this._drawLast=v,v?v.next=g:this._drawFirst=g,delete l._order,delete this._layers[c(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var u=l.options.dashArray.split(/[, ]+/),g=[],v,S;for(S=0;S<u.length;S++){if(v=Number(u[S]),isNaN(v))return;g.push(v)}l.options._dashArray=g}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||X(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var u=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new re,this._redrawBounds.extend(l._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(l._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var u=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,u=this._redrawBounds;if(this._ctx.save(),u){var g=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)l=v.layer,(!u||l._pxBounds&&l._pxBounds.intersects(u))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,u){if(this._drawing){var g,v,S,A,H=l._parts,ee=H.length,se=this._ctx;if(ee){for(se.beginPath(),g=0;g<ee;g++){for(v=0,S=H[g].length;v<S;v++)A=H[g][v],se[v?"lineTo":"moveTo"](A.x,A.y);u&&se.closePath()}this._fillStroke(se,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var u=l._point,g=this._ctx,v=Math.max(Math.round(l._radius),1),S=(Math.max(Math.round(l._radiusY),1)||v)/v;S!==1&&(g.save(),g.scale(1,S)),g.beginPath(),g.arc(u.x,u.y/S,v,0,Math.PI*2,!1),S!==1&&g.restore(),this._fillStroke(g,l)}},_fillStroke:function(l,u){var g=u.options;g.fill&&(l.globalAlpha=g.fillOpacity,l.fillStyle=g.fillColor||g.color,l.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(l.setLineDash&&l.setLineDash(u.options&&u.options._dashArray||[]),l.globalAlpha=g.opacity,l.lineWidth=g.weight,l.strokeStyle=g.color,l.lineCap=g.lineCap,l.lineJoin=g.lineJoin,l.stroke())},_onClick:function(l){for(var u=this._map.mouseEventToLayerPoint(l),g,v,S=this._drawFirst;S;S=S.next)g=S.layer,g.options.interactive&&g._containsPoint(u)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(g))&&(v=g);this._fireEvent(v?[v]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,u)}},_handleMouseOut:function(l){var u=this._hoveredLayer;u&&(Pt(this._container,"leaflet-interactive"),this._fireEvent([u],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,u){if(!this._mouseHoverThrottled){for(var g,v,S=this._drawFirst;S;S=S.next)g=S.layer,g.options.interactive&&g._containsPoint(u)&&(v=g);v!==this._hoveredLayer&&(this._handleMouseOut(l),v&&(De(this._container,"leaflet-interactive"),this._fireEvent([v],l,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,u,g){this._map._fireDOMEvent(u,g||u.type,l)},_bringToFront:function(l){var u=l._order;if(u){var g=u.next,v=u.prev;if(g)g.prev=v;else return;v?v.next=g:g&&(this._drawFirst=g),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(l)}},_bringToBack:function(l){var u=l._order;if(u){var g=u.next,v=u.prev;if(v)v.next=g;else return;g?g.prev=v:v&&(this._drawLast=v),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(l)}}});function Ub(l){return Pe.canvas?new $b(l):null}var nl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),TC={_initContainer:function(){this._container=Ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(kn.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var u=l._container=nl("shape");De(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",l._path=nl("path"),u.appendChild(l._path),this._updateStyle(l),this._layers[c(l)]=l},_addPath:function(l){var u=l._container;this._container.appendChild(u),l.options.interactive&&l.addInteractiveTarget(u)},_removePath:function(l){var u=l._container;jt(u),l.removeInteractiveTarget(u),delete this._layers[c(l)]},_updateStyle:function(l){var u=l._stroke,g=l._fill,v=l.options,S=l._container;S.stroked=!!v.stroke,S.filled=!!v.fill,v.stroke?(u||(u=l._stroke=nl("stroke")),S.appendChild(u),u.weight=v.weight+"px",u.color=v.color,u.opacity=v.opacity,v.dashArray?u.dashStyle=N(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=v.lineCap.replace("butt","flat"),u.joinstyle=v.lineJoin):u&&(S.removeChild(u),l._stroke=null),v.fill?(g||(g=l._fill=nl("fill")),S.appendChild(g),g.color=v.fillColor||v.color,g.opacity=v.fillOpacity):g&&(S.removeChild(g),l._fill=null)},_updateCircle:function(l){var u=l._point.round(),g=Math.round(l._radius),v=Math.round(l._radiusY||g);this._setPath(l,l._empty()?"M0 0":"AL "+u.x+","+u.y+" "+g+","+v+" 0,"+65535*360)},_setPath:function(l,u){l._path.v=u},_bringToFront:function(l){Ti(l._container)},_bringToBack:function(l){Li(l._container)}},Ec=Pe.vml?nl:ge,al=kn.extend({_initContainer:function(){this._container=Ec("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ec("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){jt(this._container),ht(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){kn.prototype._update.call(this);var l=this._bounds,u=l.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,g.setAttribute("width",u.x),g.setAttribute("height",u.y)),Mt(g,l.min),g.setAttribute("viewBox",[l.min.x,l.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(l){var u=l._path=Ec("path");l.options.className&&De(u,l.options.className),l.options.interactive&&De(u,"leaflet-interactive"),this._updateStyle(l),this._layers[c(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){jt(l._path),l.removeInteractiveTarget(l._path),delete this._layers[c(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var u=l._path,g=l.options;u&&(g.stroke?(u.setAttribute("stroke",g.color),u.setAttribute("stroke-opacity",g.opacity),u.setAttribute("stroke-width",g.weight),u.setAttribute("stroke-linecap",g.lineCap),u.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?u.setAttribute("stroke-dasharray",g.dashArray):u.removeAttribute("stroke-dasharray"),g.dashOffset?u.setAttribute("stroke-dashoffset",g.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),g.fill?(u.setAttribute("fill",g.fillColor||g.color),u.setAttribute("fill-opacity",g.fillOpacity),u.setAttribute("fill-rule",g.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(l,u){this._setPath(l,Le(l._parts,u))},_updateCircle:function(l){var u=l._point,g=Math.max(Math.round(l._radius),1),v=Math.max(Math.round(l._radiusY),1)||g,S="a"+g+","+v+" 0 1,0 ",A=l._empty()?"M0 0":"M"+(u.x-g)+","+u.y+S+g*2+",0 "+S+-g*2+",0 ";this._setPath(l,A)},_setPath:function(l,u){l._path.setAttribute("d",u)},_bringToFront:function(l){Ti(l._path)},_bringToBack:function(l){Li(l._path)}});Pe.vml&&al.include(TC);function Vb(l){return Pe.svg||Pe.vml?new al(l):null}We.include({getRenderer:function(l){var u=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var u=this._paneRenderers[l];return u===void 0&&(u=this._createRenderer({pane:l}),this._paneRenderers[l]=u),u},_createRenderer:function(l){return this.options.preferCanvas&&Ub(l)||Vb(l)}});var Hb=Oi.extend({initialize:function(l,u){Oi.prototype.initialize.call(this,this._boundsToLatLngs(l),u)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=fe(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function LC(l,u){return new Hb(l,u)}al.create=Ec,al.pointsToPath=Le,wn.geometryToLayer=kc,wn.coordsToLatLng=Bg,wn.coordsToLatLngs=jc,wn.latLngToCoords=$g,wn.latLngsToCoords=Nc,wn.getFeature=Ri,wn.asFeature=_c,We.mergeOptions({boxZoom:!0});var Wb=Ws.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ht(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){jt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Yo(),jg(),this._startPoint=this._map.mouseEventToContainerPoint(l),Oe(document,{contextmenu:qa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=Ge("div","leaflet-zoom-box",this._container),De(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var u=new re(this._point,this._startPoint),g=u.getSize();Mt(this._box,u.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(jt(this._box),Pt(this._container,"leaflet-crosshair")),Jo(),Ng(),ht(document,{contextmenu:qa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var u=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});We.addInitHook("addHandler","boxZoom",Wb),We.mergeOptions({doubleClickZoom:!0});var qb=Ws.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var u=this._map,g=u.getZoom(),v=u.options.zoomDelta,S=l.originalEvent.shiftKey?g-v:g+v;u.options.doubleClickZoom==="center"?u.setZoom(S):u.setZoomAround(l.containerPoint,S)}});We.addInitHook("addHandler","doubleClickZoom",qb),We.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Kb=Ws.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Gn(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}De(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pt(this._map._container,"leaflet-grab"),Pt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=fe(this._map.options.maxBounds);this._offsetLimit=V(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var u=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(u),this._prunePositions(u)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,u){return l-(l-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;l.x<u.min.x&&(l.x=this._viscousLimit(l.x,u.min.x)),l.y<u.min.y&&(l.y=this._viscousLimit(l.y,u.min.y)),l.x>u.max.x&&(l.x=this._viscousLimit(l.x,u.max.x)),l.y>u.max.y&&(l.y=this._viscousLimit(l.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,u=Math.round(l/2),g=this._initialWorldOffset,v=this._draggable._newPos.x,S=(v-u+g)%l+u-g,A=(v+u+g)%l-u-g,H=Math.abs(S+g)<Math.abs(A+g)?S:A;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(l){var u=this._map,g=u.options,v=!g.inertia||l.noInertia||this._times.length<2;if(u.fire("dragend",l),v)u.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),A=(this._lastTime-this._times[0])/1e3,H=g.easeLinearity,ee=S.multiplyBy(H/A),se=ee.distanceTo([0,0]),le=Math.min(g.inertiaMaxSpeed,se),ve=ee.multiplyBy(le/se),Ie=le/(g.inertiaDeceleration*H),Be=ve.multiplyBy(-Ie/2).round();!Be.x&&!Be.y?u.fire("moveend"):(Be=u._limitOffset(Be,u.options.maxBounds),X(function(){u.panBy(Be,{duration:Ie,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});We.addInitHook("addHandler","dragging",Kb),We.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Zb=Ws.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Oe(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ht(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,u=document.documentElement,g=l.scrollTop||u.scrollTop,v=l.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(v,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var u=this._panKeys={},g=this.keyCodes,v,S;for(v=0,S=g.left.length;v<S;v++)u[g.left[v]]=[-1*l,0];for(v=0,S=g.right.length;v<S;v++)u[g.right[v]]=[l,0];for(v=0,S=g.down.length;v<S;v++)u[g.down[v]]=[0,l];for(v=0,S=g.up.length;v<S;v++)u[g.up[v]]=[0,-1*l]},_setZoomDelta:function(l){var u=this._zoomKeys={},g=this.keyCodes,v,S;for(v=0,S=g.zoomIn.length;v<S;v++)u[g.zoomIn[v]]=l;for(v=0,S=g.zoomOut.length;v<S;v++)u[g.zoomOut[v]]=-l},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ht(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=l.keyCode,g=this._map,v;if(u in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(v=this._panKeys[u],l.shiftKey&&(v=J(v).multiplyBy(3)),g.options.maxBounds&&(v=g._limitOffset(J(v),g.options.maxBounds)),g.options.worldCopyJump){var S=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(v)));g.panTo(S)}else g.panBy(v)}else if(u in this._zoomKeys)g.setZoom(g.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;qa(l)}}});We.addInitHook("addHandler","keyboard",Zb),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Gb=Ws.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ht(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var u=bb(l),g=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var v=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),v),qa(l)},_performZoom:function(){var l=this._map,u=l.getZoom(),g=this._map.options.zoomSnap||0;l._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,A=g?Math.ceil(S/g)*g:S,H=l._limitZoom(u+(this._delta>0?A:-A))-u;this._delta=0,this._startTime=null,H&&(l.options.scrollWheelZoom==="center"?l.setZoom(u+H):l.setZoomAround(this._lastMousePos,u+H))}});We.addInitHook("addHandler","scrollWheelZoom",Gb);var MC=600;We.mergeOptions({tapHold:Pe.touchNative&&Pe.safari&&Pe.mobile,tapTolerance:15});var Yb=Ws.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ht(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var u=l.touches[0];this._startPos=this._newPos=new R(u.clientX,u.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Oe(document,"touchend",Xt),Oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),MC),Oe(document,"touchend touchcancel contextmenu",this._cancel,this),Oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){ht(document,"touchend",Xt),ht(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),ht(document,"touchend touchcancel contextmenu",this._cancel,this),ht(document,"touchmove",this._onMove,this)},_onMove:function(l){var u=l.touches[0];this._newPos=new R(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,u){var g=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});g._simulated=!0,u.target.dispatchEvent(g)}});We.addInitHook("addHandler","tapHold",Yb),We.mergeOptions({touchZoom:Pe.touch,bounceAtZoomLimits:!0});var Jb=Ws.extend({addHooks:function(){De(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pt(this._map._container,"leaflet-touch-zoom"),ht(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var u=this._map;if(!(!l.touches||l.touches.length!==2||u._animatingZoom||this._zooming)){var g=u.mouseEventToContainerPoint(l.touches[0]),v=u.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(g.add(v)._divideBy(2))),this._startDist=g.distanceTo(v),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend touchcancel",this._onTouchEnd,this),Xt(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var u=this._map,g=u.mouseEventToContainerPoint(l.touches[0]),v=u.mouseEventToContainerPoint(l.touches[1]),S=g.distanceTo(v)/this._startDist;if(this._zoom=u.getScaleZoom(S,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&S<1||this._zoom>u.getMaxZoom()&&S>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var A=g._add(v)._divideBy(2)._subtract(this._centerPoint);if(S===1&&A.x===0&&A.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(A),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var H=o(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=X(H,this,!0),Xt(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),ht(document,"touchmove",this._onTouchMove,this),ht(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});We.addInitHook("addHandler","touchZoom",Jb),We.BoxZoom=Wb,We.DoubleClickZoom=qb,We.Drag=Kb,We.Keyboard=Zb,We.ScrollWheelZoom=Gb,We.TapHold=Yb,We.TouchZoom=Jb,r.Bounds=re,r.Browser=Pe,r.CRS=xe,r.Canvas=$b,r.Circle=zg,r.CircleMarker=wc,r.Class=U,r.Control=Ss,r.DivIcon=Fb,r.DivOverlay=qs,r.DomEvent=J4,r.DomUtil=G4,r.Draggable=Gn,r.Evented=F,r.FeatureGroup=bn,r.GeoJSON=wn,r.GridLayer=sl,r.Handler=Ws,r.Icon=Ai,r.ImageOverlay=Sc,r.LatLng=be,r.LatLngBounds=ae,r.Layer=Cs,r.LayerGroup=Mi,r.LineUtil=cC,r.Map=We,r.Marker=vc,r.Mixin=nC,r.Path=Yn,r.Point=R,r.PolyUtil=aC,r.Polygon=Oi,r.Polyline=vn,r.Popup=Cc,r.PosAnimation=vb,r.Projection=uC,r.Rectangle=Hb,r.Renderer=kn,r.SVG=al,r.SVGOverlay=Db,r.TileLayer=Di,r.Tooltip=Pc,r.Transformation=ie,r.Util=D,r.VideoOverlay=Rb,r.bind=o,r.bounds=V,r.canvas=Ub,r.circle=bC,r.circleMarker=yC,r.control=el,r.divIcon=PC,r.extend=a,r.featureGroup=fC,r.geoJSON=Ob,r.geoJson=kC,r.gridLayer=EC,r.icon=pC,r.imageOverlay=jC,r.latLng=z,r.latLngBounds=fe,r.layerGroup=gC,r.map=X4,r.marker=xC,r.point=J,r.polygon=wC,r.polyline=vC,r.popup=SC,r.rectangle=LC,r.setOptions=k,r.stamp=c,r.svg=Vb,r.svgOverlay=_C,r.tileLayer=zb,r.tooltip=CC,r.transformation=Te,r.version=n,r.videoOverlay=NC;var AC=window.L;r.noConflict=function(){return window.L=AC,this},window.L=r})})(Bp,Bp.exports);var k7=Bp.exports;const Zr=Yp(k7);delete Zr.Icon.Default.prototype._getIconUrl;Zr.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const j7=({deliveryLocation:e,deliveryAddress:t,pickupLocation:r,orderType:n="delivery"})=>{const a=_.useRef(null),i=_.useRef(null),{t:o}=pe(),d=[64.1466,-21.9426],c=[64.1466,-21.9426];return _.useEffect(()=>{if(!a.current||i.current)return;const h=Zr.map(a.current,{attributionControl:!1}).setView(e?[e.lat,e.lng]:d,13);if(Zr.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(h),i.current=h,n==="pickup")Zr.marker(c,{icon:Zr.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup('<div><div class="font-semibold"> lfng Store</div><div class="text-sm">Laugavegur 123<br/>Reykjavk 101</div></div>').addTo(h).openPopup(),h.setView(c,14);else if(n==="delivery"&&(e&&Zr.marker([e.lat,e.lng],{icon:Zr.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup('<div class="font-semibold"> Delivery Person</div>').addTo(h),t&&Zr.marker([t.latitude||d[0],t.longitude||d[1]],{icon:Zr.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup(`<div><div class="font-semibold"> Delivery Address</div>
            <div class="text-sm">${t.street||""}<br/>${t.city||""} ${t.postalCode||""}</div></div>`).addTo(h),e&&t)){const m=new Zr.FeatureGroup([Zr.marker([e.lat,e.lng]),Zr.marker([t.latitude||d[0],t.longitude||d[1]])]);h.fitBounds(m.getBounds(),{padding:[50,50]})}return setTimeout(()=>{h.invalidateSize()},100),()=>{}},[n]),s.jsxs("div",{className:"space-y-4 h-full",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(fn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:n==="pickup"?o("navigation.language")==="is"?"Pickupstasetning er merkt  kortinu hr a nean":"Pickup location is marked on the map below":o("navigation.language")==="is"?"Stasetning sendara og afhendingarheimilisfang eru sndar  kortinu":"Delivery person and delivery address locations are shown on the map"})]}),s.jsx("div",{ref:a,className:"relative w-full min-h-96 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden",style:{height:"600px"}}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[o("navigation.language")==="is"?"Kort fr":"Map by"," OpenStreetMap contributors"]})]})},N7=()=>{var k,y,b;const{t:e}=pe(),{id:t}=x2(),r=is(),n=nt(),{currentOrder:a,isLoading:i,error:o}=we(j=>j.orders),{isAuthenticated:d}=we(j=>j.auth),[c,h]=_.useState(null);_.useEffect(()=>(t&&n(zu(t)),()=>{n(yM())}),[n,t]),_.useEffect(()=>{d||r("/login")},[d,r]),_.useEffect(()=>{if(a&&a.status==="OUT_FOR_DELIVERY"){const j=setInterval(()=>{h({lat:64.1466+(Math.random()-.5)*.01,lng:-21.9426+(Math.random()-.5)*.01,timestamp:new Date().toISOString()})},5e3);return()=>clearInterval(j)}},[a]);const m=j=>{switch(j){case"PENDING":return s.jsx(Wt,{className:"w-6 h-6 text-yellow-600"});case"CONFIRMED":return s.jsx(Ue,{className:"w-6 h-6 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-6 h-6 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Cr,{className:"w-6 h-6 text-orange-600"});case"DELIVERED":return s.jsx(yt,{className:"w-6 h-6 text-green-600"});case"CANCELLED":return s.jsx(dg,{className:"w-6 h-6 text-red-600"});default:return s.jsx(Ue,{className:"w-6 h-6 text-gray-600"})}},f=j=>e("orders.statuses",j),p=j=>({COMPLETED:e("navigation.language")==="is"?"Loki":"Completed",PENDING:e("navigation.language")==="is"?" bi":"Pending",FAILED:e("navigation.language")==="is"?"Mistkst":"Failed",CANCELLED:e("navigation.language")==="is"?"Htt vi":"Cancelled"})[j]||j,w=j=>{switch(j){case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"CONFIRMED":return"bg-blue-100 text-blue-800 border-blue-200";case"PREPARING":return"bg-purple-100 text-purple-800 border-purple-200";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800 border-orange-200";case"DELIVERED":return"bg-green-100 text-green-800 border-green-200";case"CANCELLED":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=j=>new Date(j).toLocaleString();return i?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(it,{size:"large"})}):o||!a?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:e("orderDetailPage.orderNotFound")}),s.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage.orderNotFoundDesc")}),s.jsx("button",{onClick:()=>r("/orders"),className:"btn btn-primary",children:e("orderDetailPage.backToOrders")})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6 sm:py-8 md:py-12",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:[s.jsxs("button",{onClick:()=>r("/orders"),className:"flex items-center text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 mb-6 font-medium",children:[s.jsx(Us,{className:"w-5 h-5 mr-2"}),e("orderDetailPage.backToOrders")]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-700 dark:to-primary-800 px-6 sm:px-8 py-8 text-white",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:["#",a.orderNumber]}),s.jsxs("p",{className:"text-primary-100 text-sm",children:[e("orderDetailPage.created"),": ",x(a.createdAt)]})]}),s.jsxs("div",{className:`px-4 py-3 rounded-lg flex items-center space-x-2 font-semibold text-lg ${w(a.status)}`,children:[m(a.status),s.jsx("span",{children:f(a.status)})]})]})}),s.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Ue,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.orderItems")]}),s.jsx("div",{className:"space-y-6",children:a.items.map((j,N)=>s.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(ic,{product:j.product,className:"w-20 h-20 sm:w-24 sm:h-24 object-contain flex-shrink-0 bg-white dark:bg-gray-600 rounded-lg p-2",currentLanguage:e("navigation.language")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:j.product.nameIs||j.product.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:j.product.descriptionIs||j.product.description}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[e("orderDetailPage.quantity"),": ",s.jsx("span",{className:"font-bold text-gray-900 dark:text-white ml-1",children:j.quantity})]}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.price.toLocaleString()," ",e("common.currency")," ",e("orderDetailPage.each")]})]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsx("p",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:(j.price*j.quantity).toLocaleString()}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("common.currency")})]})]},N))})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Cr,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(Cr,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryMethod")]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:((k=a.shippingOption)==null?void 0:k.type)==="pickup"?e("orderDetailPage.storePickup"):e("orderDetailPage.homeDelivery")}),a.pickupTime&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[s.jsx(Wt,{className:"w-4 h-4 inline mr-1"}),e("checkoutPage.pickupTime"),": ",s.jsx("span",{className:"font-semibold",children:a.pickupTime})]})]}),a.address&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(fn,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryAddress")]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:a.address.street}),s.jsx("br",{}),s.jsxs("span",{className:"text-sm",children:[a.address.city,", ",a.address.postalCode]}),s.jsx("br",{}),s.jsx("span",{className:"text-sm",children:a.address.country})]})]}),a.deliveryPerson&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[s.jsx(Hr,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-blue-400"}),e("orderDetailPage.deliveryPerson")]}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a.deliveryPerson.fullName}),a.deliveryPerson.phone&&s.jsxs("a",{href:`tel:${a.deliveryPerson.phone}`,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center mt-2",children:[s.jsx(Ni,{className:"w-3 h-3 mr-1"}),a.deliveryPerson.phone]})]}),a.estimatedDelivery&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(Dn,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.estimatedDelivery")]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x(a.estimatedDelivery)})]}),a.deliveredAt&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsxs("h3",{className:"font-semibold text-green-900 dark:text-green-200 mb-2 flex items-center",children:[s.jsx(yt,{className:"w-4 h-4 mr-2"}),e("orderDetailPage.deliveredAt")]}),s.jsx("p",{className:"text-green-800 dark:text-green-300",children:x(a.deliveredAt)})]})]}),s.jsx("div",{children:s.jsx(j7,{deliveryLocation:c,deliveryAddress:a.address,orderType:((y=a.shippingOption)==null?void 0:y.type)||"delivery"})})]})]}),a.transaction&&s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(mn,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.paymentInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white block mb-2",children:e("orderDetailPage.paymentMethod")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a.transaction.paymentMethod})]}),s.jsxs("div",{className:`p-5 rounded-lg ${a.transaction.paymentStatus==="COMPLETED"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"}`,children:[s.jsx("span",{className:`font-semibold block mb-2 ${a.transaction.paymentStatus==="COMPLETED"?"text-green-900 dark:text-green-200":"text-yellow-900 dark:text-yellow-200"}`,children:e("orderDetailPage.status")}),s.jsx("p",{className:a.transaction.paymentStatus==="COMPLETED"?"text-green-800 dark:text-green-300 font-medium":"text-yellow-800 dark:text-yellow-300 font-medium",children:p(a.transaction.paymentStatus)})]})]})]}),a.notes&&s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-800",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(gt,{className:"w-6 h-6 mr-3 text-blue-600 dark:text-blue-400"}),e("orderDetailPage.notes")]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.notes})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:e("orders.title")}),s.jsxs("div",{className:"space-y-4 max-w-md ml-auto",children:[s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:e("orders.reorder")}),s.jsxs("span",{className:"font-medium",children:[((a.totalAmount||0)-(a.deliveryFee||0)).toLocaleString()," ",e("common.currency")]})]}),s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:((b=a.shippingOption)==null?void 0:b.type)==="pickup"?e("ordersPage.pickup"):e("ordersPage.delivery")}),s.jsx("span",{className:"font-medium",children:(a.deliveryFee||0)===0?e("common.free"):`${(a.deliveryFee||0).toLocaleString()} ${e("common.currency")}`})]}),s.jsxs("div",{className:"border-t-2 border-gray-300 dark:border-gray-600 pt-4 flex justify-between",children:[s.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("common.total")}),s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[(a.totalAmount||0).toLocaleString()," ",e("common.currency")]})]})]})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-gray-900 dark:bg-black text-white",children:[s.jsx("h2",{className:"text-xl font-bold mb-6",children:e("footer.contact")}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:e("footer.email")}),s.jsx("a",{href:"mailto:info@olfong.is",className:"text-primary-400 hover:text-primary-300 font-medium break-all",children:"info@olfong.is"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:e("footer.phone")}),s.jsx("a",{href:"tel:+3541234567",className:"text-primary-400 hover:text-primary-300 font-medium",children:"+354 123 4567"})]})]})]})]})]})]})})};var hg={},nS={L:1,M:0,Q:3,H:2},aS={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},_7=aS;function iS(e){this.mode=_7.MODE_8BIT_BYTE,this.data=e}iS.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var S7=iS,Qc=nS;function rn(e,t){this.totalCount=e,this.dataCount=t}rn.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];rn.getRSBlocks=function(e,t){var r=rn.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,a=new Array,i=0;i<n;i++)for(var o=r[i*3+0],d=r[i*3+1],c=r[i*3+2],h=0;h<o;h++)a.push(new rn(d,c));return a};rn.getRsBlockTable=function(e,t){switch(t){case Qc.L:return rn.RS_BLOCK_TABLE[(e-1)*4+0];case Qc.M:return rn.RS_BLOCK_TABLE[(e-1)*4+1];case Qc.Q:return rn.RS_BLOCK_TABLE[(e-1)*4+2];case Qc.H:return rn.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var C7=rn;function oS(){this.buffer=new Array,this.length=0}oS.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var P7=oS,Ds={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Ds.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Ds.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var tr=0;tr<8;tr++)Ds.EXP_TABLE[tr]=1<<tr;for(var tr=8;tr<256;tr++)Ds.EXP_TABLE[tr]=Ds.EXP_TABLE[tr-4]^Ds.EXP_TABLE[tr-5]^Ds.EXP_TABLE[tr-6]^Ds.EXP_TABLE[tr-8];for(var tr=0;tr<255;tr++)Ds.LOG_TABLE[Ds.EXP_TABLE[tr]]=tr;var lS=Ds,Za=lS;function oh(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}oh.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=Za.gexp(Za.glog(this.get(r))+Za.glog(e.get(n)));return new oh(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Za.glog(this.get(0))-Za.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=Za.gexp(Za.glog(e.get(n))+t);return new oh(r,0).mod(e)}};var dS=oh,hs=aS,kk=dS,E7=lS,Xn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Qt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Qt.getBCHDigit(t)-Qt.getBCHDigit(Qt.G15)>=0;)t^=Qt.G15<<Qt.getBCHDigit(t)-Qt.getBCHDigit(Qt.G15);return(e<<10|t)^Qt.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Qt.getBCHDigit(t)-Qt.getBCHDigit(Qt.G18)>=0;)t^=Qt.G18<<Qt.getBCHDigit(t)-Qt.getBCHDigit(Qt.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Qt.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case Xn.PATTERN000:return(t+r)%2==0;case Xn.PATTERN001:return t%2==0;case Xn.PATTERN010:return r%3==0;case Xn.PATTERN011:return(t+r)%3==0;case Xn.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case Xn.PATTERN101:return t*r%2+t*r%3==0;case Xn.PATTERN110:return(t*r%2+t*r%3)%2==0;case Xn.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new kk([1],0),r=0;r<e;r++)t=t.multiply(new kk([1,E7.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case hs.MODE_NUMBER:return 10;case hs.MODE_ALPHA_NUM:return 9;case hs.MODE_8BIT_BYTE:return 8;case hs.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case hs.MODE_NUMBER:return 12;case hs.MODE_ALPHA_NUM:return 11;case hs.MODE_8BIT_BYTE:return 16;case hs.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case hs.MODE_NUMBER:return 14;case hs.MODE_ALPHA_NUM:return 13;case hs.MODE_8BIT_BYTE:return 16;case hs.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var i=0,o=e.isDark(n,a),d=-1;d<=1;d++)if(!(n+d<0||t<=n+d))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||d==0&&c==0||o==e.isDark(n+d,a+c)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<t-1;n++)for(var a=0;a<t-1;a++){var h=0;e.isDark(n,a)&&h++,e.isDark(n+1,a)&&h++,e.isDark(n,a+1)&&h++,e.isDark(n+1,a+1)&&h++,(h==0||h==4)&&(r+=3)}for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(r+=40);for(var m=0,a=0;a<t;a++)for(var n=0;n<t;n++)e.isDark(n,a)&&m++;var f=Math.abs(100*m/t/t-50)/5;return r+=f*10,r}},I7=Qt,T7=S7,cS=C7,uS=P7,$a=I7,L7=dS;function nn(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var os=nn.prototype;os.addData=function(e){var t=new T7(e);this.dataList.push(t),this.dataCache=null};os.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};os.getModuleCount=function(){return this.moduleCount};os.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=cS.getRSBlocks(e,this.errorCorrectLevel),r=new uS,n=0,a=0;a<t.length;a++)n+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var i=this.dataList[a];r.put(i.mode,4),r.put(i.getLength(),$a.getLengthInBits(i.mode,e)),i.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};os.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=nn.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};os.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)};os.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=$a.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t};os.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*a,d=0;d<this.modules[i].length;d++){var c=d*a,h=this.modules[i][d];h&&(n.beginFill(0,100),n.moveTo(c,o),n.lineTo(c+a,o),n.lineTo(c+a,o+a),n.lineTo(c,o+a),n.endFill())}return n};os.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};os.setupPositionAdjustPattern=function(){for(var e=$a.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],a=e[r];if(this.modules[n][a]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[n+i][a+o]=!0:this.modules[n+i][a+o]=!1}};os.setupTypeNumber=function(e){for(var t=$a.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};os.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=$a.getBCHTypeInfo(r),a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(var a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e};os.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var d=0;d<2;d++)if(this.modules[n][o-d]==null){var c=!1;i<e.length&&(c=(e[i]>>>a&1)==1);var h=$a.getMask(t,n,o-d);h&&(c=!c),this.modules[n][o-d]=c,a--,a==-1&&(i++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};nn.PAD0=236;nn.PAD1=17;nn.createData=function(e,t,r){for(var n=cS.getRSBlocks(e,t),a=new uS,i=0;i<r.length;i++){var o=r[i];a.put(o.mode,4),a.put(o.getLength(),$a.getLengthInBits(o.mode,e)),o.write(a)}for(var d=0,i=0;i<n.length;i++)d+=n[i].dataCount;if(a.getLengthInBits()>d*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+d*8+")");for(a.getLengthInBits()+4<=d*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=d*8||(a.put(nn.PAD0,8),a.getLengthInBits()>=d*8));)a.put(nn.PAD1,8);return nn.createBytes(a,n)};nn.createBytes=function(e,t){for(var r=0,n=0,a=0,i=new Array(t.length),o=new Array(t.length),d=0;d<t.length;d++){var c=t[d].dataCount,h=t[d].totalCount-c;n=Math.max(n,c),a=Math.max(a,h),i[d]=new Array(c);for(var m=0;m<i[d].length;m++)i[d][m]=255&e.buffer[m+r];r+=c;var f=$a.getErrorCorrectPolynomial(h),p=new L7(i[d],f.getLength()-1),w=p.mod(f);o[d]=new Array(f.getLength()-1);for(var m=0;m<o[d].length;m++){var x=m+w.getLength()-o[d].length;o[d][m]=x>=0?w.get(x):0}}for(var k=0,m=0;m<t.length;m++)k+=t[m].totalCount;for(var y=new Array(k),b=0,m=0;m<n;m++)for(var d=0;d<t.length;d++)m<i[d].length&&(y[b++]=i[d][m]);for(var m=0;m<a;m++)for(var d=0;d<t.length;d++)m<o[d].length&&(y[b++]=o[d][m]);return y};var M7=nn,Dy={};Object.defineProperty(Dy,"__esModule",{value:!0});var A7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O7=Py,ms=mS(O7),hS=_,eu=mS(hS);function mS(e){return e&&e.__esModule?e:{default:e}}function R7(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var D7={bgColor:ms.default.oneOfType([ms.default.object,ms.default.string]).isRequired,bgD:ms.default.string.isRequired,fgColor:ms.default.oneOfType([ms.default.object,ms.default.string]).isRequired,fgD:ms.default.string.isRequired,size:ms.default.number.isRequired,title:ms.default.string,viewBoxSize:ms.default.number.isRequired,xmlns:ms.default.string},Fy=(0,hS.forwardRef)(function(e,t){var r=e.bgColor,n=e.bgD,a=e.fgD,i=e.fgColor,o=e.size,d=e.title,c=e.viewBoxSize,h=e.xmlns,m=h===void 0?"http://www.w3.org/2000/svg":h,f=R7(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return eu.default.createElement("svg",A7({},f,{height:o,ref:t,viewBox:"0 0 "+c+" "+c,width:o,xmlns:m}),d?eu.default.createElement("title",null,d):null,eu.default.createElement("path",{d:n,fill:r}),eu.default.createElement("path",{d:a,fill:i}))});Fy.displayName="QRCodeSvg";Fy.propTypes=D7;Dy.default=Fy;Object.defineProperty(hg,"__esModule",{value:!0});hg.QRCode=void 0;var F7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z7=Py,_n=lc(z7),B7=nS,$7=lc(B7),U7=M7,V7=lc(U7),gS=_,H7=lc(gS),W7=Dy,q7=lc(W7);function lc(e){return e&&e.__esModule?e:{default:e}}function K7(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var Z7={bgColor:_n.default.oneOfType([_n.default.object,_n.default.string]),fgColor:_n.default.oneOfType([_n.default.object,_n.default.string]),level:_n.default.string,size:_n.default.number,value:_n.default.string.isRequired},mg=(0,gS.forwardRef)(function(e,t){var r=e.bgColor,n=r===void 0?"#FFFFFF":r,a=e.fgColor,i=a===void 0?"#000000":a,o=e.level,d=o===void 0?"L":o,c=e.size,h=c===void 0?256:c,m=e.value,f=K7(e,["bgColor","fgColor","level","size","value"]),p=new V7.default(-1,$7.default[d]);p.addData(m),p.make();var w=p.modules;return H7.default.createElement(q7.default,F7({},f,{bgColor:n,bgD:w.map(function(x,k){return x.map(function(y,b){return y?"":"M "+b+" "+k+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:w.map(function(x,k){return x.map(function(y,b){return y?"M "+b+" "+k+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:h,viewBoxSize:w.length}))});hg.QRCode=mg;mg.displayName="QRCode";mg.propTypes=Z7;var G7=hg.default=mg;const Y7=({order:e,settings:t,template:r="modern",paperSize:n="80mm",showBarcode:a=!0,showQrCode:i=!0,className:o=""})=>{var y;const d=b=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(b),c=b=>new Intl.DateTimeFormat("is-IS",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(b)),h=()=>t.companyNameIs||t.companyName,m=()=>t.companyAddressIs||t.companyAddress,f=()=>t.footerTextIs||t.footerText,p=()=>t.fromNameIs||t.fromName,w=()=>(t.logoInversion||"none")==="always"?{filter:"invert(1)"}:{},x=()=>t.logoUrl?t.logoUrl.startsWith("http")?t.logoUrl:`${"http://192.168.8.62:5000/api".replace("/api","")}${t.logoUrl}`:null,k=()=>t.useGradient&&t.headerGradient?{background:t.headerGradient,color:"white"}:{backgroundColor:t.headerColor||"#1e40af",color:"white"};return s.jsxs("div",{className:`receipt receipt-${r} receipt-${n} ${o}`,style:{"--receipt-header-color":t.headerColor||"#1e40af","--receipt-accent-color":t.accentColor||"#3b82f6"},children:[s.jsxs("div",{className:"header",style:k(),children:[x()&&s.jsx("div",{className:"mb-2 flex justify-center",children:s.jsx("img",{src:x(),alt:h(),className:"h-12",style:{maxHeight:"48px",...w()}})}),!x()&&s.jsx("div",{className:"company-name",style:{color:"white"},children:h()}),m()&&s.jsx("div",{className:"company-details",children:m()}),t.companyPhone&&s.jsx("div",{className:"company-details",children:t.companyPhone}),t.companyEmail&&s.jsx("div",{className:"company-details",children:t.companyEmail}),t.companyWebsite&&s.jsx("div",{className:"company-details",children:t.companyWebsite}),t.taxId&&s.jsxs("div",{className:"company-details",children:["VSK nr.",": ",t.taxId]})]}),s.jsxs("div",{className:"content",children:[s.jsxs("div",{className:"order-info",children:[s.jsxs("div",{className:"order-number",children:["Pntun",": #",e.orderNumber]}),s.jsxs("div",{className:"order-details",children:["Dagsetning",": ",c(e.createdAt)]}),e.customer&&s.jsxs("div",{className:"order-details",children:["Viskiptavinur",": ",e.customer.name]}),e.deliveryMethod&&s.jsxs("div",{className:"order-details",children:["Afhendingarafer",": ",e.deliveryMethod==="PICKUP"?"Skja  verslun":"Heimsending"]}),e.deliveryMethod==="PICKUP"&&e.pickupTime&&s.jsxs("div",{className:"order-details",children:["Afhendingartmi",": ",e.pickupTime]}),e.deliveryAddress&&s.jsxs("div",{className:"order-details",children:["Heimilisfang",": ",e.deliveryAddress.address]}),e.paymentMethod&&s.jsxs("div",{className:"order-details",children:["Greisla",": ",e.paymentMethod]})]}),s.jsx("div",{className:"items",children:(y=e.orderItems)==null?void 0:y.map((b,j)=>{var N,C;return s.jsxs("div",{className:"item",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"item-name",children:(N=b.product)==null?void 0:N.name}),b.quantity>1&&s.jsxs("div",{className:"item-details",children:[b.quantity," x ",d(((C=b.product)==null?void 0:C.price)||0)]}),b.notes&&s.jsxs("div",{className:"item-details",children:["Athugasemd",": ",b.notes]})]}),s.jsx("div",{className:"item-price",children:d(b.totalPrice||0)})]},j)})}),s.jsxs("div",{className:"totals",children:[s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["Undaneginn VSK",":"]}),s.jsx("span",{children:d(e.subtotal||0)})]}),e.shippingCost>0&&s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["Sendingarkostnaur",":"]}),s.jsx("span",{children:d(e.shippingCost)})]}),e.taxAmount>0&&s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["VSK",":"]}),s.jsx("span",{children:d(e.taxAmount)})]}),s.jsxs("div",{className:"total-line final",children:[s.jsxs("span",{children:["Samtals",":"]}),s.jsx("span",{children:d(e.totalAmount||0)})]})]}),(a||i)&&s.jsxs("div",{className:"codes",children:[i&&s.jsxs("div",{className:"qr-code",children:[s.jsx("div",{className:"text-xs mb-1",children:"QR ki"}),s.jsx("div",{className:"w-20 h-20 mx-auto flex items-center justify-center",children:s.jsx(G7,{value:`${window.location.origin}/orders/${e.id}`,size:80,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]}),a&&s.jsxs("div",{className:"barcode",children:[s.jsx("div",{className:"text-xs mb-1",children:"Strikamerki"}),s.jsx("div",{className:"h-8 bg-gray-200 mx-auto flex items-center justify-center text-xs",children:"||||||||||||||||||||"})]})]}),s.jsxs("div",{className:"footer",children:[f()&&s.jsx("div",{className:"footer-text",children:f()}),s.jsxs("div",{className:"company-info",children:[p()," - ",m()]}),s.jsxs("div",{className:"company-info",children:[t.companyPhone," - ",t.companyEmail]})]})]})]})},fS=({isOpen:e,onClose:t,order:r,onEmailSent:n})=>{var C;const{t:a}=pe(),i=nt(),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,f]=_.useState(null),[p,w]=_.useState("screen"),{settings:x,isLoading:k}=we(P=>P.receiptSettings),{user:y}=we(P=>P.auth);_.useEffect(()=>{e&&!x&&i(yo())},[e,x,i]);const b=()=>{w("print"),setTimeout(()=>{window.print(),w("screen")},100)},j=async()=>{if(r!=null&&r.id){d(!0);try{const P=await fetch(`/api/orders/${r.id}/receipt/pdf`,{headers:{Authorization:`Bearer ${y==null?void 0:y.token}`}});if(P.ok){const E=await P.blob(),T=window.URL.createObjectURL(E),O=document.createElement("a");O.href=T,O.download=`receipt-${r.orderNumber}.pdf`,document.body.appendChild(O),O.click(),window.URL.revokeObjectURL(T),document.body.removeChild(O)}else throw new Error("Failed to generate PDF")}catch(P){console.error("Error downloading PDF:",P),alert(a("receipts.pdfDownloadError"))}finally{d(!1)}}},N=async()=>{var P;if(!(r!=null&&r.id)||!((P=r==null?void 0:r.customer)!=null&&P.email)){alert(a("receipts.noEmailAddress"));return}d(!0),f(null);try{const E=await i(Uu({orderId:r.id,email:r.customer.email})).unwrap();h(!0),n&&n(E)}catch(E){console.error("Error sending email:",E),f(E.message||a("receipts.emailSendError"))}finally{d(!1)}};return!e||!r?null:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50 dark:bg-black/70",onClick:t}),s.jsxs("div",{className:"relative w-full max-w-4xl h-[90vh] bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden px-4 sm:px-6 py-5 sm:py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a("receipts.receiptForOrder")," #",r.orderNumber]}),s.jsx("button",{onClick:t,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(ut,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[s.jsxs("button",{onClick:b,className:"btn btn-outline flex items-center gap-2",disabled:o,children:[s.jsx(Ny,{className:"w-4 h-4"}),a("receipts.print")]}),s.jsxs("button",{onClick:j,disabled:o,className:"btn btn-outline flex items-center gap-2",children:[s.jsx(gn,{className:"w-4 h-4"}),a(o?"common.loading":"receipts.downloadPdf")]}),((C=r.customer)==null?void 0:C.email)&&s.jsxs("button",{onClick:N,disabled:o||c,className:`btn flex items-center gap-2 ${c?"btn-secondary":"btn-primary"}`,children:[s.jsx(Yr,{className:"w-4 h-4"}),a(o?"common.sending":c?"receipts.emailSent":"receipts.emailReceipt")]})]}),m&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded",children:m}),c&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-700 text-green-700 dark:text-green-300 rounded",children:a("receipts.emailSentSuccess")}),s.jsx("div",{className:"flex flex-col flex-1 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-900/50 overflow-hidden",children:k?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:a("common.loading")})}):x?s.jsx("div",{className:"flex-1 overflow-y-auto flex items-center justify-center p-4 w-full",children:s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Y7,{order:r,settings:x,template:x.template,paperSize:x.paperSize,showBarcode:x.showBarcode,showQrCode:x.showQrCode,className:p==="print"?"receipt-print":""})})}):s.jsx("div",{className:"flex-1 flex items-center justify-center overflow-y-auto p-4",children:s.jsxs("div",{className:"max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:a("receipts.settingsNotFound")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:a("receipts.configureInSettings")})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[s.jsx("div",{className:"font-semibold text-red-900 dark:text-red-200 mb-3 text-sm",children:"Required Configuration:"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Name (English & Icelandic)"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Address (English & Icelandic)"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Phone Number"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Email Address"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Header Color"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Paper Size Selection"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-red-200 dark:border-red-800",children:s.jsxs("a",{href:"/admin/settings/receipts",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 font-medium text-sm",children:[s.jsx("span",{children:"Configure Receipt Settings"}),s.jsx("span",{children:""})]})})]})]})})})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 px-4 sm:px-6 py-3 sm:py-4 flex justify-end gap-2",children:s.jsx("button",{onClick:t,className:"btn btn-secondary dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:a("common.close")})})]})]})},J7=()=>{const{t:e}=pe(),t=nt(),{user:r,isAuthenticated:n}=we(re=>re.auth),{orders:a,pagination:i,filters:o,isLoading:d}=we(re=>re.orders),{addresses:c,isLoading:h}=we(re=>re.addresses),[m,f]=_.useState(!1),[p,w]=_.useState(null),[x,k]=_.useState(!1),[y,b]=_.useState(!1),[j,N]=_.useState(null),{register:C,handleSubmit:P,formState:{errors:E},reset:T}=_i({defaultValues:{fullName:"",email:"",phone:""}}),{register:O,handleSubmit:I,formState:{errors:W},reset:X}=_i({defaultValues:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1}});_.useEffect(()=>{n&&t(td())},[t,n]),_.useEffect(()=>{n&&t(fo(o))},[t,n,o]),_.useEffect(()=>{r&&T({fullName:r.fullName||"",email:r.email||"",phone:r.phone||""})},[r,T]),_.useEffect(()=>{X(p?{street:p.street||"",city:p.city||"",postalCode:p.postalCode||"",country:p.country||"Iceland",isDefault:p.isDefault||!1}:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1})},[p,X]);const B=async re=>{try{await t(Fu(re)).unwrap(),K.success(e("profile.updateSuccess")),k(!1)}catch(V){K.error(V.message||e("profile.updateError"))}},D=async re=>{try{p?(await t(ah({id:p.id,...re})).unwrap(),K.success(e("addresses.edit"))):(await t(rd(re)).unwrap(),K.success(e("addresses.add"))),f(!1),w(null)}catch(V){K.error(V.message||e("common.error"))}},U=re=>{w(re),f(!0)},Z=async re=>{if(window.confirm(e("addresses.delete")+"?"))try{await t(ih(re)).unwrap(),K.success(e("common.success"))}catch(V){K.error(V.message||e("common.error"))}},G=()=>{t(yy()),K.success(e("auth.logout"))},F=re=>{switch(re){case"PENDING":return s.jsx(Wt,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return s.jsx(Ue,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Cr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(yt,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return s.jsx(dg,{className:"w-5 h-5 text-red-600"});default:return s.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},R=re=>e("orders.statuses",re),q=re=>{switch(re){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},J=re=>{t(xM({status:re===o.status?"":re}))};return n?h||d?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(it,{size:"large"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("profile.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("profilePage.manageInfo")})]}),s.jsx("button",{onClick:G,className:"inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 mt-4 sm:mt-0 whitespace-nowrap flex-shrink-0",children:e("profilePage.logout")})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[s.jsx(Hr,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e("profilePage.personalInformation")})]}),s.jsx("button",{onClick:()=>k(!x),className:"btn btn-outline btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:x?s.jsxs(s.Fragment,{children:[s.jsx(ut,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.cancel")})]}):s.jsxs(s.Fragment,{children:[s.jsx(pn,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.edit")})]})})]}),x?s.jsxs("form",{onSubmit:P(B),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.fullName")}),s.jsx("input",{...C("fullName"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.fullName")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.email")}),s.jsx("input",{type:"email",...C("email",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.email")}),E.email&&s.jsxs("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:[e("profilePage.email")," ",e("common.error")]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.phone")}),s.jsx("input",{type:"tel",...C("phone"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.phone")})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>k(!1),className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:s.jsx("span",{children:e("common.cancel")})}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[s.jsx(_r,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.save")})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Hr,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.name")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.fullName)||e("profilePage.notSpecified")})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Yr,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.email")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.email)||e("profilePage.notSpecified")}),!(r!=null&&r.email)&&s.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-1",children:[" ",e("profilePage.emailMissingWarning")]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Ni,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.phone")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.phone)||e("profilePage.notSpecified")})]})]})]})]})}),s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[s.jsx(fn,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e("profilePage.addresses")})]}),s.jsxs("button",{onClick:()=>{w(null),f(!0)},className:"btn btn-primary btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:[s.jsx(vr,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("profilePage.newAddress")})]})]}),c.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(fn,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("profilePage.noAddresses")})]}):s.jsx("div",{className:"space-y-4",children:c.map(re=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:re.street}),re.isDefault&&s.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400 text-xs rounded-full whitespace-nowrap flex-shrink-0",children:e("profilePage.default")})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-words",children:[re.city,", ",re.postalCode,s.jsx("br",{}),re.country]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>U(re),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-200",children:s.jsx(pn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Z(re.id),className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-200",children:s.jsx(ar,{className:"w-4 h-4"})})]})]})},re.id))}),c.length===0&&s.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[" ",e("profilePage.addressMissingWarning")]})})]})}),s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Ue,{className:"w-5 h-5 mr-2"}),e("orders.title")]}),s.jsxs("select",{value:o.status,onChange:re=>J(re.target.value),className:"input w-auto min-w-[150px] dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:e("ordersPage.allOrders")}),s.jsx("option",{value:"PENDING",children:e("ordersPage.pending")}),s.jsx("option",{value:"CONFIRMED",children:e("ordersPage.confirmed")}),s.jsx("option",{value:"OUT_FOR_DELIVERY",children:e("ordersPage.outForDelivery")}),s.jsx("option",{value:"DELIVERED",children:e("ordersPage.delivered")})]})]}),a.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ue,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("ordersPage.noOrders")})]}):s.jsx("div",{className:"space-y-4",children:a.map(re=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2 flex-wrap",children:[s.jsxs("h3",{className:"text-md font-semibold text-gray-900 dark:text-white",children:[e("orderDetailPage.order")," #",re.orderNumber]}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${q(re.status)}`,children:[F(re.status),s.jsx("span",{children:R(re.status)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.date")}),s.jsx("span",{className:"truncate block",children:new Date(re.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.total")}),s.jsxs("span",{className:"truncate block",children:[re.totalAmount.toLocaleString()," ",e("common.currency")]})]}),s.jsxs("div",{className:"min-w-0 sm:col-span-2 xl:col-span-1",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.delivery")}),s.jsx("span",{className:"truncate block",children:re.deliveryMethod==="PICKUP"?e("ordersPage.pickup"):e("ordersPage.homeDelivery")})]})]})]}),s.jsx("button",{onClick:()=>{N(re),b(!0)},className:"flex-shrink-0 p-2 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-600 text-white rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",title:e("receipts.viewReceipt"),children:s.jsx(_y,{className:"w-5 h-5"})})]})},re.id))}),i.pages>1&&s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(fo({...o,page:i.page-1})),disabled:i.page===1,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage.previous")}),s.jsxs("span",{className:"px-3 py-1 text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap",children:[e("ordersPage.page")," ",i.page," ",e("ordersPage.of")," ",i.pages]}),s.jsx("button",{onClick:()=>t(fo({...o,page:i.page+1})),disabled:i.page===i.pages,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage.next")})]})})]})})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e(p?"profilePage.editAddress":"profilePage.newAddressTitle")}),s.jsx("button",{onClick:()=>{f(!1),w(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ut,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:I(D),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.street")," *"]}),s.jsx("input",{...O("street",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.street")}),W.street&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.streetRequired")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.city")," *"]}),s.jsx("input",{...O("city",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.city")}),W.city&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.cityRequired")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.postalCode")," *"]}),s.jsx("input",{...O("postalCode",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.postalCode")}),W.postalCode&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.postalCodeRequired")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.country")," *"]}),s.jsx("input",{...O("country",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.country")}),W.country&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("navigation.language")==="is"?"Land er nausynlegt":"Country is required"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...O("isDefault"),className:"rounded"}),s.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("profilePage.setAsDefaultAddress")})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{f(!1),w(null)},className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:s.jsx("span",{children:e("common.cancel")})}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[s.jsx(_r,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e(p?"adminProductsPage.update":"adminProductsPage.create")})]})]})]})]})}),s.jsx(fS,{isOpen:y,onClose:()=>b(!1),order:j,onEmailSent:()=>{K.success(e("receipts.emailSentSuccess"))}})]})}):s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("profile.title")}),s.jsxs("div",{className:"card p-8",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("navigation.language")==="is"?"Skru ig inn":"Please log in"}),s.jsx("p",{className:"text-gray-600 mb-6",children:e("navigation.language")==="is"?" verur a skr ig inn til a skoa prflinn inn.":"You must be logged in to view your profile."})]})]})})})};function X7(){throw new Error("Kenni OIDC not configured")}function Q7(e){const t=e.startsWith("#")?e.substring(1):e,r=new URLSearchParams(t),n=r.get("id_token"),a=r.get("state"),i=r.get("error"),o=r.get("error_description");return{idToken:n,state:a,error:i,errorDescription:o}}const eO=()=>{var P,E;const{t:e}=pe(),t=is(),r=Ir(),n=nt(),{isAuthenticated:a,isLoading:i}=we(T=>T.auth),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,f]=_.useState(""),[p,w]=_.useState({email:"",password:""}),x=((E=(P=r.state)==null?void 0:P.from)==null?void 0:E.pathname)||"/";_.useEffect(()=>{n(gM())},[n]),_.useEffect(()=>{a&&!i&&t(x,{replace:!0})},[a,i,t,x]);const k=T=>{T.preventDefault();try{const O=X7();window.location.href=O}catch(O){console.error(O)}},y=T=>{T.preventDefault(),d(!o)},b=async T=>{if(T.preventDefault(),!!m.trim())try{await n(Ru({phone:m})).unwrap(),t(x,{replace:!0})}catch(O){console.error("Dummy login failed:",O)}},j=T=>{T.preventDefault(),h(!c)},N=async T=>{if(T.preventDefault(),!(!p.email.trim()||!p.password.trim()))try{await n(Ul({username:"test_customer",password:p.password})).unwrap(),t(x,{replace:!0})}catch(O){console.error("Test login failed:",O)}},C=T=>{w({...p,[T.target.name]:T.target.value})};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth.login")}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:e("authExtra.loginWithElectronicIdDescription")})]}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("button",{onClick:k,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-primary-600 text-base font-semibold rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("auth.login")}),s.jsx("span",{className:"text-sm opacity-90",children:e("authExtra.loginWithElectronicId")})]}),s.jsxs("button",{onClick:y,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-orange-600 text-base font-semibold rounded-lg text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("login.testLogin")}),s.jsx("span",{className:"text-sm opacity-90",children:e("login.dummyElectronicId")})]}),s.jsxs("button",{onClick:j,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-green-600 text-base font-semibold rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("login.automatedTestLogin")}),s.jsx("span",{className:"text-sm opacity-90",children:e("login.emailPasswordTests")})]}),o&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.insertPhoneNumber")}),s.jsx("input",{id:"phone",type:"tel",value:m,onChange:T=>f(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterPhoneNumber")})]}),s.jsx("button",{onClick:b,disabled:!m.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e(i?"login.loggingIn":"login.loginWithPhone")})]}),c&&s.jsxs("form",{onSubmit:N,className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.email")}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:p.email,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterEmailAddress")})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.password")}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:p.password,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterPassword")})]}),s.jsx("button",{type:"submit",disabled:!p.email.trim()||!p.password.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e(i?"login.loggingIn":"login.loginWithEmail")})]})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(je,{to:"/admin-login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("authExtra.adminDeliveryLogin")})})]})})},tO=()=>{const e=nt(),t=is(),r=Ir();return _.useEffect(()=>{const{idToken:n,state:a,error:i}=Q7(r.hash),o=sessionStorage.getItem("kenni_oidc_state");if(sessionStorage.removeItem("kenni_oidc_state"),i){t("/login");return}if(!n||!a||a!==o){t("/login");return}e(Ou({idToken:n})).unwrap().then(()=>t("/")).catch(()=>t("/login"))},[e,t,r.hash]),s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(it,{size:"large"})})},rO=()=>{var w,x;const{t:e}=pe(),t=nt(),r=is(),n=Ir(),{isLoading:a,error:i}=we(k=>k.auth),[o,d]=_.useState({username:"",password:""}),[c,h]=_.useState(!1),m=((x=(w=n.state)==null?void 0:w.from)==null?void 0:x.pathname)||"/admin",f=k=>{d({...o,[k.target.name]:k.target.value})},p=async k=>{k.preventDefault();const y=await t(Ul(o));if(y.type==="auth/login/fulfilled"){const j=y.payload.user.role==="ADMIN"?"/admin":m;r(j,{replace:!0})}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth.loginStaff")})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"label",children:e("auth.username")}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:o.username,onChange:f,className:"input",placeholder:e("auth.username"),"data-testid":"admin-username"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"label",children:e("auth.password")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:c?"text":"password",required:!0,value:o.password,onChange:f,className:"input pr-10",placeholder:e("auth.password"),"data-testid":"admin-password"}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>h(!c),children:c?s.jsx(Nr,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})})]})]})]}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:i}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200","data-testid":"admin-login-button",children:e("auth.login")})}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(je,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("common.back")})})]})]})})},sd=ye("dashboard/fetchStats",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/dashboard/stats")).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch dashboard statistics")}}),Vf={stats:{totalRevenue:0,totalOrders:0,totalProducts:0,totalCustomers:0,revenueGrowth:0,orderGrowth:0,productGrowth:0,customerGrowth:0},recentOrders:[],orderStatusCounts:{pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0},topProducts:[],isLoading:!1,error:null},sO=Wr({name:"dashboard",initialState:Vf,reducers:{clearError:e=>{e.error=null},updateOrderStatus:(e,t)=>{const{orderId:r,status:n}=t.payload,a=e.recentOrders.find(i=>i.id===r);a&&(a.status=n),n==="delivered"?(e.orderStatusCounts.delivered+=1,e.orderStatusCounts.pending-=1):n==="cancelled"&&(e.orderStatusCounts.cancelled+=1,e.orderStatusCounts.pending-=1)}},extraReducers:e=>{e.addCase(sd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(sd.fulfilled,(t,r)=>{t.isLoading=!1;const n=r.payload.data||r.payload;t.stats=n.stats||Vf.stats,t.recentOrders=n.recentOrders||[],t.orderStatusCounts=n.orderStatusCounts||Vf.orderStatusCounts,t.topProducts=n.topProducts||[]}).addCase(sd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),nO=sO.reducer,Ne=({children:e,showSidebar:t=!0})=>{const{t:r}=pe(),[n,a]=_.useState(()=>{const o=localStorage.getItem("adminSidebarCollapsed");return o?JSON.parse(o):!1}),i=o=>{a(o)};return t?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"hidden lg:flex lg:flex-1",children:[s.jsx("div",{className:"fixed top-16 bottom-0 left-0 z-10 flex-shrink-0",children:s.jsx("div",{className:"m-4 lg:m-0 lg:mt-0 lg:mb-0 lg:pt-6",style:{height:"calc(100vh - 4rem)"},children:s.jsx(Ey,{onCollapseChange:i})})}),s.jsx("div",{className:`flex-1 flex flex-col min-w-0 transition-all duration-300 ease-in-out ${n?"lg:ml-16":"lg:ml-56"}`,children:s.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})})]}),s.jsx("div",{className:"lg:hidden flex-1 flex flex-col min-w-0",children:s.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsx("main",{className:"p-4 lg:p-6",children:e})})};Ne.propTypes={children:de.node.isRequired,showSidebar:de.bool};const pS=({user:e})=>{const{t}=pe(),r=is(),n=[{icon:Ue,label:t("adminDashboard.addProduct"),onClick:()=>r("/admin/products"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Ca,label:t("adminDashboard.manageUsers"),onClick:()=>r("/admin/customers"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Ln,label:t("adminDashboard.viewAnalytics"),onClick:()=>r("/admin/analytics"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:xo,label:t("adminDashboard.reports"),onClick:()=>r("/admin/reports"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:gn,label:t("adminDashboard.export"),onClick:()=>{alert(t("adminDashboard.export")+" - Coming soon")},className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:vr,label:t("adminDashboard.newOrder"),onClick:()=>r("/admin/orders"),className:"flex flex-col items-center justify-center p-4 bg-blue-600 hover:bg-blue-700 rounded-xl border border-blue-600 hover:border-blue-700 shadow-sm hover:shadow-lg transition-all duration-300 group"}];return s.jsxs("div",{className:"py-4 sm:py-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:t("adminDashboard.dashboardOverview")}),s.jsxs("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:[t("adminDashboard.welcomeBack")," ",(e==null?void 0:e.fullName)||(e==null?void 0:e.username)]})]})}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4",children:n.map((a,i)=>s.jsxs("button",{onClick:a.onClick,className:a.className,children:[s.jsx(a.icon,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mb-2 group-hover:text-blue-500 transition-colors"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:a.label})]},i))})]})};pS.propTypes={user:de.shape({fullName:de.string,username:de.string})};const xS=({title:e,value:t,growth:r,icon:n,color:a="blue"})=>{const{t:i}=pe();return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-1 sm:p-1.5 lg:p-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:e}),s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mt-1 sm:mt-2 truncate",children:t}),s.jsxs("div",{className:"flex items-center mt-2 sm:mt-3",children:[s.jsx(Ln,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 mr-1 flex-shrink-0"}),s.jsxs("span",{className:"text-xs sm:text-sm text-green-600 dark:text-green-400 font-medium",children:["+",r,"%"]})]})]}),s.jsx("div",{className:`p-1 sm:p-1.5 lg:p-2 rounded-lg bg-${a}-100 dark:bg-${a}-900/20 ml-2 sm:ml-3 flex-shrink-0`,children:s.jsx(n,{className:`h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 text-${a}-600 dark:text-${a}-400`})})]})})};xS.propTypes={title:de.string.isRequired,value:de.oneOfType([de.string,de.number]).isRequired,growth:de.number.isRequired,icon:de.elementType.isRequired,color:de.string};const yS=({stats:e,formatCurrency:t})=>{const{t:r}=pe(),n=[{title:r("adminDashboard.totalRevenue"),value:t(e.totalRevenue),growth:e.revenueGrowth,icon:ig,color:"green"},{title:r("adminDashboard.totalOrders"),value:e.totalOrders.toLocaleString(),growth:e.orderGrowth,icon:yr,color:"blue"},{title:r("adminDashboard.totalProducts"),value:e.totalProducts,growth:e.productGrowth,icon:Ue,color:"purple"},{title:r("adminDashboard.totalCustomers"),value:e.totalCustomers,growth:e.customerGrowth,icon:Ca,color:"indigo"}];return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 mb-6 sm:mb-8",children:n.map((a,i)=>s.jsx(xS,{title:a.title,value:a.value,growth:a.growth,icon:a.icon,color:a.color},i))})};yS.propTypes={stats:de.shape({totalRevenue:de.number.isRequired,revenueGrowth:de.number.isRequired,totalOrders:de.number.isRequired,orderGrowth:de.number.isRequired,totalProducts:de.number.isRequired,productGrowth:de.number.isRequired,totalCustomers:de.number.isRequired,customerGrowth:de.number.isRequired}).isRequired,formatCurrency:de.func.isRequired};const $p=e=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(e),aO=e=>new Date(e).toLocaleDateString("is-IS"),iO=e=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",confirmed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",preparing:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",out_for_delivery:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400",delivered:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"})[e]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",bS=e=>({pending:Wt,confirmed:yt,preparing:Ue,out_for_delivery:Ue,delivered:yt,cancelled:gt})[e]||Wt,vS=(e,t)=>({pending:t("orders.statuses.PENDING")||"Pending",confirmed:t("orders.statuses.CONFIRMED")||"Confirmed",preparing:t("orders.statuses.PREPARING")||"Preparing",out_for_delivery:t("orders.statuses.OUT_FOR_DELIVERY")||"Out for Delivery",delivered:t("orders.statuses.DELIVERED")||"Delivered",cancelled:t("orders.statuses.CANCELLED")||"Cancelled"})[e]||e,wS=({recentOrders:e,formatCurrency:t,formatDate:r})=>{const{t:n}=pe();return s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:n("adminDashboard.recentOrders")}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[s.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(lt,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),s.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(M_,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"hidden sm:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.orderId")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.customer")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.amount")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.status")}),s.jsx("th",{className:"hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:n("adminDashboard.date")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(a=>{const i=bS(a.status);return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsxs("td",{className:"hidden sm:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",a.id]}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 truncate max-w-[120px]",children:a.customer}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-gray-100",children:t(a.amount)}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${iO(a.status)}`,children:[s.jsx(i,{className:"h-3 w-3 mr-0.5"}),s.jsx("span",{className:"hidden sm:inline",children:vS(a.status,n)})]})}),s.jsx("td",{className:"hidden md:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r(a.date)})]},a.id)})})]})})]})})};wS.propTypes={recentOrders:de.arrayOf(de.shape({id:de.oneOfType([de.string,de.number]).isRequired,customer:de.string.isRequired,amount:de.number.isRequired,status:de.string.isRequired,date:de.string.isRequired})).isRequired,formatCurrency:de.func.isRequired,formatDate:de.func.isRequired};const kS=({orderStatusCounts:e})=>{const{t}=pe();return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard.orderStatus")})}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(e).map(([r,n])=>{const a=bS(r),i=Object.values(e).reduce((d,c)=>d+c,0),o=i>0?n/i*100:0;return s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-2 gap-2",children:[s.jsxs("div",{className:"flex items-center min-w-0",children:[s.jsx(a,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-3 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 capitalize truncate",children:vS(r,t)})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"flex-1 sm:w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 w-8 text-right flex-shrink-0",children:n})]})]},r)})})})]})};kS.propTypes={orderStatusCounts:de.objectOf(de.number).isRequired};const jS=({topProducts:e})=>{const{t}=pe();return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard.topProducts")})}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-3",children:e.map((r,n)=>s.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 gap-2",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:n+1})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:r.name}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.sales," ",t("adminDashboard.sales")]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:$p(r.revenue)})})]},r.id))})})]})};jS.propTypes={topProducts:de.arrayOf(de.shape({id:de.oneOfType([de.string,de.number]).isRequired,name:de.string.isRequired,sales:de.number.isRequired,revenue:de.number.isRequired})).isRequired};const oO=()=>{const{t:e}=pe();return s.jsx(Ne,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("common.loading")})]})})})},NS=({error:e,onRetry:t})=>{const{t:r}=pe();return s.jsx(Ne,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:s.jsx(gt,{className:"h-12 w-12 mx-auto"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r("common.retry")})]})})})};NS.propTypes={error:de.string.isRequired,onRetry:de.func.isRequired};const lO=()=>{const e=nt(),{user:t}=we(c=>c.auth),{stats:r,recentOrders:n,topProducts:a,orderStatusCounts:i,isLoading:o,error:d}=we(c=>c.dashboard);return _.useEffect(()=>{e(sd())},[e]),o?s.jsx(oO,{}):d?s.jsx(NS,{error:d,onRetry:()=>e(sd())}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16",children:s.jsx(pS,{user:t})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4 sm:py-6",children:[s.jsx(yS,{stats:r,formatCurrency:$p}),s.jsx(wS,{recentOrders:n,formatCurrency:$p,formatDate:aO}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[s.jsx(kS,{orderStatusCounts:i}),s.jsx(jS,{topProducts:a})]})]})})]})})},Tr=({title:e,description:t,icon:r,backUrl:n=null,actions:a=null,hasUnsavedChanges:i=!1,isSaving:o=!1,onSave:d=null})=>s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-3 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-4 sm:py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4 lg:gap-6 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[n&&s.jsx(je,{to:n,className:"flex-shrink-0 p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 mt-0.5",children:s.jsx(Us,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl font-bold text-gray-900 dark:text-white flex items-center gap-1.5 sm:gap-2 lg:gap-3 flex-wrap leading-tight",children:[r&&s.jsx(r,{className:"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsx("span",{children:e})]}),t&&s.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:t})]})]}),s.jsxs("div",{className:"flex flex-col xs:flex-row items-center justify-end gap-2 sm:gap-3 lg:gap-4 flex-shrink-0 w-full sm:w-auto",children:[d&&s.jsxs(s.Fragment,{children:[i?s.jsxs("div",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 whitespace-nowrap",children:[s.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"Unsaved Changes"})]}):s.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 whitespace-nowrap",children:[s.jsx(yt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"All Saved"})]}),s.jsxs("button",{onClick:d,disabled:o||!i,className:"inline-flex items-center px-3 sm:px-4 py-2 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 whitespace-nowrap",children:[o?s.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(_r,{className:"w-4 h-4 mr-2"}),o?"Saving...":"Save Changes"]})]}),a&&!d&&a]})]})})});Tr.propTypes={title:de.string.isRequired,description:de.string,icon:de.elementType,backUrl:de.string,actions:de.node,hasUnsavedChanges:de.bool,isSaving:de.bool,onSave:de.func};Tr.defaultProps={description:null,icon:null,backUrl:null,actions:null,hasUnsavedChanges:!1,isSaving:!1,onSave:null};const dO=({onImportProduct:e,onClose:t})=>{const{t:r}=pe(),[n,a]=_.useState(""),[i,o]=_.useState([]),[d,c]=_.useState(!1),[h,m]=_.useState([]),[f,p]=_.useState(!1),w={beer:{is:"Bjr",en:"Beer"},"red-wine":{is:"Rauvn",en:"Red wine"},"white-wine":{is:"Hvtvn",en:"White wine"},strong:{is:"Sterkt fengi",en:"Spirits"},cider:{is:"Sder",en:"Cider"},liqueur:{is:"Lkjr",en:"Liqueur"},"rose-wine":{is:"Rsavn",en:"Rose wine"},"sparkling-wine":{is:"Freyivn",en:"Sparkling wine"},"dessert-wine":{is:"Eftirrttavn",en:"Dessert wine"},packaging:{is:"Umbir",en:"Packaging"}},x=async C=>{var P;if(C.trim()){c(!0);try{const E=await fetch("http://192.168.8.62:5000/api/atvr/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchTerm:C})});if(!E.ok)throw new Error(r("atvrImport.failedToImport"));const T=await E.json();o(((P=T.data)==null?void 0:P.products)||[])}catch(E){console.error("Error searching ATVR products:",E),K.error(r("atvrImport.failedToImport"))}finally{c(!1)}}},k=C=>{C.preventDefault(),x(n)},y=C=>{m(P=>P.some(T=>T.id===C.id)?P.filter(T=>T.id!==C.id):[...P,C])},b=C=>{var T;const P=C.foodPairings||[],E=C.foodPairingsIs||[];return{name:C.name,nameIs:C.nameIs||C.name,description:C.description||"",descriptionIs:C.descriptionIs||C.description||"",price:typeof C.price=="number"?C.price:parseFloat(C.price.replace(/[^\d.,]/g,"").replace(",",".")),category:((T=w[C.category])==null?void 0:T.en)||C.category,image:C.image,alcoholContent:C.alcoholContent,volume:C.volume,volumeIs:C.volumeIs,country:C.country,countryIs:C.countryIs,producer:C.producer,producerIs:C.producerIs,distributor:C.distributor,distributorIs:C.distributorIs,packaging:C.packaging,packagingIs:C.packagingIs,foodPairings:P,foodPairingsIs:E,specialAttributes:C.specialAttributes||[],specialAttributesIs:C.specialAttributesIs||[],availability:C.availability||"available",availabilityIs:C.availabilityIs,atvrProductId:C.id,atvrUrl:C.url}},j=async()=>{if(h.length===0){K.error(r("atvrImport.pleaseSelectOne"));return}try{const C=h.map(b);for(const P of C)await e(P);K.success(`${r("atvrImport.successfullyImported")} ${C.length} ${r("atvrImport.productsImported")}`),m([]),o([]),a("")}catch(C){console.error("Error importing products:",C),K.error(r("atvrImport.failedToImport"))}},N=()=>{p(!0)};return s.jsxs(s.Fragment,{children:[f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[r("atvrImport.previewImportTitle")," (",h.length," ",r("atvrImport.products"),")"]}),s.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:s.jsx("div",{className:"space-y-6",children:h.map((C,P)=>{const E=b(C);return s.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:E.name}),E.nameIs&&E.nameIs!==E.name&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("strong",{children:r("atvrImport.icelandicLabel")})," ",E.nameIs]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:E.description}),E.descriptionIs&&E.descriptionIs!==E.description&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[s.jsx("strong",{children:r("atvrImport.icelandicLabel")})," ",E.descriptionIs]}),s.jsxs("p",{className:"text-lg font-bold text-primary-600",children:[E.price," kr"]})]}),s.jsxs("div",{className:"space-y-2",children:[E.volume&&s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:r("atvrImport.volume")})," ",E.volume,E.volumeIs&&E.volumeIs!==E.volume&&s.jsxs("span",{className:"text-gray-600",children:[" / ",E.volumeIs]})]}),E.country&&s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:r("atvrImport.country")})," ",E.country,E.countryIs&&E.countryIs!==E.country&&s.jsxs("span",{className:"text-gray-600",children:[" / ",E.countryIs]})]}),E.producer&&s.jsxs("p",{className:"text-sm",children:[s.jsx("strong",{children:r("atvrImport.producer")})," ",E.producer,E.producerIs&&E.producerIs!==E.producer&&s.jsxs("span",{className:"text-gray-600",children:[" / ",E.producerIs]})]}),E.foodPairings&&E.foodPairings.length>0&&s.jsxs("div",{children:[s.jsx("strong",{className:"text-sm",children:r("atvrImport.foodPairings")}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:E.foodPairings.map((T,O)=>s.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:T.name},O))})]})]})]})},P)})})}),s.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:r("atvrImport.cancel")}),s.jsx("button",{onClick:()=>{p(!1),j()},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:r("atvrImport.importProductsButton")})]})]})}),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r("atvrImport.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:r("atvrImport.subtitle")})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("form",{onSubmit:k,className:"flex space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",value:n,onChange:C=>a(C.target.value),placeholder:r("atvrImport.searchPlaceholderIs"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})}),s.jsxs("button",{type:"submit",disabled:d||!n.trim(),className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[d?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):s.jsx(zt,{className:"h-4 w-4"}),s.jsx("span",{children:r("atvrImport.search")})]})]})}),s.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r("atvrImport.searchResults")," (",i.length,")"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[h.length," ",r("atvrImport.selected")]}),s.jsx("button",{onClick:()=>m([]),className:"text-sm text-primary-600 hover:text-primary-700",children:r("atvrImport.clearAll")})]})]}),s.jsx("div",{className:"grid gap-4",children:i.map(C=>s.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${h.some(P=>P.id===C.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>y(C),children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:C.image?s.jsx("img",{src:C.image,alt:C.name,className:"w-16 h-16 object-cover rounded"}):s.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-xs",children:r("atvrImport.noImage")})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:C.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[C.category,"  ",C.country]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[C.volume,"  ",C.alcoholContent,"%"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[C.price," kr."]}),C.foodPairings&&C.foodPairings.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[C.foodPairings.slice(0,3).map((P,E)=>s.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:P},E)),C.foodPairings.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",C.foodPairings.length-3," ",r("atvrImport.more")]})]})]})]})}),s.jsx("div",{className:"flex-shrink-0",children:h.some(P=>P.id===C.id)?s.jsx(yt,{className:"h-5 w-5 text-primary-600"}):s.jsx("div",{className:"h-5 w-5 border-2 border-gray-300 dark:border-gray-600 rounded-full"})})]})},C.id))})]}):n&&!d?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:r("atvrImport.noProductsFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r("atvrImport.tryDifferentTerms")})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(zt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:r("atvrImport.searchATVRProducts")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r("atvrImport.enterSearchTerm")})]})}),h.length>0&&s.jsxs("div",{className:"w-80 border-l border-gray-200 dark:border-gray-700 p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r("atvrImport.selected")," (",h.length,")"]}),s.jsx("button",{onClick:()=>m([]),className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:r("atvrImport.clearAll")})]}),s.jsx("div",{className:"space-y-3 mb-6",children:h.map(C=>s.jsx("div",{className:"border rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:C.name}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[C.price," kr."]})]}),s.jsx("button",{onClick:()=>y(C),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"h-4 w-4"})})]})},C.id))}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:N,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center space-x-2",children:[s.jsx(Ut,{className:"h-4 w-4"}),s.jsx("span",{children:r("atvrImport.previewImport")})]}),s.jsxs("button",{onClick:j,className:"w-full px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center justify-center space-x-2",children:[s.jsx(gn,{className:"h-4 w-4"}),s.jsx("span",{children:r("atvrImport.importProducts")})]})]})]})]})]})})]})};class cO{constructor(){this.sources={unsplash:{name:"Unsplash",apiKey:null,baseUrl:"https://api.unsplash.com",enabled:!1},pexels:{name:"Pexels",apiKey:null,baseUrl:"https://api.pexels.com/v1",enabled:!1},pixabay:{name:"Pixabay",apiKey:null,baseUrl:"https://pixabay.com/api",enabled:!1},google:{name:"Google Custom Search",apiKey:null,searchEngineId:null,baseUrl:"https://www.googleapis.com/customsearch/v1",enabled:!1}},this.apiKeysLoaded=!1}async loadApiKeys(){if(!this.apiKeysLoaded)try{const t=await fetch("/api/settings/public");if(t.ok){const n=(await t.json()).data.settings;this.sources.unsplash.apiKey=n.UNSPLASH_ACCESS_KEY||"",this.sources.pexels.apiKey=n.PEXELS_API_KEY||"",this.sources.pixabay.apiKey=n.PIXABAY_API_KEY||"",this.sources.google.apiKey=n.GOOGLE_API_KEY||"",this.sources.google.searchEngineId=n.GOOGLE_SEARCH_ENGINE_ID||"",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}catch(t){console.warn("Failed to load API keys from settings:",t),this.sources.unsplash.apiKey="",this.sources.pexels.apiKey="",this.sources.pixabay.apiKey="",this.sources.google.apiKey="",this.sources.google.searchEngineId="",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}async searchImages(t,r={}){await this.loadApiKeys();const{perPage:n=20,orientation:a="all",color:i="all",sources:o=Object.keys(this.sources).filter(f=>this.sources[f].enabled)}=r;if(o.length===0)return{images:[],errors:[{source:"All Sources",error:"No API keys configured. Please configure API keys in admin settings."}],total:0,sources:[]};const d=o.map(f=>this.searchFromSource(f,t,{perPage:n,orientation:a,color:i}).catch(p=>(console.warn(`Failed to search ${f}:`,p),[]))),h=(await Promise.all(d)).flat(),m=this.removeDuplicates(h);return this.shuffleArray(m).slice(0,n)}async searchFromSource(t,r,n){switch(t){case"unsplash":return this.searchUnsplash(r,n);case"pexels":return this.searchPexels(r,n);case"pixabay":return this.searchPixabay(r,n);case"google":return this.searchGoogle(r,n);default:throw new Error(`Unknown source: ${t}`)}}async searchUnsplash(t,r){const{perPage:n,orientation:a,color:i}=r,o=this.sources.unsplash;if(!o.enabled)return[];const d=new URLSearchParams({query:t,per_page:Math.min(n,30),orientation:a==="all"?void 0:a,color:i==="all"?void 0:i}),c=await fetch(`${o.baseUrl}/search/photos?${d}`,{headers:{Authorization:`Client-ID ${o.apiKey}`}});if(!c.ok)throw new Error(`Unsplash API error: ${c.status}`);return(await c.json()).results.map(m=>{var f;return{id:m.id,url:m.urls.regular,thumbnail:m.urls.thumb,fullSize:m.urls.full,alt:m.alt_description||m.description||t,source:"unsplash",sourceName:"Unsplash",photographer:m.user.name,photographerUrl:m.user.links.html,downloadUrl:m.links.download,width:m.width,height:m.height,color:m.color,tags:((f=m.tags)==null?void 0:f.map(p=>p.title))||[]}})}async searchPexels(t,r){const{perPage:n,orientation:a,color:i}=r,o=this.sources.pexels;if(!o.enabled)return[];const d=new URLSearchParams({query:t,per_page:Math.min(n,80),orientation:a==="all"?void 0:a,color:i==="all"?void 0:i}),c=await fetch(`${o.baseUrl}/search?${d}`,{headers:{Authorization:o.apiKey}});if(!c.ok)throw new Error(`Pexels API error: ${c.status}`);return(await c.json()).photos.map(m=>({id:m.id,url:m.src.medium,thumbnail:m.src.small,fullSize:m.src.large2x,alt:m.alt||t,source:"pexels",sourceName:"Pexels",photographer:m.photographer,photographerUrl:m.photographer_url,downloadUrl:m.src.original,width:m.width,height:m.height,color:m.avg_color,tags:[]}))}async searchPixabay(t,r){const{perPage:n,orientation:a,color:i}=r,o=this.sources.pixabay;if(!o.enabled)return[];const d=new URLSearchParams({key:o.apiKey,q:t,per_page:Math.min(n,200),image_type:"photo",orientation:a==="all"?"all":a,colors:i==="all"?void 0:i,safesearch:"true"}),c=await fetch(`${o.baseUrl}/?${d}`);if(!c.ok)throw new Error(`Pixabay API error: ${c.status}`);return(await c.json()).hits.map(m=>({id:m.id,url:m.webformatURL,thumbnail:m.previewURL,fullSize:m.largeImageURL,alt:m.tags||t,source:"pixabay",sourceName:"Pixabay",photographer:m.user,photographerUrl:`https://pixabay.com/users/${m.user}-${m.user_id}/`,downloadUrl:m.largeImageURL,width:m.imageWidth,height:m.imageHeight,color:m.color,tags:m.tags.split(", ").map(f=>f.trim())}))}async searchGoogle(t,r){const{perPage:n}=r,a=this.sources.google;if(!a.enabled)return[];const i=new URLSearchParams({key:a.apiKey,cx:a.searchEngineId,q:t,searchType:"image",num:Math.min(n,10),safe:"active",imgSize:"medium",imgType:"photo"}),o=await fetch(`${a.baseUrl}?${i}`);if(!o.ok)throw new Error(`Google Custom Search API error: ${o.status}`);return((await o.json()).items||[]).map(c=>{var h,m,f,p;return{id:c.link,url:c.link,thumbnail:((h=c.image)==null?void 0:h.thumbnailLink)||c.link,fullSize:c.link,alt:c.title||t,source:"google",sourceName:"Google Images",photographer:c.displayLink,photographerUrl:((m=c.image)==null?void 0:m.contextLink)||c.link,downloadUrl:c.link,width:((f=c.image)==null?void 0:f.width)||0,height:((p=c.image)==null?void 0:p.height)||0,color:null,tags:[]}})}removeDuplicates(t){const r=new Set;return t.filter(n=>r.has(n.url)?!1:(r.add(n.url),!0))}shuffleArray(t){const r=[...t];for(let n=r.length-1;n>0;n--){const a=Math.floor(Math.random()*(n+1));[r[n],r[a]]=[r[a],r[n]]}return r}getAvailableSources(){return Object.entries(this.sources).filter(([,t])=>t.enabled).map(([t,r])=>({key:t,name:r.name}))}getSearchSuggestions(t,r){const n=[t];return r&&typeof r=="string"&&(n.push(`${t} ${r.toLowerCase()}`),n.push(`${r.toLowerCase()} ${t}`)),["product photo","professional","white background","isolated","high quality","commercial"].forEach(i=>{n.push(`${t} ${i}`)}),[...new Set(n)]}}const Hf=new cO,uO=({isOpen:e,onClose:t,onSelectImage:r,productName:n="",category:a="",initialQuery:i=""})=>{const{t:o}=pe(),[d,c]=_.useState(i||n),[h,m]=_.useState([]),[f,p]=_.useState(!1),[w,x]=_.useState(null),[k,y]=_.useState(null),[b,j]=_.useState("grid"),[N,C]=_.useState({orientation:"all",color:"all",sources:Hf.getAvailableSources().map(V=>V.key)}),[P,E]=_.useState([]),[T,O]=_.useState(!1),[I,W]=_.useState([]),[X,B]=_.useState([]),D=_.useRef(null),U=_.useRef(null);_.useEffect(()=>{const V=localStorage.getItem("imageSearchFavorites"),ae=localStorage.getItem("imageSearchRecent");V&&W(JSON.parse(V)),ae&&B(JSON.parse(ae))},[]),_.useEffect(()=>{if(n||a){const V=Hf.getSearchSuggestions(n,a);E(V)}},[n,a]),_.useEffect(()=>{e&&D.current&&D.current.focus()},[e]);const Z=async(V=d)=>{if(V.trim()){p(!0),x(null),y(null);try{const ae=await Hf.searchImages(V,{perPage:24,...N});m(ae);const fe=[V,...X.filter(be=>be!==V)].slice(0,10);B(fe),localStorage.setItem("imageSearchRecent",JSON.stringify(fe))}catch(ae){x(ae.message),K.error(`Search failed: ${ae.message}`)}finally{p(!1)}}},G=V=>{c(V.target.value),O(!0)},F=V=>{c(V),O(!1),Z(V)},R=V=>{y(V)},q=async V=>{try{p(!0);const ae=await fetch("/api/images/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:V.url,source:V.source,photographer:V.photographer,photographerUrl:V.photographerUrl})});if(!ae.ok)throw new Error("Failed to download image");const{imageUrl:fe}=await ae.json();r(fe,{originalUrl:V.url,source:V.source,photographer:V.photographer,photographerUrl:V.photographerUrl}),K.success("Image downloaded and selected successfully"),t()}catch(ae){K.error(`Failed to download image: ${ae.message}`)}finally{p(!1)}},J=V=>{const ae=I.some(be=>be.id===V.id);let fe;ae?fe=I.filter(be=>be.id!==V.id):fe=[...I,V],W(fe),localStorage.setItem("imageSearchFavorites",JSON.stringify(fe))},re=V=>{V.key==="Enter"?(O(!1),Z()):V.key==="Escape"&&O(!1)};return _.useEffect(()=>{const V=ae=>{U.current&&!U.current.contains(ae.target)&&O(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] flex flex-col shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search for Product Images"}),s.jsxs("div",{className:"relative",ref:U,children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{ref:D,type:"text",value:d,onChange:G,onKeyPress:re,placeholder:o("adminPlaceholders.searchForImages"),className:"input pl-10 pr-4 w-full"}),f&&s.jsx(qt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 animate-spin"})]}),T&&(P.length>0||X.length>0)&&s.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-10 mt-1",children:[P.length>0&&s.jsxs("div",{className:"p-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal.suggestions")}),P.slice(0,5).map((V,ae)=>s.jsx("button",{onClick:()=>F(V),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:V},ae))]}),X.length>0&&s.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal.recentSearches")}),X.slice(0,5).map((V,ae)=>s.jsx("button",{onClick:()=>F(V),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:V},ae))]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>j(b==="grid"?"list":"grid"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:b==="grid"?s.jsx(lg,{className:"w-4 h-4"}):s.jsx(og,{className:"w-4 h-4"})}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(ut,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(xo,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),s.jsxs("select",{value:N.orientation,onChange:V=>C({...N,orientation:V.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[s.jsx("option",{value:"all",children:o("imageSearchModal.allOrientations")}),s.jsx("option",{value:"landscape",children:o("imageSearchModal.landscape")}),s.jsx("option",{value:"portrait",children:o("imageSearchModal.portrait")}),s.jsx("option",{value:"squarish",children:o("imageSearchModal.square")})]}),s.jsxs("select",{value:N.color,onChange:V=>C({...N,color:V.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[s.jsx("option",{value:"all",children:o("imageSearchModal.allColors")}),s.jsx("option",{value:"black_and_white",children:"Black & White"}),s.jsx("option",{value:"black",children:o("imageSearchModal.black")}),s.jsx("option",{value:"white",children:o("imageSearchModal.white")}),s.jsx("option",{value:"yellow",children:o("imageSearchModal.yellow")}),s.jsx("option",{value:"orange",children:o("imageSearchModal.orange")}),s.jsx("option",{value:"red",children:o("imageSearchModal.red")}),s.jsx("option",{value:"purple",children:o("imageSearchModal.purple")}),s.jsx("option",{value:"magenta",children:o("imageSearchModal.magenta")}),s.jsx("option",{value:"green",children:o("imageSearchModal.green")}),s.jsx("option",{value:"teal",children:o("imageSearchModal.teal")}),s.jsx("option",{value:"blue",children:o("imageSearchModal.blue")})]}),s.jsxs("button",{onClick:()=>Z(),className:"btn btn-primary btn-sm",disabled:f,children:[f?s.jsx(qt,{className:"w-4 h-4 animate-spin"}):s.jsx(zt,{className:"w-4 h-4"}),"Search"]})]})}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[w&&s.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:s.jsxs("div",{className:"flex",children:[s.jsx(gt,{className:"w-5 h-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:w})})]})}),f&&h.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(qt,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Searching for images..."})]})}):h.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(zt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No images found"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Try a different search term or adjust your filters"})]})}):s.jsx("div",{className:"p-4 overflow-y-auto",children:b==="grid"?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map(V=>s.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${(k==null?void 0:k.id)===V.id&&(k==null?void 0:k.source)===V.source?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>R(V),children:[s.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700",children:s.jsx("img",{src:V.thumbnail,alt:V.alt,className:"w-full h-full object-cover",loading:"lazy"})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center",children:s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-2",children:[s.jsx("button",{onClick:ae=>{ae.stopPropagation(),q(V)},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels.selectImage"),children:s.jsx(Tp,{className:"w-4 h-4 text-green-600"})}),s.jsx("button",{onClick:ae=>{ae.stopPropagation(),window.open(V.url,"_blank")},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels.viewOriginal"),children:s.jsx(Lp,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{onClick:ae=>{ae.stopPropagation(),J(V)},className:`p-2 rounded-full shadow-lg ${I.some(ae=>ae.id===V.id&&ae.source===V.source)?"bg-red-500 text-white":"bg-white hover:bg-gray-100"}`,title:o("adminLabels.addToFavorites"),children:s.jsx(FM,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-black bg-opacity-75 text-white rounded",children:V.sourceName})}),V.photographer&&s.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:s.jsxs("p",{className:"text-xs text-white bg-black bg-opacity-75 px-2 py-1 rounded truncate",children:["by ",V.photographer]})})]},`${V.source}-${V.id}`))}):s.jsx("div",{className:"space-y-4",children:h.map(V=>s.jsxs("div",{className:`flex items-center space-x-4 p-4 rounded-lg border-2 transition-all cursor-pointer ${(k==null?void 0:k.id)===V.id&&(k==null?void 0:k.source)===V.source?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>R(V),children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:s.jsx("img",{src:V.thumbnail,alt:V.alt,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:V.alt}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:V.sourceName})]}),V.photographer&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",V.photographer]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[V.width,"  ",V.height]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:ae=>{ae.stopPropagation(),q(V)},className:"btn btn-primary btn-sm",children:[s.jsx(gn,{className:"w-4 h-4 mr-1"}),"Select"]}),s.jsx("button",{onClick:ae=>{ae.stopPropagation(),window.open(V.url,"_blank")},className:"btn btn-outline btn-sm",children:s.jsx(Lp,{className:"w-4 h-4"})})]})]},`${V.source}-${V.id}`))})})]}),k&&s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-600 rounded-lg overflow-hidden",children:s.jsx("img",{src:k.thumbnail,alt:k.alt,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:k.alt}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[k.sourceName,"  ",k.width,"  ",k.height]})]})]}),s.jsxs("button",{onClick:()=>q(k),className:"btn btn-primary",disabled:f,children:[f?s.jsx(qt,{className:"w-4 h-4 animate-spin mr-2"}):s.jsx(gn,{className:"w-4 h-4 mr-2"}),"Download & Select"]})]})})]})}):null},zy=({isOpen:e,onClose:t,onSelect:r,collection:n="PRODUCTS",selectedMedia:a=null,multiple:i=!1})=>{const{t:o}=pe(),[d,c]=_.useState([]),[h,m]=_.useState(!1),[f,p]=_.useState(""),[w,x]=_.useState(n),[k,y]=_.useState(i?a||[]:a?[a]:[]),[b,j]=_.useState("grid"),[N,C]=_.useState({page:1,limit:20,total:0,pages:0}),P=[{id:"PRODUCTS",name:o("adminMedia.products"),icon:""},{id:"CATEGORIES",name:o("adminMedia.categories"),icon:""},{id:"BANNERS",name:o("adminMedia.banners"),icon:""},{id:"PROFILE",name:o("adminMedia.profile"),icon:""},{id:"DOCUMENTS",name:o("adminMedia.documents"),icon:""},{id:"VIDEOS",name:o("adminMedia.videos"),icon:""}];_.useEffect(()=>{e&&E()},[e,w,N.page,f]),_.useEffect(()=>{e&&(x(n),y(i?a||[]:a?[a]:[]))},[e,n,a,i]);const E=async()=>{m(!0);try{const B=new URLSearchParams({collection:w,page:N.page,limit:N.limit,...f&&{search:f}}),D=await fetch(`/api/media?${B}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(D.ok){const U=await D.json();c(U.data.media),C(U.data.pagination)}else throw new Error("Failed to load media")}catch(B){console.error("Load media error:",B),K.error("Failed to load media")}finally{m(!1)}},T=B=>{if(i){const D=k.some(U=>U.id===B.id);y(D?U=>U.filter(Z=>Z.id!==B.id):U=>[...U,B])}else y([B])},O=()=>{r(i?k:k[0]||null),t()},I=()=>{window.open(`/admin/media/upload?collection=${w}`,"_blank")},W=B=>k.some(D=>D.id===B.id),X=B=>{if(B===0)return"0 Bytes";const D=1024,U=["Bytes","KB","MB","GB"],Z=Math.floor(Math.log(B)/Math.log(D));return parseFloat((B/Math.pow(D,Z)).toFixed(2))+" "+U[Z]};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o("adminMedia.selectMedia")}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o(i?"adminMedia.selectMultipleMedia":"adminMedia.selectSingleMedia")})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(ut,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(B=>s.jsxs("button",{onClick:()=>{x(B.id),C(D=>({...D,page:1}))},className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${w===B.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"mr-2",children:B.icon}),B.name]},B.id))})}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:o("adminMedia.searchMedia"),value:f,onChange:B=>p(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>j("grid"),className:`p-2 rounded-md ${b==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(og,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>j("list"),className:`p-2 rounded-md ${b==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(lg,{className:"h-4 w-4"})}),s.jsxs("button",{onClick:I,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx(Ma,{className:"h-4 w-4 mr-2"}),o("adminMedia.upload")]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Bd,{className:"h-8 w-8 animate-spin text-blue-500"})}):d.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(rr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:o("adminMedia.noMediaFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:o("adminMedia.noMediaInCollection")}),s.jsxs("button",{onClick:I,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[s.jsx(Ma,{className:"h-4 w-4 mr-2"}),o("adminMedia.uploadFirstMedia")]})]}):s.jsxs(s.Fragment,{children:[b==="grid"?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:d.map(B=>s.jsxs("div",{onClick:()=>T(B),className:`relative group cursor-pointer rounded-lg border-2 overflow-hidden transition-all ${W(B)?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:B.mimeType.startsWith("image/")?s.jsx("img",{src:B.thumbnailUrl||B.url,alt:B.alt||B.originalName,className:"w-full h-full object-cover",loading:"lazy"}):s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(rr,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("span",{className:"text-xs",children:B.mimeType.split("/")[1].toUpperCase()})]})}),W(B)&&s.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 text-white rounded-full p-1",children:s.jsx(Tp,{className:"h-3 w-3"})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity flex items-center justify-center",children:s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white text-center",children:[s.jsx("p",{className:"text-sm font-medium truncate px-2",children:B.originalName}),s.jsx("p",{className:"text-xs",children:X(B.size)})]})})]},B.id))}):s.jsx("div",{className:"space-y-2",children:d.map(B=>s.jsxs("div",{onClick:()=>T(B),className:`flex items-center p-3 rounded-lg border cursor-pointer transition-all ${W(B)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center flex-shrink-0 mr-4",children:B.mimeType.startsWith("image/")?s.jsx("img",{src:B.thumbnailUrl||B.url,alt:B.alt||B.originalName,className:"w-full h-full object-cover rounded"}):s.jsx(rr,{className:"w-6 h-6 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:B.originalName}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[X(B.size),"  ",B.mimeType]})]}),W(B)&&s.jsx("div",{className:"ml-4",children:s.jsx(Tp,{className:"h-5 w-5 text-blue-500"})})]},B.id))}),N.pages>1&&s.jsxs("div",{className:"flex items-center justify-center mt-6 gap-2",children:[s.jsx("button",{onClick:()=>C(B=>({...B,page:B.page-1})),disabled:N.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia.previous")}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[N.page," / ",N.pages]}),s.jsx("button",{onClick:()=>C(B=>({...B,page:B.page+1})),disabled:N.page===N.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia.next")})]})]})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:k.length>0&&s.jsx("span",{children:i?`${k.length} ${o("adminMedia.itemsSelected")}`:`${k.length} ${o("adminMedia.itemSelected")}`})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:o("adminMedia.cancel")}),s.jsx("button",{onClick:O,disabled:k.length===0,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o(i?"adminMedia.selectItems":"adminMedia.selectItem")})]})]})]})}):null},hO=({isOpen:e,onClose:t,onSubmit:r,editingProduct:n,categories:a,subcategories:i,uploadedImage:o,setUploadedImage:d,handleImageUpload:c,setShowImageSearch:h,setShowMediaPicker:m})=>{const{t:f}=pe(),[p,w]=_.useState("basic"),{register:x,handleSubmit:k,formState:{errors:y,isDirty:b},watch:j,setValue:N,reset:C}=_i();_.useEffect(()=>{const O=I=>{I.key==="Escape"&&e&&(b?window.confirm("You have unsaved changes. Are you sure you want to close without saving?")&&P():P())};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[e,b]),_.useEffect(()=>{if(n){N("name",n.name||""),N("nameIs",n.nameIs||""),N("price",n.price||0),N("stock",n.stock||0),N("category",n.category||""),N("subcategory",n.subcategory||""),N("isAgeRestricted",n.isAgeRestricted||!1),N("ageRestriction",n.ageRestriction||18),N("description",n.description||""),N("descriptionIs",n.descriptionIs||""),N("volume",n.volume||""),N("volumeIs",n.volumeIs||""),N("alcoholContent",n.alcoholContent||""),N("packaging",n.packaging||""),N("packagingIs",n.packagingIs||""),N("producer",n.producer||""),N("producerIs",n.producerIs||""),N("country",n.country||""),N("countryIs",n.countryIs||""),N("region",n.region||""),N("regionIs",n.regionIs||""),N("origin",n.origin||""),N("originIs",n.originIs||""),N("distributor",n.distributor||""),N("distributorIs",n.distributorIs||""),N("vintage",n.vintage||""),N("grapeVariety",n.grapeVariety||""),N("grapeVarietyIs",n.grapeVarietyIs||""),N("wineStyle",n.wineStyle||""),N("wineStyleIs",n.wineStyleIs||""),N("pricePerLiter",n.pricePerLiter||""),N("pricePerLiterIs",n.pricePerLiterIs||"");const O=I=>{if(!I)return"";if(Array.isArray(I))return I.join(", ");if(typeof I=="string")try{const W=JSON.parse(I);return Array.isArray(W)?W.join(", "):I}catch{return I}return""};N("foodPairings",O(n.foodPairings)),N("foodPairingsIs",O(n.foodPairingsIs)),N("specialAttributes",O(n.specialAttributes)),N("specialAttributesIs",O(n.specialAttributesIs)),N("certifications",O(n.certifications)),N("certificationsIs",O(n.certificationsIs)),N("atvrProductId",n.atvrProductId||""),N("atvrUrl",n.atvrUrl||""),N("atvrImageUrl",n.atvrImageUrl||""),N("availability",n.availability||"available"),N("availabilityIs",n.availabilityIs||""),N("imageUrl",n.imageUrl||""),n.imageUrl&&d(n.imageUrl),N("hasDiscount",n.hasDiscount||!1),N("originalPrice",n.originalPrice||0),N("discountPercentage",n.discountPercentage||0),N("discountStartDate",n.discountStartDate?n.discountStartDate.split("T")[0]:""),N("discountEndDate",n.discountEndDate?n.discountEndDate.split("T")[0]:""),N("discountReason",n.discountReason||""),N("discountReasonIs",n.discountReasonIs||"")}else C(),d(null)},[n,N,C,d]);const P=()=>{b&&!window.confirm(f("adminProductModal.unsavedChanges")||"You have unsaved changes. Are you sure you want to close without saving?")||(w("basic"),C(),d(null),t())},E=O=>{const I=X=>X?X.split(",").map(B=>B.trim()).filter(B=>B):[],W={...O,foodPairings:JSON.stringify(I(O.foodPairings)),foodPairingsIs:JSON.stringify(I(O.foodPairingsIs)),specialAttributes:JSON.stringify(I(O.specialAttributes)),specialAttributesIs:JSON.stringify(I(O.specialAttributesIs)),certifications:JSON.stringify(I(O.certifications)),certificationsIs:JSON.stringify(I(O.certificationsIs))};r(W)};if(!e)return null;const T=[{id:"basic",label:"Basic Info",icon:""},{id:"details",label:"Details",icon:""},{id:"origin",label:"Origin",icon:""},{id:"pairings",label:"Pairings & Attributes",icon:""},{id:"images",label:"Images",icon:""},{id:"discounts",label:"Discounts",icon:""}];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f(n?"adminProductsPage.editProduct":"adminProductsPage.newProductTitle")}),s.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(ut,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 px-6",children:s.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:T.map(O=>s.jsxs("button",{type:"button",onClick:()=>w(O.id),className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${p===O.id?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[s.jsx("span",{className:"mr-2",children:O.icon}),O.label]},O.id))})}),s.jsxs("form",{onSubmit:k(E),className:"flex-1 overflow-y-auto",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[p==="basic"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[f("adminProductsPage.nameEn")," *"]}),s.jsx("input",{...x("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Product name in English"}),y.name&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Name is required"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[f("adminProductsPage.nameIs")," *"]}),s.jsx("input",{...x("nameIs",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vruheiti  slensku"}),y.nameIs&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Icelandic name is required"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price (kr) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",...x("price",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),y.price&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Price is required"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stock *"}),s.jsx("input",{type:"number",min:"0",...x("stock",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),y.stock&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Stock is required"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Age Restriction"}),s.jsx("input",{type:"number",min:"0",max:"100",...x("ageRestriction"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"18"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category *"}),s.jsxs("select",{...x("category",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:"Select a category"}),a==null?void 0:a.map(O=>s.jsx("option",{value:O.value,children:O.label},O.value))]}),y.category&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Category is required"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subcategory"}),s.jsxs("select",{...x("subcategory"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:"Select a subcategory"}),i==null?void 0:i.filter(O=>O.category===j("category")).map(O=>s.jsx("option",{value:O.value,children:O.label},O.value))]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...x("isAgeRestricted"),className:"rounded border-gray-300 dark:border-gray-600"}),s.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Age Restricted Product"})]})]}),p==="details"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (English)"}),s.jsx("textarea",{...x("description"),rows:4,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Product description in English"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Icelandic)"}),s.jsx("textarea",{...x("descriptionIs"),rows:4,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vrulsing  slensku"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Volume (EN)"}),s.jsx("input",{...x("volume"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 500 ml, 750 ml"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Volume (IS)"}),s.jsx("input",{...x("volumeIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., 500 ml, 750 ml"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Alcohol Content (%)"}),s.jsx("input",{...x("alcoholContent"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 5.0, 12.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vintage (Year)"}),s.jsx("input",{...x("vintage"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 2020"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Packaging (EN)"}),s.jsx("input",{...x("packaging"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Bottle, Can, Box"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Packaging (IS)"}),s.jsx("input",{...x("packagingIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., Flaska, Ds"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grape Variety (EN)"}),s.jsx("input",{...x("grapeVariety"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Cabernet Sauvignon"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grape Variety (IS)"}),s.jsx("input",{...x("grapeVarietyIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"rgutegund"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wine Style (EN)"}),s.jsx("input",{...x("wineStyle"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dry, Sweet, Sparkling"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wine Style (IS)"}),s.jsx("input",{...x("wineStyleIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vnstll"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price Per Liter (EN)"}),s.jsx("input",{...x("pricePerLiter"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 2,500 kr/L"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price Per Liter (IS)"}),s.jsx("input",{...x("pricePerLiterIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., 2.500 kr/L"})]})]})]}),p==="origin"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producer (EN)"}),s.jsx("input",{...x("producer"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Producer name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producer (IS)"}),s.jsx("input",{...x("producerIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Framleiandi"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country (EN)"}),s.jsx("input",{...x("country"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Iceland, France"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country (IS)"}),s.jsx("input",{...x("countryIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., sland, Frakkland"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Region (EN)"}),s.jsx("input",{...x("region"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Bordeaux, Tuscany"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Region (IS)"}),s.jsx("input",{...x("regionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Svi"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Origin (EN)"}),s.jsx("input",{...x("origin"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Specific origin details"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Origin (IS)"}),s.jsx("input",{...x("originIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Uppruni"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Distributor (EN)"}),s.jsx("input",{...x("distributor"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Distributor name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Distributor (IS)"}),s.jsx("input",{...x("distributorIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Dreifingaraili"})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"ATVR Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR Product ID"}),s.jsx("input",{...x("atvrProductId"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 01448",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR URL"}),s.jsx("input",{...x("atvrUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white text-xs",placeholder:"ATVR product page URL",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR Image URL"}),s.jsx("input",{...x("atvrImageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white text-xs",placeholder:"ATVR product image URL",readOnly:!0})]})]})]})]}),p==="pairings"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Food Pairings (EN)"}),s.jsx("input",{...x("foodPairings"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Fish, Fowl, Beef"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter food pairings separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Food Pairings (IS)"}),s.jsx("input",{...x("foodPairingsIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum, t.d., Fiskur, Alifuglar, Nautakjt"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn matarpr askilin me kommum"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Special Attributes (EN)"}),s.jsx("input",{...x("specialAttributes"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Organic, Vegan, Premium"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter special attributes separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Special Attributes (IS)"}),s.jsx("input",{...x("specialAttributesIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum, t.d., Lfrnt, Vegan, Premium"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn sreiginleika askilda me kommum"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Certifications (EN)"}),s.jsx("input",{...x("certifications"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Fair Trade, Kosher"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter certifications separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Certifications (IS)"}),s.jsx("input",{...x("certificationsIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn vottanir askildar me kommum"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Availability (EN)"}),s.jsxs("select",{...x("availability"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"special-order",children:"Special Order"}),s.jsx("option",{value:"coming-soon",children:"Coming Soon"}),s.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Availability (IS)"}),s.jsx("input",{...x("availabilityIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., Til rstfunar"})]})]})]}),p==="images"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Product Image"}),s.jsxs("div",{className:"flex space-x-2 mb-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"input flex-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"btn btn-outline flex items-center space-x-2",children:[s.jsx(zt,{className:"w-4 h-4"}),s.jsx("span",{children:"Search Online"})]}),s.jsxs("button",{type:"button",onClick:()=>m(!0),className:"btn btn-outline flex items-center space-x-2",children:[s.jsx(rr,{className:"w-4 h-4"}),s.jsx("span",{children:"Media Library"})]})]}),o&&s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:o,alt:"Product preview",className:"w-64 h-64 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"}),s.jsx("button",{type:"button",onClick:()=>d(null),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",children:s.jsx(ut,{className:"w-4 h-4"})})]}),!o&&s.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12 text-center",children:[s.jsx(rr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No image selected"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Upload an image, search online, or select from media library"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Image URL (if not uploading)"}),s.jsx("input",{...x("imageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://example.com/image.jpg"})]})]}),p==="discounts"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("input",{type:"checkbox",...x("hasDiscount"),className:"rounded border-gray-300 dark:border-gray-600"}),s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable Discount for this Product"})]}),j("hasDiscount")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Original Price (kr) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",...x("originalPrice",{min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Percentage (%) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",...x("discountPercentage",{min:0,max:100}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Start Date"}),s.jsx("input",{type:"date",...x("discountStartDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount End Date"}),s.jsx("input",{type:"date",...x("discountEndDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Reason (EN)"}),s.jsx("input",{...x("discountReason"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Seasonal Sale, Clearance"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Discount Reason (IS)"}),s.jsx("input",{...x("discountReasonIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., rstabundin tsala"})]})]}),!j("hasDiscount")&&s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-8 text-center",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Enable discount to configure discount settings for this product"})})]})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:P,className:"btn btn-outline px-6",children:"Cancel"}),s.jsx("button",{type:"submit",className:"btn btn-primary px-6",children:n?"Update Product":"Create Product"})]})})]})]})})},mO=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(z=>z.auth),{products:n,isLoading:a,error:i}=we(z=>z.products),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,f]=_.useState(!1),[p,w]=_.useState(!1),[x,k]=_.useState(null),[y,b]=_.useState(""),[j,N]=_.useState(""),[C,P]=_.useState(!1),[E,T]=_.useState(null),[O,I]=_.useState("grid"),{register:W,handleSubmit:X,formState:{errors:B},reset:D,setValue:U,watch:Z}=_i({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:""}});_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(cn({limit:100}))},[t,r]),_.useEffect(()=>{x?(U("name",x.name),U("nameIs",x.nameIs||""),U("description",x.description),U("descriptionIs",x.descriptionIs||""),U("price",x.price),U("stock",x.stock),U("category",x.category),U("subcategory",x.subcategory||""),U("isAgeRestricted",x.isAgeRestricted),U("imageUrl",x.imageUrl||""),U("hasDiscount",x.hasDiscount||!1),U("originalPrice",x.originalPrice||0),U("discountPercentage",x.discountPercentage||0),U("discountStartDate",x.discountStartDate?x.discountStartDate.split("T")[0]:""),U("discountEndDate",x.discountEndDate?x.discountEndDate.split("T")[0]:""),U("discountReason",x.discountReason||""),U("discountReasonIs",x.discountReasonIs||""),T(x.imageUrl||null)):(D(),T(null))},[x,U,D]);const G=async z=>{try{const xe={...z,price:parseFloat(z.price),stock:parseInt(z.stock),imageUrl:E||z.imageUrl};x?(await t(Kl({id:x.id,...xe})).unwrap(),K.success(e("common.success"))):(await t(ql(xe)).unwrap(),K.success(e("common.success"))),d(!1),k(null),D(),T(null)}catch(xe){K.error(xe.message||e("common.error"))}},F=async z=>{try{const xe=Ee=>{if(!Ee)return 0;if(typeof Ee=="number")return Ee;if(typeof Ee=="string"){const ie=Ee.match(/(\d+(?:\.\d+)?)/);return ie?parseFloat(ie[1]):0}return 0},Me=Ee=>({Sder:"CIDER_RTD",Bjr:"BEER",Beer:"BEER",Rauvn:"WINE",Hvtvn:"WINE",Rsavn:"WINE",Freyivn:"WINE","Red wine":"WINE","White wine":"WINE","Rose wine":"WINE","Sparkling wine":"WINE","Sterkt fengi":"SPIRITS",Spirits:"SPIRITS",Lkjr:"SPIRITS",Liqueur:"SPIRITS",Cider:"CIDER_RTD",Unknown:"WINE"})[Ee]||"WINE",ze={name:z.name,nameIs:z.nameIs||z.name,description:z.description||"",descriptionIs:z.descriptionIs||z.description||"",price:xe(z.price),stock:100,category:Me(z.category),ageRestriction:20,atvrImageUrl:z.image||"",alcoholContent:z.alcoholContent,volume:z.volume,volumeIs:z.volumeIs,country:z.country,countryIs:z.countryIs,region:z.region,regionIs:z.regionIs,origin:z.origin,originIs:z.originIs,producer:z.producer,producerIs:z.producerIs,distributor:z.distributor,distributorIs:z.distributorIs,packaging:z.packaging,packagingIs:z.packagingIs,packagingWeight:z.packagingWeight,packagingWeightIs:z.packagingWeightIs,carbonFootprint:z.carbonFootprint,carbonFootprintIs:z.carbonFootprintIs,vintage:z.vintage,grapeVariety:z.grapeVariety,grapeVarietyIs:z.grapeVarietyIs,wineStyle:z.wineStyle,wineStyleIs:z.wineStyleIs,pricePerLiter:z.pricePerLiter,pricePerLiterIs:z.pricePerLiterIs,subcategories:z.subcategories||[],foodPairings:JSON.stringify(z.foodPairings||[]),foodPairingsIs:JSON.stringify(z.foodPairingsIs||[]),specialAttributes:JSON.stringify(z.specialAttributes||[]),specialAttributesIs:JSON.stringify(z.specialAttributesIs||[]),certifications:JSON.stringify(z.certifications||[]),certificationsIs:JSON.stringify(z.certificationsIs||[]),storeAvailability:z.storeAvailability?JSON.stringify(z.storeAvailability):null,atvrProductId:z.atvrProductId,atvrUrl:z.atvrUrl,availability:z.availability||"available",availabilityIs:z.availabilityIs};await t(ql(ze)).unwrap(),K.success(`Product "${z.name}" imported successfully`)}catch(xe){console.error("Error importing product:",xe),K.error(`Failed to import product: ${xe.message||"Unknown error"}`)}},R=z=>{k(z),d(!0)},q=async z=>{if(window.confirm(e("common.delete")+"?"))try{await t(Ku(z)).unwrap(),K.success(e("common.success"))}catch(xe){K.error(xe.message||e("common.error"))}},J=z=>{const xe=z.target.files[0];if(xe){const Me=new FileReader;Me.onload=ze=>{T(ze.target.result)},Me.readAsDataURL(xe)}},re=z=>{T(z)},V=z=>{z&&z.url&&(T(z.url),U("imageUrl",z.url)),w(!1)},ae=n.filter(z=>{const xe=z.name.toLowerCase().includes(y.toLowerCase())||z.nameIs&&z.nameIs.toLowerCase().includes(y.toLowerCase()),Me=!j||z.category===j,ze=!C||z.isAgeRestricted;return xe&&Me&&ze}),fe=[{value:"WINE",label:e("categories.WINE")},{value:"BEER",label:e("categories.BEER")},{value:"BEERS",label:e("categories.BEERS")},{value:"CIDER_RTD",label:e("categories.CIDER_RTD")},{value:"SPIRITS",label:e("categories.SPIRITS")},{value:"NICOTINE",label:e("categories.NICOTINE")},{value:"NON_ALCOHOLIC",label:e("categories.NON_ALCOHOLIC")},{value:"OFFERS",label:e("categories.OFFERS")}],be=[{value:"WHITE_WINE",label:e("subcategories.WHITE_WINE"),category:"WINE"},{value:"RED_WINE",label:e("subcategories.RED_WINE"),category:"WINE"},{value:"SPARKLING_WINE",label:e("subcategories.SPARKLING_WINE"),category:"WINE"},{value:"CHAMPAGNE",label:e("subcategories.CHAMPAGNE"),category:"WINE"},{value:"YELLOW_WINE",label:e("subcategories.YELLOW_WINE"),category:"WINE"},{value:"ROSE_WINE",label:e("subcategories.ROSE_WINE"),category:"WINE"},{value:"GIN",label:e("subcategories.GIN"),category:"SPIRITS"},{value:"COGNAC",label:e("subcategories.COGNAC"),category:"SPIRITS"},{value:"RUM",label:e("subcategories.RUM"),category:"SPIRITS"},{value:"LIQUEURS_SHOTS",label:e("subcategories.LIQUEURS_SHOTS"),category:"SPIRITS"},{value:"TEQUILA",label:e("subcategories.TEQUILA"),category:"SPIRITS"},{value:"VODKA",label:e("subcategories.VODKA"),category:"SPIRITS"},{value:"WHISKEY",label:e("subcategories.WHISKEY"),category:"SPIRITS"},{value:"VAPE",label:e("subcategories.VAPE"),category:"NICOTINE"},{value:"NICOTINE_PADS",label:e("subcategories.NICOTINE_PADS"),category:"NICOTINE"},{value:"SODA",label:e("subcategories.SODA"),category:"NON_ALCOHOLIC"},{value:"SOFT_DRINKS",label:e("subcategories.SOFT_DRINKS"),category:"NON_ALCOHOLIC"},{value:"ENERGY_DRINKS",label:e("subcategories.ENERGY_DRINKS"),category:"NON_ALCOHOLIC"}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ne,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):a?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):i?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(gt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:e("common.error")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:i}),s.jsx("button",{onClick:()=>t(cn({limit:100})),className:"btn btn-primary",children:e("common.retry")})]})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:Ue,title:e("adminProductsPage.productManagement"),description:e("adminProductsPage.manageProducts"),actions:s.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs("button",{onClick:()=>{k(null),d(!0)},className:"inline-flex items-center px-3 sm:px-4 py-2 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(vr,{className:"w-4 h-4 mr-2"}),e("adminProductsPage.newProduct")]}),s.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ue,{className:"w-4 h-4 mr-2"}),e("adminProducts.importFromATVR")]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminLabels.filters")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>I("grid"),className:`p-2 rounded-lg transition-colors ${O==="grid"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels.gridView"),children:s.jsx(og,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>I("list"),className:`p-2 rounded-lg transition-colors ${O==="list"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels.listView"),children:s.jsx(lg,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminProductsPage.searchProducts"),value:y,onChange:z=>b(z.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:j,onChange:z=>N(z.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminProductsPage.allCategories")}),fe.map(z=>s.jsx("option",{value:z.value,children:z.label},z.value))]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:C,onChange:z=>P(z.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage.showOnlyAgeRestricted")})]})]})]}),O==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ae.map(z=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white rounded-lg mb-4 overflow-hidden p-2",children:z.imageUrl?s.jsx("img",{src:z.imageUrl.startsWith("http")?z.imageUrl:`http://192.168.8.62:5000${z.imageUrl}`,alt:z.name,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:s.jsx(Ue,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white line-clamp-2",children:z.nameIs||z.name}),z.isAgeRestricted&&s.jsx(gt,{className:"w-4 h-4 text-red-500 flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:z.descriptionIs||z.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[z.price.toLocaleString()," ",e("common.currency")]}),s.jsxs("span",{className:`text-sm px-2 py-1 rounded ${z.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":z.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[z.stock," ",e("adminProductsPage.inStock")]})]}),s.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[s.jsxs("button",{onClick:()=>R(z),className:"btn btn-outline btn-sm flex-1 flex items-center justify-center space-x-1",children:[s.jsx(pn,{className:"w-3 h-3"}),s.jsx("span",{children:e("common.edit")})]}),s.jsx("button",{onClick:()=>q(z.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900","data-testid":`delete-product-${z.id}`,"aria-label":`Delete ${z.name}`,children:s.jsx(ar,{className:"w-3 h-3"})})]})]})]},z.id))}):s.jsx("div",{className:"space-y-4",children:ae.map(z=>{var xe;return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-24 h-24 bg-white dark:bg-white rounded-lg overflow-hidden flex-shrink-0 p-2",children:z.imageUrl?s.jsx("img",{src:z.imageUrl.startsWith("http")?z.imageUrl:`http://192.168.8.62:5000${z.imageUrl}`,alt:z.name,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:s.jsx(Ue,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:z.nameIs||z.name}),z.isAgeRestricted&&s.jsx(gt,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:z.descriptionIs||z.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:((xe=z.category)==null?void 0:xe.name)||"Unknown"}),s.jsxs("span",{className:`text-xs px-2 py-1 rounded ${z.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":z.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[z.stock," ",e("adminProductsPage.inStock")]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400 text-lg whitespace-nowrap",children:[z.price.toLocaleString()," ",e("common.currency")]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>R(z),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(pn,{className:"w-3 h-3"}),s.jsx("span",{children:e("common.edit")})]}),s.jsx("button",{onClick:()=>q(z.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900","data-testid":`delete-product-${z.id}`,"aria-label":`Delete ${z.name}`,children:s.jsx(ar,{className:"w-3 h-3"})})]})]})]})})]})},z.id)})}),ae.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ue,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminProductsPage.noProductsFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminProductsPage.adjustSearchOrAdd")})]}),s.jsx(hO,{isOpen:o,onClose:()=>{d(!1),k(null),T(null)},onSubmit:G,editingProduct:x,categories:fe,subcategories:be,uploadedImage:E,setUploadedImage:T,handleImageUpload:J,setShowImageSearch:f,setShowMediaPicker:w})]}),c&&s.jsx(dO,{onImportProduct:F,onClose:()=>h(!1)}),m&&s.jsx(uO,{isOpen:m,onClose:()=>f(!1),onSelectImage:re,productName:(x==null?void 0:x.name)||"",category:(x==null?void 0:x.category)||"",initialQuery:(x==null?void 0:x.name)||""}),s.jsx(zy,{isOpen:p,onClose:()=>w(!1),onSelect:V,collection:"PRODUCTS",multiple:!1})]})]})})},gO=({isOpen:e,editingCategory:t,onClose:r,onSubmit:n,showImagePicker:a,onImagePickerOpen:i,onImagePickerClose:o,selectedImage:d,onImageSelect:c,onImageRemove:h})=>{const{t:m}=pe(),{register:f,handleSubmit:p,formState:{errors:w},reset:x,setValue:k,watch:y}=_i({defaultValues:{name:"",nameIs:"",slug:"",description:"",descriptionIs:"",icon:"",sortOrder:0,isActive:!0}});_.useEffect(()=>{e&&t?(k("name",t.name),k("nameIs",t.nameIs||""),k("slug",t.slug||""),k("description",t.description||""),k("descriptionIs",t.descriptionIs||""),k("icon",t.icon||""),k("sortOrder",t.sortOrder||0),k("isActive",t.isActive)):e&&x()},[e,t,k,x]);const b=async j=>{try{const N={...j,sortOrder:parseInt(j.sortOrder),imageUrl:d||null};t?await n({id:t.id,...N},"edit"):await n(N,"create"),x(),r()}catch(N){K.error(N.message||m("common.error"))}};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:m(t?"adminCategories.editCategory":"adminCategories.newCategory")}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ut,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:p(b),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[m("adminCategories.nameEn")," *"]}),s.jsx("input",{type:"text",...f("name",{required:m("adminCategories.nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterNameEn")}),w.name&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.name.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[m("adminCategories.nameIs")," *"]}),s.jsx("input",{type:"text",...f("nameIs",{required:m("adminCategories.nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterNameIs")}),w.nameIs&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.nameIs.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.slug")}),s.jsx("input",{type:"text",...f("slug"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterSlugEn")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m("adminCategories.slugHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.descEn")}),s.jsx("textarea",{...f("description"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"2",placeholder:m("adminPlaceholders.enterDescriptionEn")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.descIs")}),s.jsx("textarea",{...f("descriptionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"2",placeholder:m("adminPlaceholders.enterDescriptionIs")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.icon")}),s.jsx("input",{type:"text",...f("icon"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterIcon")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m("adminCategories.iconHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:m("adminCategories.sortOrder")}),s.jsx("input",{type:"number",...f("sortOrder"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterSortOrder")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m("adminCategories.sortOrderHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.categoryImageFromProduct")}),s.jsxs("div",{className:"flex items-center gap-3",children:[d&&s.jsx("div",{className:"w-16 h-16 bg-white dark:bg-white rounded border border-gray-200 dark:border-gray-200 flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:d,alt:"Category",className:"w-full h-full object-contain"})}),s.jsxs("button",{type:"button",onClick:i,className:"btn btn-outline flex items-center gap-2",children:[s.jsx(rr,{className:"w-4 h-4"}),m(d?"adminCategories.changeImage":"adminCategories.selectFromMedia")]}),d&&s.jsx("button",{type:"button",onClick:h,className:"btn btn-outline text-red-600 hover:text-red-700",children:m("adminCategories.removeImage")})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",...f("isActive"),className:"rounded"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:m("adminCategories.active")})]})}),s.jsxs("div",{className:"flex items-center space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"btn btn-outline flex-1",children:m("common.cancel")}),s.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:m(t?"common.save":"common.add")})]})]})]})}),s.jsx(zy,{isOpen:a,onClose:o,onSelect:j=>{c(j.url)},collection:"PRODUCTS",selectedMedia:d,multiple:!1})]}):null},fO=({subcategory:e,onEdit:t,onDelete:r})=>{var a,i,o;const{t:n}=pe();return s.jsx("div",{className:"px-6 py-4 pl-16",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.icon?s.jsx("span",{className:"text-lg text-white",children:e.icon}):s.jsx(ac,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:e.slug}),!e.isActive&&s.jsx("span",{className:"text-xs text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20 px-2 py-1 rounded",children:n("adminCategories.inactive")})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.descriptionIs||e.description||n("adminCategories.noDescription")}),s.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("adminCategories.productCount"),": ",((a=e._count)==null?void 0:a.products)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[n("adminCategories.sortOrder"),": ",e.sortOrder]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>t(e),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(pn,{className:"w-3 h-3"}),s.jsx("span",{children:n("common.edit")})]}),s.jsx("button",{onClick:()=>r(e.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((i=e._count)==null?void 0:i.products)>0,title:((o=e._count)==null?void 0:o.products)>0?n("adminCategories.cannotDeleteWithProducts"):"",children:s.jsx(ar,{className:"w-3 h-3"})})]})]})})},pO=({subcategories:e,onEdit:t,onDelete:r})=>{const{t:n}=pe();return!e||e.length===0?null:s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50",children:[s.jsx("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:n("adminCategories.subcategories")})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(a=>s.jsx(fO,{subcategory:a,onEdit:t,onDelete:r},a.id))})]})},xO=({category:e,onEdit:t,onDelete:r,onEditSubcategory:n,onDeleteSubcategory:a})=>{var o,d,c,h;const{t:i}=pe();return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx("div",{className:"w-16 h-16 bg-white dark:bg-white rounded-lg flex items-center justify-center flex-shrink-0 border border-gray-200 dark:border-gray-200 overflow-hidden aspect-square",children:e.imageUrl?s.jsx("img",{src:e.imageUrl,alt:e.nameIs||e.name,className:"w-full h-full object-contain"}):e.icon?s.jsx("span",{className:"text-2xl",children:e.icon}):s.jsx(ac,{className:"w-6 h-6 text-blue-600 dark:text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:e.slug}),!e.isActive&&s.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20 px-2 py-1 rounded",children:i("adminCategories.inactive")})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.descriptionIs||e.description||i("adminCategories.noDescription")}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.productCount"),": ",((o=e._count)==null?void 0:o.products)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.subcategories"),": ",((d=e.subcategories)==null?void 0:d.length)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.sortOrder"),": ",e.sortOrder]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>t(e),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(pn,{className:"w-3 h-3"}),s.jsx("span",{children:i("common.edit")})]}),e.slug!=="tilbodin"&&s.jsx("button",{onClick:()=>r(e.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((c=e._count)==null?void 0:c.products)>0,title:((h=e._count)==null?void 0:h.products)>0?i("adminCategories.cannotDeleteWithProducts"):"",children:s.jsx(ar,{className:"w-3 h-3"})})]})]})}),e.subcategories&&e.subcategories.length>0&&s.jsx(pO,{subcategories:e.subcategories,onEdit:n,onDelete:a})]})},yO=({categories:e,searchTerm:t,onEdit:r,onDelete:n,onEditSubcategory:a,onDeleteSubcategory:i})=>{const{t:o}=pe(),d=e.filter(c=>t===""||c.name.toLowerCase().includes(t.toLowerCase())||c.nameIs.toLowerCase().includes(t.toLowerCase())||c.slug.toLowerCase().includes(t.toLowerCase()));return e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ac,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:o("adminCategories.noCategories")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o("adminCategories.createFirstCategory")})]}):d.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o("common.noResults")})}):s.jsx("div",{className:"space-y-6",children:d.map(c=>s.jsx(xO,{category:c,onEdit:r,onDelete:n,onEditSubcategory:a,onDeleteSubcategory:i},c.id))})},bO=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(C=>C.auth),{categories:n,isLoading:a}=we(C=>C.categories),[i,o]=_.useState(!1),[d,c]=_.useState(null),[h,m]=_.useState(!1),[f,p]=_.useState(null),[w,x]=_.useState("");_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(fi({includeInactive:!0}))},[t,r]);const k=async(C,P)=>{try{P==="edit"?(await t(Xu(C)).unwrap(),K.success(e("common.success"))):(await t(Ju(C)).unwrap(),K.success(e("common.success"))),o(!1),c(null),p(null)}catch(E){K.error(E.message||e("common.error"))}},y=C=>{c(C),o(!0)},b=async C=>{if(window.confirm(e("adminCategories.confirmDelete")))try{await t(Qu(C)).unwrap(),K.success(e("common.success"))}catch(P){K.error(P||e("common.error"))}},j=()=>{K.info("Subcategory editing will be implemented in a future update")},N=async()=>{K.info("Subcategory deletion will be implemented in a future update")};return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ne,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage.noPermission")})]})})})]}):a&&n.length===0?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsxs(Ne,{children:[s.jsx(Tr,{icon:ac,title:e("adminCategories.title"),description:e("adminCategories.manageCategories"),actions:s.jsxs("button",{onClick:()=>{c(null),o(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(vr,{className:"w-4 h-4 mr-2"}),e("adminCategories.newCategory")]})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4 mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search categories by name...",value:w,onChange:C=>x(C.target.value),className:"input"}),w&&s.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]})}),s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx(yO,{categories:n,searchTerm:w,onEdit:y,onDelete:b,onEditSubcategory:j,onDeleteSubcategory:N}),s.jsx(gO,{isOpen:i,editingCategory:d,onClose:()=>{o(!1),c(null),p(null)},onSubmit:k,showImagePicker:h,onImagePickerOpen:()=>m(!0),onImagePickerClose:()=>m(!1),selectedImage:f,onImageSelect:C=>{p(C),m(!1)},onImageRemove:()=>p(null)})]})]})},vO=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(Z=>Z.auth),{orders:n,isLoading:a}=we(Z=>Z.orders),[i,o]=_.useState(""),[d,c]=_.useState(""),[h,m]=_.useState(""),[f,p]=_.useState(null),[w,x]=_.useState(!1),[k,y]=_.useState(!1),[b,j]=_.useState(!1),[N,C]=_.useState(""),[P,E]=_.useState("");_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(po({limit:100}))},[t,r]);const T=Z=>{switch(Z){case"PENDING":return s.jsx(Wt,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return s.jsx(Ue,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Cr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(yt,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return s.jsx(dg,{className:"w-5 h-5 text-red-600"});default:return s.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},O=Z=>e("orders.statuses")[Z],I=Z=>{switch(Z){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},W=n.filter(Z=>{var q,J;const G=Z.orderNumber.toLowerCase().includes(i.toLowerCase())||((q=Z.user)==null?void 0:q.fullName)&&Z.user.fullName.toLowerCase().includes(i.toLowerCase())||((J=Z.user)==null?void 0:J.username)&&Z.user.username.toLowerCase().includes(i.toLowerCase()),F=!d||Z.status===d,R=!h||Z.deliveryMethod===h;return G&&F&&R}),X=async()=>{try{await t(Vl({orderId:f.id,status:N})).unwrap(),K.success(e("adminPage.statusUpdated")),x(!1),p(null),C("")}catch(Z){K.error(Z.message||e("adminPage.errorOccurred"))}},B=async()=>{try{await t($u({id:f.id,deliveryPersonId:P})).unwrap(),K.success(e("adminPage.deliveryAssigned")),y(!1),p(null),E("")}catch(Z){K.error(Z.message||e("adminPage.errorOccurred"))}},D=[{value:"PENDING",label:e("orders.statuses.PENDING")},{value:"CONFIRMED",label:e("orders.statuses.CONFIRMED")},{value:"PREPARING",label:e("orders.statuses.PREPARING")},{value:"OUT_FOR_DELIVERY",label:e("orders.statuses.OUT_FOR_DELIVERY")},{value:"DELIVERED",label:e("orders.statuses.DELIVERED")},{value:"CANCELLED",label:e("orders.statuses.CANCELLED")}],U=[{id:1,name:"Jn Jnsson",phone:"+354 123 4567"},{id:2,name:"Anna Sigurardttir",phone:"+354 765 4321"},{id:3,name:"Magns Magnsson",phone:"+354 987 6543"}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ne,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):a?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:yr,title:e("adminPage.orderManagement"),description:e("adminPage.manageOrders")}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminPage.searchOrders"),value:i,onChange:Z=>o(Z.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:d,onChange:Z=>c(Z.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminPage.allStatuses")}),D.map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),s.jsxs("select",{value:h,onChange:Z=>m(Z.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminPage.allDeliveryMethods")}),s.jsx("option",{value:"DELIVERY",children:e("adminPage.homeDelivery")}),s.jsx("option",{value:"PICKUP",children:e("adminPage.storePickup")})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(xo,{className:"w-4 h-4 mr-2"}),W.length," ",e("adminPage.results")]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.order")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.customer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.status")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.delivery")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.amount")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.date")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:W.map(Z=>{var G,F,R;return s.jsxs("tr",{onClick:()=>{p(Z),j(!0)},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ue,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["#",Z.orderNumber]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Z.items.length," ",e("cart.items")]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Hr,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((G=Z.user)==null?void 0:G.fullName)||((F=Z.user)==null?void 0:F.username)||e("common.unknown")}),((R=Z.user)==null?void 0:R.email)&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:Z.user.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 w-fit ${I(Z.status)}`,children:[T(Z.status),s.jsx("span",{children:O(Z.status)})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(fn,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 mr-2"}),s.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:Z.deliveryMethod==="PICKUP"?e("ordersPage.pickup"):e("ordersPage.homeDelivery")})]}),Z.deliveryPerson&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e("adminPage.deliveryPerson"),": ",Z.deliveryPerson.fullName]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[Z.totalAmount.toLocaleString()," ",e("common.currency")]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(Z.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:q=>{q.stopPropagation(),p(Z),j(!0)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-900 dark:hover:text-purple-300 transition-colors duration-200 flex items-center space-x-1",title:e("receipts.viewReceipt"),children:[s.jsx(_y,{className:"w-4 h-4"}),s.jsx("span",{children:e("receipts.receipt")})]}),s.jsx("button",{onClick:q=>{q.stopPropagation(),p(Z),x(!0),C(Z.status)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200",children:e("adminPage.update")}),Z.deliveryMethod==="DELIVERY"&&!Z.deliveryPerson&&Z.status==="CONFIRMED"&&s.jsx("button",{onClick:q=>{q.stopPropagation(),p(Z),y(!0)},className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200",children:e("adminPage.assign")})]})})]},Z.id)})})]})})}),W.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ue,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminPage.noOrdersFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage.adjustSearchCriteria")})]}),w&&f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage.updateOrder")," #",f.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage.newStatus")}),s.jsx("select",{value:N,onChange:Z=>C(Z.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:D.map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{x(!1),p(null),C("")},className:"btn btn-outline flex-1",children:e("common.cancel")}),s.jsx("button",{onClick:X,className:"btn btn-primary flex-1",children:e("adminPage.update")})]})]})}),k&&f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage.assignDeliveryPerson")," #",f.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage.deliveryPerson")}),s.jsxs("select",{value:P,onChange:Z=>E(Z.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:e("adminPage.selectDeliveryPerson")}),U.map(Z=>s.jsxs("option",{value:Z.id,children:[Z.name," (",Z.phone,")"]},Z.id))]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{y(!1),p(null),E("")},className:"btn btn-outline flex-1",children:e("common.cancel")}),s.jsx("button",{onClick:B,disabled:!P,className:"btn btn-primary flex-1",children:e("adminPage.assign")})]})]})}),s.jsx(fS,{isOpen:b,onClose:()=>j(!1),order:f,onEmailSent:()=>{K.success(e("receipts.emailSentSuccess"))}})]})})]})})},wO=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(ie=>ie.auth),{products:n,categories:a}=we(ie=>ie.products),[i,o]=_.useState([]),[d,c]=_.useState(null),[h,m]=_.useState({name:"",email:"",phone:""}),[f,p]=_.useState(""),[w,x]=_.useState(""),[k,y]=_.useState("cash"),[b]=_.useState("COMPLETED"),[j,N]=_.useState(""),[C,P]=_.useState(""),[E,T]=_.useState([]),[O,I]=_.useState([]),[W,X]=_.useState(!1),[B,D]=_.useState(!1),[U,Z]=_.useState(null);_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(cn({limit:100})),t(fi()),G(),F())},[t,r]);const G=async()=>{try{const ie=await he.get("/shipping");T(ie.data),ie.data.length>0&&P(ie.data[0].id)}catch(ie){console.error("Error fetching shipping options:",ie)}},F=async()=>{try{const ie=await fetch("/api/payment-gateways",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(ie.ok){const Ae=((await ie.json()).data.gateways||[]).filter(Q=>Q.isEnabled);I(Ae),Ae.length>0&&y(Ae[0].provider)}}catch(ie){console.error("Error fetching payment gateways:",ie),K.error("Failed to load payment methods")}},R=n.filter(ie=>{const Te=ie.name.toLowerCase().includes(f.toLowerCase())||ie.nameIs.toLowerCase().includes(f.toLowerCase()),Ae=!w||ie.categoryId===parseInt(w);return Te&&Ae&&ie.isActive}),q=ie=>{const Te=i.find(Ae=>Ae.productId===ie.id);o(Te?i.map(Ae=>Ae.productId===ie.id?{...Ae,quantity:Ae.quantity+1}:Ae):[...i,{productId:ie.id,product:ie,quantity:1,price:ie.price}])},J=(ie,Te)=>{Te<=0?o(i.filter(Ae=>Ae.productId!==ie)):o(i.map(Ae=>Ae.productId===ie?{...Ae,quantity:Te}:Ae))},re=ie=>{o(i.filter(Te=>Te.productId!==ie))},V=i.reduce((ie,Te)=>ie+Te.price*Te.quantity,0),ae=E.find(ie=>ie.id===parseInt(C)),fe=ae?ae.fee:0,be=V+fe,z=async ie=>{if(!(ie.length<2))try{return(await he.get(`/customers?search=${ie}&limit=10`)).data.customers||[]}catch(Te){return console.error("Error searching customers:",Te),[]}},xe=async()=>{var ie,Te;if(i.length===0){K.error("Cart is empty");return}if(!d&&!h.email){K.error("Please select a customer or enter guest information");return}if(!C){K.error("Please select a shipping option");return}X(!0);try{const Ae={items:i.map(ge=>({productId:ge.productId,quantity:ge.quantity,price:ge.price})),shippingOptionId:parseInt(C),paymentMethod:k,paymentStatus:b,notes:j,...d?{customerId:d.id}:{guestInfo:h}},Q=await he.post("/orders/pos",Ae);Z(Q.data.order),D(!0),o([]),c(null),m({name:"",email:"",phone:""}),N(""),K.success("Order processed successfully!")}catch(Ae){console.error("Error processing order:",Ae),K.error(((Te=(ie=Ae.response)==null?void 0:ie.data)==null?void 0:Te.message)||"Failed to process order")}finally{X(!1)}},Me=()=>{window.print()},ze=async ie=>{if(U)try{await he.post(`/orders/${U.id}/receipt/email`,{email:ie}),K.success("Receipt sent successfully!")}catch(Te){console.error("Error sending receipt:",Te),K.error("Failed to send receipt")}},Ee=async()=>{if(U)try{const ie=await he.get(`/orders/${U.id}/receipt/pdf`,{responseType:"blob"}),Te=window.URL.createObjectURL(new Blob([ie.data])),Ae=document.createElement("a");Ae.href=Te,Ae.setAttribute("download",`receipt-${U.orderNumber}.pdf`),document.body.appendChild(Ae),Ae.click(),Ae.remove(),window.URL.revokeObjectURL(Te)}catch(ie){console.error("Error downloading PDF:",ie),K.error("Failed to download PDF")}};return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("admin.accessDeniedMessage")})]})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:E_,title:e("pos.title"),description:e("pos.description")}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsxs("div",{className:"col-span-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("pos.customer")}),d?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Hr,{className:"w-5 h-5 text-blue-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.email})]})]}),s.jsx("button",{onClick:()=>c(null),className:"text-red-600 hover:text-red-800",children:s.jsx(ut,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("pos.searchCustomers"),className:"input pl-10 w-full",onChange:async ie=>{const Te=ie.target.value;Te.length>=2&&await z(Te)}})]}),s.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:e("pos.or")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("input",{type:"text",placeholder:e("pos.guestName"),value:h.name,onChange:ie=>m({...h,name:ie.target.value}),className:"input"}),s.jsx("input",{type:"email",placeholder:e("pos.guestEmail"),value:h.email,onChange:ie=>m({...h,email:ie.target.value}),className:"input"}),s.jsx("input",{type:"tel",placeholder:e("pos.guestPhone"),value:h.phone,onChange:ie=>m({...h,phone:ie.target.value}),className:"input"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("pos.searchProducts"),value:f,onChange:ie=>p(ie.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:w,onChange:ie=>x(ie.target.value),className:"input w-full md:w-48",children:[s.jsx("option",{value:"",children:e("pos.allCategories")}),a.map(ie=>s.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:R.map(ie=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer bg-white dark:bg-gray-800",onClick:()=>q(ie),children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white rounded-lg mb-3 flex items-center justify-center border border-gray-200 dark:border-gray-300",children:ie.imageUrl?s.jsx("img",{src:ie.imageUrl,alt:ie.name,className:"w-full h-full object-contain rounded-lg p-2"}):s.jsx(Ue,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white mb-1 line-clamp-2",children:ie.name}),s.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[ie.price.toLocaleString()," ISK"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("pos.stock"),": ",ie.stock]})]},ie.id))})]})]}),s.jsx("div",{className:"col-span-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(yr,{className:"w-5 h-5 mr-2"}),e("pos.cartTitle")," (",i.length," ",e("pos.cartItems"),")"]}),s.jsx("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:i.map(ie=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:ie.product.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[ie.price.toLocaleString()," ISK each"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>J(ie.productId,ie.quantity-1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(Zh,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center text-sm font-medium",children:ie.quantity}),s.jsx("button",{onClick:()=>J(ie.productId,ie.quantity+1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(vr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>re(ie.productId),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-full",children:s.jsx(ut,{className:"w-4 h-4"})})]})]},ie.productId))}),s.jsxs("div",{className:"space-y-2 mb-6",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("pos.subtotal"),":"]}),s.jsxs("span",{children:[V.toLocaleString()," ISK"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("pos.shipping"),":"]}),s.jsxs("span",{children:[fe.toLocaleString()," ISK"]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 dark:border-gray-700 pt-2",children:[s.jsxs("span",{children:[e("pos.total"),":"]}),s.jsxs("span",{children:[be.toLocaleString()," ISK"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.paymentMethod")}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:O.length>0?O.map(ie=>{let Te=mn;return ie.provider==="valitor"||ie.provider==="rapyd"||ie.provider==="stripe"||ie.provider==="paypal"||ie.provider==="netgiro"||ie.provider==="teya"?Te=mn:(ie.provider==="cash_on_delivery"||ie.provider==="pay_on_pickup")&&(Te=MM),s.jsxs("button",{onClick:()=>y(ie.provider),className:`p-3 rounded-lg border text-sm font-medium transition-all ${k===ie.provider?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 ring-2 ring-blue-200":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300 hover:border-gray-400"}`,children:[s.jsx(Te,{className:"w-5 h-5 mx-auto mb-1"}),s.jsx("div",{className:"text-xs truncate",children:ie.displayName}),s.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:ie.environment==="production"?"Live":"Test"})]},ie.id)}):s.jsx("div",{className:"col-span-2 text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No payment methods available. Please configure payment gateways in settings."})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.shippingOption")}),s.jsx("select",{value:C,onChange:ie=>P(ie.target.value),className:"input w-full",children:E.map(ie=>s.jsxs("option",{value:ie.id,children:[ie.name," - ",ie.fee.toLocaleString()," ISK"]},ie.id))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.notes")}),s.jsx("textarea",{value:j,onChange:ie=>N(ie.target.value),className:"input w-full h-20 resize-none",placeholder:e("pos.orderNotes")})]}),s.jsx("button",{onClick:xe,disabled:i.length===0||W,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:W?s.jsxs(s.Fragment,{children:[s.jsx(qt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yt,{className:"w-4 h-4 mr-2"}),e("pos.processOrder")]})})]})})]}),B&&U&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Order Receipt - ",U.orderNumber]}),s.jsx("button",{onClick:()=>D(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ut,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Order Date:"}),s.jsx("p",{children:new Date(U.createdAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Status:"}),s.jsx("p",{className:"capitalize",children:U.status})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium mb-2",children:"Items:"}),s.jsx("div",{className:"space-y-2",children:U.items.map(ie=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[ie.product.name," x ",ie.quantity]}),s.jsxs("span",{children:[(ie.price*ie.quantity).toLocaleString()," ISK"]})]},ie.id))})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsxs("span",{children:[e("pos.total"),":"]}),s.jsxs("span",{children:[U.totalAmount.toLocaleString()," ISK"]})]})})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:Me,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(Ny,{className:"w-4 h-4 mr-2"}),"Print"]}),s.jsxs("button",{onClick:()=>{const ie=prompt("Enter email address:");ie&&ze(ie)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(Sy,{className:"w-4 h-4 mr-2"}),"Email"]}),s.jsxs("button",{onClick:Ee,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(gn,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]})})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dc(e){return e+.5|0}const ca=(e,t,r)=>Math.max(Math.min(e,r),t);function Il(e){return ca(dc(e*2.55),0,255)}function Pa(e){return ca(dc(e*255),0,255)}function Tn(e){return ca(dc(e/2.55)/100,0,1)}function jk(e){return ca(dc(e*100),0,100)}const gs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Up=[..."0123456789ABCDEF"],kO=e=>Up[e&15],jO=e=>Up[(e&240)>>4]+Up[e&15],tu=e=>(e&240)>>4===(e&15),NO=e=>tu(e.r)&&tu(e.g)&&tu(e.b)&&tu(e.a);function _O(e){var t=e.length,r;return e[0]==="#"&&(t===4||t===5?r={r:255&gs[e[1]]*17,g:255&gs[e[2]]*17,b:255&gs[e[3]]*17,a:t===5?gs[e[4]]*17:255}:(t===7||t===9)&&(r={r:gs[e[1]]<<4|gs[e[2]],g:gs[e[3]]<<4|gs[e[4]],b:gs[e[5]]<<4|gs[e[6]],a:t===9?gs[e[7]]<<4|gs[e[8]]:255})),r}const SO=(e,t)=>e<255?t(e):"";function CO(e){var t=NO(e)?kO:jO;return e?"#"+t(e.r)+t(e.g)+t(e.b)+SO(e.a,t):void 0}const PO=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _S(e,t,r){const n=t*Math.min(r,1-r),a=(i,o=(i+e/30)%12)=>r-n*Math.max(Math.min(o-3,9-o,1),-1);return[a(0),a(8),a(4)]}function EO(e,t,r){const n=(a,i=(a+e/60)%6)=>r-r*t*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function IO(e,t,r){const n=_S(e,1,.5);let a;for(t+r>1&&(a=1/(t+r),t*=a,r*=a),a=0;a<3;a++)n[a]*=1-t-r,n[a]+=t;return n}function TO(e,t,r,n,a){return e===a?(t-r)/n+(t<r?6:0):t===a?(r-e)/n+2:(e-t)/n+4}function By(e){const r=e.r/255,n=e.g/255,a=e.b/255,i=Math.max(r,n,a),o=Math.min(r,n,a),d=(i+o)/2;let c,h,m;return i!==o&&(m=i-o,h=d>.5?m/(2-i-o):m/(i+o),c=TO(r,n,a,m,i),c=c*60+.5),[c|0,h||0,d]}function $y(e,t,r,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,n)).map(Pa)}function Uy(e,t,r){return $y(_S,e,t,r)}function LO(e,t,r){return $y(IO,e,t,r)}function MO(e,t,r){return $y(EO,e,t,r)}function SS(e){return(e%360+360)%360}function AO(e){const t=PO.exec(e);let r=255,n;if(!t)return;t[5]!==n&&(r=t[6]?Il(+t[5]):Pa(+t[5]));const a=SS(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=LO(a,i,o):t[1]==="hsv"?n=MO(a,i,o):n=Uy(a,i,o),{r:n[0],g:n[1],b:n[2],a:r}}function OO(e,t){var r=By(e);r[0]=SS(r[0]+t),r=Uy(r),e.r=r[0],e.g=r[1],e.b=r[2]}function RO(e){if(!e)return;const t=By(e),r=t[0],n=jk(t[1]),a=jk(t[2]);return e.a<255?`hsla(${r}, ${n}%, ${a}%, ${Tn(e.a)})`:`hsl(${r}, ${n}%, ${a}%)`}const Nk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_k={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function DO(){const e={},t=Object.keys(_k),r=Object.keys(Nk);let n,a,i,o,d;for(n=0;n<t.length;n++){for(o=d=t[n],a=0;a<r.length;a++)i=r[a],d=d.replace(i,Nk[i]);i=parseInt(_k[o],16),e[d]=[i>>16&255,i>>8&255,i&255]}return e}let ru;function FO(e){ru||(ru=DO(),ru.transparent=[0,0,0,0]);const t=ru[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const zO=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function BO(e){const t=zO.exec(e);let r=255,n,a,i;if(t){if(t[7]!==n){const o=+t[7];r=t[8]?Il(o):ca(o*255,0,255)}return n=+t[1],a=+t[3],i=+t[5],n=255&(t[2]?Il(n):ca(n,0,255)),a=255&(t[4]?Il(a):ca(a,0,255)),i=255&(t[6]?Il(i):ca(i,0,255)),{r:n,g:a,b:i,a:r}}}function $O(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Tn(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const Wf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,$i=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function UO(e,t,r){const n=$i(Tn(e.r)),a=$i(Tn(e.g)),i=$i(Tn(e.b));return{r:Pa(Wf(n+r*($i(Tn(t.r))-n))),g:Pa(Wf(a+r*($i(Tn(t.g))-a))),b:Pa(Wf(i+r*($i(Tn(t.b))-i))),a:e.a+r*(t.a-e.a)}}function su(e,t,r){if(e){let n=By(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*r,t===0?360:1)),n=Uy(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function CS(e,t){return e&&Object.assign(t||{},e)}function Sk(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Pa(e[3]))):(t=CS(e,{r:0,g:0,b:0,a:1}),t.a=Pa(t.a)),t}function VO(e){return e.charAt(0)==="r"?BO(e):AO(e)}class Ud{constructor(t){if(t instanceof Ud)return t;const r=typeof t;let n;r==="object"?n=Sk(t):r==="string"&&(n=_O(t)||FO(t)||VO(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=CS(this._rgb);return t&&(t.a=Tn(t.a)),t}set rgb(t){this._rgb=Sk(t)}rgbString(){return this._valid?$O(this._rgb):void 0}hexString(){return this._valid?CO(this._rgb):void 0}hslString(){return this._valid?RO(this._rgb):void 0}mix(t,r){if(t){const n=this.rgb,a=t.rgb;let i;const o=r===i?.5:r,d=2*o-1,c=n.a-a.a,h=((d*c===-1?d:(d+c)/(1+d*c))+1)/2;i=1-h,n.r=255&h*n.r+i*a.r+.5,n.g=255&h*n.g+i*a.g+.5,n.b=255&h*n.b+i*a.b+.5,n.a=o*n.a+(1-o)*a.a,this.rgb=n}return this}interpolate(t,r){return t&&(this._rgb=UO(this._rgb,t._rgb,r)),this}clone(){return new Ud(this.rgb)}alpha(t){return this._rgb.a=Pa(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=dc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return su(this._rgb,2,t),this}darken(t){return su(this._rgb,2,-t),this}saturate(t){return su(this._rgb,1,t),this}desaturate(t){return su(this._rgb,1,-t),this}rotate(t){return OO(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Sn(){}const HO=(()=>{let e=0;return()=>e++})();function et(e){return e==null}function Vt(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Ye(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function js(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Gs(e,t){return js(e)?e:t}function $e(e,t){return typeof e>"u"?t:e}const WO=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function pt(e,t,r){if(e&&typeof e.call=="function")return e.apply(r,t)}function tt(e,t,r,n){let a,i,o;if(Vt(e))for(i=e.length,a=0;a<i;a++)t.call(r,e[a],a);else if(Ye(e))for(o=Object.keys(e),i=o.length,a=0;a<i;a++)t.call(r,e[o[a]],o[a])}function sm(e,t){let r,n,a,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,n=e.length;r<n;++r)if(a=e[r],i=t[r],a.datasetIndex!==i.datasetIndex||a.index!==i.index)return!1;return!0}function nm(e){if(Vt(e))return e.map(nm);if(Ye(e)){const t=Object.create(null),r=Object.keys(e),n=r.length;let a=0;for(;a<n;++a)t[r[a]]=nm(e[r[a]]);return t}return e}function PS(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function qO(e,t,r,n){if(!PS(e))return;const a=t[e],i=r[e];Ye(a)&&Ye(i)?Vd(a,i,n):t[e]=nm(i)}function Vd(e,t,r){const n=Vt(t)?t:[t],a=n.length;if(!Ye(e))return e;r=r||{};const i=r.merger||qO;let o;for(let d=0;d<a;++d){if(o=n[d],!Ye(o))continue;const c=Object.keys(o);for(let h=0,m=c.length;h<m;++h)i(c[h],e,o,r)}return e}function nd(e,t){return Vd(e,t,{merger:KO})}function KO(e,t,r){if(!PS(e))return;const n=t[e],a=r[e];Ye(n)&&Ye(a)?nd(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=nm(a))}const Ck={"":e=>e,x:e=>e.x,y:e=>e.y};function ZO(e){const t=e.split("."),r=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function GO(e){const t=ZO(e);return r=>{for(const n of t){if(n==="")break;r=r&&r[n]}return r}}function Ao(e,t){return(Ck[t]||(Ck[t]=GO(t)))(e)}function Vy(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Hd=e=>typeof e<"u",Oa=e=>typeof e=="function",Pk=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};function YO(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const ct=Math.PI,ir=2*ct,JO=ir+ct,am=Number.POSITIVE_INFINITY,XO=ct/180,sr=ct/2,Ga=ct/4,Ek=ct*2/3,ES=Math.log10,un=Math.sign;function ad(e,t,r){return Math.abs(e-t)<r}function Ik(e){const t=Math.round(e);e=ad(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(ES(e))),n=e/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function QO(e){const t=[],r=Math.sqrt(e);let n;for(n=1;n<r;n++)e%n===0&&(t.push(n),t.push(e/n));return r===(r|0)&&t.push(r),t.sort((a,i)=>a-i).pop(),t}function eR(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function Wd(e){return!eR(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function tR(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}function rR(e,t,r){let n,a,i;for(n=0,a=e.length;n<a;n++)i=e[n][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function di(e){return e*(ct/180)}function sR(e){return e*(180/ct)}function Tk(e){if(!js(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function IS(e,t){const r=t.x-e.x,n=t.y-e.y,a=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*ct&&(i+=ir),{angle:i,distance:a}}function Vp(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function nR(e,t){return(e-t+JO)%ir-ct}function Ls(e){return(e%ir+ir)%ir}function Hy(e,t,r,n){const a=Ls(e),i=Ls(t),o=Ls(r),d=Ls(i-a),c=Ls(o-a),h=Ls(a-i),m=Ls(a-o);return a===i||a===o||n&&i===o||d>c&&h<m}function pr(e,t,r){return Math.max(t,Math.min(r,e))}function aR(e){return pr(e,-32768,32767)}function ua(e,t,r,n=1e-6){return e>=Math.min(t,r)-n&&e<=Math.max(t,r)+n}function Wy(e,t,r){r=r||(o=>e[o]<t);let n=e.length-1,a=0,i;for(;n-a>1;)i=a+n>>1,r(i)?a=i:n=i;return{lo:a,hi:n}}const ci=(e,t,r,n)=>Wy(e,r,n?a=>{const i=e[a][t];return i<r||i===r&&e[a+1][t]===r}:a=>e[a][t]<r),iR=(e,t,r)=>Wy(e,r,n=>e[n][t]>=r);function oR(e,t,r){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>r;)a--;return n>0||a<e.length?e.slice(n,a):e}const TS=["push","pop","shift","splice","unshift"];function lR(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),TS.forEach(r=>{const n="_onData"+Vy(r),a=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value(...i){const o=a.apply(this,i);return e._chartjs.listeners.forEach(d=>{typeof d[n]=="function"&&d[n](...i)}),o}})})}function Lk(e,t){const r=e._chartjs;if(!r)return;const n=r.listeners,a=n.indexOf(t);a!==-1&&n.splice(a,1),!(n.length>0)&&(TS.forEach(i=>{delete e[i]}),delete e._chartjs)}function LS(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const MS=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function AS(e,t){let r=[],n=!1;return function(...a){r=a,n||(n=!0,MS.call(window,()=>{n=!1,e.apply(t,r)}))}}function dR(e,t){let r;return function(...n){return t?(clearTimeout(r),r=setTimeout(e,t,n)):e.apply(this,n),t}}const qy=e=>e==="start"?"left":e==="end"?"right":"center",mr=(e,t,r)=>e==="start"?t:e==="end"?r:(t+r)/2,cR=(e,t,r,n)=>e===(n?"left":"right")?r:e==="center"?(t+r)/2:t;function uR(e,t,r){const n=t.length;let a=0,i=n;if(e._sorted){const{iScale:o,vScale:d,_parsed:c}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,m=o.axis,{min:f,max:p,minDefined:w,maxDefined:x}=o.getUserBounds();if(w){if(a=Math.min(ci(c,m,f).lo,r?n:ci(t,m,o.getPixelForValue(f)).lo),h){const k=c.slice(0,a+1).reverse().findIndex(y=>!et(y[d.axis]));a-=Math.max(0,k)}a=pr(a,0,n-1)}if(x){let k=Math.max(ci(c,o.axis,p,!0).hi+1,r?0:ci(t,m,o.getPixelForValue(p),!0).hi+1);if(h){const y=c.slice(k-1).findIndex(b=>!et(b[d.axis]));k+=Math.max(0,y)}i=pr(k,a,n)-a}else i=n-a}return{start:a,count:i}}function hR(e){const{xScale:t,yScale:r,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!n)return e._scaleRanges=a,!0;const i=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,a),i}const nu=e=>e===0||e===1,Mk=(e,t,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*ir/r)),Ak=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*ir/r)+1,id={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*sr)+1,easeOutSine:e=>Math.sin(e*sr),easeInOutSine:e=>-.5*(Math.cos(ct*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>nu(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>nu(e)?e:Mk(e,.075,.3),easeOutElastic:e=>nu(e)?e:Ak(e,.075,.3),easeInOutElastic(e){return nu(e)?e:e<.5?.5*Mk(e*2,.1125,.45):.5+.5*Ak(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-id.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?id.easeInBounce(e*2)*.5:id.easeOutBounce(e*2-1)*.5+.5};function Ky(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Ok(e){return Ky(e)?e:new Ud(e)}function qf(e){return Ky(e)?e:new Ud(e).saturate(.5).darken(.1).hexString()}const mR=["x","y","borderWidth","radius","tension"],gR=["color","borderColor","backgroundColor"];function fR(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:gR},numbers:{type:"number",properties:mR}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function pR(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Rk=new Map;function xR(e,t){t=t||{};const r=e+JSON.stringify(t);let n=Rk.get(r);return n||(n=new Intl.NumberFormat(e,t),Rk.set(r,n)),n}function OS(e,t,r){return xR(t,r).format(e)}const yR={values(e){return Vt(e)?e:""+e},numeric(e,t,r){if(e===0)return"0";const n=this.chart.options.locale;let a,i=e;if(r.length>1){const h=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(h<1e-4||h>1e15)&&(a="scientific"),i=bR(e,r)}const o=ES(Math.abs(i)),d=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:a,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(c,this.options.ticks.format),OS(e,n,c)}};function bR(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}var RS={formatters:yR};function vR(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:RS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Si=Object.create(null),Hp=Object.create(null);function od(e,t){if(!t)return e;const r=t.split(".");for(let n=0,a=r.length;n<a;++n){const i=r[n];e=e[i]||(e[i]=Object.create(null))}return e}function Kf(e,t,r){return typeof t=="string"?Vd(od(e,t),r):Vd(od(e,""),t)}class wR{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,a)=>qf(a.backgroundColor),this.hoverBorderColor=(n,a)=>qf(a.borderColor),this.hoverColor=(n,a)=>qf(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Kf(this,t,r)}get(t){return od(this,t)}describe(t,r){return Kf(Hp,t,r)}override(t,r){return Kf(Si,t,r)}route(t,r,n,a){const i=od(this,t),o=od(this,n),d="_"+r;Object.defineProperties(i,{[d]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[d],h=o[a];return Ye(c)?Object.assign({},h,c):$e(c,h)},set(c){this[d]=c}}})}apply(t){t.forEach(r=>r(this))}}var It=new wR({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[fR,pR,vR]);function kR(e){return!e||et(e.size)||et(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Dk(e,t,r,n,a){let i=t[a];return i||(i=t[a]=e.measureText(a).width,r.push(a)),i>n&&(n=i),n}function Ya(e,t,r){const n=e.currentDevicePixelRatio,a=r!==0?Math.max(r/2,.5):0;return Math.round((t-a)*n)/n+a}function Fk(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Wp(e,t,r,n){DS(e,t,r,n,null)}function DS(e,t,r,n,a){let i,o,d,c,h,m,f,p;const w=t.pointStyle,x=t.rotation,k=t.radius;let y=(x||0)*XO;if(w&&typeof w=="object"&&(i=w.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(r,n),e.rotate(y),e.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),e.restore();return}if(!(isNaN(k)||k<=0)){switch(e.beginPath(),w){default:a?e.ellipse(r,n,a/2,k,0,0,ir):e.arc(r,n,k,0,ir),e.closePath();break;case"triangle":m=a?a/2:k,e.moveTo(r+Math.sin(y)*m,n-Math.cos(y)*k),y+=Ek,e.lineTo(r+Math.sin(y)*m,n-Math.cos(y)*k),y+=Ek,e.lineTo(r+Math.sin(y)*m,n-Math.cos(y)*k),e.closePath();break;case"rectRounded":h=k*.516,c=k-h,o=Math.cos(y+Ga)*c,f=Math.cos(y+Ga)*(a?a/2-h:c),d=Math.sin(y+Ga)*c,p=Math.sin(y+Ga)*(a?a/2-h:c),e.arc(r-f,n-d,h,y-ct,y-sr),e.arc(r+p,n-o,h,y-sr,y),e.arc(r+f,n+d,h,y,y+sr),e.arc(r-p,n+o,h,y+sr,y+ct),e.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*k,m=a?a/2:c,e.rect(r-m,n-c,2*m,2*c);break}y+=Ga;case"rectRot":f=Math.cos(y)*(a?a/2:k),o=Math.cos(y)*k,d=Math.sin(y)*k,p=Math.sin(y)*(a?a/2:k),e.moveTo(r-f,n-d),e.lineTo(r+p,n-o),e.lineTo(r+f,n+d),e.lineTo(r-p,n+o),e.closePath();break;case"crossRot":y+=Ga;case"cross":f=Math.cos(y)*(a?a/2:k),o=Math.cos(y)*k,d=Math.sin(y)*k,p=Math.sin(y)*(a?a/2:k),e.moveTo(r-f,n-d),e.lineTo(r+f,n+d),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o);break;case"star":f=Math.cos(y)*(a?a/2:k),o=Math.cos(y)*k,d=Math.sin(y)*k,p=Math.sin(y)*(a?a/2:k),e.moveTo(r-f,n-d),e.lineTo(r+f,n+d),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o),y+=Ga,f=Math.cos(y)*(a?a/2:k),o=Math.cos(y)*k,d=Math.sin(y)*k,p=Math.sin(y)*(a?a/2:k),e.moveTo(r-f,n-d),e.lineTo(r+f,n+d),e.moveTo(r+p,n-o),e.lineTo(r-p,n+o);break;case"line":o=a?a/2:Math.cos(y)*k,d=Math.sin(y)*k,e.moveTo(r-o,n-d),e.lineTo(r+o,n+d);break;case"dash":e.moveTo(r,n),e.lineTo(r+Math.cos(y)*(a?a/2:k),n+Math.sin(y)*k);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function qd(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function Zy(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Gy(e){e.restore()}function jR(e,t,r,n,a){if(!t)return e.lineTo(r.x,r.y);if(a==="middle"){const i=(t.x+r.x)/2;e.lineTo(i,t.y),e.lineTo(i,r.y)}else a==="after"!=!!n?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function NR(e,t,r,n){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function _R(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),et(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function SR(e,t,r,n,a){if(a.strikethrough||a.underline){const i=e.measureText(n),o=t-i.actualBoundingBoxLeft,d=t+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,h=r+i.actualBoundingBoxDescent,m=a.strikethrough?(c+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(o,m),e.lineTo(d,m),e.stroke()}}function CR(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function Kd(e,t,r,n,a,i={}){const o=Vt(t)?t:[t],d=i.strokeWidth>0&&i.strokeColor!=="";let c,h;for(e.save(),e.font=a.string,_R(e,i),c=0;c<o.length;++c)h=o[c],i.backdrop&&CR(e,i.backdrop),d&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),et(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(h,r,n,i.maxWidth)),e.fillText(h,r,n,i.maxWidth),SR(e,r,n,h,i),n+=Number(a.lineHeight);e.restore()}function im(e,t){const{x:r,y:n,w:a,h:i,radius:o}=t;e.arc(r+o.topLeft,n+o.topLeft,o.topLeft,1.5*ct,ct,!0),e.lineTo(r,n+i-o.bottomLeft),e.arc(r+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,ct,sr,!0),e.lineTo(r+a-o.bottomRight,n+i),e.arc(r+a-o.bottomRight,n+i-o.bottomRight,o.bottomRight,sr,0,!0),e.lineTo(r+a,n+o.topRight),e.arc(r+a-o.topRight,n+o.topRight,o.topRight,0,-sr,!0),e.lineTo(r+o.topLeft,n)}const PR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ER=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function IR(e,t){const r=(""+e).match(PR);if(!r||r[1]==="normal")return t*1.2;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100;break}return t*e}const TR=e=>+e||0;function Yy(e,t){const r={},n=Ye(t),a=n?Object.keys(t):t,i=Ye(e)?n?o=>$e(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of a)r[o]=TR(i(o));return r}function FS(e){return Yy(e,{top:"y",right:"x",bottom:"y",left:"x"})}function bo(e){return Yy(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ns(e){const t=FS(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xr(e,t){e=e||{},t=t||It.font;let r=$e(e.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let n=$e(e.style,t.style);n&&!(""+n).match(ER)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:$e(e.family,t.family),lineHeight:IR($e(e.lineHeight,t.lineHeight),r),size:r,style:n,weight:$e(e.weight,t.weight),string:""};return a.string=kR(a),a}function au(e,t,r,n){let a,i,o;for(a=0,i=e.length;a<i;++a)if(o=e[a],o!==void 0&&o!==void 0)return o}function LR(e,t,r){const{min:n,max:a}=e,i=WO(t,(a-n)/2),o=(d,c)=>r&&d===0?0:d+c;return{min:o(n,-Math.abs(i)),max:o(a,i)}}function Ei(e,t){return Object.assign(Object.create(e),t)}function Jy(e,t=[""],r,n,a=()=>e[0]){const i=r||e;typeof n>"u"&&(n=US("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:a,override:d=>Jy([d,...e],t,i,n)};return new Proxy(o,{deleteProperty(d,c){return delete d[c],delete d._keys,delete e[0][c],!0},get(d,c){return BS(d,c,()=>BR(c,t,e,d))},getOwnPropertyDescriptor(d,c){return Reflect.getOwnPropertyDescriptor(d._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(d,c){return Bk(d).includes(c)},ownKeys(d){return Bk(d)},set(d,c,h){const m=d._storage||(d._storage=a());return d[c]=m[c]=h,delete d._keys,!0}})}function Oo(e,t,r,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:zS(e,n),setContext:i=>Oo(e,i,r,n),override:i=>Oo(e.override(i),t,r,n)};return new Proxy(a,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,d){return BS(i,o,()=>AR(i,o,d))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,d){return e[o]=d,delete i[o],!0}})}function zS(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:r,indexable:n,isScriptable:Oa(r)?r:()=>r,isIndexable:Oa(n)?n:()=>n}}const MR=(e,t)=>e?e+Vy(t):t,Xy=(e,t)=>Ye(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function BS(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const n=r();return e[t]=n,n}function AR(e,t,r){const{_proxy:n,_context:a,_subProxy:i,_descriptors:o}=e;let d=n[t];return Oa(d)&&o.isScriptable(t)&&(d=OR(t,d,e,r)),Vt(d)&&d.length&&(d=RR(t,d,e,o.isIndexable)),Xy(t,d)&&(d=Oo(d,a,i&&i[t],o)),d}function OR(e,t,r,n){const{_proxy:a,_context:i,_subProxy:o,_stack:d}=r;if(d.has(e))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+e);d.add(e);let c=t(i,o||n);return d.delete(e),Xy(e,c)&&(c=Qy(a._scopes,a,e,c)),c}function RR(e,t,r,n){const{_proxy:a,_context:i,_subProxy:o,_descriptors:d}=r;if(typeof i.index<"u"&&n(e))return t[i.index%t.length];if(Ye(t[0])){const c=t,h=a._scopes.filter(m=>m!==c);t=[];for(const m of c){const f=Qy(h,a,e,m);t.push(Oo(f,i,o&&o[e],d))}}return t}function $S(e,t,r){return Oa(e)?e(t,r):e}const DR=(e,t)=>e===!0?t:typeof e=="string"?Ao(t,e):void 0;function FR(e,t,r,n,a){for(const i of t){const o=DR(r,i);if(o){e.add(o);const d=$S(o._fallback,r,a);if(typeof d<"u"&&d!==r&&d!==n)return d}else if(o===!1&&typeof n<"u"&&r!==n)return null}return!1}function Qy(e,t,r,n){const a=t._rootScopes,i=$S(t._fallback,r,n),o=[...e,...a],d=new Set;d.add(n);let c=zk(d,o,r,i||r,n);return c===null||typeof i<"u"&&i!==r&&(c=zk(d,o,i,c,n),c===null)?!1:Jy(Array.from(d),[""],a,i,()=>zR(t,r,n))}function zk(e,t,r,n,a){for(;r;)r=FR(e,t,r,n,a);return r}function zR(e,t,r){const n=e._getTarget();t in n||(n[t]={});const a=n[t];return Vt(a)&&Ye(r)?r:a||{}}function BR(e,t,r,n){let a;for(const i of t)if(a=US(MR(i,e),r),typeof a<"u")return Xy(e,a)?Qy(r,n,e,a):a}function US(e,t){for(const r of t){if(!r)continue;const n=r[e];if(typeof n<"u")return n}}function Bk(e){let t=e._keys;return t||(t=e._keys=$R(e._scopes)),t}function $R(e){const t=new Set;for(const r of e)for(const n of Object.keys(r).filter(a=>!a.startsWith("_")))t.add(n);return Array.from(t)}const UR=Number.EPSILON||1e-14,Ro=(e,t)=>t<e.length&&!e[t].skip&&e[t],VS=e=>e==="x"?"y":"x";function VR(e,t,r,n){const a=e.skip?t:e,i=t,o=r.skip?t:r,d=Vp(i,a),c=Vp(o,i);let h=d/(d+c),m=c/(d+c);h=isNaN(h)?0:h,m=isNaN(m)?0:m;const f=n*h,p=n*m;return{previous:{x:i.x-f*(o.x-a.x),y:i.y-f*(o.y-a.y)},next:{x:i.x+p*(o.x-a.x),y:i.y+p*(o.y-a.y)}}}function HR(e,t,r){const n=e.length;let a,i,o,d,c,h=Ro(e,0);for(let m=0;m<n-1;++m)if(c=h,h=Ro(e,m+1),!(!c||!h)){if(ad(t[m],0,UR)){r[m]=r[m+1]=0;continue}a=r[m]/t[m],i=r[m+1]/t[m],d=Math.pow(a,2)+Math.pow(i,2),!(d<=9)&&(o=3/Math.sqrt(d),r[m]=a*o*t[m],r[m+1]=i*o*t[m])}}function WR(e,t,r="x"){const n=VS(r),a=e.length;let i,o,d,c=Ro(e,0);for(let h=0;h<a;++h){if(o=d,d=c,c=Ro(e,h+1),!d)continue;const m=d[r],f=d[n];o&&(i=(m-o[r])/3,d[`cp1${r}`]=m-i,d[`cp1${n}`]=f-i*t[h]),c&&(i=(c[r]-m)/3,d[`cp2${r}`]=m+i,d[`cp2${n}`]=f+i*t[h])}}function qR(e,t="x"){const r=VS(t),n=e.length,a=Array(n).fill(0),i=Array(n);let o,d,c,h=Ro(e,0);for(o=0;o<n;++o)if(d=c,c=h,h=Ro(e,o+1),!!c){if(h){const m=h[t]-c[t];a[o]=m!==0?(h[r]-c[r])/m:0}i[o]=d?h?un(a[o-1])!==un(a[o])?0:(a[o-1]+a[o])/2:a[o-1]:a[o]}HR(e,a,i),WR(e,i,t)}function iu(e,t,r){return Math.max(Math.min(e,r),t)}function KR(e,t){let r,n,a,i,o,d=qd(e[0],t);for(r=0,n=e.length;r<n;++r)o=i,i=d,d=r<n-1&&qd(e[r+1],t),i&&(a=e[r],o&&(a.cp1x=iu(a.cp1x,t.left,t.right),a.cp1y=iu(a.cp1y,t.top,t.bottom)),d&&(a.cp2x=iu(a.cp2x,t.left,t.right),a.cp2y=iu(a.cp2y,t.top,t.bottom)))}function ZR(e,t,r,n,a){let i,o,d,c;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")qR(e,a);else{let h=n?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)d=e[i],c=VR(h,d,e[Math.min(i+1,o-(n?0:1))%o],t.tension),d.cp1x=c.previous.x,d.cp1y=c.previous.y,d.cp2x=c.next.x,d.cp2y=c.next.y,h=d}t.capBezierPoints&&KR(e,r)}function eb(){return typeof window<"u"&&typeof document<"u"}function tb(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function om(e,t,r){let n;return typeof e=="string"?(n=parseInt(e,10),e.indexOf("%")!==-1&&(n=n/100*t.parentNode[r])):n=e,n}const gg=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function GR(e,t){return gg(e).getPropertyValue(t)}const YR=["top","right","bottom","left"];function pi(e,t,r){const n={};r=r?"-"+r:"";for(let a=0;a<4;a++){const i=YR[a];n[i]=parseFloat(e[t+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const JR=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function XR(e,t){const r=e.touches,n=r&&r.length?r[0]:e,{offsetX:a,offsetY:i}=n;let o=!1,d,c;if(JR(a,i,e.target))d=a,c=i;else{const h=t.getBoundingClientRect();d=n.clientX-h.left,c=n.clientY-h.top,o=!0}return{x:d,y:c,box:o}}function ri(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:n}=t,a=gg(r),i=a.boxSizing==="border-box",o=pi(a,"padding"),d=pi(a,"border","width"),{x:c,y:h,box:m}=XR(e,r),f=o.left+(m&&d.left),p=o.top+(m&&d.top);let{width:w,height:x}=t;return i&&(w-=o.width+d.width,x-=o.height+d.height),{x:Math.round((c-f)/w*r.width/n),y:Math.round((h-p)/x*r.height/n)}}function QR(e,t,r){let n,a;if(t===void 0||r===void 0){const i=e&&tb(e);if(!i)t=e.clientWidth,r=e.clientHeight;else{const o=i.getBoundingClientRect(),d=gg(i),c=pi(d,"border","width"),h=pi(d,"padding");t=o.width-h.width-c.width,r=o.height-h.height-c.height,n=om(d.maxWidth,i,"clientWidth"),a=om(d.maxHeight,i,"clientHeight")}}return{width:t,height:r,maxWidth:n||am,maxHeight:a||am}}const ha=e=>Math.round(e*10)/10;function eD(e,t,r,n){const a=gg(e),i=pi(a,"margin"),o=om(a.maxWidth,e,"clientWidth")||am,d=om(a.maxHeight,e,"clientHeight")||am,c=QR(e,t,r);let{width:h,height:m}=c;if(a.boxSizing==="content-box"){const p=pi(a,"border","width"),w=pi(a,"padding");h-=w.width+p.width,m-=w.height+p.height}return h=Math.max(0,h-i.width),m=Math.max(0,n?h/n:m-i.height),h=ha(Math.min(h,o,c.maxWidth)),m=ha(Math.min(m,d,c.maxHeight)),h&&!m&&(m=ha(h/2)),(t!==void 0||r!==void 0)&&n&&c.height&&m>c.height&&(m=c.height,h=ha(Math.floor(m*n))),{width:h,height:m}}function $k(e,t,r){const n=t||1,a=ha(e.height*n),i=ha(e.width*n);e.height=ha(e.height),e.width=ha(e.width);const o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==n||o.height!==a||o.width!==i?(e.currentDevicePixelRatio=n,o.height=a,o.width=i,e.ctx.setTransform(n,0,0,n,0,0),!0):!1}const tD=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};eb()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function Uk(e,t){const r=GR(e,t),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function si(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function rD(e,t,r,n){return{x:e.x+r*(t.x-e.x),y:n==="middle"?r<.5?e.y:t.y:n==="after"?r<1?e.y:t.y:r>0?t.y:e.y}}function sD(e,t,r,n){const a={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=si(e,a,r),d=si(a,i,r),c=si(i,t,r),h=si(o,d,r),m=si(d,c,r);return si(h,m,r)}const nD=function(e,t){return{x(r){return e+e+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},aD=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function vo(e,t,r){return e?nD(t,r):aD()}function HS(e,t){let r,n;(t==="ltr"||t==="rtl")&&(r=e.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=n)}function WS(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function qS(e){return e==="angle"?{between:Hy,compare:nR,normalize:Ls}:{between:ua,compare:(t,r)=>t-r,normalize:t=>t}}function Vk({start:e,end:t,count:r,loop:n,style:a}){return{start:e%r,end:t%r,loop:n&&(t-e+1)%r===0,style:a}}function iD(e,t,r){const{property:n,start:a,end:i}=r,{between:o,normalize:d}=qS(n),c=t.length;let{start:h,end:m,loop:f}=e,p,w;if(f){for(h+=c,m+=c,p=0,w=c;p<w&&o(d(t[h%c][n]),a,i);++p)h--,m--;h%=c,m%=c}return m<h&&(m+=c),{start:h,end:m,loop:f,style:e.style}}function oD(e,t,r){if(!r)return[e];const{property:n,start:a,end:i}=r,o=t.length,{compare:d,between:c,normalize:h}=qS(n),{start:m,end:f,loop:p,style:w}=iD(e,t,r),x=[];let k=!1,y=null,b,j,N;const C=()=>c(a,N,b)&&d(a,N)!==0,P=()=>d(i,b)===0||c(i,N,b),E=()=>k||C(),T=()=>!k||P();for(let O=m,I=m;O<=f;++O)j=t[O%o],!j.skip&&(b=h(j[n]),b!==N&&(k=c(b,a,i),y===null&&E()&&(y=d(b,a)===0?O:I),y!==null&&T()&&(x.push(Vk({start:y,end:O,loop:p,count:o,style:w})),y=null),I=O,N=b));return y!==null&&x.push(Vk({start:y,end:f,loop:p,count:o,style:w})),x}function lD(e,t){const r=[],n=e.segments;for(let a=0;a<n.length;a++){const i=oD(n[a],e.points,t);i.length&&r.push(...i)}return r}function dD(e,t,r,n){let a=0,i=t-1;if(r&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,r&&(i+=a);i>a&&e[i%t].skip;)i--;return i%=t,{start:a,end:i}}function cD(e,t,r,n){const a=e.length,i=[];let o=t,d=e[t],c;for(c=t+1;c<=r;++c){const h=e[c%a];h.skip||h.stop?d.skip||(n=!1,i.push({start:t%a,end:(c-1)%a,loop:n}),t=o=h.stop?c:null):(o=c,d.skip&&(t=c)),d=h}return o!==null&&i.push({start:t%a,end:o%a,loop:n}),i}function uD(e,t){const r=e.points,n=e.options.spanGaps,a=r.length;if(!a)return[];const i=!!e._loop,{start:o,end:d}=dD(r,a,i,n);if(n===!0)return Hk(e,[{start:o,end:d,loop:i}],r,t);const c=d<o?d+a:d,h=!!e._fullLoop&&o===0&&d===a-1;return Hk(e,cD(r,o,c,h),r,t)}function Hk(e,t,r,n){return!n||!n.setContext||!r?t:hD(e,t,r,n)}function hD(e,t,r,n){const a=e._chart.getContext(),i=Wk(e.options),{_datasetIndex:o,options:{spanGaps:d}}=e,c=r.length,h=[];let m=i,f=t[0].start,p=f;function w(x,k,y,b){const j=d?-1:1;if(x!==k){for(x+=c;r[x%c].skip;)x-=j;for(;r[k%c].skip;)k+=j;x%c!==k%c&&(h.push({start:x%c,end:k%c,loop:y,style:b}),m=b,f=k%c)}}for(const x of t){f=d?f:x.start;let k=r[f%c],y;for(p=f+1;p<=x.end;p++){const b=r[p%c];y=Wk(n.setContext(Ei(a,{type:"segment",p0:k,p1:b,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),mD(y,m)&&w(f,p-1,x.loop,m),k=b,m=y}f<p-1&&w(f,p-1,x.loop,m)}return h}function Wk(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function mD(e,t){if(!t)return!1;const r=[],n=function(a,i){return Ky(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function ou(e,t,r){return e.options.clip?e[r]:t[r]}function gD(e,t){const{xScale:r,yScale:n}=e;return r&&n?{left:ou(r,t,"left"),right:ou(r,t,"right"),top:ou(n,t,"top"),bottom:ou(n,t,"bottom")}:t}function fD(e,t){const r=t._clip;if(r.disabled)return!1;const n=gD(t,e.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?e.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?e.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class pD{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,n,a){const i=r.listeners[a],o=r.duration;i.forEach(d=>d({chart:t,initial:r.initial,numSteps:o,currentStep:Math.min(n-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=MS.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((n,a)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,d=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(t),d=!0):(i[o]=i[i.length-1],i.pop());d&&(a.draw(),this._notify(a,n,t,"progress")),i.length||(n.running=!1,this._notify(a,n,t,"complete"),n.initial=!1),r+=i.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let n=r.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,n)),n}listen(t,r,n){this._getAnims(t).listeners[r].push(n)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,a)=>Math.max(n,a._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const n=r.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Cn=new pD;const qk="transparent",xD={boolean(e,t,r){return r>.5?t:e},color(e,t,r){const n=Ok(e||qk),a=n.valid&&Ok(t||qk);return a&&a.valid?a.mix(n,r).hexString():t},number(e,t,r){return e+(t-e)*r}};class yD{constructor(t,r,n,a){const i=r[n];a=au([t.to,a,i,t.from]);const o=au([t.from,i,a]);this._active=!0,this._fn=t.fn||xD[t.type||typeof o],this._easing=id[t.easing]||id.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=n,this._from=o,this._to=a,this._promises=void 0}active(){return this._active}update(t,r,n){if(this._active){this._notify(!1);const a=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=au([t.to,r,a,t.from]),this._from=au([t.from,a,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,n=this._duration,a=this._prop,i=this._from,o=this._loop,d=this._to;let c;if(this._active=i!==d&&(o||r<n),!this._active){this._target[a]=d,this._notify(!0);return}if(r<0){this._target[a]=i;return}c=r/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[a]=this._fn(i,d,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,n)=>{t.push({res:r,rej:n})})}_notify(t){const r=t?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][r]()}}class KS{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!Ye(t))return;const r=Object.keys(It.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(a=>{const i=t[a];if(!Ye(i))return;const o={};for(const d of r)o[d]=i[d];(Vt(i.properties)&&i.properties||[a]).forEach(d=>{(d===a||!n.has(d))&&n.set(d,o)})})}_animateOptions(t,r){const n=r.options,a=vD(t,n);if(!a)return[];const i=this._createAnimations(a,n);return n.$shared&&bD(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,r){const n=this._properties,a=[],i=t.$animations||(t.$animations={}),o=Object.keys(r),d=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){a.push(...this._animateOptions(t,r));continue}const m=r[h];let f=i[h];const p=n.get(h);if(f)if(p&&f.active()){f.update(p,m,d);continue}else f.cancel();if(!p||!p.duration){t[h]=m;continue}i[h]=f=new yD(p,t,h,m),a.push(f)}return a}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const n=this._createAnimations(t,r);if(n.length)return Cn.add(this._chart,n),!0}}function bD(e,t){const r=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const i=e[n[a]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function vD(e,t){if(!t)return;let r=e.options;if(!r){e.options=t;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function Kk(e,t){const r=e&&e.options||{},n=r.reverse,a=r.min===void 0?t:0,i=r.max===void 0?t:0;return{start:n?i:a,end:n?a:i}}function wD(e,t,r){if(r===!1)return!1;const n=Kk(e,r),a=Kk(t,r);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}function kD(e){let t,r,n,a;return Ye(e)?(t=e.top,r=e.right,n=e.bottom,a=e.left):t=r=n=a=e,{top:t,right:r,bottom:n,left:a,disabled:e===!1}}function ZS(e,t){const r=[],n=e._getSortedDatasetMetas(t);let a,i;for(a=0,i=n.length;a<i;++a)r.push(n[a].index);return r}function Zk(e,t,r,n={}){const a=e.keys,i=n.mode==="single";let o,d,c,h;if(t===null)return;let m=!1;for(o=0,d=a.length;o<d;++o){if(c=+a[o],c===r){if(m=!0,n.all)continue;break}h=e.values[c],js(h)&&(i||t===0||un(t)===un(h))&&(t+=h)}return!m&&!n.all?0:t}function jD(e,t){const{iScale:r,vScale:n}=t,a=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(e),d=new Array(o.length);let c,h,m;for(c=0,h=o.length;c<h;++c)m=o[c],d[c]={[a]:m,[i]:e[m]};return d}function Zf(e,t){const r=e&&e.options.stacked;return r||r===void 0&&t.stack!==void 0}function ND(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}function _D(e){const{min:t,max:r,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}function SD(e,t,r){const n=e[t]||(e[t]={});return n[r]||(n[r]={})}function Gk(e,t,r,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const i=e[a.index];if(r&&i>0||!r&&i<0)return a.index}return null}function Yk(e,t){const{chart:r,_cachedMeta:n}=e,a=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:d}=n,c=i.axis,h=o.axis,m=ND(i,o,n),f=t.length;let p;for(let w=0;w<f;++w){const x=t[w],{[c]:k,[h]:y}=x,b=x._stacks||(x._stacks={});p=b[h]=SD(a,m,k),p[d]=y,p._top=Gk(p,o,!0,n.type),p._bottom=Gk(p,o,!1,n.type);const j=p._visualValues||(p._visualValues={});j[d]=y}}function Gf(e,t){const r=e.scales;return Object.keys(r).filter(n=>r[n].axis===t).shift()}function CD(e,t){return Ei(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function PD(e,t,r){return Ei(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function xl(e,t){const r=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const a of t){const i=a._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const Yf=e=>e==="reset"||e==="none",Jk=(e,t)=>t?e:Object.assign({},e),ED=(e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:ZS(r,!0),values:null};class wo{constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Zf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&xl(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,n=this.getDataset(),a=(f,p,w,x)=>f==="x"?p:f==="r"?x:w,i=r.xAxisID=$e(n.xAxisID,Gf(t,"x")),o=r.yAxisID=$e(n.yAxisID,Gf(t,"y")),d=r.rAxisID=$e(n.rAxisID,Gf(t,"r")),c=r.indexAxis,h=r.iAxisID=a(c,i,o,d),m=r.vAxisID=a(c,o,i,d);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(d),r.iScale=this.getScaleForId(h),r.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Lk(this._data,this),t._stacked&&xl(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),n=this._data;if(Ye(r)){const a=this._cachedMeta;this._data=jD(r,a)}else if(n!==r){if(n){Lk(n,this);const a=this._cachedMeta;xl(a),a._parsed=[]}r&&Object.isExtensible(r)&&lR(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const i=r._stacked;r._stacked=Zf(r.vScale,r),r.stack!==n.stack&&(a=!0,xl(r),r.stack=n.stack),this._resyncElements(t),(a||i!==r._stacked)&&(Yk(this,r._parsed),r._stacked=Zf(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:n,_data:a}=this,{iScale:i,_stacked:o}=n,d=i.axis;let c=t===0&&r===a.length?!0:n._sorted,h=t>0&&n._parsed[t-1],m,f,p;if(this._parsing===!1)n._parsed=a,n._sorted=!0,p=a;else{Vt(a[t])?p=this.parseArrayData(n,a,t,r):Ye(a[t])?p=this.parseObjectData(n,a,t,r):p=this.parsePrimitiveData(n,a,t,r);const w=()=>f[d]===null||h&&f[d]<h[d];for(m=0;m<r;++m)n._parsed[m+t]=f=p[m],c&&(w()&&(c=!1),h=f);n._sorted=c}o&&Yk(this,p)}parsePrimitiveData(t,r,n,a){const{iScale:i,vScale:o}=t,d=i.axis,c=o.axis,h=i.getLabels(),m=i===o,f=new Array(a);let p,w,x;for(p=0,w=a;p<w;++p)x=p+n,f[p]={[d]:m||i.parse(h[x],x),[c]:o.parse(r[x],x)};return f}parseArrayData(t,r,n,a){const{xScale:i,yScale:o}=t,d=new Array(a);let c,h,m,f;for(c=0,h=a;c<h;++c)m=c+n,f=r[m],d[c]={x:i.parse(f[0],m),y:o.parse(f[1],m)};return d}parseObjectData(t,r,n,a){const{xScale:i,yScale:o}=t,{xAxisKey:d="x",yAxisKey:c="y"}=this._parsing,h=new Array(a);let m,f,p,w;for(m=0,f=a;m<f;++m)p=m+n,w=r[p],h[m]={x:i.parse(Ao(w,d),p),y:o.parse(Ao(w,c),p)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,n){const a=this.chart,i=this._cachedMeta,o=r[t.axis],d={keys:ZS(a,!0),values:r._stacks[t.axis]._visualValues};return Zk(d,o,i.index,{mode:n})}updateRangeFromParsed(t,r,n,a){const i=n[r.axis];let o=i===null?NaN:i;const d=a&&n._stacks[r.axis];a&&d&&(a.values=d,o=Zk(a,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,r){const n=this._cachedMeta,a=n._parsed,i=n._sorted&&t===n.iScale,o=a.length,d=this._getOtherScale(t),c=ED(r,n,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:f}=_D(d);let p,w;function x(){w=a[p];const k=w[d.axis];return!js(w[t.axis])||m>k||f<k}for(p=0;p<o&&!(!x()&&(this.updateRangeFromParsed(h,t,w,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!x()){this.updateRangeFromParsed(h,t,w,c);break}}return h}getAllParsedValues(t){const r=this._cachedMeta._parsed,n=[];let a,i,o;for(a=0,i=r.length;a<i;++a)o=r[a][t.axis],js(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,n=r.iScale,a=r.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:a?""+a.getLabelForValue(i[a.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=kD($e(this.options.clip,wD(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,n=this._cachedMeta,a=n.data||[],i=r.chartArea,o=[],d=this._drawStart||0,c=this._drawCount||a.length-d,h=this.options.drawActiveElementsOnTop;let m;for(n.dataset&&n.dataset.draw(t,i,d,c),m=d;m<d+c;++m){const f=a[m];f.hidden||(f.active&&h?o.push(f):f.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,r){const n=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,r,n){const a=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=PD(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=a.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=CD(this.chart.getContext(),this.index)),i.dataset=a,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",n){const a=r==="active",i=this._cachedDataOpts,o=t+"-"+r,d=i[o],c=this.enableOptionSharing&&Hd(n);if(d)return Jk(d,c);const h=this.chart.config,m=h.datasetElementScopeKeys(this._type,t),f=a?[`${t}Hover`,"hover",t,""]:[t,""],p=h.getOptionScopes(this.getDataset(),m),w=Object.keys(It.elements[t]),x=()=>this.getContext(n,a,r),k=h.resolveNamedOptions(p,w,x,f);return k.$shared&&(k.$shared=c,i[o]=Object.freeze(Jk(k,c))),k}_resolveAnimations(t,r,n){const a=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,d=i[o];if(d)return d;let c;if(a.options.animation!==!1){const m=this.chart.config,f=m.datasetAnimationScopeKeys(this._type,r),p=m.getOptionScopes(this.getDataset(),f);c=m.createResolver(p,this.getContext(t,n,r))}const h=new KS(a,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Yf(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const n=this.resolveDataElementOptions(t,r),a=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(r,i)||i!==a;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:o}}updateElement(t,r,n,a){Yf(a)?Object.assign(t,n):this._resolveAnimations(r,a).update(t,n)}updateSharedOptions(t,r,n){t&&!Yf(r)&&this._resolveAnimations(void 0,r).update(t,n)}_setStyle(t,r,n,a){t.active=a;const i=this.getStyle(r,a);this._resolveAnimations(r,n,a).update(t,{options:!a&&this.getSharedOptions(i)||i})}removeHoverStyle(t,r,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,r,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,n=this._cachedMeta.data;for(const[d,c,h]of this._syncList)this[d](c,h);this._syncList=[];const a=n.length,i=r.length,o=Math.min(i,a);o&&this.parse(0,o),i>a?this._insertElements(a,i-a,t):i<a&&this._removeElements(i,a-i)}_insertElements(t,r,n=!0){const a=this._cachedMeta,i=a.data,o=t+r;let d;const c=h=>{for(h.length+=r,d=h.length-1;d>=o;d--)h[d]=h[d-r]};for(c(i),d=t;d<o;++d)i[d]=new this.dataElementType;this._parsing&&c(a._parsed),this.parse(t,r),n&&this.updateElements(i,t,r,"reset")}updateElements(t,r,n,a){}_removeElements(t,r){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(t,r);n._stacked&&xl(n,a)}n.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,n,a]=t;this[r](n,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ce(wo,"defaults",{}),Ce(wo,"datasetElementType",null),Ce(wo,"dataElementType",null);function ID(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let n=[];for(let a=0,i=r.length;a<i;a++)n=n.concat(r[a].controller.getAllParsedValues(e));e._cache.$bar=LS(n.sort((a,i)=>a-i))}return e._cache.$bar}function TD(e){const t=e.iScale,r=ID(t,e.type);let n=t._length,a,i,o,d;const c=()=>{o===32767||o===-32768||(Hd(d)&&(n=Math.min(n,Math.abs(o-d)||n)),d=o)};for(a=0,i=r.length;a<i;++a)o=t.getPixelForValue(r[a]),c();for(d=void 0,a=0,i=t.ticks.length;a<i;++a)o=t.getPixelForTick(a),c();return n}function LD(e,t,r,n){const a=r.barThickness;let i,o;return et(a)?(i=t.min*r.categoryPercentage,o=r.barPercentage):(i=a*n,o=1),{chunk:i/n,ratio:o,start:t.pixels[e]-i/2}}function MD(e,t,r,n){const a=t.pixels,i=a[e];let o=e>0?a[e-1]:null,d=e<a.length-1?a[e+1]:null;const c=r.categoryPercentage;o===null&&(o=i-(d===null?t.end-t.start:d-i)),d===null&&(d=i+i-o);const h=i-(i-Math.min(o,d))/2*c;return{chunk:Math.abs(d-o)/2*c/n,ratio:r.barPercentage,start:h}}function AD(e,t,r,n){const a=r.parse(e[0],n),i=r.parse(e[1],n),o=Math.min(a,i),d=Math.max(a,i);let c=o,h=d;Math.abs(o)>Math.abs(d)&&(c=d,h=o),t[r.axis]=h,t._custom={barStart:c,barEnd:h,start:a,end:i,min:o,max:d}}function GS(e,t,r,n){return Vt(e)?AD(e,t,r,n):t[r.axis]=r.parse(e,n),t}function Xk(e,t,r,n){const a=e.iScale,i=e.vScale,o=a.getLabels(),d=a===i,c=[];let h,m,f,p;for(h=r,m=r+n;h<m;++h)p=t[h],f={},f[a.axis]=d||a.parse(o[h],h),c.push(GS(p,f,i,h));return c}function Jf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function OD(e,t,r){return e!==0?un(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function RD(e){let t,r,n,a,i;return e.horizontal?(t=e.base>e.x,r="left",n="right"):(t=e.base<e.y,r="bottom",n="top"),t?(a="end",i="start"):(a="start",i="end"),{start:r,end:n,reverse:t,top:a,bottom:i}}function DD(e,t,r,n){let a=t.borderSkipped;const i={};if(!a){e.borderSkipped=i;return}if(a===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:d,reverse:c,top:h,bottom:m}=RD(e);a==="middle"&&r&&(e.enableBorderRadius=!0,(r._top||0)===n?a=h:(r._bottom||0)===n?a=m:(i[Qk(m,o,d,c)]=!0,a=h)),i[Qk(a,o,d,c)]=!0,e.borderSkipped=i}function Qk(e,t,r,n){return n?(e=FD(e,t,r),e=ej(e,r,t)):e=ej(e,t,r),e}function FD(e,t,r){return e===t?r:e===r?t:e}function ej(e,t,r){return e==="start"?t:e==="end"?r:e}function zD(e,{inflateAmount:t},r){e.inflateAmount=t==="auto"?r===1?.33:0:t}class lh extends wo{parsePrimitiveData(t,r,n,a){return Xk(t,r,n,a)}parseArrayData(t,r,n,a){return Xk(t,r,n,a)}parseObjectData(t,r,n,a){const{iScale:i,vScale:o}=t,{xAxisKey:d="x",yAxisKey:c="y"}=this._parsing,h=i.axis==="x"?d:c,m=o.axis==="x"?d:c,f=[];let p,w,x,k;for(p=n,w=n+a;p<w;++p)k=r[p],x={},x[i.axis]=i.parse(Ao(k,h),p),f.push(GS(Ao(k,m),x,o,p));return f}updateRangeFromParsed(t,r,n,a){super.updateRangeFromParsed(t,r,n,a);const i=n._custom;i&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:n,vScale:a}=r,i=this.getParsed(t),o=i._custom,d=Jf(o)?"["+o.start+", "+o.end+"]":""+a.getLabelForValue(i[a.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,n,a){const i=a==="reset",{index:o,_cachedMeta:{vScale:d}}=this,c=d.getBasePixel(),h=d.isHorizontal(),m=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,a);for(let w=r;w<r+n;w++){const x=this.getParsed(w),k=i||et(x[d.axis])?{base:c,head:c}:this._calculateBarValuePixels(w),y=this._calculateBarIndexPixels(w,m),b=(x._stacks||{})[d.axis],j={horizontal:h,base:k.base,enableBorderRadius:!b||Jf(x._custom)||o===b._top||o===b._bottom,x:h?k.head:y.center,y:h?y.center:k.head,height:h?y.size:Math.abs(k.size),width:h?Math.abs(k.size):y.size};p&&(j.options=f||this.resolveDataElementOptions(w,t[w].active?"active":a));const N=j.options||t[w].options;DD(j,N,b,o),zD(j,N,m.ratio),this.updateElement(t[w],w,j,a)}}_getStacks(t,r){const{iScale:n}=this._cachedMeta,a=n.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=n.options.stacked,o=[],d=this._cachedMeta.controller.getParsed(r),c=d&&d[n.axis],h=m=>{const f=m._parsed.find(w=>w[n.axis]===c),p=f&&f[m.vScale.axis];if(et(p)||isNaN(p))return!0};for(const m of a)if(!(r!==void 0&&h(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[$e(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,n){const a=this._getStacks(t,n),i=r!==void 0?a.indexOf(r):-1;return i===-1?a.length-1:i}_getRuler(){const t=this.options,r=this._cachedMeta,n=r.iScale,a=[];let i,o;for(i=0,o=r.data.length;i<o;++i)a.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const d=t.barThickness;return{min:d||TD(r),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:d?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:n,index:a},options:{base:i,minBarLength:o}}=this,d=i||0,c=this.getParsed(t),h=c._custom,m=Jf(h);let f=c[r.axis],p=0,w=n?this.applyStack(r,c,n):f,x,k;w!==f&&(p=w-f,w=f),m&&(f=h.barStart,w=h.barEnd-h.barStart,f!==0&&un(f)!==un(h.barEnd)&&(p=0),p+=f);const y=!et(i)&&!m?i:p;let b=r.getPixelForValue(y);if(this.chart.getDataVisibility(t)?x=r.getPixelForValue(p+w):x=b,k=x-b,Math.abs(k)<o){k=OD(k,r,d)*o,f===d&&(b-=k/2);const j=r.getPixelForDecimal(0),N=r.getPixelForDecimal(1),C=Math.min(j,N),P=Math.max(j,N);b=Math.max(Math.min(b,P),C),x=b+k,n&&!m&&(c._stacks[r.axis]._visualValues[a]=r.getValueForPixel(x)-r.getValueForPixel(b))}if(b===r.getPixelForValue(d)){const j=un(k)*r.getLineWidthForValue(d)/2;b+=j,k-=j}return{size:k,base:b,head:x,center:x+k/2}}_calculateBarIndexPixels(t,r){const n=r.scale,a=this.options,i=a.skipNull,o=$e(a.maxBarThickness,1/0);let d,c;const h=this._getAxisCount();if(r.grouped){const m=i?this._getStackCount(t):r.stackCount,f=a.barThickness==="flex"?MD(t,r,a,m*h):LD(t,r,a,m*h),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,w=this._getAxis().indexOf($e(p,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+w;d=f.start+f.chunk*x+f.chunk/2,c=Math.min(o,f.chunk*f.ratio)}else d=n.getPixelForValue(this.getParsed(t)[n.axis],t),c=Math.min(o,r.min*r.ratio);return{base:d-c/2,head:d+c/2,center:d,size:c}}draw(){const t=this._cachedMeta,r=t.vScale,n=t.data,a=n.length;let i=0;for(;i<a;++i)this.getParsed(i)[r.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}Ce(lh,"id","bar"),Ce(lh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ce(lh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class dh extends wo{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:n,data:a=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:d,count:c}=uR(r,a,o);this._drawStart=d,this._drawCount=c,hR(r)&&(d=0,c=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=a;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:h},t),this.updateElements(a,d,c,t)}updateElements(t,r,n,a){const i=a==="reset",{iScale:o,vScale:d,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:m,includeOptions:f}=this._getSharedOptions(r,a),p=o.axis,w=d.axis,{spanGaps:x,segment:k}=this.options,y=Wd(x)?x:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||a==="none",j=r+n,N=t.length;let C=r>0&&this.getParsed(r-1);for(let P=0;P<N;++P){const E=t[P],T=b?E:{};if(P<r||P>=j){T.skip=!0;continue}const O=this.getParsed(P),I=et(O[w]),W=T[p]=o.getPixelForValue(O[p],P),X=T[w]=i||I?d.getBasePixel():d.getPixelForValue(c?this.applyStack(d,O,c):O[w],P);T.skip=isNaN(W)||isNaN(X)||I,T.stop=P>0&&Math.abs(O[p]-C[p])>y,k&&(T.parsed=O,T.raw=h.data[P]),f&&(T.options=m||this.resolveDataElementOptions(P,E.active?"active":a)),b||this.updateElement(E,P,T,a),C=O}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,n=r.options&&r.options.borderWidth||0,a=t.data||[];if(!a.length)return n;const i=a[0].size(this.resolveDataElementOptions(0)),o=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Ce(dh,"id","line"),Ce(dh,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ce(dh,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ja(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class rb{constructor(t){Ce(this,"options");this.options=t||{}}static override(t){Object.assign(rb.prototype,t)}init(){}formats(){return Ja()}parse(){return Ja()}format(){return Ja()}add(){return Ja()}diff(){return Ja()}startOf(){return Ja()}endOf(){return Ja()}}var BD={_date:rb};function $D(e,t,r,n){const{controller:a,data:i,_sorted:o}=e,d=a._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(d&&t===d.axis&&t!=="r"&&o&&i.length){const h=d._reversePixels?iR:ci;if(n){if(a._sharedOptions){const m=i[0],f=typeof m.getRange=="function"&&m.getRange(t);if(f){const p=h(i,t,r-f),w=h(i,t,r+f);return{lo:p.lo,hi:w.hi}}}}else{const m=h(i,t,r);if(c){const{vScale:f}=a._cachedMeta,{_parsed:p}=e,w=p.slice(0,m.lo+1).reverse().findIndex(k=>!et(k[f.axis]));m.lo-=Math.max(0,w);const x=p.slice(m.hi).findIndex(k=>!et(k[f.axis]));m.hi+=Math.max(0,x)}return m}}return{lo:0,hi:i.length-1}}function fg(e,t,r,n,a){const i=e.getSortedVisibleDatasetMetas(),o=r[t];for(let d=0,c=i.length;d<c;++d){const{index:h,data:m}=i[d],{lo:f,hi:p}=$D(i[d],t,o,a);for(let w=f;w<=p;++w){const x=m[w];x.skip||n(x,h,w)}}}function UD(e){const t=e.indexOf("x")!==-1,r=e.indexOf("y")!==-1;return function(n,a){const i=t?Math.abs(n.x-a.x):0,o=r?Math.abs(n.y-a.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Xf(e,t,r,n,a){const i=[];return!a&&!e.isPointInArea(t)||fg(e,r,t,function(d,c,h){!a&&!qd(d,e.chartArea,0)||d.inRange(t.x,t.y,n)&&i.push({element:d,datasetIndex:c,index:h})},!0),i}function VD(e,t,r,n){let a=[];function i(o,d,c){const{startAngle:h,endAngle:m}=o.getProps(["startAngle","endAngle"],n),{angle:f}=IS(o,{x:t.x,y:t.y});Hy(f,h,m)&&a.push({element:o,datasetIndex:d,index:c})}return fg(e,r,t,i),a}function HD(e,t,r,n,a,i){let o=[];const d=UD(r);let c=Number.POSITIVE_INFINITY;function h(m,f,p){const w=m.inRange(t.x,t.y,a);if(n&&!w)return;const x=m.getCenterPoint(a);if(!(!!i||e.isPointInArea(x))&&!w)return;const y=d(t,x);y<c?(o=[{element:m,datasetIndex:f,index:p}],c=y):y===c&&o.push({element:m,datasetIndex:f,index:p})}return fg(e,r,t,h),o}function Qf(e,t,r,n,a,i){return!i&&!e.isPointInArea(t)?[]:r==="r"&&!n?VD(e,t,r,a):HD(e,t,r,n,a,i)}function tj(e,t,r,n,a){const i=[],o=r==="x"?"inXRange":"inYRange";let d=!1;return fg(e,r,t,(c,h,m)=>{c[o]&&c[o](t[r],a)&&(i.push({element:c,datasetIndex:h,index:m}),d=d||c.inRange(t.x,t.y,a))}),n&&!d?[]:i}var WD={modes:{index(e,t,r,n){const a=ri(t,e),i=r.axis||"x",o=r.includeInvisible||!1,d=r.intersect?Xf(e,a,i,n,o):Qf(e,a,i,!1,n,o),c=[];return d.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const m=d[0].index,f=h.data[m];f&&!f.skip&&c.push({element:f,datasetIndex:h.index,index:m})}),c):[]},dataset(e,t,r,n){const a=ri(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;let d=r.intersect?Xf(e,a,i,n,o):Qf(e,a,i,!1,n,o);if(d.length>0){const c=d[0].datasetIndex,h=e.getDatasetMeta(c).data;d=[];for(let m=0;m<h.length;++m)d.push({element:h[m],datasetIndex:c,index:m})}return d},point(e,t,r,n){const a=ri(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Xf(e,a,i,n,o)},nearest(e,t,r,n){const a=ri(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Qf(e,a,i,r.intersect,n,o)},x(e,t,r,n){const a=ri(t,e);return tj(e,a,"x",r.intersect,n)},y(e,t,r,n){const a=ri(t,e);return tj(e,a,"y",r.intersect,n)}}};const YS=["left","top","right","bottom"];function yl(e,t){return e.filter(r=>r.pos===t)}function rj(e,t){return e.filter(r=>YS.indexOf(r.pos)===-1&&r.box.axis===t)}function bl(e,t){return e.sort((r,n)=>{const a=t?n:r,i=t?r:n;return a.weight===i.weight?a.index-i.index:a.weight-i.weight})}function qD(e){const t=[];let r,n,a,i,o,d;for(r=0,n=(e||[]).length;r<n;++r)a=e[r],{position:i,options:{stack:o,stackWeight:d=1}}=a,t.push({index:r,box:a,pos:i,horizontal:a.isHorizontal(),weight:a.weight,stack:o&&i+o,stackWeight:d});return t}function KD(e){const t={};for(const r of e){const{stack:n,pos:a,stackWeight:i}=r;if(!n||!YS.includes(a))continue;const o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function ZD(e,t){const r=KD(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let i,o,d;for(i=0,o=e.length;i<o;++i){d=e[i];const{fullSize:c}=d.box,h=r[d.stack],m=h&&d.stackWeight/h.weight;d.horizontal?(d.width=m?m*n:c&&t.availableWidth,d.height=a):(d.width=n,d.height=m?m*a:c&&t.availableHeight)}return r}function GD(e){const t=qD(e),r=bl(t.filter(h=>h.box.fullSize),!0),n=bl(yl(t,"left"),!0),a=bl(yl(t,"right")),i=bl(yl(t,"top"),!0),o=bl(yl(t,"bottom")),d=rj(t,"x"),c=rj(t,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:a.concat(c).concat(o).concat(d),chartArea:yl(t,"chartArea"),vertical:n.concat(a).concat(c),horizontal:i.concat(o).concat(d)}}function sj(e,t,r,n){return Math.max(e[r],t[r])+Math.max(e[n],t[n])}function JS(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function YD(e,t,r,n){const{pos:a,box:i}=r,o=e.maxPadding;if(!Ye(a)){r.size&&(e[a]-=r.size);const f=n[r.stack]||{size:0,count:1};f.size=Math.max(f.size,r.horizontal?i.height:i.width),r.size=f.size/f.count,e[a]+=r.size}i.getPadding&&JS(o,i.getPadding());const d=Math.max(0,t.outerWidth-sj(o,e,"left","right")),c=Math.max(0,t.outerHeight-sj(o,e,"top","bottom")),h=d!==e.w,m=c!==e.h;return e.w=d,e.h=c,r.horizontal?{same:h,other:m}:{same:m,other:h}}function JD(e){const t=e.maxPadding;function r(n){const a=Math.max(t[n]-e[n],0);return e[n]+=a,a}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}function XD(e,t){const r=t.maxPadding;function n(a){const i={left:0,top:0,right:0,bottom:0};return a.forEach(o=>{i[o]=Math.max(t[o],r[o])}),i}return n(e?["left","right"]:["top","bottom"])}function Tl(e,t,r,n){const a=[];let i,o,d,c,h,m;for(i=0,o=e.length,h=0;i<o;++i){d=e[i],c=d.box,c.update(d.width||t.w,d.height||t.h,XD(d.horizontal,t));const{same:f,other:p}=YD(t,r,d,n);h|=f&&a.length,m=m||p,c.fullSize||a.push(d)}return h&&Tl(a,t,r,n)||m}function lu(e,t,r,n,a){e.top=r,e.left=t,e.right=t+n,e.bottom=r+a,e.width=n,e.height=a}function nj(e,t,r,n){const a=r.padding;let{x:i,y:o}=t;for(const d of e){const c=d.box,h=n[d.stack]||{placed:0,weight:1},m=d.stackWeight/h.weight||1;if(d.horizontal){const f=t.w*m,p=h.size||c.height;Hd(h.start)&&(o=h.start),c.fullSize?lu(c,a.left,o,r.outerWidth-a.right-a.left,p):lu(c,t.left+h.placed,o,f,p),h.start=o,h.placed+=f,o=c.bottom}else{const f=t.h*m,p=h.size||c.width;Hd(h.start)&&(i=h.start),c.fullSize?lu(c,i,a.top,p,r.outerHeight-a.bottom-a.top):lu(c,i,t.top+h.placed,p,f),h.start=i,h.placed+=f,i=c.right}}t.x=i,t.y=o}var bs={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;r!==-1&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,n){if(!e)return;const a=Ns(e.options.layout.padding),i=Math.max(t-a.width,0),o=Math.max(r-a.height,0),d=GD(e.boxes),c=d.vertical,h=d.horizontal;tt(e.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const m=c.reduce((k,y)=>y.box.options&&y.box.options.display===!1?k:k+1,0)||1,f=Object.freeze({outerWidth:t,outerHeight:r,padding:a,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),p=Object.assign({},a);JS(p,Ns(n));const w=Object.assign({maxPadding:p,w:i,h:o,x:a.left,y:a.top},a),x=ZD(c.concat(h),f);Tl(d.fullSize,w,f,x),Tl(c,w,f,x),Tl(h,w,f,x)&&Tl(c,w,f,x),JD(w),nj(d.leftAndTop,w,f,x),w.x+=w.w,w.y+=w.h,nj(d.rightAndBottom,w,f,x),e.chartArea={left:w.left,top:w.top,right:w.left+w.w,bottom:w.top+w.h,height:w.h,width:w.w},tt(d.chartArea,k=>{const y=k.box;Object.assign(y,e.chartArea),y.update(w.w,w.h,{left:0,top:0,right:0,bottom:0})})}};class XS{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,n){}removeEventListener(t,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,n,a){return r=Math.max(0,r||t.width),n=n||t.height,{width:r,height:Math.max(0,a?Math.floor(r/a):n)}}isAttached(t){return!0}updateConfig(t){}}class QD extends XS{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ch="$chartjs",e8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},aj=e=>e===null||e==="";function t8(e,t){const r=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[ch]={initial:{height:n,width:a,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",aj(a)){const i=Uk(e,"width");i!==void 0&&(e.width=i)}if(aj(n))if(e.style.height==="")e.height=e.width/(t||2);else{const i=Uk(e,"height");i!==void 0&&(e.height=i)}return e}const QS=tD?{passive:!0}:!1;function r8(e,t,r){e&&e.addEventListener(t,r,QS)}function s8(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,QS)}function n8(e,t){const r=e8[e.type]||e.type,{x:n,y:a}=ri(e,t);return{type:r,chart:t,native:e,x:n!==void 0?n:null,y:a!==void 0?a:null}}function lm(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function a8(e,t,r){const n=e.canvas,a=new MutationObserver(i=>{let o=!1;for(const d of i)o=o||lm(d.addedNodes,n),o=o&&!lm(d.removedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}function i8(e,t,r){const n=e.canvas,a=new MutationObserver(i=>{let o=!1;for(const d of i)o=o||lm(d.removedNodes,n),o=o&&!lm(d.addedNodes,n);o&&r()});return a.observe(document,{childList:!0,subtree:!0}),a}const Zd=new Map;let ij=0;function e4(){const e=window.devicePixelRatio;e!==ij&&(ij=e,Zd.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function o8(e,t){Zd.size||window.addEventListener("resize",e4),Zd.set(e,t)}function l8(e){Zd.delete(e),Zd.size||window.removeEventListener("resize",e4)}function d8(e,t,r){const n=e.canvas,a=n&&tb(n);if(!a)return;const i=AS((d,c)=>{const h=a.clientWidth;r(d,c),h<a.clientWidth&&r()},window),o=new ResizeObserver(d=>{const c=d[0],h=c.contentRect.width,m=c.contentRect.height;h===0&&m===0||i(h,m)});return o.observe(a),o8(e,i),o}function e0(e,t,r){r&&r.disconnect(),t==="resize"&&l8(e)}function c8(e,t,r){const n=e.canvas,a=AS(i=>{e.ctx!==null&&r(n8(i,e))},e);return r8(n,t,a),a}class u8 extends XS{acquireContext(t,r){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(t8(t,r),n):null}releaseContext(t){const r=t.canvas;if(!r[ch])return!1;const n=r[ch].initial;["height","width"].forEach(i=>{const o=n[i];et(o)?r.removeAttribute(i):r.setAttribute(i,o)});const a=n.style||{};return Object.keys(a).forEach(i=>{r.style[i]=a[i]}),r.width=r.width,delete r[ch],!0}addEventListener(t,r,n){this.removeEventListener(t,r);const a=t.$proxies||(t.$proxies={}),o={attach:a8,detach:i8,resize:d8}[r]||c8;a[r]=o(t,r,n)}removeEventListener(t,r){const n=t.$proxies||(t.$proxies={}),a=n[r];if(!a)return;({attach:e0,detach:e0,resize:e0}[r]||s8)(t,r,a),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,n,a){return eD(t,r,n,a)}isAttached(t){const r=t&&tb(t);return!!(r&&r.isConnected)}}function h8(e){return!eb()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?QD:u8}var gu;let qn=(gu=class{constructor(){Ce(this,"x");Ce(this,"y");Ce(this,"active",!1);Ce(this,"options");Ce(this,"$animations")}tooltipPosition(t){const{x:r,y:n}=this.getProps(["x","y"],t);return{x:r,y:n}}hasValue(){return Wd(this.x)&&Wd(this.y)}getProps(t,r){const n=this.$animations;if(!r||!n)return this;const a={};return t.forEach(i=>{a[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),a}},Ce(gu,"defaults",{}),Ce(gu,"defaultRoutes"),gu);function m8(e,t){const r=e.options.ticks,n=g8(e),a=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?p8(t):[],o=i.length,d=i[0],c=i[o-1],h=[];if(o>a)return x8(t,h,i,o/a),h;const m=f8(i,t,a);if(o>0){let f,p;const w=o>1?Math.round((c-d)/(o-1)):null;for(du(t,h,m,et(w)?0:d-w,d),f=0,p=o-1;f<p;f++)du(t,h,m,i[f],i[f+1]);return du(t,h,m,c,et(w)?t.length:c+w),h}return du(t,h,m),h}function g8(e){const t=e.options.offset,r=e._tickSize(),n=e._length/r+(t?0:1),a=e._maxLength/r;return Math.floor(Math.min(n,a))}function f8(e,t,r){const n=y8(e),a=t.length/r;if(!n)return Math.max(a,1);const i=QO(n);for(let o=0,d=i.length-1;o<d;o++){const c=i[o];if(c>a)return c}return Math.max(a,1)}function p8(e){const t=[];let r,n;for(r=0,n=e.length;r<n;r++)e[r].major&&t.push(r);return t}function x8(e,t,r,n){let a=0,i=r[0],o;for(n=Math.ceil(n),o=0;o<e.length;o++)o===i&&(t.push(e[o]),a++,i=r[a*n])}function du(e,t,r,n,a){const i=$e(n,0),o=Math.min($e(a,e.length),e.length);let d=0,c,h,m;for(r=Math.ceil(r),a&&(c=a-n,r=c/Math.floor(c/r)),m=i;m<0;)d++,m=Math.round(i+d*r);for(h=Math.max(i,0);h<o;h++)h===m&&(t.push(e[h]),d++,m=Math.round(i+d*r))}function y8(e){const t=e.length;let r,n;if(t<2)return!1;for(n=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==n)return!1;return n}const b8=e=>e==="left"?"right":e==="right"?"left":e,oj=(e,t,r)=>t==="top"||t==="left"?e[t]+r:e[t]-r,lj=(e,t)=>Math.min(t||e,e);function dj(e,t){const r=[],n=e.length/t,a=e.length;let i=0;for(;i<a;i+=n)r.push(e[Math.floor(i)]);return r}function v8(e,t,r){const n=e.ticks.length,a=Math.min(t,n-1),i=e._startPixel,o=e._endPixel,d=1e-6;let c=e.getPixelForTick(a),h;if(!(r&&(n===1?h=Math.max(c-i,o-c):t===0?h=(e.getPixelForTick(1)-c)/2:h=(c-e.getPixelForTick(a-1))/2,c+=a<t?h:-h,c<i-d||c>o+d)))return c}function w8(e,t){tt(e,r=>{const n=r.gc,a=n.length/2;let i;if(a>t){for(i=0;i<a;++i)delete r.data[n[i]];n.splice(0,a)}})}function vl(e){return e.drawTicks?e.tickLength:0}function cj(e,t){if(!e.display)return 0;const r=xr(e.font,t),n=Ns(e.padding);return(Vt(e.text)?e.text.length:1)*r.lineHeight+n.height}function k8(e,t){return Ei(e,{scale:t,type:"scale"})}function j8(e,t,r){return Ei(e,{tick:r,index:t,type:"tick"})}function N8(e,t,r){let n=qy(e);return(r&&t!=="right"||!r&&t==="right")&&(n=b8(n)),n}function _8(e,t,r,n){const{top:a,left:i,bottom:o,right:d,chart:c}=e,{chartArea:h,scales:m}=c;let f=0,p,w,x;const k=o-a,y=d-i;if(e.isHorizontal()){if(w=mr(n,i,d),Ye(r)){const b=Object.keys(r)[0],j=r[b];x=m[b].getPixelForValue(j)+k-t}else r==="center"?x=(h.bottom+h.top)/2+k-t:x=oj(e,r,t);p=d-i}else{if(Ye(r)){const b=Object.keys(r)[0],j=r[b];w=m[b].getPixelForValue(j)-y+t}else r==="center"?w=(h.left+h.right)/2-y+t:w=oj(e,r,t);x=mr(n,o,a),f=r==="left"?-sr:sr}return{titleX:w,titleY:x,maxWidth:p,rotation:f}}class qo extends qn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:n,_suggestedMax:a}=this;return t=Gs(t,Number.POSITIVE_INFINITY),r=Gs(r,Number.NEGATIVE_INFINITY),n=Gs(n,Number.POSITIVE_INFINITY),a=Gs(a,Number.NEGATIVE_INFINITY),{min:Gs(t,n),max:Gs(r,a),minDefined:js(t),maxDefined:js(r)}}getMinMax(t){let{min:r,max:n,minDefined:a,maxDefined:i}=this.getUserBounds(),o;if(a&&i)return{min:r,max:n};const d=this.getMatchingVisibleMetas();for(let c=0,h=d.length;c<h;++c)o=d[c].controller.getMinMax(this,t),a||(r=Math.min(r,o.min)),i||(n=Math.max(n,o.max));return r=i&&r>n?n:r,n=a&&r>n?r:n,{min:Gs(r,Gs(n,r)),max:Gs(n,Gs(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(t,r,n){const{beginAtZero:a,grace:i,ticks:o}=this.options,d=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=LR(this,i,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=d<this.ticks.length;this._convertTicksToLabels(c?dj(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=m8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,t=!t),this._startPixel=r,this._endPixel=n,this._reversePixels=t,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),pt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let n,a,i;for(n=0,a=t.length;n<a;n++)i=t[n],i.label=pt(r.callback,[i.value,n,t],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,n=lj(this.ticks.length,t.ticks.maxTicksLimit),a=r.minRotation||0,i=r.maxRotation;let o=a,d,c,h;if(!this._isVisible()||!r.display||a>=i||n<=1||!this.isHorizontal()){this.labelRotation=a;return}const m=this._getLabelSizes(),f=m.widest.width,p=m.highest.height,w=pr(this.chart.width-f,0,this.maxWidth);d=t.offset?this.maxWidth/n:w/(n-1),f+6>d&&(d=w/(n-(t.offset?.5:1)),c=this.maxHeight-vl(t.grid)-r.padding-cj(t.title,this.chart.options.font),h=Math.sqrt(f*f+p*p),o=sR(Math.min(Math.asin(pr((m.highest.height+6)/d,-1,1)),Math.asin(pr(c/h,-1,1))-Math.asin(pr(p/h,-1,1)))),o=Math.max(a,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:n,title:a,grid:i}}=this,o=this._isVisible(),d=this.isHorizontal();if(o){const c=cj(a,r.options.font);if(d?(t.width=this.maxWidth,t.height=vl(i)+c):(t.height=this.maxHeight,t.width=vl(i)+c),n.display&&this.ticks.length){const{first:h,last:m,widest:f,highest:p}=this._getLabelSizes(),w=n.padding*2,x=di(this.labelRotation),k=Math.cos(x),y=Math.sin(x);if(d){const b=n.mirror?0:y*f.width+k*p.height;t.height=Math.min(this.maxHeight,t.height+b+w)}else{const b=n.mirror?0:k*f.width+y*p.height;t.width=Math.min(this.maxWidth,t.width+b+w)}this._calculatePadding(h,m,y,k)}}this._handleMargins(),d?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,n,a){const{ticks:{align:i,padding:o},position:d}=this.options,c=this.labelRotation!==0,h=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,w=0;c?h?(p=a*t.width,w=n*r.height):(p=n*t.height,w=a*r.width):i==="start"?w=r.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,w=r.width/2),this.paddingLeft=Math.max((p-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((w-f+o)*this.width/(this.width-f),0)}else{let m=r.height/2,f=t.height/2;i==="start"?(m=0,f=t.height):i==="end"&&(m=r.height,f=0),this.paddingTop=m+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,n;for(r=0,n=t.length;r<n;r++)et(t[r].label)&&(t.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=dj(n,r)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,n){const{ctx:a,_longestTextCache:i}=this,o=[],d=[],c=Math.floor(r/lj(r,n));let h=0,m=0,f,p,w,x,k,y,b,j,N,C,P;for(f=0;f<r;f+=c){if(x=t[f].label,k=this._resolveTickFontOptions(f),a.font=y=k.string,b=i[y]=i[y]||{data:{},gc:[]},j=k.lineHeight,N=C=0,!et(x)&&!Vt(x))N=Dk(a,b.data,b.gc,N,x),C=j;else if(Vt(x))for(p=0,w=x.length;p<w;++p)P=x[p],!et(P)&&!Vt(P)&&(N=Dk(a,b.data,b.gc,N,P),C+=j);o.push(N),d.push(C),h=Math.max(N,h),m=Math.max(C,m)}w8(i,r);const E=o.indexOf(h),T=d.indexOf(m),O=I=>({width:o[I]||0,height:d[I]||0});return{first:O(0),last:O(r-1),widest:O(E),highest:O(T),widths:o,heights:d}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return aR(this._alignToPixels?Ya(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const n=r[t];return n.$context||(n.$context=j8(this.getContext(),t,n))}return this.$context||(this.$context=k8(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=di(this.labelRotation),n=Math.abs(Math.cos(r)),a=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,d=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>d*a?d/n:c/a:c*a<d*n?c/n:d/a}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,n=this.chart,a=this.options,{grid:i,position:o,border:d}=a,c=i.offset,h=this.isHorizontal(),f=this.ticks.length+(c?1:0),p=vl(i),w=[],x=d.setContext(this.getContext()),k=x.display?x.width:0,y=k/2,b=function(G){return Ya(n,G,k)};let j,N,C,P,E,T,O,I,W,X,B,D;if(o==="top")j=b(this.bottom),T=this.bottom-p,I=j-y,X=b(t.top)+y,D=t.bottom;else if(o==="bottom")j=b(this.top),X=t.top,D=b(t.bottom)-y,T=j+y,I=this.top+p;else if(o==="left")j=b(this.right),E=this.right-p,O=j-y,W=b(t.left)+y,B=t.right;else if(o==="right")j=b(this.left),W=t.left,B=b(t.right)-y,E=j+y,O=this.left+p;else if(r==="x"){if(o==="center")j=b((t.top+t.bottom)/2+.5);else if(Ye(o)){const G=Object.keys(o)[0],F=o[G];j=b(this.chart.scales[G].getPixelForValue(F))}X=t.top,D=t.bottom,T=j+y,I=T+p}else if(r==="y"){if(o==="center")j=b((t.left+t.right)/2);else if(Ye(o)){const G=Object.keys(o)[0],F=o[G];j=b(this.chart.scales[G].getPixelForValue(F))}E=j-y,O=E-p,W=t.left,B=t.right}const U=$e(a.ticks.maxTicksLimit,f),Z=Math.max(1,Math.ceil(f/U));for(N=0;N<f;N+=Z){const G=this.getContext(N),F=i.setContext(G),R=d.setContext(G),q=F.lineWidth,J=F.color,re=R.dash||[],V=R.dashOffset,ae=F.tickWidth,fe=F.tickColor,be=F.tickBorderDash||[],z=F.tickBorderDashOffset;C=v8(this,N,c),C!==void 0&&(P=Ya(n,C,q),h?E=O=W=B=P:T=I=X=D=P,w.push({tx1:E,ty1:T,tx2:O,ty2:I,x1:W,y1:X,x2:B,y2:D,width:q,color:J,borderDash:re,borderDashOffset:V,tickWidth:ae,tickColor:fe,tickBorderDash:be,tickBorderDashOffset:z}))}return this._ticksLength=f,this._borderValue=j,w}_computeLabelItems(t){const r=this.axis,n=this.options,{position:a,ticks:i}=n,o=this.isHorizontal(),d=this.ticks,{align:c,crossAlign:h,padding:m,mirror:f}=i,p=vl(n.grid),w=p+m,x=f?-m:w,k=-di(this.labelRotation),y=[];let b,j,N,C,P,E,T,O,I,W,X,B,D="middle";if(a==="top")E=this.bottom-x,T=this._getXAxisLabelAlignment();else if(a==="bottom")E=this.top+x,T=this._getXAxisLabelAlignment();else if(a==="left"){const Z=this._getYAxisLabelAlignment(p);T=Z.textAlign,P=Z.x}else if(a==="right"){const Z=this._getYAxisLabelAlignment(p);T=Z.textAlign,P=Z.x}else if(r==="x"){if(a==="center")E=(t.top+t.bottom)/2+w;else if(Ye(a)){const Z=Object.keys(a)[0],G=a[Z];E=this.chart.scales[Z].getPixelForValue(G)+w}T=this._getXAxisLabelAlignment()}else if(r==="y"){if(a==="center")P=(t.left+t.right)/2-w;else if(Ye(a)){const Z=Object.keys(a)[0],G=a[Z];P=this.chart.scales[Z].getPixelForValue(G)}T=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(c==="start"?D="top":c==="end"&&(D="bottom"));const U=this._getLabelSizes();for(b=0,j=d.length;b<j;++b){N=d[b],C=N.label;const Z=i.setContext(this.getContext(b));O=this.getPixelForTick(b)+i.labelOffset,I=this._resolveTickFontOptions(b),W=I.lineHeight,X=Vt(C)?C.length:1;const G=X/2,F=Z.color,R=Z.textStrokeColor,q=Z.textStrokeWidth;let J=T;o?(P=O,T==="inner"&&(b===j-1?J=this.options.reverse?"left":"right":b===0?J=this.options.reverse?"right":"left":J="center"),a==="top"?h==="near"||k!==0?B=-X*W+W/2:h==="center"?B=-U.highest.height/2-G*W+W:B=-U.highest.height+W/2:h==="near"||k!==0?B=W/2:h==="center"?B=U.highest.height/2-G*W:B=U.highest.height-X*W,f&&(B*=-1),k!==0&&!Z.showLabelBackdrop&&(P+=W/2*Math.sin(k))):(E=O,B=(1-X)*W/2);let re;if(Z.showLabelBackdrop){const V=Ns(Z.backdropPadding),ae=U.heights[b],fe=U.widths[b];let be=B-V.top,z=0-V.left;switch(D){case"middle":be-=ae/2;break;case"bottom":be-=ae;break}switch(T){case"center":z-=fe/2;break;case"right":z-=fe;break;case"inner":b===j-1?z-=fe:b>0&&(z-=fe/2);break}re={left:z,top:be,width:fe+V.width,height:ae+V.height,color:Z.backdropColor}}y.push({label:C,font:I,textOffset:B,options:{rotation:k,color:F,strokeColor:R,strokeWidth:q,textAlign:J,textBaseline:D,translation:[P,E],backdrop:re}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-di(this.labelRotation))return t==="top"?"left":"right";let a="center";return r.align==="start"?a="left":r.align==="end"?a="right":r.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:n,mirror:a,padding:i}}=this.options,o=this._getLabelSizes(),d=t+i,c=o.widest.width;let h,m;return r==="left"?a?(m=this.right+i,n==="near"?h="left":n==="center"?(h="center",m+=c/2):(h="right",m+=c)):(m=this.right-d,n==="near"?h="right":n==="center"?(h="center",m-=c/2):(h="left",m=this.left)):r==="right"?a?(m=this.left+i,n==="near"?h="right":n==="center"?(h="center",m-=c/2):(h="left",m-=c)):(m=this.left+d,n==="near"?h="left":n==="center"?(h="center",m+=c/2):(h="right",m=this.right)):h="right",{textAlign:h,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:n,top:a,width:i,height:o}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(n,a,i,o),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const a=this.ticks.findIndex(i=>i.value===t);return a>=0?r.setContext(this.getContext(a)).lineWidth:0}drawGrid(t){const r=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const d=(c,h,m)=>{!m.width||!m.color||(n.save(),n.lineWidth=m.width,n.strokeStyle=m.color,n.setLineDash(m.borderDash||[]),n.lineDashOffset=m.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(h.x,h.y),n.stroke(),n.restore())};if(r.display)for(i=0,o=a.length;i<o;++i){const c=a[i];r.drawOnChartArea&&d({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&d({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:n,grid:a}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const d=a.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,m,f,p;this.isHorizontal()?(h=Ya(t,this.left,o)-o/2,m=Ya(t,this.right,d)+d/2,f=p=c):(f=Ya(t,this.top,o)-o/2,p=Ya(t,this.bottom,d)+d/2,h=m=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(h,f),r.lineTo(m,p),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const n=this.ctx,a=this._computeLabelArea();a&&Zy(n,a);const i=this.getLabelItems(t);for(const o of i){const d=o.options,c=o.font,h=o.label,m=o.textOffset;Kd(n,h,0,m,c,d)}a&&Gy(n)}drawTitle(){const{ctx:t,options:{position:r,title:n,reverse:a}}=this;if(!n.display)return;const i=xr(n.font),o=Ns(n.padding),d=n.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||Ye(r)?(c+=o.bottom,Vt(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:h,titleY:m,maxWidth:f,rotation:p}=_8(this,c,r,d);Kd(t,n.text,0,0,i,{color:n.color,maxWidth:f,rotation:p,textAlign:N8(d,r,a),textBaseline:"middle",translation:[h,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,n=$e(t.grid&&t.grid.z,-1),a=$e(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==qo.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let i,o;for(i=0,o=r.length;i<o;++i){const d=r[i];d[n]===this.id&&(!t||d.type===t)&&a.push(d)}return a}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return xr(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class cu{constructor(t,r,n){this.type=t,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let n;P8(r)&&(n=this.register(r));const a=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in a||(a[i]=t,S8(t,o,n),this.override&&It.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const r=this.items,n=t.id,a=this.scope;n in r&&delete r[n],a&&n in It[a]&&(delete It[a][n],this.override&&delete Si[n])}}function S8(e,t,r){const n=Vd(Object.create(null),[r?It.get(r):{},It.get(t),e.defaults]);It.set(t,n),e.defaultRoutes&&C8(t,e.defaultRoutes),e.descriptors&&It.describe(t,e.descriptors)}function C8(e,t){Object.keys(t).forEach(r=>{const n=r.split("."),a=n.pop(),i=[e].concat(n).join("."),o=t[r].split("."),d=o.pop(),c=o.join(".");It.route(i,a,c,d)})}function P8(e){return"id"in e&&"defaults"in e}class E8{constructor(){this.controllers=new cu(wo,"datasets",!0),this.elements=new cu(qn,"elements"),this.plugins=new cu(Object,"plugins"),this.scales=new cu(qo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,n){[...r].forEach(a=>{const i=n||this._getRegistryForType(a);n||i.isForType(a)||i===this.plugins&&a.id?this._exec(t,i,a):tt(a,o=>{const d=n||this._getRegistryForType(o);this._exec(t,d,o)})})}_exec(t,r,n){const a=Vy(t);pt(n["before"+a],[],n),r[t](n),pt(n["after"+a],[],n)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(t))return n}return this.plugins}_get(t,r,n){const a=r.get(t);if(a===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return a}}var Xs=new E8;class I8{constructor(){this._init=void 0}notify(t,r,n,a){if(r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=a?this._descriptors(t).filter(a):this._descriptors(t),o=this._notify(i,t,r,n);return r==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,r,n,a){a=a||{};for(const i of t){const o=i.plugin,d=o[n],c=[r,a,i.options];if(pt(d,c,o)===!1&&a.cancelable)return!1}return!0}invalidate(){et(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const n=t&&t.config,a=$e(n.options&&n.options.plugins,{}),i=T8(n);return a===!1&&!r?[]:M8(t,i,a,r)}_notifyStateChanges(t){const r=this._oldCache||[],n=this._cache,a=(i,o)=>i.filter(d=>!o.some(c=>d.plugin.id===c.plugin.id));this._notify(a(r,n),t,"stop"),this._notify(a(n,r),t,"start")}}function T8(e){const t={},r=[],n=Object.keys(Xs.plugins.items);for(let i=0;i<n.length;i++)r.push(Xs.getPlugin(n[i]));const a=e.plugins||[];for(let i=0;i<a.length;i++){const o=a[i];r.indexOf(o)===-1&&(r.push(o),t[o.id]=!0)}return{plugins:r,localIds:t}}function L8(e,t){return!t&&e===!1?null:e===!0?{}:e}function M8(e,{plugins:t,localIds:r},n,a){const i=[],o=e.getContext();for(const d of t){const c=d.id,h=L8(n[c],a);h!==null&&i.push({plugin:d,options:A8(e.config,{plugin:d,local:r[c]},h,o)})}return i}function A8(e,{plugin:t,local:r},n,a){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(n,i);return r&&t.defaults&&o.push(t.defaults),e.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qp(e,t){const r=It.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function O8(e,t){let r=e;return e==="_index_"?r=t:e==="_value_"&&(r=t==="x"?"y":"x"),r}function R8(e,t){return e===t?"_index_":"_value_"}function uj(e){if(e==="x"||e==="y"||e==="r")return e}function D8(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Kp(e,...t){if(uj(e))return e;for(const r of t){const n=r.axis||D8(r.position)||e.length>1&&uj(e[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function hj(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function F8(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(n=>n.xAxisID===e||n.yAxisID===e);if(r.length)return hj(e,"x",r[0])||hj(e,"y",r[0])}return{}}function z8(e,t){const r=Si[e.type]||{scales:{}},n=t.scales||{},a=qp(e.type,t),i=Object.create(null);return Object.keys(n).forEach(o=>{const d=n[o];if(!Ye(d))return console.error(`Invalid scale configuration for scale: ${o}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Kp(o,d,F8(o,e),It.scales[d.type]),h=R8(c,a),m=r.scales||{};i[o]=nd(Object.create(null),[{axis:c},d,m[c],m[h]])}),e.data.datasets.forEach(o=>{const d=o.type||e.type,c=o.indexAxis||qp(d,t),m=(Si[d]||{}).scales||{};Object.keys(m).forEach(f=>{const p=O8(f,c),w=o[p+"AxisID"]||p;i[w]=i[w]||Object.create(null),nd(i[w],[{axis:p},n[w],m[f]])})}),Object.keys(i).forEach(o=>{const d=i[o];nd(d,[It.scales[d.type],It.scale])}),i}function t4(e){const t=e.options||(e.options={});t.plugins=$e(t.plugins,{}),t.scales=z8(e,t)}function r4(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function B8(e){return e=e||{},e.data=r4(e.data),t4(e),e}const mj=new Map,s4=new Set;function uu(e,t){let r=mj.get(e);return r||(r=t(),mj.set(e,r),s4.add(r)),r}const wl=(e,t,r)=>{const n=Ao(t,r);n!==void 0&&e.add(n)};class $8{constructor(t){this._config=B8(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=r4(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),t4(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return uu(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return uu(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return uu(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,n=this.type;return uu(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const n=this._scopeCache;let a=n.get(t);return(!a||r)&&(a=new Map,n.set(t,a)),a}getOptionScopes(t,r,n){const{options:a,type:i}=this,o=this._cachedScopes(t,n),d=o.get(r);if(d)return d;const c=new Set;r.forEach(m=>{t&&(c.add(t),m.forEach(f=>wl(c,t,f))),m.forEach(f=>wl(c,a,f)),m.forEach(f=>wl(c,Si[i]||{},f)),m.forEach(f=>wl(c,It,f)),m.forEach(f=>wl(c,Hp,f))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),s4.has(r)&&o.set(r,h),h}chartOptionScopes(){const{options:t,type:r}=this;return[t,Si[r]||{},It.datasets[r]||{},{type:r},It,Hp]}resolveNamedOptions(t,r,n,a=[""]){const i={$shared:!0},{resolver:o,subPrefixes:d}=gj(this._resolverCache,t,a);let c=o;if(V8(o,r)){i.$shared=!1,n=Oa(n)?n():n;const h=this.createResolver(t,n,d);c=Oo(o,n,h)}for(const h of r)i[h]=c[h];return i}createResolver(t,r,n=[""],a){const{resolver:i}=gj(this._resolverCache,t,n);return Ye(r)?Oo(i,r,void 0,a):i}}function gj(e,t,r){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=r.join();let i=n.get(a);return i||(i={resolver:Jy(t,r),subPrefixes:r.filter(d=>!d.toLowerCase().includes("hover"))},n.set(a,i)),i}const U8=e=>Ye(e)&&Object.getOwnPropertyNames(e).some(t=>Oa(e[t]));function V8(e,t){const{isScriptable:r,isIndexable:n}=zS(e);for(const a of t){const i=r(a),o=n(a),d=(o||i)&&e[a];if(i&&(Oa(d)||U8(d))||o&&Vt(d))return!0}return!1}var H8="4.5.1";const W8=["top","bottom","left","right","chartArea"];function fj(e,t){return e==="top"||e==="bottom"||W8.indexOf(e)===-1&&t==="x"}function pj(e,t){return function(r,n){return r[e]===n[e]?r[t]-n[t]:r[e]-n[e]}}function xj(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),pt(r&&r.onComplete,[e],t)}function q8(e){const t=e.chart,r=t.options.animation;pt(r&&r.onProgress,[e],t)}function n4(e){return eb()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const uh={},yj=e=>{const t=n4(e);return Object.values(uh).filter(r=>r.canvas===t).pop()};function K8(e,t,r){const n=Object.keys(e);for(const a of n){const i=+a;if(i>=t){const o=e[a];delete e[a],(r>0||i>t)&&(e[i+r]=o)}}}function Z8(e,t,r,n){return!r||e.type==="mouseout"?null:n?t:e}var Qn;let cc=(Qn=class{static register(...t){Xs.add(...t),bj()}static unregister(...t){Xs.remove(...t),bj()}constructor(t,r){const n=this.config=new $8(r),a=n4(t),i=yj(a);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||h8(a)),this.platform.updateConfig(n);const d=this.platform.acquireContext(a,o.aspectRatio),c=d&&d.canvas,h=c&&c.height,m=c&&c.width;if(this.id=HO(),this.ctx=d,this.canvas=c,this.width=m,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new I8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dR(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],uh[this.id]=this,!d||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Cn.listen(this,"complete",xj),Cn.listen(this,"progress",q8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:n,height:a,_aspectRatio:i}=this;return et(t)?r&&i?i:a?n/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Xs}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():$k(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Fk(this.canvas,this.ctx),this}stop(){return Cn.stop(this),this}resize(t,r){Cn.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const n=this.options,a=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(a,t,r,i),d=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,$k(this,d,!0)&&(this.notifyPlugins("resize",{size:o}),pt(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};tt(r,(n,a)=>{n.id=a})}buildOrUpdateScales(){const t=this.options,r=t.scales,n=this.scales,a=Object.keys(n).reduce((o,d)=>(o[d]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const d=r[o],c=Kp(o,d),h=c==="r",m=c==="x";return{options:d,dposition:h?"chartArea":m?"bottom":"left",dtype:h?"radialLinear":m?"category":"linear"}}))),tt(i,o=>{const d=o.options,c=d.id,h=Kp(c,d),m=$e(d.type,o.dtype);(d.position===void 0||fj(d.position,h)!==fj(o.dposition))&&(d.position=o.dposition),a[c]=!0;let f=null;if(c in n&&n[c].type===m)f=n[c];else{const p=Xs.getScale(m);f=new p({id:c,type:m,ctx:this.ctx,chart:this}),n[f.id]=f}f.init(d,t)}),tt(a,(o,d)=>{o||delete n[d]}),tt(n,o=>{bs.configure(this,o,o.options),bs.addBox(this,o)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,n=t.length;if(t.sort((a,i)=>a.index-i.index),n>r){for(let a=r;a<n;++a)this._destroyDatasetMeta(a);t.splice(r,n-r)}this._sortedMetasets=t.slice(0).sort(pj("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((n,a)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=r.length;n<a;n++){const i=r[n];let o=this.getDatasetMeta(n);const d=i.type||this.config.type;if(o.type&&o.type!==d&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=d,o.indexAxis=i.indexAxis||qp(d,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=Xs.getController(d),{datasetElementType:h,dataElementType:m}=It.datasets[d];Object.assign(c,{dataElementType:Xs.getElement(m),datasetElementType:h&&Xs.getElement(h)}),o.controller=new c(this,n),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){tt(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,m=this.data.datasets.length;h<m;h++){const{controller:f}=this.getDatasetMeta(h),p=!a&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),a||tt(i,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(pj("z","_idx"));const{_active:d,_lastEvent:c}=this;c?this._eventHandler(c,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){tt(this.scales,t=>{bs.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(t.events);(!Pk(r,n)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:i}of r){const o=n==="_removeElements"?-i:i;K8(t,a,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(t.filter(o=>o[0]===i).map((o,d)=>d+","+o.splice(1).join(","))),a=n(0);for(let i=1;i<r;i++)if(!Pk(a,n(i)))return;return Array.from(a).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;bs.update(this,this.width,this.height,t);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],tt(this.boxes,a=>{n&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,i)=>{a._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Oa(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const n=this.getDatasetMeta(t),a={meta:n,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(n.controller._update(r),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Cn.has(this)?this.attached&&!Cn.running(this)&&Cn.start(this):(this.draw(),xj({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:n,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,n=[];let a,i;for(a=0,i=r.length;a<i;++a){const o=r[a];(!t||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,n={meta:t,index:t.index,cancelable:!0},a=fD(this,t);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(a&&Zy(r,a),t.controller.draw(),a&&Gy(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return qd(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,n,a){const i=WD.modes[r];return typeof i=="function"?i(this,t,n,a):[]}getDatasetMeta(t){const r=this.data.datasets[t],n=this._metasets;let a=n.filter(i=>i&&i._dataset===r).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=Ei(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const n=this.getDatasetMeta(t);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(t,r){const n=this.getDatasetMeta(t);n.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,n){const a=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,a);Hd(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update(d=>d.datasetIndex===t?a:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Cn.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Fk(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete uh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,n=(i,o)=>{r.addEventListener(this,i,o),t[i]=o},a=(i,o,d)=>{i.offsetX=o,i.offsetY=d,this._eventHandler(i)};tt(this.options.events,i=>n(i,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,n=(c,h)=>{r.addEventListener(this,c,h),t[c]=h},a=(c,h)=>{t[c]&&(r.removeEventListener(this,c,h),delete t[c])},i=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const d=()=>{a("attach",d),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,a("resize",i),this._stop(),this._resize(0,0),n("attach",d)},r.isAttached(this.canvas)?d():o()}unbindEvents(){tt(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},tt(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,n){const a=n?"set":"remove";let i,o,d,c;for(r==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+a+"DatasetHoverStyle"]()),d=0,c=t.length;d<c;++d){o=t[d];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[a+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],n=t.map(({datasetIndex:i,index:o})=>{const d=this.getDatasetMeta(i);if(!d)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:d.data[o],index:o}});!sm(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(t,r,n){return this._plugins.notify(this,t,r,n)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,n){const a=this.options.hover,i=(c,h)=>c.filter(m=>!h.some(f=>m.datasetIndex===f.datasetIndex&&m.index===f.index)),o=i(r,t),d=n?t:i(t,r);o.length&&this.updateHoverStyle(o,a.mode,!1),d.length&&a.mode&&this.updateHoverStyle(d,a.mode,!0)}_eventHandler(t,r){const n={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},a=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",n,a)===!1)return;const i=this._handleEvent(t,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(i||n.changed)&&this.render(),this}_handleEvent(t,r,n){const{_active:a=[],options:i}=this,o=r,d=this._getActiveElements(t,a,n,o),c=YO(t),h=Z8(t,this._lastEvent,n,c);n&&(this._lastEvent=null,pt(i.onHover,[t,d,this],this),c&&pt(i.onClick,[t,d,this],this));const m=!sm(d,a);return(m||r)&&(this._active=d,this._updateHoverStyles(d,a,r)),this._lastEvent=h,m}_getActiveElements(t,r,n,a){if(t.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,a)}},Ce(Qn,"defaults",It),Ce(Qn,"instances",uh),Ce(Qn,"overrides",Si),Ce(Qn,"registry",Xs),Ce(Qn,"version",H8),Ce(Qn,"getChart",yj),Qn);function bj(){return tt(cc.instances,e=>e._plugins.invalidate())}function G8(e,t,r){const{startAngle:n,x:a,y:i,outerRadius:o,innerRadius:d,options:c}=t,{borderWidth:h,borderJoinStyle:m}=c,f=Math.min(h/o,Ls(n-r));if(e.beginPath(),e.arc(a,i,o-h/2,n+f/2,r-f/2),d>0){const p=Math.min(h/d,Ls(n-r));e.arc(a,i,d+h/2,r-p/2,n+p/2,!0)}else{const p=Math.min(h/2,o*Ls(n-r));if(m==="round")e.arc(a,i,p,r-ct/2,n+ct/2,!0);else if(m==="bevel"){const w=2*p*p,x=-w*Math.cos(r+ct/2)+a,k=-w*Math.sin(r+ct/2)+i,y=w*Math.cos(n+ct/2)+a,b=w*Math.sin(n+ct/2)+i;e.lineTo(x,k),e.lineTo(y,b)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function Y8(e,t,r){const{startAngle:n,pixelMargin:a,x:i,y:o,outerRadius:d,innerRadius:c}=t;let h=a/d;e.beginPath(),e.arc(i,o,d,n-h,r+h),c>a?(h=a/c,e.arc(i,o,c,r+h,n-h,!0)):e.arc(i,o,a,r+sr,n-sr),e.closePath(),e.clip()}function J8(e){return Yy(e,["outerStart","outerEnd","innerStart","innerEnd"])}function X8(e,t,r,n){const a=J8(e.options.borderRadius),i=(r-t)/2,o=Math.min(i,n*t/2),d=c=>{const h=(r-Math.min(i,c))*n/2;return pr(c,0,Math.min(i,h))};return{outerStart:d(a.outerStart),outerEnd:d(a.outerEnd),innerStart:pr(a.innerStart,0,o),innerEnd:pr(a.innerEnd,0,o)}}function Ui(e,t,r,n){return{x:r+e*Math.cos(t),y:n+e*Math.sin(t)}}function dm(e,t,r,n,a,i){const{x:o,y:d,startAngle:c,pixelMargin:h,innerRadius:m}=t,f=Math.max(t.outerRadius+n+r-h,0),p=m>0?m+n+r+h:0;let w=0;const x=a-c;if(n){const Z=m>0?m-n:0,G=f>0?f-n:0,F=(Z+G)/2,R=F!==0?x*F/(F+n):x;w=(x-R)/2}const k=Math.max(.001,x*f-r/ct)/f,y=(x-k)/2,b=c+y+w,j=a-y-w,{outerStart:N,outerEnd:C,innerStart:P,innerEnd:E}=X8(t,p,f,j-b),T=f-N,O=f-C,I=b+N/T,W=j-C/O,X=p+P,B=p+E,D=b+P/X,U=j-E/B;if(e.beginPath(),i){const Z=(I+W)/2;if(e.arc(o,d,f,I,Z),e.arc(o,d,f,Z,W),C>0){const q=Ui(O,W,o,d);e.arc(q.x,q.y,C,W,j+sr)}const G=Ui(B,j,o,d);if(e.lineTo(G.x,G.y),E>0){const q=Ui(B,U,o,d);e.arc(q.x,q.y,E,j+sr,U+Math.PI)}const F=(j-E/p+(b+P/p))/2;if(e.arc(o,d,p,j-E/p,F,!0),e.arc(o,d,p,F,b+P/p,!0),P>0){const q=Ui(X,D,o,d);e.arc(q.x,q.y,P,D+Math.PI,b-sr)}const R=Ui(T,b,o,d);if(e.lineTo(R.x,R.y),N>0){const q=Ui(T,I,o,d);e.arc(q.x,q.y,N,b-sr,I)}}else{e.moveTo(o,d);const Z=Math.cos(I)*f+o,G=Math.sin(I)*f+d;e.lineTo(Z,G);const F=Math.cos(W)*f+o,R=Math.sin(W)*f+d;e.lineTo(F,R)}e.closePath()}function Q8(e,t,r,n,a){const{fullCircles:i,startAngle:o,circumference:d}=t;let c=t.endAngle;if(i){dm(e,t,r,n,c,a);for(let h=0;h<i;++h)e.fill();isNaN(d)||(c=o+(d%ir||ir))}return dm(e,t,r,n,c,a),e.fill(),c}function eF(e,t,r,n,a){const{fullCircles:i,startAngle:o,circumference:d,options:c}=t,{borderWidth:h,borderJoinStyle:m,borderDash:f,borderDashOffset:p,borderRadius:w}=c,x=c.borderAlign==="inner";if(!h)return;e.setLineDash(f||[]),e.lineDashOffset=p,x?(e.lineWidth=h*2,e.lineJoin=m||"round"):(e.lineWidth=h,e.lineJoin=m||"bevel");let k=t.endAngle;if(i){dm(e,t,r,n,k,a);for(let y=0;y<i;++y)e.stroke();isNaN(d)||(k=o+(d%ir||ir))}x&&Y8(e,t,k),c.selfJoin&&k-o>=ct&&w===0&&m!=="miter"&&G8(e,t,k),i||(dm(e,t,r,n,k,a),e.stroke())}class no extends qn{constructor(r){super();Ce(this,"circumference");Ce(this,"endAngle");Ce(this,"fullCircles");Ce(this,"innerRadius");Ce(this,"outerRadius");Ce(this,"pixelMargin");Ce(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.getProps(["x","y"],a),{angle:o,distance:d}=IS(i,{x:r,y:n}),{startAngle:c,endAngle:h,innerRadius:m,outerRadius:f,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),w=(this.options.spacing+this.options.borderWidth)/2,x=$e(p,h-c),k=Hy(o,c,h)&&c!==h,y=x>=ir||k,b=ua(d,m+w,f+w);return y&&b}getCenterPoint(r){const{x:n,y:a,startAngle:i,endAngle:o,innerRadius:d,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:h,spacing:m}=this.options,f=(i+o)/2,p=(d+c+m+h)/2;return{x:n+Math.cos(f)*p,y:a+Math.sin(f)*p}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:a}=this,i=(n.offset||0)/4,o=(n.spacing||0)/2,d=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=a>ir?Math.floor(a/ir):0,a===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const c=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(c)*i,Math.sin(c)*i);const h=1-Math.sin(Math.min(ct,a||0)),m=i*h;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,Q8(r,this,m,o,d),eF(r,this,m,o,d),r.restore()}}Ce(no,"id","arc"),Ce(no,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Ce(no,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ce(no,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function a4(e,t,r=t){e.lineCap=$e(r.borderCapStyle,t.borderCapStyle),e.setLineDash($e(r.borderDash,t.borderDash)),e.lineDashOffset=$e(r.borderDashOffset,t.borderDashOffset),e.lineJoin=$e(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=$e(r.borderWidth,t.borderWidth),e.strokeStyle=$e(r.borderColor,t.borderColor)}function tF(e,t,r){e.lineTo(r.x,r.y)}function rF(e){return e.stepped?jR:e.tension||e.cubicInterpolationMode==="monotone"?NR:tF}function i4(e,t,r={}){const n=e.length,{start:a=0,end:i=n-1}=r,{start:o,end:d}=t,c=Math.max(a,o),h=Math.min(i,d),m=a<o&&i<o||a>d&&i>d;return{count:n,start:c,loop:t.loop,ilen:h<c&&!m?n+h-c:h-c}}function sF(e,t,r,n){const{points:a,options:i}=t,{count:o,start:d,loop:c,ilen:h}=i4(a,r,n),m=rF(i);let{move:f=!0,reverse:p}=n||{},w,x,k;for(w=0;w<=h;++w)x=a[(d+(p?h-w:w))%o],!x.skip&&(f?(e.moveTo(x.x,x.y),f=!1):m(e,k,x,p,i.stepped),k=x);return c&&(x=a[(d+(p?h:0))%o],m(e,k,x,p,i.stepped)),!!c}function nF(e,t,r,n){const a=t.points,{count:i,start:o,ilen:d}=i4(a,r,n),{move:c=!0,reverse:h}=n||{};let m=0,f=0,p,w,x,k,y,b;const j=C=>(o+(h?d-C:C))%i,N=()=>{k!==y&&(e.lineTo(m,y),e.lineTo(m,k),e.lineTo(m,b))};for(c&&(w=a[j(0)],e.moveTo(w.x,w.y)),p=0;p<=d;++p){if(w=a[j(p)],w.skip)continue;const C=w.x,P=w.y,E=C|0;E===x?(P<k?k=P:P>y&&(y=P),m=(f*m+C)/++f):(N(),e.lineTo(C,P),x=E,f=0,k=y=P),b=P}N()}function Zp(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?nF:sF}function aF(e){return e.stepped?rD:e.tension||e.cubicInterpolationMode==="monotone"?sD:si}function iF(e,t,r,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,r,n)&&a.closePath()),a4(e,t.options),e.stroke(a)}function oF(e,t,r,n){const{segments:a,options:i}=t,o=Zp(t);for(const d of a)a4(e,i,d.style),e.beginPath(),o(e,t,d,{start:r,end:r+n-1})&&e.closePath(),e.stroke()}const lF=typeof Path2D=="function";function dF(e,t,r,n){lF&&!t.options.segment?iF(e,t,r,n):oF(e,t,r,n)}class ao extends qn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;ZR(this._points,n,t,a,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uD(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,n=t.length;return n&&r[t[n-1].end]}interpolate(t,r){const n=this.options,a=t[r],i=this.points,o=lD(this,{property:r,start:a,end:a});if(!o.length)return;const d=[],c=aF(n);let h,m;for(h=0,m=o.length;h<m;++h){const{start:f,end:p}=o[h],w=i[f],x=i[p];if(w===x){d.push(w);continue}const k=Math.abs((a-w[r])/(x[r]-w[r])),y=c(w,x,k,n.stepped);y[r]=t[r],d.push(y)}return d.length===1?d[0]:d}pathSegment(t,r,n){return Zp(this)(t,this,r,n)}path(t,r,n){const a=this.segments,i=Zp(this);let o=this._loop;r=r||0,n=n||this.points.length-r;for(const d of a)o&=i(t,this,d,{start:r,end:r+n-1});return!!o}draw(t,r,n,a){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),dF(t,this,n,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ce(ao,"id","line"),Ce(ao,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ce(ao,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ce(ao,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function vj(e,t,r,n){const a=e.options,{[r]:i}=e.getProps([r],n);return Math.abs(t-i)<a.radius+a.hitRadius}class ld extends qn{constructor(r){super();Ce(this,"parsed");Ce(this,"skip");Ce(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,a){const i=this.options,{x:o,y:d}=this.getProps(["x","y"],a);return Math.pow(r-o,2)+Math.pow(n-d,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return vj(this,r,"x",n)}inYRange(r,n){return vj(this,r,"y",n)}getCenterPoint(r){const{x:n,y:a}=this.getProps(["x","y"],r);return{x:n,y:a}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const a=n&&r.borderWidth||0;return(n+a)*2}draw(r,n){const a=this.options;this.skip||a.radius<.1||!qd(this,n,this.size(a)/2)||(r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.fillStyle=a.backgroundColor,Wp(r,a,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}Ce(ld,"id","point"),Ce(ld,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ce(ld,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function o4(e,t){const{x:r,y:n,base:a,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let d,c,h,m,f;return e.horizontal?(f=o/2,d=Math.min(r,a),c=Math.max(r,a),h=n-f,m=n+f):(f=i/2,d=r-f,c=r+f,h=Math.min(n,a),m=Math.max(n,a)),{left:d,top:h,right:c,bottom:m}}function ma(e,t,r,n){return e?0:pr(t,r,n)}function cF(e,t,r){const n=e.options.borderWidth,a=e.borderSkipped,i=FS(n);return{t:ma(a.top,i.top,0,r),r:ma(a.right,i.right,0,t),b:ma(a.bottom,i.bottom,0,r),l:ma(a.left,i.left,0,t)}}function uF(e,t,r){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,i=bo(a),o=Math.min(t,r),d=e.borderSkipped,c=n||Ye(a);return{topLeft:ma(!c||d.top||d.left,i.topLeft,0,o),topRight:ma(!c||d.top||d.right,i.topRight,0,o),bottomLeft:ma(!c||d.bottom||d.left,i.bottomLeft,0,o),bottomRight:ma(!c||d.bottom||d.right,i.bottomRight,0,o)}}function hF(e){const t=o4(e),r=t.right-t.left,n=t.bottom-t.top,a=cF(e,r/2,n/2),i=uF(e,r/2,n/2);return{outer:{x:t.left,y:t.top,w:r,h:n,radius:i},inner:{x:t.left+a.l,y:t.top+a.t,w:r-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,i.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(a.b,a.r))}}}}function t0(e,t,r,n){const a=t===null,i=r===null,d=e&&!(a&&i)&&o4(e,n);return d&&(a||ua(t,d.left,d.right))&&(i||ua(r,d.top,d.bottom))}function mF(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function gF(e,t){e.rect(t.x,t.y,t.w,t.h)}function r0(e,t,r={}){const n=e.x!==r.x?-t:0,a=e.y!==r.y?-t:0,i=(e.x+e.w!==r.x+r.w?t:0)-n,o=(e.y+e.h!==r.y+r.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+i,h:e.h+o,radius:e.radius}}class dd extends qn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:n,backgroundColor:a}}=this,{inner:i,outer:o}=hF(this),d=mF(o.radius)?im:gF;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),d(t,r0(o,r,i)),t.clip(),d(t,r0(i,-r,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),d(t,r0(i,r)),t.fillStyle=a,t.fill(),t.restore()}inRange(t,r,n){return t0(this,t,r,n)}inXRange(t,r){return t0(this,t,null,r)}inYRange(t,r){return t0(this,null,t,r)}getCenterPoint(t){const{x:r,y:n,base:a,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(r+a)/2:r,y:i?n:(n+a)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Ce(dd,"id","bar"),Ce(dd,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ce(dd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const wj=(e,t)=>{let{boxHeight:r=t,boxWidth:n=t}=e;return e.usePointStyle&&(r=Math.min(r,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(t,r)}},fF=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class kj extends qn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,n){this.maxWidth=t,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=pt(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(n=>t.filter(n,this.chart.data))),t.sort&&(r=r.sort((n,a)=>t.sort(n,a,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const n=t.labels,a=xr(n.font),i=a.size,o=this._computeTitleHeight(),{boxWidth:d,itemHeight:c}=wj(n,i);let h,m;r.font=a.string,this.isHorizontal()?(h=this.maxWidth,m=this._fitRows(o,i,d,c)+10):(m=this.maxHeight,h=this._fitCols(o,a,d,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,r,n,a){const{ctx:i,maxWidth:o,options:{labels:{padding:d}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],m=a+d;let f=t;i.textAlign="left",i.textBaseline="middle";let p=-1,w=-m;return this.legendItems.forEach((x,k)=>{const y=n+r/2+i.measureText(x.text).width;(k===0||h[h.length-1]+y+2*d>o)&&(f+=m,h[h.length-(k>0?0:1)]=0,w+=m,p++),c[k]={left:0,top:w,row:p,width:y,height:a},h[h.length-1]+=y+d}),f}_fitCols(t,r,n,a){const{ctx:i,maxHeight:o,options:{labels:{padding:d}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],m=o-t;let f=d,p=0,w=0,x=0,k=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:j,itemHeight:N}=pF(n,r,i,y,a);b>0&&w+N+2*d>m&&(f+=p+d,h.push({width:p,height:w}),x+=p+d,k++,p=w=0),c[b]={left:x,top:w,col:k,width:j,height:N},p=Math.max(p,j),w+=N+d}),f+=p,h.push({width:p,height:w}),f}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:a},rtl:i}}=this,o=vo(i,this.left,this.width);if(this.isHorizontal()){let d=0,c=mr(n,this.left+a,this.right-this.lineWidths[d]);for(const h of r)d!==h.row&&(d=h.row,c=mr(n,this.left+a,this.right-this.lineWidths[d])),h.top+=this.top+t+a,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+a}else{let d=0,c=mr(n,this.top+t+a,this.bottom-this.columnSizes[d].height);for(const h of r)h.col!==d&&(d=h.col,c=mr(n,this.top+t+a,this.bottom-this.columnSizes[d].height)),h.top=c,h.left+=this.left+a,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Zy(t,this),this._draw(),Gy(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:n,ctx:a}=this,{align:i,labels:o}=t,d=It.color,c=vo(t.rtl,this.left,this.width),h=xr(o.font),{padding:m}=o,f=h.size,p=f/2;let w;this.drawTitle(),a.textAlign=c.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=h.string;const{boxWidth:x,boxHeight:k,itemHeight:y}=wj(o,f),b=function(E,T,O){if(isNaN(x)||x<=0||isNaN(k)||k<0)return;a.save();const I=$e(O.lineWidth,1);if(a.fillStyle=$e(O.fillStyle,d),a.lineCap=$e(O.lineCap,"butt"),a.lineDashOffset=$e(O.lineDashOffset,0),a.lineJoin=$e(O.lineJoin,"miter"),a.lineWidth=I,a.strokeStyle=$e(O.strokeStyle,d),a.setLineDash($e(O.lineDash,[])),o.usePointStyle){const W={radius:k*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:I},X=c.xPlus(E,x/2),B=T+p;DS(a,W,X,B,o.pointStyleWidth&&x)}else{const W=T+Math.max((f-k)/2,0),X=c.leftForLtr(E,x),B=bo(O.borderRadius);a.beginPath(),Object.values(B).some(D=>D!==0)?im(a,{x:X,y:W,w:x,h:k,radius:B}):a.rect(X,W,x,k),a.fill(),I!==0&&a.stroke()}a.restore()},j=function(E,T,O){Kd(a,O.text,E,T+y/2,h,{strikethrough:O.hidden,textAlign:c.textAlign(O.textAlign)})},N=this.isHorizontal(),C=this._computeTitleHeight();N?w={x:mr(i,this.left+m,this.right-n[0]),y:this.top+m+C,line:0}:w={x:this.left+m,y:mr(i,this.top+C+m,this.bottom-r[0].height),line:0},HS(this.ctx,t.textDirection);const P=y+m;this.legendItems.forEach((E,T)=>{a.strokeStyle=E.fontColor,a.fillStyle=E.fontColor;const O=a.measureText(E.text).width,I=c.textAlign(E.textAlign||(E.textAlign=o.textAlign)),W=x+p+O;let X=w.x,B=w.y;c.setWidth(this.width),N?T>0&&X+W+m>this.right&&(B=w.y+=P,w.line++,X=w.x=mr(i,this.left+m,this.right-n[w.line])):T>0&&B+P>this.bottom&&(X=w.x=X+r[w.line].width+m,w.line++,B=w.y=mr(i,this.top+C+m,this.bottom-r[w.line].height));const D=c.x(X);if(b(D,B,E),X=cR(I,X+x+p,N?X+W:this.right,t.rtl),j(c.x(X),B,E),N)w.x+=W+m;else if(typeof E.text!="string"){const U=h.lineHeight;w.y+=l4(E,U)+m}else w.y+=P}),WS(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,n=xr(r.font),a=Ns(r.padding);if(!r.display)return;const i=vo(t.rtl,this.left,this.width),o=this.ctx,d=r.position,c=n.size/2,h=a.top+c;let m,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+h,f=mr(t.align,f,this.right-p);else{const x=this.columnSizes.reduce((k,y)=>Math.max(k,y.height),0);m=h+mr(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const w=mr(d,f,f+p);o.textAlign=i.textAlign(qy(d)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=n.string,Kd(o,r.text,w,m,n)}_computeTitleHeight(){const t=this.options.title,r=xr(t.font),n=Ns(t.padding);return t.display?r.lineHeight+n.height:0}_getLegendItemAt(t,r){let n,a,i;if(ua(t,this.left,this.right)&&ua(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(a=i[n],ua(t,a.left,a.left+a.width)&&ua(r,a.top,a.top+a.height))return this.legendItems[n]}return null}handleEvent(t){const r=this.options;if(!bF(t.type,r))return;const n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const a=this._hoveredItem,i=fF(a,n);a&&!i&&pt(r.onLeave,[t,a,this],this),this._hoveredItem=n,n&&!i&&pt(r.onHover,[t,n,this],this)}else n&&pt(r.onClick,[t,n,this],this)}}function pF(e,t,r,n,a){const i=xF(n,e,t,r),o=yF(a,n,t.lineHeight);return{itemWidth:i,itemHeight:o}}function xF(e,t,r,n){let a=e.text;return a&&typeof a!="string"&&(a=a.reduce((i,o)=>i.length>o.length?i:o)),t+r.size/2+n.measureText(a).width}function yF(e,t,r){let n=e;return typeof t.text!="string"&&(n=l4(t,r)),n}function l4(e,t){const r=e.text?e.text.length:0;return t*r}function bF(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var d4={id:"legend",_element:kj,start(e,t,r){const n=e.legend=new kj({ctx:e.ctx,options:r,chart:e});bs.configure(e,n,r),bs.addBox(e,n)},stop(e){bs.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const n=e.legend;bs.configure(e,n,r),n.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const n=t.datasetIndex,a=r.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:a,color:i,useBorderRadius:o,borderRadius:d}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(r?0:void 0),m=Ns(h.borderWidth);return{text:t[c.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:h.borderColor,pointStyle:n||h.pointStyle,rotation:h.rotation,textAlign:a||h.textAlign,borderRadius:o&&(d||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class c4 extends qn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const a=Vt(n.text)?n.text.length:1;this._padding=Ns(n.padding);const i=a*xr(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:n,bottom:a,right:i,options:o}=this,d=o.align;let c=0,h,m,f;return this.isHorizontal()?(m=mr(d,n,i),f=r+t,h=i-n):(o.position==="left"?(m=n+t,f=mr(d,a,r),c=ct*-.5):(m=i-t,f=mr(d,r,a),c=ct*.5),h=a-r),{titleX:m,titleY:f,maxWidth:h,rotation:c}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const n=xr(r.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:d,maxWidth:c,rotation:h}=this._drawArgs(i);Kd(t,r.text,0,0,n,{color:r.color,maxWidth:c,rotation:h,textAlign:qy(r.align),textBaseline:"middle",translation:[o,d]})}}function vF(e,t){const r=new c4({ctx:e.ctx,options:t,chart:e});bs.configure(e,r,t),bs.addBox(e,r),e.titleBlock=r}var u4={id:"title",_element:c4,start(e,t,r){vF(e,r)},stop(e){const t=e.titleBlock;bs.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const n=e.titleBlock;bs.configure(e,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ll={average(e){if(!e.length)return!1;let t,r,n=new Set,a=0,i=0;for(t=0,r=e.length;t<r;++t){const d=e[t].element;if(d&&d.hasValue()){const c=d.tooltipPosition();n.add(c.x),a+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((d,c)=>d+c)/n.size,y:a/i}},nearest(e,t){if(!e.length)return!1;let r=t.x,n=t.y,a=Number.POSITIVE_INFINITY,i,o,d;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),m=Vp(t,h);m<a&&(a=m,d=c)}}if(d){const c=d.tooltipPosition();r=c.x,n=c.y}return{x:r,y:n}}};function Ys(e,t){return t&&(Vt(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Pn(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function wF(e,t){const{element:r,datasetIndex:n,index:a}=t,i=e.getDatasetMeta(n).controller,{label:o,value:d}=i.getLabelAndValue(a);return{chart:e,label:o,parsed:i.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:d,dataset:i.getDataset(),dataIndex:a,datasetIndex:n,element:r}}function jj(e,t){const r=e.chart.ctx,{body:n,footer:a,title:i}=e,{boxWidth:o,boxHeight:d}=t,c=xr(t.bodyFont),h=xr(t.titleFont),m=xr(t.footerFont),f=i.length,p=a.length,w=n.length,x=Ns(t.padding);let k=x.height,y=0,b=n.reduce((C,P)=>C+P.before.length+P.lines.length+P.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,f&&(k+=f*h.lineHeight+(f-1)*t.titleSpacing+t.titleMarginBottom),b){const C=t.displayColors?Math.max(d,c.lineHeight):c.lineHeight;k+=w*C+(b-w)*c.lineHeight+(b-1)*t.bodySpacing}p&&(k+=t.footerMarginTop+p*m.lineHeight+(p-1)*t.footerSpacing);let j=0;const N=function(C){y=Math.max(y,r.measureText(C).width+j)};return r.save(),r.font=h.string,tt(e.title,N),r.font=c.string,tt(e.beforeBody.concat(e.afterBody),N),j=t.displayColors?o+2+t.boxPadding:0,tt(n,C=>{tt(C.before,N),tt(C.lines,N),tt(C.after,N)}),j=0,r.font=m.string,tt(e.footer,N),r.restore(),y+=x.width,{width:y,height:k}}function kF(e,t){const{y:r,height:n}=t;return r<n/2?"top":r>e.height-n/2?"bottom":"center"}function jF(e,t,r,n){const{x:a,width:i}=n,o=r.caretSize+r.caretPadding;if(e==="left"&&a+i+o>t.width||e==="right"&&a-i-o<0)return!0}function NF(e,t,r,n){const{x:a,width:i}=r,{width:o,chartArea:{left:d,right:c}}=e;let h="center";return n==="center"?h=a<=(d+c)/2?"left":"right":a<=i/2?h="left":a>=o-i/2&&(h="right"),jF(h,e,t,r)&&(h="center"),h}function Nj(e,t,r){const n=r.yAlign||t.yAlign||kF(e,r);return{xAlign:r.xAlign||t.xAlign||NF(e,t,r,n),yAlign:n}}function _F(e,t){let{x:r,width:n}=e;return t==="right"?r-=n:t==="center"&&(r-=n/2),r}function SF(e,t,r){let{y:n,height:a}=e;return t==="top"?n+=r:t==="bottom"?n-=a+r:n-=a/2,n}function _j(e,t,r,n){const{caretSize:a,caretPadding:i,cornerRadius:o}=e,{xAlign:d,yAlign:c}=r,h=a+i,{topLeft:m,topRight:f,bottomLeft:p,bottomRight:w}=bo(o);let x=_F(t,d);const k=SF(t,c,h);return c==="center"?d==="left"?x+=h:d==="right"&&(x-=h):d==="left"?x-=Math.max(m,p)+a:d==="right"&&(x+=Math.max(f,w)+a),{x:pr(x,0,n.width-t.width),y:pr(k,0,n.height-t.height)}}function hu(e,t,r){const n=Ns(r.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-n.right:e.x+n.left}function Sj(e){return Ys([],Pn(e))}function CF(e,t,r){return Ei(e,{tooltip:t,tooltipItems:r,type:"tooltip"})}function Cj(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const h4={beforeTitle:Sn,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return r[t.dataIndex]}return""},afterTitle:Sn,beforeBody:Sn,beforeLabel:Sn,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return et(r)||(t+=r),t},labelColor(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Sn,afterBody:Sn,beforeFooter:Sn,footer:Sn,afterFooter:Sn};function Ar(e,t,r,n){const a=e[t].call(r,n);return typeof a>"u"?h4[t].call(r,n):a}class Gp extends qn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&r.options.animation&&n.animations,i=new KS(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=CF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:n}=r,a=Ar(n,"beforeTitle",this,t),i=Ar(n,"title",this,t),o=Ar(n,"afterTitle",this,t);let d=[];return d=Ys(d,Pn(a)),d=Ys(d,Pn(i)),d=Ys(d,Pn(o)),d}getBeforeBody(t,r){return Sj(Ar(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:n}=r,a=[];return tt(t,i=>{const o={before:[],lines:[],after:[]},d=Cj(n,i);Ys(o.before,Pn(Ar(d,"beforeLabel",this,i))),Ys(o.lines,Ar(d,"label",this,i)),Ys(o.after,Pn(Ar(d,"afterLabel",this,i))),a.push(o)}),a}getAfterBody(t,r){return Sj(Ar(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:n}=r,a=Ar(n,"beforeFooter",this,t),i=Ar(n,"footer",this,t),o=Ar(n,"afterFooter",this,t);let d=[];return d=Ys(d,Pn(a)),d=Ys(d,Pn(i)),d=Ys(d,Pn(o)),d}_createItems(t){const r=this._active,n=this.chart.data,a=[],i=[],o=[];let d=[],c,h;for(c=0,h=r.length;c<h;++c)d.push(wF(this.chart,r[c]));return t.filter&&(d=d.filter((m,f,p)=>t.filter(m,f,p,n))),t.itemSort&&(d=d.sort((m,f)=>t.itemSort(m,f,n))),tt(d,m=>{const f=Cj(t.callbacks,m);a.push(Ar(f,"labelColor",this,m)),i.push(Ar(f,"labelPointStyle",this,m)),o.push(Ar(f,"labelTextColor",this,m))}),this.labelColors=a,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=d,d}update(t,r){const n=this.options.setContext(this.getContext()),a=this._active;let i,o=[];if(!a.length)this.opacity!==0&&(i={opacity:0});else{const d=Ll[n.position].call(this,a,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=jj(this,n),h=Object.assign({},d,c),m=Nj(this.chart,n,h),f=_j(n,h,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:f.x,y:f.y,width:c.width,height:c.height,caretX:d.x,caretY:d.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,n,a){const i=this.getCaretPosition(t,n,a);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(t,r,n){const{xAlign:a,yAlign:i}=this,{caretSize:o,cornerRadius:d}=n,{topLeft:c,topRight:h,bottomLeft:m,bottomRight:f}=bo(d),{x:p,y:w}=t,{width:x,height:k}=r;let y,b,j,N,C,P;return i==="center"?(C=w+k/2,a==="left"?(y=p,b=y-o,N=C+o,P=C-o):(y=p+x,b=y+o,N=C-o,P=C+o),j=y):(a==="left"?b=p+Math.max(c,m)+o:a==="right"?b=p+x-Math.max(h,f)-o:b=this.caretX,i==="top"?(N=w,C=N-o,y=b-o,j=b+o):(N=w+k,C=N+o,y=b+o,j=b-o),P=N),{x1:y,x2:b,x3:j,y1:N,y2:C,y3:P}}drawTitle(t,r,n){const a=this.title,i=a.length;let o,d,c;if(i){const h=vo(n.rtl,this.x,this.width);for(t.x=hu(this,n.titleAlign,n),r.textAlign=h.textAlign(n.titleAlign),r.textBaseline="middle",o=xr(n.titleFont),d=n.titleSpacing,r.fillStyle=n.titleColor,r.font=o.string,c=0;c<i;++c)r.fillText(a[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+d,c+1===i&&(t.y+=n.titleMarginBottom-d)}}_drawColorBox(t,r,n,a,i){const o=this.labelColors[n],d=this.labelPointStyles[n],{boxHeight:c,boxWidth:h}=i,m=xr(i.bodyFont),f=hu(this,"left",i),p=a.x(f),w=c<m.lineHeight?(m.lineHeight-c)/2:0,x=r.y+w;if(i.usePointStyle){const k={radius:Math.min(h,c)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},y=a.leftForLtr(p,h)+h/2,b=x+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Wp(t,k,y,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Wp(t,k,y,b)}else{t.lineWidth=Ye(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const k=a.leftForLtr(p,h),y=a.leftForLtr(a.xPlus(p,1),h-2),b=bo(o.borderRadius);Object.values(b).some(j=>j!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,im(t,{x:k,y:x,w:h,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),im(t,{x:y,y:x+1,w:h-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(k,x,h,c),t.strokeRect(k,x,h,c),t.fillStyle=o.backgroundColor,t.fillRect(y,x+1,h-2,c-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,r,n){const{body:a}=this,{bodySpacing:i,bodyAlign:o,displayColors:d,boxHeight:c,boxWidth:h,boxPadding:m}=n,f=xr(n.bodyFont);let p=f.lineHeight,w=0;const x=vo(n.rtl,this.x,this.width),k=function(O){r.fillText(O,x.x(t.x+w),t.y+p/2),t.y+=p+i},y=x.textAlign(o);let b,j,N,C,P,E,T;for(r.textAlign=o,r.textBaseline="middle",r.font=f.string,t.x=hu(this,y,n),r.fillStyle=n.bodyColor,tt(this.beforeBody,k),w=d&&y!=="right"?o==="center"?h/2+m:h+2+m:0,C=0,E=a.length;C<E;++C){for(b=a[C],j=this.labelTextColors[C],r.fillStyle=j,tt(b.before,k),N=b.lines,d&&N.length&&(this._drawColorBox(r,t,C,x,n),p=Math.max(f.lineHeight,c)),P=0,T=N.length;P<T;++P)k(N[P]),p=f.lineHeight;tt(b.after,k)}w=0,p=f.lineHeight,tt(this.afterBody,k),t.y-=i}drawFooter(t,r,n){const a=this.footer,i=a.length;let o,d;if(i){const c=vo(n.rtl,this.x,this.width);for(t.x=hu(this,n.footerAlign,n),t.y+=n.footerMarginTop,r.textAlign=c.textAlign(n.footerAlign),r.textBaseline="middle",o=xr(n.footerFont),r.fillStyle=n.footerColor,r.font=o.string,d=0;d<i;++d)r.fillText(a[d],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,r,n,a){const{xAlign:i,yAlign:o}=this,{x:d,y:c}=t,{width:h,height:m}=n,{topLeft:f,topRight:p,bottomLeft:w,bottomRight:x}=bo(a.cornerRadius);r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,r.lineWidth=a.borderWidth,r.beginPath(),r.moveTo(d+f,c),o==="top"&&this.drawCaret(t,r,n,a),r.lineTo(d+h-p,c),r.quadraticCurveTo(d+h,c,d+h,c+p),o==="center"&&i==="right"&&this.drawCaret(t,r,n,a),r.lineTo(d+h,c+m-x),r.quadraticCurveTo(d+h,c+m,d+h-x,c+m),o==="bottom"&&this.drawCaret(t,r,n,a),r.lineTo(d+w,c+m),r.quadraticCurveTo(d,c+m,d,c+m-w),o==="center"&&i==="left"&&this.drawCaret(t,r,n,a),r.lineTo(d,c+f),r.quadraticCurveTo(d,c,d+f,c),r.closePath(),r.fill(),a.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,n=this.$animations,a=n&&n.x,i=n&&n.y;if(a||i){const o=Ll[t.position].call(this,this._active,this._eventPosition);if(!o)return;const d=this._size=jj(this,t),c=Object.assign({},o,this._size),h=Nj(r,t,c),m=_j(t,c,h,r);(a._to!==m.x||i._to!==m.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=d.width,this.height=d.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const a={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Ns(r.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&d&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,a,r),HS(t,r.textDirection),i.y+=o.top,this.drawTitle(i,t,r),this.drawBody(i,t,r),this.drawFooter(i,t,r),WS(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const n=this._active,a=t.map(({datasetIndex:d,index:c})=>{const h=this.chart.getDatasetMeta(d);if(!h)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:h.data[c],index:c}}),i=!sm(n,a),o=this._positionChanged(a,r);(i||o)&&(this._active=a,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,i=this._active||[],o=this._getActiveElements(t,i,r,n),d=this._positionChanged(o,t),c=r||!sm(o,i)||d;return c&&(this._active=o,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),c}_getActiveElements(t,r,n,a){const i=this.options;if(t.type==="mouseout")return[];if(!a)return r.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,r){const{caretX:n,caretY:a,options:i}=this,o=Ll[i.position].call(this,t,r);return o!==!1&&(n!==o.x||a!==o.y)}}Ce(Gp,"positioners",Ll);var m4={id:"tooltip",_element:Gp,positioners:Ll,afterInit(e,t,r){r&&(e.tooltip=new Gp({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:h4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const PF=(e,t,r,n)=>(typeof t=="string"?(r=e.push(t)-1,n.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function EF(e,t,r,n){const a=e.indexOf(t);if(a===-1)return PF(e,t,r,n);const i=e.lastIndexOf(t);return a!==i?r:a}const IF=(e,t)=>e===null?null:pr(Math.round(e),0,t);function Pj(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class cm extends qo{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:a,label:i}of r)n[a]===i&&n.splice(a,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(et(t))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===t?r:EF(n,t,$e(r,t),this._addedLabels),IF(r,n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(n=0),r||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const t=this.min,r=this.max,n=this.options.offset,a=[];let i=this.getLabels();i=t===0&&r===i.length-1?i:i.slice(t,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=t;o<=r;o++)a.push({value:o});return a}getLabelForValue(t){return Pj.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Ce(cm,"id","category"),Ce(cm,"defaults",{ticks:{callback:Pj}});function TF(e,t){const r=[],{bounds:a,step:i,min:o,max:d,precision:c,count:h,maxTicks:m,maxDigits:f,includeBounds:p}=e,w=i||1,x=m-1,{min:k,max:y}=t,b=!et(o),j=!et(d),N=!et(h),C=(y-k)/(f+1);let P=Ik((y-k)/x/w)*w,E,T,O,I;if(P<1e-14&&!b&&!j)return[{value:k},{value:y}];I=Math.ceil(y/P)-Math.floor(k/P),I>x&&(P=Ik(I*P/x/w)*w),et(c)||(E=Math.pow(10,c),P=Math.ceil(P*E)/E),a==="ticks"?(T=Math.floor(k/P)*P,O=Math.ceil(y/P)*P):(T=k,O=y),b&&j&&i&&tR((d-o)/i,P/1e3)?(I=Math.round(Math.min((d-o)/P,m)),P=(d-o)/I,T=o,O=d):N?(T=b?o:T,O=j?d:O,I=h-1,P=(O-T)/I):(I=(O-T)/P,ad(I,Math.round(I),P/1e3)?I=Math.round(I):I=Math.ceil(I));const W=Math.max(Tk(P),Tk(T));E=Math.pow(10,et(c)?W:c),T=Math.round(T*E)/E,O=Math.round(O*E)/E;let X=0;for(b&&(p&&T!==o?(r.push({value:o}),T<o&&X++,ad(Math.round((T+X*P)*E)/E,o,Ej(o,C,e))&&X++):T<o&&X++);X<I;++X){const B=Math.round((T+X*P)*E)/E;if(j&&B>d)break;r.push({value:B})}return j&&p&&O!==d?r.length&&ad(r[r.length-1].value,d,Ej(d,C,e))?r[r.length-1].value=d:r.push({value:d}):(!j||O===d)&&r.push({value:O}),r}function Ej(e,t,{horizontal:r,minRotation:n}){const a=di(n),i=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class LF extends qo{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return et(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:a,max:i}=this;const o=c=>a=r?a:c,d=c=>i=n?i:c;if(t){const c=un(a),h=un(i);c<0&&h<0?d(0):c>0&&h>0&&o(0)}if(a===i){let c=i===0?1:Math.abs(i*.05);d(i+c),t||o(a-c)}this.min=a,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=t,a;return n?(a=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),r=r||11),r&&(a=Math.min(r,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=TF(a,i);return t.bounds==="ticks"&&rR(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const a=(n-r)/Math.max(t.length-1,1)/2;r-=a,n+=a}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(t){return OS(t,this.chart.options.locale,this.options.ticks.format)}}class um extends LF{determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=js(t)?t:0,this.max=js(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,n=di(this.options.ticks.minRotation),a=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/a))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Ce(um,"id","linear"),Ce(um,"defaults",{ticks:{callback:RS.formatters.numeric}});const pg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dr=Object.keys(pg);function Ij(e,t){return e-t}function Tj(e,t){if(et(t))return null;const r=e._adapter,{parser:n,round:a,isoWeekday:i}=e._parseOpts;let o=t;return typeof n=="function"&&(o=n(o)),js(o)||(o=typeof n=="string"?r.parse(o,n):r.parse(o)),o===null?null:(a&&(o=a==="week"&&(Wd(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,a)),+o)}function Lj(e,t,r,n){const a=Dr.length;for(let i=Dr.indexOf(e);i<a-1;++i){const o=pg[Dr[i]],d=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-t)/(d*o.size))<=n)return Dr[i]}return Dr[a-1]}function MF(e,t,r,n,a){for(let i=Dr.length-1;i>=Dr.indexOf(r);i--){const o=Dr[i];if(pg[o].common&&e._adapter.diff(a,n,o)>=t-1)return o}return Dr[r?Dr.indexOf(r):0]}function AF(e){for(let t=Dr.indexOf(e)+1,r=Dr.length;t<r;++t)if(pg[Dr[t]].common)return Dr[t]}function Mj(e,t,r){if(!r)e[t]=!0;else if(r.length){const{lo:n,hi:a}=Wy(r,t),i=r[n]>=t?r[n]:r[a];e[i]=!0}}function OF(e,t,r,n){const a=e._adapter,i=+a.startOf(t[0].value,n),o=t[t.length-1].value;let d,c;for(d=i;d<=o;d=+a.add(d,1,n))c=r[d],c>=0&&(t[c].major=!0);return t}function Aj(e,t,r){const n=[],a={},i=t.length;let o,d;for(o=0;o<i;++o)d=t[o],a[d]=o,n.push({value:d,major:!1});return i===0||!r?n:OF(e,n,a,r)}class hm extends qo{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const n=t.time||(t.time={}),a=this._adapter=new BD._date(t.adapters.date);a.init(r),nd(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:Tj(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,n=t.time.unit||"day";let{min:a,max:i,minDefined:o,maxDefined:d}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(a=Math.min(a,h.min)),!d&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!o||!d)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),a=js(a)&&!isNaN(a)?a:+r.startOf(Date.now(),n),i=js(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(a,i-1),this.max=Math.max(a+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],n=t[t.length-1]),{min:r,max:n}}buildTicks(){const t=this.options,r=t.time,n=t.ticks,a=n.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const i=this.min,o=this.max,d=oR(a,i,o);return this._unit=r.unit||(n.autoSkip?Lj(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):MF(this,d.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:AF(this._unit),this.initOffsets(a),t.reverse&&d.reverse(),Aj(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,n=0,a,i;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?r=1-a:r=(this.getDecimalForValue(t[1])-a)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?n=i:n=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=pr(r,0,o),n=pr(n,0,o),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const t=this._adapter,r=this.min,n=this.max,a=this.options,i=a.time,o=i.unit||Lj(i.minUnit,r,n,this._getLabelCapacity(r)),d=$e(a.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,h=Wd(c)||c===!0,m={};let f=r,p,w;if(h&&(f=+t.startOf(f,"isoWeek",c)),f=+t.startOf(f,h?"day":o),t.diff(n,r,o)>1e5*d)throw new Error(r+" and "+n+" are too far apart with stepSize of "+d+" "+o);const x=a.ticks.source==="data"&&this.getDataTimestamps();for(p=f,w=0;p<n;p=+t.add(p,d,o),w++)Mj(m,p,x);return(p===n||a.bounds==="ticks"||w===1)&&Mj(m,p,x),Object.keys(m).sort(Ij).map(k=>+k)}getLabelForValue(t){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(t,n.tooltipFormat):r.format(t,n.displayFormats.datetime)}format(t,r){const a=this.options.time.displayFormats,i=this._unit,o=r||a[i];return this._adapter.format(t,o)}_tickFormatFunction(t,r,n,a){const i=this.options,o=i.ticks.callback;if(o)return pt(o,[t,r,n],this);const d=i.time.displayFormats,c=this._unit,h=this._majorUnit,m=c&&d[c],f=h&&d[h],p=n[r],w=h&&f&&p&&p.major;return this._adapter.format(t,a||(w?f:m))}generateTickLabels(t){let r,n,a;for(r=0,n=t.length;r<n;++r)a=t[r],a.label=this._tickFormatFunction(a.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,n=this.ctx.measureText(t).width,a=di(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(a),o=Math.sin(a),d=this._resolveTickFontOptions(0).size;return{w:n*i+d*o,h:n*o+d*i}}_getLabelCapacity(t){const r=this.options.time,n=r.displayFormats,a=n[r.unit]||n.millisecond,i=this._tickFormatFunction(t,0,Aj(this,[t],this._majorUnit),a),o=this._getLabelSize(i),d=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return d>0?d:1}getDataTimestamps(){let t=this._cache.data||[],r,n;if(t.length)return t;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(r=0,n=a.length;r<n;++r)t=t.concat(a[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,n;if(t.length)return t;const a=this.getLabels();for(r=0,n=a.length;r<n;++r)t.push(Tj(this,a[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return LS(t.sort(Ij))}}Ce(hm,"id","time"),Ce(hm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function mu(e,t,r){let n=0,a=e.length-1,i,o,d,c;r?(t>=e[n].pos&&t<=e[a].pos&&({lo:n,hi:a}=ci(e,"pos",t)),{pos:i,time:d}=e[n],{pos:o,time:c}=e[a]):(t>=e[n].time&&t<=e[a].time&&({lo:n,hi:a}=ci(e,"time",t)),{time:i,pos:d}=e[n],{time:o,pos:c}=e[a]);const h=o-i;return h?d+(c-d)*(t-i)/h:d}class Oj extends hm{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=mu(r,this.min),this._tableRange=mu(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:n}=this,a=[],i=[];let o,d,c,h,m;for(o=0,d=t.length;o<d;++o)h=t[o],h>=r&&h<=n&&a.push(h);if(a.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(o=0,d=a.length;o<d;++o)m=a[o+1],c=a[o-1],h=a[o],Math.round((m+c)/2)!==h&&i.push({time:h,pos:o/(d-1)});return i}_generate(){const t=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((a,i)=>a-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?t=this.normalize(r.concat(n)):t=r.length?r:n,t=this._cache.all=t,t}getDecimalForValue(t){return(mu(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,n=this.getDecimalForPixel(t)/r.factor-r.end;return mu(this._table,n*this._tableRange+this._minPos,!0)}}Ce(Oj,"id","timeseries"),Ce(Oj,"defaults",hm.defaults);const g4="label";function Rj(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function RF(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function f4(e,t){e.labels=t}function p4(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g4;const n=[];e.datasets=t.map(a=>{const i=e.datasets.find(o=>o[r]===a[r]);return!i||!a.data||n.includes(i)?{...a}:(n.push(i),Object.assign(i,a),i)})}function DF(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:g4;const r={labels:[],datasets:[]};return f4(r,e.labels),p4(r,e.datasets,t),r}function FF(e,t){const{height:r=150,width:n=300,redraw:a=!1,datasetIdKey:i,type:o,data:d,options:c,plugins:h=[],fallbackContent:m,updateMode:f,...p}=e,w=_.useRef(null),x=_.useRef(null),k=()=>{w.current&&(x.current=new cc(w.current,{type:o,data:DF(d,i),options:c&&{...c},plugins:h}),Rj(t,x.current))},y=()=>{Rj(t,null),x.current&&(x.current.destroy(),x.current=null)};return _.useEffect(()=>{!a&&x.current&&c&&RF(x.current,c)},[a,c]),_.useEffect(()=>{!a&&x.current&&f4(x.current.config.data,d.labels)},[a,d.labels]),_.useEffect(()=>{!a&&x.current&&d.datasets&&p4(x.current.config.data,d.datasets,i)},[a,d.datasets]),_.useEffect(()=>{x.current&&(a?(y(),setTimeout(k)):x.current.update(f))},[a,c,d.labels,d.datasets,f]),_.useEffect(()=>{x.current&&(y(),setTimeout(k))},[o]),_.useEffect(()=>(k(),()=>y()),[]),wt.createElement("canvas",{ref:w,role:"img",height:r,width:n,...p},m)}const zF=_.forwardRef(FF);function x4(e,t){return cc.register(t),_.forwardRef((r,n)=>wt.createElement(zF,{...r,ref:n,type:e}))}const y4=x4("line",dh),BF=x4("bar",lh),cd=ye("analytics/fetchAnalytics",async(e="30d",{rejectWithValue:t})=>{var r,n,a;try{const i=await he.get(`/analytics?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch analytics data")}}),ud=ye("analytics/fetchRevenueTrend",async(e="30d",{rejectWithValue:t})=>{var r,n,a;try{const i=await he.get(`/analytics/revenue-trend?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((a=(n=i.response)==null?void 0:n.data)==null?void 0:a.message)||"Failed to fetch revenue trend data")}}),$F={metrics:{revenue:{current:0,previous:0,growth:0},orders:{current:0,previous:0,growth:0},customers:{current:0,previous:0,growth:0},products:{current:0,previous:0,growth:0}},orderStatusDistribution:[],topProducts:[],revenueTrend:[],timeRange:"30d",period:{current:{start:null,end:null},previous:{start:null,end:null}},isLoading:!1,error:null},UF=Wr({name:"analytics",initialState:$F,reducers:{clearError:e=>{e.error=null},setTimeRange:(e,t)=>{e.timeRange=t.payload}},extraReducers:e=>{e.addCase(cd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(cd.fulfilled,(t,r)=>{t.isLoading=!1,t.metrics=r.payload.metrics,t.orderStatusDistribution=r.payload.orderStatusDistribution,t.topProducts=r.payload.topProducts,t.timeRange=r.payload.timeRange,t.period=r.payload.period}).addCase(cd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ud.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ud.fulfilled,(t,r)=>{t.isLoading=!1,t.revenueTrend=r.payload}).addCase(ud.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),VF=UF.reducer;cc.register(cm,um,ld,ao,dd,u4,m4,d4,no);const HF=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(y=>y.auth),{metrics:n,orderStatusDistribution:a,topProducts:i,revenueTrend:o,isLoading:d}=we(y=>y.analytics),[c,h]=_.useState("30d");_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(cd(c)),t(ud(c)))},[t,r,c]);const m=y=>{h(y),t(cd(y)),t(ud(y))},f=y=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(y),p=y=>y>=0?"text-green-600":"text-red-600",w=y=>y>=0?Ln:Rp,x=({title:y,value:b,growth:j,icon:N,color:C="blue"})=>{const P=w(j),E=p(j);return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:y}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:b}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(P,{className:`h-4 w-4 mr-1 ${E}`}),s.jsxs("span",{className:`text-sm font-medium ${E}`,children:[j>=0?"+":"",j.toFixed(1),"%"]}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminAnalytics.vsPreviousPeriod")})]})]}),s.jsx("div",{className:`p-3 rounded-lg bg-${C}-100 dark:bg-${C}-900/20`,children:s.jsx(N,{className:`h-6 w-6 text-${C}-600 dark:text-${C}-400`})})]})})},k=[{value:"7d",label:e("adminAnalytics.last7Days")},{value:"30d",label:e("adminAnalytics.last30Days")},{value:"90d",label:e("adminAnalytics.last90Days")},{value:"1y",label:e("adminAnalytics.lastYear")}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ne,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:Mo,title:e("adminAnalytics.analyticsDashboard"),description:e("adminAnalytics.businessInsights"),actions:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:c,onChange:y=>m(y.target.value),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:k.map(y=>s.jsx("option",{value:y.value,children:y.label},y.value))}),s.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),e("adminAnalytics.export")]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-10",children:d?s.jsxs("div",{className:"col-span-full flex items-center justify-center py-12",children:[s.jsx(qt,{className:"h-8 w-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]}):s.jsxs(s.Fragment,{children:[s.jsx(x,{title:e("adminAnalytics.totalRevenue"),value:f(n.revenue.current),previous:n.revenue.previous,growth:n.revenue.growth,icon:ig,color:"green"}),s.jsx(x,{title:e("adminAnalytics.totalOrders"),value:n.orders.current.toLocaleString(),previous:n.orders.previous,growth:n.orders.growth,icon:yr,color:"blue"}),s.jsx(x,{title:e("adminAnalytics.totalCustomers"),value:n.customers.current.toLocaleString(),previous:n.customers.previous,growth:n.customers.growth,icon:Ca,color:"purple"}),s.jsx(x,{title:e("adminAnalytics.totalProducts"),value:n.products.current,previous:n.products.previous,growth:n.products.growth,icon:Ue,color:"indigo"})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.revenueTrend")})}),s.jsx("div",{className:"p-6",children:d?s.jsx("div",{className:"h-80 flex items-center justify-center",children:s.jsx(qt,{className:"h-8 w-8 animate-spin text-blue-600"})}):o!=null&&o.dailyRevenue&&o.dailyRevenue.length>0?s.jsx("div",{className:"h-80",children:s.jsx(y4,{data:{labels:o.dailyRevenue.map(y=>new Date(y.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminAnalytics.revenue"),data:o.dailyRevenue.map(y=>parseFloat(y.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:y=>f(y.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:y=>f(y)}}}}})}):s.jsx("div",{className:"h-80 flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Ln,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noRevenueData")})]})})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.orderStatusDistribution")})}),s.jsx("div",{className:"p-6",children:d?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(qt,{className:"h-6 w-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]}):a&&a.length>0?s.jsx("div",{className:"h-80",children:s.jsx(BF,{data:{labels:a.map(y=>({DELIVERED:e("adminAnalytics.delivered"),SHIPPED:e("adminAnalytics.shipped"),PROCESSING:e("adminAnalytics.processing"),PENDING:e("adminAnalytics.pending"),CANCELLED:e("adminAnalytics.cancelled")})[y.status]||y.status),datasets:[{label:e("adminAnalytics.orders"),data:a.map(y=>y.count||0),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(245, 158, 11, 0.8)","rgba(156, 163, 175, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(59, 130, 246)","rgb(245, 158, 11)","rgb(156, 163, 175)","rgb(239, 68, 68)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:y=>`${y.parsed.y} ${e("adminAnalytics.orders").toLowerCase()}`}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})}):s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noData")})})]})]}),s.jsx("div",{className:"mt-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.topPerformingProducts")})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.product")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.category")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.sales")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.revenue")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.growth")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(qt,{className:"h-6 w-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]})})}):i.length>0?i.map((y,b)=>{var j,N,C,P,E;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:((j=y.product)==null?void 0:j.name)||e("adminAnalytics.unknownProduct")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:((C=(N=y.product)==null?void 0:N.category)==null?void 0:C.name)||e("adminAnalytics.unknownCategory")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((P=y._sum)==null?void 0:P.quantity)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:f(((E=y._sum)==null?void 0:E.price)||0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:e("adminAnalytics.topPerformer")})})]},y.productId||b)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noProducts")})})})]})})})]})})]})})]})})},WF=()=>{const{t:e}=pe(),{user:t}=we(P=>P.auth),[r,n]=_.useState([]),[a,i]=_.useState(!0),[o,d]=_.useState(""),[c,h]=_.useState(""),[m,f]=_.useState(null),[p,w]=_.useState({page:1,limit:20,total:0,pages:0}),x=async(P=1,E="",T="")=>{var O,I,W;try{i(!0);const X=new URLSearchParams({page:P.toString(),limit:"20"});E&&X.append("search",E),T&&X.append("status",T);const B=await he.get("/customers?${params","toString()}");console.log("Customers API response:",B),console.log("Response data:",B.data),console.log("Customers array:",((O=B.data)==null?void 0:O.customers)||B.customers),n(((I=B.data)==null?void 0:I.customers)||B.customers||[]),w(((W=B.data)==null?void 0:W.pagination)||B.pagination||{page:1,limit:20,total:0,pages:0})}catch(X){console.error("Error fetching customers:",X),n([]),w({page:1,limit:20,total:0,pages:0})}finally{i(!1)}};_.useEffect(()=>{(t==null?void 0:t.role)==="ADMIN"&&x()},[t]),_.useEffect(()=>{if((t==null?void 0:t.role)==="ADMIN"){const P=setTimeout(()=>{x(1,o,c)},300);return()=>clearTimeout(P)}},[o,c,t]);const k=P=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(P),y=P=>new Date(P).toLocaleDateString("is-IS"),b=P=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",vip:"bg-purple-100 text-purple-800",new:"bg-blue-100 text-blue-800"})[P]||"bg-gray-100 text-gray-800",j=P=>{const E=`adminCustomers.status${P.charAt(0).toUpperCase()}${P.slice(1)}`;return e(E)},N=P=>{d(P.target.value)},C=P=>{h(P.target.value)};return(t==null?void 0:t.role)!=="ADMIN"?s.jsxs(Ne,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):s.jsxs(Ne,{children:[s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:Ca,title:e("adminCustomers.customerManagement"),description:e("adminCustomers.manageCustomerInfo"),actions:s.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),e("adminCustomers.export")]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminCustomers.searchCustomers"),value:o,onChange:N,className:"input pl-10 pr-3"})]}),s.jsxs("select",{value:c,onChange:C,className:"input",children:[s.jsx("option",{value:"",children:e("adminCustomers.allStatus")}),s.jsx("option",{value:"active",children:e("adminCustomers.active")}),s.jsx("option",{value:"inactive",children:e("adminCustomers.inactive")}),s.jsx("option",{value:"vip",children:e("adminCustomers.vip")}),s.jsx("option",{value:"new",children:e("adminCustomers.new")})]}),s.jsxs("div",{className:"flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-md px-4 py-2",children:[s.jsx(Ca,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("adminCustomers.customersCount",{filtered:r.length,total:p.total})})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminCustomers.customerList")})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.customer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.contact")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.orders")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.totalSpent")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.status")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.lastOrder")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(qt,{className:"h-6 w-6 animate-spin text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-500",children:e("common.loading")})]})})}):r.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:P.name.split(" ").map(E=>E[0]).join("")})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:P.name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("adminCustomers.idLabel")," ",P.id]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Yr,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),P.email]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(Ni,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),P.phone]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:P.totalOrders}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:k(P.totalSpent)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(P.status)}`,children:j(P.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:y(P.lastOrder)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>f(P),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3 transition-colors duration-200",children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(M_,{className:"h-4 w-4"})})]})]},P.id))})]})})]}),!a&&r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ca,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminCustomers.noCustomersFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminCustomers.adjustSearchCriteria")})]})]})})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e("adminCustomers.customerDetails")}),s.jsxs("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-gray-600",children:[s.jsx("span",{className:"sr-only",children:e("adminCustomers.close")}),s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-medium text-gray-700",children:m.name.split(" ").map(P=>P[0]).join("")})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:m.name}),s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.customerSince",{date:y(m.joinDate)})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.contactInformation")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Yr,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.email})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ni,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.phone})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(fn,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.address})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.orderStatistics")}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.totalOrders")}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalOrders})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.totalSpent")}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k(m.totalSpent)})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.status")}),s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${b(m.status)}`,children:j(m.status)})]})]})]})})]})},hd=ye("reports/fetchReports",async({reportType:e,timeRange:t,startDate:r,endDate:n},{rejectWithValue:a})=>{var i,o,d,c,h,m;try{const f=new URLSearchParams({timeRange:t,...r&&{startDate:r},...n&&{endDate:n}});let p;switch(e){case"sales":return p=await he.get(`/reports/sales?${f}`),{sales:((i=p.data)==null?void 0:i.data)||p.data};case"products":return p=await he.get(`/reports/inventory?${f}`),{products:((o=p.data)==null?void 0:o.data)||p.data};case"customers":return p=await he.get(`/reports/customers?${f}`),{customers:((d=p.data)==null?void 0:d.data)||p.data};case"orders":return p=await he.get(`/analytics?timeRange=${t}`),{orders:((c=p.data)==null?void 0:c.data)||p.data};default:return{}}}catch(f){return a(((m=(h=f.response)==null?void 0:h.data)==null?void 0:m.message)||"Failed to fetch reports data")}}),s0=ye("reports/fetchSalesReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await he.get(`/reports/sales?${d}`);return((a=c.data)==null?void 0:a.data)||c.data}catch(d){return n(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch sales report")}}),n0=ye("reports/fetchProductsReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await he.get(`/reports/products?${d}`);return((a=c.data)==null?void 0:a.data)||c.data}catch(d){return n(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch products report")}}),a0=ye("reports/fetchCustomersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await he.get(`/reports/customers?${d}`);return((a=c.data)==null?void 0:a.data)||c.data}catch(d){return n(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch customers report")}}),i0=ye("reports/fetchOrdersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:n})=>{var a,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await he.get(`/reports/orders?${d}`);return((a=c.data)==null?void 0:a.data)||c.data}catch(d){return n(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch orders report")}}),qF={sales:{totalRevenue:0,totalOrders:0,averageOrderValue:0,growthRate:0,dailySales:[]},products:{totalProducts:0,activeProducts:0,outOfStock:0,topSelling:[],categoryBreakdown:[]},customers:{totalCustomers:0,newCustomers:0,returningCustomers:0,averageOrderFrequency:0,customerSegments:[],topCustomers:[]},orders:{totalOrders:0,completedOrders:0,pendingOrders:0,cancelledOrders:0,averageProcessingTime:0,deliveryMethods:[],orderStatusTrend:[]},currentReport:"sales",timeRange:"last30days",dateRange:{start:null,end:null},isLoading:!1,error:null},b4=Wr({name:"reports",initialState:qF,reducers:{clearError:e=>{e.error=null},setCurrentReport:(e,t)=>{e.currentReport=t.payload},setTimeRange:(e,t)=>{e.timeRange=t.payload},setDateRange:(e,t)=>{e.dateRange=t.payload}},extraReducers:e=>{e.addCase(hd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(hd.fulfilled,(t,r)=>{t.isLoading=!1;const{sales:n,products:a,customers:i,orders:o}=r.payload;n&&(t.sales=n),a&&(t.products=a),i&&(t.customers=i),o&&(t.orders=o)}).addCase(hd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(s0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(s0.fulfilled,(t,r)=>{t.isLoading=!1,t.sales=r.payload}).addCase(s0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(n0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(n0.fulfilled,(t,r)=>{t.isLoading=!1,t.products=r.payload}).addCase(n0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(a0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(a0.fulfilled,(t,r)=>{t.isLoading=!1,t.customers=r.payload}).addCase(a0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(i0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(i0.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload}).addCase(i0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setCurrentReport:KF,setTimeRange:ZF,setDateRange:Dj}=b4.actions,GF=b4.reducer;cc.register(cm,um,ld,ao,dd,u4,m4,d4,no);const YF=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(E=>E.auth),{sales:n,products:a,customers:i,orders:o,currentReport:d,timeRange:c,dateRange:h,isLoading:m}=we(E=>E.reports);_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(hd({reportType:d,timeRange:c,startDate:h.start,endDate:h.end}))},[t,r,d,c,h]);const f=E=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(E),p=E=>new Date(E).toLocaleDateString("is-IS"),w=E=>E>=0?s.jsx(Ln,{className:"h-4 w-4 text-green-500"}):s.jsx(Rp,{className:"h-4 w-4 text-red-500"}),x=E=>E>=0?"text-green-600":"text-red-600",k=E=>{console.log(`Exporting ${d} report as ${E}`);const T={sales:n,products:a,customers:i,orders:o}[d],O=JSON.stringify(T,null,2),I="data:application/json;charset=utf-8,"+encodeURIComponent(O),W=`${d}_report_${new Date().toISOString().split("T")[0]}.${E}`,X=document.createElement("a");X.setAttribute("href",I),X.setAttribute("download",W),X.click()},y=({title:E,value:T,subtitle:O,icon:I,growth:W,color:X="blue"})=>s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:E}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:T}),O&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:O}),W!==void 0&&s.jsxs("div",{className:"flex items-center mt-2",children:[w(W),s.jsxs("span",{className:`text-sm font-medium ml-1 ${x(W)}`,children:[W>=0?"+":"",W,"%"]}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminReports.vsPreviousPeriod")})]})]}),s.jsx("div",{className:`p-3 rounded-lg bg-${X}-100 dark:bg-${X}-900/20`,children:s.jsx(I,{className:`h-6 w-6 text-${X}-600 dark:text-${X}-400`})})]})}),b=({title:E,children:T,actions:O})=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:E}),O&&s.jsx("div",{className:"flex items-center space-x-2",children:O})]})}),s.jsx("div",{className:"p-8",children:T})]}),j=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(y,{title:e("adminReports.totalRevenue"),value:f(n.totalRevenue||0),icon:ig,growth:n.growthRate,color:"green"}),s.jsx(y,{title:e("adminReports.totalOrders"),value:(n.totalOrders||0).toLocaleString(),icon:yr,growth:8.3,color:"blue"}),s.jsx(y,{title:e("adminReports.averageOrderValue"),value:f(n.averageOrderValue||0),icon:Ln,growth:5.2,color:"purple"}),s.jsx(y,{title:e("adminReports.growthRate"),value:`${n.growthRate||0}%`,icon:Mo,growth:n.growthRate,color:"indigo"})]}),s.jsx(b,{title:e("adminReports.dailySalesTrend"),actions:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:s.jsx(Ut,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:s.jsx(gn,{className:"h-4 w-4"})})]}),children:n.dailySales&&n.dailySales.length>0?s.jsx("div",{className:"h-80",children:s.jsx(y4,{data:{labels:n.dailySales.map(E=>new Date(E.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminReports.revenue"),data:n.dailySales.map(E=>parseFloat(E.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:E=>f(E.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:E=>f(E)}}}}})}):s.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:e("adminReports.noData")})})]}),N=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(y,{title:e("adminReports.totalProducts"),value:a.totalProducts,icon:Ue,growth:15.2,color:"blue"}),s.jsx(y,{title:e("adminReports.activeProducts"),value:a.activeProducts,subtitle:`${Math.round(a.activeProducts/a.totalProducts*100)}% ${e("adminReports.ofTotal")}`,icon:yt,color:"green"}),s.jsx(y,{title:e("adminReports.outOfStock"),value:a.outOfStock,subtitle:`${Math.round(a.outOfStock/a.totalProducts*100)}% ${e("adminReports.ofTotal")}`,icon:gt,color:"red"})]}),s.jsx(b,{title:e("adminReports.topSellingProducts"),children:s.jsx("div",{className:"space-y-4",children:a.topSelling.length>0?a.topSelling.map((E,T)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:T+1})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[E.sales," sales"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:f(E.revenue)}),s.jsxs("div",{className:"flex items-center",children:[w(E.growth),s.jsxs("span",{className:`text-xs ml-1 ${x(E.growth)}`,children:["+",E.growth,"%"]})]})]})]},E.name)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(b,{title:e("adminReports.revenueByCategory"),children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.categoryBreakdown.length>0?a.categoryBreakdown.map(E=>s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:E.category}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:E.count}),s.jsx("p",{className:"text-xs text-gray-500",children:e("adminReports.products")}),s.jsx("p",{className:"text-sm font-medium text-blue-600 mt-1",children:f(E.revenue)})]},E.category)):s.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]}),C=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(y,{title:e("adminReports.totalCustomers"),value:i.totalCustomers,icon:Ca,growth:6.7,color:"blue"}),s.jsx(y,{title:e("adminReports.newCustomers"),value:i.newCustomers,subtitle:e("adminReports.thisPeriod"),icon:Ln,growth:12.3,color:"green"}),s.jsx(y,{title:e("adminReports.avgOrderFrequency"),value:i.averageOrderFrequency,subtitle:e("adminReports.ordersPerCustomer"),icon:yr,growth:-2.1,color:"purple"})]}),s.jsx(b,{title:e("adminReports.customerSegmentation"),children:s.jsx("div",{className:"space-y-4",children:i.customerSegments.length>0?i.customerSegments.map(E=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:E.segment})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${E.percentage}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 w-12",children:E.count}),s.jsxs("span",{className:"text-sm text-gray-500 w-12",children:[E.percentage,"%"]})]})]},E.segment)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(b,{title:e("adminReports.topCustomersByRevenue"),children:s.jsx("div",{className:"space-y-4",children:i.topCustomers.length>0?i.topCustomers.map((E,T)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-green-600",children:T+1})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[E.orders," ",e("adminReports.orders")]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:f(E.totalSpent)}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e("adminReports.last"),": ",p(E.lastOrder)]})]})]},E.name)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]}),P=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(y,{title:e("adminReports.totalOrders"),value:o.totalOrders,icon:yr,growth:8.3,color:"blue"}),s.jsx(y,{title:e("adminReports.completedOrders"),value:o.completedOrders,subtitle:`${Math.round(o.completedOrders/o.totalOrders*100)}% ${e("adminReports.completionRate")}`,icon:yt,growth:12.1,color:"green"}),s.jsx(y,{title:e("adminReports.pendingOrders"),value:o.pendingOrders,icon:Wt,growth:-15.2,color:"yellow"}),s.jsx(y,{title:e("adminReports.avgProcessingTime"),value:`${o.averageProcessingTime} ${e("adminReports.days")}`,icon:Ln,growth:-5.3,color:"purple"})]}),s.jsx(b,{title:e("adminReports.orderDistributionByDeliveryMethod"),children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.deliveryMethods.length>0?o.deliveryMethods.map(E=>s.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:E.method==="HOME_DELIVERY"?e("adminPage.homeDelivery"):e("ordersPage.pickup")}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:E.count}),s.jsxs("p",{className:"text-sm text-gray-500",children:[E.percentage,"% ",e("adminReports.ofTotalOrders")]})]},E.method)):s.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(b,{title:e("adminReports.orderStatusDistribution"),children:s.jsx("div",{className:"space-y-4",children:o.orderStatusTrend.length>0?o.orderStatusTrend.map(E=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-4 h-4 rounded-full mr-3 ${E.status==="delivered"?"bg-green-500":E.status==="shipped"?"bg-blue-500":E.status==="confirmed"?"bg-yellow-500":E.status==="pending"?"bg-orange-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:E.status})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:s.jsx("div",{className:`h-2 rounded-full ${E.status==="delivered"?"bg-green-500":E.status==="shipped"?"bg-blue-500":E.status==="confirmed"?"bg-yellow-500":E.status==="pending"?"bg-orange-500":"bg-red-500"}`,style:{width:`${E.count/o.totalOrders*100}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 w-12",children:E.count}),s.jsx("div",{className:"flex items-center ml-2",children:E.trend==="up"?s.jsx(Ln,{className:"h-4 w-4 text-green-500"}):E.trend==="down"?s.jsx(Rp,{className:"h-4 w-4 text-red-500"}):s.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})})]})]},E.status)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]});return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):m?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:Mp,title:e("adminSidebar.reportsAnalytics"),description:e("adminSidebar.comprehensiveInsights"),actions:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>k("pdf"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Mp,{className:"h-4 w-4 mr-2"}),e("adminReports.exportPDF")]}),s.jsxs("button",{onClick:()=>k("csv"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(gn,{className:"h-4 w-4 mr-2"}),e("adminReports.exportCSV")]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.reportType")}),s.jsxs("select",{value:d,onChange:E=>t(KF(E.target.value)),className:"input w-full",children:[s.jsx("option",{value:"sales",children:e("adminReports.salesReport")}),s.jsx("option",{value:"products",children:e("adminReports.productsReport")}),s.jsx("option",{value:"customers",children:e("adminReports.customersReport")}),s.jsx("option",{value:"orders",children:e("adminReports.ordersReport")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.timePeriod")}),s.jsxs("select",{value:c,onChange:E=>t(ZF(E.target.value)),className:"input w-full",children:[s.jsx("option",{value:"last7days",children:e("adminReports.last7Days")}),s.jsx("option",{value:"last30days",children:e("adminReports.last30Days")}),s.jsx("option",{value:"last90days",children:e("adminReports.last90Days")}),s.jsx("option",{value:"lastyear",children:e("adminReports.lastYear")}),s.jsx("option",{value:"custom",children:e("adminReports.customRange")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.startDate")}),s.jsx("input",{type:"date",value:h.start||"",onChange:E=>t(Dj({...h,start:E.target.value})),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.endDate")}),s.jsx("input",{type:"date",value:h.end||"",onChange:E=>t(Dj({...h,end:E.target.value})),className:"input w-full"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("button",{onClick:()=>{t(hd({reportType:d,timeRange:c,startDate:h.start,endDate:h.end}))},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),e("adminReports.refreshData")]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(Dn,{className:"h-4 w-4"}),s.jsxs("span",{children:["Last updated: ",new Date().toLocaleString("is-IS")]})]})]})]}),s.jsxs("div",{className:"space-y-8",children:[d==="sales"&&s.jsx(j,{}),d==="products"&&s.jsx(N,{}),d==="customers"&&s.jsx(C,{}),d==="orders"&&s.jsx(P,{})]})]})})]})})},JF=()=>{const{t:e}=pe(),{user:t}=we(F=>F.auth),[r,n]=_.useState(!0),[a,i]=_.useState([]),[o,d]=_.useState([]),[c,h]=_.useState(""),[m,f]=_.useState(""),[p,w]=_.useState(""),[x,k]=_.useState([]),[y,b]=_.useState(!1),[j,N]=_.useState({email:!0,push:!0,sms:!1,orderUpdates:!0,systemAlerts:!0,marketing:!1,securityAlerts:!0}),C=_.useMemo(()=>[{id:1,type:"order",priority:"high",title:"New Order Received",message:"Order #1234 has been placed by Jn Jnsson for ISK 4,500",timestamp:"2025-01-13T14:30:00Z",isRead:!1,isArchived:!1,actions:["view","process","archive"],metadata:{orderId:1234,customerName:"Jn Jnsson",amount:4500}},{id:2,type:"system",priority:"medium",title:"Low Stock Alert",message:"Vnflaska - Rauvn is running low (5 items remaining)",timestamp:"2025-01-13T13:15:00Z",isRead:!0,isArchived:!1,actions:["view","restock","archive"],metadata:{productId:1,productName:"Vnflaska - Rauvn",stockLevel:5}},{id:3,type:"payment",priority:"high",title:"Payment Failed",message:"Payment for Order #1231 failed. Customer needs to update payment method.",timestamp:"2025-01-13T12:45:00Z",isRead:!1,isArchived:!1,actions:["view","contact","archive"],metadata:{orderId:1231,customerName:"Anna Ptursdttir",paymentMethod:"Credit Card"}},{id:4,type:"delivery",priority:"medium",title:"Delivery Completed",message:"Order #1228 has been successfully delivered to Magns Gumundsson",timestamp:"2025-01-13T11:20:00Z",isRead:!0,isArchived:!1,actions:["view","archive"],metadata:{orderId:1228,customerName:"Magns Gumundsson",deliveryTime:"11:20"}},{id:5,type:"security",priority:"high",title:"Suspicious Login Attempt",message:"Multiple failed login attempts detected for admin account",timestamp:"2025-01-13T10:30:00Z",isRead:!1,isArchived:!1,actions:["view","investigate","archive"],metadata:{ipAddress:"192.168.1.100",attempts:5,account:"admin"}},{id:6,type:"marketing",priority:"low",title:"New Customer Registration",message:"Sigrn lafsdttir has registered for a new account",timestamp:"2025-01-13T09:15:00Z",isRead:!0,isArchived:!0,actions:["view","archive"],metadata:{customerId:456,customerName:"Sigrn lafsdttir",registrationDate:"2025-01-13"}},{id:7,type:"system",priority:"medium",title:"Server Maintenance Scheduled",message:"Scheduled maintenance will occur tonight from 2:00 AM to 4:00 AM",timestamp:"2025-01-13T08:00:00Z",isRead:!0,isArchived:!1,actions:["view","archive"],metadata:{startTime:"2025-01-14T02:00:00Z",endTime:"2025-01-14T04:00:00Z",type:"scheduled"}},{id:8,type:"order",priority:"medium",title:"Order Cancelled",message:"Order #1225 has been cancelled by Einar Bjrnsson",timestamp:"2025-01-12T16:45:00Z",isRead:!0,isArchived:!1,actions:["view","refund","archive"],metadata:{orderId:1225,customerName:"Einar Bjrnsson",reason:"Customer requested"}}],[]);_.useEffect(()=>{n(!0),setTimeout(()=>{i(C),d(C),n(!1)},1e3)},[C]),_.useEffect(()=>{let F=a;c&&(F=F.filter(R=>R.title.toLowerCase().includes(c.toLowerCase())||R.message.toLowerCase().includes(c.toLowerCase()))),m&&(m==="unread"?F=F.filter(R=>!R.isRead):m==="read"?F=F.filter(R=>R.isRead):m==="archived"&&(F=F.filter(R=>R.isArchived))),p&&(F=F.filter(R=>R.type===p)),d(F)},[a,c,m,p]);const P=(F,R)=>{const q=`h-5 w-5 ${R==="high"?"text-red-500":R==="medium"?"text-yellow-500":"text-blue-500"}`;switch(F){case"order":return s.jsx(yr,{className:q});case"payment":return s.jsx(mn,{className:q});case"delivery":return s.jsx(Ue,{className:q});case"system":return s.jsx(es,{className:q});case"security":return s.jsx(Rn,{className:q});case"marketing":return s.jsx(Yr,{className:q});default:return s.jsx(Vi,{className:q})}},E=F=>{switch(F){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},T=F=>{const R=new Date(F),J=Math.floor((new Date-R)/(1e3*60));return J<1?"Just now":J<60?`${J}m ago`:J<1440?`${Math.floor(J/60)}h ago`:R.toLocaleDateString("is-IS")},O=F=>{i(R=>R.map(q=>q.id===F?{...q,isRead:!0}:q)),K.success(e("adminNotifications.notificationMarkedRead"))},I=F=>{i(R=>R.map(q=>q.id===F?{...q,isRead:!1}:q)),K.success(e("adminNotifications.notificationMarkedUnread"))},W=F=>{i(R=>R.map(q=>q.id===F?{...q,isArchived:!0}:q)),K.success(e("adminNotifications.notificationArchived"))},X=F=>{i(R=>R.map(q=>q.id===F?{...q,isArchived:!1}:q)),K.success(e("adminNotifications.notificationUnarchived"))},B=F=>{i(R=>R.filter(q=>q.id!==F)),K.success(e("adminNotifications.notificationDeleted"))},D=F=>{if(x.length===0){K.error(e("adminNotifications.selectNotificationsFirst"));return}switch(F){case"mark-read":i(R=>R.map(q=>x.includes(q.id)?{...q,isRead:!0}:q)),K.success(e("adminNotifications.bulkMarkedRead",{count:x.length}));break;case"mark-unread":i(R=>R.map(q=>x.includes(q.id)?{...q,isRead:!1}:q)),K.success(e("adminNotifications.bulkMarkedUnread",{count:x.length}));break;case"archive":i(R=>R.map(q=>x.includes(q.id)?{...q,isArchived:!0}:q)),K.success(e("adminNotifications.bulkArchived",{count:x.length}));break;case"delete":i(R=>R.filter(q=>!x.includes(q.id))),K.success(e("adminNotifications.bulkDeleted",{count:x.length}));break}k([])},U=()=>{x.length===o.length?k([]):k(o.map(F=>F.id))},Z=a.filter(F=>!F.isRead&&!F.isArchived).length,G=a.filter(F=>F.isArchived).length;return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsxs(Ne,{children:[s.jsx(Tr,{icon:Vi,title:e("adminNotifications.title"),description:`${e("adminNotifications.unreadCount",{count:Z})}  ${e("adminNotifications.archivedCount",{count:G})}  ${e("adminNotifications.totalCount",{count:a.length})}`,actions:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(es,{className:"h-4 w-4 mr-2"}),e("adminNotifications.settings")]}),s.jsxs("button",{onClick:()=>D("mark-read"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(yt,{className:"h-4 w-4 mr-2"}),e("adminNotifications.markAllRead")]})]})}),s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminNotifications.searchNotifications"),value:c,onChange:F=>h(F.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:m,onChange:F=>f(F.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminNotifications.allStatus")}),s.jsx("option",{value:"unread",children:e("adminNotifications.unread")}),s.jsx("option",{value:"read",children:e("adminNotifications.read")}),s.jsx("option",{value:"archived",children:e("adminNotifications.archived")})]}),s.jsxs("select",{value:p,onChange:F=>w(F.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminNotifications.allTypes")}),s.jsx("option",{value:"order",children:e("adminNotifications.orders")}),s.jsx("option",{value:"payment",children:e("adminNotifications.payments")}),s.jsx("option",{value:"delivery",children:e("adminNotifications.delivery")}),s.jsx("option",{value:"system",children:e("adminNotifications.system")}),s.jsx("option",{value:"security",children:e("adminNotifications.security")}),s.jsx("option",{value:"marketing",children:e("adminNotifications.marketing")})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:x.length===o.length&&o.length>0,onChange:U,className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications.selectAll")})]})]}),x.length>0&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 pt-4 border-t border-gray-200",children:[s.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications.selected",{count:x.length})}),s.jsxs("button",{onClick:()=>D("mark-read"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(yt,{className:"h-4 w-4 mr-1"}),e("adminNotifications.markRead")]}),s.jsxs("button",{onClick:()=>D("mark-unread"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(Nr,{className:"h-4 w-4 mr-1"}),e("adminNotifications.markUnread")]}),s.jsxs("button",{onClick:()=>D("archive"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(Af,{className:"h-4 w-4 mr-1"}),e("adminNotifications.archive")]}),s.jsxs("button",{onClick:()=>D("delete"),className:"inline-flex items-center px-3 py-1 border border-red-300 rounded-md text-sm text-red-700 bg-red-50 hover:bg-red-100",children:[s.jsx(ar,{className:"h-4 w-4 mr-1"}),e("adminNotifications.delete")]})]})]}),s.jsx("div",{className:"space-y-4",children:o.map(F=>s.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 border-l-4 ${E(F.priority)} ${F.isRead?"":"ring-2 ring-blue-100 dark:ring-blue-900/20"}`,children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[s.jsx("input",{type:"checkbox",checked:x.includes(F.id),onChange:R=>{R.target.checked?k(q=>[...q,F.id]):k(q=>q.filter(J=>J!==F.id))},className:"mt-1 rounded"}),s.jsx("div",{className:"flex-shrink-0",children:P(F.type,F.priority)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h3",{className:`text-lg font-semibold ${F.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:F.title}),!F.isRead&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F.priority==="high"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400":F.priority==="medium"?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400"}`,children:F.priority}),F.isArchived&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:"Archived"})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:F.message}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Wt,{className:"h-4 w-4 mr-1"}),T(F.timestamp)]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Vi,{className:"h-4 w-4 mr-1"}),F.type]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[F.isRead?s.jsx("button",{onClick:()=>I(F.id),className:"p-2 text-gray-400 hover:text-gray-600",title:e("tooltips.markAsUnread"),children:s.jsx(Nr,{className:"h-4 w-4"})}):s.jsx("button",{onClick:()=>O(F.id),className:"p-2 text-gray-400 hover:text-blue-600",title:e("tooltips.markAsRead"),children:s.jsx(Ut,{className:"h-4 w-4"})}),F.isArchived?s.jsx("button",{onClick:()=>X(F.id),className:"p-2 text-gray-400 hover:text-green-600",title:e("tooltips.unarchive"),children:s.jsx(Af,{className:"h-4 w-4"})}):s.jsx("button",{onClick:()=>W(F.id),className:"p-2 text-gray-400 hover:text-yellow-600",title:e("tooltips.archive"),children:s.jsx(Af,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>B(F.id),className:"p-2 text-gray-400 hover:text-red-600",title:e("tooltips.delete"),children:s.jsx(ar,{className:"h-4 w-4"})})]})]})})},F.id))}),o.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vi,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("notifications.noNotifications")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:c||m||p?"Try adjusting your search criteria or filters.":"You're all caught up! No new notifications."})]})]}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e("notifications.settings")}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(ut,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:e("notifications.deliveryMethods")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.email,onChange:F=>N(R=>({...R,email:F.target.checked})),className:"rounded mr-3"}),s.jsx(Yr,{className:"h-4 w-4 mr-2"}),e("notifications.emailNotifications")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.push,onChange:F=>N(R=>({...R,push:F.target.checked})),className:"rounded mr-3"}),s.jsx(Vi,{className:"h-4 w-4 mr-2"}),e("notifications.pushNotifications")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.sms,onChange:F=>N(R=>({...R,sms:F.target.checked})),className:"rounded mr-3"}),s.jsx(Ni,{className:"h-4 w-4 mr-2"}),e("notifications.smsNotifications")]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:e("notifications.types")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.orderUpdates,onChange:F=>N(R=>({...R,orderUpdates:F.target.checked})),className:"rounded mr-3"}),s.jsx(yr,{className:"h-4 w-4 mr-2"}),e("notifications.orderUpdates")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.systemAlerts,onChange:F=>N(R=>({...R,systemAlerts:F.target.checked})),className:"rounded mr-3"}),s.jsx(es,{className:"h-4 w-4 mr-2"}),e("notifications.systemAlerts")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.marketing,onChange:F=>N(R=>({...R,marketing:F.target.checked})),className:"rounded mr-3"}),s.jsx(Yr,{className:"h-4 w-4 mr-2"}),e("notifications.marketing")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.securityAlerts,onChange:F=>N(R=>({...R,securityAlerts:F.target.checked})),className:"rounded mr-3"}),s.jsx(Rn,{className:"h-4 w-4 mr-2"}),e("notifications.securityAlerts")]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>b(!1),className:"btn btn-outline",children:"Cancel"}),s.jsx("button",{onClick:()=>{K.success("Notification settings saved!"),b(!1)},className:"btn btn-primary",children:"Save Settings"})]})]})})]})},XF=()=>{const{t:e}=pe(),{user:t}=we(n=>n.auth);if((t==null?void 0:t.role)==="ADMIN")return s.jsx(Od,{to:"/admin/settings/general",replace:!0});if((t==null?void 0:t.role)!=="ADMIN")return s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(lt,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})});const r=[{title:e("adminSettings.storeSettings"),description:e("adminSettings.storeSettingsDescription"),icon:es,color:"blue",items:[{name:e("adminSettings.general"),description:e("adminSettings.generalDescription"),href:"/admin/settings/general",icon:es},{name:e("adminSettings.business"),description:e("adminSettings.businessDescription"),href:"/admin/settings/business",icon:AM},{name:e("adminSettings.shipping"),description:e("adminSettings.shippingDescription"),href:"/admin/settings/shipping",icon:Cr},{name:e("adminSettings.vat"),description:e("adminSettings.vatDescription"),href:"/admin/settings/vat",icon:Gh}]},{title:e("adminSettings.integrations"),description:e("adminSettings.integrationsDescription"),icon:Dp,color:"green",items:[{name:e("adminSettings.apiKeys"),description:e("adminSettings.apiKeysDescription"),href:"/admin/settings/api-keys",icon:zd},{name:e("adminSettings.paymentGateways"),description:e("adminSettings.paymentGatewayDescription"),href:"/admin/settings/payment-gateways",icon:mn},{name:e("adminSettings.integrations"),description:e("adminSettings.integrationsDescription"),href:"/admin/settings/integrations",icon:Dp}]}];return s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.settings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSettings.manageSystemSettings")})]}),s.jsx("div",{className:"space-y-8",children:r.map(n=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 bg-${n.color}-100 dark:bg-${n.color}-900/20 rounded-lg flex items-center justify-center`,children:s.jsx(n.icon,{className:`w-4 h-4 text-${n.color}-600 dark:text-${n.color}-400`})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:n.description})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.items.map(a=>s.jsx(je,{to:a.href,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/20 transition-colors",children:s.jsx(a.icon,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:a.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:a.description})]})]})},a.name))})]},n.title))})]})})},md=ye("smtpSettings/fetchSMTPSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get("/smtp-settings")).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch SMTP settings")}}),gd=ye("smtpSettings/updateSMTPSettings",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.put("/smtp-settings",e)).data.settings}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to update SMTP settings")}}),fd=ye("smtpSettings/testSMTPConnection",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.post("/smtp-settings/test",e)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"SMTP test failed")}}),QF={settings:null,isLoading:!1,error:null,testResult:null,isTesting:!1},v4=Wr({name:"smtpSettings",initialState:QF,reducers:{clearError:e=>{e.error=null},clearTestResult:e=>{e.testResult=null},updateSettingsField:(e,t)=>{const{field:r,value:n}=t.payload;e.settings&&(e.settings[r]=n)}},extraReducers:e=>{e.addCase(md.pending,t=>{t.isLoading=!0,t.error=null}).addCase(md.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(md.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(gd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(gd.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(gd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(fd.pending,t=>{t.isTesting=!0,t.error=null,t.testResult=null}).addCase(fd.fulfilled,(t,r)=>{t.isTesting=!1,t.testResult={success:!0,message:r.payload.message,details:r.payload.details},t.error=null}).addCase(fd.rejected,(t,r)=>{t.isTesting=!1,t.testResult={success:!1,message:r.payload},t.error=r.payload})}}),{updateSettingsField:w4}=v4.actions,e9=v4.reducer,t9=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(Q=>Q.auth),{settings:n,testResult:a,isTesting:i}=we(Q=>Q.smtpSettings),[o,d]=_.useState("general"),[c,h]=_.useState(!0),[m,f]=_.useState(!1),[p,w]=_.useState(!1),[x,k]=_.useState({storeName:"lfng",storeDescription:"Icelandic wine and beer shop with home delivery",storeEmail:"info@olfong.is",storePhone:"+354 555 1234",storeAddress:"Laugavegur 123, 101 Reykjavk, Iceland",currency:"ISK",language:"is",dateFormat:"DD/MM/YYYY",timeFormat:"24h"}),[y,b]=_.useState({openingHours:{monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"23:59",closed:!1},sunday:{open:"12:00",close:"23:59",closed:!1}},ageRestriction:{enabled:!0,nicotineAge:18,alcoholNicotineAge:20,generalProducts:0}}),[j,N]=_.useState(!1),[C,P]=_.useState({host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"lfng",fromNameIs:"lfng",isEnabled:!1}),[E,T]=_.useState(!1),[O,I]=_.useState({}),[W,X]=_.useState({}),[B,D]=_.useState({enabled:!0,rate:24,country:"IS",displayInAdmin:!0,includeInCustomerPrice:!0,showVatBreakdown:!1}),[U,Z]=_.useState({});_.useEffect(()=>{G()},[o]);const G=async()=>{var Q,ge,Le,at;h(!0);try{const Je=await fetch("/api/settings?category=GENERAL",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Je.ok){const Xe=await Je.json(),$={};(Q=Xe.data.settings.GENERAL)==null||Q.forEach(Y=>{$[Y.key]=Y.value||""}),k(Y=>({...Y,...$}))}if(o==="apiKeys"){const Xe=await fetch("/api/settings?category=API_KEYS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Xe.ok){const $=await Xe.json(),Y={};(ge=$.data.settings.API_KEYS)==null||ge.forEach(M=>{Y[M.key]=M.value||""}),I(Y)}}if(o==="business"||o==="ageRestrictions"){const Xe=await fetch("/api/settings?category=BUSINESS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Xe.ok){const $=await Xe.json(),Y={};(Le=$.data.settings.BUSINESS)==null||Le.forEach(M=>{M.key==="openingHours"?Y.openingHours=JSON.parse(M.value):M.key==="ageRestrictionEnabled"?Y.ageRestriction={...Y.ageRestriction,enabled:M.value==="true"}:M.key==="nicotineAge"?Y.ageRestriction={...Y.ageRestriction,nicotineAge:parseInt(M.value)}:M.key==="alcoholNicotineAge"?Y.ageRestriction={...Y.ageRestriction,alcoholNicotineAge:parseInt(M.value)}:M.key==="generalProductsAge"&&(Y.ageRestriction={...Y.ageRestriction,generalProducts:parseInt(M.value)})}),b(M=>({...M,...Y}))}}if(o==="smtp"&&t(md()),o==="vat"){const Xe=await fetch("/api/settings?category=VAT",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Xe.ok){const $=await Xe.json(),Y={};(at=$.data.settings.VAT)==null||at.forEach(M=>{M.key==="vatEnabled"?Y.enabled=M.value==="true":M.key==="vatRate"?Y.rate=parseFloat(M.value)||0:M.key==="vatCountry"?Y.country=M.value:M.key==="vatDisplayInAdmin"?Y.displayInAdmin=M.value==="true":M.key==="vatIncludeInCustomerPrice"?Y.includeInCustomerPrice=M.value==="true":M.key==="vatShowBreakdown"&&(Y.showVatBreakdown=M.value==="true")}),D(M=>({...M,...Y}))}}}catch(Je){console.error("Error loading settings:",Je),K.error("Failed to load settings")}finally{h(!1)}},F=()=>{const Q={};return x.storeName.trim()||(Q.storeName="Store name is required"),x.storeEmail.trim()?/\S+@\S+\.\S+/.test(x.storeEmail)||(Q.storeEmail="Please enter a valid email address"):Q.storeEmail="Store email is required",x.storePhone.trim()||(Q.storePhone="Phone number is required"),x.storeAddress.trim()||(Q.storeAddress="Store address is required"),Z(Q),Object.keys(Q).length===0},R=async()=>{if(!F()){K.error("Please fix the validation errors before saving");return}w(!0);try{const Q=[{key:"storeName",value:x.storeName,category:"GENERAL",description:"Store name"},{key:"storeDescription",value:x.storeDescription,category:"GENERAL",description:"Store description"},{key:"storeEmail",value:x.storeEmail,category:"GENERAL",description:"Store email"},{key:"storePhone",value:x.storePhone,category:"GENERAL",description:"Store phone number"},{key:"storeAddress",value:x.storeAddress,category:"GENERAL",description:"Store address"},{key:"currency",value:x.currency,category:"GENERAL",description:"Store currency"},{key:"language",value:x.language,category:"GENERAL",description:"Default language"},{key:"dateFormat",value:x.dateFormat,category:"GENERAL",description:"Date format"},{key:"timeFormat",value:x.timeFormat,category:"GENERAL",description:"Time format"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:Q})})).ok)throw new Error("Failed to save settings");K.success(e("adminSettings.settingsSaved")),f(!1),Z({})}catch(Q){console.error("Error saving settings:",Q),K.error("Failed to save settings")}finally{w(!1)}},q=(Q,ge)=>{k(Le=>({...Le,[Q]:ge})),f(!0),U[Q]&&Z(Le=>({...Le,[Q]:""}))},J=async(Q,ge)=>{w(!0);try{const Le=[{key:Q,value:ge,category:"API_KEYS",description:`${Q} API key`}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:Le})})).ok)throw new Error("Failed to save API key");K.success(e("adminSettings.settingsSaved")),f(!1)}catch(Le){console.error("Error saving API key:",Le),K.error("Failed to save API key")}finally{w(!1)}},re=Q=>{X(ge=>({...ge,[Q]:!ge[Q]}))},V=async()=>{w(!0);try{const Q=[{key:"openingHours",value:JSON.stringify(y.openingHours),category:"BUSINESS",description:"Store opening hours"},{key:"ageRestrictionEnabled",value:y.ageRestriction.enabled.toString(),category:"BUSINESS",description:"Age restriction enabled"},{key:"nicotineAge",value:y.ageRestriction.nicotineAge.toString(),category:"BUSINESS",description:"Minimum age for nicotine products"},{key:"alcoholNicotineAge",value:y.ageRestriction.alcoholNicotineAge.toString(),category:"BUSINESS",description:"Minimum age for alcohol and nicotine products"},{key:"generalProductsAge",value:y.ageRestriction.generalProducts.toString(),category:"BUSINESS",description:"Minimum age for general products"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:Q})})).ok)throw new Error("Failed to save settings");K.success(e("adminSettings.settingsSaved")),f(!1)}catch(Q){console.error("Error saving settings:",Q),K.error("Failed to save settings")}finally{w(!1)}},ae=Q=>{const ge=y.openingHours[Q],Le={};Object.keys(y.openingHours).forEach(at=>{Le[at]={...ge}}),b(at=>({...at,openingHours:Le})),f(!0),N(!1),K.success(e("adminSettings.copiedHoursToAllDays").replace("{day}",xe(Q)))},fe=()=>{const Q={...y.openingHours};["monday","tuesday","wednesday","thursday","friday"].forEach(ge=>{Q[ge]={open:"10:00",close:"22:00",closed:!1}}),b(ge=>({...ge,openingHours:Q})),f(!0),K.success(e("adminSettings.setWeekdayHoursSuccess"))},be=()=>{const Q={...y.openingHours};["saturday","sunday"].forEach(ge=>{Q[ge]={open:"12:00",close:"23:59",closed:!1}}),b(ge=>({...ge,openingHours:Q})),f(!0),K.success(e("adminSettings.setWeekendHoursSuccess"))},z=()=>{const Q={};Object.keys(y.openingHours).forEach(ge=>{Q[ge]={open:"00:00",close:"23:59",closed:!1}}),b(ge=>({...ge,openingHours:Q})),f(!0),K.success(e("adminSettings.set24hSuccess"))},xe=Q=>({monday:e("adminSettings.monday"),tuesday:e("adminSettings.tuesday"),wednesday:e("adminSettings.wednesday"),thursday:e("adminSettings.thursday"),friday:e("adminSettings.friday"),saturday:e("adminSettings.saturday"),sunday:e("adminSettings.sunday")})[Q]||Q,Me=Q=>{if(Q.closed)return null;const ge=parseInt(Q.open.split(":")[0]),Le=parseInt(Q.open.split(":")[1]),at=parseInt(Q.close.split(":")[0]),Je=parseInt(Q.close.split(":")[1]),Xe=at*60+Je-(ge*60+Le),$=Math.floor(Xe/60),Y=Xe%60;return{hours:$,minutes:Y,total:Xe/60}},ze=async()=>{w(!0);try{const Q=[{key:"vatEnabled",value:B.enabled.toString(),category:"VAT",description:"VAT enabled",isPublic:!0},{key:"vatRate",value:B.rate.toString(),category:"VAT",description:"VAT rate",isPublic:!0},{key:"vatCountry",value:B.country,category:"VAT",description:"VAT country",isPublic:!0},{key:"vatDisplayInAdmin",value:B.displayInAdmin.toString(),category:"VAT",description:"Show VAT in admin",isPublic:!0},{key:"vatIncludeInCustomerPrice",value:B.includeInCustomerPrice.toString(),category:"VAT",description:"Include VAT in customer price",isPublic:!0},{key:"vatShowBreakdown",value:B.showVatBreakdown.toString(),category:"VAT",description:"Show VAT breakdown",isPublic:!0}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:Q})})).ok)throw new Error("Failed to save VAT settings");K.success(e("adminSettings.settingsSaved")),f(!1)}catch(Q){console.error("Error saving VAT settings:",Q),K.error("Failed to save VAT settings")}finally{w(!1)}},Ee=(Q,ge)=>{D(Le=>({...Le,[Q]:ge})),f(!0)};_.useEffect(()=>{n&&o==="smtp"&&P({host:n.host||"",port:n.port||587,secure:n.secure||!1,username:n.username||"",password:"",fromEmail:n.fromEmail||"",fromName:n.fromName||"lfng",fromNameIs:n.fromNameIs||"lfng",isEnabled:n.isEnabled||!1})},[n,o]);const ie=(Q,ge)=>{P(Le=>({...Le,[Q]:ge})),t(w4({field:Q,value:ge})),f(!0)},Te=async()=>{w(!0);try{await t(gd(C)).unwrap(),K.success("SMTP settings saved successfully!"),f(!1)}catch(Q){K.error(Q||"Failed to save settings")}finally{w(!1)}},Ae=async()=>{if(!C.host||!C.username||!C.password||!C.fromEmail){K.error("Please fill in all required fields before testing");return}try{await t(fd(C)).unwrap(),a!=null&&a.success&&K.success("SMTP test successful!")}catch(Q){K.error(Q||"SMTP test failed")}};return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(lt,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e("admin.accessDeniedMessage")})]})})}):c?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-3 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-4 sm:py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4 lg:gap-6 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[s.jsx(je,{to:"/admin/settings",className:"flex-shrink-0 p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 mt-0.5",children:s.jsx(Us,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl font-bold text-gray-900 dark:text-white flex items-center gap-1.5 sm:gap-2 lg:gap-3 flex-wrap leading-tight",children:[s.jsx(es,{className:"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsx("span",{children:e("adminSettings.generalSettings")})]}),s.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:e("adminSettings.generalDescription")})]})]}),s.jsxs("div",{className:"flex flex-col xs:flex-row items-center justify-end gap-2 sm:gap-3 lg:gap-4 flex-shrink-0 w-full sm:w-auto",children:[m?s.jsxs("div",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 whitespace-nowrap",children:[s.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"Unsaved Changes"})]}):s.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 whitespace-nowrap",children:[s.jsx(yt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"All Saved"})]}),s.jsxs("button",{onClick:()=>{o==="business"||o==="ageRestrictions"?V():o==="apiKeys"?K.info("API keys are saved individually"):o==="smtp"?Te():o==="vat"?ze():R()},disabled:p||!m,className:"inline-flex items-center px-3 sm:px-4 py-2 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 whitespace-nowrap",children:[p?s.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(_r,{className:"w-4 h-4 mr-2"}),e(p?"common.loading":"adminSettings.saveChanges")]})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:s.jsxs("nav",{className:"flex gap-1 sm:gap-2 lg:gap-4 px-2 sm:px-4 lg:px-6 min-w-max sm:min-w-full","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>d("general"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="general"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(es,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.general")})]})}),s.jsx("button",{onClick:()=>d("apiKeys"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="apiKeys"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(zd,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.apiKeys")})]})}),s.jsx("button",{onClick:()=>d("business"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="business"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(Wt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.openingHours")||"Opnunartmar"})]})}),s.jsx("button",{onClick:()=>d("ageRestrictions"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="ageRestrictions"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(gt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.ageRestrictions")||"Aldurstakmrk"})]})}),s.jsx("button",{onClick:()=>d("smtp"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="smtp"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(Yr,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.smtp")})]})}),s.jsx("button",{onClick:()=>d("vat"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="vat"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(Gh,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.vat")})]})})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-6",children:s.jsx("div",{className:"space-y-6",children:o==="general"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(JM,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.storeInformation")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.storeInformationDesc")})]}),s.jsxs("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeName")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:x.storeName,onChange:Q=>q("storeName",Q.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${U.storeName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store name"}),U.storeName&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:U.storeName})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeEmail")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",value:x.storeEmail,onChange:Q=>q("storeEmail",Q.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${U.storeEmail?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"info@yourstore.com"})]}),U.storeEmail&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:U.storeEmail})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.phoneNumber")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ni,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:x.storePhone,onChange:Q=>q("storePhone",Q.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${U.storePhone?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"+354 555 1234"})]}),U.storePhone&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:U.storePhone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeAddress")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(fn,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("textarea",{value:x.storeAddress,onChange:Q=>q("storeAddress",Q.target.value),rows:3,className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${U.storeAddress?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store address"})]}),U.storeAddress&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:U.storeAddress})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.storeDescription")}),s.jsx("textarea",{value:x.storeDescription,onChange:Q=>q("storeDescription",Q.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Describe your store and what makes it special"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Kh,{className:"w-6 h-6 text-green-600 dark:text-green-400 mr-3"}),s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.preferences")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.preferencesDesc")})]}),s.jsx("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-4 gap-4 xl:gap-6 2xl:gap-8",children:[s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.currency")}),s.jsxs("div",{className:"relative",children:[s.jsx(ig,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.currency,onChange:Q=>q("currency",Q.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"ISK",children:e("adminSettings.currencyISK")}),s.jsx("option",{value:"USD",children:e("adminSettings.currencyUSD")}),s.jsx("option",{value:"EUR",children:e("adminSettings.currencyEUR")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.language")}),s.jsxs("div",{className:"relative",children:[s.jsx(Kh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.language,onChange:Q=>q("language",Q.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"is",children:e("adminSettings.languageIcelandic")}),s.jsx("option",{value:"en",children:e("adminSettings.languageEnglish")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.dateFormat")}),s.jsxs("div",{className:"relative",children:[s.jsx(Dn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.dateFormat,onChange:Q=>q("dateFormat",Q.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"DD/MM/YYYY",children:e("adminSettings.dateFormatDDMMYYYY")}),s.jsx("option",{value:"MM/DD/YYYY",children:e("adminSettings.dateFormatMMDDYYYY")}),s.jsx("option",{value:"YYYY-MM-DD",children:e("adminSettings.dateFormatYYYYMMDD")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.timeFormat")}),s.jsxs("div",{className:"relative",children:[s.jsx(Wt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.timeFormat,onChange:Q=>q("timeFormat",Q.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"24h",children:e("adminSettings.timeFormat24h")}),s.jsx("option",{value:"12h",children:e("adminSettings.timeFormat12h")})]})]})]})]})})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4 xl:p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Pl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm xl:text-base font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.needHelp")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:e("adminSettings.settingsControlDesc")}),s.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.storeNameAppears")]}),s.jsxs("li",{children:[" ",e("adminSettings.currencyAffects")]}),s.jsxs("li",{children:[" ",e("adminSettings.languageSets")]}),s.jsxs("li",{children:[" ",e("adminSettings.dateTimeFormats")]})]})]})]})})]}):o==="apiKeys"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(zd,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.apiKeysConfiguration")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.apiKeysDescription")})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-pink-600 dark:text-pink-400 font-semibold text-sm",children:"U"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.unsplashApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.unsplashDevelopers")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.unsplash?"text":"password",placeholder:e("adminSettings.enterUnsplashApiKey"),value:O.unsplash||"",onChange:Q=>{I(ge=>({...ge,unsplash:Q.target.value})),f(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>re("unsplash"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.unsplash?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>J("unsplash",O.unsplash||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:"P"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pexelsApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pexelsApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.pexels?"text":"password",placeholder:e("adminSettings.enterPexelsApiKey"),value:O.pexels||"",onChange:Q=>{I(ge=>({...ge,pexels:Q.target.value})),f(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>re("pexels"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.pexels?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>J("pexels",O.pexels||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold text-sm",children:"PX"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pixabayApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pixabayApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.pixabay?"text":"password",placeholder:e("adminSettings.enterPixabayApiKey"),value:O.pixabay||"",onChange:Q=>{I(ge=>({...ge,pixabay:Q.target.value})),f(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>re("pixabay"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.pixabay?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>J("pixabay",O.pixabay||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold text-sm",children:"G"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.googleApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.googleCloudConsole")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.google?"text":"password",placeholder:e("adminSettings.enterGoogleApiKey"),value:O.google||"",onChange:Q=>{I(ge=>({...ge,google:Q.target.value})),f(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>re("google"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.google?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>J("google",O.google||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:e("adminSettings.enterGoogleSearchEngineId"),value:O.googleSearchEngineId||"",onChange:Q=>{I(ge=>({...ge,googleSearchEngineId:Q.target.value})),f(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{onClick:()=>J("googleSearchEngineId",O.googleSearchEngineId||""),disabled:p||!m,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.test")})]})]})]})]}),s.jsxs("div",{className:"mt-8 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-3",children:e("adminSettings.importantNotes")}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote1")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote2")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote3")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote4")]})]})]})]}):o==="business"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(A_,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.quickActions")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:fe,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Dn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekdayHours")})]}),s.jsxs("button",{onClick:be,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Dn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekendHours")})]}),s.jsxs("button",{onClick:z,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Wt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.operation24h")})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>N(!j),className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(T_,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.copyHours")})]}),j&&s.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10 overflow-hidden",children:Object.keys(y.openingHours).map(Q=>s.jsxs("button",{onClick:()=>ae(Q),className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300 transition-colors capitalize",children:[e("adminSettings.copy")," ",xe(Q)]},Q))})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Wt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.openingHours")})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(y.openingHours).map(([Q,ge])=>{const Le=Me(ge);return s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:xe(Q)})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",value:ge.open,onChange:at=>{const Je=at.target.value;(Je===""||/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(Je)||/^([0-1]?[0-9]?|2[0-3]?)(:([0-5]?[0-9]?)?)?$/.test(Je))&&(b(Xe=>({...Xe,openingHours:{...Xe.openingHours,[Q]:{...ge,open:Je}}})),f(!0))},disabled:ge.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800 font-mono",title:e("adminSettings.openingTime"),placeholder:"HH:MM",pattern:"^([0-1][0-9]|2[0-3]):[0-5][0-9]$"})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:""})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",value:ge.close,onChange:at=>{const Je=at.target.value;(Je===""||/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(Je)||/^([0-1]?[0-9]?|2[0-3]?)(:([0-5]?[0-9]?)?)?$/.test(Je))&&(b(Xe=>({...Xe,openingHours:{...Xe.openingHours,[Q]:{...ge,close:Je}}})),f(!0))},disabled:ge.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800 font-mono",title:e("adminSettings.closingTime"),placeholder:"HH:MM",pattern:"^([0-1][0-9]|2[0-3]):[0-5][0-9]$"})}),s.jsx("div",{className:"col-span-2 text-center",children:Le?s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[Le.hours,"h ",Le.minutes,"m"]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:ge.closed,onChange:at=>{b(Je=>({...Je,openingHours:{...Je.openingHours,[Q]:{...ge,closed:at.target.checked}}})),f(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.closed")})]})})]},Q)})}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Pl,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:e("adminSettings.weeklySummary")}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.openDays")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(y.openingHours).filter(Q=>!Q.closed).length,"/7"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.totalHoursPerWeek")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(y.openingHours).reduce((Q,ge)=>{const Le=Me(ge);return Q+((Le==null?void 0:Le.total)||0)},0).toFixed(1),"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.avgHoursPerDay")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[(Object.values(y.openingHours).reduce((Q,ge)=>{const Le=Me(ge);return Q+((Le==null?void 0:Le.total)||0)},0)/Object.values(y.openingHours).filter(Q=>!Q.closed).length).toFixed(1),"h"]})]})]})]})]})})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:V,disabled:p||!m,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p?s.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(_r,{className:"w-4 h-4 mr-2"}),e(p?"common.saving":"adminSettings.saveChanges")]})})})]}):o==="ageRestrictions"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(gt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.ageRestriction")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"enableAgeRestriction",checked:y.ageRestriction.enabled,onChange:Q=>{b(ge=>({...ge,ageRestriction:{...ge.ageRestriction,enabled:Q.target.checked}})),f(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"enableAgeRestriction",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.enableRestrictions")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.nicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:y.ageRestriction.nicotineAge,onChange:Q=>{b(ge=>({...ge,ageRestriction:{...ge.ageRestriction,nicotineAge:parseInt(Q.target.value)||18}})),f(!0)},disabled:!y.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.nicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.alcoholNicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:y.ageRestriction.alcoholNicotineAge,onChange:Q=>{b(ge=>({...ge,ageRestriction:{...ge.ageRestriction,alcoholNicotineAge:parseInt(Q.target.value)||20}})),f(!0)},disabled:!y.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.alcoholNicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.generalProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:y.ageRestriction.generalProducts,onChange:Q=>{b(ge=>({...ge,ageRestriction:{...ge.ageRestriction,generalProducts:parseInt(Q.target.value)||0}})),f(!0)},disabled:!y.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.generalProductsDescription")})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.ageRestrictionNotice")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.ageRestrictionDescription")})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsx("button",{onClick:V,disabled:p||!m,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:p?s.jsxs(s.Fragment,{children:[s.jsx(lt,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}),e("common.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(_r,{className:"w-5 h-5 mr-2"}),e("adminSettings.saveChanges")]})})})})]}):o==="smtp"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Op,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.smtpSettings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.smtp.description")})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:C.isEnabled,onChange:Q=>ie("isEnabled",Q.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.smtp.enableSmtp")})]})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.host")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Op,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:C.host,onChange:Q=>ie("host",Q.target.value),placeholder:"smtp.gmail.com",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.hostHelp")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.port")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:C.port,onChange:Q=>ie("port",parseInt(Q.target.value)||587),placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.portHelp")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:C.secure,onChange:Q=>ie("secure",Q.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx(Ap,{className:"w-4 h-4 ml-2 mr-1 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.smtp.useSecure")})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:e("adminSettings.smtp.secureHelp")})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Hr,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.authCredentials")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.username")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:C.username,onChange:Q=>ie("username",Q.target.value),placeholder:"your-email@example.com",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.password")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ap,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:E?"text":"password",value:C.password,onChange:Q=>ie("password",Q.target.value),placeholder:"Enter SMTP password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>T(!E),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:E?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.passwordHelp")})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Yr,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.senderInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.fromEmail")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",value:C.fromEmail,onChange:Q=>ie("fromEmail",Q.target.value),placeholder:"noreply@olfong.is",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.fromEmailHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.smtp.fromNameEn")}),s.jsx("input",{type:"text",value:C.fromName,onChange:Q=>ie("fromName",Q.target.value),placeholder:"lfng",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.smtp.fromNameIs")}),s.jsx("input",{type:"text",value:C.fromNameIs,onChange:Q=>ie("fromNameIs",Q.target.value),placeholder:"lfng",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:Ae,disabled:i||!C.host||!C.username||!C.password||!C.fromEmail,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:i?s.jsxs(s.Fragment,{children:[s.jsx(qt,{className:"w-4 h-4 mr-2 animate-spin"}),e("adminSettings.smtp.testingConnection")]}):s.jsxs(s.Fragment,{children:[s.jsx(Cy,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.testConnection")]})}),s.jsxs("button",{onClick:Te,disabled:p||!m,className:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p?s.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(_r,{className:"w-4 h-4 mr-2"}),e(p?"common.saving":"adminSettings.smtp.saveSettings")]})]})}),a&&s.jsx("div",{className:`p-4 rounded-md ${a.success?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:s.jsxs("div",{className:"flex items-start",children:[a.success?s.jsx(yt,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-3 mt-0.5"}):s.jsx(gt,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-sm font-medium ${a.success?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:a.success?e("adminSettings.smtp.connectionSuccess"):e("adminSettings.smtp.connectionFailed")}),s.jsx("p",{className:`text-sm mt-1 ${a.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:a.message||(a.success?e("adminSettings.smtp.connectionSuccessMsg"):e("adminSettings.smtp.connectionFailedMsg"))})]})]})})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Pl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.smtp.commonProviders")}),s.jsxs("div",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-300",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Gmail:"})," ",e("adminSettings.smtp.providerGmail")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Outlook/Office365:"})," ",e("adminSettings.smtp.providerOutlook")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Yahoo:"})," ",e("adminSettings.smtp.providerYahoo")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"SendGrid:"})," ",e("adminSettings.smtp.providerSendGrid")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Mailgun:"})," ",e("adminSettings.smtp.providerMailgun")]})]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-3",children:e("adminSettings.smtp.gmailTip")})]})]})})]}):o==="vat"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gh,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatConfiguration")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.vatInformationDescription")})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.vatEnabled")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.enableVatForStore")})]}),s.jsx("label",{className:"flex items-center cursor-pointer",children:s.jsx("input",{type:"checkbox",checked:B.enabled,onChange:Q=>Ee("enabled",Q.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})})]}),B.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.vatRate")," (%) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:B.rate,onChange:Q=>Ee("rate",parseFloat(Q.target.value)||0),min:"0",max:"100",step:"0.01",placeholder:"24.00",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.vatRateDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.country")}),s.jsxs("select",{value:B.country,onChange:Q=>Ee("country",Q.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"IS",children:e("adminSettings.iceland")}),s.jsx("option",{value:"EU",children:e("adminSettings.euCountries")}),s.jsx("option",{value:"OTHER",children:e("adminSettings.otherCountries")})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatDisplaySettings")})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",id:"displayInAdmin",checked:B.displayInAdmin,onChange:Q=>Ee("displayInAdmin",Q.target.checked),disabled:!B.enabled,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 mt-1 disabled:opacity-50"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("label",{htmlFor:"displayInAdmin",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatInAdmin")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.showVatInAdminDescription")})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",id:"includeInCustomerPrice",checked:B.includeInCustomerPrice,onChange:Q=>Ee("includeInCustomerPrice",Q.target.checked),disabled:!B.enabled,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 mt-1 disabled:opacity-50"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("label",{htmlFor:"includeInCustomerPrice",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.includeVatInCustomerPrice")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.includeVatInCustomerPriceDescription")})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",id:"showVatBreakdown",checked:B.showVatBreakdown,onChange:Q=>Ee("showVatBreakdown",Q.target.checked),disabled:!B.enabled,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 mt-1 disabled:opacity-50"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("label",{htmlFor:"showVatBreakdown",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatBreakdown")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.showVatBreakdownDescription")})]})]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Pl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.vatInformation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.vatInformationDescription")})]})]})})]}):null})})})]})})},r9=()=>{const{t:e}=pe(),{user:t}=we(C=>C.auth),[r,n]=_.useState(!0),[a,i]=_.useState(!1),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,f]=_.useState({openingHours:{monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"24:00",closed:!1},sunday:{open:"12:00",close:"24:00",closed:!1}},ageRestriction:{enabled:!0,nicotineAge:18,alcoholNicotineAge:20,generalProducts:0}});_.useEffect(()=>{p()},[]);const p=async()=>{var C;n(!0);try{const P=await fetch("/api/settings?category=BUSINESS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(P.ok){const E=await P.json(),T={};(C=E.data.settings.BUSINESS)==null||C.forEach(O=>{O.key==="openingHours"?T.openingHours=JSON.parse(O.value):O.key==="ageRestrictionEnabled"?T.ageRestriction={...T.ageRestriction,enabled:O.value==="true"}:O.key==="nicotineAge"?T.ageRestriction={...T.ageRestriction,nicotineAge:parseInt(O.value)}:O.key==="alcoholNicotineAge"?T.ageRestriction={...T.ageRestriction,alcoholNicotineAge:parseInt(O.value)}:O.key==="generalProductsAge"&&(T.ageRestriction={...T.ageRestriction,generalProducts:parseInt(O.value)})}),f(O=>({...O,...T}))}}catch(P){console.error("Error loading settings:",P),K.error("Failed to load settings")}finally{n(!1)}},w=async()=>{d(!0);try{const C=[{key:"openingHours",value:JSON.stringify(m.openingHours),category:"BUSINESS",description:"Store opening hours"},{key:"ageRestrictionEnabled",value:m.ageRestriction.enabled.toString(),category:"BUSINESS",description:"Age restriction enabled"},{key:"nicotineAge",value:m.ageRestriction.nicotineAge.toString(),category:"BUSINESS",description:"Minimum age for nicotine products"},{key:"alcoholNicotineAge",value:m.ageRestriction.alcoholNicotineAge.toString(),category:"BUSINESS",description:"Minimum age for alcohol and nicotine products"},{key:"generalProductsAge",value:m.ageRestriction.generalProducts.toString(),category:"BUSINESS",description:"Minimum age for general products"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:C})})).ok)throw new Error("Failed to save settings");K.success(e("adminSettings.settingsSaved")),i(!1)}catch(C){console.error("Error saving settings:",C),K.error("Failed to save settings")}finally{d(!1)}},x=C=>{const P=m.openingHours[C],E={};Object.keys(m.openingHours).forEach(T=>{E[T]={...P}}),f(T=>({...T,openingHours:E})),i(!0),h(!1),K.success(e("adminSettings.copiedHoursToAllDays").replace("{day}",j(C)))},k=()=>{const C={...m.openingHours};["monday","tuesday","wednesday","thursday","friday"].forEach(P=>{C[P]={open:"10:00",close:"22:00",closed:!1}}),f(P=>({...P,openingHours:C})),i(!0),K.success(e("adminSettings.setWeekdayHoursSuccess"))},y=()=>{const C={...m.openingHours};["saturday","sunday"].forEach(P=>{C[P]={open:"12:00",close:"24:00",closed:!1}}),f(P=>({...P,openingHours:C})),i(!0),K.success(e("adminSettings.setWeekendHoursSuccess"))},b=()=>{const C={};Object.keys(m.openingHours).forEach(P=>{C[P]={open:"00:00",close:"23:59",closed:!1}}),f(P=>({...P,openingHours:C})),i(!0),K.success(e("adminSettings.set24hSuccess"))},j=C=>({monday:e("adminSettings.monday"),tuesday:e("adminSettings.tuesday"),wednesday:e("adminSettings.wednesday"),thursday:e("adminSettings.thursday"),friday:e("adminSettings.friday"),saturday:e("adminSettings.saturday"),sunday:e("adminSettings.sunday")})[C]||C,N=C=>{if(C.closed)return null;const P=parseInt(C.open.split(":")[0]),E=parseInt(C.open.split(":")[1]),T=parseInt(C.close.split(":")[0]),O=parseInt(C.close.split(":")[1]),I=T*60+O-(P*60+E),W=Math.floor(I/60),X=I%60;return{hours:W,minutes:X,total:I/60}};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(lt,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(je,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Us,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.businessSettings")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.businessDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(A_,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.quickActions")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:k,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Dn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekdayHours")})]}),s.jsxs("button",{onClick:y,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Dn,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekendHours")})]}),s.jsxs("button",{onClick:b,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Wt,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.operation24h")})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!c),className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(T_,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.copyHours")})]}),c&&s.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10 overflow-hidden",children:Object.keys(m.openingHours).map(C=>s.jsxs("button",{onClick:()=>x(C),className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300 transition-colors capitalize",children:[e("adminSettings.copy")," ",j(C)]},C))})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Wt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.openingHours")})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(m.openingHours).map(([C,P])=>{const E=N(P);return s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:j(C)})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"time",value:P.open,onChange:T=>{f(O=>({...O,openingHours:{...O.openingHours,[C]:{...P,open:T.target.value}}})),i(!0)},disabled:P.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800",title:e("adminSettings.openingTime")})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:""})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"time",value:P.close,onChange:T=>{f(O=>({...O,openingHours:{...O.openingHours,[C]:{...P,close:T.target.value}}})),i(!0)},disabled:P.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800",title:e("adminSettings.closingTime")})}),s.jsx("div",{className:"col-span-2 text-center",children:E?s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[E.hours,"h ",E.minutes,"m"]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:P.closed,onChange:T=>{f(O=>({...O,openingHours:{...O.openingHours,[C]:{...P,closed:T.target.checked}}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.closed")})]})})]},C)})}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Pl,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:e("adminSettings.weeklySummary")}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.openDays")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(m.openingHours).filter(C=>!C.closed).length,"/7"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.totalHoursPerWeek")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(m.openingHours).reduce((C,P)=>{const E=N(P);return C+((E==null?void 0:E.total)||0)},0).toFixed(1),"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.avgHoursPerDay")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[(Object.values(m.openingHours).reduce((C,P)=>{const E=N(P);return C+((E==null?void 0:E.total)||0)},0)/Object.values(m.openingHours).filter(C=>!C.closed).length).toFixed(1),"h"]})]})]})]})]})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(gt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.ageRestriction")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"enableAgeRestriction",checked:m.ageRestriction.enabled,onChange:C=>{f(P=>({...P,ageRestriction:{...P.ageRestriction,enabled:C.target.checked}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"enableAgeRestriction",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.enableAgeRestriction")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.nicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.nicotineAge,onChange:C=>{f(P=>({...P,ageRestriction:{...P.ageRestriction,nicotineAge:parseInt(C.target.value)||18}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.nicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.alcoholNicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.alcoholNicotineAge,onChange:C=>{f(P=>({...P,ageRestriction:{...P.ageRestriction,alcoholNicotineAge:parseInt(C.target.value)||20}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.alcoholNicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.generalProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.generalProducts,onChange:C=>{f(P=>({...P,ageRestriction:{...P.ageRestriction,generalProducts:parseInt(C.target.value)||0}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.generalProductsDescription")})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.ageRestrictionNotice")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.ageRestrictionDescription")})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:w,disabled:o||!a,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?s.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(_r,{className:"w-4 h-4 mr-2"}),e(o?"common.loading":"adminSettings.saveChanges")]})})})]})})},s9=()=>{const{t:e,currentLanguage:t}=pe(),{user:r}=we(b=>b.auth),[n,a]=_.useState(!0),[i,o]=_.useState([]),[d,c]=_.useState(!1),[h,m]=_.useState({});_.useEffect(()=>{f()},[]);const f=async()=>{a(!0);try{const b=await fetch("/api/shipping/active",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const j=await b.json();o(j.data||[])}}catch(b){console.error("Error loading shipping options:",b),K.error("Failed to load shipping options")}finally{a(!1)}},p=async(b,j)=>{try{if((await fetch(`/api/shipping/${b}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:j})})).ok)o(C=>C.map(P=>P.id===b?{...P,isEnabled:j}:P)),K.success(`Shipping option ${j?"enabled":"disabled"} successfully`);else throw new Error("Failed to toggle shipping option")}catch(N){console.error("Error toggling shipping option:",N),K.error("Failed to toggle shipping option")}},w=async b=>{if(window.confirm(e("adminSettings.confirmDeleteShipping")))try{if((await fetch(`/api/shipping/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)o(N=>N.filter(C=>C.id!==b)),K.success("Shipping option deleted successfully");else throw new Error("Failed to delete shipping option")}catch(j){console.error("Error deleting shipping option:",j),K.error("Failed to delete shipping option")}},x=async b=>{try{const j=await fetch("/api/shipping",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(b)});if(j.ok){const N=await j.json();o(C=>[...C,N.data]),c(!1),m({}),K.success("Shipping option created successfully")}else throw new Error("Failed to create shipping option")}catch(j){console.error("Error creating shipping option:",j),K.error("Failed to create shipping option")}},k=async(b,j)=>{try{const N=await fetch(`/api/shipping/${b}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(j)});if(N.ok){const C=await N.json();o(P=>P.map(E=>E.id===b?C.data:E)),c(!1),m({}),K.success("Shipping option updated successfully")}else throw new Error("Failed to update shipping option")}catch(N){console.error("Error updating shipping option:",N),K.error("Failed to update shipping option")}};if((r==null?void 0:r.role)!=="ADMIN")return s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(lt,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})});if(n)return s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})});const y=()=>d?s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h.id?e("adminSettings.editShippingOption"):e("adminSettings.addShippingOption")}),s.jsx("button",{onClick:()=>{c(!1),m({})},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:b=>{b.preventDefault();const j=new FormData(b.target),N=Object.fromEntries(j.entries());N.fee=parseFloat(N.fee)||0,N.estimatedDays=parseInt(N.estimatedDays)||1,N.sortOrder=parseInt(N.sortOrder)||0,h.id?k(h.id,N):x(N)},children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.nameEnglish")}),s.jsx("input",{type:"text",name:"name",defaultValue:h.name||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.nameIcelandic")}),s.jsx("input",{type:"text",name:"nameIs",defaultValue:h.nameIs||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.type")}),s.jsxs("select",{name:"type",defaultValue:h.type||"DELIVERY",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"DELIVERY",children:e("adminSettings.delivery")}),s.jsx("option",{value:"PICKUP",children:e("adminSettings.pickup")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.price")," (ISK)"]}),s.jsx("input",{type:"number",name:"fee",defaultValue:h.fee||0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.estimatedDays")}),s.jsx("input",{type:"number",name:"estimatedDays",defaultValue:h.estimatedDays||1,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.sortOrder")}),s.jsx("input",{type:"number",name:"sortOrder",defaultValue:h.sortOrder||0,min:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.descriptionEnglish")}),s.jsx("textarea",{name:"description",defaultValue:h.description||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.descriptionIcelandic")}),s.jsx("textarea",{name:"descriptionIs",defaultValue:h.descriptionIs||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>{c(!1),m({})},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:e("adminSettings.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:h.id?e("adminSettings.update"):e("adminSettings.create")})]})]})]})})}):null;return s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(je,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Us,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.shipping")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.shippingDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5",children:""}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminSettings.shippingConfiguration")}),s.jsx("p",{children:e("adminSettings.shippingDescription")})]})]})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{}),s.jsxs("button",{onClick:()=>{m({}),c(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(vr,{className:"h-4 w-4 mr-2"}),e("adminSettings.addShippingOption")]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.map(b=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(Cr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t==="is"?b.nameIs:b.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t==="is"?b.name:b.nameIs})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>w(b.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:e("adminSettings.delete"),children:s.jsx(ar,{className:"h-4 w-4"})}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.isEnabled,onChange:j=>p(b.id,j.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:t==="is"?b.descriptionIs:b.description}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-4 leading-relaxed italic",children:t==="is"?b.description:b.descriptionIs}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${b.isEnabled?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:b.isEnabled?e("adminSettings.enabled"):e("adminSettings.disabled")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[b.fee," ISK"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:b.type})]})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsx("button",{onClick:()=>{m(b),c(!0)},className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:e("adminSettings.edit")})})]},b.id))}),i.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Cr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminSettings.noShippingOptions")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminSettings.noShippingOptionsDescription")}),s.jsxs("button",{onClick:()=>{m({}),c(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(vr,{className:"h-4 w-4 mr-2"}),e("adminSettings.addFirstShippingOption")]})]}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mr-3 mt-0.5",children:""}),s.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminSettings.shippingNotes")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:e("adminSettings.shippingNote1")}),s.jsx("li",{children:e("adminSettings.shippingNote2")}),s.jsx("li",{children:e("adminSettings.shippingNote3")})]})]})]})})]})}),y()]})})},n9=()=>{const{t:e}=pe(),{user:t}=we(p=>p.auth),[r,n]=_.useState(!0),[a,i]=_.useState(!1),[o,d]=_.useState(!1),[c,h]=_.useState({enabled:!0,rate:24,country:"IS",displayInAdmin:!0,includeInCustomerPrice:!0,showVatBreakdown:!1});_.useEffect(()=>{m()},[]);const m=async()=>{var p;n(!0);try{const w=await fetch("/api/settings?category=VAT",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(w.ok){const x=await w.json(),k={};(p=x.data.settings.VAT)==null||p.forEach(y=>{y.key==="vatEnabled"?k.enabled=y.value==="true":y.key==="vatRate"?k.rate=parseFloat(y.value):y.key==="vatCountry"?k.country=y.value:y.key==="vatDisplayInAdmin"?k.displayInAdmin=y.value==="true":y.key==="vatIncludeInCustomerPrice"?k.includeInCustomerPrice=y.value==="true":y.key==="vatShowBreakdown"&&(k.showVatBreakdown=y.value==="true")}),h(y=>({...y,...k}))}}catch(w){console.error("Error loading settings:",w),K.error("Failed to load settings")}finally{n(!1)}},f=async()=>{d(!0);try{const p=[{key:"vatEnabled",value:c.enabled.toString(),category:"VAT",description:"VAT enabled"},{key:"vatRate",value:c.rate.toString(),category:"VAT",description:"VAT rate"},{key:"vatCountry",value:c.country,category:"VAT",description:"VAT country"},{key:"vatDisplayInAdmin",value:c.displayInAdmin.toString(),category:"VAT",description:"Show VAT in admin"},{key:"vatIncludeInCustomerPrice",value:c.includeInCustomerPrice.toString(),category:"VAT",description:"Include VAT in customer price"},{key:"vatShowBreakdown",value:c.showVatBreakdown.toString(),category:"VAT",description:"Show VAT breakdown"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:p})})).ok)throw new Error("Failed to save settings");K.success(e("adminSettings.settingsSaved")),i(!1)}catch(p){console.error("Error saving settings:",p),K.error("Failed to save settings")}finally{d(!1)}};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(lt,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(je,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Us,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.vatSettings")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.vatDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Gh,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatSettings")})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings.vatConfiguration")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"vatEnabled",checked:c.enabled,onChange:p=>{h(w=>({...w,enabled:p.target.checked})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"vatEnabled",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.vatEnabled")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.vatRate")," (%)"]}),s.jsx("input",{type:"number",value:c.rate,onChange:p=>{h(w=>({...w,rate:parseFloat(p.target.value)||0})),i(!0)},disabled:!c.enabled,min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"24.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.country")}),s.jsxs("select",{name:"country",value:c.country,onChange:p=>{h(w=>({...w,country:p.target.value})),i(!0)},disabled:!c.enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"IS",children:e("adminSettings.iceland")}),s.jsx("option",{value:"EU",children:e("adminSettings.euCountries")}),s.jsx("option",{value:"OTHER",children:e("adminSettings.otherCountries")})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.vatInformation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.vatInformationDescription")})]})})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings.vatDisplaySettings")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showVatInAdmin",checked:c.displayInAdmin,onChange:p=>{h(w=>({...w,displayInAdmin:p.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"showVatInAdmin",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatInAdmin")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.showVatInAdminDescription")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"includeVatInCustomerPrice",checked:c.includeInCustomerPrice,onChange:p=>{h(w=>({...w,includeInCustomerPrice:p.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"includeVatInCustomerPrice",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.includeVatInCustomerPrice")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.includeVatInCustomerPriceDescription")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showVatBreakdown",checked:c.showVatBreakdown,onChange:p=>{h(w=>({...w,showVatBreakdown:p.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"showVatBreakdown",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatBreakdown")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.showVatBreakdownDescription")})]})]})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:f,disabled:o||!a,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?s.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(_r,{className:"w-4 h-4 mr-2"}),e(o?"common.loading":"adminSettings.saveChanges")]})})})]})})},a9=()=>{const{t:e}=pe(),{user:t}=we(k=>k.auth),[r,n]=_.useState(!0),[a,i]=_.useState(!1),[o,d]=_.useState(!1),[c,h]=_.useState({}),[m,f]=_.useState({});_.useEffect(()=>{p()},[]);const p=async()=>{var k;n(!0);try{const y=await fetch("/api/settings?category=API_KEYS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(y.ok){const b=await y.json(),j={};(k=b.data.settings.API_KEYS)==null||k.forEach(N=>{j[N.key]=N.value||""}),h(j)}}catch(y){console.error("Error loading settings:",y),K.error("Failed to load settings")}finally{n(!1)}},w=async(k,y)=>{d(!0);try{const b=[{key:k,value:y,category:"API_KEYS",description:`${k} API key`}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:b})})).ok)throw new Error("Failed to save API key");K.success(e("adminSettings.settingsSaved")),i(!1)}catch(b){console.error("Error saving API key:",b),K.error("Failed to save API key")}finally{d(!1)}},x=k=>{f(y=>({...y,[k]:!y[k]}))};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(lt,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(je,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Us,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.apiKeysDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(zd,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.apiKeysConfiguration")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.apiKeysDescription")})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-pink-600 dark:text-pink-400 font-semibold text-sm",children:"U"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.unsplashApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.unsplashDevelopers")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.unsplash?"text":"password",placeholder:e("adminSettings.enterUnsplashApiKey"),value:c.unsplash||"",onChange:k=>{h(y=>({...y,unsplash:k.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("unsplash"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.unsplash?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:"P"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pexelsApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pexelsApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.pexels?"text":"password",placeholder:e("adminSettings.enterPexelsApiKey"),value:c.pexels||"",onChange:k=>{h(y=>({...y,pexels:k.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("pexels"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.pexels?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>w("pexels",c.pexels||""),disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold text-sm",children:"PX"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pixabayApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pixabayApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.pixabay?"text":"password",placeholder:e("adminSettings.enterPixabayApiKey"),value:c.pixabay||"",onChange:k=>{h(y=>({...y,pixabay:k.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("pixabay"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.pixabay?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>w("pixabay",c.pixabay||""),disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold text-sm",children:"G"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.googleApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.googleCloudConsole")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.google?"text":"password",placeholder:e("adminSettings.enterGoogleApiKey"),value:c.google||"",onChange:k=>{h(y=>({...y,google:k.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("google"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.google?s.jsx(Nr,{className:"h-4 w-4 text-gray-400"}):s.jsx(Ut,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>w("google",c.google||""),disabled:o||!a,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:e("adminSettings.enterGoogleSearchEngineId"),value:c.googleSearchEngineId||"",onChange:k=>{h(y=>({...y,googleSearchEngineId:k.target.value})),i(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{onClick:()=>w("googleSearchEngineId",c.googleSearchEngineId||""),disabled:o||!a,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings.test")})]})]})]})]}),s.jsxs("div",{className:"mt-8 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-3",children:e("adminSettings.importantNotes")}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote1")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote2")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote3")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote4")]})]})]})]})})]})})},i9=()=>{const{t:e}=pe();return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(je,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Us,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.paymentGateways")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.paymentGatewayDescription")})]})]})})})},k4=({gateway:e,onToggle:t,onTest:r,onEdit:n})=>{var i,o;const{t:a}=pe();return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(mn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:e.displayName}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.provider})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-400 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20",title:a("adminSettings.testConnection"),children:s.jsx(Dp,{className:"h-4 w-4"})}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.isEnabled,onChange:d=>t(e.id,d.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e.isEnabled?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.isEnabled?a("adminSettings.enabled"):a("adminSettings.disabled")})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.environment})})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(i=e.supportedMethods)==null?void 0:i.slice(0,4).map(d=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:d},d)),((o=e.supportedMethods)==null?void 0:o.length)>4&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:["+",e.supportedMethods.length-4]})]})}),s.jsx("div",{className:"flex space-x-3",children:s.jsx("button",{onClick:()=>n(e),className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:a("adminSettings.edit")})})]})};k4.propTypes={gateway:de.shape({id:de.number.isRequired,displayName:de.string.isRequired,provider:de.string.isRequired,description:de.string,isEnabled:de.bool.isRequired,environment:de.string.isRequired,supportedMethods:de.arrayOf(de.string)}).isRequired,onToggle:de.func.isRequired,onTest:de.func.isRequired,onEdit:de.func.isRequired};const o9=({onAddGateway:e})=>{const{t}=pe();return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(mn,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("adminSettings.noPaymentGateways")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t("adminSettings.noPaymentGatewaysDescription")}),s.jsxs("button",{onClick:e,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(vr,{className:"h-4 w-4 mr-2"}),t("adminSettings.addFirstPaymentGateway")]})]})},l9=()=>{const{t:e}=pe();return s.jsx(s.Fragment,{children:s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5",children:""}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminSettings.paymentGatewayConfiguration")}),s.jsx("p",{children:e("adminSettings.paymentGatewayDescription")})]})]})})})},j4=({isOpen:e,onClose:t,gatewayData:r,onSave:n})=>{const{t:a}=pe(),[i,o]=_.useState({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}}),[d,c]=_.useState({}),[h,m]=_.useState(!1);_.useEffect(()=>{r&&e?o({displayName:r.displayName||"",provider:r.provider||"",description:r.description||"",environment:r.environment||"sandbox",isEnabled:r.isEnabled||!1,supportedMethods:r.supportedMethods||[],merchantId:r.merchantId||"",apiKey:r.apiKey||"",secretKey:r.secretKey||"",webhookSecret:r.webhookSecret||"",accessKey:r.accessKey||"",publishableKey:r.publishableKey||"",clientId:r.clientId||"",clientSecret:r.clientSecret||"",applicationId:r.applicationId||"",paymentGatewayId:r.paymentGatewayId||"",privateKey:r.privateKey||"",publicKey:r.publicKey||"",config:r.config||{}}):e&&o({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}})},[r,e]);const f=async y=>{y.preventDefault();try{await n(i),t()}catch(b){console.error("Error saving payment gateway:",b),K.error(a("adminSettings.errorSavingPaymentGateway"))}},p=y=>{const{name:b,value:j,type:N,checked:C}=y.target;o(P=>({...P,[b]:N==="checkbox"?C:j}))},w=y=>{c(b=>({...b,[y]:!b[y]}))},x=async()=>{if(!i.provider){K.error(a("adminSettings.pleaseSelectProvider"));return}m(!0);try{const y=await fetch("/api/payment-gateways/test",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({provider:i.provider,environment:i.environment,...i})}),b=await y.json();y.ok?K.success(a("adminSettings.connectionTestSuccessful")):K.error(b.message||a("adminSettings.connectionTestFailed"))}catch(y){console.error("Connection test error:",y),K.error(a("adminSettings.connectionTestFailed"))}finally{m(!1)}},k=()=>{switch(i.provider){case"valitor":return[{name:"merchantId",label:a("adminSettings.merchantId"),type:"text",required:!0,placeholder:a("adminSettings.enterMerchantId")},{name:"apiKey",label:a("adminSettings.apiKey"),type:"password",required:!0,placeholder:a("adminSettings.enterApiKey")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"rapyd":return[{name:"accessKey",label:a("adminSettings.accessKey"),type:"password",required:!0,placeholder:a("adminSettings.enterAccessKey")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"stripe":return[{name:"publishableKey",label:a("adminSettings.publishableKey"),type:"password",required:!0,placeholder:a("adminSettings.enterPublishableKey")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"paypal":return[{name:"clientId",label:a("adminSettings.clientId"),type:"password",required:!0,placeholder:a("adminSettings.enterClientId")},{name:"clientSecret",label:a("adminSettings.clientSecret"),type:"password",required:!0,placeholder:a("adminSettings.enterClientSecret")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"netgiro":return[{name:"applicationId",label:a("adminSettings.applicationId"),type:"text",required:!0,placeholder:a("adminSettings.enterApplicationId")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];case"teya":return[{name:"merchantId",label:a("adminSettings.merchantId"),type:"text",required:!0,placeholder:a("adminSettings.enterMerchantId")},{name:"paymentGatewayId",label:a("adminSettings.paymentGatewayId"),type:"text",required:!0,placeholder:a("adminSettings.enterPaymentGatewayId")},{name:"secretKey",label:a("adminSettings.secretKey"),type:"password",required:!0,placeholder:a("adminSettings.enterSecretKey")},{name:"privateKey",label:a("adminSettings.privateKey"),type:"password",required:!1,placeholder:a("adminSettings.enterPrivateKey")},{name:"publicKey",label:a("adminSettings.publicKey"),type:"password",required:!1,placeholder:a("adminSettings.enterPublicKey")},{name:"webhookSecret",label:a("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:a("adminSettings.enterWebhookSecret")}];default:return[]}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r!=null&&r.id?a("adminSettings.editPaymentGateway"):a("adminSettings.addPaymentGateway")}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.displayName")}),s.jsx("input",{type:"text",name:"displayName",value:i.displayName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.provider")}),s.jsxs("select",{name:"provider",value:i.provider,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"",children:a("adminSettings.selectPaymentProvider")}),s.jsx("option",{value:"valitor",children:a("adminSettings.valitor")}),s.jsx("option",{value:"rapyd",children:a("adminSettings.rapyd")}),s.jsx("option",{value:"stripe",children:a("adminSettings.stripe")}),s.jsx("option",{value:"paypal",children:a("adminSettings.paypal")}),s.jsx("option",{value:"netgiro",children:a("adminSettings.netgiro")}),s.jsx("option",{value:"teya",children:a("adminSettings.teya")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.description")}),s.jsx("textarea",{name:"description",value:i.description,onChange:p,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.environment")}),s.jsxs("select",{name:"environment",value:i.environment,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"sandbox",children:a("adminSettings.sandbox")}),s.jsx("option",{value:"production",children:a("adminSettings.production")})]})]}),i.provider&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:i.provider?`${i.provider.charAt(0).toUpperCase()+i.provider.slice(1)} ${a("adminSettings.configuration")}`:a("adminSettings.configuration")}),s.jsxs("button",{type:"button",onClick:x,disabled:h,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[s.jsx(Cy,{className:"h-4 w-4 mr-2"}),a(h?"adminSettings.testing":"adminSettings.testConnection")]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k().map(y=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[y.label,y.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:y.type==="password"&&!d[y.name]?"password":"text",name:y.name,value:i[y.name]||"",onChange:p,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:y.required,placeholder:a("adminSettings.enterFieldLabel",{fieldLabel:y.label.toLowerCase()})}),y.type==="password"&&s.jsx("button",{type:"button",onClick:()=>w(y.name),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:d[y.name]?s.jsx(Nr,{className:"h-4 w-4"}):s.jsx(Ut,{className:"h-4 w-4"})})]})]},y.name))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("adminSettings.supportedPaymentMethods")}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["card","visa","mastercard","amex","diners","jcb","paypal","apple_pay","google_pay","bank_transfer","sepa","ideal","sofort","giropay","eps","bancontact"].map(y=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:i.supportedMethods.includes(y),onChange:b=>{b.target.checked?o(j=>({...j,supportedMethods:[...j.supportedMethods,y]})):o(j=>({...j,supportedMethods:j.supportedMethods.filter(N=>N!==y)}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 capitalize",children:y.replace("_"," ")})]},y))})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"isEnabled",checked:i.isEnabled,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:a("adminSettings.enabled")})]}),s.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.provider&&s.jsxs("p",{children:[s.jsx("strong",{children:"Provider:"})," ",i.provider.charAt(0).toUpperCase()+i.provider.slice(1)," |",s.jsx("strong",{children:" Environment:"})," ",i.environment]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md transition-colors",children:a("adminSettings.cancel")}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),r!=null&&r.id?a("adminSettings.updateGateway"):a("adminSettings.createGateway")]})]})]})]})]})}):null};j4.propTypes={isOpen:de.bool.isRequired,onClose:de.func.isRequired,gatewayData:de.shape({id:de.string,displayName:de.string,provider:de.string,description:de.string,environment:de.string,isEnabled:de.bool,supportedMethods:de.arrayOf(de.string),merchantId:de.string,apiKey:de.string,secretKey:de.string,webhookSecret:de.string,accessKey:de.string,publishableKey:de.string,clientId:de.string,clientSecret:de.string,applicationId:de.string,paymentGatewayId:de.string,privateKey:de.string,publicKey:de.string,config:de.object}),onSave:de.func.isRequired};const d9=()=>{const{t:e}=pe(),{user:t}=we(y=>y.auth),[r,n]=_.useState(!0),[a,i]=_.useState([]),[o,d]=_.useState(!1),[c,h]=_.useState({});_.useEffect(()=>{m()},[]);const m=_.useCallback(async()=>{n(!0);try{const y=await fetch("/api/payment-gateways",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(y.ok){const b=await y.json();i(b.data.gateways||[])}}catch(y){console.error("Error loading payment gateways:",y),K.error(e("adminSettings.errorLoadingPaymentGateways"))}finally{n(!1)}},[e]),f=async(y,b)=>{try{if((await fetch(`/api/payment-gateways/${y}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:b})})).ok)i(N=>N.map(C=>C.id===y?{...C,isEnabled:b}:C)),K.success(e(b?"adminSettings.paymentGatewayEnabled":"adminSettings.paymentGatewayDisabled"));else throw new Error(e("adminSettings.errorTogglingPaymentGateway"))}catch(j){console.error("Error toggling payment gateway:",j),K.error(e("adminSettings.errorTogglingPaymentGateway"))}},p=async y=>{try{const b=await fetch(`/api/payment-gateways/${y}/test`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok)K.success(e("adminSettings.paymentGatewayTestSuccessful"));else{const j=await b.json();K.error(e("adminSettings.paymentGatewayTestFailed",{message:j.message||"Unknown error"}))}}catch(b){console.error("Error testing payment gateway:",b),K.error(e("adminSettings.errorTestingPaymentGateway"))}},w=y=>{h(y),d(!0)},x=async y=>{try{if((await fetch(`/api/payment-gateways/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(y)})).ok)await m(),K.success(e("adminSettings.paymentGatewayUpdatedSuccessfully"));else throw new Error(e("adminSettings.errorUpdatingPaymentGateway"))}catch(b){throw console.error("Error updating payment gateway:",b),K.error(e("adminSettings.errorUpdatingPaymentGateway")),b}},k=()=>{d(!1),h({})};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(lt,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminSettings.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("adminSettings.noPermissionMessage")})]})})}):r?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(i9,{}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[s.jsx(l9,{}),a.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:a.map(y=>s.jsx(k4,{gateway:y,onToggle:f,onTest:p,onEdit:w},y.id))}):s.jsx(o9,{})]})}),s.jsx(j4,{isOpen:o,onClose:k,gatewayData:c,onSave:x})]})})},c9=()=>{const{t:e}=pe(),t=nt(),{settings:r,isLoading:n,uploadProgress:a}=we(b=>b.receiptSettings),[i,o]=_.useState({companyName:"",companyNameIs:"",companyAddress:"",companyAddressIs:"",companyPhone:"",companyEmail:"",companyWebsite:"",taxId:"",headerColor:"#1e40af",headerGradient:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",useGradient:!1,accentColor:"#3b82f6",fontFamily:"Inter, system-ui, sans-serif",fontSize:"14px",footerText:"",footerTextIs:"",showBarcode:!0,showQrCode:!0,template:"modern",paperSize:"80mm",logoInversion:"none"}),d=[{name:"Blue Gradient",value:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)"},{name:"Purple Gradient",value:"linear-gradient(135deg, #7c3aed 0%, #d946ef 100%)"},{name:"Green Gradient",value:"linear-gradient(135deg, #059669 0%, #10b981 100%)"},{name:"Orange Gradient",value:"linear-gradient(135deg, #ea580c 0%, #f97316 100%)"},{name:"Red Gradient",value:"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)"},{name:"Teal Gradient",value:"linear-gradient(135deg, #0d9488 0%, #14b8a6 100%)"},{name:"Pink Gradient",value:"linear-gradient(135deg, #ec4899 0%, #f43f5e 100%)"},{name:"Indigo Gradient",value:"linear-gradient(135deg, #4f46e5 0%, #6366f1 100%)"}],[c,h]=_.useState(!0),[m,f]=_.useState(!1);_.useEffect(()=>{t(yo())},[t]),_.useEffect(()=>{r&&o({companyName:r.companyName||"",companyNameIs:r.companyNameIs||"",companyAddress:r.companyAddress||"",companyAddressIs:r.companyAddressIs||"",companyPhone:r.companyPhone||"",companyEmail:r.companyEmail||"",companyWebsite:r.companyWebsite||"",taxId:r.taxId||"",headerColor:r.headerColor||"#1e40af",headerGradient:r.headerGradient||"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",useGradient:r.useGradient||!1,accentColor:r.accentColor||"#3b82f6",fontFamily:r.fontFamily||"Inter, system-ui, sans-serif",fontSize:r.fontSize||"14px",footerText:r.footerText||"",footerTextIs:r.footerTextIs||"",showBarcode:r.showBarcode!==void 0?r.showBarcode:!0,showQrCode:r.showQrCode!==void 0?r.showQrCode:!0,template:r.template||"modern",paperSize:r.paperSize||"80mm",logoInversion:r.logoInversion||"none"})},[r]),_.useEffect(()=>{a===100&&(K.success(e("adminSettings.logoUploadedSuccessfully")),setTimeout(()=>{t({type:"receiptSettings/setUploadProgress",payload:0})},1e3))},[a,t,e]);const p=(b,j)=>{o(N=>({...N,[b]:j})),t(lA({field:b,value:j}))},w=b=>{const j=b.target.files[0];if(j){if(j.size>5*1024*1024){K.error(e("adminSettings.fileSizeTooLarge"));return}if(!j.type.startsWith("image/")){K.error(e("adminSettings.invalidFileType"));return}t(Hu(j)).then(N=>{var C;(C=N.payload)!=null&&C.error&&K.error(N.payload.error)}).catch(N=>{K.error(e("adminSettings.logoUploadFailed")),console.error("Upload error:",N)})}},x=async()=>{f(!0);try{await t(Vu(i)).unwrap(),K.success(e("adminSettings.receiptSettingsSaved"))}catch(b){K.error(b||e("adminSettings.failedToSaveSettings"))}finally{f(!1)}},k=()=>{window.confirm(e("adminSettings.confirmDeleteLogo"))&&t(Wu())},y=()=>{const b=i.useGradient?i.headerGradient:i.headerColor,j=r!=null&&r.logoUrl?`${"http://192.168.8.62:5000/api".replace("/api","")}${r.logoUrl}`:null;let N="";return i.logoInversion==="always"?N="filter: invert(1);":i.logoInversion==="theme-aware"&&(N=document.documentElement.classList.contains("dark")?"filter: invert(1);":""),`
      <div class="receipt receipt-${i.template}" style="max-width: ${i.paperSize==="80mm"?"300px":"100%"}; margin: 0 auto; font-family: ${i.fontFamily}; font-size: ${i.fontSize}; background: white; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">
        <div class="header" style="background: ${b}; color: white; text-align: center; padding: 15px;">
          ${j?`<div style="display: flex; justify-content: center; margin-bottom: 10px;"><img src="${j}" alt="${i.companyNameIs||i.companyName}" style="max-height: 48px; ${N}" /></div>`:`<h1 style="font-size: 18px; font-weight: bold; margin: 0 0 5px 0;">${i.companyNameIs||i.companyName}</h1>`}
          ${i.companyAddress?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyAddressIs||i.companyAddress}</div>`:""}
          ${i.companyPhone?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyPhone}</div>`:""}
          ${i.companyEmail?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyEmail}</div>`:""}
        </div>
        
        <div class="content" style="padding: 15px;">
          <div class="order-info" style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e5e7eb;">
            <div style="font-weight: bold; font-size: 16px; color: ${i.accentColor}; margin-bottom: 5px;">Pntun: #12345</div>
            <div style="display: flex; justify-content: space-between; font-size: 12px; color: #6b7280;">
              <span>Dagsetning: ${new Date().toLocaleDateString()}</span>
              <span>Staa: CONFIRMED</span>
            </div>
          </div>

          <div class="items" style="margin-bottom: 15px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Vn - Rauvn</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 2  2,500 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">5,000 ISK</div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Bjr - Pilsner</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 1  800 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">800 ISK</div>
            </div>
          </div>

          <div class="totals" style="border-top: 2px solid ${i.accentColor}; padding-top: 10px; margin-top: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Vrur:</span>
              <span>5,800 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Sending:</span>
              <span>500 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 16px; color: ${i.headerColor}; border-top: 1px solid #e5e7eb; padding-top: 8px; margin-top: 8px;">
              <span>Heildarupph:</span>
              <span>6,300 ISK</span>
            </div>
          </div>
        </div>

        <div class="footer" style="text-align: center; padding: 15px; background: #f9fafb; font-size: 11px; color: #6b7280;">
          ${i.footerTextIs||i.footerText||"Takk fyrir viskiptin!"}
        </div>
      </div>
    `};return n&&!r?s.jsx(Ne,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(qt,{className:"w-8 h-8 animate-spin text-blue-600"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.receiptSettings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.receiptSettingsDescription")})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(es,{className:"w-5 h-5 mr-2"}),e("adminSettings.companyInformation")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.companyNameEnglish")}),s.jsx("input",{type:"text",value:i.companyName,onChange:b=>p("companyName",b.target.value),className:"input w-full",placeholder:"lfng"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.companyNameIcelandic")}),s.jsx("input",{type:"text",value:i.companyNameIs,onChange:b=>p("companyNameIs",b.target.value),className:"input w-full",placeholder:"lfng"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.addressEnglish")}),s.jsx("input",{type:"text",value:i.companyAddress,onChange:b=>p("companyAddress",b.target.value),className:"input w-full",placeholder:"Reykjavk, Iceland"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.addressIcelandic")}),s.jsx("input",{type:"text",value:i.companyAddressIs,onChange:b=>p("companyAddressIs",b.target.value),className:"input w-full",placeholder:"Reykjavk, sland"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.phone")}),s.jsx("input",{type:"tel",value:i.companyPhone,onChange:b=>p("companyPhone",b.target.value),className:"input w-full",placeholder:"+354 555 1234"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.email")}),s.jsx("input",{type:"email",value:i.companyEmail,onChange:b=>p("companyEmail",b.target.value),className:"input w-full",placeholder:"info@olfong.is"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.website")}),s.jsx("input",{type:"url",value:i.companyWebsite,onChange:b=>p("companyWebsite",b.target.value),className:"input w-full",placeholder:"www.olfong.is"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.taxId")}),s.jsx("input",{type:"text",value:i.taxId,onChange:b=>p("taxId",b.target.value),className:"input w-full",placeholder:"1234567890"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(rr,{className:"w-5 h-5 mr-2"}),e("adminSettings.logo")]}),s.jsxs("div",{className:"space-y-4",children:[r!=null&&r.logoUrl?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-32 h-32 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 p-2 flex items-center justify-center",children:s.jsx("img",{src:`${"http://192.168.8.62:5000/api".replace("/api","")}${r.logoUrl}`,alt:"Company Logo",className:"max-w-full max-h-full object-contain"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.currentLogo")}),s.jsxs("button",{onClick:k,className:"text-red-600 hover:text-red-800 text-sm flex items-center mt-1",children:[s.jsx(ar,{className:"w-4 h-4 mr-1"}),e("adminSettings.remove")]})]})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx(rr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:e("adminSettings.noLogoUploaded")}),s.jsx("p",{className:"text-sm text-gray-500",children:e("adminSettings.uploadLogoDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.uploadLogo")}),s.jsx("input",{type:"file",accept:"image/*",onChange:w,className:"input w-full"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e("adminSettings.uploadLogoFormats")})]}),a>0&&a<100&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${a}%`}})}),(r==null?void 0:r.logoUrl)&&s.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.logoColorMode")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"logoInversion",value:"none",checked:i.logoInversion==="none",onChange:b=>p("logoInversion",b.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.logoNoInversion")})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"logoInversion",value:"theme-aware",checked:i.logoInversion==="theme-aware",onChange:b=>p("logoInversion",b.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.logoThemeAware")})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"logoInversion",value:"always",checked:i.logoInversion==="always",onChange:b=>p("logoInversion",b.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.logoAlwaysInvert")})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(WM,{className:"w-5 h-5 mr-2"}),e("adminSettings.designColors")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.headerColor")}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",checked:!i.useGradient,onChange:()=>p("useGradient",!1),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.solidColor")})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",checked:i.useGradient,onChange:()=>p("useGradient",!0),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.gradientColor")})]})]}),!i.useGradient&&s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("input",{type:"color",value:i.headerColor,onChange:b=>p("headerColor",b.target.value),className:"w-12 h-10 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:i.headerColor,onChange:b=>p("headerColor",b.target.value),className:"input flex-1"})]}),i.useGradient&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:d.map(b=>s.jsx("button",{onClick:()=>p("headerGradient",b.value),className:`p-3 rounded-lg border-2 transition-all ${i.headerGradient===b.value?"border-blue-500":"border-gray-300 dark:border-gray-600"}`,style:{background:b.value,minHeight:"60px"},title:b.name},b.value))}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.customGradient")}),s.jsx("textarea",{value:i.headerGradient,onChange:b=>p("headerGradient",b.target.value),className:"input w-full h-20 resize-none font-mono text-xs",placeholder:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e("adminSettings.gradientHelpText")})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.accentColor")}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:i.accentColor,onChange:b=>p("accentColor",b.target.value),className:"w-12 h-10 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:i.accentColor,onChange:b=>p("accentColor",b.target.value),className:"input flex-1"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.fontFamily")}),s.jsxs("select",{value:i.fontFamily,onChange:b=>p("fontFamily",b.target.value),className:"input w-full",children:[s.jsx("option",{value:"Inter, system-ui, sans-serif",children:"Inter"}),s.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),s.jsx("option",{value:"Helvetica, sans-serif",children:"Helvetica"}),s.jsx("option",{value:"Georgia, serif",children:"Georgia"}),s.jsx("option",{value:"Times New Roman, serif",children:"Times New Roman"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.fontSize")}),s.jsxs("select",{value:i.fontSize,onChange:b=>p("fontSize",b.target.value),className:"input w-full",children:[s.jsx("option",{value:"12px",children:"12px"}),s.jsx("option",{value:"14px",children:"14px"}),s.jsx("option",{value:"16px",children:"16px"}),s.jsx("option",{value:"18px",children:"18px"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(QM,{className:"w-5 h-5 mr-2"}),e("adminSettings.templateLayout")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.templateStyle")}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["modern","classic","minimal"].map(b=>s.jsx("button",{onClick:()=>p("template",b),className:`p-3 rounded-lg border text-sm font-medium capitalize ${i.template===b?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:b},b))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.paperSize")}),s.jsxs("select",{value:i.paperSize,onChange:b=>p("paperSize",b.target.value),className:"input w-full",children:[s.jsx("option",{value:"80mm",children:"80mm (Thermal)"}),s.jsx("option",{value:"A4",children:"A4"}),s.jsx("option",{value:"letter",children:"Letter"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showBarcode",checked:i.showBarcode,onChange:b=>p("showBarcode",b.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"showBarcode",className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.showBarcode")})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showQrCode",checked:i.showQrCode,onChange:b=>p("showQrCode",b.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"showQrCode",className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.showQRCode")})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminSettings.footerMessages")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.footerTextEnglish")}),s.jsx("textarea",{value:i.footerText,onChange:b=>p("footerText",b.target.value),className:"input w-full h-20 resize-none",placeholder:e("adminSettings.footerTextEnPlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.footerTextIcelandic")}),s.jsx("textarea",{value:i.footerTextIs,onChange:b=>p("footerTextIs",b.target.value),className:"input w-full h-20 resize-none",placeholder:e("adminSettings.footerTextIsPlaceholder")})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:x,disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:m?s.jsxs(s.Fragment,{children:[s.jsx(qt,{className:"w-4 h-4 mr-2 animate-spin"}),e("adminSettings.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(_r,{className:"w-4 h-4 mr-2"}),e("adminSettings.saveSettings")]})})})]}),s.jsx("div",{className:"lg:sticky lg:top-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Ut,{className:"w-5 h-5 mr-2"}),e("adminSettings.livePreview")]}),s.jsxs("button",{onClick:()=>h(!c),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(Ny,{className:"w-4 h-4 mr-1"}),e(c?"adminSettings.screenView":"adminSettings.printView")]})]}),s.jsx("div",{className:`border rounded-lg p-4 ${c?"bg-gray-50":"bg-white"} flex items-center justify-center min-h-96`,children:s.jsx("div",{dangerouslySetInnerHTML:{__html:y()},className:c?"transform scale-90 origin-center":""})})]})})]})})})]})})},u9=()=>{const e=nt(),{settings:t,isLoading:r,testResult:n,isTesting:a}=we(x=>x.smtpSettings),[i,o]=_.useState({host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"lfng",fromNameIs:"lfng",isEnabled:!1}),[d,c]=_.useState(!1),[h,m]=_.useState(!1);_.useEffect(()=>{e(md())},[e]),_.useEffect(()=>{t&&o({host:t.host||"",port:t.port||587,secure:t.secure||!1,username:t.username||"",password:"",fromEmail:t.fromEmail||"",fromName:t.fromName||"lfng",fromNameIs:t.fromNameIs||"lfng",isEnabled:t.isEnabled||!1})},[t]);const f=(x,k)=>{o(y=>({...y,[x]:k})),e(w4({field:x,value:k}))},p=async()=>{m(!0);try{await e(gd(i)).unwrap(),K.success("SMTP settings saved successfully!")}catch(x){K.error(x||"Failed to save settings")}finally{m(!1)}},w=async()=>{if(!i.host||!i.username||!i.password||!i.fromEmail){K.error("Please fill in all required fields before testing");return}try{await e(fd(i)).unwrap(),n!=null&&n.success&&K.success("SMTP test successful!")}catch(x){K.error(x||"SMTP test failed")}};return r&&!t?s.jsx(Ne,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(qt,{className:"w-8 h-8 animate-spin text-blue-600"})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email Settings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure SMTP settings for sending receipt emails"})]})}),n&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center ${n.success?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300"}`,children:[n.success?s.jsx(yt,{className:"w-5 h-5 mr-3 flex-shrink-0"}):s.jsx(gt,{className:"w-5 h-5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:n.message}),n.details&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Host:"})," ",n.details.host]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Port:"})," ",n.details.port]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Secure:"})," ",n.details.secure?"Yes":"No"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Username:"})," ",n.details.username]}),s.jsxs("p",{children:[s.jsx("strong",{children:"From Email:"})," ",n.details.fromEmail]})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Op,{className:"w-5 h-5 mr-2"}),"SMTP Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SMTP Host *"}),s.jsx("input",{type:"text",value:i.host,onChange:x=>f("host",x.target.value),className:"input w-full",placeholder:"smtp.gmail.com",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port *"}),s.jsx("input",{type:"number",value:i.port,onChange:x=>f("port",parseInt(x.target.value)),className:"input w-full",placeholder:"587",min:"1",max:"65535",required:!0})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"secure",checked:i.secure,onChange:x=>f("secure",x.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"secure",className:"text-sm text-gray-700 dark:text-gray-300",children:"Use TLS/SSL (recommended for port 587/465)"})]})})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(zd,{className:"w-5 h-5 mr-2"}),"Authentication"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Hr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",value:i.username,onChange:x=>f("username",x.target.value),className:"input pl-10 w-full",placeholder:"your-email@gmail.com",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ap,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:d?"text":"password",value:i.password,onChange:x=>f("password",x.target.value),className:"input pl-10 pr-10 w-full",placeholder:"Your app password",required:!0}),s.jsx("button",{type:"button",onClick:()=>c(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?s.jsx(Nr,{className:"w-4 h-4"}):s.jsx(Ut,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Yr,{className:"w-5 h-5 mr-2"}),"Sender Information"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Email Address *"}),s.jsx("input",{type:"email",value:i.fromEmail,onChange:x=>f("fromEmail",x.target.value),className:"input w-full",placeholder:"noreply@olfong.is",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (English)"}),s.jsx("input",{type:"text",value:i.fromName,onChange:x=>f("fromName",x.target.value),className:"input w-full",placeholder:"lfng"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (Icelandic)"}),s.jsx("input",{type:"text",value:i.fromNameIs,onChange:x=>f("fromNameIs",x.target.value),className:"input w-full",placeholder:"lfng"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isEnabled",checked:i.isEnabled,onChange:x=>f("isEnabled",x.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"isEnabled",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable email sending"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, receipt emails will be sent to customers"})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:w,disabled:a||!i.host||!i.username||!i.password||!i.fromEmail,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center",children:a?s.jsxs(s.Fragment,{children:[s.jsx(qt,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Cy,{className:"w-4 h-4 mr-2"}),"Test Connection"]})}),s.jsx("button",{onClick:p,disabled:h,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:h?s.jsxs(s.Fragment,{children:[s.jsx(qt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(_r,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})]})}),s.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-3",children:"Common SMTP Settings"}),s.jsxs("div",{className:"space-y-3 text-sm text-blue-800 dark:text-blue-200",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Gmail:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp.gmail.com"}),s.jsx("li",{children:" Port: 587 (TLS) or 465 (SSL)"}),s.jsx("li",{children:" Username: your-email@gmail.com"}),s.jsx("li",{children:" Password: Use App Password (not your regular password)"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Outlook/Hotmail:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp-mail.outlook.com"}),s.jsx("li",{children:" Port: 587"}),s.jsx("li",{children:" Username: your-email@outlook.com"}),s.jsx("li",{children:" Password: Your regular password"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Yahoo:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp.mail.yahoo.com"}),s.jsx("li",{children:" Port: 587 or 465"}),s.jsx("li",{children:" Username: your-email@yahoo.com"}),s.jsx("li",{children:" Password: Use App Password"})]})]})]})]})]})})},h9=()=>{const{t:e,isLoading:t}=pe(),r=nt(),{banners:n,isLoading:a,error:i}=we(I=>I.banners),{categories:o}=we(I=>I.categories),{products:d}=we(I=>I.products),[c,h]=_.useState(!1),[m,f]=_.useState(!1),[p,w]=_.useState(null),[x,k]=_.useState(!1),[y,b]=_.useState({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null,isHero:!1,backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:"",backgroundOpacity:1,marqueeText:"",marqueeTextIs:"",marqueeSpeed:50,marqueeCount:3,heroLogoUrl:"",heroButtonText:"",heroButtonTextIs:"",heroButtonLink:"",heroSubtitle:"",heroSubtitleIs:"",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0});_.useEffect(()=>{r(Gl({includeInactive:!0})),r(fi()),r(cn())},[r]),_.useEffect(()=>{const I=W=>{x&&!W.target.closest(".link-dropdown-container")&&k(!1)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[x]);const j=async I=>{I.preventDefault();try{p?await r(th({id:p.id,...y})):await r(eh(y)),h(!1),w(null),b({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0})}catch(W){console.error("Error saving banner:",W)}},N=I=>{w(I),b({title:I.title||"",titleIs:I.titleIs||"",description:I.description||"",descriptionIs:I.descriptionIs||"",imageUrl:I.imageUrl||"",alt:I.alt||"",link:I.link||"",sortOrder:I.sortOrder||0,isFeatured:I.isFeatured||!1,featuredOrder:I.featuredOrder||null,isHero:I.isHero||!1,backgroundType:I.backgroundType||"gradient",gradientStartColor:I.gradientStartColor||"#374151",gradientEndColor:I.gradientEndColor||"#111827",gradientDirection:I.gradientDirection||"to-r",backgroundImageUrl:I.backgroundImageUrl||"",backgroundOpacity:I.backgroundOpacity!==void 0?I.backgroundOpacity:1,marqueeText:I.marqueeText||"",marqueeTextIs:I.marqueeTextIs||"",marqueeSpeed:I.marqueeSpeed||50,marqueeCount:I.marqueeCount||3,heroLogoUrl:I.heroLogoUrl||"",heroButtonText:I.heroButtonText||"",heroButtonTextIs:I.heroButtonTextIs||"",heroButtonLink:I.heroButtonLink||"",heroSubtitle:I.heroSubtitle||"",heroSubtitleIs:I.heroSubtitleIs||"",textColor:I.textColor||"#ffffff",buttonBgColor:I.buttonBgColor||"#ffffff",buttonTextColor:I.buttonTextColor||"#1f2937",overlayOpacity:I.overlayOpacity!==void 0?I.overlayOpacity:0}),h(!0)},C=async I=>{window.confirm(e("admin.banners.confirmDelete"))&&await r(rh(I))},P=async I=>{await r(sh(I))},E=async I=>{if(I.isFeatured)await r(Xl(I.id));else{const X=n.filter(D=>D.isFeatured).map(D=>D.featuredOrder).filter(Boolean);let B=1;for(;X.includes(B);)B++;await r(Jl({id:I.id,featuredOrder:B}))}},T=I=>{I&&I.url&&b({...y,imageUrl:I.url}),f(!1)},O=()=>{h(!1),w(null),b({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null,isHero:!1,backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:"",backgroundOpacity:1,marqueeText:"",marqueeTextIs:"",marqueeSpeed:50,marqueeCount:3,heroLogoUrl:"",heroButtonText:"",heroButtonTextIs:"",heroButtonLink:"",heroSubtitle:"",heroSubtitleIs:"",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0})};return a||t?s.jsx(Ne,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(it,{size:"large"})})}):s.jsxs(Ne,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(Tr,{icon:rr,title:e("admin.banners.title"),description:e("admin.banners.subtitle"),actions:s.jsxs("button",{onClick:()=>h(!0),className:"btn btn-primary flex items-center gap-2",children:[s.jsx(vr,{className:"w-4 h-4"}),e("admin.banners.addBanner")]})}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(I=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[s.jsxs("div",{className:"relative h-48 bg-gray-100 dark:bg-gray-700",children:[I.imageUrl?s.jsx("img",{src:I.imageUrl,alt:I.alt||"Banner",className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(rr,{className:"w-12 h-12 text-gray-400"})}),s.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[I.isFeatured&&s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[e("admin.banners.featured")," #",I.featuredOrder]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:I.isActive?e("common.active"):e("common.inactive")})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:I.titleIs||I.title||e("admin.banners.untitled")}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:I.descriptionIs||I.description||e("admin.banners.noDescription")}),I.link&&s.jsxs("div",{className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 mb-3",children:[s.jsx(Lp,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:I.link})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N(I),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:e("common.edit"),children:s.jsx(pn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>E(I),className:`p-2 transition-colors ${I.isFeatured?"text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"}`,title:I.isFeatured?e("admin.banners.removeFromFeatured"):e("admin.banners.addToFeatured"),children:s.jsx(Ut,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>P(I.id),className:`p-2 transition-colors ${I.isActive?"text-gray-400 hover:text-orange-600 dark:hover:text-orange-400":"text-gray-400 hover:text-green-600 dark:hover:text-green-400"}`,title:I.isActive?e("admin.banners.deactivate"):e("admin.banners.activate"),children:I.isActive?s.jsx(Nr,{className:"w-4 h-4"}):s.jsx(Ut,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(I.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:e("common.delete"),children:s.jsx(ar,{className:"w-4 h-4"})})]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",I.sortOrder]})]})]})]},I.id))}),n.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(rr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("admin.banners.noBanners")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("admin.banners.noBannersDescription")}),s.jsx("button",{onClick:()=>h(!0),className:"btn btn-primary",children:e("admin.banners.addFirstBanner")})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e(p?"admin.banners.editBanner":"admin.banners.addBanner")}),s.jsx("button",{onClick:O,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.titleEn")}),s.jsx("input",{type:"text",value:y.title,onChange:I=>b({...y,title:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.titlePlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.titleIs")}),s.jsx("input",{type:"text",value:y.titleIs,onChange:I=>b({...y,titleIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.titlePlaceholderIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.descriptionEn")}),s.jsx("textarea",{value:y.description,onChange:I=>b({...y,description:I.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.descriptionPlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.descriptionIs")}),s.jsx("textarea",{value:y.descriptionIs,onChange:I=>b({...y,descriptionIs:I.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.descriptionPlaceholderIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("admin.banners.imageUrl")," *"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:e("admin.banners.imageHelpText")}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"url",value:y.imageUrl,onChange:I=>b({...y,imageUrl:I.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders.enterImageUrl"),required:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>f(!0),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(Ma,{className:"w-4 h-4"}),s.jsx("span",{children:e("adminMedia.select")})]}),s.jsxs("button",{type:"button",onClick:()=>window.open("/admin/media?collection=BANNERS","_blank"),className:"px-3 py-2 border border-blue-300 dark:border-blue-600 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(rr,{className:"w-4 h-4"}),s.jsx("span",{children:e("admin.banners.manageImages")})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.altText")}),s.jsx("input",{type:"text",value:y.alt,onChange:I=>b({...y,alt:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.altPlaceholder")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"link-dropdown-container",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.link")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"url",value:y.link,onChange:I=>b({...y,link:I.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders.enterWebsiteUrl")}),s.jsx("button",{type:"button",onClick:()=>k(!x),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:e("admin.banners.selectLink"),children:s.jsx(I_,{className:"w-4 h-4"})})]}),x&&s.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[o.map(I=>s.jsxs("div",{children:[s.jsx("button",{type:"button",onClick:()=>{b({...y,link:`/products?category=${I.name.toUpperCase()}`}),k(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Of,{className:"w-4 h-4"}),s.jsxs("span",{children:[I.nameIs||I.name," (",e("admin.banners.category"),")"]})]})}),I.subcategories&&I.subcategories.map(W=>s.jsx("button",{type:"button",onClick:()=>{b({...y,link:`/products?category=${I.name.toUpperCase()}&subcategory=${W.name.toUpperCase()}`}),k(!1)},className:"w-full px-6 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Of,{className:"w-3 h-3"}),s.jsxs("span",{children:[W.nameIs||W.name," (",e("admin.banners.subcategory"),")"]})]})},W.id))]},I.id)),d.slice(0,20).map(I=>s.jsx("button",{type:"button",onClick:()=>{b({...y,link:`/products/${I.id}`}),k(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Of,{className:"w-4 h-4"}),s.jsxs("span",{children:[I.nameIs||I.name," (",e("admin.banners.product"),")"]})]})},I.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.sortOrder")}),s.jsx("input",{type:"number",value:y.sortOrder,onChange:I=>b({...y,sortOrder:parseInt(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:y.isFeatured,onChange:I=>b({...y,isFeatured:I.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("admin.banners.featuredBanner")})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("admin.banners.featuredBannerHelp")})]}),y.isFeatured&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.featuredOrder")}),s.jsxs("select",{value:y.featuredOrder||"",onChange:I=>b({...y,featuredOrder:I.target.value?parseInt(I.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:e("admin.banners.selectPosition")}),s.jsxs("option",{value:"1",children:[e("admin.banners.position")," 1"]}),s.jsxs("option",{value:"2",children:[e("admin.banners.position")," 2"]}),s.jsxs("option",{value:"3",children:[e("admin.banners.position")," 3"]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4 mt-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:y.isHero,onChange:I=>b({...y,isHero:I.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Hero Banner (Homepage)"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use this banner as the hero section on the homepage"})]}),y.isHero&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Background Type"}),s.jsxs("select",{value:y.backgroundType,onChange:I=>b({...y,backgroundType:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"gradient",children:"Color Gradient"}),s.jsx("option",{value:"image",children:"Background Image"}),s.jsx("option",{value:"marquee",children:"Marquee Background"})]})]}),y.backgroundType==="gradient"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Color"}),s.jsx("input",{type:"color",value:y.gradientStartColor,onChange:I=>b({...y,gradientStartColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Color"}),s.jsx("input",{type:"color",value:y.gradientEndColor,onChange:I=>b({...y,gradientEndColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direction"}),s.jsxs("select",{value:y.gradientDirection,onChange:I=>b({...y,gradientDirection:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"to-r",children:"Left to Right"}),s.jsx("option",{value:"to-l",children:"Right to Left"}),s.jsx("option",{value:"to-t",children:"Bottom to Top"}),s.jsx("option",{value:"to-b",children:"Top to Bottom"}),s.jsx("option",{value:"to-br",children:"Top-Left to Bottom-Right"}),s.jsx("option",{value:"to-bl",children:"Top-Right to Bottom-Left"}),s.jsx("option",{value:"to-tr",children:"Bottom-Left to Top-Right"}),s.jsx("option",{value:"to-tl",children:"Bottom-Right to Top-Left"})]})]})]}),y.backgroundType==="image"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Background Image URL"}),s.jsx("input",{type:"url",value:y.backgroundImageUrl,onChange:I=>b({...y,backgroundImageUrl:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter background image URL"})]}),y.backgroundType==="marquee"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Marquee Text (English)"}),s.jsx("input",{type:"text",value:y.marqueeText,onChange:I=>b({...y,marqueeText:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter scrolling text"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Marquee Text (Icelandic)"}),s.jsx("input",{type:"text",value:y.marqueeTextIs,onChange:I=>b({...y,marqueeTextIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Slu inn rllunartext"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Speed (px/sec)"}),s.jsx("input",{type:"number",value:y.marqueeSpeed,onChange:I=>b({...y,marqueeSpeed:parseInt(I.target.value)||50}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"10",max:"200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Repeat Count"}),s.jsx("input",{type:"number",value:y.marqueeCount,onChange:I=>b({...y,marqueeCount:parseInt(I.target.value)||3}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"1",max:"10"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Subtitle (English)"}),s.jsx("input",{type:"text",value:y.heroSubtitle,onChange:I=>b({...y,heroSubtitle:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter hero subtitle"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Subtitle (Icelandic)"}),s.jsx("input",{type:"text",value:y.heroSubtitleIs,onChange:I=>b({...y,heroSubtitleIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Slu inn undirtitil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Logo URL"}),s.jsx("input",{type:"url",value:y.heroLogoUrl,onChange:I=>b({...y,heroLogoUrl:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter logo URL (leave empty for default)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text (EN)"}),s.jsx("input",{type:"text",value:y.heroButtonText,onChange:I=>b({...y,heroButtonText:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Button text"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text (IS)"}),s.jsx("input",{type:"text",value:y.heroButtonTextIs,onChange:I=>b({...y,heroButtonTextIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Texti  hnapp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Link"}),s.jsx("input",{type:"text",value:y.heroButtonLink,onChange:I=>b({...y,heroButtonLink:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"/products"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Text Color"}),s.jsx("input",{type:"color",value:y.textColor,onChange:I=>b({...y,textColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Background"}),s.jsx("input",{type:"color",value:y.buttonBgColor,onChange:I=>b({...y,buttonBgColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text Color"}),s.jsx("input",{type:"color",value:y.buttonTextColor,onChange:I=>b({...y,buttonTextColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Overlay Opacity (",y.overlayOpacity,")"]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:y.overlayOpacity,onChange:I=>b({...y,overlayOpacity:parseFloat(I.target.value)}),className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Adds a dark overlay to improve text readability"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:O,className:"btn btn-outline",children:e("common.cancel")}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",children:[s.jsx(_r,{className:"w-4 h-4"}),e(p?"common.update":"common.create")]})]})]})]})})}),s.jsx(zy,{isOpen:m,onClose:()=>f(!1),onSelect:T,collection:"BANNERS",multiple:!1})]})},hh=ye("chat/fetchConversations",async(e={})=>{var r;const t=await he.get("/chat/conversations",{params:e});return((r=t.data)==null?void 0:r.data)||t.data}),o0=ye("chat/fetchMessages",async e=>{var r;const t=await he.get(`/chat/conversations/${e}/messages`);return((r=t.data)==null?void 0:r.data)||t.data}),mh=ye("chat/sendMessage",async({conversationId:e,content:t,messageType:r="TEXT",metadata:n})=>(await he.post(`/chat/conversations/${e}/messages`,{content:t,messageType:r,metadata:n})).data.data),m9=ye("chat/createConversation",async e=>(await he.post("/chat/conversations",e)).data.data),g9=ye("chat/joinConversation",async e=>(await he.post(`/chat/conversations/${e}/join`)).data.data),N4=ye("chat/updateConversationStatus",async({conversationId:e,status:t,priority:r})=>(await he.patch(`/chat/conversations/${e}`,{status:t,priority:r})).data.data),f9=ye("chat/fetchUnreadCount",async()=>(await he.get("/chat/unread-count")).data.unreadCount),_4=ye("chat/markMessagesAsRead",async e=>(await he.post(`/chat/conversations/${e}/messages/read`)).data),S4=Wr({name:"chat",initialState:{conversations:[],currentConversation:null,messages:[],unreadCount:0,isLoading:!1,isTyping:!1,otherUserTyping:!1,error:null,isWidgetOpen:!1,isWidgetMinimized:!1,filters:{status:"ACTIVE",type:"",priority:""},pagination:{page:1,limit:20,total:0,pages:0}},reducers:{toggleWidget:e=>{e.isWidgetOpen=!e.isWidgetOpen,e.isWidgetOpen&&(e.isWidgetMinimized=!1)},minimizeWidget:e=>{e.isWidgetMinimized=!e.isWidgetMinimized},closeWidget:e=>{e.isWidgetOpen=!1,e.isWidgetMinimized=!1},setCurrentConversation:(e,t)=>{e.currentConversation=t.payload,e.messages=[]},addMessage:(e,t)=>{e.messages.push(t.payload)},updateMessage:(e,t)=>{const{messageId:r,updates:n}=t.payload,a=e.messages.findIndex(i=>i.id===r);a!==-1&&(e.messages[a]={...e.messages[a],...n})},markMessageAsRead:(e,t)=>{const r=t.payload,n=e.messages.find(a=>a.id===r);n&&(n.isRead=!0,n.readAt=new Date().toISOString())},markAllMessagesAsRead:(e,t)=>{const r=t.payload;e.messages.forEach(n=>{n.conversationId===r&&(n.isRead=!0,n.readAt=new Date().toISOString())})},setTyping:(e,t)=>{e.isTyping=t.payload},setOtherUserTyping:(e,t)=>{e.otherUserTyping=t.payload},handleNewMessage:(e,t)=>{var i;const{message:r,conversationId:n}=t.payload;((i=e.currentConversation)==null?void 0:i.id)===n&&e.messages.push(r);const a=e.conversations.findIndex(o=>o.id===n);a!==-1&&(e.conversations[a].lastMessageAt=r.createdAt,e.conversations[a].messages=[r]),r.senderId!==t.payload.currentUserId&&(e.unreadCount+=1)},handleConversationUpdate:(e,t)=>{var a;const r=t.payload,n=e.conversations.findIndex(i=>i.id===r.id);n!==-1&&(e.conversations[n]=r),((a=e.currentConversation)==null?void 0:a.id)===r.id&&(e.currentConversation=r)},handleUserTyping:(e,t)=>{const{userId:r,isTyping:n,currentUserId:a}=t.payload;r!==a&&(e.otherUserTyping=n)},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload},e.pagination.page=1},clearFilters:e=>{e.filters={status:"ACTIVE",type:"",priority:""},e.pagination.page=1},setPage:(e,t)=>{e.pagination.page=t.payload},clearError:e=>{e.error=null},resetChat:e=>{e.conversations=[],e.currentConversation=null,e.messages=[],e.unreadCount=0,e.isWidgetOpen=!1,e.isWidgetMinimized=!1,e.error=null}},extraReducers:e=>{e.addCase(hh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(hh.fulfilled,(t,r)=>{t.isLoading=!1,t.conversations=r.payload.conversations,t.pagination=r.payload.pagination}).addCase(hh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(o0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(o0.fulfilled,(t,r)=>{t.isLoading=!1,t.messages=r.payload.messages}).addCase(o0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(mh.pending,t=>{t.error=null}).addCase(mh.fulfilled,(t,r)=>{t.messages.push(r.payload)}).addCase(mh.rejected,(t,r)=>{t.error=r.error.message}).addCase(m9.fulfilled,(t,r)=>{t.conversations.unshift(r.payload),t.currentConversation=r.payload,t.messages=[]}).addCase(g9.fulfilled,(t,r)=>{const n=r.payload,a=t.conversations.findIndex(i=>i.id===n.id);a!==-1&&(t.conversations[a]=n)}).addCase(N4.fulfilled,(t,r)=>{var i;const n=r.payload,a=t.conversations.findIndex(o=>o.id===n.id);a!==-1&&(t.conversations[a]=n),((i=t.currentConversation)==null?void 0:i.id)===n.id&&(t.currentConversation=n)}).addCase(f9.fulfilled,(t,r)=>{t.unreadCount=r.payload}).addCase(_4.fulfilled,(t,r)=>{t.unreadCount=Math.max(0,t.unreadCount-t.messages.filter(n=>!n.isRead).length)})}}),{setCurrentConversation:p9,handleNewMessage:Fj}=S4.actions,x9=S4.reducer,y9=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:n})=>{const{t:a}=pe();return s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:a("adminChat.searchConversations"),value:e,onChange:i=>t(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("select",{value:r,onChange:i=>n(i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:a("adminChat.allStatuses")}),s.jsx("option",{value:"ACTIVE",children:a("adminChat.active")}),s.jsx("option",{value:"ARCHIVED",children:a("adminChat.archived")}),s.jsx("option",{value:"RESOLVED",children:a("adminChat.resolved")})]})})]})})},b9=({conversation:e,isSelected:t,onSelect:r})=>{var c,h,m;const n=f=>{switch(f){case"ACTIVE":return s.jsx(yt,{className:"h-4 w-4 text-green-500"});case"ARCHIVED":return s.jsx(gt,{className:"h-4 w-4 text-gray-500"});case"RESOLVED":return s.jsx(yt,{className:"h-4 w-4 text-blue-500"});default:return s.jsx(Wt,{className:"h-4 w-4 text-gray-400"})}},a=(c=e.participants.find(f=>f.user.role==="CUSTOMER"))==null?void 0:c.user,i=(h=e.messages)==null?void 0:h[0],o=((m=e._count)==null?void 0:m.messages)||0,d=f=>{const p=new Date(f),x=(new Date-p)/(1e3*60*60);return x<1?"Just now":x<24?`${Math.floor(x)}h ago`:x<48?"Yesterday":p.toLocaleDateString()};return s.jsx("div",{onClick:r,className:`p-4 cursor-pointer border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${t?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":""}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx(Hr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(a==null?void 0:a.fullName)||(a==null?void 0:a.username)||"Unknown Customer"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[n(e.status),o>0&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:o})]})]}),i&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:i.content}),s.jsx("div",{className:"flex items-center justify-between mt-2",children:s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(i?i.createdAt:e.createdAt)})})]})]})})},v9=({isLoading:e,selectedConversation:t,onSelectConversation:r,filteredConversations:n})=>{const{t:a}=pe();return e?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(it,{size:"small"})}):n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Sa,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("adminChat.noConversations")})]}):s.jsx("div",{className:"space-y-1",children:n.map(i=>s.jsx(b9,{conversation:i,isSelected:(t==null?void 0:t.id)===i.id,onSelect:()=>r(i)},i.id))})},w9=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:n,conversations:a,isLoading:i,selectedConversation:o,onSelectConversation:d,filteredConversations:c})=>s.jsxs("div",{className:"w-full sm:w-1/3 lg:w-1/4 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex flex-col h-full",children:[s.jsx(y9,{searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:n}),s.jsx(v9,{conversations:a,isLoading:i,selectedConversation:o,onSelectConversation:d,filteredConversations:c})]}),k9=({conversation:e,otherUserTyping:t,onUpdateStatus:r})=>{var i,o;const{t:n}=pe(),a=(i=e.participants.find(d=>d.user.role==="CUSTOMER"))==null?void 0:i.user;return s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>window.history.back(),className:"sm:hidden p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Us,{className:"h-5 w-5"})}),s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx(Hr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(a==null?void 0:a.fullName)||(a==null?void 0:a.username)||n("adminChat.unknownCustomer")}),((o=e.metadata)==null?void 0:o.orderNumber)&&s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[s.jsx(Hl,{className:"h-3 w-3 mr-1"}),n("order.orderNumber"),": ",e.metadata.orderNumber]})}),t&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:n("adminChat.customerTyping")})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("select",{value:e.status,onChange:d=>r(e.id,d.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"ACTIVE",children:n("adminChat.active")}),s.jsx("option",{value:"ARCHIVED",children:n("adminChat.archived")}),s.jsx("option",{value:"RESOLVED",children:n("adminChat.resolved")})]})})]})})},j9=({message:e})=>{const{user:t}=we(a=>a.auth),r=t&&e.senderId===t.id,n=a=>new Date(a).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s.jsx("div",{className:`flex ${r?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${r?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[s.jsx("p",{className:"text-sm",children:e.content}),s.jsx("p",{className:`text-xs mt-1 ${r?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:n(e.createdAt)})]})})},N9=({messages:e,isLoading:t})=>{const{t:r}=pe(),n=_.useRef(null),a=()=>{var i;(i=n.current)==null||i.scrollIntoView({behavior:"smooth"})};return _.useEffect(()=>{a()},[e]),t?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(it,{size:"small"})}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Sa,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r("adminChat.noMessages")})]}):s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"space-y-4",children:[e.map(i=>s.jsx(j9,{message:i},i.id)),s.jsx("div",{ref:n})]})})},_9=({newMessage:e,onSendMessage:t,onTyping:r,onKeyPress:n,isLoading:a,currentConversation:i})=>{const{t:o}=pe();return s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"flex items-end space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s.jsx(qM,{className:"h-5 w-5"})}),s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:e,onChange:r,onKeyPress:n,placeholder:o(i?"chat.typeMessage":"chat.initializing"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:1,disabled:a})}),s.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s.jsx(YM,{className:"h-5 w-5"})}),s.jsx("button",{onClick:t,disabled:!e.trim()||!i||a,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:s.jsx(Sy,{className:"h-5 w-5"})})]})})},S9=({conversation:e})=>{var r;const{t}=pe();return(r=e.metadata)!=null&&r.orderId?s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-blue-50 dark:bg-blue-900/20 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Hl,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t("adminChat.orderDetails")})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:[t("order.orderNumber"),":"]})," ",e.metadata.orderNumber]}),s.jsxs("p",{children:[s.jsxs("strong",{children:[t("chat.topics.topic"),":"]})," ",e.metadata.topic]}),e.metadata.customTopic&&s.jsxs("p",{children:[s.jsxs("strong",{children:[t("chat.customTopic"),":"]})," ",e.metadata.customTopic]})]})]}):null},C9=()=>{const{t:e}=pe();return s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Sa,{className:"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminChat.selectConversation")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat.selectConversationMessage")})]})})},P9=({currentConversation:e,messages:t,newMessage:r,setNewMessage:n,isLoading:a,otherUserTyping:i,onSendMessage:o,onTyping:d,onKeyPress:c,onUpdateStatus:h})=>e?s.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-gray-800 h-full rounded-r-lg",children:[s.jsx(k9,{conversation:e,otherUserTyping:i,onUpdateStatus:h}),s.jsx(S9,{conversation:e}),s.jsx(N9,{messages:t,isLoading:a}),s.jsx(_9,{newMessage:r,setNewMessage:n,onSendMessage:o,onTyping:d,onKeyPress:c,isLoading:a,currentConversation:e})]}):s.jsx(C9,{}),E9=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(T=>T.auth),{conversations:n,currentConversation:a,messages:i,isLoading:o,otherUserTyping:d}=we(T=>T.chat),[c,h]=_.useState(""),[m,f]=_.useState("ACTIVE"),[p,w]=_.useState(""),[x,k]=_.useState(null),y=_.useRef(null);_.useEffect(()=>{if(r&&!["ADMIN","DELIVERY"].includes(r.role)){Qe.error(e("adminChat.accessDeniedMessage"));return}},[r,e]),_.useEffect(()=>{r&&["ADMIN","DELIVERY"].includes(r.role)&&t(hh())},[t,r]),_.useEffect(()=>{if(!r)return;const T=I=>{t(Fj({message:I,currentUserId:r.id}))},O=I=>{t(Fj({message:{...I,isRead:!0,readAt:I.readAt},currentUserId:r.id}))};return dt.on("new-message",T),dt.on("message-read",O),()=>{dt.removeListener("new-message",T),dt.removeListener("message-read",O)}},[t,r]);const b=n.filter(T=>{var W;const O=!c||T.participants.some(X=>{var B,D;return((B=X.user.fullName)==null?void 0:B.toLowerCase().includes(c.toLowerCase()))||((D=X.user.username)==null?void 0:D.toLowerCase().includes(c.toLowerCase()))})||((W=T.messages)==null?void 0:W.some(X=>X.content.toLowerCase().includes(c.toLowerCase()))),I=!m||T.status===m;return O&&I}),j=async T=>{k(T),await t(p9(T)).unwrap();try{await t(_4(T.id)).unwrap()}catch(O){console.warn("Failed to mark messages as read:",O)}},N=async()=>{if(!(!p.trim()||!a))try{await t(mh({conversationId:a.id,content:p.trim(),messageType:"TEXT"})).unwrap(),w(""),a&&dt.emitTypingStop(a.id,r.id)}catch{Qe.error(e("adminChat.sendMessageError"))}},C=T=>{w(T.target.value),a&&dt.emitTypingStart(a.id,r.id),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{a&&dt.emitTypingStop(a.id,r.id)},1e3)},P=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),N())},E=async(T,O)=>{try{await t(N4({conversationId:T,status:O})).unwrap(),Qe.success(e("adminChat.statusUpdated"))}catch{Qe.error(e("adminChat.updateStatusError"))}};return!r||!["ADMIN","DELIVERY"].includes(r.role)?s.jsx(Ne,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e("adminChat.accessDenied")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat.accessDeniedMessage")})]})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"h-[calc(100vh-2rem)] flex flex-col mt-0",children:[s.jsx(Tr,{icon:Sa,title:e("adminChat.title"),description:e("adminChat.subtitle")}),s.jsx("div",{className:"flex-1 flex flex-col h-[calc(100vh-2rem)] bg-white dark:bg-gray-800 border-l border-r border-b border-gray-200 dark:border-gray-700 rounded-b-lg",children:s.jsxs("div",{className:"flex flex-1 overflow-hidden h-full",children:[s.jsx(w9,{searchTerm:c,setSearchTerm:h,statusFilter:m,setStatusFilter:f,conversations:n,isLoading:o,selectedConversation:x,onSelectConversation:j,filteredConversations:b}),s.jsx(P9,{currentConversation:a,messages:i,newMessage:p,setNewMessage:w,isLoading:o,otherUserTyping:d,onSendMessage:N,onTyping:C,onKeyPress:P,onUpdateStatus:E})]})})]})})},I9=()=>{const{t:e}=pe(),[t,r]=_.useState(!1),[n,a]=_.useState(null),i=async()=>{r(!0),a("insert");try{const h=await(await fetch("/api/admin/demo-data/insert",{method:"POST",headers:{"Content-Type":"application/json"}})).json();h.success?Qe.success(e("demoData.insertSuccess")):Qe.error(h.message||e("demoData.insertError"))}catch(c){console.error("Error inserting demo data:",c),Qe.error(e("demoData.insertError"))}finally{r(!1),a(null)}},o=async()=>{r(!0),a("remove");try{const h=await(await fetch("/api/admin/demo-data/remove",{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();h.success?Qe.success(e("demoData.removeSuccess")):Qe.error(h.message||e("demoData.removeError"))}catch(c){console.error("Error removing demo data:",c),Qe.error(e("demoData.removeError"))}finally{r(!1),a(null)}},d=[{type:"customers",count:5,description:e("demoData.customersDescription"),details:["Anna Johnson (anna.johnson@example.com)","Bjrn Andersson (bjorn.andersson@example.com)","Kristn Petersen (kristin.petersen@example.com)","Magns orsteinsson (magnus.thorsteinsson@example.com)","Sara Gumundsdttir (sara.gudmundsdottir@example.com)"]},{type:"addresses",count:5,description:e("demoData.addressesDescription"),details:["Reykjavk addresses for each customer","Default shipping addresses","Various locations around Reykjavk"]},{type:"orders",count:8,description:e("demoData.ordersDescription"),details:["Various order statuses (PENDING, CONFIRMED, PREPARING, etc.)","Different shipping methods (delivery & pickup)","Mixed product types (wine, beer, nicotine, food)","Realistic order amounts and dates"]},{type:"orderItems",count:15,description:e("demoData.orderItemsDescription"),details:["Multiple items per order","Various quantities and prices","Links orders to products correctly"]}];return s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:$d,title:e("demoData.title"),description:e("demoData.description")}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData.overview")}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(c=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:e("demoData.${item","type}")}),s.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-base font-medium px-3 py-1 rounded-lg",children:c.count})]}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 mb-4",children:c.description}),s.jsx("ul",{className:"text-sm text-gray-500 dark:text-gray-500 space-y-2",children:c.details.map((h,m)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-500 mt-1",children:""}),h]},m))})]},c.type))})]})}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Rn,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200",children:e("demoData.warningTitle")}),s.jsx("p",{className:"text-base text-yellow-700 dark:text-yellow-300 mt-2",children:e("demoData.warningMessage")})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData.actions")}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[s.jsxs("button",{onClick:i,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&n==="insert"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsx($d,{className:"h-5 w-5"}),e("demoData.insertButton")]}),s.jsxs("button",{onClick:o,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&n==="remove"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsx(ar,{className:"h-5 w-5"}),e("demoData.removeButton")]})]}),s.jsxs("div",{className:"mt-6 text-base text-gray-600 dark:text-gray-400",children:[s.jsxs("p",{className:"flex items-center gap-3 mb-3",children:[s.jsx(yt,{className:"h-5 w-5 text-green-500"}),e("demoData.insertNote")]}),s.jsxs("p",{className:"flex items-center gap-3",children:[s.jsx(dg,{className:"h-5 w-5 text-red-500"}),e("demoData.removeNote")]})]})]})})]})})},ur="http://192.168.8.62:5000/api";class T9{getAuthHeaders(){const t=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}async getAllTranslations(t=null,r=null){var n;try{if(console.log("TranslationService: getAllTranslations called with language:",t),t){const c=`${ur}/translations/language/${t}`;console.log("TranslationService: Making request to:",c);const h=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("TranslationService: Response status:",h.status),console.log("TranslationService: Response ok:",h.ok),!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const m=await h.json();return console.log("TranslationService: Response data received, success:",m.success),console.log("TranslationService: Response data length:",(n=m.data)==null?void 0:n.length),m}const a=new URLSearchParams;r&&a.append("format",r);const i=`${ur}/translations${a.toString()?`?${a.toString()}`:""}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(a){throw console.error("Error fetching translations:",a),a}}async getTranslationsBySection(t=null){try{const r=new URLSearchParams;t&&r.append("language",t),r.append("format","grouped");const n=`${ur}/translations?${r.toString()}`,a=await fetch(n,{method:"GET",headers:this.getAuthHeaders()});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error fetching translations by section:",r),r}}async searchTranslations(t,r=null,n=null){try{const a=new URLSearchParams;r&&a.append("language",r),n&&a.append("section",n);const i=`${ur}/translations/search/${encodeURIComponent(t)}?${a.toString()}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(a){throw console.error("Error searching translations:",a),a}}async getTranslationStats(){try{const t=`${ur}/translations/stats`,r=await fetch(t,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching translation stats:",t),t}}async getRecentChanges(t=10){try{const r=`${ur}/translations/recent?limit=${t}`,n=await fetch(r,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error fetching recent changes:",r),r}}async getTranslation(t,r){try{const n=`${ur}/translations/${encodeURIComponent(t)}/${r}`,a=await fetch(n,{method:"GET",headers:this.getAuthHeaders()});if(!a.ok){if(a.status===404)return null;throw new Error(`HTTP error! status: ${a.status}`)}return await a.json()}catch(n){throw console.error("Error fetching translation:",n),n}}async createTranslation(t){try{const r=`${ur}/translations`,n=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error creating translation:",r),r}}async upsertTranslation(t){try{const r=`${ur}/translations/upsert`,n=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error upserting translation:",r),r}}async getAllTranslationsMultiLang(){try{const t=`${ur}/translations/all`,r=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching multi-lang translations:",t),t}}async updateTranslation(t,r){try{const n=`${ur}/translations/${t}`,a=await fetch(n,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(r)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(n){throw console.error("Error updating translation:",n),n}}async deleteTranslation(t){try{const r=`${ur}/translations/${t}`,n=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error deleting translation:",r),r}}async bulkUpdateTranslations(t){try{const r=`${ur}/translations/bulk-update`,n=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({updates:t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error bulk updating translations:",r),r}}async bulkDeleteTranslations(t){try{const r=`${ur}/translations/bulk-delete`,n=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders(),body:JSON.stringify({ids:t})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error bulk deleting translations:",r),r}}async exportTranslations(t="json",r=null){try{const n=new URLSearchParams;n.append("format",t),r&&n.append("language",r);const a=`${ur}/translations/export?${n.toString()}`,i=await fetch(a,{method:"GET",headers:this.getAuthHeaders()});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.blob(),d=window.URL.createObjectURL(o),c=document.createElement("a");return c.href=d,c.download=`translations_${r||"all"}_${new Date().toISOString().split("T")[0]}.${t}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d),{success:!0,message:"Export completed successfully"}}catch(n){throw console.error("Error exporting translations:",n),n}}async importTranslations(t,r="json"){try{const n=`${ur}/translations/import`,a=await fetch(n,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({data:t,format:r})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(n){throw console.error("Error importing translations:",n),n}}async loadTranslationsForI18next(t){try{const r=await this.getAllTranslations(t);if(r.success&&r.data){const n=this.transformToNestedObject(r.data);return localStorage.setItem(`translations_${t}`,JSON.stringify(n)),localStorage.setItem(`translations_${t}_timestamp`,Date.now().toString()),n}return console.warn("No translations found in API response"),{}}catch(r){return console.error("Failed to load translations from API:",r),{}}}transformToNestedObject(t){const r={};return t.forEach(n=>{const a=n.key.split(".");let i=r;for(let o=0;o<a.length-1;o++)(!i[a[o]]||typeof i[a[o]]!="object")&&(i[a[o]]={}),i=i[a[o]];i[a[a.length-1]]=n.value}),r}isCacheValid(t,r=24*60*60*1e3){try{const n=localStorage.getItem(`translations_${t}_timestamp`);return n?Date.now()-parseInt(n)<r:!1}catch{return!1}}getCachedTranslations(t){try{const r=localStorage.getItem(`translations_${t}`);return r?JSON.parse(r):null}catch(r){return console.error("Error getting cached translations:",r),null}}clearCache(t=null){try{t?(localStorage.removeItem(`translations_${t}`),localStorage.removeItem(`translations_${t}_timestamp`)):Object.keys(localStorage).forEach(r=>{r.startsWith("translations_")&&localStorage.removeItem(r)})}catch(r){console.error("Error clearing cache:",r)}}async refreshTranslations(t,r){try{this.clearCache(t);const n=await this.loadTranslationsForI18next(t);return r&&n&&(r.addResourceBundle(t,"translation",n,!0,!0),r.reloadResources(t)),n}catch(n){throw console.error("Error refreshing translations:",n),n}}}const Xa=new T9,L9=()=>{const{t:e}=pe(),t=_.useRef(null),[r,n]=_.useState([]),[a,i]=_.useState([]),[o,d]=_.useState(null),[c,h]=_.useState(!0),[m,f]=_.useState(!1),[p,w]=_.useState(""),[x,k]=_.useState(1),[y,b]=_.useState(null),[j,N]=_.useState({key:"",is:"",en:""}),[C,P]=_.useState(!1),[E,T]=_.useState(!0),O=20,I=_.useCallback(async()=>{h(!0);try{const V=await Xa.getAllTranslationsMultiLang();V.success&&(n(V.data.is||[]),i(V.data.en||[]))}catch(V){console.error("Error fetching translations:",V),K.error(e("adminTranslations.errorFetching"))}finally{h(!1)}},[e]),W=_.useCallback(async()=>{f(!0);try{const V=await fetch("/api/translations/stats");if(V.ok){const ae=await V.json();d(ae.data)}}catch(V){console.error("Error fetching stats:",V)}finally{f(!1)}},[]);_.useEffect(()=>{I(),W()},[I,W]);const X=_.useMemo(()=>{const V=new Map;return r.forEach(ae=>{V.set(ae.key,{key:ae.key,is:ae.value,isId:ae.id,en:"",enId:null})}),a.forEach(ae=>{const fe=V.get(ae.key);fe?(fe.en=ae.value,fe.enId=ae.id):V.set(ae.key,{key:ae.key,is:"",isId:null,en:ae.value,enId:ae.id})}),Array.from(V.values()).sort((ae,fe)=>ae.key.localeCompare(fe.key))},[r,a]),B=_.useMemo(()=>{if(!p)return X;const V=p.toLowerCase();return X.filter(ae=>ae.key.toLowerCase().includes(V)||ae.is.toLowerCase().includes(V)||ae.en.toLowerCase().includes(V))},[X,p]),D=_.useMemo(()=>{const V=(x-1)*O;return B.slice(V,V+O)},[B,x]),U=Math.ceil(B.length/O),Z=V=>{b(V.key),N({key:V.key,is:V.is,en:V.en})},G=async()=>{try{const V=[];j.is&&V.push(Xa.upsertTranslation({key:j.key,value:j.is,locale:"is"})),j.en&&V.push(Xa.upsertTranslation({key:j.key,value:j.en,locale:"en"})),await Promise.all(V),K.success(e("adminTranslations.translationUpdated")),b(null),I(),W()}catch(V){console.error("Error saving translation:",V),K.error(e("adminTranslations.errorSaving"))}},F=()=>{b(null),N({key:"",is:"",en:""})},R=async V=>{if(window.confirm(e("adminTranslations.confirmDelete")))try{const ae=[];V.isId&&ae.push(Xa.deleteTranslation(V.isId)),V.enId&&ae.push(Xa.deleteTranslation(V.enId)),await Promise.all(ae),K.success(e("adminTranslations.translationDeleted")),I(),W()}catch(ae){console.error("Error deleting translation:",ae),K.error(e("adminTranslations.errorDeleting"))}},q=async V=>{V.preventDefault();try{const ae=[];j.is&&ae.push(Xa.createTranslation({key:j.key,value:j.is,locale:"is"})),j.en&&ae.push(Xa.createTranslation({key:j.key,value:j.en,locale:"en"})),await Promise.all(ae),K.success(e("adminTranslations.translationAdded")),P(!1),N({key:"",is:"",en:""}),I(),W()}catch(ae){console.error("Error adding translation:",ae),K.error(e("adminTranslations.errorSaving"))}},J=async V=>{try{const ae=await fetch(`/api/translations/export?format=${V}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!ae.ok)throw new Error("Export failed");const fe=await ae.blob(),be=window.URL.createObjectURL(fe),z=document.createElement("a");z.href=be,z.download=`translations.${V}`,document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(be),K.success(e("adminTranslations.exportSuccess"))}catch(ae){console.error("Error exporting:",ae),K.error(e("adminTranslations.exportError"))}},re=async V=>{var fe;const ae=(fe=V.target.files)==null?void 0:fe[0];if(ae){try{const be=await ae.text(),z=ae.name.endsWith(".csv")?"csv":"json",xe=z==="json"?JSON.parse(be):be,Me=await fetch("/api/translations/import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({data:xe,format:z})});if(!Me.ok)throw new Error("Import failed");const ze=await Me.json();K.success(`${e("adminTranslations.importSuccess")} (${ze.data.imported})`),I(),W()}catch(be){console.error("Error importing:",be),K.error(e("adminTranslations.importError"))}t.current&&(t.current.value="")}};return c?s.jsx(Ne,{children:s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(qt,{className:"w-8 h-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-3 text-lg text-gray-700 dark:text-gray-300",children:e("common.loading")})]})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(Tr,{icon:jy,title:e("adminTranslations.title"),description:e("adminTranslations.subtitle"),actions:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("button",{onClick:()=>T(!E),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[s.jsx(Mo,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e(E?"adminTranslations.hideStats":"adminTranslations.showStats")})]}),s.jsxs("button",{onClick:I,className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors",children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.refresh")})]}),s.jsxs("button",{onClick:()=>J("json"),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[s.jsx(OM,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.exportJSON")})]}),s.jsxs("button",{onClick:()=>J("csv"),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[s.jsx(RM,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.exportCSV")})]}),s.jsxs("label",{className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 cursor-pointer transition-colors",children:[s.jsx(Ma,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.import")}),s.jsx("input",{ref:t,type:"file",accept:".json,.csv",onChange:re,className:"hidden"})]}),s.jsxs("button",{onClick:()=>{P(!0),N({key:"",is:"",en:""})},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx(vr,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.addTranslation")})]})]})}),E&&o&&s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Mo,{className:"w-5 h-5 mr-2"}),e("adminTranslations.statistics")]}),m&&s.jsx(qt,{className:"w-5 h-5 animate-spin text-blue-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:e("adminTranslations.totalEntries")}),s.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:o.total})]}),s.jsx(Kh,{className:"w-10 h-10 text-blue-400 dark:text-blue-600"})]})}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:e("adminTranslations.icelandic")}),s.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:o.byLocale.is}),s.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[o.completeness.icelandic,"%"]})]}),s.jsx(yt,{className:"w-10 h-10 text-green-400 dark:text-green-600"})]})}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:e("adminTranslations.english")}),s.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:o.byLocale.en}),s.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:[o.completeness.english,"%"]})]}),s.jsx(yt,{className:"w-10 h-10 text-purple-400 dark:text-purple-600"})]})}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:e("adminTranslations.uniqueKeys")}),s.jsx("p",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:o.uniqueKeys}),s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:[o.completeness.overall,"% ",e("adminTranslations.complete")]})]}),s.jsx(gt,{className:"w-10 h-10 text-amber-400 dark:text-amber-600"})]})})]}),(o.missingTranslations.missingInEnglish>0||o.missingTranslations.missingInIcelandic>0)&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-2",children:e("adminTranslations.missingTranslations")}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[e("adminTranslations.missingInEnglish"),": ",s.jsx("span",{className:"font-bold",children:o.missingTranslations.missingInEnglish})]})}),s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[e("adminTranslations.missingInIcelandic"),": ",s.jsx("span",{className:"font-bold",children:o.missingTranslations.missingInIcelandic})]})})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:e("adminTranslations.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",value:p,onChange:V=>{w(V.target.value),k(1)}})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/4",children:e("adminTranslations.key")}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/3",children:e("adminTranslations.icelandic")}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/3",children:e("adminTranslations.english")}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-24",children:e("adminTranslations.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:D.length>0?D.map(V=>s.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:y===V.key?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"text",value:j.key,disabled:!0,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-600 dark:text-white"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("textarea",{value:j.is,onChange:ae=>N({...j,is:ae.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",rows:2})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("textarea",{value:j.en,onChange:ae=>N({...j,en:ae.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",rows:2})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:G,className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:e("common.save"),children:s.jsx(_r,{className:"w-4 h-4"})}),s.jsx("button",{onClick:F,className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",title:e("common.cancel"),children:s.jsx(ut,{className:"w-4 h-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:V.key}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:V.is||s.jsx("span",{className:"text-red-500 italic",children:e("adminTranslations.missing")})}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:V.en||s.jsx("span",{className:"text-red-500 italic",children:e("adminTranslations.missing")})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Z(V),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:e("common.edit"),children:s.jsx(ZM,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>R(V),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:e("common.delete"),children:s.jsx(ar,{className:"w-4 h-4"})})]})})]})},V.key)):s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:e("adminTranslations.noTranslationsFound")})})})]})}),U>1&&s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:[e("common.showing")," ",(x-1)*O+1," ",e("common.to")," ",Math.min(x*O,B.length)," ",e("common.of")," ",B.length," ",e("common.results")]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>k(V=>Math.max(V-1,1)),disabled:x===1,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e("common.previous")}),s.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300",children:[x," / ",U]}),s.jsx("button",{onClick:()=>k(V=>Math.min(V+1,U)),disabled:x===U,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e("common.next")})]})]})]})}),C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("adminTranslations.addTranslation")}),s.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(ut,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:q,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminTranslations.key")," *"]}),s.jsx("input",{type:"text",value:j.key,onChange:V=>N({...j,key:V.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"e.g., common.greeting"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminTranslations.icelandic")}),s.jsx("textarea",{value:j.is,onChange:V=>N({...j,is:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Icelandic translation"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminTranslations.english")}),s.jsx("textarea",{value:j.en,onChange:V=>N({...j,en:V.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"English translation"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:()=>P(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e("common.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s.jsx("span",{children:e("common.add")})})]})]})]})})]})})},M9=({media:e,selectedItems:t,onSelectItem:r,onEdit:n,onDelete:a,formatFileSize:i,formatDate:o})=>{const{t:d}=pe(),[c,h]=_.useState(new Set),m=p=>t.includes(p.id),f=p=>{h(w=>{const x=new Set(w);return x.delete(p),x})};return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(p=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white flex items-center justify-center relative",children:p.mimeType.startsWith("image/")?s.jsxs(s.Fragment,{children:[c.has(p.id)&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-gray-600",children:s.jsx(Bd,{className:"w-6 h-6 animate-spin text-gray-400"})}),s.jsx("img",{src:p.thumbnailUrl||p.url,alt:p.alt||p.originalName,className:`w-full h-full object-contain transition-opacity duration-300 ${c.has(p.id)?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:()=>f(p.id),onError:()=>f(p.id)})]}):s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(rr,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("span",{className:"text-xs",children:p.mimeType.split("/")[1].toUpperCase()})]})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("input",{type:"checkbox",checked:m(p),onChange:w=>{w.target.checked?r(p.id,!0):r(p.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[s.jsx("button",{onClick:()=>n(p),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-gray-50 dark:hover:bg-gray-600",title:d("adminMedia.edit"),children:s.jsx(pn,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>a(p.id),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600",title:d("adminMedia.delete"),children:s.jsx(ar,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate mb-1",children:p.originalName}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(p.size)}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(p.createdAt)})]})]},p.id))})},A9=({media:e,selectedItems:t,onSelectItem:r,onEdit:n,onDelete:a,formatFileSize:i,formatDate:o})=>{const{t:d}=pe(),c=h=>t.includes(h.id);return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:s.jsx("input",{type:"checkbox",checked:t.length===e.length&&e.length>0,onChange:h=>{h.target.checked?r(e.map(m=>m.id),!0):r([],!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.preview")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.name")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.type")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.size")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.uploaded")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(h=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:c(h),onChange:m=>{m.target.checked?r(h.id,!0):r(h.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center",children:h.mimeType.startsWith("image/")?s.jsx("img",{src:h.thumbnailUrl||h.url,alt:h.alt||h.originalName,className:"w-full h-full object-cover rounded",loading:"lazy"}):s.jsx(rr,{className:"w-6 h-6 text-gray-400"})})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h.originalName}),h.alt&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.alt})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:h.mimeType}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i(h.size)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o(h.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>n(h),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:s.jsx(pn,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>a(h.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(ar,{className:"h-4 w-4"})})]})})]},h.id))})]})})})},O9=({searchQuery:e,onSearchChange:t,viewMode:r,onViewModeChange:n,selectedItems:a,onBulkDelete:i,collections:o,selectedCollection:d,onCollectionChange:c,onUploadClick:h})=>{const{t:m}=pe();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>s.jsxs("button",{onClick:()=>c(f.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d===f.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"mr-2",children:f.icon}),f.name]},f.id))})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(zt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:m("adminMedia.searchMedia"),value:e,onChange:f=>t(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>n("grid"),className:`p-2 rounded-md ${r==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(og,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>n("list"),className:`p-2 rounded-md ${r==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(lg,{className:"h-4 w-4"})}),a.length>0&&s.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx("span",{className:"mr-2",children:""}),m("adminMedia.deleteSelected")," (",a.length,")"]}),s.jsxs("button",{onClick:h,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx(Ma,{className:"h-4 w-4 mr-2"}),m("adminMedia.upload")]})]})]})})]})},R9=({isOpen:e,onClose:t,media:r,onSave:n})=>{const{t:a}=pe(),[i,o]=_.useState({alt:"",caption:"",description:""}),[d,c]=_.useState(!1);_.useEffect(()=>{r&&e&&o({alt:r.alt||"",caption:r.caption||"",description:r.description||""})},[r,e]);const h=async f=>{if(f.preventDefault(),!!r){c(!0);try{const p=await fetch(`/api/media/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)});if(p.ok){const w=await p.json();n(w.data.media),t(),K.success("Media updated successfully")}else throw new Error("Failed to update media")}catch(p){console.error("Update media error:",p),K.error("Failed to update media")}finally{c(!1)}}},m=(f,p)=>{o(w=>({...w,[f]:p}))};return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a("adminMedia.editMedia")}),s.jsx("button",{type:"button",onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(ut,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:r.mimeType.startsWith("image/")?s.jsx("img",{src:r.thumbnailUrl||r.url,alt:r.alt||r.originalName,className:"w-full h-full object-cover rounded-lg"}):s.jsx("div",{className:"text-center text-gray-400",children:s.jsx("span",{className:"text-sm",children:r.mimeType.split("/")[1].toUpperCase()})})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.originalName}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[r.mimeType,"  ",D9(r.size)]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminMedia.altText")}),s.jsx("input",{type:"text",value:i.alt,onChange:f=>m("alt",f.target.value),placeholder:a("adminMedia.altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("adminMedia.altTextDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminMedia.caption")}),s.jsx("input",{type:"text",value:i.caption,onChange:f=>m("caption",f.target.value),placeholder:a("adminMedia.captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("adminMedia.captionDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminMedia.description")}),s.jsx("textarea",{value:i.description,onChange:f=>m("description",f.target.value),placeholder:a("adminMedia.descriptionPlaceholder"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("adminMedia.descriptionDescription")})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:a("adminMedia.cancel")}),s.jsx("button",{type:"submit",disabled:d,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?s.jsxs(s.Fragment,{children:[s.jsx(Bd,{className:"h-4 w-4 mr-2 animate-spin"}),a("adminMedia.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),a("adminMedia.save")]})})]})]})})})},D9=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+r[n]},F9=()=>{const{t:e}=pe(),{user:t}=we(F=>F.auth),[r,n]=_.useState(!0),[a,i]=_.useState([]),[o,d]=_.useState("PRODUCTS"),[c,h]=_.useState("grid"),[m,f]=_.useState(""),[p,w]=_.useState([]),[,x]=_.useState(!1),[k,y]=_.useState(!1),[b,j]=_.useState(null),N=(F,R)=>{Array.isArray(F)?w(F):w(R?q=>[...q,F]:q=>q.filter(J=>J!==F))},C=F=>{d(F),I(R=>({...R,page:1})),w([])},P=F=>{f(F)},E=F=>{h(F)},T=()=>{window.open("/admin/media/upload","_blank")},[O,I]=_.useState({page:1,limit:20,total:0,pages:0}),W=[{id:"PRODUCTS",name:e("adminMedia.products"),icon:""},{id:"CATEGORIES",name:e("adminMedia.categories"),icon:""},{id:"PROFILE",name:e("adminMedia.profile"),icon:""},{id:"DOCUMENTS",name:e("adminMedia.documents"),icon:""},{id:"VIDEOS",name:e("adminMedia.videos"),icon:""}],X=_.useCallback(async()=>{n(!0);try{const F=new URLSearchParams({collection:o,page:O.page,limit:O.limit,...m&&{search:m}}),R=await fetch(`/api/media?${F}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(R.ok){const q=await R.json();i(q.data.media),I(q.data.pagination)}else throw new Error("Failed to load media")}catch(F){console.error("Load media error:",F),K.error("Failed to load media")}finally{n(!1)}},[o,O.page,O.limit,m]);_.useEffect(()=>{X()},[X]);const B=async F=>{if(window.confirm(e("adminMedia.confirmDelete")))try{if((await fetch(`/api/media/${F}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)i(q=>q.filter(J=>J.id!==F)),K.success("Media deleted successfully");else throw new Error("Failed to delete media")}catch(R){console.error("Delete media error:",R),K.error("Failed to delete media")}},D=async()=>{if(p.length!==0&&window.confirm(e("adminMedia","confirmBulkDelete",{count:p.length})))try{const F=await fetch("/api/media/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({ids:p})});if(F.ok){const R=await F.json();K.success(`Deleted ${R.data.deletedCount} of ${p.length} items`),w([]),X()}else throw new Error("Failed to bulk delete media")}catch(F){console.error("Bulk delete error:",F),K.error("Failed to bulk delete media")}},U=F=>{j(F),y(!0)},Z=F=>{if(F===0)return"0 Bytes";const R=1024,q=["Bytes","KB","MB","GB"],J=Math.floor(Math.log(F)/Math.log(R));return parseFloat((F/Math.pow(R,J)).toFixed(2))+" "+q[J]},G=F=>new Date(F).toLocaleDateString();return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(Rn,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(Tr,{icon:ky,title:e("adminNavigation.media"),description:e("adminMedia.manageMediaDescription"),actions:s.jsxs("button",{onClick:()=>window.open("/admin/media/upload","_blank"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ma,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadMedia")]})}),s.jsx(O9,{searchQuery:m,onSearchChange:P,viewMode:c,onViewModeChange:E,selectedItems:p,onBulkDelete:D,collections:W.map(F=>({...F,name:F.name,...o===F.id&&{count:O.total}})),selectedCollection:o,onCollectionChange:C,onUploadClick:T}),r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(it,{size:"large"})}):a.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(rr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia.noMediaFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia.noMediaDescription")}),s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(vr,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadFirstMedia")]})]}):s.jsxs(s.Fragment,{children:[c==="grid"?s.jsx(M9,{media:a,selectedItems:p,onSelectItem:N,onEdit:U,onDelete:B,formatFileSize:Z,formatDate:G}):s.jsx(A9,{media:a,selectedItems:p,onSelectItem:N,onEdit:U,onDelete:B,formatFileSize:Z,formatDate:G}),O.pages>1&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e("adminMedia.showing")," ",(O.page-1)*O.limit+1," ",e("adminMedia.to")," ",Math.min(O.page*O.limit,O.total)," ",e("adminMedia.of")," ",O.total," ",e("adminMedia.results")]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>I(F=>({...F,page:F.page-1})),disabled:O.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia.previous")}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[O.page," / ",O.pages]}),s.jsx("button",{onClick:()=>I(F=>({...F,page:F.page+1})),disabled:O.page===O.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia.next")})]})]})]}),s.jsx(R9,{isOpen:k,onClose:()=>{y(!1),j(null)},media:b,onSave:F=>{i(R=>R.map(q=>q.id===F.id?F:q)),y(!1),j(null)}})]})})},z9=()=>{const{t:e}=pe(),{user:t}=we(G=>G.auth),[r,n]=_.useState("PRODUCTS"),[a,i]=_.useState([]),[o,d]=_.useState(!1),[c,h]=_.useState({}),[m,f]=_.useState({}),[p,w]=_.useState({}),[x,k]=_.useState({}),[y,b]=_.useState({}),j=[{id:"PRODUCTS",name:e("adminMedia.products"),icon:"",accept:"image/*"},{id:"CATEGORIES",name:e("adminMedia.categories"),icon:"",accept:"image/*"},{id:"BANNERS",name:e("adminMedia.banners"),icon:"",accept:"image/*"},{id:"PROFILE",name:e("adminMedia.profile"),icon:"",accept:"image/*"},{id:"DOCUMENTS",name:e("adminMedia.documents"),icon:"",accept:".pdf,.doc,.docx"},{id:"VIDEOS",name:e("adminMedia.videos"),icon:"",accept:"video/*"}],N=j.find(G=>G.id===r),C=_.useCallback(G=>{const F=Array.from(G.target.files),R=[],q=[];F.forEach(J=>{const re=B(r);if(J.size>re){q.push(`${J.name}: File too large (max ${U(re)})`);return}if(!D(J,r)){q.push(`${J.name}: Invalid file type`);return}R.push(J)}),q.length>0&&K.error(q.join(`
`)),R.length>0&&(i(J=>[...J,...R]),R.forEach(J=>{if(J.type.startsWith("image/")){const re=new FileReader;re.onload=V=>{b(ae=>({...ae,[J.name+J.size]:V.target.result}))},re.readAsDataURL(J)}}))},[r]),P=_.useCallback(G=>{G.preventDefault();const F=Array.from(G.dataTransfer.files);C({target:{files:F}})},[C]),E=_.useCallback(G=>{G.preventDefault()},[]),T=G=>{const F=a[G],R=F.name+F.size;i(q=>q.filter((J,re)=>re!==G)),b(q=>{const J={...q};return delete J[R],J}),f(q=>{const J={...q};return delete J[G],J}),w(q=>{const J={...q};return delete J[G],J}),k(q=>{const J={...q};return delete J[G],J})},O=(G,F)=>{f(R=>({...R,[G]:F}))},I=(G,F)=>{w(R=>({...R,[G]:F}))},W=(G,F)=>{k(R=>({...R,[G]:F}))},X=async()=>{if(a.length===0){K.error("Please select files to upload");return}d(!0);const G=[];for(let q=0;q<a.length;q++){const J=a[q],re=new FormData;re.append("file",J),re.append("collection",r),m[q]&&re.append("alt",m[q]),p[q]&&re.append("caption",p[q]),x[q]&&re.append("description",x[q]);try{h(ae=>({...ae,[q]:0}));const V=await fetch("/api/media/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:re});if(V.ok){const ae=await V.json();G.push({success:!0,data:ae.data}),h(fe=>({...fe,[q]:100}))}else{const ae=await V.json();G.push({success:!1,error:ae.message||"Upload failed"})}}catch(V){console.error("Upload error:",V),G.push({success:!1,error:V.message})}}d(!1),h({});const F=G.filter(q=>q.success).length,R=G.filter(q=>!q.success).length;F>0&&(K.success(`Successfully uploaded ${F} file(s)`),i([]),f({}),w({}),k({})),R>0&&K.error(`Failed to upload ${R} file(s)`)},B=G=>({PRODUCTS:5242880,CATEGORIES:2097152,BANNERS:10485760,PROFILE:2097152,DOCUMENTS:10485760,VIDEOS:52428800})[G]||5*1024*1024,D=(G,F)=>{var q;return((q={PRODUCTS:["image/jpeg","image/png","image/webp","image/gif"],CATEGORIES:["image/jpeg","image/png","image/webp"],BANNERS:["image/jpeg","image/png","image/webp"],PROFILE:["image/jpeg","image/png","image/webp"],DOCUMENTS:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],VIDEOS:["video/mp4","video/webm","video/avi"]}[F])==null?void 0:q.includes(G.type))||!1},U=G=>{if(G===0)return"0 Bytes";const F=1024,R=["Bytes","KB","MB","GB"],q=Math.floor(Math.log(G)/Math.log(F));return parseFloat((G/Math.pow(F,q)).toFixed(2))+" "+R[q]},Z=G=>{if(G.type.startsWith("image/")){const F=G.name+G.size;return y[F]?s.jsx("img",{src:y[F],alt:G.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}):s.jsx(rr,{className:"w-8 h-8 text-blue-500"})}return G.type.startsWith("video/")?s.jsx(eA,{className:"w-8 h-8 text-red-500"}):s.jsx(DM,{className:"w-8 h-8 text-gray-500"})};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ne,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(Rn,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):s.jsx(Ne,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminMedia.uploadMedia")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminMedia.uploadMediaDescription")})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminMedia.selectCollection")}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:j.map(G=>s.jsxs("button",{onClick:()=>n(G.id),className:`p-4 rounded-lg border-2 transition-colors ${r===G.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"text-2xl mb-2",children:G.icon}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:G.name}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Max: ",U(B(G.id))]})]},G.id))})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{onDrop:P,onDragOver:E,className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors",children:[s.jsx(Ma,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia.dragDropFiles")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia.orClickToSelect")}),s.jsx("input",{type:"file",multiple:!0,accept:N==null?void 0:N.accept,onChange:C,className:"hidden",id:"file-upload"}),s.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer",children:[s.jsx(vr,{className:"h-4 w-4 mr-2"}),e("adminMedia.selectFiles")]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e("adminMedia.supportedFormats"),": ",N==null?void 0:N.accept]})]})}),a.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminMedia.selectedFiles")," (",a.length,")"]}),s.jsx("div",{className:"space-y-4",children:a.map((G,F)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[Z(G),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:G.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:U(G.size)}),c[F]!==void 0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[c[F]<100?s.jsx(Bd,{className:"w-4 h-4 animate-spin text-blue-500"}):s.jsx(yt,{className:"w-4 h-4 text-green-500"}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c[F],"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c[F]}%`}})})]})]})]}),s.jsx("button",{onClick:()=>T(F),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",disabled:o,children:s.jsx(ut,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.altText")}),s.jsx("input",{type:"text",value:m[F]||"",onChange:R=>O(F,R.target.value),placeholder:e("adminMedia.altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.caption")}),s.jsx("input",{type:"text",value:p[F]||"",onChange:R=>I(F,R.target.value),placeholder:e("adminMedia.captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.description")}),s.jsx("input",{type:"text",value:x[F]||"",onChange:R=>W(F,R.target.value),placeholder:e("adminMedia.descriptionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]})]})]},F))}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:X,disabled:o||a.length===0,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Bd,{className:"h-4 w-4 mr-2 animate-spin"}),e("adminMedia.uploading")]}):s.jsxs(s.Fragment,{children:[s.jsx(Ma,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadFiles")," (",a.length,")"]})})})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Rn,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminMedia.uploadGuidelines")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[e("adminMedia.maxFileSize"),": ",U(B(r))]}),s.jsxs("li",{children:[e("adminMedia.supportedFormats"),": ",N==null?void 0:N.accept]}),s.jsx("li",{children:e("adminMedia.automaticOptimization")}),s.jsx("li",{children:e("adminMedia.altTextRecommendation")})]})]})]})})]})})},B9=()=>{const{t:e}=pe(),t=nt(),{user:r}=we(T=>T.auth),{orders:n,isLoading:a}=we(T=>T.orders),[i,o]=_.useState([]),[d,c]=_.useState(!1),[h,m]=_.useState(null),[f,p]=_.useState(!1),[w,x]=_.useState("");_.useEffect(()=>{(r==null?void 0:r.role)==="DELIVERY"?t(po({deliveryPersonId:r.id})):(r==null?void 0:r.role)==="ADMIN"&&t(po())},[t,r]),_.useEffect(()=>{if(n){if((r==null?void 0:r.role)==="DELIVERY"){const T=n.filter(O=>{var I;return((I=O.deliveryPerson)==null?void 0:I.id)===(r==null?void 0:r.id)&&["CONFIRMED","PREPARING","OUT_FOR_DELIVERY"].includes(O.status)});o(T)}else if((r==null?void 0:r.role)==="ADMIN"){const T=n.filter(O=>O.deliveryMethod==="DELIVERY"&&["CONFIRMED","PREPARING","OUT_FOR_DELIVERY"].includes(O.status));o(T)}}},[n,r]),_.useEffect(()=>{let T;return d&&navigator.geolocation&&(T=navigator.geolocation.watchPosition(()=>{},O=>{console.error("Error getting location:",O),K.error("Villa vi a f stasetningu")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e4})),()=>{T&&navigator.geolocation.clearWatch(T)}},[d,t,r,e]);const k=T=>{switch(T){case"CONFIRMED":return s.jsx(Ue,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ue,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(Cr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(yt,{className:"w-5 h-5 text-green-600"});default:return s.jsx(Ue,{className:"w-5 h-5 text-gray-600"})}},y=T=>{switch(T){case"CONFIRMED":return"Stafest";case"PREPARING":return"Undirbningur";case"OUT_FOR_DELIVERY":return" afhendingu";case"DELIVERED":return"Afhent";default:return T}},b=T=>{switch(T){case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=async()=>{try{await t(Vl({orderId:h.id,status:w})).unwrap(),K.success("Staa uppfrt!"),p(!1),m(null),x("")}catch(T){K.error(T.message||"Villa kom upp")}},N=()=>{c(!d),d?K.info("Stasetning stvu"):K.success("Stasetning byrja")},C=T=>{m(T),x("OUT_FOR_DELIVERY"),p(!0)},P=T=>{m(T),x("DELIVERED"),p(!0)},E=[{value:"CONFIRMED",label:"Stafest"},{value:"PREPARING",label:"Undirbningur"},{value:"OUT_FOR_DELIVERY",label:" afhendingu"},{value:"DELIVERED",label:"Afhent"}];return(r==null?void 0:r.role)!=="DELIVERY"&&(r==null?void 0:r.role)!=="ADMIN"?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("delivery.title")}),s.jsxs("div",{className:"card p-8",children:[s.jsx(gt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Agangur bannaur"}),s.jsx("p",{className:"text-gray-600",children:" hefur ekki leyfi til a skoa essa su."})]})]})})}):a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})}):s.jsx(Ne,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(r==null?void 0:r.role)==="ADMIN"?"Yfirlit afhendinga":"Afhendingarbor"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:(r==null?void 0:r.role)==="ADMIN"?"Fylgstu me llum afhendingum  kerfinu.":"Velkomin, "+((r==null?void 0:r.fullName)||(r==null?void 0:r.username))+". Stjrnau afhendingum num."})]}),(r==null?void 0:r.role)==="DELIVERY"&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${d?"bg-green-500 animate-pulse":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:d?"Stasetning virk":"Stasetning virk"})]}),s.jsxs("button",{onClick:N,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200`,children:[d?s.jsx(KM,{className:"w-4 h-4 mr-2"}):s.jsx($d,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:d?"Stva":"Byrja"})]})]})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Ue,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:(r==null?void 0:r.role)==="ADMIN"?"Allar pantanir":"thlutaar pantanir"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.length})]})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(Cr,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:" afhendingu"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(T=>T.status==="OUT_FOR_DELIVERY").length})]})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(yt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Afhent  dag"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(T=>T.status==="DELIVERED"&&new Date(T.updatedAt).toDateString()===new Date().toDateString()).length})]})]})}),s.jsx("div",{className:"card p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(Wt,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Bur afhendingar"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(T=>["CONFIRMED","PREPARING"].includes(T.status)).length})]})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(r==null?void 0:r.role)==="ADMIN"?"Afhendingarpantanir":"thlutaar pantanir"}),i.length===0?s.jsxs("div",{className:"card p-8 text-center",children:[s.jsx(Cr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:(r==null?void 0:r.role)==="ADMIN"?"Engar afhendingarpantanir":"Engar pantanir thlutaar"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:(r==null?void 0:r.role)==="ADMIN"?"Engar afhendingarpantanir fundust  kerfinu.":"Engar pantanir hafa veri thlutaar r enn."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(T=>{var O,I,W;return s.jsxs("div",{className:"card p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pntun #",T.orderNumber]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(T.createdAt).toLocaleDateString()})]}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${b(T.status)}`,children:[k(T.status),s.jsx("span",{children:y(T.status)})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(Hr,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-900",children:((O=T.user)==null?void 0:O.fullName)||((I=T.user)==null?void 0:I.username)})]}),((W=T.user)==null?void 0:W.phone)&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ni,{className:"w-4 h-4 text-gray-400"}),s.jsx("a",{href:`tel:${T.user.phone}`,className:"text-primary-600 hover:text-primary-700",children:T.user.phone})]})]}),T.deliveryMethod==="DELIVERY"&&T.address&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(fn,{className:"w-4 h-4 text-gray-400 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Afhendingarstaur"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[T.address.street,s.jsx("br",{}),T.address.city,", ",T.address.postalCode]})]})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Vrur:"}),s.jsxs("div",{className:"space-y-1",children:[T.items.slice(0,3).map((X,B)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[X.quantity,"x ",X.product.nameIs||X.product.name]}),s.jsxs("span",{className:"font-medium",children:[(X.price*X.quantity).toLocaleString()," ",e("common.currency")]})]},B)),T.items.length>3&&s.jsx("p",{className:"text-xs text-gray-500",children:"fleiri"})]})]}),s.jsx("div",{className:"border-t pt-4 mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Samtals:"}),s.jsxs("span",{className:"text-lg font-bold text-primary-600",children:[T.totalAmount.toLocaleString()," ",e("common.currency")]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[T.status==="CONFIRMED"&&s.jsxs("button",{onClick:()=>C(T),className:"btn btn-primary flex-1 flex items-center justify-center space-x-2",children:[s.jsx($d,{className:"w-4 h-4"}),"Byrja afhendingu"]}),T.status==="OUT_FOR_DELIVERY"&&s.jsxs("button",{onClick:()=>P(T),className:"btn btn-success flex-1 flex items-center justify-center space-x-2",children:[s.jsx(yt,{className:"w-4 h-4"}),"Ljka afhendingu"]}),s.jsx("button",{onClick:()=>{m(T),x(T.status),p(!0)},className:"btn btn-outline",children:"Breyta"})]})]},T.id)})})]}),f&&h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Uppfra pntun #",h.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N staa"}),s.jsx("select",{value:w,onChange:T=>x(T.target.value),className:"input w-full",children:E.map(T=>s.jsx("option",{value:T.value,children:T.label},T.value))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{p(!1),m(null),x("")},className:"btn btn-outline flex-1",children:"Htta vi"}),s.jsx("button",{onClick:j,className:"btn btn-primary flex-1",children:"Uppfra"})]})]})})]})})};function $9(){const e=nt(),t=Ir(),{isAuthenticated:r,user:n,isLoading:a}=we(o=>o.auth);cA();const i=t.pathname.startsWith("/admin")||t.pathname.startsWith("/delivery");return _.useEffect(()=>{(()=>{document.title="lfng - Vn og Bjrverslun"})();const d=()=>{var h;if(typeof window<"u"&&((h=window.Capacitor)!=null&&h.isNativePlatform())){const m=document.documentElement.classList.contains("dark");ik.setStyle({style:m?qh.Dark:qh.Light}).catch(f=>{console.warn("Status bar styling not available:",f)}),ik.setBackgroundColor({color:m?"#1f2937":"#ffffff"}).catch(f=>{console.warn("Status bar background color not available:",f)})}};d();const c=new MutationObserver(h=>{h.forEach(m=>{m.attributeName==="class"&&d()})});return c.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>c.disconnect()},[]),_.useEffect(()=>{requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})})},[t.pathname]),_.useEffect(()=>{localStorage.getItem("token")&&!r&&e(Du())},[e,r]),_.useEffect(()=>{if(r&&n)try{dt.connect(),n.role==="ADMIN"?dt.joinAdminRoom():n.role==="DELIVERY"&&dt.joinDeliveryRoom(n.id)}catch(o){console.warn("Socket connection failed, continuing without real-time features:",o)}return()=>{dt.isSocketConnected()&&dt.disconnect()}},[r,n]),_.useEffect(()=>{if(r){const o=d=>{e(bM(d))};return dt.onOrderStatusUpdate(o),()=>{dt.removeListener("order-status-update",o)}}},[r,e]),a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(it,{size:"large"})}):s.jsx(I2,{children:s.jsx(sI,{children:s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(wA,{}),s.jsx("main",{className:"flex-1 pt-16-safe",children:s.jsxs(rE,{children:[s.jsx(Fe,{path:"/",element:s.jsx(RA,{})}),s.jsx(Fe,{path:"/products",element:s.jsx(qA,{})}),s.jsx(Fe,{path:"/products/:id",element:s.jsx(x7,{})}),s.jsx(Fe,{path:"/login",element:s.jsx(eO,{})}),s.jsx(Fe,{path:"/admin-login",element:s.jsx(rO,{})}),s.jsx(Fe,{path:"/auth/callback",element:s.jsx(tO,{})}),s.jsxs(Fe,{element:s.jsx(zf,{}),children:[s.jsx(Fe,{path:"/cart",element:s.jsx(w7,{})}),s.jsx(Fe,{path:"/orders",element:s.jsx(Od,{to:"/profile",replace:!0})}),s.jsx(Fe,{path:"/orders/:id",element:s.jsx(N7,{})}),s.jsx(Fe,{path:"/profile",element:s.jsx(J7,{})})]}),s.jsxs(Fe,{element:s.jsx(zf,{requiredRole:"ADMIN"}),children:[s.jsx(Fe,{path:"/admin",element:s.jsx(lO,{})}),s.jsx(Fe,{path:"/admin/products",element:s.jsx(mO,{})}),s.jsx(Fe,{path:"/admin/categories",element:s.jsx(bO,{})}),s.jsx(Fe,{path:"/admin/orders",element:s.jsx(vO,{})}),s.jsx(Fe,{path:"/admin/pos",element:s.jsx(wO,{})}),s.jsx(Fe,{path:"/admin/customers",element:s.jsx(WF,{})}),s.jsx(Fe,{path:"/admin/chat",element:s.jsx(E9,{})}),s.jsx(Fe,{path:"/admin/analytics",element:s.jsx(HF,{})}),s.jsx(Fe,{path:"/admin/reports",element:s.jsx(YF,{})}),s.jsx(Fe,{path:"/admin/notifications",element:s.jsx(JF,{})}),s.jsx(Fe,{path:"/admin/media",element:s.jsx(F9,{})}),s.jsx(Fe,{path:"/admin/media/upload",element:s.jsx(z9,{})}),s.jsx(Fe,{path:"/admin/banners",element:s.jsx(h9,{})}),s.jsx(Fe,{path:"/admin/demo-data",element:s.jsx(I9,{})}),s.jsx(Fe,{path:"/admin/translations",element:s.jsx(L9,{})}),s.jsx(Fe,{path:"/admin/settings",element:s.jsx(XF,{})}),s.jsx(Fe,{path:"/admin/settings/general",element:s.jsx(t9,{})}),s.jsx(Fe,{path:"/admin/settings/business",element:s.jsx(r9,{})}),s.jsx(Fe,{path:"/admin/settings/shipping",element:s.jsx(s9,{})}),s.jsx(Fe,{path:"/admin/settings/vat",element:s.jsx(n9,{})}),s.jsx(Fe,{path:"/admin/settings/api-keys",element:s.jsx(a9,{})}),s.jsx(Fe,{path:"/admin/settings/payment-gateways",element:s.jsx(d9,{})}),s.jsx(Fe,{path:"/admin/settings/receipts",element:s.jsx(c9,{})}),s.jsx(Fe,{path:"/admin/settings/smtp",element:s.jsx(u9,{})})]}),s.jsx(Fe,{element:s.jsx(zf,{requiredRoles:["ADMIN","DELIVERY"]}),children:s.jsx(Fe,{path:"/delivery",element:s.jsx(B9,{})})}),s.jsx(Fe,{path:"*",element:s.jsx(Od,{to:"/",replace:!0})})]})}),!i&&s.jsx(kA,{}),!i&&s.jsx(jA,{}),s.jsx(NA,{}),s.jsx(iA,{})]})})})}const l0=ye("subscriptions/fetchUserSubscriptions",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await he.get(`/subscriptions/my-subscriptions?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subscriptions")}}),d0=ye("subscriptions/fetchSubscription",async(e,{rejectWithValue:t})=>{var r,n;try{return(await he.get(`/subscriptions/${e}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subscription")}}),c0=ye("subscriptions/createSubscription",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{const o=await he.post("/subscriptions",e);return K.success("skrift stofnu"),o.data}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a stofna skrift"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to create subscription")}}),u0=ye("subscriptions/updateSubscription",async({id:e,subscriptionData:t},{rejectWithValue:r})=>{var n,a,i,o;try{const d=await he.put(`/subscriptions/${e}`,t);return K.success("skrift uppfr"),d.data}catch(d){return K.error(((a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)||"Mistkst a uppfra skrift"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update subscription")}}),h0=ye("subscriptions/deleteSubscription",async(e,{rejectWithValue:t})=>{var r,n,a,i;try{return await he.delete(`/subscriptions/${e}`),K.success("skrift htt vi"),e}catch(o){return K.error(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||"Mistkst a htta vi skrift"),t(((i=(a=o.response)==null?void 0:a.data)==null?void 0:i.message)||"Failed to cancel subscription")}}),m0=ye("subscriptions/fetchAllSubscriptions",async(e={},{rejectWithValue:t})=>{var r,n;try{const a=new URLSearchParams;return e.status&&a.append("status",e.status),e.page&&a.append("page",e.page),e.limit&&a.append("limit",e.limit),(await he.get(`/subscriptions?${a.toString()}`)).data}catch(a){return t(((n=(r=a.response)==null?void 0:r.data)==null?void 0:n.message)||"Failed to fetch subscriptions")}}),U9={subscriptions:[],currentSubscription:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},V9=Wr({name:"subscriptions",initialState:U9,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentSubscription:e=>{e.currentSubscription=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(l0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(l0.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(l0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(d0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(d0.fulfilled,(t,r)=>{t.isLoading=!1,t.currentSubscription=r.payload,t.error=null}).addCase(d0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(c0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(c0.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions.unshift(r.payload),t.error=null}).addCase(c0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(u0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(u0.fulfilled,(t,r)=>{t.isLoading=!1;const n=t.subscriptions.findIndex(a=>a.id===r.payload.id);n!==-1&&(t.subscriptions[n]=r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload.id&&(t.currentSubscription=r.payload),t.error=null}).addCase(u0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(h0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(h0.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=t.subscriptions.filter(n=>n.id!==r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload&&(t.currentSubscription=null),t.error=null}).addCase(h0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(m0.pending,t=>{t.isLoading=!0,t.error=null}).addCase(m0.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(m0.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),H9=V9.reducer,Fn=OI({reducer:{auth:fM,products:mA,categories:PA,cart:pA,orders:vM,addresses:v7,subscriptions:H9,dashboard:nO,banners:TA,chat:x9,analytics:VF,reports:GF,receiptSettings:dA,smtpSettings:e9},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})});console.log("Store created:",Fn);console.log("Store state:",Fn.getState());typeof window<"u"&&(window.store=Fn);console.log("Store in main.jsx:",Fn);console.log("Store state in main:",Fn==null?void 0:Fn.getState());typeof window<"u"&&(window.store=Fn);g0.createRoot(document.getElementById("root")).render(s.jsx(wt.StrictMode,{children:s.jsx(iP,{store:Fn,children:s.jsxs(cE,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[s.jsx(I2,{children:s.jsx($9,{})}),s.jsx(rI,{position:"bottom-center",toastOptions:{duration:4e3,success:{style:{background:"#10b981",color:"#fff",padding:"16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",marginBottom:window.innerWidth<768?"70px":"0px"},iconTheme:{primary:"#fff",secondary:"#10b981"}},error:{style:{background:"#ef4444",color:"#fff",padding:"16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",marginBottom:window.innerWidth<768?"70px":"0px"},iconTheme:{primary:"#fff",secondary:"#ef4444"}}}})]})})}));
