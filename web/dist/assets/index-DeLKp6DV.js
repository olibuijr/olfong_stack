var t6=Object.defineProperty;var r6=(e,t,r)=>t in e?t6(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Be=(e,t,r)=>r6(e,typeof t!="symbol"?t+"":t,r);function s6(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var a6=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var d1={exports:{}},zm={},c1={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yc=Symbol.for("react.element"),n6=Symbol.for("react.portal"),i6=Symbol.for("react.fragment"),o6=Symbol.for("react.strict_mode"),l6=Symbol.for("react.profiler"),d6=Symbol.for("react.provider"),c6=Symbol.for("react.context"),u6=Symbol.for("react.forward_ref"),h6=Symbol.for("react.suspense"),m6=Symbol.for("react.memo"),g6=Symbol.for("react.lazy"),wv=Symbol.iterator;function f6(e){return e===null||typeof e!="object"?null:(e=wv&&e[wv]||e["@@iterator"],typeof e=="function"?e:null)}var u1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h1=Object.assign,m1={};function nl(e,t,r){this.props=e,this.context=t,this.refs=m1,this.updater=r||u1}nl.prototype.isReactComponent={};nl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function g1(){}g1.prototype=nl.prototype;function vx(e,t,r){this.props=e,this.context=t,this.refs=m1,this.updater=r||u1}var kx=vx.prototype=new g1;kx.constructor=vx;h1(kx,nl.prototype);kx.isPureReactComponent=!0;var jv=Array.isArray,f1=Object.prototype.hasOwnProperty,wx={current:null},p1={key:!0,ref:!0,__self:!0,__source:!0};function x1(e,t,r){var a,n={},i=null,o=null;if(t!=null)for(a in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)f1.call(t,a)&&!p1.hasOwnProperty(a)&&(n[a]=t[a]);var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){for(var c=Array(d),h=0;h<d;h++)c[h]=arguments[h+2];n.children=c}if(e&&e.defaultProps)for(a in d=e.defaultProps,d)n[a]===void 0&&(n[a]=d[a]);return{$$typeof:yc,type:e,key:i,ref:o,props:n,_owner:wx.current}}function p6(e,t){return{$$typeof:yc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jx(e){return typeof e=="object"&&e!==null&&e.$$typeof===yc}function x6(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Nv=/\/+/g;function f0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?x6(""+e.key):t.toString(36)}function Bu(e,t,r,a,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yc:case n6:o=!0}}if(o)return o=e,n=n(o),e=a===""?"."+f0(o,0):a,jv(n)?(r="",e!=null&&(r=e.replace(Nv,"$&/")+"/"),Bu(n,t,r,"",function(h){return h})):n!=null&&(jx(n)&&(n=p6(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(Nv,"$&/")+"/")+e)),t.push(n)),1;if(o=0,a=a===""?".":a+":",jv(e))for(var d=0;d<e.length;d++){i=e[d];var c=a+f0(i,d);o+=Bu(i,t,r,c,n)}else if(c=f6(e),typeof c=="function")for(e=c.call(e),d=0;!(i=e.next()).done;)i=i.value,c=a+f0(i,d++),o+=Bu(i,t,r,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function tu(e,t,r){if(e==null)return e;var a=[],n=0;return Bu(e,a,"","",function(i){return t.call(r,i,n++)}),a}function y6(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zr={current:null},zu={transition:null},b6={ReactCurrentDispatcher:zr,ReactCurrentBatchConfig:zu,ReactCurrentOwner:wx};function y1(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:tu,forEach:function(e,t,r){tu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return tu(e,function(){t++}),t},toArray:function(e){return tu(e,function(t){return t})||[]},only:function(e){if(!jx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Qe.Component=nl;Qe.Fragment=i6;Qe.Profiler=l6;Qe.PureComponent=vx;Qe.StrictMode=o6;Qe.Suspense=h6;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b6;Qe.act=y1;Qe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h1({},e.props),n=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=wx.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(c in t)f1.call(t,c)&&!p1.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&d!==void 0?d[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){d=Array(c);for(var h=0;h<c;h++)d[h]=arguments[h+2];a.children=d}return{$$typeof:yc,type:e.type,key:n,ref:i,props:a,_owner:o}};Qe.createContext=function(e){return e={$$typeof:c6,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:d6,_context:e},e.Consumer=e};Qe.createElement=x1;Qe.createFactory=function(e){var t=x1.bind(null,e);return t.type=e,t};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(e){return{$$typeof:u6,render:e}};Qe.isValidElement=jx;Qe.lazy=function(e){return{$$typeof:g6,_payload:{_status:-1,_result:e},_init:y6}};Qe.memo=function(e,t){return{$$typeof:m6,type:e,compare:t===void 0?null:t}};Qe.startTransition=function(e){var t=zu.transition;zu.transition={};try{e()}finally{zu.transition=t}};Qe.unstable_act=y1;Qe.useCallback=function(e,t){return zr.current.useCallback(e,t)};Qe.useContext=function(e){return zr.current.useContext(e)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(e){return zr.current.useDeferredValue(e)};Qe.useEffect=function(e,t){return zr.current.useEffect(e,t)};Qe.useId=function(){return zr.current.useId()};Qe.useImperativeHandle=function(e,t,r){return zr.current.useImperativeHandle(e,t,r)};Qe.useInsertionEffect=function(e,t){return zr.current.useInsertionEffect(e,t)};Qe.useLayoutEffect=function(e,t){return zr.current.useLayoutEffect(e,t)};Qe.useMemo=function(e,t){return zr.current.useMemo(e,t)};Qe.useReducer=function(e,t,r){return zr.current.useReducer(e,t,r)};Qe.useRef=function(e){return zr.current.useRef(e)};Qe.useState=function(e){return zr.current.useState(e)};Qe.useSyncExternalStore=function(e,t,r){return zr.current.useSyncExternalStore(e,t,r)};Qe.useTransition=function(){return zr.current.useTransition()};Qe.version="18.3.1";c1.exports=Qe;var _=c1.exports;const Tt=bx(_),v6=s6({__proto__:null,default:Tt},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k6=_,w6=Symbol.for("react.element"),j6=Symbol.for("react.fragment"),N6=Object.prototype.hasOwnProperty,_6=k6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,S6={key:!0,ref:!0,__self:!0,__source:!0};function b1(e,t,r){var a,n={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(a in t)N6.call(t,a)&&!S6.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)n[a]===void 0&&(n[a]=t[a]);return{$$typeof:w6,type:e,key:i,ref:o,props:n,_owner:_6.current}}zm.Fragment=j6;zm.jsx=b1;zm.jsxs=b1;d1.exports=zm;var s=d1.exports,Ff={},v1={exports:{}},gs={},k1={exports:{}},w1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,O){var K=$.length;$.push(O);e:for(;0<K;){var V=K-1>>>1,X=$[V];if(0<n(X,O))$[V]=O,$[K]=X,K=V;else break e}}function r($){return $.length===0?null:$[0]}function a($){if($.length===0)return null;var O=$[0],K=$.pop();if(K!==O){$[0]=K;e:for(var V=0,X=$.length,le=X>>>1;V<le;){var ge=2*(V+1)-1,ne=$[ge],pe=ge+1,Oe=$[pe];if(0>n(ne,K))pe<X&&0>n(Oe,ne)?($[V]=Oe,$[pe]=K,V=pe):($[V]=ne,$[ge]=K,V=ge);else if(pe<X&&0>n(Oe,K))$[V]=Oe,$[pe]=K,V=pe;else break e}}return O}function n($,O){var K=$.sortIndex-O.sortIndex;return K!==0?K:$.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();e.unstable_now=function(){return o.now()-d}}var c=[],h=[],m=1,g=null,p=3,k=!1,x=!1,j=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var O=r(h);O!==null;){if(O.callback===null)a(h);else if(O.startTime<=$)a(h),O.sortIndex=O.expirationTime,t(c,O);else break;O=r(h)}}function P($){if(j=!1,N($),!x)if(r(c)!==null)x=!0,W(C);else{var O=r(h);O!==null&&Q(P,O.startTime-$)}}function C($,O){x=!1,j&&(j=!1,b(F),F=-1),k=!0;var K=p;try{for(N(O),g=r(c);g!==null&&(!(g.expirationTime>O)||$&&!Y());){var V=g.callback;if(typeof V=="function"){g.callback=null,p=g.priorityLevel;var X=V(g.expirationTime<=O);O=e.unstable_now(),typeof X=="function"?g.callback=X:g===r(c)&&a(c),N(O)}else a(c);g=r(c)}if(g!==null)var le=!0;else{var ge=r(h);ge!==null&&Q(P,ge.startTime-O),le=!1}return le}finally{g=null,p=K,k=!1}}var A=!1,E=null,F=-1,I=5,D=-1;function Y(){return!(e.unstable_now()-D<I)}function R(){if(E!==null){var $=e.unstable_now();D=$;var O=!0;try{O=E(!0,$)}finally{O?Z():(A=!1,E=null)}}else A=!1}var Z;if(typeof w=="function")Z=function(){w(R)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,B=T.port2;T.port1.onmessage=R,Z=function(){B.postMessage(null)}}else Z=function(){y(R,0)};function W($){E=$,A||(A=!0,Z())}function Q($,O){F=y(function(){$(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){x||k||(x=!0,W(C))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var K=p;p=O;try{return $()}finally{p=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,O){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var K=p;p=$;try{return O()}finally{p=K}},e.unstable_scheduleCallback=function($,O,K){var V=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?V+K:V):K=V,$){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=K+X,$={id:m++,callback:O,priorityLevel:$,startTime:K,expirationTime:X,sortIndex:-1},K>V?($.sortIndex=K,t(h,$),r(c)===null&&$===r(h)&&(j?(b(F),F=-1):j=!0,Q(P,K-V))):($.sortIndex=X,t(c,$),x||k||(x=!0,W(C))),$},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function($){var O=p;return function(){var K=p;p=O;try{return $.apply(this,arguments)}finally{p=K}}}})(w1);k1.exports=w1;var C6=k1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P6=_,hs=C6;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var j1=new Set,Bd={};function Zi(e,t){Wo(e,t),Wo(e+"Capture",t)}function Wo(e,t){for(Bd[e]=t,e=0;e<t.length;e++)j1.add(t[e])}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bf=Object.prototype.hasOwnProperty,E6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_v={},Sv={};function I6(e){return Bf.call(Sv,e)?!0:Bf.call(_v,e)?!1:E6.test(e)?Sv[e]=!0:(_v[e]=!0,!1)}function T6(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L6(e,t,r,a){if(t===null||typeof t>"u"||T6(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $r(e,t,r,a,n,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var wr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){wr[e]=new $r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];wr[t]=new $r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){wr[e]=new $r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){wr[e]=new $r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){wr[e]=new $r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){wr[e]=new $r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){wr[e]=new $r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){wr[e]=new $r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){wr[e]=new $r(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nx=/[\-:]([a-z])/g;function _x(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nx,_x);wr[t]=new $r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nx,_x);wr[t]=new $r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nx,_x);wr[t]=new $r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){wr[e]=new $r(e,1,!1,e.toLowerCase(),null,!1,!1)});wr.xlinkHref=new $r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){wr[e]=new $r(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sx(e,t,r,a){var n=wr.hasOwnProperty(t)?wr[t]:null;(n!==null?n.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L6(t,r,n,a)&&(r=null),a||n===null?I6(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,a=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var ln=P6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ru=Symbol.for("react.element"),go=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),Cx=Symbol.for("react.strict_mode"),zf=Symbol.for("react.profiler"),N1=Symbol.for("react.provider"),_1=Symbol.for("react.context"),Px=Symbol.for("react.forward_ref"),$f=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),Ex=Symbol.for("react.memo"),yn=Symbol.for("react.lazy"),S1=Symbol.for("react.offscreen"),Cv=Symbol.iterator;function Pl(e){return e===null||typeof e!="object"?null:(e=Cv&&e[Cv]||e["@@iterator"],typeof e=="function"?e:null)}var Ot=Object.assign,p0;function Hl(e){if(p0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);p0=t&&t[1]||""}return`
`+p0+e}var x0=!1;function y0(e,t){if(!e||x0)return"";x0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var a=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){a=h}e.call(t.prototype)}else{try{throw Error()}catch(h){a=h}e()}}catch(h){if(h&&a&&typeof h.stack=="string"){for(var n=h.stack.split(`
`),i=a.stack.split(`
`),o=n.length-1,d=i.length-1;1<=o&&0<=d&&n[o]!==i[d];)d--;for(;1<=o&&0<=d;o--,d--)if(n[o]!==i[d]){if(o!==1||d!==1)do if(o--,d--,0>d||n[o]!==i[d]){var c=`
`+n[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=d);break}}}finally{x0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Hl(e):""}function A6(e){switch(e.tag){case 5:return Hl(e.type);case 16:return Hl("Lazy");case 13:return Hl("Suspense");case 19:return Hl("SuspenseList");case 0:case 2:case 15:return e=y0(e.type,!1),e;case 11:return e=y0(e.type.render,!1),e;case 1:return e=y0(e.type,!0),e;default:return""}}function Vf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fo:return"Fragment";case go:return"Portal";case zf:return"Profiler";case Cx:return"StrictMode";case $f:return"Suspense";case Uf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _1:return(e.displayName||"Context")+".Consumer";case N1:return(e._context.displayName||"Context")+".Provider";case Px:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ex:return t=e.displayName||null,t!==null?t:Vf(e.type)||"Memo";case yn:t=e._payload,e=e._init;try{return Vf(e(t))}catch{}}return null}function M6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vf(t);case 8:return t===Cx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function C1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R6(e){var t=C1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){a=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(o){a=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function su(e){e._valueTracker||(e._valueTracker=R6(e))}function P1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=C1(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function $h(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hf(e,t){var r=t.checked;return Ot({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Pv(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=qn(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function E1(e,t){t=t.checked,t!=null&&Sx(e,"checked",t,!1)}function Wf(e,t){E1(e,t);var r=qn(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qf(e,t.type,r):t.hasOwnProperty("defaultValue")&&qf(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ev(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function qf(e,t,r){(t!=="number"||$h(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wl=Array.isArray;function Eo(e,t,r,a){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&a&&(e[r].defaultSelected=!0)}else{for(r=""+qn(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Kf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Ot({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Iv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ke(92));if(Wl(r)){if(1<r.length)throw Error(ke(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qn(r)}}function I1(e,t){var r=qn(t.value),a=qn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function Tv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function T1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?T1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var au,L1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(au=au||document.createElement("div"),au.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=au.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zd(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ed={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D6=["Webkit","ms","Moz","O"];Object.keys(ed).forEach(function(e){D6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ed[t]=ed[e]})});function A1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ed.hasOwnProperty(e)&&ed[e]?(""+t).trim():t+"px"}function M1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=A1(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,n):e[r]=n}}var O6=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zf(e,t){if(t){if(O6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function Yf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=null;function Ix(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xf=null,Io=null,To=null;function Lv(e){if(e=kc(e)){if(typeof Xf!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=Wm(t),Xf(e.stateNode,e.type,t))}}function R1(e){Io?To?To.push(e):To=[e]:Io=e}function D1(){if(Io){var e=Io,t=To;if(To=Io=null,Lv(e),t)for(e=0;e<t.length;e++)Lv(t[e])}}function O1(e,t){return e(t)}function F1(){}var b0=!1;function B1(e,t,r){if(b0)return e(t,r);b0=!0;try{return O1(e,t,r)}finally{b0=!1,(Io!==null||To!==null)&&(F1(),D1())}}function $d(e,t){var r=e.stateNode;if(r===null)return null;var a=Wm(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ke(231,t,typeof r));return r}var Qf=!1;if(tn)try{var El={};Object.defineProperty(El,"passive",{get:function(){Qf=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Qf=!1}function F6(e,t,r,a,n,i,o,d,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(m){this.onError(m)}}var td=!1,Uh=null,Vh=!1,ep=null,B6={onError:function(e){td=!0,Uh=e}};function z6(e,t,r,a,n,i,o,d,c){td=!1,Uh=null,F6.apply(B6,arguments)}function $6(e,t,r,a,n,i,o,d,c){if(z6.apply(this,arguments),td){if(td){var h=Uh;td=!1,Uh=null}else throw Error(ke(198));Vh||(Vh=!0,ep=h)}}function Yi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function z1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Av(e){if(Yi(e)!==e)throw Error(ke(188))}function U6(e){var t=e.alternate;if(!t){if(t=Yi(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var r=e,a=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Av(n),e;if(i===a)return Av(n),t;i=i.sibling}throw Error(ke(188))}if(r.return!==a.return)r=n,a=i;else{for(var o=!1,d=n.child;d;){if(d===r){o=!0,r=n,a=i;break}if(d===a){o=!0,a=n,r=i;break}d=d.sibling}if(!o){for(d=i.child;d;){if(d===r){o=!0,r=i,a=n;break}if(d===a){o=!0,a=i,r=n;break}d=d.sibling}if(!o)throw Error(ke(189))}}if(r.alternate!==a)throw Error(ke(190))}if(r.tag!==3)throw Error(ke(188));return r.stateNode.current===r?e:t}function $1(e){return e=U6(e),e!==null?U1(e):null}function U1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=U1(e);if(t!==null)return t;e=e.sibling}return null}var V1=hs.unstable_scheduleCallback,Mv=hs.unstable_cancelCallback,V6=hs.unstable_shouldYield,H6=hs.unstable_requestPaint,$t=hs.unstable_now,W6=hs.unstable_getCurrentPriorityLevel,Tx=hs.unstable_ImmediatePriority,H1=hs.unstable_UserBlockingPriority,Hh=hs.unstable_NormalPriority,q6=hs.unstable_LowPriority,W1=hs.unstable_IdlePriority,$m=null,ka=null;function K6(e){if(ka&&typeof ka.onCommitFiberRoot=="function")try{ka.onCommitFiberRoot($m,e,void 0,(e.current.flags&128)===128)}catch{}}var ea=Math.clz32?Math.clz32:Y6,G6=Math.log,Z6=Math.LN2;function Y6(e){return e>>>=0,e===0?32:31-(G6(e)/Z6|0)|0}var nu=64,iu=4194304;function ql(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Wh(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,n=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var d=o&~n;d!==0?a=ql(d):(i&=o,i!==0&&(a=ql(i)))}else o=r&~n,o!==0?a=ql(o):i!==0&&(a=ql(i));if(a===0)return 0;if(t!==0&&t!==a&&!(t&n)&&(n=a&-a,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-ea(t),n=1<<r,a|=e[r],t&=~n;return a}function J6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function X6(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ea(i),d=1<<o,c=n[o];c===-1?(!(d&r)||d&a)&&(n[o]=J6(d,t)):c<=t&&(e.expiredLanes|=d),i&=~d}}function tp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function q1(){var e=nu;return nu<<=1,!(nu&4194240)&&(nu=64),e}function v0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ea(t),e[t]=r}function Q6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-ea(r),i=1<<n;t[n]=0,a[n]=-1,e[n]=-1,r&=~i}}function Lx(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-ea(r),n=1<<a;n&t|e[a]&t&&(e[a]|=t),r&=~n}}var gt=0;function K1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var G1,Ax,Z1,Y1,J1,rp=!1,ou=[],Ln=null,An=null,Mn=null,Ud=new Map,Vd=new Map,vn=[],e3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rv(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Ud.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vd.delete(t.pointerId)}}function Il(e,t,r,a,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=kc(t),t!==null&&Ax(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function t3(e,t,r,a,n){switch(t){case"focusin":return Ln=Il(Ln,e,t,r,a,n),!0;case"dragenter":return An=Il(An,e,t,r,a,n),!0;case"mouseover":return Mn=Il(Mn,e,t,r,a,n),!0;case"pointerover":var i=n.pointerId;return Ud.set(i,Il(Ud.get(i)||null,e,t,r,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Vd.set(i,Il(Vd.get(i)||null,e,t,r,a,n)),!0}return!1}function X1(e){var t=ji(e.target);if(t!==null){var r=Yi(t);if(r!==null){if(t=r.tag,t===13){if(t=z1(r),t!==null){e.blockedOn=t,J1(e.priority,function(){Z1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $u(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=sp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Jf=a,r.target.dispatchEvent(a),Jf=null}else return t=kc(r),t!==null&&Ax(t),e.blockedOn=r,!1;t.shift()}return!0}function Dv(e,t,r){$u(e)&&r.delete(t)}function r3(){rp=!1,Ln!==null&&$u(Ln)&&(Ln=null),An!==null&&$u(An)&&(An=null),Mn!==null&&$u(Mn)&&(Mn=null),Ud.forEach(Dv),Vd.forEach(Dv)}function Tl(e,t){e.blockedOn===t&&(e.blockedOn=null,rp||(rp=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,r3)))}function Hd(e){function t(n){return Tl(n,e)}if(0<ou.length){Tl(ou[0],e);for(var r=1;r<ou.length;r++){var a=ou[r];a.blockedOn===e&&(a.blockedOn=null)}}for(Ln!==null&&Tl(Ln,e),An!==null&&Tl(An,e),Mn!==null&&Tl(Mn,e),Ud.forEach(t),Vd.forEach(t),r=0;r<vn.length;r++)a=vn[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<vn.length&&(r=vn[0],r.blockedOn===null);)X1(r),r.blockedOn===null&&vn.shift()}var Lo=ln.ReactCurrentBatchConfig,qh=!0;function s3(e,t,r,a){var n=gt,i=Lo.transition;Lo.transition=null;try{gt=1,Mx(e,t,r,a)}finally{gt=n,Lo.transition=i}}function a3(e,t,r,a){var n=gt,i=Lo.transition;Lo.transition=null;try{gt=4,Mx(e,t,r,a)}finally{gt=n,Lo.transition=i}}function Mx(e,t,r,a){if(qh){var n=sp(e,t,r,a);if(n===null)I0(e,t,a,Kh,r),Rv(e,a);else if(t3(n,e,t,r,a))a.stopPropagation();else if(Rv(e,a),t&4&&-1<e3.indexOf(e)){for(;n!==null;){var i=kc(n);if(i!==null&&G1(i),i=sp(e,t,r,a),i===null&&I0(e,t,a,Kh,r),i===n)break;n=i}n!==null&&a.stopPropagation()}else I0(e,t,a,null,r)}}var Kh=null;function sp(e,t,r,a){if(Kh=null,e=Ix(a),e=ji(e),e!==null)if(t=Yi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=z1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kh=e,null}function Q1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W6()){case Tx:return 1;case H1:return 4;case Hh:case q6:return 16;case W1:return 536870912;default:return 16}default:return 16}}var _n=null,Rx=null,Uu=null;function eN(){if(Uu)return Uu;var e,t=Rx,r=t.length,a,n="value"in _n?_n.value:_n.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(a=1;a<=o&&t[r-a]===n[i-a];a++);return Uu=n.slice(e,1<a?1-a:void 0)}function Vu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function lu(){return!0}function Ov(){return!1}function fs(e){function t(r,a,n,i,o){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(i):i[d]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?lu:Ov,this.isPropagationStopped=Ov,this}return Ot(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=lu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=lu)},persist:function(){},isPersistent:lu}),t}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dx=fs(il),vc=Ot({},il,{view:0,detail:0}),n3=fs(vc),k0,w0,Ll,Um=Ot({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ox,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ll&&(Ll&&e.type==="mousemove"?(k0=e.screenX-Ll.screenX,w0=e.screenY-Ll.screenY):w0=k0=0,Ll=e),k0)},movementY:function(e){return"movementY"in e?e.movementY:w0}}),Fv=fs(Um),i3=Ot({},Um,{dataTransfer:0}),o3=fs(i3),l3=Ot({},vc,{relatedTarget:0}),j0=fs(l3),d3=Ot({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),c3=fs(d3),u3=Ot({},il,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),h3=fs(u3),m3=Ot({},il,{data:0}),Bv=fs(m3),g3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=p3[e])?!!t[e]:!1}function Ox(){return x3}var y3=Ot({},vc,{key:function(e){if(e.key){var t=g3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?f3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ox,charCode:function(e){return e.type==="keypress"?Vu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b3=fs(y3),v3=Ot({},Um,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zv=fs(v3),k3=Ot({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ox}),w3=fs(k3),j3=Ot({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),N3=fs(j3),_3=Ot({},Um,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S3=fs(_3),C3=[9,13,27,32],Fx=tn&&"CompositionEvent"in window,rd=null;tn&&"documentMode"in document&&(rd=document.documentMode);var P3=tn&&"TextEvent"in window&&!rd,tN=tn&&(!Fx||rd&&8<rd&&11>=rd),$v=" ",Uv=!1;function rN(e,t){switch(e){case"keyup":return C3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var po=!1;function E3(e,t){switch(e){case"compositionend":return sN(t);case"keypress":return t.which!==32?null:(Uv=!0,$v);case"textInput":return e=t.data,e===$v&&Uv?null:e;default:return null}}function I3(e,t){if(po)return e==="compositionend"||!Fx&&rN(e,t)?(e=eN(),Uu=Rx=_n=null,po=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tN&&t.locale!=="ko"?null:t.data;default:return null}}var T3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!T3[e.type]:t==="textarea"}function aN(e,t,r,a){R1(a),t=Gh(t,"onChange"),0<t.length&&(r=new Dx("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var sd=null,Wd=null;function L3(e){fN(e,0)}function Vm(e){var t=bo(e);if(P1(t))return e}function A3(e,t){if(e==="change")return t}var nN=!1;if(tn){var N0;if(tn){var _0="oninput"in document;if(!_0){var Hv=document.createElement("div");Hv.setAttribute("oninput","return;"),_0=typeof Hv.oninput=="function"}N0=_0}else N0=!1;nN=N0&&(!document.documentMode||9<document.documentMode)}function Wv(){sd&&(sd.detachEvent("onpropertychange",iN),Wd=sd=null)}function iN(e){if(e.propertyName==="value"&&Vm(Wd)){var t=[];aN(t,Wd,e,Ix(e)),B1(L3,t)}}function M3(e,t,r){e==="focusin"?(Wv(),sd=t,Wd=r,sd.attachEvent("onpropertychange",iN)):e==="focusout"&&Wv()}function R3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vm(Wd)}function D3(e,t){if(e==="click")return Vm(t)}function O3(e,t){if(e==="input"||e==="change")return Vm(t)}function F3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ra=typeof Object.is=="function"?Object.is:F3;function qd(e,t){if(ra(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Bf.call(t,n)||!ra(e[n],t[n]))return!1}return!0}function qv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Kv(e,t){var r=qv(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qv(r)}}function oN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lN(){for(var e=window,t=$h();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$h(e.document)}return t}function Bx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function B3(e){var t=lN(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&oN(r.ownerDocument.documentElement,r)){if(a!==null&&Bx(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(a.start,n);a=a.end===void 0?i:Math.min(a.end,n),!e.extend&&i>a&&(n=a,a=i,i=n),n=Kv(r,i);var o=Kv(r,a);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>a?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var z3=tn&&"documentMode"in document&&11>=document.documentMode,xo=null,ap=null,ad=null,np=!1;function Gv(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;np||xo==null||xo!==$h(a)||(a=xo,"selectionStart"in a&&Bx(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ad&&qd(ad,a)||(ad=a,a=Gh(ap,"onSelect"),0<a.length&&(t=new Dx("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=xo)))}function du(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yo={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},S0={},dN={};tn&&(dN=document.createElement("div").style,"AnimationEvent"in window||(delete yo.animationend.animation,delete yo.animationiteration.animation,delete yo.animationstart.animation),"TransitionEvent"in window||delete yo.transitionend.transition);function Hm(e){if(S0[e])return S0[e];if(!yo[e])return e;var t=yo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in dN)return S0[e]=t[r];return e}var cN=Hm("animationend"),uN=Hm("animationiteration"),hN=Hm("animationstart"),mN=Hm("transitionend"),gN=new Map,Zv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(e,t){gN.set(e,t),Zi(t,[e])}for(var C0=0;C0<Zv.length;C0++){var P0=Zv[C0],$3=P0.toLowerCase(),U3=P0[0].toUpperCase()+P0.slice(1);ei($3,"on"+U3)}ei(cN,"onAnimationEnd");ei(uN,"onAnimationIteration");ei(hN,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(mN,"onTransitionEnd");Wo("onMouseEnter",["mouseout","mouseover"]);Wo("onMouseLeave",["mouseout","mouseover"]);Wo("onPointerEnter",["pointerout","pointerover"]);Wo("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Kl));function Yv(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,$6(a,t,void 0,e),e.currentTarget=null}function fN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var o=a.length-1;0<=o;o--){var d=a[o],c=d.instance,h=d.currentTarget;if(d=d.listener,c!==i&&n.isPropagationStopped())break e;Yv(n,d,h),i=c}else for(o=0;o<a.length;o++){if(d=a[o],c=d.instance,h=d.currentTarget,d=d.listener,c!==i&&n.isPropagationStopped())break e;Yv(n,d,h),i=c}}}if(Vh)throw e=ep,Vh=!1,ep=null,e}function Nt(e,t){var r=t[cp];r===void 0&&(r=t[cp]=new Set);var a=e+"__bubble";r.has(a)||(pN(t,e,2,!1),r.add(a))}function E0(e,t,r){var a=0;t&&(a|=4),pN(r,e,a,t)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Kd(e){if(!e[cu]){e[cu]=!0,j1.forEach(function(r){r!=="selectionchange"&&(V3.has(r)||E0(r,!1,e),E0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cu]||(t[cu]=!0,E0("selectionchange",!1,t))}}function pN(e,t,r,a){switch(Q1(t)){case 1:var n=s3;break;case 4:n=a3;break;default:n=Mx}r=n.bind(null,t,r,e),n=void 0,!Qf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function I0(e,t,r,a,n){var i=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var o=a.tag;if(o===3||o===4){var d=a.stateNode.containerInfo;if(d===n||d.nodeType===8&&d.parentNode===n)break;if(o===4)for(o=a.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;o=o.return}for(;d!==null;){if(o=ji(d),o===null)return;if(c=o.tag,c===5||c===6){a=i=o;continue e}d=d.parentNode}}a=a.return}B1(function(){var h=i,m=Ix(r),g=[];e:{var p=gN.get(e);if(p!==void 0){var k=Dx,x=e;switch(e){case"keypress":if(Vu(r)===0)break e;case"keydown":case"keyup":k=b3;break;case"focusin":x="focus",k=j0;break;case"focusout":x="blur",k=j0;break;case"beforeblur":case"afterblur":k=j0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=o3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=w3;break;case cN:case uN:case hN:k=c3;break;case mN:k=N3;break;case"scroll":k=n3;break;case"wheel":k=S3;break;case"copy":case"cut":case"paste":k=h3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=zv}var j=(t&4)!==0,y=!j&&e==="scroll",b=j?p!==null?p+"Capture":null:p;j=[];for(var w=h,N;w!==null;){N=w;var P=N.stateNode;if(N.tag===5&&P!==null&&(N=P,b!==null&&(P=$d(w,b),P!=null&&j.push(Gd(w,P,N)))),y)break;w=w.return}0<j.length&&(p=new k(p,x,null,r,m),g.push({event:p,listeners:j}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",p&&r!==Jf&&(x=r.relatedTarget||r.fromElement)&&(ji(x)||x[rn]))break e;if((k||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,k?(x=r.relatedTarget||r.toElement,k=h,x=x?ji(x):null,x!==null&&(y=Yi(x),x!==y||x.tag!==5&&x.tag!==6)&&(x=null)):(k=null,x=h),k!==x)){if(j=Fv,P="onMouseLeave",b="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(j=zv,P="onPointerLeave",b="onPointerEnter",w="pointer"),y=k==null?p:bo(k),N=x==null?p:bo(x),p=new j(P,w+"leave",k,r,m),p.target=y,p.relatedTarget=N,P=null,ji(m)===h&&(j=new j(b,w+"enter",x,r,m),j.target=N,j.relatedTarget=y,P=j),y=P,k&&x)t:{for(j=k,b=x,w=0,N=j;N;N=oo(N))w++;for(N=0,P=b;P;P=oo(P))N++;for(;0<w-N;)j=oo(j),w--;for(;0<N-w;)b=oo(b),N--;for(;w--;){if(j===b||b!==null&&j===b.alternate)break t;j=oo(j),b=oo(b)}j=null}else j=null;k!==null&&Jv(g,p,k,j,!1),x!==null&&y!==null&&Jv(g,y,x,j,!0)}}e:{if(p=h?bo(h):window,k=p.nodeName&&p.nodeName.toLowerCase(),k==="select"||k==="input"&&p.type==="file")var C=A3;else if(Vv(p))if(nN)C=O3;else{C=R3;var A=M3}else(k=p.nodeName)&&k.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=D3);if(C&&(C=C(e,h))){aN(g,C,r,m);break e}A&&A(e,p,h),e==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&qf(p,"number",p.value)}switch(A=h?bo(h):window,e){case"focusin":(Vv(A)||A.contentEditable==="true")&&(xo=A,ap=h,ad=null);break;case"focusout":ad=ap=xo=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,Gv(g,r,m);break;case"selectionchange":if(z3)break;case"keydown":case"keyup":Gv(g,r,m)}var E;if(Fx)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else po?rN(e,r)&&(F="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(F="onCompositionStart");F&&(tN&&r.locale!=="ko"&&(po||F!=="onCompositionStart"?F==="onCompositionEnd"&&po&&(E=eN()):(_n=m,Rx="value"in _n?_n.value:_n.textContent,po=!0)),A=Gh(h,F),0<A.length&&(F=new Bv(F,e,null,r,m),g.push({event:F,listeners:A}),E?F.data=E:(E=sN(r),E!==null&&(F.data=E)))),(E=P3?E3(e,r):I3(e,r))&&(h=Gh(h,"onBeforeInput"),0<h.length&&(m=new Bv("onBeforeInput","beforeinput",null,r,m),g.push({event:m,listeners:h}),m.data=E))}fN(g,t)})}function Gd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Gh(e,t){for(var r=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=$d(e,r),i!=null&&a.unshift(Gd(e,i,n)),i=$d(e,t),i!=null&&a.push(Gd(e,i,n))),e=e.return}return a}function oo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jv(e,t,r,a,n){for(var i=t._reactName,o=[];r!==null&&r!==a;){var d=r,c=d.alternate,h=d.stateNode;if(c!==null&&c===a)break;d.tag===5&&h!==null&&(d=h,n?(c=$d(r,i),c!=null&&o.unshift(Gd(r,c,d))):n||(c=$d(r,i),c!=null&&o.push(Gd(r,c,d)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var H3=/\r\n?/g,W3=/\u0000|\uFFFD/g;function Xv(e){return(typeof e=="string"?e:""+e).replace(H3,`
`).replace(W3,"")}function uu(e,t,r){if(t=Xv(t),Xv(e)!==t&&r)throw Error(ke(425))}function Zh(){}var ip=null,op=null;function lp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dp=typeof setTimeout=="function"?setTimeout:void 0,q3=typeof clearTimeout=="function"?clearTimeout:void 0,Qv=typeof Promise=="function"?Promise:void 0,K3=typeof queueMicrotask=="function"?queueMicrotask:typeof Qv<"u"?function(e){return Qv.resolve(null).then(e).catch(G3)}:dp;function G3(e){setTimeout(function(){throw e})}function T0(e,t){var r=t,a=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){e.removeChild(n),Hd(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);Hd(t)}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ek(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ol=Math.random().toString(36).slice(2),fa="__reactFiber$"+ol,Zd="__reactProps$"+ol,rn="__reactContainer$"+ol,cp="__reactEvents$"+ol,Z3="__reactListeners$"+ol,Y3="__reactHandles$"+ol;function ji(e){var t=e[fa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[rn]||r[fa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ek(e);e!==null;){if(r=e[fa])return r;e=ek(e)}return t}e=r,r=e.parentNode}return null}function kc(e){return e=e[fa]||e[rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function Wm(e){return e[Zd]||null}var up=[],vo=-1;function ti(e){return{current:e}}function St(e){0>vo||(e.current=up[vo],up[vo]=null,vo--)}function kt(e,t){vo++,up[vo]=e.current,e.current=t}var Kn={},Rr=ti(Kn),Yr=ti(!1),Oi=Kn;function qo(e,t){var r=e.type.contextTypes;if(!r)return Kn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Jr(e){return e=e.childContextTypes,e!=null}function Yh(){St(Yr),St(Rr)}function tk(e,t,r){if(Rr.current!==Kn)throw Error(ke(168));kt(Rr,t),kt(Yr,r)}function xN(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in t))throw Error(ke(108,M6(e)||"Unknown",n));return Ot({},r,a)}function Jh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kn,Oi=Rr.current,kt(Rr,e),kt(Yr,Yr.current),!0}function rk(e,t,r){var a=e.stateNode;if(!a)throw Error(ke(169));r?(e=xN(e,t,Oi),a.__reactInternalMemoizedMergedChildContext=e,St(Yr),St(Rr),kt(Rr,e)):St(Yr),kt(Yr,r)}var Ka=null,qm=!1,L0=!1;function yN(e){Ka===null?Ka=[e]:Ka.push(e)}function J3(e){qm=!0,yN(e)}function ri(){if(!L0&&Ka!==null){L0=!0;var e=0,t=gt;try{var r=Ka;for(gt=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Ka=null,qm=!1}catch(n){throw Ka!==null&&(Ka=Ka.slice(e+1)),V1(Tx,ri),n}finally{gt=t,L0=!1}}return null}var ko=[],wo=0,Xh=null,Qh=0,Ps=[],Es=0,Fi=null,Za=1,Ya="";function xi(e,t){ko[wo++]=Qh,ko[wo++]=Xh,Xh=e,Qh=t}function bN(e,t,r){Ps[Es++]=Za,Ps[Es++]=Ya,Ps[Es++]=Fi,Fi=e;var a=Za;e=Ya;var n=32-ea(a)-1;a&=~(1<<n),r+=1;var i=32-ea(t)+n;if(30<i){var o=n-n%5;i=(a&(1<<o)-1).toString(32),a>>=o,n-=o,Za=1<<32-ea(t)+n|r<<n|a,Ya=i+e}else Za=1<<i|r<<n|a,Ya=e}function zx(e){e.return!==null&&(xi(e,1),bN(e,1,0))}function $x(e){for(;e===Xh;)Xh=ko[--wo],ko[wo]=null,Qh=ko[--wo],ko[wo]=null;for(;e===Fi;)Fi=Ps[--Es],Ps[Es]=null,Ya=Ps[--Es],Ps[Es]=null,Za=Ps[--Es],Ps[Es]=null}var cs=null,ds=null,Lt=!1,Zs=null;function vN(e,t){var r=Ts(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function sk(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cs=e,ds=Rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cs=e,ds=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Fi!==null?{id:Za,overflow:Ya}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ts(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,cs=e,ds=null,!0):!1;default:return!1}}function hp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function mp(e){if(Lt){var t=ds;if(t){var r=t;if(!sk(e,t)){if(hp(e))throw Error(ke(418));t=Rn(r.nextSibling);var a=cs;t&&sk(e,t)?vN(a,r):(e.flags=e.flags&-4097|2,Lt=!1,cs=e)}}else{if(hp(e))throw Error(ke(418));e.flags=e.flags&-4097|2,Lt=!1,cs=e}}}function ak(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cs=e}function hu(e){if(e!==cs)return!1;if(!Lt)return ak(e),Lt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lp(e.type,e.memoizedProps)),t&&(t=ds)){if(hp(e))throw kN(),Error(ke(418));for(;t;)vN(e,t),t=Rn(t.nextSibling)}if(ak(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ds=Rn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ds=null}}else ds=cs?Rn(e.stateNode.nextSibling):null;return!0}function kN(){for(var e=ds;e;)e=Rn(e.nextSibling)}function Ko(){ds=cs=null,Lt=!1}function Ux(e){Zs===null?Zs=[e]:Zs.push(e)}var X3=ln.ReactCurrentBatchConfig;function Al(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ke(309));var a=r.stateNode}if(!a)throw Error(ke(147,e));var n=a,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var d=n.refs;o===null?delete d[i]:d[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ke(284));if(!r._owner)throw Error(ke(290,e))}return e}function mu(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nk(e){var t=e._init;return t(e._payload)}function wN(e){function t(b,w){if(e){var N=b.deletions;N===null?(b.deletions=[w],b.flags|=16):N.push(w)}}function r(b,w){if(!e)return null;for(;w!==null;)t(b,w),w=w.sibling;return null}function a(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function n(b,w){return b=Bn(b,w),b.index=0,b.sibling=null,b}function i(b,w,N){return b.index=N,e?(N=b.alternate,N!==null?(N=N.index,N<w?(b.flags|=2,w):N):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function d(b,w,N,P){return w===null||w.tag!==6?(w=B0(N,b.mode,P),w.return=b,w):(w=n(w,N),w.return=b,w)}function c(b,w,N,P){var C=N.type;return C===fo?m(b,w,N.props.children,P,N.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===yn&&nk(C)===w.type)?(P=n(w,N.props),P.ref=Al(b,w,N),P.return=b,P):(P=Yu(N.type,N.key,N.props,null,b.mode,P),P.ref=Al(b,w,N),P.return=b,P)}function h(b,w,N,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=z0(N,b.mode,P),w.return=b,w):(w=n(w,N.children||[]),w.return=b,w)}function m(b,w,N,P,C){return w===null||w.tag!==7?(w=Li(N,b.mode,P,C),w.return=b,w):(w=n(w,N),w.return=b,w)}function g(b,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=B0(""+w,b.mode,N),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ru:return N=Yu(w.type,w.key,w.props,null,b.mode,N),N.ref=Al(b,null,w),N.return=b,N;case go:return w=z0(w,b.mode,N),w.return=b,w;case yn:var P=w._init;return g(b,P(w._payload),N)}if(Wl(w)||Pl(w))return w=Li(w,b.mode,N,null),w.return=b,w;mu(b,w)}return null}function p(b,w,N,P){var C=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return C!==null?null:d(b,w,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case ru:return N.key===C?c(b,w,N,P):null;case go:return N.key===C?h(b,w,N,P):null;case yn:return C=N._init,p(b,w,C(N._payload),P)}if(Wl(N)||Pl(N))return C!==null?null:m(b,w,N,P,null);mu(b,N)}return null}function k(b,w,N,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(N)||null,d(w,b,""+P,C);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case ru:return b=b.get(P.key===null?N:P.key)||null,c(w,b,P,C);case go:return b=b.get(P.key===null?N:P.key)||null,h(w,b,P,C);case yn:var A=P._init;return k(b,w,N,A(P._payload),C)}if(Wl(P)||Pl(P))return b=b.get(N)||null,m(w,b,P,C,null);mu(w,P)}return null}function x(b,w,N,P){for(var C=null,A=null,E=w,F=w=0,I=null;E!==null&&F<N.length;F++){E.index>F?(I=E,E=null):I=E.sibling;var D=p(b,E,N[F],P);if(D===null){E===null&&(E=I);break}e&&E&&D.alternate===null&&t(b,E),w=i(D,w,F),A===null?C=D:A.sibling=D,A=D,E=I}if(F===N.length)return r(b,E),Lt&&xi(b,F),C;if(E===null){for(;F<N.length;F++)E=g(b,N[F],P),E!==null&&(w=i(E,w,F),A===null?C=E:A.sibling=E,A=E);return Lt&&xi(b,F),C}for(E=a(b,E);F<N.length;F++)I=k(E,b,F,N[F],P),I!==null&&(e&&I.alternate!==null&&E.delete(I.key===null?F:I.key),w=i(I,w,F),A===null?C=I:A.sibling=I,A=I);return e&&E.forEach(function(Y){return t(b,Y)}),Lt&&xi(b,F),C}function j(b,w,N,P){var C=Pl(N);if(typeof C!="function")throw Error(ke(150));if(N=C.call(N),N==null)throw Error(ke(151));for(var A=C=null,E=w,F=w=0,I=null,D=N.next();E!==null&&!D.done;F++,D=N.next()){E.index>F?(I=E,E=null):I=E.sibling;var Y=p(b,E,D.value,P);if(Y===null){E===null&&(E=I);break}e&&E&&Y.alternate===null&&t(b,E),w=i(Y,w,F),A===null?C=Y:A.sibling=Y,A=Y,E=I}if(D.done)return r(b,E),Lt&&xi(b,F),C;if(E===null){for(;!D.done;F++,D=N.next())D=g(b,D.value,P),D!==null&&(w=i(D,w,F),A===null?C=D:A.sibling=D,A=D);return Lt&&xi(b,F),C}for(E=a(b,E);!D.done;F++,D=N.next())D=k(E,b,F,D.value,P),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?F:D.key),w=i(D,w,F),A===null?C=D:A.sibling=D,A=D);return e&&E.forEach(function(R){return t(b,R)}),Lt&&xi(b,F),C}function y(b,w,N,P){if(typeof N=="object"&&N!==null&&N.type===fo&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case ru:e:{for(var C=N.key,A=w;A!==null;){if(A.key===C){if(C=N.type,C===fo){if(A.tag===7){r(b,A.sibling),w=n(A,N.props.children),w.return=b,b=w;break e}}else if(A.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===yn&&nk(C)===A.type){r(b,A.sibling),w=n(A,N.props),w.ref=Al(b,A,N),w.return=b,b=w;break e}r(b,A);break}else t(b,A);A=A.sibling}N.type===fo?(w=Li(N.props.children,b.mode,P,N.key),w.return=b,b=w):(P=Yu(N.type,N.key,N.props,null,b.mode,P),P.ref=Al(b,w,N),P.return=b,b=P)}return o(b);case go:e:{for(A=N.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){r(b,w.sibling),w=n(w,N.children||[]),w.return=b,b=w;break e}else{r(b,w);break}else t(b,w);w=w.sibling}w=z0(N,b.mode,P),w.return=b,b=w}return o(b);case yn:return A=N._init,y(b,w,A(N._payload),P)}if(Wl(N))return x(b,w,N,P);if(Pl(N))return j(b,w,N,P);mu(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(r(b,w.sibling),w=n(w,N),w.return=b,b=w):(r(b,w),w=B0(N,b.mode,P),w.return=b,b=w),o(b)):r(b,w)}return y}var Go=wN(!0),jN=wN(!1),em=ti(null),tm=null,jo=null,Vx=null;function Hx(){Vx=jo=tm=null}function Wx(e){var t=em.current;St(em),e._currentValue=t}function gp(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Ao(e,t){tm=e,Vx=jo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zr=!0),e.firstContext=null)}function Ms(e){var t=e._currentValue;if(Vx!==e)if(e={context:e,memoizedValue:t,next:null},jo===null){if(tm===null)throw Error(ke(308));jo=e,tm.dependencies={lanes:0,firstContext:e}}else jo=jo.next=e;return t}var Ni=null;function qx(e){Ni===null?Ni=[e]:Ni.push(e)}function NN(e,t,r,a){var n=t.interleaved;return n===null?(r.next=r,qx(t)):(r.next=n.next,n.next=r),t.interleaved=r,sn(e,a)}function sn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var bn=!1;function Kx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _N(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Dn(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,nt&2){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,sn(e,r)}return n=a.interleaved,n===null?(t.next=t,qx(a)):(t.next=n.next,n.next=t),a.interleaved=t,sn(e,r)}function Hu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Lx(e,r)}}function ik(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rm(e,t,r,a){var n=e.updateQueue;bn=!1;var i=n.firstBaseUpdate,o=n.lastBaseUpdate,d=n.shared.pending;if(d!==null){n.shared.pending=null;var c=d,h=c.next;c.next=null,o===null?i=h:o.next=h,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,d=m.lastBaseUpdate,d!==o&&(d===null?m.firstBaseUpdate=h:d.next=h,m.lastBaseUpdate=c))}if(i!==null){var g=n.baseState;o=0,m=h=c=null,d=i;do{var p=d.lane,k=d.eventTime;if((a&p)===p){m!==null&&(m=m.next={eventTime:k,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var x=e,j=d;switch(p=t,k=r,j.tag){case 1:if(x=j.payload,typeof x=="function"){g=x.call(k,g,p);break e}g=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=j.payload,p=typeof x=="function"?x.call(k,g,p):x,p==null)break e;g=Ot({},g,p);break e;case 2:bn=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,p=n.effects,p===null?n.effects=[d]:p.push(d))}else k={eventTime:k,lane:p,tag:d.tag,payload:d.payload,callback:d.callback,next:null},m===null?(h=m=k,c=g):m=m.next=k,o|=p;if(d=d.next,d===null){if(d=n.shared.pending,d===null)break;p=d,d=p.next,p.next=null,n.lastBaseUpdate=p,n.shared.pending=null}}while(!0);if(m===null&&(c=g),n.baseState=c,n.firstBaseUpdate=h,n.lastBaseUpdate=m,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);zi|=o,e.lanes=o,e.memoizedState=g}}function ok(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(ke(191,n));n.call(a)}}}var wc={},wa=ti(wc),Yd=ti(wc),Jd=ti(wc);function _i(e){if(e===wc)throw Error(ke(174));return e}function Gx(e,t){switch(kt(Jd,t),kt(Yd,e),kt(wa,wc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gf(t,e)}St(wa),kt(wa,t)}function Zo(){St(wa),St(Yd),St(Jd)}function SN(e){_i(Jd.current);var t=_i(wa.current),r=Gf(t,e.type);t!==r&&(kt(Yd,e),kt(wa,r))}function Zx(e){Yd.current===e&&(St(wa),St(Yd))}var Rt=ti(0);function sm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var A0=[];function Yx(){for(var e=0;e<A0.length;e++)A0[e]._workInProgressVersionPrimary=null;A0.length=0}var Wu=ln.ReactCurrentDispatcher,M0=ln.ReactCurrentBatchConfig,Bi=0,Dt=null,rr=null,dr=null,am=!1,nd=!1,Xd=0,Q3=0;function jr(){throw Error(ke(321))}function Jx(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ra(e[r],t[r]))return!1;return!0}function Xx(e,t,r,a,n,i){if(Bi=i,Dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wu.current=e===null||e.memoizedState===null?s5:a5,e=r(a,n),nd){i=0;do{if(nd=!1,Xd=0,25<=i)throw Error(ke(301));i+=1,dr=rr=null,t.updateQueue=null,Wu.current=n5,e=r(a,n)}while(nd)}if(Wu.current=nm,t=rr!==null&&rr.next!==null,Bi=0,dr=rr=Dt=null,am=!1,t)throw Error(ke(300));return e}function Qx(){var e=Xd!==0;return Xd=0,e}function ha(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dr===null?Dt.memoizedState=dr=e:dr=dr.next=e,dr}function Rs(){if(rr===null){var e=Dt.alternate;e=e!==null?e.memoizedState:null}else e=rr.next;var t=dr===null?Dt.memoizedState:dr.next;if(t!==null)dr=t,rr=e;else{if(e===null)throw Error(ke(310));rr=e,e={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},dr===null?Dt.memoizedState=dr=e:dr=dr.next=e}return dr}function Qd(e,t){return typeof t=="function"?t(e):t}function R0(e){var t=Rs(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=e;var a=rr,n=a.baseQueue,i=r.pending;if(i!==null){if(n!==null){var o=n.next;n.next=i.next,i.next=o}a.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,a=a.baseState;var d=o=null,c=null,h=i;do{var m=h.lane;if((Bi&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),a=h.hasEagerState?h.eagerState:e(a,h.action);else{var g={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(d=c=g,o=a):c=c.next=g,Dt.lanes|=m,zi|=m}h=h.next}while(h!==null&&h!==i);c===null?o=a:c.next=d,ra(a,t.memoizedState)||(Zr=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,r.lastRenderedState=a}if(e=r.interleaved,e!==null){n=e;do i=n.lane,Dt.lanes|=i,zi|=i,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function D0(e){var t=Rs(),r=t.queue;if(r===null)throw Error(ke(311));r.lastRenderedReducer=e;var a=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do i=e(i,o.action),o=o.next;while(o!==n);ra(i,t.memoizedState)||(Zr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,a]}function CN(){}function PN(e,t){var r=Dt,a=Rs(),n=t(),i=!ra(a.memoizedState,n);if(i&&(a.memoizedState=n,Zr=!0),a=a.queue,ey(TN.bind(null,r,a,e),[e]),a.getSnapshot!==t||i||dr!==null&&dr.memoizedState.tag&1){if(r.flags|=2048,ec(9,IN.bind(null,r,a,n,t),void 0,null),cr===null)throw Error(ke(349));Bi&30||EN(r,t,n)}return n}function EN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function IN(e,t,r,a){t.value=r,t.getSnapshot=a,LN(t)&&AN(e)}function TN(e,t,r){return r(function(){LN(t)&&AN(e)})}function LN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ra(e,r)}catch{return!0}}function AN(e){var t=sn(e,1);t!==null&&ta(t,e,1,-1)}function lk(e){var t=ha();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qd,lastRenderedState:e},t.queue=e,e=e.dispatch=r5.bind(null,Dt,e),[t.memoizedState,e]}function ec(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Dt.updateQueue,t===null?(t={lastEffect:null,stores:null},Dt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function MN(){return Rs().memoizedState}function qu(e,t,r,a){var n=ha();Dt.flags|=e,n.memoizedState=ec(1|t,r,void 0,a===void 0?null:a)}function Km(e,t,r,a){var n=Rs();a=a===void 0?null:a;var i=void 0;if(rr!==null){var o=rr.memoizedState;if(i=o.destroy,a!==null&&Jx(a,o.deps)){n.memoizedState=ec(t,r,i,a);return}}Dt.flags|=e,n.memoizedState=ec(1|t,r,i,a)}function dk(e,t){return qu(8390656,8,e,t)}function ey(e,t){return Km(2048,8,e,t)}function RN(e,t){return Km(4,2,e,t)}function DN(e,t){return Km(4,4,e,t)}function ON(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FN(e,t,r){return r=r!=null?r.concat([e]):null,Km(4,4,ON.bind(null,t,e),r)}function ty(){}function BN(e,t){var r=Rs();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Jx(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function zN(e,t){var r=Rs();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Jx(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function $N(e,t,r){return Bi&21?(ra(r,t)||(r=q1(),Dt.lanes|=r,zi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zr=!0),e.memoizedState=r)}function e5(e,t){var r=gt;gt=r!==0&&4>r?r:4,e(!0);var a=M0.transition;M0.transition={};try{e(!1),t()}finally{gt=r,M0.transition=a}}function UN(){return Rs().memoizedState}function t5(e,t,r){var a=Fn(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},VN(e))HN(t,r);else if(r=NN(e,t,r,a),r!==null){var n=Br();ta(r,e,a,n),WN(r,t,a)}}function r5(e,t,r){var a=Fn(e),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(VN(e))HN(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,d=i(o,r);if(n.hasEagerState=!0,n.eagerState=d,ra(d,o)){var c=t.interleaved;c===null?(n.next=n,qx(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=NN(e,t,n,a),r!==null&&(n=Br(),ta(r,e,a,n),WN(r,t,a))}}function VN(e){var t=e.alternate;return e===Dt||t!==null&&t===Dt}function HN(e,t){nd=am=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function WN(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Lx(e,r)}}var nm={readContext:Ms,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},s5={readContext:Ms,useCallback:function(e,t){return ha().memoizedState=[e,t===void 0?null:t],e},useContext:Ms,useEffect:dk,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qu(4194308,4,ON.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qu(4194308,4,e,t)},useInsertionEffect:function(e,t){return qu(4,2,e,t)},useMemo:function(e,t){var r=ha();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=ha();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=t5.bind(null,Dt,e),[a.memoizedState,e]},useRef:function(e){var t=ha();return e={current:e},t.memoizedState=e},useState:lk,useDebugValue:ty,useDeferredValue:function(e){return ha().memoizedState=e},useTransition:function(){var e=lk(!1),t=e[0];return e=e5.bind(null,e[1]),ha().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Dt,n=ha();if(Lt){if(r===void 0)throw Error(ke(407));r=r()}else{if(r=t(),cr===null)throw Error(ke(349));Bi&30||EN(a,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,dk(TN.bind(null,a,i,e),[e]),a.flags|=2048,ec(9,IN.bind(null,a,i,r,t),void 0,null),r},useId:function(){var e=ha(),t=cr.identifierPrefix;if(Lt){var r=Ya,a=Za;r=(a&~(1<<32-ea(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Xd++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Q3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},a5={readContext:Ms,useCallback:BN,useContext:Ms,useEffect:ey,useImperativeHandle:FN,useInsertionEffect:RN,useLayoutEffect:DN,useMemo:zN,useReducer:R0,useRef:MN,useState:function(){return R0(Qd)},useDebugValue:ty,useDeferredValue:function(e){var t=Rs();return $N(t,rr.memoizedState,e)},useTransition:function(){var e=R0(Qd)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:CN,useSyncExternalStore:PN,useId:UN,unstable_isNewReconciler:!1},n5={readContext:Ms,useCallback:BN,useContext:Ms,useEffect:ey,useImperativeHandle:FN,useInsertionEffect:RN,useLayoutEffect:DN,useMemo:zN,useReducer:D0,useRef:MN,useState:function(){return D0(Qd)},useDebugValue:ty,useDeferredValue:function(e){var t=Rs();return rr===null?t.memoizedState=e:$N(t,rr.memoizedState,e)},useTransition:function(){var e=D0(Qd)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:CN,useSyncExternalStore:PN,useId:UN,unstable_isNewReconciler:!1};function Hs(e,t){if(e&&e.defaultProps){t=Ot({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function fp(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Ot({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Gm={isMounted:function(e){return(e=e._reactInternals)?Yi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Br(),n=Fn(e),i=Ja(a,n);i.payload=t,r!=null&&(i.callback=r),t=Dn(e,i,n),t!==null&&(ta(t,e,n,a),Hu(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Br(),n=Fn(e),i=Ja(a,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Dn(e,i,n),t!==null&&(ta(t,e,n,a),Hu(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Br(),a=Fn(e),n=Ja(r,a);n.tag=2,t!=null&&(n.callback=t),t=Dn(e,n,a),t!==null&&(ta(t,e,a,r),Hu(t,e,a))}};function ck(e,t,r,a,n,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,o):t.prototype&&t.prototype.isPureReactComponent?!qd(r,a)||!qd(n,i):!0}function qN(e,t,r){var a=!1,n=Kn,i=t.contextType;return typeof i=="object"&&i!==null?i=Ms(i):(n=Jr(t)?Oi:Rr.current,a=t.contextTypes,i=(a=a!=null)?qo(e,n):Kn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Gm,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function uk(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Gm.enqueueReplaceState(t,t.state,null)}function pp(e,t,r,a){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Kx(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=Ms(i):(i=Jr(t)?Oi:Rr.current,n.context=qo(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fp(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Gm.enqueueReplaceState(n,n.state,null),rm(e,r,n,a),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Yo(e,t){try{var r="",a=t;do r+=A6(a),a=a.return;while(a);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function O0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function xp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var i5=typeof WeakMap=="function"?WeakMap:Map;function KN(e,t,r){r=Ja(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){om||(om=!0,Cp=a),xp(e,t)},r}function GN(e,t,r){r=Ja(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){xp(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){xp(e,t),typeof a!="function"&&(On===null?On=new Set([this]):On.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function hk(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new i5;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),e=v5.bind(null,e,t,r),t.then(e,e))}function mk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function gk(e,t,r,a,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ja(-1,1),t.tag=2,Dn(r,t,1))),r.lanes|=1),e)}var o5=ln.ReactCurrentOwner,Zr=!1;function Or(e,t,r,a){t.child=e===null?jN(t,null,r,a):Go(t,e.child,r,a)}function fk(e,t,r,a,n){r=r.render;var i=t.ref;return Ao(t,n),a=Xx(e,t,r,a,i,n),r=Qx(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,an(e,t,n)):(Lt&&r&&zx(t),t.flags|=1,Or(e,t,a,n),t.child)}function pk(e,t,r,a,n){if(e===null){var i=r.type;return typeof i=="function"&&!dy(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,ZN(e,t,i,a,n)):(e=Yu(r.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:qd,r(o,a)&&e.ref===t.ref)return an(e,t,n)}return t.flags|=1,e=Bn(i,a),e.ref=t.ref,e.return=t,t.child=e}function ZN(e,t,r,a,n){if(e!==null){var i=e.memoizedProps;if(qd(i,a)&&e.ref===t.ref)if(Zr=!1,t.pendingProps=a=i,(e.lanes&n)!==0)e.flags&131072&&(Zr=!0);else return t.lanes=e.lanes,an(e,t,n)}return yp(e,t,r,a,n)}function YN(e,t,r){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(_o,is),is|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kt(_o,is),is|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=i!==null?i.baseLanes:r,kt(_o,is),is|=a}else i!==null?(a=i.baseLanes|r,t.memoizedState=null):a=r,kt(_o,is),is|=a;return Or(e,t,n,r),t.child}function JN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function yp(e,t,r,a,n){var i=Jr(r)?Oi:Rr.current;return i=qo(t,i),Ao(t,n),r=Xx(e,t,r,a,i,n),a=Qx(),e!==null&&!Zr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,an(e,t,n)):(Lt&&a&&zx(t),t.flags|=1,Or(e,t,r,n),t.child)}function xk(e,t,r,a,n){if(Jr(r)){var i=!0;Jh(t)}else i=!1;if(Ao(t,n),t.stateNode===null)Ku(e,t),qN(t,r,a),pp(t,r,a,n),a=!0;else if(e===null){var o=t.stateNode,d=t.memoizedProps;o.props=d;var c=o.context,h=r.contextType;typeof h=="object"&&h!==null?h=Ms(h):(h=Jr(r)?Oi:Rr.current,h=qo(t,h));var m=r.getDerivedStateFromProps,g=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==a||c!==h)&&uk(t,o,a,h),bn=!1;var p=t.memoizedState;o.state=p,rm(t,a,o,n),c=t.memoizedState,d!==a||p!==c||Yr.current||bn?(typeof m=="function"&&(fp(t,r,m,a),c=t.memoizedState),(d=bn||ck(t,r,d,a,p,c,h))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),o.props=a,o.state=c,o.context=h,a=d):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,_N(e,t),d=t.memoizedProps,h=t.type===t.elementType?d:Hs(t.type,d),o.props=h,g=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ms(c):(c=Jr(r)?Oi:Rr.current,c=qo(t,c));var k=r.getDerivedStateFromProps;(m=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==g||p!==c)&&uk(t,o,a,c),bn=!1,p=t.memoizedState,o.state=p,rm(t,a,o,n);var x=t.memoizedState;d!==g||p!==x||Yr.current||bn?(typeof k=="function"&&(fp(t,r,k,a),x=t.memoizedState),(h=bn||ck(t,r,h,a,p,x,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=x),o.props=a,o.state=x,o.context=c,a=h):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),a=!1)}return bp(e,t,r,a,i,n)}function bp(e,t,r,a,n,i){JN(e,t);var o=(t.flags&128)!==0;if(!a&&!o)return n&&rk(t,r,!1),an(e,t,i);a=t.stateNode,o5.current=t;var d=o&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&o?(t.child=Go(t,e.child,null,i),t.child=Go(t,null,d,i)):Or(e,t,d,i),t.memoizedState=a.state,n&&rk(t,r,!0),t.child}function XN(e){var t=e.stateNode;t.pendingContext?tk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tk(e,t.context,!1),Gx(e,t.containerInfo)}function yk(e,t,r,a,n){return Ko(),Ux(n),t.flags|=256,Or(e,t,r,a),t.child}var vp={dehydrated:null,treeContext:null,retryLane:0};function kp(e){return{baseLanes:e,cachePool:null,transitions:null}}function QN(e,t,r){var a=t.pendingProps,n=Rt.current,i=!1,o=(t.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(n&2)!==0),d?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),kt(Rt,n&1),e===null)return mp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=a.children,e=a.fallback,i?(a=t.mode,i=t.child,o={mode:"hidden",children:o},!(a&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Jm(o,a,0,null),e=Li(e,a,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=kp(r),t.memoizedState=vp,e):ry(t,o));if(n=e.memoizedState,n!==null&&(d=n.dehydrated,d!==null))return l5(e,t,o,a,d,n,r);if(i){i=a.fallback,o=t.mode,n=e.child,d=n.sibling;var c={mode:"hidden",children:a.children};return!(o&1)&&t.child!==n?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=Bn(n,c),a.subtreeFlags=n.subtreeFlags&14680064),d!==null?i=Bn(d,i):(i=Li(i,o,r,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,o=e.child.memoizedState,o=o===null?kp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=vp,a}return i=e.child,e=i.sibling,a=Bn(i,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function ry(e,t){return t=Jm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function gu(e,t,r,a){return a!==null&&Ux(a),Go(t,e.child,null,r),e=ry(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function l5(e,t,r,a,n,i,o){if(r)return t.flags&256?(t.flags&=-257,a=O0(Error(ke(422))),gu(e,t,o,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=a.fallback,n=t.mode,a=Jm({mode:"visible",children:a.children},n,0,null),i=Li(i,n,o,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,t.mode&1&&Go(t,e.child,null,o),t.child.memoizedState=kp(o),t.memoizedState=vp,i);if(!(t.mode&1))return gu(e,t,o,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var d=a.dgst;return a=d,i=Error(ke(419)),a=O0(i,a,void 0),gu(e,t,o,a)}if(d=(o&e.childLanes)!==0,Zr||d){if(a=cr,a!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|o)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,sn(e,n),ta(a,e,n,-1))}return ly(),a=O0(Error(ke(421))),gu(e,t,o,a)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=k5.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,ds=Rn(n.nextSibling),cs=t,Lt=!0,Zs=null,e!==null&&(Ps[Es++]=Za,Ps[Es++]=Ya,Ps[Es++]=Fi,Za=e.id,Ya=e.overflow,Fi=t),t=ry(t,a.children),t.flags|=4096,t)}function bk(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),gp(e.return,t,r)}function F0(e,t,r,a,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=r,i.tailMode=n)}function e2(e,t,r){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(Or(e,t,a.children,r),a=Rt.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bk(e,r,t);else if(e.tag===19)bk(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(kt(Rt,a),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&sm(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),F0(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&sm(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}F0(t,!0,r,null,i);break;case"together":F0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function an(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,r=Bn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function d5(e,t,r){switch(t.tag){case 3:XN(t),Ko();break;case 5:SN(t);break;case 1:Jr(t.type)&&Jh(t);break;case 4:Gx(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;kt(em,a._currentValue),a._currentValue=n;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(kt(Rt,Rt.current&1),t.flags|=128,null):r&t.child.childLanes?QN(e,t,r):(kt(Rt,Rt.current&1),e=an(e,t,r),e!==null?e.sibling:null);kt(Rt,Rt.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return e2(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),kt(Rt,Rt.current),a)break;return null;case 22:case 23:return t.lanes=0,YN(e,t,r)}return an(e,t,r)}var t2,wp,r2,s2;t2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wp=function(){};r2=function(e,t,r,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,_i(wa.current);var i=null;switch(r){case"input":n=Hf(e,n),a=Hf(e,a),i=[];break;case"select":n=Ot({},n,{value:void 0}),a=Ot({},a,{value:void 0}),i=[];break;case"textarea":n=Kf(e,n),a=Kf(e,a),i=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Zh)}Zf(r,a);var o;r=null;for(h in n)if(!a.hasOwnProperty(h)&&n.hasOwnProperty(h)&&n[h]!=null)if(h==="style"){var d=n[h];for(o in d)d.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Bd.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in a){var c=a[h];if(d=n!=null?n[h]:void 0,a.hasOwnProperty(h)&&c!==d&&(c!=null||d!=null))if(h==="style")if(d){for(o in d)!d.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&d[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Bd.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Nt("scroll",e),i||d===c||(i=[])):(i=i||[]).push(h,c))}r&&(i=i||[]).push("style",r);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};s2=function(e,t,r,a){r!==a&&(t.flags|=4)};function Ml(e,t){if(!Lt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Nr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function c5(e,t,r){var a=t.pendingProps;switch($x(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(t),null;case 1:return Jr(t.type)&&Yh(),Nr(t),null;case 3:return a=t.stateNode,Zo(),St(Yr),St(Rr),Yx(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(hu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Zs!==null&&(Ip(Zs),Zs=null))),wp(e,t),Nr(t),null;case 5:Zx(t);var n=_i(Jd.current);if(r=t.type,e!==null&&t.stateNode!=null)r2(e,t,r,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(ke(166));return Nr(t),null}if(e=_i(wa.current),hu(t)){a=t.stateNode,r=t.type;var i=t.memoizedProps;switch(a[fa]=t,a[Zd]=i,e=(t.mode&1)!==0,r){case"dialog":Nt("cancel",a),Nt("close",a);break;case"iframe":case"object":case"embed":Nt("load",a);break;case"video":case"audio":for(n=0;n<Kl.length;n++)Nt(Kl[n],a);break;case"source":Nt("error",a);break;case"img":case"image":case"link":Nt("error",a),Nt("load",a);break;case"details":Nt("toggle",a);break;case"input":Pv(a,i),Nt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Nt("invalid",a);break;case"textarea":Iv(a,i),Nt("invalid",a)}Zf(r,i),n=null;for(var o in i)if(i.hasOwnProperty(o)){var d=i[o];o==="children"?typeof d=="string"?a.textContent!==d&&(i.suppressHydrationWarning!==!0&&uu(a.textContent,d,e),n=["children",d]):typeof d=="number"&&a.textContent!==""+d&&(i.suppressHydrationWarning!==!0&&uu(a.textContent,d,e),n=["children",""+d]):Bd.hasOwnProperty(o)&&d!=null&&o==="onScroll"&&Nt("scroll",a)}switch(r){case"input":su(a),Ev(a,i,!0);break;case"textarea":su(a),Tv(a);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(a.onclick=Zh)}a=n,t.updateQueue=a,a!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=T1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=o.createElement(r,{is:a.is}):(e=o.createElement(r),r==="select"&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,r),e[fa]=t,e[Zd]=a,t2(e,t,!1,!1),t.stateNode=e;e:{switch(o=Yf(r,a),r){case"dialog":Nt("cancel",e),Nt("close",e),n=a;break;case"iframe":case"object":case"embed":Nt("load",e),n=a;break;case"video":case"audio":for(n=0;n<Kl.length;n++)Nt(Kl[n],e);n=a;break;case"source":Nt("error",e),n=a;break;case"img":case"image":case"link":Nt("error",e),Nt("load",e),n=a;break;case"details":Nt("toggle",e),n=a;break;case"input":Pv(e,a),n=Hf(e,a),Nt("invalid",e);break;case"option":n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=Ot({},a,{value:void 0}),Nt("invalid",e);break;case"textarea":Iv(e,a),n=Kf(e,a),Nt("invalid",e);break;default:n=a}Zf(r,n),d=n;for(i in d)if(d.hasOwnProperty(i)){var c=d[i];i==="style"?M1(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&L1(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&zd(e,c):typeof c=="number"&&zd(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bd.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Nt("scroll",e):c!=null&&Sx(e,i,c,o))}switch(r){case"input":su(e),Ev(e,a,!1);break;case"textarea":su(e),Tv(e);break;case"option":a.value!=null&&e.setAttribute("value",""+qn(a.value));break;case"select":e.multiple=!!a.multiple,i=a.value,i!=null?Eo(e,!!a.multiple,i,!1):a.defaultValue!=null&&Eo(e,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Zh)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Nr(t),null;case 6:if(e&&t.stateNode!=null)s2(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(ke(166));if(r=_i(Jd.current),_i(wa.current),hu(t)){if(a=t.stateNode,r=t.memoizedProps,a[fa]=t,(i=a.nodeValue!==r)&&(e=cs,e!==null))switch(e.tag){case 3:uu(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&uu(a.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[fa]=t,t.stateNode=a}return Nr(t),null;case 13:if(St(Rt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Lt&&ds!==null&&t.mode&1&&!(t.flags&128))kN(),Ko(),t.flags|=98560,i=!1;else if(i=hu(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(ke(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ke(317));i[fa]=t}else Ko(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Nr(t),i=!1}else Zs!==null&&(Ip(Zs),Zs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||Rt.current&1?ar===0&&(ar=3):ly())),t.updateQueue!==null&&(t.flags|=4),Nr(t),null);case 4:return Zo(),wp(e,t),e===null&&Kd(t.stateNode.containerInfo),Nr(t),null;case 10:return Wx(t.type._context),Nr(t),null;case 17:return Jr(t.type)&&Yh(),Nr(t),null;case 19:if(St(Rt),i=t.memoizedState,i===null)return Nr(t),null;if(a=(t.flags&128)!==0,o=i.rendering,o===null)if(a)Ml(i,!1);else{if(ar!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=sm(e),o!==null){for(t.flags|=128,Ml(i,!1),a=o.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)i=r,e=a,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return kt(Rt,Rt.current&1|2),t.child}e=e.sibling}i.tail!==null&&$t()>Jo&&(t.flags|=128,a=!0,Ml(i,!1),t.lanes=4194304)}else{if(!a)if(e=sm(o),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ml(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Lt)return Nr(t),null}else 2*$t()-i.renderingStartTime>Jo&&r!==1073741824&&(t.flags|=128,a=!0,Ml(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$t(),t.sibling=null,r=Rt.current,kt(Rt,a?r&1|2:r&1),t):(Nr(t),null);case 22:case 23:return oy(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?is&1073741824&&(Nr(t),t.subtreeFlags&6&&(t.flags|=8192)):Nr(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function u5(e,t){switch($x(t),t.tag){case 1:return Jr(t.type)&&Yh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zo(),St(Yr),St(Rr),Yx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zx(t),null;case 13:if(St(Rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));Ko()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return St(Rt),null;case 4:return Zo(),null;case 10:return Wx(t.type._context),null;case 22:case 23:return oy(),null;case 24:return null;default:return null}}var fu=!1,Pr=!1,h5=typeof WeakSet=="function"?WeakSet:Set,Te=null;function No(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){Bt(e,t,a)}else r.current=null}function jp(e,t,r){try{r()}catch(a){Bt(e,t,a)}}var vk=!1;function m5(e,t){if(ip=qh,e=lN(),Bx(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,d=-1,c=-1,h=0,m=0,g=e,p=null;t:for(;;){for(var k;g!==r||n!==0&&g.nodeType!==3||(d=o+n),g!==i||a!==0&&g.nodeType!==3||(c=o+a),g.nodeType===3&&(o+=g.nodeValue.length),(k=g.firstChild)!==null;)p=g,g=k;for(;;){if(g===e)break t;if(p===r&&++h===n&&(d=o),p===i&&++m===a&&(c=o),(k=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=k}r=d===-1||c===-1?null:{start:d,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(op={focusedElem:e,selectionRange:r},qh=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var j=x.memoizedProps,y=x.memoizedState,b=t.stateNode,w=b.getSnapshotBeforeUpdate(t.elementType===t.type?j:Hs(t.type,j),y);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=t.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(P){Bt(t,t.return,P)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return x=vk,vk=!1,x}function id(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&jp(t,r,i)}n=n.next}while(n!==a)}}function Zm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Np(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function a2(e){var t=e.alternate;t!==null&&(e.alternate=null,a2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fa],delete t[Zd],delete t[cp],delete t[Z3],delete t[Y3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function n2(e){return e.tag===5||e.tag===3||e.tag===4}function kk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||n2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _p(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zh));else if(a!==4&&(e=e.child,e!==null))for(_p(e,t,r),e=e.sibling;e!==null;)_p(e,t,r),e=e.sibling}function Sp(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Sp(e,t,r),e=e.sibling;e!==null;)Sp(e,t,r),e=e.sibling}var fr=null,qs=!1;function gn(e,t,r){for(r=r.child;r!==null;)i2(e,t,r),r=r.sibling}function i2(e,t,r){if(ka&&typeof ka.onCommitFiberUnmount=="function")try{ka.onCommitFiberUnmount($m,r)}catch{}switch(r.tag){case 5:Pr||No(r,t);case 6:var a=fr,n=qs;fr=null,gn(e,t,r),fr=a,qs=n,fr!==null&&(qs?(e=fr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):fr.removeChild(r.stateNode));break;case 18:fr!==null&&(qs?(e=fr,r=r.stateNode,e.nodeType===8?T0(e.parentNode,r):e.nodeType===1&&T0(e,r),Hd(e)):T0(fr,r.stateNode));break;case 4:a=fr,n=qs,fr=r.stateNode.containerInfo,qs=!0,gn(e,t,r),fr=a,qs=n;break;case 0:case 11:case 14:case 15:if(!Pr&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var i=n,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jp(r,t,o),n=n.next}while(n!==a)}gn(e,t,r);break;case 1:if(!Pr&&(No(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(d){Bt(r,t,d)}gn(e,t,r);break;case 21:gn(e,t,r);break;case 22:r.mode&1?(Pr=(a=Pr)||r.memoizedState!==null,gn(e,t,r),Pr=a):gn(e,t,r);break;default:gn(e,t,r)}}function wk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new h5),t.forEach(function(a){var n=w5.bind(null,e,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Vs(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var i=e,o=t,d=o;e:for(;d!==null;){switch(d.tag){case 5:fr=d.stateNode,qs=!1;break e;case 3:fr=d.stateNode.containerInfo,qs=!0;break e;case 4:fr=d.stateNode.containerInfo,qs=!0;break e}d=d.return}if(fr===null)throw Error(ke(160));i2(i,o,n),fr=null,qs=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(h){Bt(n,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)o2(t,e),t=t.sibling}function o2(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Vs(t,e),la(e),a&4){try{id(3,e,e.return),Zm(3,e)}catch(j){Bt(e,e.return,j)}try{id(5,e,e.return)}catch(j){Bt(e,e.return,j)}}break;case 1:Vs(t,e),la(e),a&512&&r!==null&&No(r,r.return);break;case 5:if(Vs(t,e),la(e),a&512&&r!==null&&No(r,r.return),e.flags&32){var n=e.stateNode;try{zd(n,"")}catch(j){Bt(e,e.return,j)}}if(a&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,d=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{d==="input"&&i.type==="radio"&&i.name!=null&&E1(n,i),Yf(d,o);var h=Yf(d,i);for(o=0;o<c.length;o+=2){var m=c[o],g=c[o+1];m==="style"?M1(n,g):m==="dangerouslySetInnerHTML"?L1(n,g):m==="children"?zd(n,g):Sx(n,m,g,h)}switch(d){case"input":Wf(n,i);break;case"textarea":I1(n,i);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?Eo(n,!!i.multiple,k,!1):p!==!!i.multiple&&(i.defaultValue!=null?Eo(n,!!i.multiple,i.defaultValue,!0):Eo(n,!!i.multiple,i.multiple?[]:"",!1))}n[Zd]=i}catch(j){Bt(e,e.return,j)}}break;case 6:if(Vs(t,e),la(e),a&4){if(e.stateNode===null)throw Error(ke(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(j){Bt(e,e.return,j)}}break;case 3:if(Vs(t,e),la(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Hd(t.containerInfo)}catch(j){Bt(e,e.return,j)}break;case 4:Vs(t,e),la(e);break;case 13:Vs(t,e),la(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(ny=$t())),a&4&&wk(e);break;case 22:if(m=r!==null&&r.memoizedState!==null,e.mode&1?(Pr=(h=Pr)||m,Vs(t,e),Pr=h):Vs(t,e),la(e),a&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!m&&e.mode&1)for(Te=e,m=e.child;m!==null;){for(g=Te=m;Te!==null;){switch(p=Te,k=p.child,p.tag){case 0:case 11:case 14:case 15:id(4,p,p.return);break;case 1:No(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){a=p,r=p.return;try{t=a,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(j){Bt(a,r,j)}}break;case 5:No(p,p.return);break;case 22:if(p.memoizedState!==null){Nk(g);continue}}k!==null?(k.return=p,Te=k):Nk(g)}m=m.sibling}e:for(m=null,g=e;;){if(g.tag===5){if(m===null){m=g;try{n=g.stateNode,h?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(d=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=A1("display",o))}catch(j){Bt(e,e.return,j)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=h?"":g.memoizedProps}catch(j){Bt(e,e.return,j)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Vs(t,e),la(e),a&4&&wk(e);break;case 21:break;default:Vs(t,e),la(e)}}function la(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(n2(r)){var a=r;break e}r=r.return}throw Error(ke(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(zd(n,""),a.flags&=-33);var i=kk(e);Sp(e,i,n);break;case 3:case 4:var o=a.stateNode.containerInfo,d=kk(e);_p(e,d,o);break;default:throw Error(ke(161))}}catch(c){Bt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function g5(e,t,r){Te=e,l2(e)}function l2(e,t,r){for(var a=(e.mode&1)!==0;Te!==null;){var n=Te,i=n.child;if(n.tag===22&&a){var o=n.memoizedState!==null||fu;if(!o){var d=n.alternate,c=d!==null&&d.memoizedState!==null||Pr;d=fu;var h=Pr;if(fu=o,(Pr=c)&&!h)for(Te=n;Te!==null;)o=Te,c=o.child,o.tag===22&&o.memoizedState!==null?_k(n):c!==null?(c.return=o,Te=c):_k(n);for(;i!==null;)Te=i,l2(i),i=i.sibling;Te=n,fu=d,Pr=h}jk(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,Te=i):jk(e)}}function jk(e){for(;Te!==null;){var t=Te;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pr||Zm(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Pr)if(r===null)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Hs(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ok(t,i,a);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ok(t,o,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Hd(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}Pr||t.flags&512&&Np(t)}catch(p){Bt(t,t.return,p)}}if(t===e){Te=null;break}if(r=t.sibling,r!==null){r.return=t.return,Te=r;break}Te=t.return}}function Nk(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Te=r;break}Te=t.return}}function _k(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Zm(4,t)}catch(c){Bt(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var n=t.return;try{a.componentDidMount()}catch(c){Bt(t,n,c)}}var i=t.return;try{Np(t)}catch(c){Bt(t,i,c)}break;case 5:var o=t.return;try{Np(t)}catch(c){Bt(t,o,c)}}}catch(c){Bt(t,t.return,c)}if(t===e){Te=null;break}var d=t.sibling;if(d!==null){d.return=t.return,Te=d;break}Te=t.return}}var f5=Math.ceil,im=ln.ReactCurrentDispatcher,sy=ln.ReactCurrentOwner,As=ln.ReactCurrentBatchConfig,nt=0,cr=null,Jt=null,vr=0,is=0,_o=ti(0),ar=0,tc=null,zi=0,Ym=0,ay=0,od=null,Kr=null,ny=0,Jo=1/0,qa=null,om=!1,Cp=null,On=null,pu=!1,Sn=null,lm=0,ld=0,Pp=null,Gu=-1,Zu=0;function Br(){return nt&6?$t():Gu!==-1?Gu:Gu=$t()}function Fn(e){return e.mode&1?nt&2&&vr!==0?vr&-vr:X3.transition!==null?(Zu===0&&(Zu=q1()),Zu):(e=gt,e!==0||(e=window.event,e=e===void 0?16:Q1(e.type)),e):1}function ta(e,t,r,a){if(50<ld)throw ld=0,Pp=null,Error(ke(185));bc(e,r,a),(!(nt&2)||e!==cr)&&(e===cr&&(!(nt&2)&&(Ym|=r),ar===4&&kn(e,vr)),Xr(e,a),r===1&&nt===0&&!(t.mode&1)&&(Jo=$t()+500,qm&&ri()))}function Xr(e,t){var r=e.callbackNode;X6(e,t);var a=Wh(e,e===cr?vr:0);if(a===0)r!==null&&Mv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&Mv(r),t===1)e.tag===0?J3(Sk.bind(null,e)):yN(Sk.bind(null,e)),K3(function(){!(nt&6)&&ri()}),r=null;else{switch(K1(a)){case 1:r=Tx;break;case 4:r=H1;break;case 16:r=Hh;break;case 536870912:r=W1;break;default:r=Hh}r=p2(r,d2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function d2(e,t){if(Gu=-1,Zu=0,nt&6)throw Error(ke(327));var r=e.callbackNode;if(Mo()&&e.callbackNode!==r)return null;var a=Wh(e,e===cr?vr:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=dm(e,a);else{t=a;var n=nt;nt|=2;var i=u2();(cr!==e||vr!==t)&&(qa=null,Jo=$t()+500,Ti(e,t));do try{y5();break}catch(d){c2(e,d)}while(!0);Hx(),im.current=i,nt=n,Jt!==null?t=0:(cr=null,vr=0,t=ar)}if(t!==0){if(t===2&&(n=tp(e),n!==0&&(a=n,t=Ep(e,n))),t===1)throw r=tc,Ti(e,0),kn(e,a),Xr(e,$t()),r;if(t===6)kn(e,a);else{if(n=e.current.alternate,!(a&30)&&!p5(n)&&(t=dm(e,a),t===2&&(i=tp(e),i!==0&&(a=i,t=Ep(e,i))),t===1))throw r=tc,Ti(e,0),kn(e,a),Xr(e,$t()),r;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(ke(345));case 2:yi(e,Kr,qa);break;case 3:if(kn(e,a),(a&130023424)===a&&(t=ny+500-$t(),10<t)){if(Wh(e,0)!==0)break;if(n=e.suspendedLanes,(n&a)!==a){Br(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=dp(yi.bind(null,e,Kr,qa),t);break}yi(e,Kr,qa);break;case 4:if(kn(e,a),(a&4194240)===a)break;for(t=e.eventTimes,n=-1;0<a;){var o=31-ea(a);i=1<<o,o=t[o],o>n&&(n=o),a&=~i}if(a=n,a=$t()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*f5(a/1960))-a,10<a){e.timeoutHandle=dp(yi.bind(null,e,Kr,qa),a);break}yi(e,Kr,qa);break;case 5:yi(e,Kr,qa);break;default:throw Error(ke(329))}}}return Xr(e,$t()),e.callbackNode===r?d2.bind(null,e):null}function Ep(e,t){var r=od;return e.current.memoizedState.isDehydrated&&(Ti(e,t).flags|=256),e=dm(e,t),e!==2&&(t=Kr,Kr=r,t!==null&&Ip(t)),e}function Ip(e){Kr===null?Kr=e:Kr.push.apply(Kr,e)}function p5(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],i=n.getSnapshot;n=n.value;try{if(!ra(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~ay,t&=~Ym,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ea(t),a=1<<r;e[r]=-1,t&=~a}}function Sk(e){if(nt&6)throw Error(ke(327));Mo();var t=Wh(e,0);if(!(t&1))return Xr(e,$t()),null;var r=dm(e,t);if(e.tag!==0&&r===2){var a=tp(e);a!==0&&(t=a,r=Ep(e,a))}if(r===1)throw r=tc,Ti(e,0),kn(e,t),Xr(e,$t()),r;if(r===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yi(e,Kr,qa),Xr(e,$t()),null}function iy(e,t){var r=nt;nt|=1;try{return e(t)}finally{nt=r,nt===0&&(Jo=$t()+500,qm&&ri())}}function $i(e){Sn!==null&&Sn.tag===0&&!(nt&6)&&Mo();var t=nt;nt|=1;var r=As.transition,a=gt;try{if(As.transition=null,gt=1,e)return e()}finally{gt=a,As.transition=r,nt=t,!(nt&6)&&ri()}}function oy(){is=_o.current,St(_o)}function Ti(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,q3(r)),Jt!==null)for(r=Jt.return;r!==null;){var a=r;switch($x(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Yh();break;case 3:Zo(),St(Yr),St(Rr),Yx();break;case 5:Zx(a);break;case 4:Zo();break;case 13:St(Rt);break;case 19:St(Rt);break;case 10:Wx(a.type._context);break;case 22:case 23:oy()}r=r.return}if(cr=e,Jt=e=Bn(e.current,null),vr=is=t,ar=0,tc=null,ay=Ym=zi=0,Kr=od=null,Ni!==null){for(t=0;t<Ni.length;t++)if(r=Ni[t],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,i=r.pending;if(i!==null){var o=i.next;i.next=n,a.next=o}r.pending=a}Ni=null}return e}function c2(e,t){do{var r=Jt;try{if(Hx(),Wu.current=nm,am){for(var a=Dt.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}am=!1}if(Bi=0,dr=rr=Dt=null,nd=!1,Xd=0,sy.current=null,r===null||r.return===null){ar=1,tc=t,Jt=null;break}e:{var i=e,o=r.return,d=r,c=t;if(t=vr,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=d,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var k=mk(o);if(k!==null){k.flags&=-257,gk(k,o,d,i,t),k.mode&1&&hk(i,h,t),t=k,c=h;var x=t.updateQueue;if(x===null){var j=new Set;j.add(c),t.updateQueue=j}else x.add(c);break e}else{if(!(t&1)){hk(i,h,t),ly();break e}c=Error(ke(426))}}else if(Lt&&d.mode&1){var y=mk(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),gk(y,o,d,i,t),Ux(Yo(c,d));break e}}i=c=Yo(c,d),ar!==4&&(ar=2),od===null?od=[i]:od.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=KN(i,c,t);ik(i,b);break e;case 1:d=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(On===null||!On.has(N)))){i.flags|=65536,t&=-t,i.lanes|=t;var P=GN(i,d,t);ik(i,P);break e}}i=i.return}while(i!==null)}m2(r)}catch(C){t=C,Jt===r&&r!==null&&(Jt=r=r.return);continue}break}while(!0)}function u2(){var e=im.current;return im.current=nm,e===null?nm:e}function ly(){(ar===0||ar===3||ar===2)&&(ar=4),cr===null||!(zi&268435455)&&!(Ym&268435455)||kn(cr,vr)}function dm(e,t){var r=nt;nt|=2;var a=u2();(cr!==e||vr!==t)&&(qa=null,Ti(e,t));do try{x5();break}catch(n){c2(e,n)}while(!0);if(Hx(),nt=r,im.current=a,Jt!==null)throw Error(ke(261));return cr=null,vr=0,ar}function x5(){for(;Jt!==null;)h2(Jt)}function y5(){for(;Jt!==null&&!V6();)h2(Jt)}function h2(e){var t=f2(e.alternate,e,is);e.memoizedProps=e.pendingProps,t===null?m2(e):Jt=t,sy.current=null}function m2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=u5(r,t),r!==null){r.flags&=32767,Jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ar=6,Jt=null;return}}else if(r=c5(r,t,is),r!==null){Jt=r;return}if(t=t.sibling,t!==null){Jt=t;return}Jt=t=e}while(t!==null);ar===0&&(ar=5)}function yi(e,t,r){var a=gt,n=As.transition;try{As.transition=null,gt=1,b5(e,t,r,a)}finally{As.transition=n,gt=a}return null}function b5(e,t,r,a){do Mo();while(Sn!==null);if(nt&6)throw Error(ke(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Q6(e,i),e===cr&&(Jt=cr=null,vr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pu||(pu=!0,p2(Hh,function(){return Mo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=As.transition,As.transition=null;var o=gt;gt=1;var d=nt;nt|=4,sy.current=null,m5(e,r),o2(r,e),B3(op),qh=!!ip,op=ip=null,e.current=r,g5(r),H6(),nt=d,gt=o,As.transition=i}else e.current=r;if(pu&&(pu=!1,Sn=e,lm=n),i=e.pendingLanes,i===0&&(On=null),K6(r.stateNode),Xr(e,$t()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(om)throw om=!1,e=Cp,Cp=null,e;return lm&1&&e.tag!==0&&Mo(),i=e.pendingLanes,i&1?e===Pp?ld++:(ld=0,Pp=e):ld=0,ri(),null}function Mo(){if(Sn!==null){var e=K1(lm),t=As.transition,r=gt;try{if(As.transition=null,gt=16>e?16:e,Sn===null)var a=!1;else{if(e=Sn,Sn=null,lm=0,nt&6)throw Error(ke(331));var n=nt;for(nt|=4,Te=e.current;Te!==null;){var i=Te,o=i.child;if(Te.flags&16){var d=i.deletions;if(d!==null){for(var c=0;c<d.length;c++){var h=d[c];for(Te=h;Te!==null;){var m=Te;switch(m.tag){case 0:case 11:case 15:id(8,m,i)}var g=m.child;if(g!==null)g.return=m,Te=g;else for(;Te!==null;){m=Te;var p=m.sibling,k=m.return;if(a2(m),m===h){Te=null;break}if(p!==null){p.return=k,Te=p;break}Te=k}}}var x=i.alternate;if(x!==null){var j=x.child;if(j!==null){x.child=null;do{var y=j.sibling;j.sibling=null,j=y}while(j!==null)}}Te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Te=o;else e:for(;Te!==null;){if(i=Te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:id(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Te=b;break e}Te=i.return}}var w=e.current;for(Te=w;Te!==null;){o=Te;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,Te=N;else e:for(o=w;Te!==null;){if(d=Te,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Zm(9,d)}}catch(C){Bt(d,d.return,C)}if(d===o){Te=null;break e}var P=d.sibling;if(P!==null){P.return=d.return,Te=P;break e}Te=d.return}}if(nt=n,ri(),ka&&typeof ka.onPostCommitFiberRoot=="function")try{ka.onPostCommitFiberRoot($m,e)}catch{}a=!0}return a}finally{gt=r,As.transition=t}}return!1}function Ck(e,t,r){t=Yo(r,t),t=KN(e,t,1),e=Dn(e,t,1),t=Br(),e!==null&&(bc(e,1,t),Xr(e,t))}function Bt(e,t,r){if(e.tag===3)Ck(e,e,r);else for(;t!==null;){if(t.tag===3){Ck(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(On===null||!On.has(a))){e=Yo(r,e),e=GN(t,e,1),t=Dn(t,e,1),e=Br(),t!==null&&(bc(t,1,e),Xr(t,e));break}}t=t.return}}function v5(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Br(),e.pingedLanes|=e.suspendedLanes&r,cr===e&&(vr&r)===r&&(ar===4||ar===3&&(vr&130023424)===vr&&500>$t()-ny?Ti(e,0):ay|=r),Xr(e,t)}function g2(e,t){t===0&&(e.mode&1?(t=iu,iu<<=1,!(iu&130023424)&&(iu=4194304)):t=1);var r=Br();e=sn(e,t),e!==null&&(bc(e,t,r),Xr(e,r))}function k5(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),g2(e,r)}function w5(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(ke(314))}a!==null&&a.delete(t),g2(e,r)}var f2;f2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yr.current)Zr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Zr=!1,d5(e,t,r);Zr=!!(e.flags&131072)}else Zr=!1,Lt&&t.flags&1048576&&bN(t,Qh,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Ku(e,t),e=t.pendingProps;var n=qo(t,Rr.current);Ao(t,r),n=Xx(null,t,a,e,n,r);var i=Qx();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Jr(a)?(i=!0,Jh(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Kx(t),n.updater=Gm,t.stateNode=n,n._reactInternals=t,pp(t,a,e,r),t=bp(null,t,a,!0,i,r)):(t.tag=0,Lt&&i&&zx(t),Or(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,n=a._init,a=n(a._payload),t.type=a,n=t.tag=N5(a),e=Hs(a,e),n){case 0:t=yp(null,t,a,e,r);break e;case 1:t=xk(null,t,a,e,r);break e;case 11:t=fk(null,t,a,e,r);break e;case 14:t=pk(null,t,a,Hs(a.type,e),r);break e}throw Error(ke(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Hs(a,n),yp(e,t,a,n,r);case 1:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Hs(a,n),xk(e,t,a,n,r);case 3:e:{if(XN(t),e===null)throw Error(ke(387));a=t.pendingProps,i=t.memoizedState,n=i.element,_N(e,t),rm(t,a,null,r);var o=t.memoizedState;if(a=o.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=Yo(Error(ke(423)),t),t=yk(e,t,a,r,n);break e}else if(a!==n){n=Yo(Error(ke(424)),t),t=yk(e,t,a,r,n);break e}else for(ds=Rn(t.stateNode.containerInfo.firstChild),cs=t,Lt=!0,Zs=null,r=jN(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ko(),a===n){t=an(e,t,r);break e}Or(e,t,a,r)}t=t.child}return t;case 5:return SN(t),e===null&&mp(t),a=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,o=n.children,lp(a,n)?o=null:i!==null&&lp(a,i)&&(t.flags|=32),JN(e,t),Or(e,t,o,r),t.child;case 6:return e===null&&mp(t),null;case 13:return QN(e,t,r);case 4:return Gx(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Go(t,null,a,r):Or(e,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Hs(a,n),fk(e,t,a,n,r);case 7:return Or(e,t,t.pendingProps,r),t.child;case 8:return Or(e,t,t.pendingProps.children,r),t.child;case 12:return Or(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,kt(em,a._currentValue),a._currentValue=o,i!==null)if(ra(i.value,o)){if(i.children===n.children&&!Yr.current){t=an(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var d=i.dependencies;if(d!==null){o=i.child;for(var c=d.firstContext;c!==null;){if(c.context===a){if(i.tag===1){c=Ja(-1,r&-r),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),gp(i.return,r,t),d.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ke(341));o.lanes|=r,d=o.alternate,d!==null&&(d.lanes|=r),gp(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Or(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Ao(t,r),n=Ms(n),a=a(n),t.flags|=1,Or(e,t,a,r),t.child;case 14:return a=t.type,n=Hs(a,t.pendingProps),n=Hs(a.type,n),pk(e,t,a,n,r);case 15:return ZN(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:Hs(a,n),Ku(e,t),t.tag=1,Jr(a)?(e=!0,Jh(t)):e=!1,Ao(t,r),qN(t,a,n),pp(t,a,n,r),bp(null,t,a,!0,e,r);case 19:return e2(e,t,r);case 22:return YN(e,t,r)}throw Error(ke(156,t.tag))};function p2(e,t){return V1(e,t)}function j5(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ts(e,t,r,a){return new j5(e,t,r,a)}function dy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function N5(e){if(typeof e=="function")return dy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Px)return 11;if(e===Ex)return 14}return 2}function Bn(e,t){var r=e.alternate;return r===null?(r=Ts(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Yu(e,t,r,a,n,i){var o=2;if(a=e,typeof e=="function")dy(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fo:return Li(r.children,n,i,t);case Cx:o=8,n|=8;break;case zf:return e=Ts(12,r,t,n|2),e.elementType=zf,e.lanes=i,e;case $f:return e=Ts(13,r,t,n),e.elementType=$f,e.lanes=i,e;case Uf:return e=Ts(19,r,t,n),e.elementType=Uf,e.lanes=i,e;case S1:return Jm(r,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case N1:o=10;break e;case _1:o=9;break e;case Px:o=11;break e;case Ex:o=14;break e;case yn:o=16,a=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=Ts(o,r,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function Li(e,t,r,a){return e=Ts(7,e,a,t),e.lanes=r,e}function Jm(e,t,r,a){return e=Ts(22,e,a,t),e.elementType=S1,e.lanes=r,e.stateNode={isHidden:!1},e}function B0(e,t,r){return e=Ts(6,e,null,t),e.lanes=r,e}function z0(e,t,r){return t=Ts(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _5(e,t,r,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=v0(0),this.expirationTimes=v0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=v0(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function cy(e,t,r,a,n,i,o,d,c){return e=new _5(e,t,r,d,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ts(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kx(i),e}function S5(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:go,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function x2(e){if(!e)return Kn;e=e._reactInternals;e:{if(Yi(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Jr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var r=e.type;if(Jr(r))return xN(e,r,t)}return t}function y2(e,t,r,a,n,i,o,d,c){return e=cy(r,a,!0,e,n,i,o,d,c),e.context=x2(null),r=e.current,a=Br(),n=Fn(r),i=Ja(a,n),i.callback=t??null,Dn(r,i,n),e.current.lanes=n,bc(e,n,a),Xr(e,a),e}function Xm(e,t,r,a){var n=t.current,i=Br(),o=Fn(n);return r=x2(r),t.context===null?t.context=r:t.pendingContext=r,t=Ja(i,o),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Dn(n,t,o),e!==null&&(ta(e,n,o,i),Hu(e,n,o)),o}function cm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function uy(e,t){Pk(e,t),(e=e.alternate)&&Pk(e,t)}function C5(){return null}var b2=typeof reportError=="function"?reportError:function(e){console.error(e)};function hy(e){this._internalRoot=e}Qm.prototype.render=hy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));Xm(e,t,null,null)};Qm.prototype.unmount=hy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;$i(function(){Xm(null,e,null,null)}),t[rn]=null}};function Qm(e){this._internalRoot=e}Qm.prototype.unstable_scheduleHydration=function(e){if(e){var t=Y1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<vn.length&&t!==0&&t<vn[r].priority;r++);vn.splice(r,0,e),r===0&&X1(e)}};function my(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function eg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ek(){}function P5(e,t,r,a,n){if(n){if(typeof a=="function"){var i=a;a=function(){var h=cm(o);i.call(h)}}var o=y2(t,a,e,0,null,!1,!1,"",Ek);return e._reactRootContainer=o,e[rn]=o.current,Kd(e.nodeType===8?e.parentNode:e),$i(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof a=="function"){var d=a;a=function(){var h=cm(c);d.call(h)}}var c=cy(e,0,!1,null,null,!1,!1,"",Ek);return e._reactRootContainer=c,e[rn]=c.current,Kd(e.nodeType===8?e.parentNode:e),$i(function(){Xm(t,c,r,a)}),c}function tg(e,t,r,a,n){var i=r._reactRootContainer;if(i){var o=i;if(typeof n=="function"){var d=n;n=function(){var c=cm(o);d.call(c)}}Xm(t,o,e,n)}else o=P5(r,t,e,n,a);return cm(o)}G1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ql(t.pendingLanes);r!==0&&(Lx(t,r|1),Xr(t,$t()),!(nt&6)&&(Jo=$t()+500,ri()))}break;case 13:$i(function(){var a=sn(e,1);if(a!==null){var n=Br();ta(a,e,1,n)}}),uy(e,1)}};Ax=function(e){if(e.tag===13){var t=sn(e,134217728);if(t!==null){var r=Br();ta(t,e,134217728,r)}uy(e,134217728)}};Z1=function(e){if(e.tag===13){var t=Fn(e),r=sn(e,t);if(r!==null){var a=Br();ta(r,e,t,a)}uy(e,t)}};Y1=function(){return gt};J1=function(e,t){var r=gt;try{return gt=e,t()}finally{gt=r}};Xf=function(e,t,r){switch(t){case"input":if(Wf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var n=Wm(a);if(!n)throw Error(ke(90));P1(a),Wf(a,n)}}}break;case"textarea":I1(e,r);break;case"select":t=r.value,t!=null&&Eo(e,!!r.multiple,t,!1)}};O1=iy;F1=$i;var E5={usingClientEntryPoint:!1,Events:[kc,bo,Wm,R1,D1,iy]},Rl={findFiberByHostInstance:ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},I5={bundleType:Rl.bundleType,version:Rl.version,rendererPackageName:Rl.rendererPackageName,rendererConfig:Rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=$1(e),e===null?null:e.stateNode},findFiberByHostInstance:Rl.findFiberByHostInstance||C5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{$m=xu.inject(I5),ka=xu}catch{}}gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E5;gs.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!my(t))throw Error(ke(200));return S5(e,t,null,r)};gs.createRoot=function(e,t){if(!my(e))throw Error(ke(299));var r=!1,a="",n=b2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=cy(e,1,!1,null,null,r,!1,a,n),e[rn]=t.current,Kd(e.nodeType===8?e.parentNode:e),new hy(t)};gs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=$1(t),e=e===null?null:e.stateNode,e};gs.flushSync=function(e){return $i(e)};gs.hydrate=function(e,t,r){if(!eg(t))throw Error(ke(200));return tg(null,e,t,!0,r)};gs.hydrateRoot=function(e,t,r){if(!my(e))throw Error(ke(405));var a=r!=null&&r.hydratedSources||null,n=!1,i="",o=b2;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=y2(t,null,e,1,r??null,n,!1,i,o),e[rn]=t.current,Kd(e),a)for(e=0;e<a.length;e++)r=a[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Qm(t)};gs.render=function(e,t,r){if(!eg(t))throw Error(ke(200));return tg(null,e,t,!1,r)};gs.unmountComponentAtNode=function(e){if(!eg(e))throw Error(ke(40));return e._reactRootContainer?($i(function(){tg(null,null,e,!1,function(){e._reactRootContainer=null,e[rn]=null})}),!0):!1};gs.unstable_batchedUpdates=iy;gs.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!eg(r))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return tg(e,t,r,!1,a)};gs.version="18.3.1-next-f1338f8080-20240426";function v2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v2)}catch(e){console.error(e)}}v2(),v1.exports=gs;var k2=v1.exports,Ik=k2;Ff.createRoot=Ik.createRoot,Ff.hydrateRoot=Ik.hydrateRoot;var w2={exports:{}},j2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=_;function T5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var L5=typeof Object.is=="function"?Object.is:T5,A5=Xo.useState,M5=Xo.useEffect,R5=Xo.useLayoutEffect,D5=Xo.useDebugValue;function O5(e,t){var r=t(),a=A5({inst:{value:r,getSnapshot:t}}),n=a[0].inst,i=a[1];return R5(function(){n.value=r,n.getSnapshot=t,$0(n)&&i({inst:n})},[e,r,t]),M5(function(){return $0(n)&&i({inst:n}),e(function(){$0(n)&&i({inst:n})})},[e]),D5(r),r}function $0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!L5(e,r)}catch{return!0}}function F5(e,t){return t()}var B5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?F5:O5;j2.useSyncExternalStore=Xo.useSyncExternalStore!==void 0?Xo.useSyncExternalStore:B5;w2.exports=j2;var z5=w2.exports,N2={exports:{}},_2={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg=_,$5=z5;function U5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var V5=typeof Object.is=="function"?Object.is:U5,H5=$5.useSyncExternalStore,W5=rg.useRef,q5=rg.useEffect,K5=rg.useMemo,G5=rg.useDebugValue;_2.useSyncExternalStoreWithSelector=function(e,t,r,a,n){var i=W5(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=K5(function(){function c(k){if(!h){if(h=!0,m=k,k=a(k),n!==void 0&&o.hasValue){var x=o.value;if(n(x,k))return g=x}return g=k}if(x=g,V5(m,k))return x;var j=a(k);return n!==void 0&&n(x,j)?(m=k,x):(m=k,g=j)}var h=!1,m,g,p=r===void 0?null:r;return[function(){return c(t())},p===null?void 0:function(){return c(p())}]},[t,r,a,n]);var d=H5(e,i[0],i[1]);return q5(function(){o.hasValue=!0,o.value=d},[d]),G5(d),d};N2.exports=_2;var Z5=N2.exports;function Y5(e){e()}let S2=Y5;const J5=e=>S2=e,X5=()=>S2,Tk=Symbol.for("react-redux-context"),Lk=typeof globalThis<"u"?globalThis:{};function Q5(){var e;if(!_.createContext)return{};const t=(e=Lk[Tk])!=null?e:Lk[Tk]=new Map;let r=t.get(_.createContext);return r||(r=_.createContext(null),t.set(_.createContext,r)),r}const Gn=Q5();function gy(e=Gn){return function(){return _.useContext(e)}}const C2=gy(),eP=()=>{throw new Error("uSES not initialized!")};let P2=eP;const tP=e=>{P2=e},rP=(e,t)=>e===t;function sP(e=Gn){const t=e===Gn?C2:gy(e);return function(a,n={}){const{equalityFn:i=rP,stabilityCheck:o=void 0,noopCheck:d=void 0}=typeof n=="function"?{equalityFn:n}:n,{store:c,subscription:h,getServerState:m,stabilityCheck:g,noopCheck:p}=t();_.useRef(!0);const k=_.useCallback({[a.name](j){return a(j)}}[a.name],[a,g,o]),x=P2(h.addNestedSub,c.getState,m||c.getState,k,i);return _.useDebugValue(x),x}}const Se=sP();var E2={exports:{}},ft={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ur=typeof Symbol=="function"&&Symbol.for,fy=ur?Symbol.for("react.element"):60103,py=ur?Symbol.for("react.portal"):60106,sg=ur?Symbol.for("react.fragment"):60107,ag=ur?Symbol.for("react.strict_mode"):60108,ng=ur?Symbol.for("react.profiler"):60114,ig=ur?Symbol.for("react.provider"):60109,og=ur?Symbol.for("react.context"):60110,xy=ur?Symbol.for("react.async_mode"):60111,lg=ur?Symbol.for("react.concurrent_mode"):60111,dg=ur?Symbol.for("react.forward_ref"):60112,cg=ur?Symbol.for("react.suspense"):60113,aP=ur?Symbol.for("react.suspense_list"):60120,ug=ur?Symbol.for("react.memo"):60115,hg=ur?Symbol.for("react.lazy"):60116,nP=ur?Symbol.for("react.block"):60121,iP=ur?Symbol.for("react.fundamental"):60117,oP=ur?Symbol.for("react.responder"):60118,lP=ur?Symbol.for("react.scope"):60119;function ps(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case fy:switch(e=e.type,e){case xy:case lg:case sg:case ng:case ag:case cg:return e;default:switch(e=e&&e.$$typeof,e){case og:case dg:case hg:case ug:case ig:return e;default:return t}}case py:return t}}}function I2(e){return ps(e)===lg}ft.AsyncMode=xy;ft.ConcurrentMode=lg;ft.ContextConsumer=og;ft.ContextProvider=ig;ft.Element=fy;ft.ForwardRef=dg;ft.Fragment=sg;ft.Lazy=hg;ft.Memo=ug;ft.Portal=py;ft.Profiler=ng;ft.StrictMode=ag;ft.Suspense=cg;ft.isAsyncMode=function(e){return I2(e)||ps(e)===xy};ft.isConcurrentMode=I2;ft.isContextConsumer=function(e){return ps(e)===og};ft.isContextProvider=function(e){return ps(e)===ig};ft.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===fy};ft.isForwardRef=function(e){return ps(e)===dg};ft.isFragment=function(e){return ps(e)===sg};ft.isLazy=function(e){return ps(e)===hg};ft.isMemo=function(e){return ps(e)===ug};ft.isPortal=function(e){return ps(e)===py};ft.isProfiler=function(e){return ps(e)===ng};ft.isStrictMode=function(e){return ps(e)===ag};ft.isSuspense=function(e){return ps(e)===cg};ft.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sg||e===lg||e===ng||e===ag||e===cg||e===aP||typeof e=="object"&&e!==null&&(e.$$typeof===hg||e.$$typeof===ug||e.$$typeof===ig||e.$$typeof===og||e.$$typeof===dg||e.$$typeof===iP||e.$$typeof===oP||e.$$typeof===lP||e.$$typeof===nP)};ft.typeOf=ps;E2.exports=ft;var dP=E2.exports,T2=dP,cP={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uP={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L2={};L2[T2.ForwardRef]=cP;L2[T2.Memo]=uP;var xt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy=Symbol.for("react.element"),by=Symbol.for("react.portal"),mg=Symbol.for("react.fragment"),gg=Symbol.for("react.strict_mode"),fg=Symbol.for("react.profiler"),pg=Symbol.for("react.provider"),xg=Symbol.for("react.context"),hP=Symbol.for("react.server_context"),yg=Symbol.for("react.forward_ref"),bg=Symbol.for("react.suspense"),vg=Symbol.for("react.suspense_list"),kg=Symbol.for("react.memo"),wg=Symbol.for("react.lazy"),mP=Symbol.for("react.offscreen"),A2;A2=Symbol.for("react.module.reference");function Fs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yy:switch(e=e.type,e){case mg:case fg:case gg:case bg:case vg:return e;default:switch(e=e&&e.$$typeof,e){case hP:case xg:case yg:case wg:case kg:case pg:return e;default:return t}}case by:return t}}}xt.ContextConsumer=xg;xt.ContextProvider=pg;xt.Element=yy;xt.ForwardRef=yg;xt.Fragment=mg;xt.Lazy=wg;xt.Memo=kg;xt.Portal=by;xt.Profiler=fg;xt.StrictMode=gg;xt.Suspense=bg;xt.SuspenseList=vg;xt.isAsyncMode=function(){return!1};xt.isConcurrentMode=function(){return!1};xt.isContextConsumer=function(e){return Fs(e)===xg};xt.isContextProvider=function(e){return Fs(e)===pg};xt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yy};xt.isForwardRef=function(e){return Fs(e)===yg};xt.isFragment=function(e){return Fs(e)===mg};xt.isLazy=function(e){return Fs(e)===wg};xt.isMemo=function(e){return Fs(e)===kg};xt.isPortal=function(e){return Fs(e)===by};xt.isProfiler=function(e){return Fs(e)===fg};xt.isStrictMode=function(e){return Fs(e)===gg};xt.isSuspense=function(e){return Fs(e)===bg};xt.isSuspenseList=function(e){return Fs(e)===vg};xt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===mg||e===fg||e===gg||e===bg||e===vg||e===mP||typeof e=="object"&&e!==null&&(e.$$typeof===wg||e.$$typeof===kg||e.$$typeof===pg||e.$$typeof===xg||e.$$typeof===yg||e.$$typeof===A2||e.getModuleId!==void 0)};xt.typeOf=Fs;function gP(){const e=X5();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){let a=[],n=t;for(;n;)a.push(n),n=n.next;return a},subscribe(a){let n=!0,i=r={callback:a,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const Ak={notify(){},get:()=>[]};function fP(e,t){let r,a=Ak,n=0,i=!1;function o(j){m();const y=a.subscribe(j);let b=!1;return()=>{b||(b=!0,y(),g())}}function d(){a.notify()}function c(){x.onStateChange&&x.onStateChange()}function h(){return i}function m(){n++,r||(r=e.subscribe(c),a=gP())}function g(){n--,r&&n===0&&(r(),r=void 0,a.clear(),a=Ak)}function p(){i||(i=!0,m())}function k(){i&&(i=!1,g())}const x={addNestedSub:o,notifyNestedSubs:d,handleChangeWrapper:c,isSubscribed:h,trySubscribe:p,tryUnsubscribe:k,getListeners:()=>a};return x}const pP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xP=pP?_.useLayoutEffect:_.useEffect;function yP({store:e,context:t,children:r,serverState:a,stabilityCheck:n="once",noopCheck:i="once"}){const o=_.useMemo(()=>{const h=fP(e);return{store:e,subscription:h,getServerState:a?()=>a:void 0,stabilityCheck:n,noopCheck:i}},[e,a,n,i]),d=_.useMemo(()=>e.getState(),[e]);xP(()=>{const{subscription:h}=o;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),d!==e.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[o,d]);const c=t||Gn;return _.createElement(c.Provider,{value:o},r)}function M2(e=Gn){const t=e===Gn?C2:gy(e);return function(){const{store:a}=t();return a}}const bP=M2();function vP(e=Gn){const t=e===Gn?bP:M2(e);return function(){return t().dispatch}}const ut=vP();tP(Z5.useSyncExternalStoreWithSelector);J5(k2.unstable_batchedUpdates);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},rc.apply(this,arguments)}var Cn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Cn||(Cn={}));const Mk="popstate";function kP(e){e===void 0&&(e={});function t(a,n){let{pathname:i,search:o,hash:d}=a.location;return Tp("",{pathname:i,search:o,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:um(n)}return jP(t,r,null,e)}function Vt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function R2(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function wP(){return Math.random().toString(36).substr(2,8)}function Rk(e,t){return{usr:e.state,key:e.key,idx:t}}function Tp(e,t,r,a){return r===void 0&&(r=null),rc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ll(t):t,{state:r,key:t&&t.key||a||wP()})}function um(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function ll(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function jP(e,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,d=Cn.Pop,c=null,h=m();h==null&&(h=0,o.replaceState(rc({},o.state,{idx:h}),""));function m(){return(o.state||{idx:null}).idx}function g(){d=Cn.Pop;let y=m(),b=y==null?null:y-h;h=y,c&&c({action:d,location:j.location,delta:b})}function p(y,b){d=Cn.Push;let w=Tp(j.location,y,b);h=m()+1;let N=Rk(w,h),P=j.createHref(w);try{o.pushState(N,"",P)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(P)}i&&c&&c({action:d,location:j.location,delta:1})}function k(y,b){d=Cn.Replace;let w=Tp(j.location,y,b);h=m();let N=Rk(w,h),P=j.createHref(w);o.replaceState(N,"",P),i&&c&&c({action:d,location:j.location,delta:0})}function x(y){let b=n.location.origin!=="null"?n.location.origin:n.location.href,w=typeof y=="string"?y:um(y);return w=w.replace(/ $/,"%20"),Vt(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let j={get action(){return d},get location(){return e(n,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Mk,g),c=y,()=>{n.removeEventListener(Mk,g),c=null}},createHref(y){return t(n,y)},createURL:x,encodeLocation(y){let b=x(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:k,go(y){return o.go(y)}};return j}var Dk;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dk||(Dk={}));function NP(e,t,r){return r===void 0&&(r="/"),_P(e,t,r)}function _P(e,t,r,a){let n=typeof t=="string"?ll(t):t,i=vy(n.pathname||"/",r);if(i==null)return null;let o=D2(e);SP(o);let d=null;for(let c=0;d==null&&c<o.length;++c){let h=FP(i);d=RP(o[c],h)}return d}function D2(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,o,d)=>{let c={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Vt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let h=zn([a,c.relativePath]),m=r.concat(c);i.children&&i.children.length>0&&(Vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),D2(i.children,t,m,h)),!(i.path==null&&!i.index)&&t.push({path:h,score:AP(h,i.index),routesMeta:m})};return e.forEach((i,o)=>{var d;if(i.path===""||!((d=i.path)!=null&&d.includes("?")))n(i,o);else for(let c of O2(i.path))n(i,o,c)}),t}function O2(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=O2(a.join("/")),d=[];return d.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&d.push(...o),d.map(c=>e.startsWith("/")&&c===""?"/":c)}function SP(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:MP(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const CP=/^:[\w-]+$/,PP=3,EP=2,IP=1,TP=10,LP=-2,Ok=e=>e==="*";function AP(e,t){let r=e.split("/"),a=r.length;return r.some(Ok)&&(a+=LP),t&&(a+=EP),r.filter(n=>!Ok(n)).reduce((n,i)=>n+(CP.test(i)?PP:i===""?IP:TP),a)}function MP(e,t){return e.length===t.length&&e.slice(0,-1).every((a,n)=>a===t[n])?e[e.length-1]-t[t.length-1]:0}function RP(e,t,r){let{routesMeta:a}=e,n={},i="/",o=[];for(let d=0;d<a.length;++d){let c=a[d],h=d===a.length-1,m=i==="/"?t:t.slice(i.length)||"/",g=DP({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},m),p=c.route;if(!g)return null;Object.assign(n,g.params),o.push({params:n,pathname:zn([i,g.pathname]),pathnameBase:UP(zn([i,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(i=zn([i,g.pathnameBase]))}return o}function DP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=OP(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:a.reduce((h,m,g)=>{let{paramName:p,isOptional:k}=m;if(p==="*"){let j=d[g]||"";o=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const x=d[g];return k&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:o,pattern:e}}function OP(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),R2(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,d,c)=>(a.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function FP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return R2(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function BP(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:n=""}=typeof e=="string"?ll(e):e;return{pathname:r?r.startsWith("/")?r:zP(r,t):t,search:VP(a),hash:HP(n)}}function zP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function U0(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $P(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ky(e,t){let r=$P(e);return t?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function wy(e,t,r,a){a===void 0&&(a=!1);let n;typeof e=="string"?n=ll(e):(n=rc({},e),Vt(!n.pathname||!n.pathname.includes("?"),U0("?","pathname","search",n)),Vt(!n.pathname||!n.pathname.includes("#"),U0("#","pathname","hash",n)),Vt(!n.search||!n.search.includes("#"),U0("#","search","hash",n)));let i=e===""||n.pathname==="",o=i?"/":n.pathname,d;if(o==null)d=r;else{let g=t.length-1;if(!a&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;n.pathname=p.join("/")}d=g>=0?t[g]:"/"}let c=BP(n,d),h=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(h||m)&&(c.pathname+="/"),c}const zn=e=>e.join("/").replace(/\/\/+/g,"/"),UP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,HP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const F2=["post","put","patch","delete"];new Set(F2);const qP=["get",...F2];new Set(qP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sc(){return sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sc.apply(this,arguments)}const jy=_.createContext(null),KP=_.createContext(null),si=_.createContext(null),jg=_.createContext(null),Aa=_.createContext({outlet:null,matches:[],isDataRoute:!1}),B2=_.createContext(null);function GP(e,t){let{relative:r}=t===void 0?{}:t;dl()||Vt(!1);let{basename:a,navigator:n}=_.useContext(si),{hash:i,pathname:o,search:d}=U2(e,{relative:r}),c=o;return a!=="/"&&(c=o==="/"?a:zn([a,o])),n.createHref({pathname:c,search:d,hash:i})}function dl(){return _.useContext(jg)!=null}function Ur(){return dl()||Vt(!1),_.useContext(jg).location}function z2(e){_.useContext(si).static||_.useLayoutEffect(e)}function xs(){let{isDataRoute:e}=_.useContext(Aa);return e?dE():ZP()}function ZP(){dl()||Vt(!1);let e=_.useContext(jy),{basename:t,future:r,navigator:a}=_.useContext(si),{matches:n}=_.useContext(Aa),{pathname:i}=Ur(),o=JSON.stringify(ky(n,r.v7_relativeSplatPath)),d=_.useRef(!1);return z2(()=>{d.current=!0}),_.useCallback(function(h,m){if(m===void 0&&(m={}),!d.current)return;if(typeof h=="number"){a.go(h);return}let g=wy(h,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:zn([t,g.pathname])),(m.replace?a.replace:a.push)(g,m.state,m)},[t,a,o,i,e])}const YP=_.createContext(null);function JP(e){let t=_.useContext(Aa).outlet;return t&&_.createElement(YP.Provider,{value:e},t)}function $2(){let{matches:e}=_.useContext(Aa),t=e[e.length-1];return t?t.params:{}}function U2(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=_.useContext(si),{matches:n}=_.useContext(Aa),{pathname:i}=Ur(),o=JSON.stringify(ky(n,a.v7_relativeSplatPath));return _.useMemo(()=>wy(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function XP(e,t){return QP(e,t)}function QP(e,t,r,a){dl()||Vt(!1);let{navigator:n}=_.useContext(si),{matches:i}=_.useContext(Aa),o=i[i.length-1],d=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let h=Ur(),m;if(t){var g;let y=typeof t=="string"?ll(t):t;c==="/"||(g=y.pathname)!=null&&g.startsWith(c)||Vt(!1),m=y}else m=h;let p=m.pathname||"/",k=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");k="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let x=NP(e,{pathname:k}),j=aE(x&&x.map(y=>Object.assign({},y,{params:Object.assign({},d,y.params),pathname:zn([c,n.encodeLocation?n.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:zn([c,n.encodeLocation?n.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,a);return t&&j?_.createElement(jg.Provider,{value:{location:sc({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:Cn.Pop}},j):j}function eE(){let e=lE(),t=WP(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:n},r):null,null)}const tE=_.createElement(eE,null);class rE extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(Aa.Provider,{value:this.props.routeContext},_.createElement(B2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sE(e){let{routeContext:t,match:r,children:a}=e,n=_.useContext(jy);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(Aa.Provider,{value:t},a)}function aE(e,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,d=(n=r)==null?void 0:n.errors;if(d!=null){let m=o.findIndex(g=>g.route.id&&(d==null?void 0:d[g.route.id])!==void 0);m>=0||Vt(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,h=-1;if(r&&a&&a.v7_partialHydration)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:p,errors:k}=r,x=g.route.loader&&p[g.route.id]===void 0&&(!k||k[g.route.id]===void 0);if(g.route.lazy||x){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((m,g,p)=>{let k,x=!1,j=null,y=null;r&&(k=d&&g.route.id?d[g.route.id]:void 0,j=g.route.errorElement||tE,c&&(h<0&&p===0?(cE("route-fallback"),x=!0,y=null):h===p&&(x=!0,y=g.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,p+1)),w=()=>{let N;return k?N=j:x?N=y:g.route.Component?N=_.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=m,_.createElement(sE,{match:g,routeContext:{outlet:m,matches:b,isDataRoute:r!=null},children:N})};return r&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?_.createElement(rE,{location:r.location,revalidation:r.revalidation,component:j,error:k,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var V2=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(V2||{}),H2=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(H2||{});function nE(e){let t=_.useContext(jy);return t||Vt(!1),t}function iE(e){let t=_.useContext(KP);return t||Vt(!1),t}function oE(e){let t=_.useContext(Aa);return t||Vt(!1),t}function W2(e){let t=oE(),r=t.matches[t.matches.length-1];return r.route.id||Vt(!1),r.route.id}function lE(){var e;let t=_.useContext(B2),r=iE(),a=W2();return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function dE(){let{router:e}=nE(V2.UseNavigateStable),t=W2(H2.UseNavigateStable),r=_.useRef(!1);return z2(()=>{r.current=!0}),_.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,sc({fromRouteId:t},i)))},[e,t])}const Fk={};function cE(e,t,r){Fk[e]||(Fk[e]=!0)}function uE(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ac(e){let{to:t,replace:r,state:a,relative:n}=e;dl()||Vt(!1);let{future:i,static:o}=_.useContext(si),{matches:d}=_.useContext(Aa),{pathname:c}=Ur(),h=xs(),m=wy(t,ky(d,i.v7_relativeSplatPath),c,n==="path"),g=JSON.stringify(m);return _.useEffect(()=>h(JSON.parse(g),{replace:r,state:a,relative:n}),[h,g,n,r,a]),null}function hE(e){return JP(e.context)}function We(e){Vt(!1)}function mE(e){let{basename:t="/",children:r=null,location:a,navigationType:n=Cn.Pop,navigator:i,static:o=!1,future:d}=e;dl()&&Vt(!1);let c=t.replace(/^\/*/,"/"),h=_.useMemo(()=>({basename:c,navigator:i,static:o,future:sc({v7_relativeSplatPath:!1},d)}),[c,d,i,o]);typeof a=="string"&&(a=ll(a));let{pathname:m="/",search:g="",hash:p="",state:k=null,key:x="default"}=a,j=_.useMemo(()=>{let y=vy(m,c);return y==null?null:{location:{pathname:y,search:g,hash:p,state:k,key:x},navigationType:n}},[c,m,g,p,k,x,n]);return j==null?null:_.createElement(si.Provider,{value:h},_.createElement(jg.Provider,{children:r,value:j}))}function gE(e){let{children:t,location:r}=e;return XP(Lp(t),r)}new Promise(()=>{});function Lp(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(a,n)=>{if(!_.isValidElement(a))return;let i=[...t,n];if(a.type===_.Fragment){r.push.apply(r,Lp(a.props.children,i));return}a.type!==We&&Vt(!1),!a.props.index||!a.props.children||Vt(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Lp(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ap.apply(this,arguments)}function fE(e,t){if(e==null)return{};var r={},a=Object.keys(e),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function pE(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xE(e,t){return e.button===0&&(!t||t==="_self")&&!pE(e)}function Mp(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function yE(e,t){let r=Mp(e);return t&&t.forEach((a,n)=>{r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)})}),r}const bE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vE="6";try{window.__reactRouterVersion=vE}catch{}const kE="startTransition",Bk=v6[kE];function wE(e){let{basename:t,children:r,future:a,window:n}=e,i=_.useRef();i.current==null&&(i.current=kP({window:n,v5Compat:!0}));let o=i.current,[d,c]=_.useState({action:o.action,location:o.location}),{v7_startTransition:h}=a||{},m=_.useCallback(g=>{h&&Bk?Bk(()=>c(g)):c(g)},[c,h]);return _.useLayoutEffect(()=>o.listen(m),[o,m]),_.useEffect(()=>uE(a),[a]),_.createElement(mE,{basename:t,children:r,location:d.location,navigationType:d.action,navigator:o,future:a})}const jE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=_.forwardRef(function(t,r){let{onClick:a,relative:n,reloadDocument:i,replace:o,state:d,target:c,to:h,preventScrollReset:m,viewTransition:g}=t,p=fE(t,bE),{basename:k}=_.useContext(si),x,j=!1;if(typeof h=="string"&&NE.test(h)&&(x=h,jE))try{let N=new URL(window.location.href),P=h.startsWith("//")?new URL(N.protocol+h):new URL(h),C=vy(P.pathname,k);P.origin===N.origin&&C!=null?h=C+P.search+P.hash:j=!0}catch{}let y=GP(h,{relative:n}),b=_E(h,{replace:o,state:d,target:c,preventScrollReset:m,relative:n,viewTransition:g});function w(N){a&&a(N),N.defaultPrevented||b(N)}return _.createElement("a",Ap({},p,{href:x||y,onClick:j||i?a:w,ref:r,target:c}))});var zk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zk||(zk={}));var $k;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($k||($k={}));function _E(e,t){let{target:r,replace:a,state:n,preventScrollReset:i,relative:o,viewTransition:d}=t===void 0?{}:t,c=xs(),h=Ur(),m=U2(e,{relative:o});return _.useCallback(g=>{if(xE(g,r)){g.preventDefault();let p=a!==void 0?a:um(h)===um(m);c(e,{replace:p,state:n,preventScrollReset:i,relative:o,viewTransition:d})}},[h,c,m,a,n,r,e,i,o,d])}function SE(e){let t=_.useRef(Mp(e)),r=_.useRef(!1),a=Ur(),n=_.useMemo(()=>yE(a.search,r.current?null:t.current),[a.search]),i=xs(),o=_.useCallback((d,c)=>{const h=Mp(typeof d=="function"?d(n):d);r.current=!0,i("?"+h,c)},[i,n]);return[n,o]}let CE={data:""},PE=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||CE},EE=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,IE=/\/\*[^]*?\*\/|  +/g,Uk=/\n+/g,wn=(e,t)=>{let r="",a="",n="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":a+=i[1]=="f"?wn(o,i):i+"{"+wn(o,i[1]=="k"?"":t)+"}":typeof o=="object"?a+=wn(o,t?t.replace(/([^,])+/g,d=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,d):d?d+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=wn.p?wn.p(i,o):i+":"+o+";")}return r+(t&&n?t+"{"+n+"}":n)+a},za={},q2=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+q2(e[r]);return t}return e},TE=(e,t,r,a,n)=>{let i=q2(e),o=za[i]||(za[i]=(c=>{let h=0,m=11;for(;h<c.length;)m=101*m+c.charCodeAt(h++)>>>0;return"go"+m})(i));if(!za[o]){let c=i!==e?e:(h=>{let m,g,p=[{}];for(;m=EE.exec(h.replace(IE,""));)m[4]?p.shift():m[3]?(g=m[3].replace(Uk," ").trim(),p.unshift(p[0][g]=p[0][g]||{})):p[0][m[1]]=m[2].replace(Uk," ").trim();return p[0]})(e);za[o]=wn(n?{["@keyframes "+o]:c}:c,r?"":"."+o)}let d=r&&za.g?za.g:null;return r&&(za.g=za[o]),((c,h,m,g)=>{g?h.data=h.data.replace(g,c):h.data.indexOf(c)===-1&&(h.data=m?c+h.data:h.data+c)})(za[o],t,a,d),o},LE=(e,t,r)=>e.reduce((a,n,i)=>{let o=t[i];if(o&&o.call){let d=o(r),c=d&&d.props&&d.props.className||/^go/.test(d)&&d;o=c?"."+c:d&&typeof d=="object"?d.props?"":wn(d,""):d===!1?"":d}return a+n+(o??"")},"");function Ng(e){let t=this||{},r=e.call?e(t.p):e;return TE(r.unshift?r.raw?LE(r,[].slice.call(arguments,1),t.p):r.reduce((a,n)=>Object.assign(a,n&&n.call?n(t.p):n),{}):r,PE(t.target),t.g,t.o,t.k)}let K2,Rp,Dp;Ng.bind({g:1});let nn=Ng.bind({k:1});function AE(e,t,r,a){wn.p=t,K2=e,Rp=r,Dp=a}function ai(e,t){let r=this||{};return function(){let a=arguments;function n(i,o){let d=Object.assign({},i),c=d.className||n.className;r.p=Object.assign({theme:Rp&&Rp()},d),r.o=/ *go\d+/.test(c),d.className=Ng.apply(r,a)+(c?" "+c:"");let h=e;return e[0]&&(h=d.as||e,delete d.as),Dp&&h[0]&&Dp(d),K2(h,d)}return n}}var ME=e=>typeof e=="function",hm=(e,t)=>ME(e)?e(t):e,RE=(()=>{let e=0;return()=>(++e).toString()})(),G2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),DE=20,Ny="default",Z2=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:a}=t;return Z2(e,{type:e.toasts.find(o=>o.id===a.id)?1:0,toast:a});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(o=>o.id===n||n===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Ju=[],Y2={toasts:[],pausedAt:void 0,settings:{toastLimit:DE}},ba={},J2=(e,t=Ny)=>{ba[t]=Z2(ba[t]||Y2,e),Ju.forEach(([r,a])=>{r===t&&a(ba[t])})},X2=e=>Object.keys(ba).forEach(t=>J2(e,t)),OE=e=>Object.keys(ba).find(t=>ba[t].toasts.some(r=>r.id===e)),_g=(e=Ny)=>t=>{J2(t,e)},FE={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},BE=(e={},t=Ny)=>{let[r,a]=_.useState(ba[t]||Y2),n=_.useRef(ba[t]);_.useEffect(()=>(n.current!==ba[t]&&a(ba[t]),Ju.push([t,a]),()=>{let o=Ju.findIndex(([d])=>d===t);o>-1&&Ju.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var d,c,h;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((d=e[o.type])==null?void 0:d.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||FE[o.type],style:{...e.style,...(h=e[o.type])==null?void 0:h.style,...o.style}}});return{...r,toasts:i}},zE=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||RE()}),jc=e=>(t,r)=>{let a=zE(t,e,r);return _g(a.toasterId||OE(a.id))({type:2,toast:a}),a.id},Ve=(e,t)=>jc("blank")(e,t);Ve.error=jc("error");Ve.success=jc("success");Ve.loading=jc("loading");Ve.custom=jc("custom");Ve.dismiss=(e,t)=>{let r={type:3,toastId:e};t?_g(t)(r):X2(r)};Ve.dismissAll=e=>Ve.dismiss(void 0,e);Ve.remove=(e,t)=>{let r={type:4,toastId:e};t?_g(t)(r):X2(r)};Ve.removeAll=e=>Ve.remove(void 0,e);Ve.promise=(e,t,r)=>{let a=Ve.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(n=>{let i=t.success?hm(t.success,n):void 0;return i?Ve.success(i,{id:a,...r,...r==null?void 0:r.success}):Ve.dismiss(a),n}).catch(n=>{let i=t.error?hm(t.error,n):void 0;i?Ve.error(i,{id:a,...r,...r==null?void 0:r.error}):Ve.dismiss(a)}),e};var $E=1e3,UE=(e,t="default")=>{let{toasts:r,pausedAt:a}=BE(e,t),n=_.useRef(new Map).current,i=_.useCallback((g,p=$E)=>{if(n.has(g))return;let k=setTimeout(()=>{n.delete(g),o({type:4,toastId:g})},p);n.set(g,k)},[]);_.useEffect(()=>{if(a)return;let g=Date.now(),p=r.map(k=>{if(k.duration===1/0)return;let x=(k.duration||0)+k.pauseDuration-(g-k.createdAt);if(x<0){k.visible&&Ve.dismiss(k.id);return}return setTimeout(()=>Ve.dismiss(k.id,t),x)});return()=>{p.forEach(k=>k&&clearTimeout(k))}},[r,a,t]);let o=_.useCallback(_g(t),[t]),d=_.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=_.useCallback((g,p)=>{o({type:1,toast:{id:g,height:p}})},[o]),h=_.useCallback(()=>{a&&o({type:6,time:Date.now()})},[a,o]),m=_.useCallback((g,p)=>{let{reverseOrder:k=!1,gutter:x=8,defaultPosition:j}=p||{},y=r.filter(N=>(N.position||j)===(g.position||j)&&N.height),b=y.findIndex(N=>N.id===g.id),w=y.filter((N,P)=>P<b&&N.visible).length;return y.filter(N=>N.visible).slice(...k?[w+1]:[0,w]).reduce((N,P)=>N+(P.height||0)+x,0)},[r]);return _.useEffect(()=>{r.forEach(g=>{if(g.dismissed)i(g.id,g.removeDelay);else{let p=n.get(g.id);p&&(clearTimeout(p),n.delete(g.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:d,endPause:h,calculateOffset:m}}},VE=nn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,HE=nn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WE=nn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,qE=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${VE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${HE} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${WE} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,KE=nn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,GE=ai("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${KE} 1s linear infinite;
`,ZE=nn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,YE=nn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,JE=ai("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ZE} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${YE} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,XE=ai("div")`
  position: absolute;
`,QE=ai("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,eI=nn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tI=ai("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${eI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,rI=({toast:e})=>{let{icon:t,type:r,iconTheme:a}=e;return t!==void 0?typeof t=="string"?_.createElement(tI,null,t):t:r==="blank"?null:_.createElement(QE,null,_.createElement(GE,{...a}),r!=="loading"&&_.createElement(XE,null,r==="error"?_.createElement(qE,{...a}):_.createElement(JE,{...a})))},sI=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,aI=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,nI="0%{opacity:0;} 100%{opacity:1;}",iI="0%{opacity:1;} 100%{opacity:0;}",oI=ai("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,lI=ai("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,dI=(e,t)=>{let r=e.includes("top")?1:-1,[a,n]=G2()?[nI,iI]:[sI(r),aI(r)];return{animation:t?`${nn(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nn(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},cI=_.memo(({toast:e,position:t,style:r,children:a})=>{let n=e.height?dI(e.position||t||"top-center",e.visible):{opacity:0},i=_.createElement(rI,{toast:e}),o=_.createElement(lI,{...e.ariaProps},hm(e.message,e));return _.createElement(oI,{className:e.className,style:{...n,...r,...e.style}},typeof a=="function"?a({icon:i,message:o}):_.createElement(_.Fragment,null,i,o))});AE(_.createElement);var uI=({id:e,className:t,style:r,onHeightUpdate:a,children:n})=>{let i=_.useCallback(o=>{if(o){let d=()=>{let c=o.getBoundingClientRect().height;a(e,c)};d(),new MutationObserver(d).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return _.createElement("div",{ref:i,className:t,style:r},n)},hI=(e,t)=>{let r=e.includes("top"),a=r?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:G2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...a,...n}},mI=Ng`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,yu=16,gI=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:a,children:n,toasterId:i,containerStyle:o,containerClassName:d})=>{let{toasts:c,handlers:h}=UE(r,i);return _.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:yu,left:yu,right:yu,bottom:yu,pointerEvents:"none",...o},className:d,onMouseEnter:h.startPause,onMouseLeave:h.endPause},c.map(m=>{let g=m.position||t,p=h.calculateOffset(m,{reverseOrder:e,gutter:a,defaultPosition:t}),k=hI(g,p);return _.createElement(uI,{id:m.id,key:m.id,onHeightUpdate:h.updateHeight,className:m.visible?mI:"",style:k},m.type==="custom"?hm(m.message,m):n?n(m):_.createElement(cI,{toast:m,position:g}))}))},q=Ve;const Q2=_.createContext(void 0),e_=({children:e})=>{const[t,r]=_.useState(()=>localStorage.getItem("preferred_language")==="en"?"en":"is"),[a,n]=_.useState({}),[i,o]=_.useState(!1),d=["is","en"],[c,h]=_.useState(null),m=_.useCallback((y,b)=>{let w=a[y];return w?(b&&Object.keys(b).forEach(N=>{const P=new RegExp(`\\{${N}\\}`,"g");w=w.replace(P,String(b[N]))}),w):y},[a]),g=_.useCallback(async()=>{o(!0);try{const b=await fetch(`https://olfong.olibuijr.com/api/translations?locale=${t}`,{});if(!b.ok)throw new Error(`HTTP error! status: ${b.status}`);const w=await b.json();if(w.success&&Array.isArray(w.data)){const N=w.data.reduce((P,C)=>(P[C.key]=C.value,P),{});n(N)}else console.error("Failed to load translations: Invalid response format",w),p()}catch(y){console.error("Error loading translations:",y),p()}finally{o(!1)}},[t]),p=()=>{const y={is:{"nav.home":"Heim","nav.products":"Vrur","nav.cart":"Karfa","nav.orders":"Pantanir","nav.profile":"Prfll","nav.admin":"Stjrnbor","nav.login":"Innskrning","nav.logout":"tskrning","common.loading":"Hleur...","common.error":"Villa","common.success":"Tkst","common.save":"Vista","common.cancel":"Htta vi","common.delete":"Eya","common.edit":"Breyta","common.add":"Bta vi","common.search":"Leita","common.filter":"Sa","common.sort":"Raa","common.yes":"J","common.no":"Nei","common.close":"Loka","common.sending":"Sendir...","common.unknown":"ekkt","adminPage.update":"Uppfra","adminPage.updateOrder":"Uppfra pntun","adminPage.newStatus":"N staa","adminPage.assign":"thluta","adminPage.assignDeliveryPerson":"thluta afhendingaraila","adminPage.deliveryPerson":"Afhendingaraili","receipts.print":"Prenta","receipts.downloadPdf":"Skja PDF","receipts.emailReceipt":"Senda kvittun  tlvupsti","receipts.emailSent":"Tlvupstur sendur","receipts.emailSentSuccess":"Kvittun send","receipts.emailSendError":"Villa vi a senda tlvupst","receipts.noEmailAddress":"Enginn tlvupstur skrur","receipts.pdfDownloadError":"Villa vi a skja PDF","receipts.receipt":"Kvittun","receipts.receiptForOrder":"Kvittun fyrir pntun","receipts.settingsNotFound":"Stillingar fundust ekki","receipts.viewReceipt":"Skoa kvittun","receipts.configureInSettings":"Vinsamlegast stilltu kvittanastillingar til a birta kvittunina na","adminMenu.sales":"Slur","adminMenu.orders":"Pantanir","adminMenu.pointOfSale":"Slustaur","adminMenu.deliveries":"Afhendingar","adminMenu.catalog":"Vrulisti","adminMenu.products":"Vrur","adminMenu.categories":"Flokkar","adminMenu.media":"Myndefni","adminMenu.analytics":"Greiningar","adminMenu.analyticsLink":"Greiningar","adminMenu.customers":"Viskiptavinir","adminMenu.reports":"Skrslur","adminMenu.content":"Innihald","adminMenu.banners":"Borar","adminMenu.messages":"Skilabo","adminMenu.notifications":"Tilkynningar","adminMenu.settingsSection":"Stillingar","adminMenu.general":"Almennt","adminMenu.payment":"Greislur","adminMenu.receipts":"Kvittanir","adminMenu.system":"Kerfi","adminMenu.translations":"ingar","adminMenu.demoData":"Snisggn","adminMenu.dashboard":"Mlabor","adminMenu.manageBusinessSettings":"Hafu umsjn me fyrirtkinu og stillingum","adminMenu.helpText":"Vantar ig hjlp? Kktu ","adminMenu.supportCenter":"jnustuveri"},en:{"nav.home":"Home","nav.products":"Products","nav.cart":"Cart","nav.orders":"Orders","nav.profile":"Profile","nav.admin":"Admin","nav.login":"Login","nav.logout":"Logout","common.loading":"Loading...","common.error":"Error","common.success":"Success","common.save":"Save","common.cancel":"Cancel","common.delete":"Delete","common.edit":"Edit","common.add":"Add","common.search":"Search","common.filter":"Filter","common.sort":"Sort","common.yes":"Yes","common.no":"No","common.close":"Close","common.sending":"Sending...","common.unknown":"Unknown","adminPage.update":"Update","adminPage.updateOrder":"Update Order","adminPage.newStatus":"New Status","adminPage.assign":"Assign","adminPage.assignDeliveryPerson":"Assign Delivery Person","adminPage.deliveryPerson":"Delivery Person","receipts.print":"Print","receipts.downloadPdf":"Download PDF","receipts.emailReceipt":"Email Receipt","receipts.emailSent":"Email Sent","receipts.emailSentSuccess":"Receipt sent successfully","receipts.emailSendError":"Error sending email","receipts.noEmailAddress":"No email address on file","receipts.pdfDownloadError":"Error downloading PDF","receipts.receipt":"Receipt","receipts.receiptForOrder":"Receipt for Order","receipts.settingsNotFound":"Settings Not Found","receipts.viewReceipt":"View Receipt","receipts.configureInSettings":"Please configure receipt settings to display your receipt","adminMenu.sales":"Sales","adminMenu.orders":"Orders","adminMenu.pointOfSale":"Point of Sale","adminMenu.deliveries":"Deliveries","adminMenu.catalog":"Catalog","adminMenu.products":"Products","adminMenu.categories":"Categories","adminMenu.media":"Media","adminMenu.analytics":"Analytics","adminMenu.analyticsLink":"Analytics","adminMenu.customers":"Customers","adminMenu.reports":"Reports","adminMenu.content":"Content","adminMenu.banners":"Banners","adminMenu.messages":"Messages","adminMenu.notifications":"Notifications","adminMenu.settingsSection":"Settings","adminMenu.general":"General","adminMenu.payment":"Payment","adminMenu.receipts":"Receipts","adminMenu.system":"System","adminMenu.translations":"Translations","adminMenu.demoData":"Demo Data","adminMenu.dashboard":"Dashboard","adminMenu.manageBusinessSettings":"Manage your business and settings","adminMenu.helpText":"Need help? Check the","adminMenu.supportCenter":"support center"}};n(y[t]||y.is)};_.useEffect(()=>{(async()=>{var b,w;try{const P=await fetch("https://olfong.olibuijr.com/api/settings/public",{});if(P.ok){const A=(w=(b=(await P.json()).data)==null?void 0:b.settings)==null?void 0:w.language;A&&["is","en"].includes(A)&&(h(A),localStorage.getItem("preferred_language")||r(A))}}catch(N){console.warn("Failed to fetch store default language:",N)}})()},[]),_.useEffect(()=>{g()},[g]);const k=_.useCallback(y=>{d.includes(y)?(r(y),localStorage.setItem("preferred_language",y)):console.error(`Invalid language: ${y}. Available languages:`,d)},[d]),x=_.useCallback(async()=>{await g()},[g]),j={currentLanguage:t,setCurrentLanguage:k,t:m,isLoading:i,refreshTranslations:x,availableLanguages:d};return s.jsx(Q2.Provider,{value:j,children:e})},je=()=>{const e=_.useContext(Q2);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e},t_=_.createContext(void 0),fI=({children:e})=>{const[t,r]=_.useState(!1),n={sidebarOpen:t,setSidebarOpen:r,toggleSidebar:()=>{r(i=>!i)}};return s.jsx(t_.Provider,{value:n,children:e})},_y=()=>{const e=_.useContext(t_);if(e===void 0)throw new Error("useAdminSidebar must be used within an AdminSidebarProvider");return e};function Ys(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(n){return"'"+n+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Zn(e){return!!e&&!!e[It]}function on(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var n=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===NI}(e)||Array.isArray(e)||!!e[Zk]||!!(!((t=e.constructor)===null||t===void 0)&&t[Zk])||Sy(e)||Cy(e))}function Ui(e,t,r){r===void 0&&(r=!1),cl(e)===0?(r?Object.keys:Do)(e).forEach(function(a){r&&typeof a=="symbol"||t(a,e[a],e)}):e.forEach(function(a,n){return t(n,a,e)})}function cl(e){var t=e[It];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Sy(e)?2:Cy(e)?3:0}function Ro(e,t){return cl(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pI(e,t){return cl(e)===2?e.get(t):e[t]}function r_(e,t,r){var a=cl(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function s_(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Sy(e){return wI&&e instanceof Map}function Cy(e){return jI&&e instanceof Set}function bi(e){return e.o||e.t}function Py(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=n_(e);delete t[It];for(var r=Do(t),a=0;a<r.length;a++){var n=r[a],i=t[n];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function Ey(e,t){return t===void 0&&(t=!1),Iy(e)||Zn(e)||!on(e)||(cl(e)>1&&(e.set=e.add=e.clear=e.delete=xI),Object.freeze(e),t&&Ui(e,function(r,a){return Ey(a,!0)},!0)),e}function xI(){Ys(2)}function Iy(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ja(e){var t=zp[e];return t||Ys(18,e),t}function yI(e,t){zp[e]||(zp[e]=t)}function Op(){return nc}function V0(e,t){t&&(ja("Patches"),e.u=[],e.s=[],e.v=t)}function mm(e){Fp(e),e.p.forEach(bI),e.p=null}function Fp(e){e===nc&&(nc=e.l)}function Vk(e){return nc={p:[],l:nc,h:e,m:!0,_:0}}function bI(e){var t=e[It];t.i===0||t.i===1?t.j():t.g=!0}function H0(e,t){t._=t.p.length;var r=t.p[0],a=e!==void 0&&e!==r;return t.h.O||ja("ES5").S(t,e,a),a?(r[It].P&&(mm(t),Ys(4)),on(e)&&(e=gm(t,e),t.l||fm(t,e)),t.u&&ja("Patches").M(r[It].t,e,t.u,t.s)):e=gm(t,r,[]),mm(t),t.u&&t.v(t.u,t.s),e!==a_?e:void 0}function gm(e,t,r){if(Iy(t))return t;var a=t[It];if(!a)return Ui(t,function(d,c){return Hk(e,a,t,d,c,r)},!0),t;if(a.A!==e)return t;if(!a.P)return fm(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var n=a.i===4||a.i===5?a.o=Py(a.k):a.o,i=n,o=!1;a.i===3&&(i=new Set(n),n.clear(),o=!0),Ui(i,function(d,c){return Hk(e,a,n,d,c,r,o)}),fm(e,n,!1),r&&e.u&&ja("Patches").N(a,r,e.u,e.s)}return a.o}function Hk(e,t,r,a,n,i,o){if(Zn(n)){var d=gm(e,n,i&&t&&t.i!==3&&!Ro(t.R,a)?i.concat(a):void 0);if(r_(r,a,d),!Zn(d))return;e.m=!1}else o&&r.add(n);if(on(n)&&!Iy(n)){if(!e.h.D&&e._<1)return;gm(e,n),t&&t.A.l||fm(e,n)}}function fm(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Ey(t,r)}function W0(e,t){var r=e[It];return(r?bi(r):e)[t]}function Wk(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Object.getPrototypeOf(r)}}function jn(e){e.P||(e.P=!0,e.l&&jn(e.l))}function q0(e){e.o||(e.o=Py(e.t))}function Bp(e,t,r){var a=Sy(t)?ja("MapSet").F(t,r):Cy(t)?ja("MapSet").T(t,r):e.O?function(n,i){var o=Array.isArray(n),d={i:o?1:0,A:i?i.A:Op(),P:!1,I:!1,R:{},l:i,t:n,k:null,o:null,j:null,C:!1},c=d,h=ic;o&&(c=[d],h=Gl);var m=Proxy.revocable(c,h),g=m.revoke,p=m.proxy;return d.k=p,d.j=g,p}(t,r):ja("ES5").J(t,r);return(r?r.A:Op()).p.push(a),a}function vI(e){return Zn(e)||Ys(22,e),function t(r){if(!on(r))return r;var a,n=r[It],i=cl(r);if(n){if(!n.P&&(n.i<4||!ja("ES5").K(n)))return n.t;n.I=!0,a=qk(r,i),n.I=!1}else a=qk(r,i);return Ui(a,function(o,d){n&&pI(n.t,o)===d||r_(a,o,t(d))}),i===3?new Set(a):a}(e)}function qk(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Py(e)}function kI(){function e(i,o){var d=n[i];return d?d.enumerable=o:n[i]=d={configurable:!0,enumerable:o,get:function(){var c=this[It];return ic.get(c,i)},set:function(c){var h=this[It];ic.set(h,i,c)}},d}function t(i){for(var o=i.length-1;o>=0;o--){var d=i[o][It];if(!d.P)switch(d.i){case 5:a(d)&&jn(d);break;case 4:r(d)&&jn(d)}}}function r(i){for(var o=i.t,d=i.k,c=Do(d),h=c.length-1;h>=0;h--){var m=c[h];if(m!==It){var g=o[m];if(g===void 0&&!Ro(o,m))return!0;var p=d[m],k=p&&p[It];if(k?k.t!==g:!s_(p,g))return!0}}var x=!!o[It];return c.length!==Do(o).length+(x?0:1)}function a(i){var o=i.k;if(o.length!==i.t.length)return!0;var d=Object.getOwnPropertyDescriptor(o,o.length-1);if(d&&!d.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var n={};yI("ES5",{J:function(i,o){var d=Array.isArray(i),c=function(m,g){if(m){for(var p=Array(g.length),k=0;k<g.length;k++)Object.defineProperty(p,""+k,e(k,!0));return p}var x=n_(g);delete x[It];for(var j=Do(x),y=0;y<j.length;y++){var b=j[y];x[b]=e(b,m||!!x[b].enumerable)}return Object.create(Object.getPrototypeOf(g),x)}(d,i),h={i:d?5:4,A:o?o.A:Op(),P:!1,I:!1,R:{},l:o,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,It,{value:h,writable:!0}),c},S:function(i,o,d){d?Zn(o)&&o[It].A===i&&t(i.p):(i.u&&function c(h){if(h&&typeof h=="object"){var m=h[It];if(m){var g=m.t,p=m.k,k=m.R,x=m.i;if(x===4)Ui(p,function(N){N!==It&&(g[N]!==void 0||Ro(g,N)?k[N]||c(p[N]):(k[N]=!0,jn(m)))}),Ui(g,function(N){p[N]!==void 0||Ro(p,N)||(k[N]=!1,jn(m))});else if(x===5){if(a(m)&&(jn(m),k.length=!0),p.length<g.length)for(var j=p.length;j<g.length;j++)k[j]=!1;else for(var y=g.length;y<p.length;y++)k[y]=!0;for(var b=Math.min(p.length,g.length),w=0;w<b;w++)p.hasOwnProperty(w)||(k[w]=!0),k[w]===void 0&&c(p[w])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):a(i)}})}var Kk,nc,Ty=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",wI=typeof Map<"u",jI=typeof Set<"u",Gk=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",a_=Ty?Symbol.for("immer-nothing"):((Kk={})["immer-nothing"]=!0,Kk),Zk=Ty?Symbol.for("immer-draftable"):"__$immer_draftable",It=Ty?Symbol.for("immer-state"):"__$immer_state",NI=""+Object.prototype.constructor,Do=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,n_=Object.getOwnPropertyDescriptors||function(e){var t={};return Do(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},zp={},ic={get:function(e,t){if(t===It)return e;var r=bi(e);if(!Ro(r,t))return function(n,i,o){var d,c=Wk(i,o);return c?"value"in c?c.value:(d=c.get)===null||d===void 0?void 0:d.call(n.k):void 0}(e,r,t);var a=r[t];return e.I||!on(a)?a:a===W0(e.t,t)?(q0(e),e.o[t]=Bp(e.A.h,a,e)):a},has:function(e,t){return t in bi(e)},ownKeys:function(e){return Reflect.ownKeys(bi(e))},set:function(e,t,r){var a=Wk(bi(e),t);if(a!=null&&a.set)return a.set.call(e.k,r),!0;if(!e.P){var n=W0(bi(e),t),i=n==null?void 0:n[It];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(s_(r,n)&&(r!==void 0||Ro(e.t,t)))return!0;q0(e),jn(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return W0(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,q0(e),jn(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=bi(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty:function(){Ys(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ys(12)}},Gl={};Ui(ic,function(e,t){Gl[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Gl.deleteProperty=function(e,t){return Gl.set.call(this,e,t,void 0)},Gl.set=function(e,t,r){return ic.set.call(this,e[0],t,r,e[0])};var _I=function(){function e(r){var a=this;this.O=Gk,this.D=!0,this.produce=function(n,i,o){if(typeof n=="function"&&typeof i!="function"){var d=i;i=n;var c=a;return function(j){var y=this;j===void 0&&(j=d);for(var b=arguments.length,w=Array(b>1?b-1:0),N=1;N<b;N++)w[N-1]=arguments[N];return c.produce(j,function(P){var C;return(C=i).call.apply(C,[y,P].concat(w))})}}var h;if(typeof i!="function"&&Ys(6),o!==void 0&&typeof o!="function"&&Ys(7),on(n)){var m=Vk(a),g=Bp(a,n,void 0),p=!0;try{h=i(g),p=!1}finally{p?mm(m):Fp(m)}return typeof Promise<"u"&&h instanceof Promise?h.then(function(j){return V0(m,o),H0(j,m)},function(j){throw mm(m),j}):(V0(m,o),H0(h,m))}if(!n||typeof n!="object"){if((h=i(n))===void 0&&(h=n),h===a_&&(h=void 0),a.D&&Ey(h,!0),o){var k=[],x=[];ja("Patches").M(n,h,k,x),o(k,x)}return h}Ys(21,n)},this.produceWithPatches=function(n,i){if(typeof n=="function")return function(h){for(var m=arguments.length,g=Array(m>1?m-1:0),p=1;p<m;p++)g[p-1]=arguments[p];return a.produceWithPatches(h,function(k){return n.apply(void 0,[k].concat(g))})};var o,d,c=a.produce(n,i,function(h,m){o=h,d=m});return typeof Promise<"u"&&c instanceof Promise?c.then(function(h){return[h,o,d]}):[c,o,d]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){on(r)||Ys(8),Zn(r)&&(r=vI(r));var a=Vk(this),n=Bp(this,r,void 0);return n[It].C=!0,Fp(a),n},t.finishDraft=function(r,a){var n=r&&r[It],i=n.A;return V0(i,a),H0(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Gk&&Ys(20),this.O=r},t.applyPatches=function(r,a){var n;for(n=a.length-1;n>=0;n--){var i=a[n];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}n>-1&&(a=a.slice(n+1));var o=ja("Patches").$;return Zn(r)?o(r,a):this.produce(r,function(d){return o(d,a)})},e}(),ms=new _I,i_=ms.produce;ms.produceWithPatches.bind(ms);ms.setAutoFreeze.bind(ms);ms.setUseProxies.bind(ms);ms.applyPatches.bind(ms);ms.createDraft.bind(ms);ms.finishDraft.bind(ms);function oc(e){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(e)}function SI(e,t){if(oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(oc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CI(e){var t=SI(e,"string");return oc(t)=="symbol"?t:t+""}function PI(e,t,r){return(t=CI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Jk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yk(Object(r),!0).forEach(function(a){PI(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yk(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Sr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Xk=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),K0=function(){return Math.random().toString(36).substring(7).split("").join(".")},pm={INIT:"@@redux/INIT"+K0(),REPLACE:"@@redux/REPLACE"+K0(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+K0()}};function EI(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function o_(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Sr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Sr(1));return r(o_)(e,t)}if(typeof e!="function")throw new Error(Sr(2));var n=e,i=t,o=[],d=o,c=!1;function h(){d===o&&(d=o.slice())}function m(){if(c)throw new Error(Sr(3));return i}function g(j){if(typeof j!="function")throw new Error(Sr(4));if(c)throw new Error(Sr(5));var y=!0;return h(),d.push(j),function(){if(y){if(c)throw new Error(Sr(6));y=!1,h();var w=d.indexOf(j);d.splice(w,1),o=null}}}function p(j){if(!EI(j))throw new Error(Sr(7));if(typeof j.type>"u")throw new Error(Sr(8));if(c)throw new Error(Sr(9));try{c=!0,i=n(i,j)}finally{c=!1}for(var y=o=d,b=0;b<y.length;b++){var w=y[b];w()}return j}function k(j){if(typeof j!="function")throw new Error(Sr(10));n=j,p({type:pm.REPLACE})}function x(){var j,y=g;return j={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(Sr(11));function N(){w.next&&w.next(m())}N();var P=y(N);return{unsubscribe:P}}},j[Xk]=function(){return this},j}return p({type:pm.INIT}),a={dispatch:p,subscribe:g,getState:m,replaceReducer:k},a[Xk]=x,a}function II(e){Object.keys(e).forEach(function(t){var r=e[t],a=r(void 0,{type:pm.INIT});if(typeof a>"u")throw new Error(Sr(12));if(typeof r(void 0,{type:pm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Sr(13))})}function TI(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var n=t[a];typeof e[n]=="function"&&(r[n]=e[n])}var i=Object.keys(r),o;try{II(r)}catch(d){o=d}return function(c,h){if(c===void 0&&(c={}),o)throw o;for(var m=!1,g={},p=0;p<i.length;p++){var k=i[p],x=r[k],j=c[k],y=x(j,h);if(typeof y>"u")throw h&&h.type,new Error(Sr(14));g[k]=y,m=m||y!==j}return m=m||i.length!==Object.keys(c).length,m?g:c}}function xm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,n){return function(){return a(n.apply(void 0,arguments))}})}function LI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var n=a.apply(void 0,arguments),i=function(){throw new Error(Sr(15))},o={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},d=t.map(function(c){return c(o)});return i=xm.apply(void 0,d)(n.dispatch),Jk(Jk({},n),{},{dispatch:i})}}}function l_(e){var t=function(a){var n=a.dispatch,i=a.getState;return function(o){return function(d){return typeof d=="function"?d(n,i,e):o(d)}}};return t}var $p=l_();$p.withExtraArgument=l_;var d_=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),AI=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function d(h){return function(m){return c([h,m])}}function c(h){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(i=h[0]&2?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],n=0}finally{a=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Qo=function(e,t){for(var r=0,a=t.length,n=e.length;r<a;r++,n++)e[n]=t[r];return e},MI=Object.defineProperty,RI=Object.defineProperties,DI=Object.getOwnPropertyDescriptors,Qk=Object.getOwnPropertySymbols,OI=Object.prototype.hasOwnProperty,FI=Object.prototype.propertyIsEnumerable,ew=function(e,t,r){return t in e?MI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},$n=function(e,t){for(var r in t||(t={}))OI.call(t,r)&&ew(e,r,t[r]);if(Qk)for(var a=0,n=Qk(t);a<n.length;a++){var r=n[a];FI.call(t,r)&&ew(e,r,t[r])}return e},G0=function(e,t){return RI(e,DI(t))},BI=function(e,t,r){return new Promise(function(a,n){var i=function(c){try{d(r.next(c))}catch(h){n(h)}},o=function(c){try{d(r.throw(c))}catch(h){n(h)}},d=function(c){return c.done?a(c.value):Promise.resolve(c.value).then(i,o)};d((r=r.apply(e,t)).next())})},zI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xm:xm.apply(null,arguments)};function $I(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function Un(e,t){function r(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(t){var i=t.apply(void 0,a);if(!i)throw new Error("prepareAction did not return an object");return $n($n({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:a[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(a){return a.type===e},r}var UI=function(e){d_(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Qo([void 0],r[0].concat(this)))):new(t.bind.apply(t,Qo([void 0],r.concat(this))))},t}(Array),VI=function(e){d_(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Qo([void 0],r[0].concat(this)))):new(t.bind.apply(t,Qo([void 0],r.concat(this))))},t}(Array);function Up(e){return on(e)?i_(e,function(){}):e}function HI(e){return typeof e=="boolean"}function WI(){return function(t){return qI(t)}}function qI(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var a=new UI;return r&&(HI(r)?a.push($p):a.push($p.withExtraArgument(r.extraArgument))),a}function KI(e){var t=WI(),r=e||{},a=r.reducer,n=a===void 0?void 0:a,i=r.middleware,o=i===void 0?t():i,d=r.devTools,c=d===void 0?!0:d,h=r.preloadedState,m=h===void 0?void 0:h,g=r.enhancers,p=g===void 0?void 0:g,k;if(typeof n=="function")k=n;else if($I(n))k=TI(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var x=o;typeof x=="function"&&(x=x(t));var j=LI.apply(void 0,x),y=xm;c&&(y=zI($n({trace:!1},typeof c=="object"&&c)));var b=new VI(j),w=b;Array.isArray(p)?w=Qo([j],p):typeof p=="function"&&(w=p(b));var N=y.apply(void 0,w);return o_(k,m,N)}function c_(e){var t={},r=[],a,n={addCase:function(i,o){var d=typeof i=="string"?i:i.type;if(!d)throw new Error("`builder.addCase` cannot be called with an empty action type");if(d in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[d]=o,n},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),n},addDefaultCase:function(i){return a=i,n}};return e(n),[t,r,a]}function GI(e){return typeof e=="function"}function ZI(e,t,r,a){r===void 0&&(r=[]);var n=typeof t=="function"?c_(t):[t,r,a],i=n[0],o=n[1],d=n[2],c;if(GI(e))c=function(){return Up(e())};else{var h=Up(e);c=function(){return h}}function m(g,p){g===void 0&&(g=c());var k=Qo([i[p.type]],o.filter(function(x){var j=x.matcher;return j(p)}).map(function(x){var j=x.reducer;return j}));return k.filter(function(x){return!!x}).length===0&&(k=[d]),k.reduce(function(x,j){if(j)if(Zn(x)){var y=x,b=j(y,p);return b===void 0?x:b}else{if(on(x))return i_(x,function(w){return j(w,p)});var b=j(x,p);if(b===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return x},g)}return m.getInitialState=c,m}function YI(e,t){return e+"/"+t}function Vr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:Up(e.initialState),a=e.reducers||{},n=Object.keys(a),i={},o={},d={};n.forEach(function(m){var g=a[m],p=YI(t,m),k,x;"reducer"in g?(k=g.reducer,x=g.prepare):k=g,i[m]=k,o[p]=k,d[m]=x?Un(p,x):Un(p)});function c(){var m=typeof e.extraReducers=="function"?c_(e.extraReducers):[e.extraReducers],g=m[0],p=g===void 0?{}:g,k=m[1],x=k===void 0?[]:k,j=m[2],y=j===void 0?void 0:j,b=$n($n({},p),o);return ZI(r,function(w){for(var N in b)w.addCase(N,b[N]);for(var P=0,C=x;P<C.length;P++){var A=C[P];w.addMatcher(A.matcher,A.reducer)}y&&w.addDefaultCase(y)})}var h;return{name:t,reducer:function(m,g){return h||(h=c()),h(m,g)},actions:d,caseReducers:i,getInitialState:function(){return h||(h=c()),h.getInitialState()}}}var JI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",XI=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=JI[Math.random()*64|0];return t},QI=["name","message","stack","code"],Z0=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),tw=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),eT=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,a=QI;r<a.length;r++){var n=a[r];typeof e[n]=="string"&&(t[n]=e[n])}return t}return{message:String(e)}},Ne=function(){function e(t,r,a){var n=Un(t+"/fulfilled",function(h,m,g,p){return{payload:h,meta:G0($n({},p||{}),{arg:g,requestId:m,requestStatus:"fulfilled"})}}),i=Un(t+"/pending",function(h,m,g){return{payload:void 0,meta:G0($n({},g||{}),{arg:m,requestId:h,requestStatus:"pending"})}}),o=Un(t+"/rejected",function(h,m,g,p,k){return{payload:p,error:(a&&a.serializeError||eT)(h||"Rejected"),meta:G0($n({},k||{}),{arg:g,requestId:m,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(h==null?void 0:h.name)==="AbortError",condition:(h==null?void 0:h.name)==="ConditionError"})}}),d=typeof AbortController<"u"?AbortController:function(){function h(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return h.prototype.abort=function(){},h}();function c(h){return function(m,g,p){var k=a!=null&&a.idGenerator?a.idGenerator(h):XI(),x=new d,j;function y(w){j=w,x.abort()}var b=function(){return BI(this,null,function(){var w,N,P,C,A,E,F;return AI(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),C=(w=a==null?void 0:a.condition)==null?void 0:w.call(a,h,{getState:g,extra:p}),rT(C)?[4,C]:[3,2];case 1:C=I.sent(),I.label=2;case 2:if(C===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return A=new Promise(function(D,Y){return x.signal.addEventListener("abort",function(){return Y({name:"AbortError",message:j||"Aborted"})})}),m(i(k,h,(N=a==null?void 0:a.getPendingMeta)==null?void 0:N.call(a,{requestId:k,arg:h},{getState:g,extra:p}))),[4,Promise.race([A,Promise.resolve(r(h,{dispatch:m,getState:g,extra:p,requestId:k,signal:x.signal,abort:y,rejectWithValue:function(D,Y){return new Z0(D,Y)},fulfillWithValue:function(D,Y){return new tw(D,Y)}})).then(function(D){if(D instanceof Z0)throw D;return D instanceof tw?n(D.payload,k,h,D.meta):n(D,k,h)})])];case 3:return P=I.sent(),[3,5];case 4:return E=I.sent(),P=E instanceof Z0?o(null,k,h,E.payload,E.meta):o(E,k,h),[3,5];case 5:return F=a&&!a.dispatchConditionRejection&&o.match(P)&&P.meta.condition,F||m(P),[2,P]}})})}();return Object.assign(b,{abort:y,requestId:k,arg:h,unwrap:function(){return b.then(tT)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:n,typePrefix:t})}return e.withTypes=function(){return e},e}();function tT(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function rT(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Ly="listenerMiddleware";Un(Ly+"/add");Un(Ly+"/removeAll");Un(Ly+"/remove");var rw;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);kI();function u_(e,t){return function(){return e.apply(t,arguments)}}const{toString:sT}=Object.prototype,{getPrototypeOf:Ay}=Object,{iterator:Sg,toStringTag:h_}=Symbol,Cg=(e=>t=>{const r=sT.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),aa=e=>(e=e.toLowerCase(),t=>Cg(t)===e),Pg=e=>t=>typeof t===e,{isArray:ul}=Array,el=Pg("undefined");function Nc(e){return e!==null&&!el(e)&&e.constructor!==null&&!el(e.constructor)&&Qr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m_=aa("ArrayBuffer");function aT(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&m_(e.buffer),t}const nT=Pg("string"),Qr=Pg("function"),g_=Pg("number"),_c=e=>e!==null&&typeof e=="object",iT=e=>e===!0||e===!1,Xu=e=>{if(Cg(e)!=="object")return!1;const t=Ay(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(h_ in e)&&!(Sg in e)},oT=e=>{if(!_c(e)||Nc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},lT=aa("Date"),dT=aa("File"),cT=aa("Blob"),uT=aa("FileList"),hT=e=>_c(e)&&Qr(e.pipe),mT=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Qr(e.append)&&((t=Cg(e))==="formdata"||t==="object"&&Qr(e.toString)&&e.toString()==="[object FormData]"))},gT=aa("URLSearchParams"),[fT,pT,xT,yT]=["ReadableStream","Request","Response","Headers"].map(aa),bT=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sc(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,n;if(typeof e!="object"&&(e=[e]),ul(e))for(a=0,n=e.length;a<n;a++)t.call(null,e[a],a,e);else{if(Nc(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let d;for(a=0;a<o;a++)d=i[a],t.call(null,e[d],d,e)}}function f_(e,t){if(Nc(e))return null;t=t.toLowerCase();const r=Object.keys(e);let a=r.length,n;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const Si=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,p_=e=>!el(e)&&e!==Si;function Vp(){const{caseless:e,skipUndefined:t}=p_(this)&&this||{},r={},a=(n,i)=>{const o=e&&f_(r,i)||i;Xu(r[o])&&Xu(n)?r[o]=Vp(r[o],n):Xu(n)?r[o]=Vp({},n):ul(n)?r[o]=n.slice():(!t||!el(n))&&(r[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Sc(arguments[n],a);return r}const vT=(e,t,r,{allOwnKeys:a}={})=>(Sc(t,(n,i)=>{r&&Qr(n)?e[i]=u_(n,r):e[i]=n},{allOwnKeys:a}),e),kT=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),wT=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},jT=(e,t,r,a)=>{let n,i,o;const d={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)o=n[i],(!a||a(o,e,t))&&!d[o]&&(t[o]=e[o],d[o]=!0);e=r!==!1&&Ay(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},NT=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},_T=e=>{if(!e)return null;if(ul(e))return e;let t=e.length;if(!g_(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},ST=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ay(Uint8Array)),CT=(e,t)=>{const a=(e&&e[Sg]).call(e);let n;for(;(n=a.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},PT=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},ET=aa("HTMLFormElement"),IT=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),sw=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),TT=aa("RegExp"),x_=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};Sc(r,(n,i)=>{let o;(o=t(n,i,e))!==!1&&(a[i]=o||n)}),Object.defineProperties(e,a)},LT=e=>{x_(e,(t,r)=>{if(Qr(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(Qr(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},AT=(e,t)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return ul(e)?a(e):a(String(e).split(t)),r},MT=()=>{},RT=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function DT(e){return!!(e&&Qr(e.append)&&e[h_]==="FormData"&&e[Sg])}const OT=e=>{const t=new Array(10),r=(a,n)=>{if(_c(a)){if(t.indexOf(a)>=0)return;if(Nc(a))return a;if(!("toJSON"in a)){t[n]=a;const i=ul(a)?[]:{};return Sc(a,(o,d)=>{const c=r(o,n+1);!el(c)&&(i[d]=c)}),t[n]=void 0,i}}return a};return r(e,0)},FT=aa("AsyncFunction"),BT=e=>e&&(_c(e)||Qr(e))&&Qr(e.then)&&Qr(e.catch),y_=((e,t)=>e?setImmediate:t?((r,a)=>(Si.addEventListener("message",({source:n,data:i})=>{n===Si&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),Si.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Qr(Si.postMessage)),zT=typeof queueMicrotask<"u"?queueMicrotask.bind(Si):typeof process<"u"&&process.nextTick||y_,$T=e=>e!=null&&Qr(e[Sg]),oe={isArray:ul,isArrayBuffer:m_,isBuffer:Nc,isFormData:mT,isArrayBufferView:aT,isString:nT,isNumber:g_,isBoolean:iT,isObject:_c,isPlainObject:Xu,isEmptyObject:oT,isReadableStream:fT,isRequest:pT,isResponse:xT,isHeaders:yT,isUndefined:el,isDate:lT,isFile:dT,isBlob:cT,isRegExp:TT,isFunction:Qr,isStream:hT,isURLSearchParams:gT,isTypedArray:ST,isFileList:uT,forEach:Sc,merge:Vp,extend:vT,trim:bT,stripBOM:kT,inherits:wT,toFlatObject:jT,kindOf:Cg,kindOfTest:aa,endsWith:NT,toArray:_T,forEachEntry:CT,matchAll:PT,isHTMLForm:ET,hasOwnProperty:sw,hasOwnProp:sw,reduceDescriptors:x_,freezeMethods:LT,toObjectSet:AT,toCamelCase:IT,noop:MT,toFiniteNumber:RT,findKey:f_,global:Si,isContextDefined:p_,isSpecCompliantForm:DT,toJSONObject:OT,isAsyncFn:FT,isThenable:BT,setImmediate:y_,asap:zT,isIterable:$T};function qe(e,t,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}oe.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:oe.toJSONObject(this.config),code:this.code,status:this.status}}});const b_=qe.prototype,v_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{v_[e]={value:e}});Object.defineProperties(qe,v_);Object.defineProperty(b_,"isAxiosError",{value:!0});qe.from=(e,t,r,a,n,i)=>{const o=Object.create(b_);oe.toFlatObject(e,o,function(m){return m!==Error.prototype},h=>h!=="isAxiosError");const d=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return qe.call(o,d,c,r,a,n),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const UT=null;function Hp(e){return oe.isPlainObject(e)||oe.isArray(e)}function k_(e){return oe.endsWith(e,"[]")?e.slice(0,-2):e}function aw(e,t,r){return e?e.concat(t).map(function(n,i){return n=k_(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}function VT(e){return oe.isArray(e)&&!e.some(Hp)}const HT=oe.toFlatObject(oe,{},null,function(t){return/^is[A-Z]/.test(t)});function Eg(e,t,r){if(!oe.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=oe.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,y){return!oe.isUndefined(y[j])});const a=r.metaTokens,n=r.visitor||m,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&oe.isSpecCompliantForm(t);if(!oe.isFunction(n))throw new TypeError("visitor must be a function");function h(x){if(x===null)return"";if(oe.isDate(x))return x.toISOString();if(oe.isBoolean(x))return x.toString();if(!c&&oe.isBlob(x))throw new qe("Blob is not supported. Use a Buffer instead.");return oe.isArrayBuffer(x)||oe.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function m(x,j,y){let b=x;if(x&&!y&&typeof x=="object"){if(oe.endsWith(j,"{}"))j=a?j:j.slice(0,-2),x=JSON.stringify(x);else if(oe.isArray(x)&&VT(x)||(oe.isFileList(x)||oe.endsWith(j,"[]"))&&(b=oe.toArray(x)))return j=k_(j),b.forEach(function(N,P){!(oe.isUndefined(N)||N===null)&&t.append(o===!0?aw([j],P,i):o===null?j:j+"[]",h(N))}),!1}return Hp(x)?!0:(t.append(aw(y,j,i),h(x)),!1)}const g=[],p=Object.assign(HT,{defaultVisitor:m,convertValue:h,isVisitable:Hp});function k(x,j){if(!oe.isUndefined(x)){if(g.indexOf(x)!==-1)throw Error("Circular reference detected in "+j.join("."));g.push(x),oe.forEach(x,function(b,w){(!(oe.isUndefined(b)||b===null)&&n.call(t,b,oe.isString(w)?w.trim():w,j,p))===!0&&k(b,j?j.concat(w):[w])}),g.pop()}}if(!oe.isObject(e))throw new TypeError("data must be an object");return k(e),t}function nw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function My(e,t){this._pairs=[],e&&Eg(e,this,t)}const w_=My.prototype;w_.append=function(t,r){this._pairs.push([t,r])};w_.toString=function(t){const r=t?function(a){return t.call(this,a,nw)}:nw;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function WT(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function j_(e,t,r){if(!t)return e;const a=r&&r.encode||WT;oe.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(t,r):i=oe.isURLSearchParams(t)?t.toString():new My(t,r).toString(a),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class iw{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){oe.forEach(this.handlers,function(a){a!==null&&t(a)})}}const N_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qT=typeof URLSearchParams<"u"?URLSearchParams:My,KT=typeof FormData<"u"?FormData:null,GT=typeof Blob<"u"?Blob:null,ZT={isBrowser:!0,classes:{URLSearchParams:qT,FormData:KT,Blob:GT},protocols:["http","https","file","blob","url","data"]},Ry=typeof window<"u"&&typeof document<"u",Wp=typeof navigator=="object"&&navigator||void 0,YT=Ry&&(!Wp||["ReactNative","NativeScript","NS"].indexOf(Wp.product)<0),JT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",XT=Ry&&window.location.href||"http://localhost",QT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ry,hasStandardBrowserEnv:YT,hasStandardBrowserWebWorkerEnv:JT,navigator:Wp,origin:XT},Symbol.toStringTag,{value:"Module"})),Ir={...QT,...ZT};function eL(e,t){return Eg(e,new Ir.classes.URLSearchParams,{visitor:function(r,a,n,i){return Ir.isNode&&oe.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function tL(e){return oe.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function rL(e){const t={},r=Object.keys(e);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],t[i]=e[i];return t}function __(e){function t(r,a,n,i){let o=r[i++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),c=i>=r.length;return o=!o&&oe.isArray(n)?n.length:o,c?(oe.hasOwnProp(n,o)?n[o]=[n[o],a]:n[o]=a,!d):((!n[o]||!oe.isObject(n[o]))&&(n[o]=[]),t(r,a,n[o],i)&&oe.isArray(n[o])&&(n[o]=rL(n[o])),!d)}if(oe.isFormData(e)&&oe.isFunction(e.entries)){const r={};return oe.forEachEntry(e,(a,n)=>{t(tL(a),n,r,0)}),r}return null}function sL(e,t,r){if(oe.isString(e))try{return(t||JSON.parse)(e),oe.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const Cc={transitional:N_,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=oe.isObject(t);if(i&&oe.isHTMLForm(t)&&(t=new FormData(t)),oe.isFormData(t))return n?JSON.stringify(__(t)):t;if(oe.isArrayBuffer(t)||oe.isBuffer(t)||oe.isStream(t)||oe.isFile(t)||oe.isBlob(t)||oe.isReadableStream(t))return t;if(oe.isArrayBufferView(t))return t.buffer;if(oe.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return eL(t,this.formSerializer).toString();if((d=oe.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Eg(d?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),sL(t)):t}],transformResponse:[function(t){const r=this.transitional||Cc.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(oe.isResponse(t)||oe.isReadableStream(t))return t;if(t&&oe.isString(t)&&(a&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(d){if(o)throw d.name==="SyntaxError"?qe.from(d,qe.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ir.classes.FormData,Blob:Ir.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};oe.forEach(["delete","get","head","post","put","patch"],e=>{Cc.headers[e]={}});const aL=oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nL=e=>{const t={};let r,a,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),a=o.substring(n+1).trim(),!(!r||t[r]&&aL[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},ow=Symbol("internals");function Dl(e){return e&&String(e).trim().toLowerCase()}function Qu(e){return e===!1||e==null?e:oe.isArray(e)?e.map(Qu):String(e)}function iL(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const oL=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Y0(e,t,r,a,n){if(oe.isFunction(a))return a.call(this,t,r);if(n&&(t=r),!!oe.isString(t)){if(oe.isString(a))return t.indexOf(a)!==-1;if(oe.isRegExp(a))return a.test(t)}}function lL(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function dL(e,t){const r=oe.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(n,i,o){return this[a].call(this,t,n,i,o)},configurable:!0})})}let es=class{constructor(t){t&&this.set(t)}set(t,r,a){const n=this;function i(d,c,h){const m=Dl(c);if(!m)throw new Error("header name must be a non-empty string");const g=oe.findKey(n,m);(!g||n[g]===void 0||h===!0||h===void 0&&n[g]!==!1)&&(n[g||c]=Qu(d))}const o=(d,c)=>oe.forEach(d,(h,m)=>i(h,m,c));if(oe.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(oe.isString(t)&&(t=t.trim())&&!oL(t))o(nL(t),r);else if(oe.isObject(t)&&oe.isIterable(t)){let d={},c,h;for(const m of t){if(!oe.isArray(m))throw TypeError("Object iterator must return a key-value pair");d[h=m[0]]=(c=d[h])?oe.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(d,r)}else t!=null&&i(r,t,a);return this}get(t,r){if(t=Dl(t),t){const a=oe.findKey(this,t);if(a){const n=this[a];if(!r)return n;if(r===!0)return iL(n);if(oe.isFunction(r))return r.call(this,n,a);if(oe.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Dl(t),t){const a=oe.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||Y0(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let n=!1;function i(o){if(o=Dl(o),o){const d=oe.findKey(a,o);d&&(!r||Y0(a,a[d],d,r))&&(delete a[d],n=!0)}}return oe.isArray(t)?t.forEach(i):i(t),n}clear(t){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!t||Y0(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const r=this,a={};return oe.forEach(this,(n,i)=>{const o=oe.findKey(a,i);if(o){r[o]=Qu(n),delete r[i];return}const d=t?lL(i):String(i).trim();d!==i&&delete r[i],r[d]=Qu(n),a[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return oe.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=t&&oe.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(n=>a.set(n)),a}static accessor(t){const a=(this[ow]=this[ow]={accessors:{}}).accessors,n=this.prototype;function i(o){const d=Dl(o);a[d]||(dL(n,o),a[d]=!0)}return oe.isArray(t)?t.forEach(i):i(t),this}};es.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);oe.reduceDescriptors(es.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});oe.freezeMethods(es);function J0(e,t){const r=this||Cc,a=t||r,n=es.from(a.headers);let i=a.data;return oe.forEach(e,function(d){i=d.call(r,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function S_(e){return!!(e&&e.__CANCEL__)}function hl(e,t,r){qe.call(this,e??"canceled",qe.ERR_CANCELED,t,r),this.name="CanceledError"}oe.inherits(hl,qe,{__CANCEL__:!0});function C_(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new qe("Request failed with status code "+r.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function cL(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function uL(e,t){e=e||10;const r=new Array(e),a=new Array(e);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const h=Date.now(),m=a[i];o||(o=h),r[n]=c,a[n]=h;let g=i,p=0;for(;g!==n;)p+=r[g++],g=g%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),h-o<t)return;const k=m&&h-m;return k?Math.round(p*1e3/k):void 0}}function hL(e,t){let r=0,a=1e3/t,n,i;const o=(h,m=Date.now())=>{r=m,n=null,i&&(clearTimeout(i),i=null),e(...h)};return[(...h)=>{const m=Date.now(),g=m-r;g>=a?o(h,m):(n=h,i||(i=setTimeout(()=>{i=null,o(n)},a-g)))},()=>n&&o(n)]}const ym=(e,t,r=3)=>{let a=0;const n=uL(50,250);return hL(i=>{const o=i.loaded,d=i.lengthComputable?i.total:void 0,c=o-a,h=n(c),m=o<=d;a=o;const g={loaded:o,total:d,progress:d?o/d:void 0,bytes:c,rate:h||void 0,estimated:h&&d&&m?(d-o)/h:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(g)},r)},lw=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},dw=e=>(...t)=>oe.asap(()=>e(...t)),mL=Ir.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Ir.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Ir.origin),Ir.navigator&&/(msie|trident)/i.test(Ir.navigator.userAgent)):()=>!0,gL=Ir.hasStandardBrowserEnv?{write(e,t,r,a,n,i){const o=[e+"="+encodeURIComponent(t)];oe.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),oe.isString(a)&&o.push("path="+a),oe.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function fL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function pL(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function P_(e,t,r){let a=!fL(t);return e&&(a||r==!1)?pL(e,t):t}const cw=e=>e instanceof es?{...e}:e;function Vi(e,t){t=t||{};const r={};function a(h,m,g,p){return oe.isPlainObject(h)&&oe.isPlainObject(m)?oe.merge.call({caseless:p},h,m):oe.isPlainObject(m)?oe.merge({},m):oe.isArray(m)?m.slice():m}function n(h,m,g,p){if(oe.isUndefined(m)){if(!oe.isUndefined(h))return a(void 0,h,g,p)}else return a(h,m,g,p)}function i(h,m){if(!oe.isUndefined(m))return a(void 0,m)}function o(h,m){if(oe.isUndefined(m)){if(!oe.isUndefined(h))return a(void 0,h)}else return a(void 0,m)}function d(h,m,g){if(g in t)return a(h,m);if(g in e)return a(void 0,h)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(h,m,g)=>n(cw(h),cw(m),g,!0)};return oe.forEach(Object.keys({...e,...t}),function(m){const g=c[m]||n,p=g(e[m],t[m],m);oe.isUndefined(p)&&g!==d||(r[m]=p)}),r}const E_=e=>{const t=Vi({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:d}=t;if(t.headers=o=es.from(o),t.url=j_(P_(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),oe.isFormData(r)){if(Ir.hasStandardBrowserEnv||Ir.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(oe.isFunction(r.getHeaders)){const c=r.getHeaders(),h=["content-type","content-length"];Object.entries(c).forEach(([m,g])=>{h.includes(m.toLowerCase())&&o.set(m,g)})}}if(Ir.hasStandardBrowserEnv&&(a&&oe.isFunction(a)&&(a=a(t)),a||a!==!1&&mL(t.url))){const c=n&&i&&gL.read(i);c&&o.set(n,c)}return t},xL=typeof XMLHttpRequest<"u",yL=xL&&function(e){return new Promise(function(r,a){const n=E_(e);let i=n.data;const o=es.from(n.headers).normalize();let{responseType:d,onUploadProgress:c,onDownloadProgress:h}=n,m,g,p,k,x;function j(){k&&k(),x&&x(),n.cancelToken&&n.cancelToken.unsubscribe(m),n.signal&&n.signal.removeEventListener("abort",m)}let y=new XMLHttpRequest;y.open(n.method.toUpperCase(),n.url,!0),y.timeout=n.timeout;function b(){if(!y)return;const N=es.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),C={data:!d||d==="text"||d==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:N,config:e,request:y};C_(function(E){r(E),j()},function(E){a(E),j()},C),y=null}"onloadend"in y?y.onloadend=b:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(b)},y.onabort=function(){y&&(a(new qe("Request aborted",qe.ECONNABORTED,e,y)),y=null)},y.onerror=function(P){const C=P&&P.message?P.message:"Network Error",A=new qe(C,qe.ERR_NETWORK,e,y);A.event=P||null,a(A),y=null},y.ontimeout=function(){let P=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const C=n.transitional||N_;n.timeoutErrorMessage&&(P=n.timeoutErrorMessage),a(new qe(P,C.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,e,y)),y=null},i===void 0&&o.setContentType(null),"setRequestHeader"in y&&oe.forEach(o.toJSON(),function(P,C){y.setRequestHeader(C,P)}),oe.isUndefined(n.withCredentials)||(y.withCredentials=!!n.withCredentials),d&&d!=="json"&&(y.responseType=n.responseType),h&&([p,x]=ym(h,!0),y.addEventListener("progress",p)),c&&y.upload&&([g,k]=ym(c),y.upload.addEventListener("progress",g),y.upload.addEventListener("loadend",k)),(n.cancelToken||n.signal)&&(m=N=>{y&&(a(!N||N.type?new hl(null,e,y):N),y.abort(),y=null)},n.cancelToken&&n.cancelToken.subscribe(m),n.signal&&(n.signal.aborted?m():n.signal.addEventListener("abort",m)));const w=cL(n.url);if(w&&Ir.protocols.indexOf(w)===-1){a(new qe("Unsupported protocol "+w+":",qe.ERR_BAD_REQUEST,e));return}y.send(i||null)})},bL=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,n;const i=function(h){if(!n){n=!0,d();const m=h instanceof Error?h:this.reason;a.abort(m instanceof qe?m:new hl(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new qe(`timeout ${t} of ms exceeded`,qe.ETIMEDOUT))},t);const d=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),e=null)};e.forEach(h=>h.addEventListener("abort",i));const{signal:c}=a;return c.unsubscribe=()=>oe.asap(d),c}},vL=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,n;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},kL=async function*(e,t){for await(const r of wL(e))yield*vL(r,t)},wL=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},uw=(e,t,r,a)=>{const n=kL(e,t);let i=0,o,d=c=>{o||(o=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:h,value:m}=await n.next();if(h){d(),c.close();return}let g=m.byteLength;if(r){let p=i+=g;r(p)}c.enqueue(new Uint8Array(m))}catch(h){throw d(h),h}},cancel(c){return d(c),n.return()}},{highWaterMark:2})},hw=64*1024,{isFunction:bu}=oe,jL=(({Request:e,Response:t})=>({Request:e,Response:t}))(oe.global),{ReadableStream:mw,TextEncoder:gw}=oe.global,fw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},NL=e=>{e=oe.merge.call({skipUndefined:!0},jL,e);const{fetch:t,Request:r,Response:a}=e,n=t?bu(t):typeof fetch=="function",i=bu(r),o=bu(a);if(!n)return!1;const d=n&&bu(mw),c=n&&(typeof gw=="function"?(x=>j=>x.encode(j))(new gw):async x=>new Uint8Array(await new r(x).arrayBuffer())),h=i&&d&&fw(()=>{let x=!1;const j=new r(Ir.origin,{body:new mw,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!j}),m=o&&d&&fw(()=>oe.isReadableStream(new a("").body)),g={stream:m&&(x=>x.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!g[x]&&(g[x]=(j,y)=>{let b=j&&j[x];if(b)return b.call(j);throw new qe(`Response type '${x}' is not supported`,qe.ERR_NOT_SUPPORT,y)})});const p=async x=>{if(x==null)return 0;if(oe.isBlob(x))return x.size;if(oe.isSpecCompliantForm(x))return(await new r(Ir.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(oe.isArrayBufferView(x)||oe.isArrayBuffer(x))return x.byteLength;if(oe.isURLSearchParams(x)&&(x=x+""),oe.isString(x))return(await c(x)).byteLength},k=async(x,j)=>{const y=oe.toFiniteNumber(x.getContentLength());return y??p(j)};return async x=>{let{url:j,method:y,data:b,signal:w,cancelToken:N,timeout:P,onDownloadProgress:C,onUploadProgress:A,responseType:E,headers:F,withCredentials:I="same-origin",fetchOptions:D}=E_(x),Y=t||fetch;E=E?(E+"").toLowerCase():"text";let R=bL([w,N&&N.toAbortSignal()],P),Z=null;const T=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let B;try{if(A&&h&&y!=="get"&&y!=="head"&&(B=await k(F,b))!==0){let V=new r(j,{method:"POST",body:b,duplex:"half"}),X;if(oe.isFormData(b)&&(X=V.headers.get("content-type"))&&F.setContentType(X),V.body){const[le,ge]=lw(B,ym(dw(A)));b=uw(V.body,hw,le,ge)}}oe.isString(I)||(I=I?"include":"omit");const W=i&&"credentials"in r.prototype,Q={...D,signal:R,method:y.toUpperCase(),headers:F.normalize().toJSON(),body:b,duplex:"half",credentials:W?I:void 0};Z=i&&new r(j,Q);let $=await(i?Y(Z,D):Y(j,Q));const O=m&&(E==="stream"||E==="response");if(m&&(C||O&&T)){const V={};["status","statusText","headers"].forEach(ne=>{V[ne]=$[ne]});const X=oe.toFiniteNumber($.headers.get("content-length")),[le,ge]=C&&lw(X,ym(dw(C),!0))||[];$=new a(uw($.body,hw,le,()=>{ge&&ge(),T&&T()}),V)}E=E||"text";let K=await g[oe.findKey(g,E)||"text"]($,x);return!O&&T&&T(),await new Promise((V,X)=>{C_(V,X,{data:K,headers:es.from($.headers),status:$.status,statusText:$.statusText,config:x,request:Z})})}catch(W){throw T&&T(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new qe("Network Error",qe.ERR_NETWORK,x,Z),{cause:W.cause||W}):qe.from(W,W&&W.code,x,Z)}}},_L=new Map,I_=e=>{let t=e?e.env:{};const{fetch:r,Request:a,Response:n}=t,i=[a,n,r];let o=i.length,d=o,c,h,m=_L;for(;d--;)c=i[d],h=m.get(c),h===void 0&&m.set(c,h=d?new Map:NL(t)),m=h;return h};I_();const qp={http:UT,xhr:yL,fetch:{get:I_}};oe.forEach(qp,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const pw=e=>`- ${e}`,SL=e=>oe.isFunction(e)||e===null||e===!1,T_={getAdapter:(e,t)=>{e=oe.isArray(e)?e:[e];const{length:r}=e;let a,n;const i={};for(let o=0;o<r;o++){a=e[o];let d;if(n=a,!SL(a)&&(n=qp[(d=String(a)).toLowerCase()],n===void 0))throw new qe(`Unknown adapter '${d}'`);if(n&&(oe.isFunction(n)||(n=n.get(t))))break;i[d||"#"+o]=n}if(!n){const o=Object.entries(i).map(([c,h])=>`adapter ${c} `+(h===!1?"is not supported by the environment":"is not available in the build"));let d=r?o.length>1?`since :
`+o.map(pw).join(`
`):" "+pw(o[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return n},adapters:qp};function X0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new hl(null,e)}function xw(e){return X0(e),e.headers=es.from(e.headers),e.data=J0.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),T_.getAdapter(e.adapter||Cc.adapter,e)(e).then(function(a){return X0(e),a.data=J0.call(e,e.transformResponse,a),a.headers=es.from(a.headers),a},function(a){return S_(a)||(X0(e),a&&a.response&&(a.response.data=J0.call(e,e.transformResponse,a.response),a.response.headers=es.from(a.response.headers))),Promise.reject(a)})}const L_="1.12.2",Ig={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ig[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const yw={};Ig.transitional=function(t,r,a){function n(i,o){return"[Axios v"+L_+"] Transitional option '"+i+"'"+o+(a?". "+a:"")}return(i,o,d)=>{if(t===!1)throw new qe(n(o," has been removed"+(r?" in "+r:"")),qe.ERR_DEPRECATED);return r&&!yw[o]&&(yw[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,d):!0}};Ig.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function CL(e,t,r){if(typeof e!="object")throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let n=a.length;for(;n-- >0;){const i=a[n],o=t[i];if(o){const d=e[i],c=d===void 0||o(d,i,e);if(c!==!0)throw new qe("option "+i+" must be "+c,qe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new qe("Unknown option "+i,qe.ERR_BAD_OPTION)}}const eh={assertOptions:CL,validators:Ig},da=eh.validators;let Ai=class{constructor(t){this.defaults=t||{},this.interceptors={request:new iw,response:new iw}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Vi(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&eh.assertOptions(a,{silentJSONParsing:da.transitional(da.boolean),forcedJSONParsing:da.transitional(da.boolean),clarifyTimeoutError:da.transitional(da.boolean)},!1),n!=null&&(oe.isFunction(n)?r.paramsSerializer={serialize:n}:eh.assertOptions(n,{encode:da.function,serialize:da.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),eh.assertOptions(r,{baseUrl:da.spelling("baseURL"),withXsrfToken:da.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&oe.merge(i.common,i[r.method]);i&&oe.forEach(["delete","get","head","post","put","patch","common"],x=>{delete i[x]}),r.headers=es.concat(o,i);const d=[];let c=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(c=c&&j.synchronous,d.unshift(j.fulfilled,j.rejected))});const h=[];this.interceptors.response.forEach(function(j){h.push(j.fulfilled,j.rejected)});let m,g=0,p;if(!c){const x=[xw.bind(this),void 0];for(x.unshift(...d),x.push(...h),p=x.length,m=Promise.resolve(r);g<p;)m=m.then(x[g++],x[g++]);return m}p=d.length;let k=r;for(;g<p;){const x=d[g++],j=d[g++];try{k=x(k)}catch(y){j.call(this,y);break}}try{m=xw.call(this,k)}catch(x){return Promise.reject(x)}for(g=0,p=h.length;g<p;)m=m.then(h[g++],h[g++]);return m}getUri(t){t=Vi(this.defaults,t);const r=P_(t.baseURL,t.url,t.allowAbsoluteUrls);return j_(r,t.params,t.paramsSerializer)}};oe.forEach(["delete","get","head","options"],function(t){Ai.prototype[t]=function(r,a){return this.request(Vi(a||{},{method:t,url:r,data:(a||{}).data}))}});oe.forEach(["post","put","patch"],function(t){function r(a){return function(i,o,d){return this.request(Vi(d||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ai.prototype[t]=r(),Ai.prototype[t+"Form"]=r(!0)});let PL=class A_{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(d=>{a.subscribe(d),i=d}).then(n);return o.cancel=function(){a.unsubscribe(i)},o},t(function(i,o,d){a.reason||(a.reason=new hl(i,o,d),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new A_(function(n){t=n}),cancel:t}}};function EL(e){return function(r){return e.apply(null,r)}}function IL(e){return oe.isObject(e)&&e.isAxiosError===!0}const Kp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Kp).forEach(([e,t])=>{Kp[t]=e});function M_(e){const t=new Ai(e),r=u_(Ai.prototype.request,t);return oe.extend(r,Ai.prototype,t,{allOwnKeys:!0}),oe.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return M_(Vi(e,n))},r}const Ht=M_(Cc);Ht.Axios=Ai;Ht.CanceledError=hl;Ht.CancelToken=PL;Ht.isCancel=S_;Ht.VERSION=L_;Ht.toFormData=Eg;Ht.AxiosError=qe;Ht.Cancel=Ht.CanceledError;Ht.all=function(t){return Promise.all(t)};Ht.spread=EL;Ht.isAxiosError=IL;Ht.mergeConfig=Vi;Ht.AxiosHeaders=es;Ht.formToJSON=e=>__(oe.isHTMLForm(e)?new FormData(e):e);Ht.getAdapter=T_.getAdapter;Ht.HttpStatusCode=Kp;Ht.default=Ht;const{Axios:fB,AxiosError:pB,CanceledError:xB,isCancel:yB,CancelToken:bB,VERSION:vB,all:kB,Cancel:wB,isAxiosError:jB,spread:NB,toFormData:_B,AxiosHeaders:SB,HttpStatusCode:CB,formToJSON:PB,getAdapter:EB,mergeConfig:IB}=Ht,R_="https://olfong.olibuijr.com/api";console.log("[API] API_BASE_URL:",R_);const ce=Ht.create({baseURL:R_,headers:{"Content-Type":"application/json"}});ce.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));ce.interceptors.response.use(e=>(e.data&&e.data.data,e.data),e=>{var r,a,n,i;const t=((a=(r=e.response)==null?void 0:r.data)==null?void 0:a.message)||"Something went wrong";return((n=e.response)==null?void 0:n.status)!==401&&((i=e.response)==null?void 0:i.status)!==404&&q.error(t),Promise.reject(e)});const Pa=Object.create(null);Pa.open="0";Pa.close="1";Pa.ping="2";Pa.pong="3";Pa.message="4";Pa.upgrade="5";Pa.noop="6";const th=Object.create(null);Object.keys(Pa).forEach(e=>{th[Pa[e]]=e});const Gp={type:"error",data:"parser error"},D_=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",O_=typeof ArrayBuffer=="function",F_=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Dy=({type:e,data:t},r,a)=>D_&&t instanceof Blob?r?a(t):bw(t,a):O_&&(t instanceof ArrayBuffer||F_(t))?r?a(t):bw(new Blob([t]),a):a(Pa[e]+(t||"")),bw=(e,t)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];t("b"+(a||""))},r.readAsDataURL(e)};function vw(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Q0;function TL(e,t){if(D_&&e.data instanceof Blob)return e.data.arrayBuffer().then(vw).then(t);if(O_&&(e.data instanceof ArrayBuffer||F_(e.data)))return t(vw(e.data));Dy(e,!1,r=>{Q0||(Q0=new TextEncoder),t(Q0.encode(r))})}const kw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<kw.length;e++)Zl[kw.charCodeAt(e)]=e;const LL=e=>{let t=e.length*.75,r=e.length,a,n=0,i,o,d,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),m=new Uint8Array(h);for(a=0;a<r;a+=4)i=Zl[e.charCodeAt(a)],o=Zl[e.charCodeAt(a+1)],d=Zl[e.charCodeAt(a+2)],c=Zl[e.charCodeAt(a+3)],m[n++]=i<<2|o>>4,m[n++]=(o&15)<<4|d>>2,m[n++]=(d&3)<<6|c&63;return h},AL=typeof ArrayBuffer=="function",Oy=(e,t)=>{if(typeof e!="string")return{type:"message",data:B_(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:ML(e.substring(1),t)}:th[r]?e.length>1?{type:th[r],data:e.substring(1)}:{type:th[r]}:Gp},ML=(e,t)=>{if(AL){const r=LL(e);return B_(r,t)}else return{base64:!0,data:e}},B_=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},z_="",RL=(e,t)=>{const r=e.length,a=new Array(r);let n=0;e.forEach((i,o)=>{Dy(i,!1,d=>{a[o]=d,++n===r&&t(a.join(z_))})})},DL=(e,t)=>{const r=e.split(z_),a=[];for(let n=0;n<r.length;n++){const i=Oy(r[n],t);if(a.push(i),i.type==="error")break}return a};function OL(){return new TransformStream({transform(e,t){TL(e,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,a)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(a))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let ef;function vu(e){return e.reduce((t,r)=>t+r.length,0)}function ku(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let a=0;for(let n=0;n<t;n++)r[n]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),r}function FL(e,t){ef||(ef=new TextDecoder);const r=[];let a=0,n=-1,i=!1;return new TransformStream({transform(o,d){for(r.push(o);;){if(a===0){if(vu(r)<1)break;const c=ku(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(vu(r)<2)break;const c=ku(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(vu(r)<8)break;const c=ku(r,8),h=new DataView(c.buffer,c.byteOffset,c.length),m=h.getUint32(0);if(m>Math.pow(2,21)-1){d.enqueue(Gp);break}n=m*Math.pow(2,32)+h.getUint32(4),a=3}else{if(vu(r)<n)break;const c=ku(r,n);d.enqueue(Oy(i?c:ef.decode(c),t)),a=0}if(n===0||n>e){d.enqueue(Gp);break}}}})}const $_=4;function Xt(e){if(e)return BL(e)}function BL(e){for(var t in Xt.prototype)e[t]=Xt.prototype[t];return e}Xt.prototype.on=Xt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Xt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Xt.prototype.off=Xt.prototype.removeListener=Xt.prototype.removeAllListeners=Xt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===t||a.fn===t){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Xt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,t)}return this};Xt.prototype.emitReserved=Xt.prototype.emit;Xt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Xt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Tg=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Is=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),zL="arraybuffer";function U_(e,...t){return t.reduce((r,a)=>(e.hasOwnProperty(a)&&(r[a]=e[a]),r),{})}const $L=Is.setTimeout,UL=Is.clearTimeout;function Lg(e,t){t.useNativeTimers?(e.setTimeoutFn=$L.bind(Is),e.clearTimeoutFn=UL.bind(Is)):(e.setTimeoutFn=Is.setTimeout.bind(Is),e.clearTimeoutFn=Is.clearTimeout.bind(Is))}const VL=1.33;function HL(e){return typeof e=="string"?WL(e):Math.ceil((e.byteLength||e.size)*VL)}function WL(e){let t=0,r=0;for(let a=0,n=e.length;a<n;a++)t=e.charCodeAt(a),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(a++,r+=4);return r}function V_(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function qL(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function KL(e){let t={},r=e.split("&");for(let a=0,n=r.length;a<n;a++){let i=r[a].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class GL extends Error{constructor(t,r,a){super(t),this.description=r,this.context=a,this.type="TransportError"}}class Fy extends Xt{constructor(t){super(),this.writable=!1,Lg(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,a){return super.emitReserved("error",new GL(t,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Oy(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=qL(t);return r.length?"?"+r:""}}class ZL extends Fy{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};DL(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,RL(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=V_()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let H_=!1;try{H_=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const YL=H_;function JL(){}class XL extends ZL{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}}doWrite(t,r){const a=this.request({method:"POST",data:t});a.on("success",r),a.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=t}}class Na extends Xt{constructor(t,r,a){super(),this.createRequest=t,Lg(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var t;const r=U_(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Na.requestsCount++,Na.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=JL,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Na.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Na.requestsCount=0;Na.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ww);else if(typeof addEventListener=="function"){const e="onpagehide"in Is?"pagehide":"unload";addEventListener(e,ww,!1)}}function ww(){for(let e in Na.requests)Na.requests.hasOwnProperty(e)&&Na.requests[e].abort()}const QL=function(){const e=W_({xdomain:!1});return e&&e.responseType!==null}();class e7 extends XL{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=QL&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Na(W_,this.uri(),t)}}function W_(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||YL))return new XMLHttpRequest}catch{}if(!t)try{return new Is[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const q_=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class t7 extends Fy{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,a=q_?{}:U_(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],n=r===t.length-1;Dy(a,this.supportsBinary,i=>{try{this.doWrite(a,i)}catch{}n&&Tg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=V_()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const tf=Is.WebSocket||Is.MozWebSocket;class r7 extends t7{createSocket(t,r,a){return q_?new tf(t,r,a):r?new tf(t,r):new tf(t)}doWrite(t,r){this.ws.send(r)}}class s7 extends Fy{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=FL(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=t.readable.pipeThrough(r).getReader(),n=OL();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const i=()=>{a.read().then(({done:d,value:c})=>{d||(this.onPacket(c),i())}).catch(d=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],n=r===t.length-1;this._writer.write(a).then(()=>{n&&Tg(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const a7={websocket:r7,webtransport:s7,polling:e7},n7=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i7=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zp(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),a=e.indexOf("]");r!=-1&&a!=-1&&(e=e.substring(0,r)+e.substring(r,a).replace(/:/g,";")+e.substring(a,e.length));let n=n7.exec(e||""),i={},o=14;for(;o--;)i[i7[o]]=n[o]||"";return r!=-1&&a!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=o7(i,i.path),i.queryKey=l7(i,i.query),i}function o7(e,t){const r=/\/{2,9}/g,a=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&a.splice(0,1),t.slice(-1)=="/"&&a.splice(a.length-1,1),a}function l7(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,i){n&&(r[n]=i)}),r}const Yp=typeof addEventListener=="function"&&typeof removeEventListener=="function",rh=[];Yp&&addEventListener("offline",()=>{rh.forEach(e=>e())},!1);class Vn extends Xt{constructor(t,r){if(super(),this.binaryType=zL,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const a=Zp(t);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Zp(r.host).host);Lg(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=KL(this.opts.query)),Yp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},rh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=$_,r.transport=t,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Vn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Vn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=HL(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Tg(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,a){return this._sendPacket("message",t,r,a),this}send(t,r,a){return this._sendPacket("message",t,r,a),this}_sendPacket(t,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const i={type:t,data:r,options:a};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}_onError(t){if(Vn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=rh.indexOf(this._offlineEventListener);a!==-1&&rh.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Vn.protocol=$_;class d7 extends Vn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),a=!1;Vn.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",g=>{if(!a)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Vn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(m(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=r.name,this.emitReserved("upgradeError",p)}}))};function i(){a||(a=!0,m(),r.close(),r=null)}const o=g=>{const p=new Error("probe error: "+g);p.transport=r.name,i(),this.emitReserved("upgradeError",p)};function d(){o("transport closed")}function c(){o("socket closed")}function h(g){r&&g.name!==r.name&&i()}const m=()=>{r.removeListener("open",n),r.removeListener("error",o),r.removeListener("close",d),this.off("close",c),this.off("upgrading",h)};r.once("open",n),r.once("error",o),r.once("close",d),this.once("close",c),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let a=0;a<t.length;a++)~this.transports.indexOf(t[a])&&r.push(t[a]);return r}}let c7=class extends d7{constructor(t,r={}){const a=typeof t=="object"?t:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>a7[n]).filter(n=>!!n)),super(t,a)}};function u7(e,t="",r){let a=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),a=Zp(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const i=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port+t,a.href=a.protocol+"://"+i+(r&&r.port===a.port?"":":"+a.port),a}const h7=typeof ArrayBuffer=="function",m7=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,K_=Object.prototype.toString,g7=typeof Blob=="function"||typeof Blob<"u"&&K_.call(Blob)==="[object BlobConstructor]",f7=typeof File=="function"||typeof File<"u"&&K_.call(File)==="[object FileConstructor]";function By(e){return h7&&(e instanceof ArrayBuffer||m7(e))||g7&&e instanceof Blob||f7&&e instanceof File}function sh(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,a=e.length;r<a;r++)if(sh(e[r]))return!0;return!1}if(By(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return sh(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&sh(e[r]))return!0;return!1}function p7(e){const t=[],r=e.data,a=e;return a.data=Jp(r,t),a.attachments=t.length,{packet:a,buffers:t}}function Jp(e,t){if(!e)return e;if(By(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let a=0;a<e.length;a++)r[a]=Jp(e[a],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=Jp(e[a],t));return r}return e}function x7(e,t){return e.data=Xp(e.data,t),delete e.attachments,e}function Xp(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Xp(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Xp(e[r],t));return e}const y7=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],b7=5;var rt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(rt||(rt={}));class v7{constructor(t){this.replacer=t}encode(t){return(t.type===rt.EVENT||t.type===rt.ACK)&&sh(t)?this.encodeAsBinary({type:t.type===rt.EVENT?rt.BINARY_EVENT:rt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===rt.BINARY_EVENT||t.type===rt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=p7(t),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}function jw(e){return Object.prototype.toString.call(e)==="[object Object]"}class zy extends Xt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const a=r.type===rt.BINARY_EVENT;a||r.type===rt.BINARY_ACK?(r.type=a?rt.EVENT:rt.ACK,this.reconstructor=new k7(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(By(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const a={type:Number(t.charAt(0))};if(rt[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===rt.BINARY_EVENT||a.type===rt.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););a.nsp=t.substring(i,r)}else a.nsp="/";const n=t.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}a.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(zy.isPayloadValid(a.type,i))a.data=i;else throw new Error("invalid payload")}return a}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case rt.CONNECT:return jw(r);case rt.DISCONNECT:return r===void 0;case rt.CONNECT_ERROR:return typeof r=="string"||jw(r);case rt.EVENT:case rt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&y7.indexOf(r[0])===-1);case rt.ACK:case rt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class k7{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=x7(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const w7=Object.freeze(Object.defineProperty({__proto__:null,Decoder:zy,Encoder:v7,get PacketType(){return rt},protocol:b7},Symbol.toStringTag,{value:"Module"}));function Ks(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const j7=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class G_ extends Xt{constructor(t,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ks(t,"open",this.onopen.bind(this)),Ks(t,"packet",this.onpacket.bind(this)),Ks(t,"error",this.onerror.bind(this)),Ks(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var a,n,i;if(j7.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:rt.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const m=this.ids++,g=r.pop();this._registerAckCallback(m,g),o.id=m}const d=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!d||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===t&&this.sendBuffer.splice(d,1);r.call(this,new Error("operation has timed out"))},n),o=(...d)=>{this.io.clearTimeoutFn(i),r.apply(this,d)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((a,n)=>{const i=(o,d)=>o?n(o):a(d);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...i)=>a!==this._queue[0]?void 0:(n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:rt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(a=>String(a.id)===t)){const a=this.acks[t];delete this.acks[t],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case rt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case rt.EVENT:case rt.BINARY_EVENT:this.onevent(t);break;case rt.ACK:case rt.BINARY_ACK:this.onack(t);break;case rt.DISCONNECT:this.ondisconnect();break;case rt.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:rt.ACK,id:t,data:n}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:rt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,t.data)}}}function ml(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ml.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ml.prototype.reset=function(){this.attempts=0};ml.prototype.setMin=function(e){this.ms=e};ml.prototype.setMax=function(e){this.max=e};ml.prototype.setJitter=function(e){this.jitter=e};class Qp extends Xt{constructor(t,r){var a;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Lg(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new ml({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const n=r.parser||w7;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new c7(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Ks(r,"open",function(){a.onopen(),t&&t()}),i=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),t?t(d):this.maybeReconnectOnOpen()},o=Ks(r,"error",i);if(this._timeout!==!1){const d=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},d);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ks(t,"ping",this.onping.bind(this)),Ks(t,"data",this.ondata.bind(this)),Ks(t,"error",this.onerror.bind(this)),Ks(t,"close",this.onclose.bind(this)),Ks(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Tg(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let a=this.nsps[t];return a?this._autoConnect&&!a.active&&a.connect():(a=new G_(this,t,r),this.nsps[t]=a),a}_destroy(t){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let a=0;a<r.length;a++)this.engine.write(r[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Ol={};function ah(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=u7(e,t.path||"/socket.io"),a=r.source,n=r.id,i=r.path,o=Ol[n]&&i in Ol[n].nsps,d=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return d?c=new Qp(a,t):(Ol[n]||(Ol[n]=new Qp(a,t)),c=Ol[n]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(ah,{Manager:Qp,Socket:G_,io:ah,connect:ah});class N7{constructor(){this.socket=null,this.isConnected=!1}connect(){if(!this.socket){const r="https://olfong.olibuijr.com/api".replace("/api","");this.socket=ah(r,{transports:["websocket"],timeout:2e4,forceNew:!0}),this.socket.on("connect",()=>{this.isConnected=!0,console.log("Connected to server")}),this.socket.on("disconnect",()=>{this.isConnected=!1,console.log("Disconnected from server")}),this.socket.on("connect_error",a=>{console.error("Connection error:",a),this.isConnected=!1}),this.socket.on("connect_timeout",()=>{console.error("Connection timeout"),this.isConnected=!1})}}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}joinUserRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-user-room",t)}joinAdminRoom(){this.socket&&this.isConnected&&this.socket.emit("join-admin-room")}joinDeliveryRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-delivery-room",t)}onOrderStatusUpdate(t){this.socket&&this.socket.on("order-status-update",t)}onDeliveryLocationUpdate(t){this.socket&&this.socket.on("delivery-location-update",t)}updateLocation(t){this.socket&&this.isConnected&&this.socket.emit("location-update",t)}updateOrderStatus(t){this.socket&&this.isConnected&&this.socket.emit("order-status-update",t)}joinConversation(t){this.socket&&this.isConnected&&this.socket.emit("join-conversation",t)}leaveConversation(t){this.socket&&this.isConnected&&this.socket.emit("leave-conversation",t)}emitTypingStart(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-start",{conversationId:t,userId:r})}emitTypingStop(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-stop",{conversationId:t,userId:r})}onNewMessage(t){this.socket&&this.socket.on("new-message",t)}onUserTyping(t){this.socket&&this.socket.on("user-typing",t)}onConversationUpdate(t){this.socket&&this.socket.on("conversation-updated",t)}on(t,r){this.socket&&this.socket.on(t,r)}onChatNotification(t){this.socket&&this.socket.on("chat-notification",t)}removeListener(t,r){this.socket&&this.socket.off(t,r)}off(t,r){this.removeListener(t,r)}emit(t,r){this.socket&&this.isConnected?this.socket.emit(t,r):console.warn(`Socket not connected. Cannot emit event: ${t}`)}isSocketConnected(){return this.socket&&this.isConnected}}const yt=new N7,dd=Ne("auth/login",async({username:e,password:t},{rejectWithValue:r})=>{var a,n,i,o;try{const d=await ce.post("/auth/login",{username:e,password:t});return localStorage.setItem("token",d.data.token),yt.connect(),yt.joinUserRoom(d.data.user.id),q.success("Skrir inn"),d.data}catch(d){return q.error(((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||"Innskrning mistkst"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Login failed")}}),nh=Ne("auth/kenniLogin",async({idToken:e},{rejectWithValue:t})=>{var r,a,n,i;try{const o=await ce.post("/auth/kenni/login",{idToken:e});return localStorage.setItem("token",o.data.token),yt.connect(),yt.joinUserRoom(o.data.user.id),q.success("Innskrur me Kenni"),o.data}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Kenni innskrning mistkst"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Kenni login failed")}}),ih=Ne("auth/dummyLogin",async({phone:e},{rejectWithValue:t})=>{var r,a,n,i;try{const o=await ce.post("/auth/dummy/login",{phone:e});return localStorage.setItem("token",o.data.token),yt.connect(),yt.joinUserRoom(o.data.user.id),q.success("Innskrur me dummy login"),o.data}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Dummy innskrning mistkst"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Dummy login failed")}}),rf=Ne("auth/register",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{const o=await ce.post("/auth/register",e);return localStorage.setItem("token",o.data.token),yt.connect(),yt.joinUserRoom(o.data.user.id),q.success("Nskrning tkst"),o.data}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Nskrning mistkst"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Registration failed")}}),oh=Ne("auth/getProfile",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/auth/profile")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to get profile")}}),lh=Ne("auth/updateProfile",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{const o=await ce.put("/auth/profile",e);return q.success("Prfll uppfrur"),o.data}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a uppfra prfll"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to update profile")}}),_7={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!!localStorage.getItem("token"),error:null},Z_=Vr({name:"auth",initialState:_7,reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),yt.disconnect(),q.success("tskrur")},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0}},extraReducers:e=>{e.addCase(dd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(dd.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(dd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(nh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(nh.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(nh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ih.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ih.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(ih.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(rf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(rf.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(rf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(oh.pending,t=>{t.isLoading=!0}).addCase(oh.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload,t.isAuthenticated=!0}).addCase(oh.rejected,(t,r)=>{var a,n,i;t.isLoading=!1,t.error=r.payload,((a=r.payload)!=null&&a.includes("token")||(n=r.payload)!=null&&n.includes("401")||(i=r.payload)!=null&&i.includes("Invalid"))&&(t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token"))}).addCase(lh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(lh.fulfilled,(t,r)=>{t.isLoading=!1,t.user={...t.user,...r.payload},t.error=null}).addCase(lh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{logout:$y,clearError:S7}=Z_.actions,C7=Z_.reducer,Oo=Ne("orders/fetchUserOrders",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await ce.get(`/orders/my-orders?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch orders")}}),dh=Ne("orders/fetchOrder",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get(`/orders/${e}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch order")}}),ch=Ne("orders/createOrder",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{const o=await ce.post("/orders",e);return q.success("Pntun stofnu"),o.data}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a stofna pntun"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create order")}}),cd=Ne("orders/updateOrderStatus",async({id:e,status:t,estimatedDelivery:r},{rejectWithValue:a})=>{var n,i,o,d;try{const c=await ce.put(`/orders/${e}/status`,{status:t,estimatedDelivery:r});return q.success("Pntunarstaa uppfr"),c.data}catch(c){return q.error(((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||"Mistkst a uppfra pntunarstaa"),a(((d=(o=c.response)==null?void 0:o.data)==null?void 0:d.message)||"Failed to update order status")}}),uh=Ne("orders/assignDeliveryPerson",async({id:e,deliveryPersonId:t},{rejectWithValue:r})=>{var a,n,i,o;try{const d=await ce.put(`/orders/${e}/assign-delivery`,{deliveryPersonId:t});return q.success("Afhendingarmaur thlutaur"),d.data}catch(d){return q.error(((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||"Mistkst a thluta afhendingarmanni"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to assign delivery person")}}),Fo=Ne("orders/fetchAllOrders",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await ce.get(`/orders?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch orders")}}),hh=Ne("orders/sendReceiptEmail",async({orderId:e,email:t},{rejectWithValue:r})=>{var a,n;try{return(await ce.post(`/orders/${e}/receipt/email`,{email:t})).data}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to send receipt email")}}),P7={orders:[],currentOrder:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},Y_=Vr({name:"orders",initialState:P7,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentOrder:e=>{e.currentOrder=null},clearError:e=>{e.error=null},updateOrderStatusRealtime:(e,t)=>{const{orderId:r,status:a}=t.payload,n=e.orders.findIndex(i=>i.id===r);n!==-1&&(e.orders[n].status=a,e.orders[n].updatedAt=new Date().toISOString()),e.currentOrder&&e.currentOrder.id===r&&(e.currentOrder.status=a,e.currentOrder.updatedAt=new Date().toISOString())}},extraReducers:e=>{e.addCase(Oo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Oo.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(Oo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(dh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(dh.fulfilled,(t,r)=>{t.isLoading=!1,t.currentOrder=r.payload,t.error=null}).addCase(dh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ch.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ch.fulfilled,(t,r)=>{t.isLoading=!1,t.orders.unshift(r.payload),t.error=null}).addCase(ch.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(cd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(cd.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.orders.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.orders[a]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase(cd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(uh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(uh.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.orders.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.orders[a]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase(uh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Fo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Fo.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(Fo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(hh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(hh.fulfilled,(t,r)=>{t.isLoading=!1,t.error=null}).addCase(hh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:E7,clearCurrentOrder:I7,updateOrderStatusRealtime:T7}=Y_.actions,L7=Y_.reducer;/*! Capacitor: https://capacitorjs.com/ - MIT License */var tl;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(tl||(tl={}));class sf extends Error{constructor(t,r,a){super(t),this.message=t,this.code=r,this.data=a}}const A7=e=>{var t,r;return e!=null&&e.androidBridge?"android":!((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},M7=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},a=r.Plugins=r.Plugins||{},n=()=>t!==null?t.name:A7(e),i=()=>n()!=="web",o=g=>{const p=h.get(g);return!!(p!=null&&p.platforms.has(n())||d(g))},d=g=>{var p;return(p=r.PluginHeaders)===null||p===void 0?void 0:p.find(k=>k.name===g)},c=g=>e.console.error(g),h=new Map,m=(g,p={})=>{const k=h.get(g);if(k)return console.warn(`Capacitor plugin "${g}" already registered. Cannot register plugins twice.`),k.proxy;const x=n(),j=d(g);let y;const b=async()=>(!y&&x in p?y=typeof p[x]=="function"?y=await p[x]():y=p[x]:t!==null&&!y&&"web"in p&&(y=typeof p.web=="function"?y=await p.web():y=p.web),y),w=(F,I)=>{var D,Y;if(j){const R=j==null?void 0:j.methods.find(Z=>I===Z.name);if(R)return R.rtype==="promise"?Z=>r.nativePromise(g,I.toString(),Z):(Z,T)=>r.nativeCallback(g,I.toString(),Z,T);if(F)return(D=F[I])===null||D===void 0?void 0:D.bind(F)}else{if(F)return(Y=F[I])===null||Y===void 0?void 0:Y.bind(F);throw new sf(`"${g}" plugin is not implemented on ${x}`,tl.Unimplemented)}},N=F=>{let I;const D=(...Y)=>{const R=b().then(Z=>{const T=w(Z,F);if(T){const B=T(...Y);return I=B==null?void 0:B.remove,B}else throw new sf(`"${g}.${F}()" is not implemented on ${x}`,tl.Unimplemented)});return F==="addListener"&&(R.remove=async()=>I()),R};return D.toString=()=>`${F.toString()}() { [capacitor code] }`,Object.defineProperty(D,"name",{value:F,writable:!1,configurable:!1}),D},P=N("addListener"),C=N("removeListener"),A=(F,I)=>{const D=P({eventName:F},I),Y=async()=>{const Z=await D;C({eventName:F,callbackId:Z},I)},R=new Promise(Z=>D.then(()=>Z({remove:Y})));return R.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Y()},R},E=new Proxy({},{get(F,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?A:P;case"removeListener":return C;default:return N(I)}}});return a[g]=E,h.set(g,{name:g,proxy:E,platforms:new Set([...Object.keys(p),...j?[x]:[]])}),E};return r.convertFileSrc||(r.convertFileSrc=g=>g),r.getPlatform=n,r.handleError=c,r.isNativePlatform=i,r.isPluginAvailable=o,r.registerPlugin=m,r.Exception=sf,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},R7=e=>e.Capacitor=M7(e),ex=R7(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Uy=ex.registerPlugin;class J_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let a=!1;this.listeners[t]||(this.listeners[t]=[],a=!0),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),a&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,r);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,a){const n=this.listeners[t];if(!n){if(a){let i=this.retainedEventArguments[t];i||(i=[]),i.push(r),this.retainedEventArguments[t]=i}return}n.forEach(i=>i(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:a=>{this.notifyListeners(r,a)}}}unimplemented(t="not implemented"){return new ex.Exception(t,tl.Unimplemented)}unavailable(t="not available"){return new ex.Exception(t,tl.Unavailable)}async removeListener(t,r){const a=this.listeners[t];if(!a)return;const n=a.indexOf(r);this.listeners[t].splice(n,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(a=>{this.notifyListeners(t,a)}))}}const Nw=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),_w=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class D7 extends J_{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(a=>{if(a.length<=0)return;let[n,i]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=_w(n).trim(),i=_w(i).trim(),r[n]=i}),r}async setCookie(t){try{const r=Nw(t.key),a=Nw(t.value),n=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${a||""}${n}; path=${i}; ${o};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Uy("CapacitorCookies",{web:()=>new D7});const O7=async e=>new Promise((t,r)=>{const a=new FileReader;a.onload=()=>{const n=a.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},a.onerror=n=>r(n),a.readAsDataURL(e)}),F7=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(n=>n.toLocaleLowerCase()).reduce((n,i,o)=>(n[i]=e[t[o]],n),{})},B7=(e,t=!0)=>e?Object.entries(e).reduce((a,n)=>{const[i,o]=n;let d,c;return Array.isArray(o)?(c="",o.forEach(h=>{d=t?encodeURIComponent(h):h,c+=`${i}=${d}&`}),c.slice(0,-1)):(d=t?encodeURIComponent(o):o,c=`${i}=${d}`),`${a}&${c}`},"").substr(1):null,z7=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),n=F7(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,d]of Object.entries(e.data||{}))i.set(o,d);r.body=i.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((d,c)=>{i.append(c,d)});else for(const d of Object.keys(e.data))i.append(d,e.data[d]);r.body=i;const o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(n.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class $7 extends J_{async request(t){const r=z7(t,t.webFetchExtra),a=B7(t.params,t.shouldEncodeUrlParams),n=a?`${t.url}?${a}`:t.url,i=await fetch(n,r),o=i.headers.get("content-type")||"";let{responseType:d="text"}=i.ok?t:{};o.includes("application/json")&&(d="json");let c,h;switch(d){case"arraybuffer":case"blob":h=await i.blob(),c=await O7(h);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const m={};return i.headers.forEach((g,p)=>{m[p]=g}),{data:c,headers:m,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Uy("CapacitorHttp",{web:()=>new $7});var bm;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(bm||(bm={}));var Sw;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(Sw||(Sw={}));const Cw=Uy("StatusBar");/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U7={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ye=(e,t)=>{const r=_.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,...h},m)=>_.createElement("svg",{ref:m,...U7,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${V7(e)}`,d].join(" "),...h},[...t.map(([g,p])=>_.createElement(g,p)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ye("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=ye("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=ye("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=ye("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=ye("Beer",[["path",{d:"M17 11h1a3 3 0 0 1 0 6h-1",key:"1yp76v"}],["path",{d:"M9 12v6",key:"1u1cab"}],["path",{d:"M13 12v6",key:"1sugkk"}],["path",{d:"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z",key:"1510fo"}],["path",{d:"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"19jb7n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=ye("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=ye("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=ye("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=ye("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tS=ye("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ye("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=ye("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ye("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=ye("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=ye("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=ye("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ye("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=ye("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=ye("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ye("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=ye("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=ye("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=ye("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=ye("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ye("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=ye("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=ye("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=ye("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=ye("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ye("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=ye("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=ye("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=ye("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=ye("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=ye("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=ye("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=ye("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=ye("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=ye("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=ye("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=ye("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=ye("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=ye("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=ye("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=ye("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=ye("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=ye("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=ye("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ye("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=ye("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=ye("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ye("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=ye("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=ye("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oA=ye("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hd=ye("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=ye("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ye("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ye("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=ye("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=ye("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=ye("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=ye("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ye("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=ye("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rg=ye("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var nS={exports:{}},hA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mA=hA,gA=mA;function iS(){}function oS(){}oS.resetWarningCache=iS;var fA=function(){function e(a,n,i,o,d,c){if(c!==gA){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:oS,resetWarningCache:iS};return r.PropTypes=r,r};nS.exports=fA();var Jy=nS.exports;const xe=bx(Jy),pA=()=>{const[e,t]=_.useState(0),[r,a]=_.useState(!1),{user:n}=Se(o=>o.auth),i=_.useCallback(async()=>{if(!(!n||n.role!=="ADMIN"))try{a(!0);const o=await ce.get("/chat/unread-count");t(o.data.unreadCount||0)}catch(o){console.error("Error fetching unread count:",o),t(0)}finally{a(!1)}},[n]);return _.useEffect(()=>{i();const o=setInterval(i,3e4);return()=>clearInterval(o)},[n,i]),{unreadCount:e,isLoading:r,refetch:i}},Xy=({isMobile:e=!1,onCollapseChange:t})=>{const{t:r}=je(),{setSidebarOpen:a}=_y(),[n,i]=_.useState(()=>{const y=localStorage.getItem("adminSidebarCollapsed");return y?JSON.parse(y):!1}),[o,d]=_.useState(()=>{const y=localStorage.getItem("adminSettingsExpanded");return y?JSON.parse(y):!1}),c=Ur(),h=ut(),{unreadCount:m}=pA();_.useEffect(()=>{t&&t(n)},[n,t]);const g=()=>{i(y=>{const b=!y;return localStorage.setItem("adminSidebarCollapsed",JSON.stringify(b)),t&&t(b),b})},p=()=>{d(y=>{const b=!y;return localStorage.setItem("adminSettingsExpanded",JSON.stringify(b)),b})},k=[{title:r("adminSidebar.overview"),items:[{name:r("adminNavigation.dashboard"),href:"/admin",icon:J7}]},{title:r("adminSidebar.sales"),items:[{name:r("adminNavigation.orders"),href:"/admin/orders",icon:Mr},{name:r("adminNavigation.pos"),href:"/admin/pos",icon:Q_},{name:r("adminNavigation.delivery"),href:"/delivery",icon:yr}]},{title:r("adminSidebar.catalog"),items:[{name:r("adminNavigation.products"),href:"/admin/products",icon:Ye},{name:r("adminNavigation.discounts"),href:"/admin/discounts",icon:hd},{name:r("adminNavigation.categories"),href:"/admin/categories",icon:Pc}]},{title:r("adminSidebar.content"),items:[{name:r("adminNavigation.media"),href:"/admin/media",icon:Wy},{name:r("adminNavigation.banners"),href:"/admin/banners",icon:xr}]},{title:r("adminSidebar.customersAndCommunication"),items:[{name:r("adminNavigation.customers"),href:"/admin/customers",icon:_a},{name:r("adminNavigation.chat"),href:"/admin/chat",icon:Hn,unreadCount:m},{name:r("adminNavigation.notifications"),href:"/admin/notifications",icon:wi}]},{title:r("adminSidebar.analytics"),items:[{name:r("adminNavigation.analytics"),href:"/admin/analytics",icon:Hi},{name:r("adminNavigation.reports"),href:"/admin/reports",icon:rx}]},{title:r("adminSidebar.settings"),items:[{name:r("adminSettings.general"),href:"/admin/settings/general",icon:us},{name:r("adminSettings.shipping"),href:"/admin/settings/shipping",icon:yr},{name:r("adminSettings.paymentGateways"),href:"/admin/settings/payment-gateways",icon:Ea},{name:r("adminSettings.receipts"),href:"/admin/settings/receipts",icon:Gy},{name:r("adminSettings.staffManagement"),href:"/admin/settings/staff",icon:cA}]},{title:r("adminSidebar.system"),items:[{name:r("adminNavigation.translations"),href:"/admin/translations",icon:qy},{name:r("adminNavigation.demoData"),href:"/admin/demo-data",icon:cc}]}],x=()=>{h($y())},j=y=>y==="/admin"?c.pathname===y||c.pathname==="/admin/":c.pathname===y||c.pathname.startsWith(y+"/");return s.jsxs("div",{className:`bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${e?"w-full h-full":"rounded-r-lg shadow-sm border border-gray-200 dark:border-gray-700"} transition-all duration-300 ease-in-out ${e?"w-full h-full":n?"w-16":"w-56"} h-full flex flex-col overflow-hidden`,children:[!e&&s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 p-3",children:s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:g,className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 hover:scale-110 active:scale-95",children:s.jsx("div",{className:"transition-transform duration-300 ease-in-out",children:n?s.jsx(Hy,{className:"h-4 w-4"}):s.jsx(Vy,{className:"h-4 w-4"})})})})}),s.jsx("nav",{className:"flex-1 px-2 py-2 space-y-2",children:k.map((y,b)=>{const w=y.title===r("adminSidebar.settings");return s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:`px-2 py-1 transition-all duration-300 ease-in-out ${n&&!e?"opacity-0 h-0 py-0 overflow-hidden":"opacity-100 h-auto"}`,children:s.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider transition-colors duration-200",children:y.title})}),s.jsxs("div",{className:"space-y-0",children:[w?s.jsxs("button",{onClick:p,className:"relative flex items-center w-full px-2 py-1.5 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white transition-all duration-300 ease-in-out group",title:n&&!e?r("adminSidebar.settings"):void 0,children:[s.jsx(us,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${n&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),s.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${n&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[s.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:r("adminSidebar.settings")}),!n&&s.jsx(eS,{className:`h-4 w-4 transition-transform duration-300 ${o?"rotate-180":""}`})]})]}):null,w&&o?s.jsx("div",{className:"pl-2 space-y-0.5 border-l-2 border-gray-200 dark:border-gray-700 ml-2",children:y.items.map(N=>{const P=N.icon,C=j(N.href);return s.jsxs(Le,{to:N.href,onClick:()=>{e&&a(!1)},className:`relative flex items-center px-2 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out group ${C?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:n?N.name:void 0,children:[s.jsx(P,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${n&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),s.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${n&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[s.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:N.name}),N.unreadCount>0&&s.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full transition-all duration-200 ${C?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:N.unreadCount})]}),n&&!e&&N.unreadCount>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center transition-all duration-200 animate-pulse",children:N.unreadCount})]},N.name)})}):w?null:y.items.map(N=>{const P=N.icon,C=j(N.href);return s.jsxs(Le,{to:N.href,onClick:()=>{e&&a(!1)},className:`relative flex items-center px-2 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out group ${C?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:n?N.name:void 0,children:[s.jsx(P,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${n&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),s.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${n&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[s.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:N.name}),N.unreadCount>0&&s.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full transition-all duration-200 ${C?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:N.unreadCount})]}),n&&!e&&N.unreadCount>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center transition-all duration-200 animate-pulse",children:N.unreadCount})]},N.name)})]}),b<k.length-1&&s.jsx("div",{className:"px-2",children:s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"})})]},y.title)})}),s.jsxs("div",{className:`border-b border-gray-200 dark:border-gray-700 flex-shrink-0 space-y-1.5 transition-all duration-300 ease-in-out ${e?"p-3":"px-3 pt-3 pb-3"}`,children:[s.jsxs("div",{className:"flex items-center p-1.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 transition-all duration-300 ease-in-out",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 transition-transform duration-200 hover:scale-105",children:s.jsx("span",{className:"text-white text-sm font-medium transition-colors duration-200",children:"A"})}),s.jsxs("div",{className:`min-w-0 flex-1 transition-all duration-300 ease-in-out ${n&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate transition-colors duration-200",children:r("adminNavigation.adminUser")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate transition-colors duration-200",children:r("adminSidebar.adminEmail")})]})]}),s.jsxs("button",{onClick:x,className:`flex items-center w-full px-3 py-1.5 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-all duration-300 ease-in-out hover:scale-[1.02] active:scale-[0.98] ${n&&!e?"justify-center px-2":""}`,title:n&&!e?r("adminNavigation.logout"):void 0,children:[s.jsx(X7,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-200 group-hover:scale-110"}),s.jsx("span",{className:`transition-all duration-300 ease-in-out ${n&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:r("adminNavigation.logout")})]})]})]})};Xy.propTypes={isMobile:xe.bool,onCollapseChange:xe.func};const xA=()=>{const{sidebarOpen:e,setSidebarOpen:t}=_y(),{user:r}=Se(n=>n.auth),{t:a}=je();return!r||r.role!=="ADMIN"?null:s.jsxs(s.Fragment,{children:[e&&s.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",onClick:()=>t(!1),children:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),s.jsx("div",{className:`fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-gray-800 shadow-2xl transform transition-transform duration-300 ease-in-out z-50 lg:hidden ${e?"translate-x-0":"translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a("navigation.menu")}),s.jsx("button",{onClick:()=>t(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors","aria-label":"Close sidebar",children:s.jsx(rS,{className:"w-6 h-6 rotate-45"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:s.jsx(Xy,{isMobile:!0})})]})})]})},$o=Ne("receiptSettings/fetchReceiptSettings",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/receipt-settings")).data.settings}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch receipt settings")}}),mh=Ne("receiptSettings/updateReceiptSettings",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.put("/receipt-settings",e)).data.settings}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update receipt settings")}}),gh=Ne("receiptSettings/uploadReceiptLogo",async(e,{rejectWithValue:t})=>{var r,a;try{const n=new FormData;return n.append("logo",e),(await ce.post("/receipt-settings/logo",n,{headers:{"Content-Type":void 0}})).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to upload logo")}}),fh=Ne("receiptSettings/deleteReceiptLogo",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.delete("/receipt-settings/logo")).data.settings}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete logo")}}),yA={settings:{logoInversion:"none"},isLoading:!1,error:null,uploadProgress:0},lS=Vr({name:"receiptSettings",initialState:yA,reducers:{clearError:e=>{e.error=null},setUploadProgress:(e,t)=>{e.uploadProgress=t.payload},updateSettingsField:(e,t)=>{const{field:r,value:a}=t.payload;e.settings&&(e.settings[r]=a)}},extraReducers:e=>{e.addCase($o.pending,t=>{t.isLoading=!0,t.error=null}).addCase($o.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase($o.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(mh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(mh.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(mh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(gh.pending,t=>{t.uploadProgress=0,t.error=null}).addCase(gh.fulfilled,(t,r)=>{t.uploadProgress=100,t.settings=r.payload.settings,t.error=null}).addCase(gh.rejected,(t,r)=>{t.uploadProgress=0,t.error=r.payload}).addCase(fh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(fh.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(fh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{updateSettingsField:bA}=lS.actions,vA=lS.reducer,kA=()=>{const e=ut(),{settings:t}=Se(r=>r.receiptSettings);return _.useEffect(()=>{t||e($o())},[e,t]),_.useEffect(()=>{if(t&&t.customCss){let r=document.getElementById("receipt-settings-css");r||(r=document.createElement("style"),r.id="receipt-settings-css",document.head.appendChild(r)),r.textContent=t.customCss}},[t]),{settings:t}},Sa=Ne("products/fetchProducts",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.category&&e.category.trim()!==""&&n.append("category",e.category),e.subcategory&&e.subcategory.trim()!==""&&n.append("subcategory",e.subcategory),e.search&&n.append("search",e.search),e.minPrice&&n.append("minPrice",e.minPrice),e.maxPrice&&n.append("maxPrice",e.maxPrice),e.minAlcoholVolume&&n.append("minAlcoholVolume",e.minAlcoholVolume),e.maxAlcoholVolume&&n.append("maxAlcoholVolume",e.maxAlcoholVolume),e.sortBy&&n.append("sortBy",e.sortBy),e.sortOrder&&n.append("sortOrder",e.sortOrder),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await ce.get(`/products?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch products")}}),ph=Ne("products/fetchProduct",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get(`/products/${e}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch product")}}),md=Ne("products/fetchCategories",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/categories")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch categories")}}),of=Ne("products/fetchSubcategories",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get(`/products/subcategories?categoryId=${e}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch subcategories")}}),lf=Ne("products/fetchDiscountedProducts",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.limit&&n.append("limit",e.limit),(await ce.get(`/products/discounted?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch discounted products")}}),gd=Ne("products/createProduct",async(e,{rejectWithValue:t})=>{var r,a;try{const n=new FormData;return Object.keys(e).forEach(o=>{e[o]!==null&&e[o]!==void 0&&n.append(o,e[o])}),(await ce.post("/products",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create product")}}),fd=Ne("products/updateProduct",async({id:e,productData:t},{rejectWithValue:r})=>{var a,n;try{const i=new FormData;return Object.keys(t).forEach(d=>{t[d]!==null&&t[d]!==void 0&&i.append(d,t[d])}),(await ce.put(`/products/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update product")}}),xh=Ne("products/deleteProduct",async(e,{rejectWithValue:t})=>{var r,a;try{return await ce.delete(`/products/${e}`),e}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete product")}}),wA={products:[],discountedProducts:[],currentProduct:null,categories:[],subcategories:[],pagination:{page:1,limit:20,total:0,pages:0},filters:{category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"},isLoading:!1,error:null},dS=Vr({name:"products",initialState:wA,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"}},clearCurrentProduct:e=>{e.currentProduct=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Sa.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Sa.fulfilled,(t,r)=>{var a,n;t.isLoading=!1,t.products=r.payload.products||((a=r.payload.data)==null?void 0:a.products)||[],t.pagination=r.payload.pagination||((n=r.payload.data)==null?void 0:n.pagination)||{},t.error=null}).addCase(Sa.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ph.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ph.fulfilled,(t,r)=>{t.isLoading=!1,t.currentProduct=r.payload,t.error=null}).addCase(ph.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(md.pending,t=>{t.isLoading=!0}).addCase(md.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload}).addCase(md.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(of.pending,t=>{t.isLoading=!0}).addCase(of.fulfilled,(t,r)=>{t.isLoading=!1,t.subcategories=r.payload}).addCase(of.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(lf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(lf.fulfilled,(t,r)=>{t.isLoading=!1,t.discountedProducts=r.payload,t.error=null}).addCase(lf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(gd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(gd.fulfilled,(t,r)=>{t.isLoading=!1,t.products.unshift(r.payload),t.error=null}).addCase(gd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(fd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(fd.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.products.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.products[a]=r.payload),t.currentProduct&&t.currentProduct.id===r.payload.id&&(t.currentProduct=r.payload),t.error=null}).addCase(fd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(xh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(xh.fulfilled,(t,r)=>{t.isLoading=!1,t.products=t.products.filter(a=>a.id!==r.payload),t.currentProduct&&t.currentProduct.id===r.payload&&(t.currentProduct=null),t.error=null}).addCase(xh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:Ns,clearCurrentProduct:jA}=dS.actions,NA=dS.reducer,yh=Ne("cart/fetchCart",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/cart")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch cart")}}),Mi=Ne("cart/addToCart",async({productId:e,quantity:t=1},{rejectWithValue:r})=>{var a,n,i,o;try{const d=await ce.post("/cart/items",{productId:e,quantity:t});return q.success("Vru btt  krfu"),d.data}catch(d){return q.error(((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||"Mistkst a bta vru  krfu"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to add to cart")}}),bh=Ne("cart/updateCartItem",async({itemId:e,quantity:t},{rejectWithValue:r})=>{var a,n,i,o;try{return(await ce.put(`/cart/items/${e}`,{quantity:t})).data}catch(d){return q.error(((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||"Mistkst a uppfra krfu"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update cart item")}}),pd=Ne("cart/removeFromCart",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{return await ce.delete(`/cart/items/${e}`),q.success("Vru fjarlg r krfu"),e}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a fjarlgja vru r krfu"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to remove from cart")}}),vh=Ne("cart/clearCart",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{return await ce.delete("/cart"),q.success("Krfa tmd"),!0}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a tma krfu"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to clear cart")}}),_A={cart:null,isLoading:!1,error:null},SA=Vr({name:"cart",initialState:_A,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(yh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(yh.fulfilled,(t,r)=>{t.isLoading=!1,t.cart=r.payload,t.error=null}).addCase(yh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Mi.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Mi.fulfilled,(t,r)=>{t.isLoading=!1,r.payload&&r.payload.items&&(t.cart=r.payload),t.error=null}).addCase(Mi.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(bh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(bh.fulfilled,(t,r)=>{if(t.isLoading=!1,t.cart&&t.cart.items){const a=t.cart.items.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.cart.items[a]=r.payload)}t.error=null}).addCase(bh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(pd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(pd.fulfilled,(t,r)=>{t.isLoading=!1,t.cart&&t.cart.items&&(t.cart.items=t.cart.items.filter(a=>a.id!==r.payload)),t.error=null}).addCase(pd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(vh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(vh.fulfilled,t=>{t.isLoading=!1,t.cart&&(t.cart.items=[]),t.error=null}).addCase(vh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),CA=SA.reducer,PA=()=>{const[e,t]=_.useState(!1);_.useEffect(()=>{const a=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;(a==="dark"||!a&&n)&&(t(!0),document.documentElement.classList.add("dark"))},[]);const r=()=>{const a=!e;t(a),console.log("Toggling dark mode:",a),a?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),console.log("Added dark class to document")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),console.log("Removed dark class from document"))};return s.jsx("button",{onClick:r,className:"p-2 text-gray-700 hover:text-primary-600 transition-colors dark:text-gray-300 dark:hover:text-primary-400","aria-label":`Switch to ${e?"light":"dark"} mode`,children:e?s.jsx(lA,{className:"w-5 h-5","aria-hidden":"true"}):s.jsx(tA,{className:"w-5 h-5","aria-hidden":"true"})})},Qy={monday:{open:"10:00",close:"22:00"},tuesday:{open:"10:00",close:"22:00"},wednesday:{open:"10:00",close:"22:00"},thursday:{open:"10:00",close:"22:00"},friday:{open:"10:00",close:"22:00"},saturday:{open:"10:00",close:"22:00"},sunday:{open:"10:00",close:"22:00"}},EA=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],IA=e=>Qy[e.toLowerCase()],Yl=()=>{const e=new Date().getDay(),t=EA[e];return IA(t)},TA=()=>{const e=new Date,t=Yl();if(!t)return!1;const r=`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`;return r>=t.open&&r<t.close},df=(e="is")=>{const t={is:{monday:"Mnudagur",tuesday:"rijudagur",wednesday:"Mivikudagur",thursday:"Fimmtudagur",friday:"Fstudagur",saturday:"Laugardagur",sunday:"Sunnudagur"},en:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},r=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],a=[];let n=null;return r.forEach((i,o)=>{const d=Qy[i],c=`${d.open} - ${d.close}`;n?n.hours===c?n.days.push(i):(a.push(n),n={days:[i],hours:c}):n={days:[i],hours:c},o===r.length-1&&a.push(n)}),a.map(i=>{const o=t[e]||t.is;let d;if(i.days.length===1)d=o[i.days[0]];else if(i.days.length===7)d=e==="is"?"Alla daga":"Every day";else{const c=o[i.days[0]],h=o[i.days[i.days.length-1]];d=`${c} - ${h}`}return{days:d,hours:i.hours}})},LA=()=>{var ve,be;const{t:e,currentLanguage:t,setCurrentLanguage:r}=je(),a=Ur(),{setSidebarOpen:n}=_y(),i=xs(),o=ut(),{isAuthenticated:d,user:c}=Se(J=>J.auth),{cart:h}=Se(J=>J.cart),{categories:m}=Se(J=>J.products);a.pathname.startsWith("/admin");const[g,p]=_.useState(!1),[k,x]=_.useState(!1),[j,y]=_.useState(!1),[b,w]=_.useState(!1),[N,P]=_.useState(!1),[C,A]=_.useState(null),[E,F]=_.useState(""),[I,D]=_.useState([]),[Y,R]=_.useState(!1),[Z,T]=_.useState(!1),[B,W]=_.useState(-1),[Q,$]=_.useState(window.innerWidth<768),[O,K]=_.useState(0),V=_.useRef(null),X=_.useRef(null),le=_.useRef(null),ge=_.useRef(null),ne=_.useRef(null),pe=_.useRef(null),Oe=_.useRef(null),ue=((ve=h==null?void 0:h.items)==null?void 0:ve.reduce((J,he)=>J+he.quantity,0))||0;_.useEffect(()=>{o(md()),Me()},[o]),_.useEffect(()=>{if(d&&(c==null?void 0:c.role)==="ADMIN"){et();const J=setInterval(et,3e4);return()=>clearInterval(J)}},[d,c==null?void 0:c.role]),_.useEffect(()=>{const J=()=>{$(window.innerWidth<768)};return window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]);const Me=async()=>{var J;try{const he=await fetch("/api/settings/opening-hours",{});if(he.ok){const Ee=await he.json();(J=Ee.data)!=null&&J.openingHours?A(Ee.data.openingHours):A(Yl())}}catch(he){console.error("Error fetching opening hours:",he),A(Yl())}},et=async()=>{try{const J=await ce.get("/notifications?limit=1&offset=0");let he=[];Array.isArray(J)?he=J:Array.isArray(J.data)?he=J.data:J.data&&Array.isArray(J.data.notifications)&&(he=J.data.notifications);const Ee=he.filter(re=>!re.isRead&&!re.isArchived).length;K(Ee)}catch(J){console.error("Error fetching unread notifications count:",J)}},Ze=()=>{if(!C)return Yl();const J=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],he=new Date().getDay(),Ee=J[he];return C[Ee]||Yl()},z=()=>{if(!C)return TA();const J=Ze();if(J.closed)return!1;const he=new Date,Ee=`${he.getHours().toString().padStart(2,"0")}:${he.getMinutes().toString().padStart(2,"0")}`;return Ee>=J.open&&Ee<J.close};_.useEffect(()=>{const J=he=>{ne.current&&!ne.current.contains(he.target)&&x(!1)};return k&&document.addEventListener("mousedown",J),()=>{document.removeEventListener("mousedown",J)}},[k]),_.useEffect(()=>{const J=he=>{pe.current&&!pe.current.contains(he.target)&&w(!1)};return b&&document.addEventListener("mousedown",J),()=>{document.removeEventListener("mousedown",J)}},[b]);const we=()=>{o($y()),i("/"),x(!1),p(!1)},Ie=(c==null?void 0:c.role)==="ADMIN",Fe=(c==null?void 0:c.role)==="DELIVERY",se=_.useCallback(async J=>{var he;if(!J.trim()){D([]),R(!1);return}T(!0);try{const Ee=await ce.get(`/products?search=${encodeURIComponent(J)}&limit=5`);D(((he=Ee.data)==null?void 0:he.products)||[]),R(!0)}catch(Ee){console.error("Search error:",Ee),D([])}finally{T(!1)}},[]),Pe=_.useCallback(J=>{le.current&&clearTimeout(le.current),le.current=setTimeout(()=>{se(J)},300)},[se]),de=J=>{const he=J.target.value;F(he),W(-1),he.trim()?Pe(he):(D([]),R(!1))},_e=()=>{E.trim()&&(i(`/products?search=${encodeURIComponent(E)}`),R(!1),F(""),D([]))},H=J=>{i(`/products/${J.id}`),R(!1),F(""),D([])},ee=async(J,he)=>{J.stopPropagation();try{await o(Mi({productId:he.id,quantity:1})).unwrap(),q.success(e("cart.itemAdded"))}catch(Ee){console.error("Add to cart error:",Ee),q.error(Ee.message||e("cart.addError"))}},ae=J=>{var he;if(!Y||I.length===0){J.key==="Enter"&&_e();return}switch(J.key){case"ArrowDown":J.preventDefault(),W(Ee=>Ee<I.length-1?Ee+1:Ee);break;case"ArrowUp":J.preventDefault(),W(Ee=>Ee>0?Ee-1:-1);break;case"Enter":J.preventDefault(),B>=0&&B<I.length?H(I[B]):_e();break;case"Escape":R(!1),W(-1),(he=V.current)==null||he.blur();break}};return _.useEffect(()=>{const J=he=>{X.current&&!X.current.contains(he.target)&&V.current&&!V.current.contains(he.target)&&(R(!1),W(-1))};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[]),_.useEffect(()=>{const J=he=>{ge.current&&!ge.current.contains(he.target)&&!he.target.closest("[data-shop-menu-trigger]")&&y(!1)};return j&&document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[j]),_.useEffect(()=>{const J=he=>{Oe.current&&!Oe.current.contains(he.target)&&!he.target.closest("[data-admin-menu-trigger]")&&P(!1)};return N&&document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[N]),_.useEffect(()=>()=>{le.current&&clearTimeout(le.current)},[]),s.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700 fixed top-0 left-0 right-0 z-50 pt-safe",role:"navigation","aria-label":e("aria.mainNavigation"),children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Le,{to:"/",className:"flex items-center","aria-label":e("aria.homepage"),children:s.jsx("img",{src:"/logo_black-web.webp",alt:e("aria.logo"),className:"h-10 sm:h-12 w-auto dark:invert"})}),s.jsxs("div",{className:"hidden lg:flex items-center gap-2 text-sm",children:[s.jsx(nr,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),s.jsx("div",{className:"flex items-center gap-2",children:Ze().closed?s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t==="is"?" dag":"Today",":"]}),s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:t==="is"?"Loka":"Closed"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[t==="is"?" dag":"Today",": ",Ze().open," - ",Ze().close]}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${z()?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:z()?t==="is"?"Opi":"Open":t==="is"?"Loka":"Closed"})]})})]})]}),s.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[s.jsxs("div",{className:"relative",ref:X,children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:V,type:"text",value:E,onChange:de,onKeyDown:ae,placeholder:e("search.placeholder"),className:"w-64 pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-all duration-200",autoComplete:"off"}),s.jsx("button",{onClick:_e,className:"absolute right-2 top-2 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-colors","aria-label":"Search",children:s.jsx(Qt,{className:"w-4 h-4"})})]}),Y&&s.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 w-[512px] bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-[70]",children:Z?s.jsx("div",{className:"px-4 py-3 text-center text-gray-500 dark:text-gray-400",children:s.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),s.jsx("span",{children:e("search.searching")})]})}):I.length>0?s.jsxs("div",{children:[I.map((J,he)=>{var Ee;return s.jsx("div",{className:`w-full px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${he===B?"bg-primary-50 dark:bg-primary-900/20":""}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("button",{onClick:()=>H(J),className:"flex-shrink-0 w-16 h-16 bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600 hover:border-primary-400 dark:hover:border-primary-600 transition-colors",children:J.imageUrl?s.jsx("img",{src:J.imageUrl,alt:J.name,className:"w-full h-full object-contain p-1"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(Ye,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})})}),s.jsxs("button",{onClick:()=>H(J),className:"flex-1 min-w-0 text-left",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white line-clamp-1",children:J.nameIs||J.name}),s.jsxs("span",{className:"text-sm font-semibold text-primary-600 dark:text-primary-400 flex-shrink-0",children:[J.price.toLocaleString()," ",e("common.currency")]})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:J.descriptionIs||J.description}),s.jsxs("div",{className:"flex items-center mt-1.5 space-x-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",children:((Ee=J.category)==null?void 0:Ee.nameIs)||"Flokkur"}),J.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[J.alcoholContent,"% ",e("product.abv")]})]})]}),d&&s.jsx("button",{onClick:re=>ee(re,J),className:"flex-shrink-0 w-8 h-8 flex items-center justify-center bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors shadow-sm hover:shadow-md",title:e("cart.addToCart"),children:s.jsx(Wt,{className:"w-4 h-4"})})]})},J.id)}),s.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700",children:s.jsxs("button",{onClick:_e,className:"w-full px-4 py-3 text-center text-primary-600 dark:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:[e("search.viewAllResults"),' "',E,'"']})})]}):E.trim()&&!Z?s.jsxs("div",{className:"px-4 py-6 text-center",children:[s.jsx(Ye,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("search.noResults"),' "',E,'"']})]}):null})]}),s.jsx(Le,{to:"/products",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("productsPage.all")}),s.jsxs("div",{className:"relative",ref:ge,children:[s.jsxs("button",{"data-shop-menu-trigger":!0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center",children:[e("navigation.shop"),s.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s.jsxs("div",{onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),className:`fixed top-[4rem] left-1/2 transform -translate-x-1/2 mt-2 w-[1100px] max-w-[90vw] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[999] transition-all duration-300 overflow-hidden ${j?"opacity-100 visible scale-100":"opacity-0 invisible scale-95"}`,children:[s.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("navigation.shop")}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:e("navigation.discoverCategories")})]}),s.jsx(Le,{to:"/products",onClick:()=>y(!1),className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors font-semibold text-base",children:e("navigation.viewAllProducts")})]})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.filter(J=>J.isActive).map(J=>{var he;return s.jsxs(Le,{to:`/products?category=${J.name}`,onClick:()=>y(!1),className:"group block p-4 bg-white dark:bg-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 hover:shadow-md transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-primary-300 dark:hover:border-primary-600",children:[J.imageUrl&&s.jsx("div",{className:"mb-3 flex items-center justify-center w-full h-32 bg-white dark:bg-white rounded-lg overflow-hidden border border-gray-200 dark:border-gray-200",children:s.jsx("img",{src:J.imageUrl.startsWith("http")?J.imageUrl:`https://olfong.olibuijr.com${J.imageUrl}`,alt:J.name,className:"w-full h-full object-contain p-2 group-hover:scale-105 transition-transform duration-200"})}),s.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[!J.imageUrl&&s.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-gradient-to-br from-primary-50 to-primary-100 dark:from-primary-900/30 dark:to-primary-800/30 rounded-lg flex-shrink-0",children:s.jsxs("span",{className:"text-xl",children:[J.name==="WINE"&&"",J.name==="BEER"&&"",J.name==="SPIRITS"&&"",J.name==="VAPE"&&"",J.name==="NICOTINEPADS"&&"",!["WINE","BEER","SPIRITS","VAPE","NICOTINEPADS"].includes(J.name)&&""]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors text-base truncate",children:J.nameIs}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{children:[((he=J._count)==null?void 0:he.products)||0," ",e("common.itemsLabel")]}),J.subcategories&&J.subcategories.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsxs("span",{children:[J.subcategories.length," ",e("adminCategories.subcategories").toLowerCase()]})]})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3 leading-relaxed",children:J.descriptionIs||J.description||e("category.fallbackDescription")}),J.subcategories&&J.subcategories.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[J.subcategories.slice(0,4).map(Ee=>s.jsx("span",{className:"inline-block px-3 py-1.5 text-sm bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-md font-medium",children:Ee.nameIs||Ee.name},Ee.id)),J.subcategories.length>4&&s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 px-3 py-1.5 font-medium",children:["+",J.subcategories.length-4]})]})]},J.id)})})}),s.jsx("div",{className:"px-8 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e("navigation.needHelp")," ",s.jsx("a",{href:"/contact",className:"text-primary-600 dark:text-primary-400 hover:underline font-semibold",children:e("navigation.contactUs")})]})})})]})]}),d&&s.jsx(s.Fragment,{children:Fe&&s.jsx(Le,{to:"/delivery",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.delivery")})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(PA,{}),!d&&s.jsxs("div",{className:"relative",ref:pe,children:[s.jsx("button",{onClick:()=>w(!b),className:"p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Change language","aria-expanded":b,children:s.jsx(zo,{className:"w-5 h-5","aria-hidden":"true"})}),b&&s.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-[70] border border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>{r("is"),w(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="is"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"slenska",t==="is"&&s.jsx("span",{className:"ml-auto",children:""})]})}),s.jsx("button",{onClick:()=>{r("en"),w(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="en"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"English",t==="en"&&s.jsx("span",{className:"ml-auto",children:""})]})})]})]}),d&&Ie&&s.jsxs("div",{className:"relative",ref:Oe,children:[s.jsx("button",{"data-admin-menu-trigger":!0,onClick:()=>P(!N),onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),className:"hidden md:flex p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("navigation.admin"),children:s.jsx(us,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>n(!0),className:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("navigation.admin"),children:s.jsx(us,{className:"w-5 h-5"})}),s.jsxs("div",{onMouseEnter:()=>P(!0),onMouseLeave:()=>P(!1),className:`hidden md:block fixed top-[4rem] left-1/2 transform -translate-x-1/2 mt-2 w-[1100px] max-w-[90vw] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[999] transition-all duration-300 overflow-hidden ${N?"opacity-100 visible scale-100":"opacity-0 invisible scale-95"}`,children:[s.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("navigation.admin")}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:e("adminMenu.manageBusinessSettings")})]}),s.jsx(Le,{to:"/admin",onClick:()=>P(!1),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-semibold text-base",children:e("adminMenu.dashboard")})]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Mr,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.sales")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Le,{to:"/admin/orders",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.orders")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/pos",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.pointOfSale")})}),s.jsx("li",{children:s.jsx(Le,{to:"/delivery",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.deliveries")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Ye,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.catalog")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Le,{to:"/admin/products",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.products")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/categories",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.categories")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/media",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.media")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Hi,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.analytics")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Le,{to:"/admin/customers",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.customers")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/analytics",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.analyticsLink")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/reports",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.reports")})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(Wy,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.content")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Le,{to:"/admin/banners",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.banners")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/chat",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.messages")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/notifications",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.notifications")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(us,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.settingsSection")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Le,{to:"/admin/settings/general",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.general")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/settings/payment-gateways",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.payment")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/settings/receipts",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.receipts")})})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(qy,{className:"w-4 h-4 text-blue-600"}),e("adminMenu.system")]}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Le,{to:"/admin/translations",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.translations")})}),s.jsx("li",{children:s.jsx(Le,{to:"/admin/demo-data",onClick:()=>P(!1),className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors text-sm",children:e("adminMenu.demoData")})})]})]})]})]}),s.jsx("div",{className:"px-8 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e("adminMenu.helpText")," ",s.jsx("a",{href:"/contact",className:"text-primary-600 dark:text-primary-400 hover:underline font-semibold",children:e("adminMenu.supportCenter")})]})})]})]}),d&&(c==null?void 0:c.role)==="ADMIN"&&s.jsxs(Le,{to:"/admin/notifications",className:"relative p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":`Notifications with ${O} unread`,children:[s.jsx(wi,{className:"w-5 h-5","aria-hidden":"true"}),O>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-label":`${O} unread notifications`,children:O})]}),d&&s.jsxs(Le,{to:"/cart",className:"relative p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":`Shopping cart with ${ue} items`,children:[s.jsx(Mr,{className:"w-5 h-5","aria-hidden":"true"}),ue>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-label":`${ue} items in cart`,children:ue})]}),d?s.jsxs("div",{className:"relative",ref:ne,children:[s.jsxs("button",{onClick:()=>x(!k),className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.userMenu"),"aria-expanded":k,"aria-haspopup":"true",children:[s.jsx(ts,{className:"w-5 h-5","aria-hidden":"true"}),s.jsx("span",{className:"hidden sm:block text-gray-900 dark:text-white",children:((be=c==null?void 0:c.fullName)==null?void 0:be.split(" ")[0])||(c==null?void 0:c.username)})]}),k&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-[70] border border-gray-200 dark:border-gray-700",role:"menu","aria-label":e("aria.userMenu"),children:[s.jsx(Le,{to:"/profile",onClick:()=>x(!1),className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.profile")}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 py-1",children:[s.jsx("button",{onClick:()=>{r("is"),x(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="is"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,role:"menuitem",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"slenska",t==="is"&&s.jsx("span",{className:"ml-auto",children:""})]})}),s.jsx("button",{onClick:()=>{r("en"),x(!1)},className:`block w-full text-left px-4 py-2 text-sm ${t==="en"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400 font-semibold":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,role:"menuitem",children:s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:""}),"English",t==="en"&&s.jsx("span",{className:"ml-auto",children:""})]})})]}),s.jsx("button",{onClick:we,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.logout")})]})]}):s.jsxs(Le,{to:"/login",className:"btn btn-outline p-2 sm:px-4","aria-label":e("navigation.login"),children:[s.jsx(ts,{className:"w-5 h-5 sm:hidden","aria-hidden":"true"}),s.jsx("span",{className:"hidden sm:inline",children:e("navigation.login")})]}),s.jsx("button",{onClick:()=>p(!g),className:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.toggleMobileMenu"),"aria-expanded":g,children:g?s.jsx(at,{className:"w-5 h-5","aria-hidden":"true"}):s.jsx(rS,{className:"w-5 h-5","aria-hidden":"true"})})]})]}),g&&s.jsx("div",{className:"fixed inset-0 z-[60] md:hidden",onClick:()=>p(!1),children:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50"})}),s.jsx("div",{className:`fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-white dark:bg-gray-800 shadow-2xl transform transition-transform duration-300 ease-in-out z-[70] md:hidden ${g?"translate-x-0":"translate-x-full"}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("navigation.menu")}),s.jsx("button",{onClick:()=>p(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(at,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto py-4",children:[s.jsx("div",{className:"px-4 mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:E,onChange:de,onKeyDown:J=>{J.key==="Enter"&&(_e(),p(!1))},placeholder:e("search.placeholder"),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",autoComplete:"off"}),s.jsx("button",{onClick:()=>{_e(),p(!1)},className:"absolute right-3 top-3 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400",children:s.jsx(Qt,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"flex flex-col space-y-2 px-4",children:[s.jsx(Le,{to:"/products",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("productsPage.all")}),m.map(J=>s.jsx(Le,{to:`/products?category=${J.name}`,onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:J.nameIs},J.id)),d&&s.jsxs(s.Fragment,{children:[s.jsx(Le,{to:"/profile",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.profile")}),Ie&&s.jsx(Le,{to:"/admin",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.admin")}),Fe&&s.jsx(Le,{to:"/delivery",onClick:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.delivery")}),s.jsx("button",{onClick:we,className:"text-left text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 w-full",children:e("navigation.logout")})]})]})]})]})})]})})},AA=()=>{const{t:e,currentLanguage:t}=je(),[r,a]=_.useState(null);_.useEffect(()=>{n()},[]);const n=async()=>{var o;try{const d=await ce.get("/settings/opening-hours");(o=d.data)!=null&&o.openingHours?a(i(d.data.openingHours,t)):a(df(t))}catch(d){console.error("Error fetching opening hours:",d),a(df(t))}},i=(o,d)=>{const c={is:{monday:"Mnudagur",tuesday:"rijudagur",wednesday:"Mivikudagur",thursday:"Fimmtudagur",friday:"Fstudagur",saturday:"Laugardagur",sunday:"Sunnudagur"},en:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"}},h=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],m=[];let g=null;h.forEach((k,x)=>{const j=o[k],y=j.closed?"Closed":`${j.open} - ${j.close}`;g?g.hours===y?g.days.push(k):(m.push(g),g={days:[k],hours:y}):g={days:[k],hours:y},x===h.length-1&&m.push(g)});const p=c[d]||c.is;return m.map(k=>{let x;if(k.days.length===1)x=p[k.days[0]];else if(k.days.length===7)x=d==="is"?"Alla daga":"Every day";else{const j=p[k.days[0]],y=p[k.days[k.days.length-1]];x=`${j} - ${y}`}return{days:x,hours:k.hours}})};return s.jsx("footer",{className:"bg-white dark:bg-gray-800 shadow-lg border-t border-gray-200 dark:border-gray-700 pb-16-safe md:pb-0",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6 md:gap-8 md:grid-cols-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-12 md:h-16 w-auto dark:invert"})}),s.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300 mb-4 max-w-md",children:e("footer.aboutUs")}),s.jsxs("div",{className:"flex flex-col md:flex-row md:space-x-4 space-y-2 md:space-y-0",children:[s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:" +354 555 1234"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:" info@olfong.is"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4 text-gray-900 dark:text-white",children:e("footer.quickLinks")}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Le,{to:"/products",className:"text-sm md:text-base text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.products")})}),s.jsx("li",{children:s.jsx(Le,{to:"/products?category=WINE",className:"text-sm md:text-base text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.wine")})}),s.jsx("li",{children:s.jsx(Le,{to:"/products?category=BEER",className:"text-sm md:text-base text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.beer")})}),s.jsx("li",{children:s.jsx(Le,{to:"/products?category=SPIRITS",className:"text-sm md:text-base text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.spirits")})}),s.jsx("li",{children:s.jsx(Le,{to:"/products?category=NON_ALCOHOLIC",className:"text-sm md:text-base text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.nonAlcoholic")})})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-base md:text-lg font-semibold mb-3 md:mb-4 text-gray-900 dark:text-white flex items-center gap-2",children:[s.jsx(nr,{className:"w-4 h-4 md:w-5 md:h-5"}),t==="is"?"Opnunartmar":"Opening Hours"]}),s.jsx("ul",{className:"space-y-2",children:(r||df(t)).map((o,d)=>s.jsxs("li",{className:"flex justify-between text-xs md:text-sm gap-2",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:o.days}),s.jsx("span",{className:"text-gray-900 dark:text-white font-medium flex-shrink-0",children:o.hours})]},d))})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-8 pt-8 text-center",children:[s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[" 2025 lfng. ",e("footer.copyright")]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:e("footer.legal")})]})]})})},MA=()=>{var o;const{t:e}=je(),t=Ur(),{isAuthenticated:r}=Se(d=>d.auth),{cart:a}=Se(d=>d.cart),n=((o=a==null?void 0:a.items)==null?void 0:o.length)||0,i=[{to:"/",icon:Y7,label:e("navigation.home"),active:t.pathname==="/"},{to:"/products",icon:Ye,label:e("navigation.products"),active:t.pathname==="/products"||t.pathname.startsWith("/products/")},...r?[{to:"/cart",icon:Mr,label:e("navigation.cart"),active:t.pathname==="/cart",badge:n>0?n:null}]:[],...r?[{to:"/profile",icon:ts,label:e("navigation.profile"),active:t.pathname==="/profile"}]:[{to:"/login",icon:ts,label:e("navigation.login"),active:t.pathname==="/login"}]];return s.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 pb-safe",children:s.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(d=>{const c=d.icon;return s.jsxs(Le,{to:d.to,className:`flex flex-col items-center justify-center flex-1 py-2 px-1 text-xs transition-colors min-h-[44px] ${d.active?"text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx(c,{className:"w-5 h-5 mb-1"}),d.badge&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:d.badge})]}),s.jsx("span",{className:"text-center leading-tight",children:d.label})]},d.to)})})})},pt=({size:e="medium",className:t=""})=>{const r={small:"w-4 h-4",medium:"w-6 h-6",large:"w-8 h-8"};return s.jsx("div",{className:`flex items-center justify-center ${t}`,children:s.jsx(At,{className:`${r[e]} animate-spin text-primary-600`})})};pt.propTypes={size:xe.oneOf(["small","medium","large"]),className:xe.string};const cf=({children:e,requiredRole:t,requiredRoles:r})=>{const{isAuthenticated:a,user:n,isLoading:i}=Se(d=>d.auth),o=Ur();if(i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})});if(!a){const d=t==="ADMIN"||r!=null&&r.includes("ADMIN")?"/admin-login":"/login";return s.jsx(ac,{to:d,state:{from:o},replace:!0})}return(t||r)&&!(r||[t]).includes(n==null?void 0:n.role)?s.jsx(ac,{to:"/",replace:!0}):e||s.jsx(hE,{})},RA=()=>{const{t:e}=je(),t=Ur(),r=xs(),{user:a,isAuthenticated:n}=Se(V=>V.auth),[i,o]=_.useState(!1),[d,c]=_.useState(!1),[h,m]=_.useState(!1),[g,p]=_.useState([]),[k,x]=_.useState(null),[j,y]=_.useState(!1),[b]=_.useState(null),[w,N]=_.useState([]),[P,C]=_.useState(""),[A,E]=_.useState(0),[F,I]=_.useState(!1),D=_.useRef(null),Y=_.useRef(null),R=_.useRef(null),Z=async()=>{var V,X;if(n)try{I(!0);const le=await ce.get("/chat/conversations"),ge=Array.isArray(le.data)?le.data:((V=le.data)==null?void 0:V.conversations)||((X=le.data)==null?void 0:X.data)||[];p(ge),ge.length>0?(x(ge[0]),m(!1),await B(ge[0].id)):m(!0)}catch(le){console.error("Failed to initialize chat:",le),p([])}finally{I(!1)}},T=async V=>{x(V),m(!1),await B(V.id)},B=async V=>{var X,le;try{const ge=await ce.get(`/chat/conversations/${V}/messages`),ne=Array.isArray(ge.data)?ge.data:((X=ge.data)==null?void 0:X.messages)||((le=ge.data)==null?void 0:le.data)||[];N(ne),W()}catch(ge){console.error("Failed to load messages:",ge),N([])}},W=()=>{D.current&&D.current.scrollIntoView({behavior:"smooth"})},Q=async()=>{if(!P.trim()||!k)return;const V={content:P.trim(),messageType:"TEXT"};try{const X=await ce.post(`/chat/conversations/${k.id}/messages`,V);N(le=>[...le,X.data]),C(""),W()}catch(X){console.error("Failed to send message:",X),Ve.error("Failed to send message")}},$=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),Q())},O=()=>{Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{},1e3)};return _.useEffect(()=>{n&&i&&Z()},[n,i]),_.useEffect(()=>{W()},[w]),_.useEffect(()=>{k&&B(k.id)},[k]),_.useEffect(()=>{if(!n)return;const V=le=>{const ge=le.message||le;ge.conversationId===(k==null?void 0:k.id)&&N(ne=>[...ne,ge]),p(ne=>ne.map(pe=>pe.id===ge.conversationId?{...pe,lastMessageAt:ge.createdAt,messages:[ge]}:pe)),E(ne=>ne+1)},X=le=>{le.conversationId===(k==null?void 0:k.id)&&y(le.isTyping)};return yt.on("new-message",V),yt.on("user-typing",X),()=>{yt.off("new-message",V),yt.off("user-typing",X)}},[n,k]),t.pathname.startsWith("/admin")?null:n?s.jsx("div",{className:"fixed bottom-20 right-6 z-50 md:bottom-6 md:right-6",children:i?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-96 max-w-[calc(100vw-2rem)] h-[500px] flex flex-col border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-700 dark:to-primary-800 text-white p-4 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[k&&!h&&s.jsx("button",{onClick:()=>m(!0),className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors","aria-label":"Back to conversations",children:s.jsx(Bs,{size:18})}),s.jsx("div",{className:"p-1.5 bg-white/20 rounded-lg",children:s.jsx(Hn,{size:18})}),s.jsx("h3",{className:"font-semibold text-lg",children:h?e("chat.conversations")||"Conversations":(k==null?void 0:k.subject)||e("chat.title")})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>c(!d),className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors","aria-label":d?"Expand":"Minimize",children:d?s.jsx(Q7,{size:18}):s.jsx(eA,{size:18})}),s.jsx("button",{onClick:()=>o(!1),className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors","aria-label":"Close chat",children:s.jsx(at,{size:18})})]})]}),!d&&s.jsx(s.Fragment,{children:h?s.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-gray-900/50",children:F?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("common.loading")})]})}):g.length===0?s.jsx("div",{className:"flex items-center justify-center h-full p-4",children:s.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:"No conversations yet. Start chatting with support!"})}):s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:g.map(V=>{var X,le;return s.jsx("button",{onClick:()=>T(V),className:"w-full text-left p-4 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:V.subject||"No subject"}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:((le=(X=V.messages)==null?void 0:X[0])==null?void 0:le.content)||"No messages"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:V.lastMessageAt?new Date(V.lastMessageAt).toLocaleDateString([],{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No messages"})]}),V.unreadCount>0&&s.jsx("span",{className:"ml-2 inline-flex items-center justify-center h-5 w-5 rounded-full bg-red-500 text-white text-xs font-semibold flex-shrink-0",children:V.unreadCount})]})},V.id)})})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50 dark:bg-gray-900/50",children:[F?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("common.loading")})]})}):w.length===0?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:"No messages yet. Start a conversation!"})}):w.map(V=>s.jsx("div",{className:`flex ${V.senderId===(a==null?void 0:a.id)?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs px-4 py-2 rounded-xl text-sm transition-all duration-200 ${V.senderId===(a==null?void 0:a.id)?"bg-primary-600 dark:bg-primary-700 text-white rounded-br-none shadow-sm":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-none shadow-sm border border-gray-200 dark:border-gray-600"}`,children:[s.jsx("p",{className:"break-words",children:V.content}),s.jsx("p",{className:`text-xs mt-1 opacity-70 ${V.senderId===(a==null?void 0:a.id)?"text-white":"text-gray-600 dark:text-gray-400"}`,children:new Date(V.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},V.id)),j&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white p-3 rounded-xl rounded-bl-none shadow-sm border border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"flex space-x-1.5",children:[s.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-primary-600 dark:bg-primary-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:D})]}),s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 flex-shrink-0",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{ref:R,type:"text",value:P,onChange:V=>{C(V.target.value),O()},onKeyPress:$,placeholder:e("chat.typeMessage"),className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200"}),s.jsx("button",{onClick:Q,disabled:!P.trim(),className:"bg-primary-600 dark:bg-primary-700 hover:bg-primary-700 dark:hover:bg-primary-800 disabled:opacity-50 disabled:cursor-not-allowed text-white p-2.5 rounded-lg transition-all duration-200 active:scale-95","aria-label":"Send message",children:s.jsx(Zy,{size:18})})]})})]})})]}):s.jsxs("button",{onClick:()=>o(!0),className:"bg-primary-600 dark:bg-primary-500 text-white p-4 rounded-full shadow-lg hover:bg-primary-700 dark:hover:bg-primary-600 active:scale-95 transition-all duration-200 hover:shadow-xl relative","aria-label":e("chat.title"),children:[s.jsx(Hn,{size:24}),A>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-semibold animate-pulse","aria-label":`${A} unread messages`,children:A})]})}):s.jsx("div",{className:"fixed bottom-6 right-6 z-50 md:bottom-4 md:right-4",children:s.jsx("button",{onClick:()=>r("/login"),className:"bg-primary-600 dark:bg-primary-500 text-white p-4 rounded-full shadow-lg hover:bg-primary-700 dark:hover:bg-primary-600 active:scale-95 transition-all duration-200 hover:shadow-xl","aria-label":e("chat.title"),children:s.jsx(Hn,{size:24})})})},DA=()=>{const{user:e,isAuthenticated:t}=Se(r=>r.auth);return t&&(e==null?void 0:e.role)==="ADMIN"},Ri=Ne("categories/fetchCategories",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.includeInactive&&n.append("includeInactive","true"),(await ce.get(`/categories?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch categories")}}),uf=Ne("categories/fetchCategory",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get(`/categories/${e}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch category")}}),kh=Ne("categories/createCategory",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.post("/categories",e)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create category")}}),wh=Ne("categories/updateCategory",async({id:e,...t},{rejectWithValue:r})=>{var a,n;try{return(await ce.put(`/categories/${e}`,t)).data}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update category")}}),jh=Ne("categories/deleteCategory",async(e,{rejectWithValue:t})=>{var r,a;try{return await ce.delete(`/categories/${e}`),e}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete category")}}),OA={categories:[],currentCategory:null,isLoading:!1,error:null},FA=Vr({name:"categories",initialState:OA,reducers:{clearCurrentCategory:e=>{e.currentCategory=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Ri.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ri.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload,t.error=null}).addCase(Ri.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(uf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(uf.fulfilled,(t,r)=>{t.isLoading=!1,t.currentCategory=r.payload,t.error=null}).addCase(uf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(kh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(kh.fulfilled,(t,r)=>{t.isLoading=!1,t.categories.push(r.payload),t.error=null}).addCase(kh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(wh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(wh.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.categories.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.categories[a]=r.payload),t.currentCategory&&t.currentCategory.id===r.payload.id&&(t.currentCategory=r.payload),t.error=null}).addCase(wh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(jh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(jh.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=t.categories.filter(a=>a.id!==r.payload),t.currentCategory&&t.currentCategory.id===r.payload&&(t.currentCategory=null),t.error=null}).addCase(jh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),BA=FA.reducer,xd=Ne("banners/fetchBanners",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.includeInactive&&n.append("includeInactive","true"),(await ce.get(`/banners?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch banners")}}),hf=Ne("banners/fetchBanner",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get(`/banners/${e}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch banner")}}),Nh=Ne("banners/createBanner",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.post("/banners",e)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to create banner")}}),_h=Ne("banners/updateBanner",async({id:e,...t},{rejectWithValue:r})=>{var a,n;try{return(await ce.put(`/banners/${e}`,t)).data}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update banner")}}),Sh=Ne("banners/deleteBanner",async(e,{rejectWithValue:t})=>{var r,a;try{return await ce.delete(`/banners/${e}`),e}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to delete banner")}}),Ch=Ne("banners/toggleBannerStatus",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.patch(`/banners/${e}/toggle`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to toggle banner status")}}),yd=Ne("banners/fetchFeaturedBanners",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/banners/featured")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch featured banners")}}),Ph=Ne("banners/fetchHeroBanner",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/banners/hero/active")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch hero banner")}}),bd=Ne("banners/setFeaturedBanner",async({id:e,featuredOrder:t},{rejectWithValue:r})=>{var a,n;try{return(await ce.patch(`/banners/${e}/featured`,{featuredOrder:t})).data}catch(i){return r(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to set banner as featured")}}),vd=Ne("banners/removeFeaturedBanner",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.delete(`/banners/${e}/featured`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to remove banner from featured")}}),zA={banners:[],featuredBanners:[],heroBanner:null,currentBanner:null,isLoading:!1,error:null},$A=Vr({name:"banners",initialState:zA,reducers:{clearCurrentBanner:e=>{e.currentBanner=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(xd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(xd.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=r.payload,t.error=null}).addCase(xd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(hf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(hf.fulfilled,(t,r)=>{t.isLoading=!1,t.currentBanner=r.payload,t.error=null}).addCase(hf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Nh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Nh.fulfilled,(t,r)=>{t.isLoading=!1,t.banners.push(r.payload),t.error=null}).addCase(Nh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(_h.pending,t=>{t.isLoading=!0,t.error=null}).addCase(_h.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.banners.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.banners[a]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(_h.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Sh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Sh.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=t.banners.filter(a=>a.id!==r.payload),t.currentBanner&&t.currentBanner.id===r.payload&&(t.currentBanner=null),t.error=null}).addCase(Sh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ch.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ch.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.banners.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.banners[a]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(Ch.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(yd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(yd.fulfilled,(t,r)=>{t.isLoading=!1,t.featuredBanners=r.payload,t.error=null}).addCase(yd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ph.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ph.fulfilled,(t,r)=>{t.isLoading=!1,t.heroBanner=r.payload,t.error=null}).addCase(Ph.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(bd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(bd.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.banners.findIndex(n=>n.id===r.payload.id);if(a!==-1&&(t.banners[a]=r.payload),r.payload.isFeatured){const n=t.featuredBanners.findIndex(i=>i.id===r.payload.id);n!==-1?t.featuredBanners[n]=r.payload:(t.featuredBanners.push(r.payload),t.featuredBanners.sort((i,o)=>(i.featuredOrder||0)-(o.featuredOrder||0)))}t.error=null}).addCase(bd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(vd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(vd.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.banners.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.banners[a]=r.payload),t.featuredBanners=t.featuredBanners.filter(n=>n.id!==r.payload.id),t.error=null}).addCase(vd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),UA=$A.reducer,eb=(e,t,r)=>e==="is"?t||r||"":r||t||"",cS=(e,t,r)=>e==="is"?t&&t.length>0?t:r||[]:r&&r.length>0?r:t||[],Xn=(e,t)=>eb(e,t.nameIs,t.name),Dg=(e,t)=>eb(e,t.descriptionIs,t.description),VA=(e,t)=>eb(e,t.countryIs,t.country),So=(e,t)=>cS(e,t.foodPairingsIs,t.foodPairings),Iw=(e,t)=>cS(e,t.specialAttributesIs,t.specialAttributes),Ec=({product:e,className:t="w-full h-64 object-contain",currentLanguage:r="is"})=>{var h;const[a,n]=_.useState(!1),i=m=>typeof m=="string"?m:m&&typeof m=="object"&&(m.name||m.slug)||"",o=m=>{const g=i(m);switch(g==null?void 0:g.toUpperCase()){case"WINE":return s.jsx(aS,{className:"w-16 h-16 text-primary-300"});case"BEER":return s.jsx(X_,{className:"w-16 h-16 text-primary-300"});case"NICOTINE":return s.jsx(Ye,{className:"w-16 h-16 text-primary-300"});default:return s.jsx(Ye,{className:"w-16 h-16 text-primary-300"})}},d=m=>{const g=i(m);switch(g==null?void 0:g.toUpperCase()){case"WINE":return"from-red-50 to-red-100";case"BEER":return"from-amber-50 to-amber-100";case"NICOTINE":return"from-gray-50 to-gray-100";default:return"from-gray-50 to-gray-100"}},c=m=>m?m.startsWith("http")?m:`https://olfong.olibuijr.com${m}`:"";return!e.imageUrl||a?s.jsx("div",{className:`bg-gradient-to-br ${d(e.category)} flex items-center justify-center relative ${t}`,children:s.jsxs("div",{className:"text-center",children:[o(e.category),s.jsx("div",{className:"mt-2",children:s.jsx("span",{className:"text-primary-400 text-sm font-medium",children:((h=i(e.category))==null?void 0:h.toLowerCase())||"Product"})})]})}):s.jsx("img",{src:c(e.imageUrl),alt:Xn(r,e),className:t,onError:()=>n(!0),loading:"lazy"})};Ec.propTypes={product:xe.object.isRequired,className:xe.string,currentLanguage:xe.string};const HA=({category:e,limit:t=6})=>{const{t:r,currentLanguage:a}=je(),n=ut(),[i,o]=_.useState([]),[d,c]=_.useState(!0);_.useEffect(()=>{(async()=>{try{c(!0);const k=await ce.get(`/products?category=${e.name}&limit=${t}`);o(k.data.products||[])}catch(k){console.error("Error fetching category products:",k),o([])}finally{c(!1)}})()},[e.name,t]);const h=p=>{p.scrollBy({left:-300,behavior:"smooth"})},m=p=>{p.scrollBy({left:300,behavior:"smooth"})},g=async(p,k)=>{p.preventDefault(),p.stopPropagation(),await n(Mi({productId:k.id,quantity:1}))};return d&&i.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name})}),s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(pt,{size:"medium"})})]}):i.length===0?null:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.length," ",r("common.itemsLabel")]})]}),s.jsx(Le,{to:`/products?category=${e.name}`,className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:r("common.viewAll")})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(p=>s.jsx("div",{className:"flex-shrink-0 w-64",children:s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(Le,{to:`/products/${p.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white p-2",children:[s.jsx(Ec,{product:p,className:"w-full h-48 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:a}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${p.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:p.stock>0?r("products.inStock"):r("products.outOfStock")})})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-3 flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white line-clamp-2 leading-tight flex-1",children:Xn(a,p)}),s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[p.volume&&s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap",children:p.volume}),p.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:[p.alcoholContent,"%"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:Dg(a,p)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[p.price.toLocaleString()," ",r("common.currency")]}),s.jsx("button",{onClick:k=>g(k,p),disabled:p.stock===0,className:"btn btn-sm bg-primary-600 hover:bg-primary-700 text-white disabled:bg-gray-300 disabled:cursor-not-allowed min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":r("products.addToCart"),children:s.jsx(Mr,{className:"w-4 h-4"})})]})]})]})})},p.id))}),s.jsx("button",{onClick:p=>h(p.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(Vy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:p=>m(p.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(Hy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},WA=({limit:e=6})=>{const{t,currentLanguage:r}=je(),a=ut(),{products:n,isLoading:i}=Se(m=>m.products),o=n.filter(m=>m.discountPercentage&&m.discountPercentage>0).slice(0,e),d=m=>{m.scrollBy({left:-300,behavior:"smooth"})},c=m=>{m.scrollBy({left:300,behavior:"smooth"})},h=async(m,g)=>{m.preventDefault(),m.stopPropagation(),await a(Mi({productId:g.id,quantity:1}))};return i&&o.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted.title")})}),s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(pt,{size:"medium"})})]}):o.length===0?null:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted.title")}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.length," ",t("common.itemsLabel")]})]}),s.jsx(Le,{to:"/products?discounted=true",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:t("common.viewAll")})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:o.map(m=>{var g;return s.jsx("div",{className:"flex-shrink-0 w-64",children:s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(Le,{to:`/products/${m.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white p-2",children:[s.jsx(Ec,{product:m,className:"w-full h-48 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:r}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),s.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${m.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:m.stock>0?t("products.inStock"):t("products.outOfStock")}),s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:["-",m.discountPercentage,"%"]})]})]})}),s.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-3 flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold text-lg text-gray-900 dark:text-white line-clamp-2 leading-tight flex-1",children:Xn(r,m)}),s.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[m.volume&&s.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap",children:m.volume}),m.alcoholContent&&s.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 whitespace-nowrap",children:[m.alcoholContent,"%"]})]})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:Dg(r,m)})]}),s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[(g=m.discountedPrice)==null?void 0:g.toLocaleString()," ",t("common.currency")]}),s.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[m.price.toLocaleString()," ",t("common.currency")]})]}),s.jsx("button",{onClick:p=>h(p,m),disabled:m.stock===0,className:"btn btn-sm bg-primary-600 hover:bg-primary-700 text-white disabled:bg-gray-300 disabled:cursor-not-allowed min-w-[44px] min-h-[44px] flex items-center justify-center","aria-label":t("products.addToCart"),children:s.jsx(Mr,{className:"w-4 h-4"})})]})]})]})})},m.id)})}),s.jsx("button",{onClick:m=>d(m.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(Vy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),s.jsx("button",{onClick:m=>c(m.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:s.jsx(Hy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},qA=({text:e,speed:t=50,count:r=3,className:a=""})=>{const n=_.useMemo(()=>e.length*10/t,[e,t]),i=_.useMemo(()=>Array(r).fill(e).join("  "),[e,r]);return s.jsxs("div",{className:`overflow-hidden whitespace-nowrap ${a}`,children:[s.jsxs("div",{className:"inline-block animate-marquee",style:{animation:`marquee ${n}s linear infinite`},children:[s.jsx("span",{className:"inline-block px-4",children:i}),s.jsx("span",{className:"inline-block px-4",children:i})]}),s.jsx("style",{children:`
        @keyframes marquee {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(-50%);
          }
        }
      `})]})},KA=()=>{var N,P;const{t:e,language:t}=je(),r=ut(),a=DA(),{categories:n,isLoading:i}=Se(C=>C.categories),{banners:o,featuredBanners:d,heroBanner:c}=Se(C=>C.banners),{products:h}=Se(C=>C.products);_.useEffect(()=>{r(Ri()),r(yd()),r(Ph()),a&&r(xd({includeInactive:!0})),r(Sa({limit:100}))},[r,a]);const m=_.useMemo(()=>d.map(C=>({id:C.id,imageUrl:C.imageUrl,alt:C.alt||"lfng Banner",title:C.titleIs||C.title,description:C.descriptionIs||C.description,link:C.link,featuredOrder:C.featuredOrder})),[d]),g=h.some(C=>C.discountPercentage&&C.discountPercentage>0),[p,k]=_.useState([]);_.useEffect(()=>{if(m.length===0){k([]);return}const A=[...m].sort((E,F)=>(E.featuredOrder||0)-(F.featuredOrder||0)).slice(0,Math.min(3,m.length));k(A)},[m]);const x=C=>p[C]||null,j=async(C,A)=>{if(a)try{const E=p[C];E&&E.id&&await r(vd(E.id)),A&&await r(bd({id:A,featuredOrder:C+1})),r(yd())}catch(E){console.error("Error switching banner:",E)}},y=_.useMemo(()=>[{icon:s.jsx(aS,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.wineTitle"),description:e("home.features.wineDescription"),link:"/products?category=WINE"},{icon:s.jsx(X_,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.beerTitle"),description:e("home.features.beerDescription"),link:"/products?category=BEER"},{icon:s.jsx(yr,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.deliveryTitle"),description:e("home.features.deliveryDescription"),link:"/products"},{icon:s.jsx(nA,{className:"w-8 h-8 text-primary-600"}),title:e("home.features.ageVerificationTitle"),description:e("home.features.ageVerificationDescription"),link:"/products"}],[e]),b=_.useMemo(()=>c?{backgroundType:c.backgroundType||"gradient",gradientStartColor:c.gradientStartColor||"#374151",gradientEndColor:c.gradientEndColor||"#111827",gradientDirection:c.gradientDirection||"to-r",backgroundImageUrl:c.backgroundImageUrl,backgroundOpacity:c.backgroundOpacity!==void 0?c.backgroundOpacity:1,marqueeText:t==="is"&&c.marqueeTextIs||c.marqueeText,marqueeSpeed:c.marqueeSpeed||50,marqueeCount:c.marqueeCount||3,logoUrl:c.heroLogoUrl||"/logo_black-web.webp",subtitle:t==="is"?c.heroSubtitleIs||c.heroSubtitle||e("home.hero.subtitle"):c.heroSubtitle||e("home.hero.subtitle"),buttonText:t==="is"?c.heroButtonTextIs||c.heroButtonText||e("home.hero.startShopping"):c.heroButtonText||e("home.hero.startShopping"),buttonLink:c.heroButtonLink||"/products",textColor:c.textColor||"#ffffff",buttonBgColor:c.buttonBgColor||"#ffffff",buttonTextColor:c.buttonTextColor||"#1f2937",overlayOpacity:c.overlayOpacity!==void 0?c.overlayOpacity:0}:{backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:null,backgroundOpacity:1,marqueeText:null,marqueeSpeed:50,marqueeCount:3,logoUrl:"/logo_black-web.webp",subtitle:e("home.hero.subtitle"),buttonText:e("home.hero.startShopping"),buttonLink:"/products",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0},[c,t,e]),w=()=>{const{backgroundType:C,gradientStartColor:A,gradientEndColor:E,gradientDirection:F,backgroundImageUrl:I,backgroundOpacity:D}=b;return C==="image"&&I?{backgroundImage:`url(${I})`,backgroundSize:"cover",backgroundPosition:"center",opacity:D}:C==="gradient"?{background:`linear-gradient(${{"to-r":"to right","to-l":"to left","to-t":"to top","to-b":"to bottom","to-br":"to bottom right","to-bl":"to bottom left","to-tr":"to top right","to-tl":"to top left"}[F]||"to right"}, ${A}, ${E})`,opacity:D}:{}};return s.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[s.jsxs("section",{className:"relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0",style:w()}),b.backgroundType==="marquee"&&b.marqueeText&&s.jsx("div",{className:"absolute inset-0 flex flex-col justify-center",style:{background:`linear-gradient(to right, ${b.gradientStartColor}, ${b.gradientEndColor})`},children:Array.from({length:10}).map((C,A)=>s.jsx(qA,{text:b.marqueeText,speed:b.marqueeSpeed,count:b.marqueeCount,className:"text-6xl md:text-8xl font-bold opacity-5",style:{color:b.textColor}},A))}),b.overlayOpacity>0&&s.jsx("div",{className:"absolute inset-0 bg-black",style:{opacity:b.overlayOpacity}}),s.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("img",{src:b.logoUrl,alt:e("home.olfongLogoAlt"),className:"h-20 md:h-32 w-auto",style:{filter:b.logoUrl==="/logo_black-web.webp"?"invert(1)":"none"}})}),s.jsx("p",{className:"text-xl md:text-2xl mb-8",style:{color:b.textColor},children:b.subtitle}),s.jsx("div",{className:"flex justify-center",children:s.jsx(Le,{to:b.buttonLink,className:"btn px-8 py-3 text-lg transition-colors duration-200",style:{backgroundColor:b.buttonBgColor,color:b.buttonTextColor},children:b.buttonText})})]})})]}),s.jsx("section",{className:"py-16 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.why.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.why.subtitle")})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:y.map((C,A)=>s.jsxs(Le,{to:C.link,className:"card p-6 text-center hover:shadow-lg transition-shadow duration-200",children:[s.jsx("div",{className:"flex justify-center mb-4",children:C.icon}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:C.title}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:C.description})]},A))})]})})}),g&&s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.discounted.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.discounted.subtitle")})]}),s.jsx(WA,{limit:6})]})}),x(0)&&s.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[s.jsx("img",{src:x(0).imageUrl,alt:x(0).alt,className:"w-full h-64 md:h-80 object-cover"}),(x(0).title||x(0).description)&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:s.jsxs("div",{className:"p-6 text-white",children:[x(0).title&&s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:x(0).title}),x(0).description&&s.jsx("p",{className:"text-lg opacity-90",children:x(0).description})]})}),a&&s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((N=x(0))==null?void 0:N.id)||"",onChange:C=>j(0,C.target.value||null),children:[s.jsx("option",{value:"",children:"Select Banner"}),o.filter(C=>C.isActive).map(C=>s.jsx("option",{value:C.id,children:C.titleIs||C.title||`Banner ${C.id}`},C.id))]})})]})})}),!i&&n.length>0&&s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.categories.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.categories.subtitle")})]}),s.jsx("div",{className:"space-y-8",children:n.map(C=>s.jsx(HA,{category:C,limit:6},C.id))})]})}),x(1)&&s.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[s.jsx("img",{src:x(1).imageUrl,alt:x(1).alt,className:"w-full h-64 md:h-80 object-cover"}),(x(1).title||x(1).description)&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:s.jsxs("div",{className:"p-6 text-white",children:[x(1).title&&s.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:x(1).title}),x(1).description&&s.jsx("p",{className:"text-lg opacity-90",children:x(1).description})]})}),a&&s.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:s.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((P=x(1))==null?void 0:P.id)||"",onChange:C=>j(1,C.target.value||null),children:[s.jsx("option",{value:"",children:"Select Banner"}),o.filter(C=>C.isActive).map(C=>s.jsx("option",{value:C.id,children:C.titleIs||C.title||`Banner ${C.id}`},C.id))]})})]})})}),s.jsx("section",{className:"py-16 bg-white dark:bg-gray-800 hidden md:block",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home.testimonials.title")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home.testimonials.subtitle")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review1"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review1Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review1Location")})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review2"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review2Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review2Location")})]}),s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsx("div",{className:"flex text-yellow-400",children:"".repeat(5)})}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home.testimonials.review3"),'"']}),s.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home.testimonials.review3Author")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home.testimonials.review3Location")})]})]})]})})]})};var uS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Tw=Tt.createContext&&Tt.createContext(uS),GA=["attr","size","title"];function ZA(e,t){if(e==null)return{};var r=YA(e,t),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function YA(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function jm(){return jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},jm.apply(this,arguments)}function Lw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lw(Object(r),!0).forEach(function(a){JA(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lw(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JA(e,t,r){return t=XA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XA(e){var t=QA(e,"string");return typeof t=="symbol"?t:t+""}function QA(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hS(e){return e&&e.map((t,r)=>Tt.createElement(t.tag,Nm({key:r},t.attr),hS(t.child)))}function Ma(e){return t=>Tt.createElement(eM,jm({attr:Nm({},e.attr)},t),hS(e.child))}function eM(e){var t=r=>{var{attr:a,size:n,title:i}=e,o=ZA(e,GA),d=n||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Tt.createElement("svg",jm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,o,{className:c,style:Nm(Nm({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&Tt.createElement("title",null,i),e.children)};return Tw!==void 0?Tt.createElement(Tw.Consumer,null,r=>t(r)):t(uS)}function mS(e){return Ma({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 384c-28.02 0-31.26-32-74.5-32-43.43 0-46.825 32-74.75 32-27.695 0-31.454-32-74.75-32-42.842 0-47.218 32-74.5 32-28.148 0-31.202-32-74.75-32-43.547 0-46.653 32-74.75 32v-80c0-26.5 21.5-48 48-48h16V112h64v144h64V112h64v144h64V112h64v144h16c26.5 0 48 21.5 48 48v80zm0 128H0v-96c43.356 0 46.767-32 74.75-32 27.951 0 31.253 32 74.75 32 42.843 0 47.217-32 74.5-32 28.148 0 31.201 32 74.75 32 43.357 0 46.767-32 74.75-32 27.488 0 31.252 32 74.5 32v96zM96 96c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40z"},child:[]}]})(e)}function gS(e){return Ma({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M298.2 156.6c-52.7-25.7-114.5-10.5-150.2 32.8l55.2 55.2c6.3 6.3 6.3 16.4 0 22.6-3.1 3.1-7.2 4.7-11.3 4.7s-8.2-1.6-11.3-4.7L130.4 217 2.3 479.7c-2.9 6-3.1 13.3 0 19.7 5.4 11.1 18.9 15.7 30 10.3l133.6-65.2-49.2-49.2c-6.3-6.2-6.3-16.4 0-22.6 6.3-6.2 16.4-6.2 22.6 0l57 57 102-49.8c24-11.7 44.5-31.3 57.1-57.1 30.1-61.7 4.5-136.1-57.2-166.2zm92.1-34.9C409.8 81 399.7 32.9 360 0c-50.3 41.7-52.5 107.5-7.9 151.9l8 8c44.4 44.6 110.3 42.4 151.9-7.9-32.9-39.7-81-49.8-121.7-30.3z"},child:[]}]})(e)}function fS(e){return Ma({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 288v160a32 32 0 0 0 32 32h448a32 32 0 0 0 32-32V288zM299.83 32a32 32 0 0 0-21.13 7L0 256h512c0-119.89-94-217.8-212.17-224z"},child:[]}]})(e)}function xa(e){return Ma({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.8 49.57a169.44 169.44 0 0 0-239.5 0C187.82 85 160.13 128 160.13 192v85.83l-40.62 40.59c-9.7 9.69-24 11.07-36.78 6a60.33 60.33 0 0 0-65 98.72C33 438.39 54.24 442.7 73.85 438.21c-4.5 19.6-.18 40.83 15.1 56.1a60.35 60.35 0 0 0 98.8-65c-5.09-12.73-3.72-27 6-36.75L234.36 352h85.89a187.87 187.87 0 0 0 61.89-10c-39.64-43.89-39.83-110.23 1.05-151.07 34.38-34.36 86.76-39.46 128.74-16.8 1.3-44.96-14.81-90.28-49.13-124.56z"},child:[]}]})(e)}function _m(e){return Ma({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M327.1 96c-89.97 0-168.54 54.77-212.27 101.63L27.5 131.58c-12.13-9.18-30.24.6-27.14 14.66L24.54 256 .35 365.77c-3.1 14.06 15.01 23.83 27.14 14.66l87.33-66.05C158.55 361.23 237.13 416 327.1 416 464.56 416 576 288 576 256S464.56 96 327.1 96zm87.43 184c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24 13.26 0 24 10.74 24 24 0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function pS(e){return Ma({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256H48a48 48 0 0 0 0 96h416a48 48 0 0 0 0-96zm16 128H32a16 16 0 0 0-16 16v16a64 64 0 0 0 64 64h352a64 64 0 0 0 64-64v-16a16 16 0 0 0-16-16zM58.64 224h394.72c34.57 0 54.62-43.9 34.82-75.88C448 83.2 359.55 32.1 256 32c-103.54.1-192 51.2-232.18 116.11C4 180.09 24.07 224 58.64 224zM384 112a16 16 0 1 1-16 16 16 16 0 0 1 16-16zM256 80a16 16 0 1 1-16 16 16 16 0 0 1 16-16zm-128 32a16 16 0 1 1-16 16 16 16 0 0 1 16-16z"},child:[]}]})(e)}function xS(e){return Ma({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z"},child:[]}]})(e)}function yS(e){return Ma({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M158.87.15c-16.16-1.52-31.2 8.42-35.33 24.12l-14.81 56.27c187.62 5.49 314.54 130.61 322.48 317l56.94-15.78c15.72-4.36 25.49-19.68 23.62-35.9C490.89 165.08 340.78 17.32 158.87.15zm-58.47 112L.55 491.64a16.21 16.21 0 0 0 20 19.75l379-105.1c-4.27-174.89-123.08-292.14-299.15-294.1zM128 416a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm48-152a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm104 104a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"},child:[]}]})(e)}function Sm(e){return Ma({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(e)}function Cm(e){return Ma({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M468.958 108.958c-27.507 2.08-48.997 7.94-71.375 22.572-5.333-2.214-12.62-17.738-16-16-11.82 6.08-14.892 19.555-4.916 32.817l-59.084 9.916c-24.776 3.341-49.567 4.838-74.187 5.334 1.326 3.832 2.96 7.636 4.812 10.05 5.219 6.802 20.323 6.21 21.07 14.75 1.935 22.098-24.876 47.415-47.056 47.057-15.401-.248-17.017-28.762-31.604-33.713-19.097-6.482-41.62 18.77-59.699 9.832-15.267-7.547-24.992-39.8-27.836-50.41-10.213-.127-20.327-.142-30.316.035-12.564.366-22.902 5.645-29.408 14.239-8.676 11.458-11.652 26.658-13.254 42.925-1.78 18.057 6.147 53.007 5.517 70.282-.504 13.85-7.493 11.87-11.912 18.888-13.52 21.47 8.894 20.83 17.014 5.56 12.482-23.473 4.253-63.11 7.195-92.974 1.855-35.76 10.597-23.937 15.664-24.588-4.2 13.065-6.21 30.962-7 51.334 6.895-2.342 36.498-11.6 42.73-.174 6.872 12.598-27.802 22.016-23.878 35.819 2.464 8.666 22.95 2.378 24.582 11.238 3.322 18.035-32.13 38.713-42.236 44.209.812 23.329 1.564 45.567 1.238 65.086H88.91c-4.234-16.543-12.038-49.944-4.06-55.084 21.425-18.091 29.836-37.484 42.732-56.428 8.755 2.556 16.92 4.787 24.782 6.672 3.553.972 7.244 1.771 10.984 2.44 24.859 4.967 61.553 5.678 90.783-.172 3.76 34.12 7.263 68.452 4.602 102.572h28.957c-12.375-26.902-4.263-65.044 13.892-86.27l44.934-33.462c24.881-16.384 42.93-37.996 55.982-63.38 30.402 3.413 57.086 3.29 77.192-.786l12.84-19.55c-24.257-17.857-43.3-36.585-62.948-58.13 10.063-14.533 25.027-22.765 39.375-32.506zm-39.375 54.572a8 8 0 1 1 0 16 8 8 0 0 1 0-16zM366.2 183.481c5.029 9.822-26.17 10.808-24.933 21.772.998 8.847 22.204 3.839 23.53 12.643 3.818 25.373-28.44 53.805-54.08 54.78-14.262.544-34.902-14.06-32.308-28.093 2.605-14.092 34.551-1.657 40.383-14.748 4.724-10.603-18.352-22.01-12.992-32.307 6.264-12.032 30.364-22.553 41.934-22.646 11.57-.093 15.606 3.347 18.466 8.6zm-26.585 126.346l-34.707 23.96 6.464 69.255h34.414c-11.783-22.454-15.58-55.506-6.171-93.215zm-204.561 1.41c-6.047 12.184-14.147 21.97-22.174 31.242 5.97 3.235 11.648 5.414 17.154 6.614 11.218 2.443 21.636.333 29.948-4.408 10.056-5.737 17.521-14.452 24.115-23.368-14.615-.869-32.96-2.962-49.043-10.08zm24.252 52c-8.737 2.585-17.452 3.7-25.566 2.96 5.167 12.624 10.45 24.152 15.824 36.845h28.306c-10.393-18.48-16.148-29.285-18.564-39.805z"},child:[]}]})(e)}const tb=()=>{const[e,t]=_.useState("kr"),[r,a]=_.useState("ISK"),[n,i]=_.useState(!0);return _.useEffect(()=>{(async()=>{var d,c,h;try{i(!0);const m=await ce.get("/settings/public?category=GENERAL"),g=((c=(d=m.data)==null?void 0:d.data)==null?void 0:c.settings)||((h=m.data)==null?void 0:h.settings)||[],p=g.find(x=>x.key==="currencySymbol"),k=g.find(x=>x.key==="currencyCode");p!=null&&p.value&&t(p.value),k!=null&&k.value&&a(k.value)}catch(m){console.error("Failed to fetch currency settings:",m),t("kr"),a("ISK")}finally{i(!1)}})()},[]),{currencySymbol:e,currencyCode:r,isLoading:n}},bS=({type:e="card",count:t=1,className:r=""})=>{const a=()=>{switch(e){case"card":return s.jsxs("div",{className:`card overflow-hidden ${r}`,children:[s.jsx("div",{className:"w-full h-64 bg-gray-200 animate-pulse"}),s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4 mb-4"}),s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]})]});case"product":return s.jsx("div",{className:"group",children:s.jsxs("div",{className:`card overflow-hidden hover:shadow-xl transition-all duration-300 border-0 shadow-md ${r}`,children:[s.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse"}),s.jsxs("div",{className:"p-6 bg-white",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}),s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"})}),s.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]})]})});case"text":return s.jsxs("div",{className:`space-y-2 ${r}`,children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-4/6"})]});case"button":return s.jsx("div",{className:`h-10 bg-gray-200 rounded animate-pulse ${r}`});case"image":return s.jsx("div",{className:`bg-gray-200 animate-pulse ${r}`});default:return s.jsx("div",{className:`bg-gray-200 animate-pulse rounded ${r}`})}};return t===1?a():s.jsx("div",{className:"space-y-4",children:Array.from({length:t},(n,i)=>s.jsx("div",{children:a()},i))})};bS.propTypes={type:xe.oneOf(["card","product","text","button","image"]),count:xe.number,className:xe.string};const wu=({min:e=0,max:t=100,step:r=1,value:a=[e,t],onChange:n,className:i="",label:o="",formatValue:d=h=>h,disabled:c=!1})=>{const[h,m]=_.useState(null),g=_.useRef(null),[p,k]=_.useState(a);_.useEffect(()=>{k(a)},[a]);const x=_.useCallback(C=>(C-e)/(t-e)*100,[e,t]),j=_.useCallback(C=>e+C/100*(t-e),[e,t]),y=_.useCallback(C=>A=>{c||(A.preventDefault(),m(C))},[c]),b=_.useCallback(C=>{if(!h||!g.current||c)return;const A=g.current.getBoundingClientRect(),E=Math.max(0,Math.min(100,(C.clientX-A.left)/A.width*100)),F=j(E),I=Math.round(F/r)*r,D=Math.max(e,Math.min(t,I));let Y=[...p];h==="min"?Y[0]=Math.min(D,Y[1]):h==="max"&&(Y[1]=Math.max(D,Y[0])),k(Y),n&&n(Y)},[h,p,c,r,e,t,j,n]),w=_.useCallback(()=>{m(null)},[]);_.useEffect(()=>{if(h)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",w),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",w)}},[h,b,w]);const N=x(p[0]),P=x(p[1]);return s.jsxs("div",{className:`dual-thumb-slider ${i}`,children:[o&&s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{ref:g,className:"relative h-2 bg-gray-200 dark:bg-gray-600 rounded-lg cursor-pointer",children:[s.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-600 rounded-lg"}),s.jsx("div",{className:"absolute h-2 bg-primary-500 rounded-lg",style:{left:`${N}%`,width:`${P-N}%`}}),s.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-x-1/2 -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${c?"opacity-50 cursor-not-allowed":""}`,style:{left:`${N}%`},onMouseDown:y("min")}),s.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-x-1/2 -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${c?"opacity-50 cursor-not-allowed":""}`,style:{left:`${P}%`},onMouseDown:y("max")})]}),s.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[s.jsx("span",{children:d(p[0])}),s.jsx("span",{children:d(p[1])})]})]})]})},tM=({category:e,subcategory:t})=>{const{currentLanguage:r}=je();if(!e)return null;if(t){const n=r==="is"?t.descriptionIs||t.description:t.description||t.descriptionIs,i=r==="is"?t.nameIs:t.name;return n?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-900/10 rounded-lg border border-primary-200 dark:border-primary-800/30",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:i}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:n})]}):null}const a=r==="is"?e.descriptionIs||e.description:e.description||e.descriptionIs;return a?s.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-900/10 rounded-lg border border-primary-200 dark:border-primary-800/30",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r==="is"?e.nameIs:e.name}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm leading-relaxed",children:a})]}):null},rM=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?s.jsx(_m,{className:"w-4 h-4 text-gray-500"}):t.includes("beef")||t.includes("nautakjt")?s.jsx(Cm,{className:"w-4 h-4 text-gray-500"}):t.includes("lamb")||t.includes("lambakjt")?s.jsx(xa,{className:"w-4 h-4 text-gray-500"}):t.includes("pork")||t.includes("svnakjt")?s.jsx(pS,{className:"w-4 h-4 text-gray-500"}):t.includes("fowl")||t.includes("fuglakjt")||t.includes("poultry")?s.jsx(xa,{className:"w-4 h-4 text-gray-500"}):t.includes("cheese")||t.includes("ostur")?s.jsx(fS,{className:"w-4 h-4 text-gray-500"}):t.includes("vegetable")||t.includes("grnmeti")?s.jsx(gS,{className:"w-4 h-4 text-gray-500"}):t.includes("dessert")||t.includes("eftirrttur")?s.jsx(mS,{className:"w-4 h-4 text-gray-500"}):t.includes("seafood")||t.includes("sjvarfiskur")?s.jsx(_m,{className:"w-4 h-4 text-gray-500"}):t.includes("pasta")||t.includes("pasta")?s.jsx(Sm,{className:"w-4 h-4 text-gray-500"}):t.includes("pizza")||t.includes("pizza")?s.jsx(yS,{className:"w-4 h-4 text-gray-500"}):t.includes("salad")||t.includes("salat")?s.jsx(xS,{className:"w-4 h-4 text-gray-500"}):t.includes("meat")||t.includes("kjt")?s.jsx(Cm,{className:"w-4 h-4 text-gray-500"}):t.includes("chicken")||t.includes("kjklingur")?s.jsx(xa,{className:"w-4 h-4 text-gray-500"}):t.includes("duck")||t.includes("nd")?s.jsx(xa,{className:"w-4 h-4 text-gray-500"}):t.includes("turkey")||t.includes("kalknn")?s.jsx(xa,{className:"w-4 h-4 text-gray-500"}):s.jsx(Sm,{className:"w-4 h-4 text-gray-500"})},sM=()=>{const{t:e,currentLanguage:t,isLoading:r}=je(),{currencySymbol:a}=tb(),n=ut(),i=xs(),[o]=SE(),{products:d,categories:c,filters:h,isLoading:m}=Se(T=>T.products),{isAuthenticated:g}=Se(T=>T.auth),[p,k]=_.useState(!1),[x,j]=_.useState(null),[y,b]=_.useState(null);_.useEffect(()=>{n(md())},[n]);const w=c.filter(T=>{var B;return((B=T._count)==null?void 0:B.products)>0});_.useEffect(()=>{var W;const T=o.get("category"),B=o.get("subcategory");if(T&&(T!==h.category||B!==h.subcategory)){n(Ns({category:T,subcategory:B||""}));const Q=c.find($=>$.name===T);if(j(Q||null),B&&Q){const $=(W=Q.subcategories)==null?void 0:W.find(O=>O.name===B);b($||null)}else b(null)}else!T&&h.category&&(n(Ns({category:"",subcategory:""})),j(null),b(null))},[o,n,h.category,h.subcategory,c]),_.useEffect(()=>{n(Sa(h))},[n,h]),_.useEffect(()=>{d.length===0&&!m&&n(Sa(h))},[n,h,d.length,m]);const N=T=>{const B=typeof T=="string"?T:(T==null?void 0:T.name)||"";n(Ns({category:B,subcategory:""})),k(!1);const W=new URLSearchParams(o);B&&B.trim()!==""?(W.set("category",B),W.delete("subcategory")):(W.delete("category"),W.delete("subcategory")),i(`/products?${W.toString()}`,{replace:!0})},P=T=>{n(Ns({search:T}))},C=(T,B)=>{n(Ns({sortBy:T,sortOrder:B}))},A=(T,B)=>{n(Ns({minPrice:T,maxPrice:B}))},E=(T,B)=>{n(Ns({minAlcoholVolume:T,maxAlcoholVolume:B}))},F=()=>{if(d.length===0)return{min:0,max:5e4};const T=d.map(Q=>Q.price).filter(Q=>Q!=null);if(T.length===0)return{min:0,max:5e4};const B=Math.min(...T),W=Math.max(...T);return{min:B,max:W}},I=()=>{if(d.length===0)return{min:0,max:50};const T=d.map(Q=>Q.alcoholContent).filter(Q=>Q!=null);if(T.length===0)return{min:0,max:50};const B=Math.min(...T),W=Math.max(...T);return{min:B,max:W}},D=F(),Y=I(),[R,Z]=_.useState(!1);return _.useEffect(()=>{!m&&!R&&Z(!0)},[m,R]),r||m&&!R?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-6 w-48"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:Array.from({length:8},(T,B)=>s.jsx(bS,{type:"product"},B))})]})}):s.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:[s.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex gap-8",children:[s.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:s.jsx("div",{className:"sticky top-24",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Bo,{className:"w-5 h-5 mr-2"}),e("productsPage.filters")]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common.search")}),s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"text",placeholder:e("common.search"),value:h.search,onChange:T=>P(T.target.value),className:"input pl-10 pr-3","aria-label":e("aria.searchProducts")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage.category")}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>N(""),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${h.category===""?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":h.category==="",children:e("productsPage.all")}),w.map(T=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>N(T),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${h.category===T.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":h.category===T.name,children:t==="is"?T.nameIs:T.name}),h.category===T.name&&T.subcategories&&T.subcategories.filter(B=>{var W;return((W=B._count)==null?void 0:W.products)>0}).length>0&&s.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[s.jsx("button",{onClick:()=>{n(Ns({subcategory:""})),b(null);const B=new URLSearchParams(o);B.set("category",T.name),B.delete("subcategory"),i(`/products?${B.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!h.subcategory||h.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage.all")}),T.subcategories.filter(B=>{var W;return((W=B._count)==null?void 0:W.products)>0}).map(B=>s.jsx("button",{onClick:()=>{n(Ns({subcategory:B.name})),b(B);const W=new URLSearchParams(o);W.set("category",T.name),W.set("subcategory",B.name),i(`/products?${W.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${h.subcategory===B.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?B.nameIs:B.name},B.id))]})]},T.id))]})]}),s.jsx("div",{children:s.jsx(wu,{min:D.min,max:D.max,step:100,value:[h.minPrice||D.min,h.maxPrice||D.max],onChange:T=>A(T[0],T[1]),label:`${e("productsPage.priceRange")} (${h.minPrice||D.min} - ${h.maxPrice||D.max} kr)`,formatValue:T=>`${T} kr`})}),s.jsx("div",{children:s.jsx(wu,{min:Y.min,max:Y.max,step:.5,value:[h.minAlcoholVolume||Y.min,h.maxAlcoholVolume||Y.max],onChange:T=>E(T[0],T[1]),label:`${e("productsPage.alcoholContent")} (${h.minAlcoholVolume||Y.min} - ${h.maxAlcoholVolume||Y.max}%)`,formatValue:T=>`${T}%`})})]})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("productsPage.title")}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 w-full sm:w-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none min-w-0",children:[s.jsx(H7,{className:"w-4 h-4 text-gray-500 flex-shrink-0"}),s.jsxs("select",{value:`${h.sortBy}-${h.sortOrder}`,onChange:T=>{const[B,W]=T.target.value.split("-");C(B,W)},className:"flex-1 sm:flex-none px-3 py-2 text-sm sm:text-base border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"name-asc",children:e("productsPage.sortOptions.nameAZ")}),s.jsx("option",{value:"name-desc",children:e("productsPage.sortOptions.nameZA")}),s.jsx("option",{value:"price-asc",children:e("productsPage.sortOptions.priceLowToHigh")}),s.jsx("option",{value:"price-desc",children:e("productsPage.sortOptions.priceHighToLow")}),s.jsx("option",{value:"alcoholVolume-asc",children:e("productsPage.sortBy")}),s.jsx("option",{value:"alcoholVolume-desc",children:e("productsPage.sortBy")})]})]}),s.jsxs("button",{onClick:()=>k(!0),className:"lg:hidden btn btn-outline flex items-center justify-center gap-2 py-2 px-3 text-sm sm:text-base flex-1 sm:flex-none whitespace-nowrap",children:[s.jsx(Bo,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("productsPage.filters")}),s.jsx("span",{className:"sm:hidden",children:e("productsPage.filters")})]})]})]})}),x&&s.jsx(tM,{category:x,subcategory:y}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 custom-scrollbar",children:[s.jsx("button",{onClick:()=>{j(null),N("")},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${!x&&h.category===""?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:e("productsPage.all")}),w.map(T=>s.jsx("button",{onClick:()=>{j(T),N(T)},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${(x==null?void 0:x.id)===T.id?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t==="is"?T.nameIs:T.name},T.id))]}),x&&x.subcategories&&x.subcategories.filter(T=>{var B;return((B=T._count)==null?void 0:B.products)>0}).length>0&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 overflow-x-auto pb-2 pl-4 border-l-2 border-primary-200 dark:border-primary-800 custom-scrollbar",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium flex-shrink-0",children:[e("productsPage.subcategory"),":"]}),s.jsx("button",{onClick:()=>N(x),className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${h.category===x.name&&!h.subcategory?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e("productsPage.all")}),x.subcategories.filter(T=>{var B;return((B=T._count)==null?void 0:B.products)>0}).map(T=>s.jsx("button",{onClick:()=>{n(Ns({category:x.name,subcategory:T.name})),k(!1);const B=new URLSearchParams(o);B.set("category",x.name),B.set("subcategory",T.name),i(`/products?${B.toString()}`,{replace:!0})},className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${h.subcategory===T.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:t==="is"?T.nameIs:T.name},T.id))]})]}),s.jsxs("div",{className:"relative",children:[m&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent"})}),d.length===0?s.jsx("div",{className:"text-center py-20",children:s.jsxs("div",{className:"max-w-md mx-auto",children:[s.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("productsPage.noProducts")}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:e("productsPage.tryAdjusting")}),s.jsx("button",{onClick:()=>P(""),className:"btn btn-outline",children:e("productsPage.clearFilters")})]})}):s.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6 transition-opacity duration-200 ${m?"opacity-60 pointer-events-none":"opacity-100"}`,children:d.map(T=>s.jsx("div",{className:"group h-full",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[s.jsx(Le,{to:`/products/${T.id}`,className:"block flex-shrink-0",children:s.jsxs("div",{className:"relative overflow-hidden bg-white dark:bg-white",children:[s.jsx(Ec,{product:T,className:"w-full h-64 object-contain transition-transform duration-300 group-hover:scale-105",currentLanguage:t}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),T.stock===0&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:e("productsPage.outOfStock")})})]})}),s.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[s.jsxs("div",{className:"mb-4 flex-1",children:[s.jsx("h3",{className:"font-bold text-xl mb-3 text-gray-900 dark:text-white line-clamp-2 leading-tight",children:Xn(t,T)}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-3",children:Dg(t,T)}),(T.volume||T.alcoholContent||T.country)&&s.jsxs("div",{className:"mt-3 space-y-1",children:[T.volume&&T.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.volume"),":"]})," ",T.volume," - ",T.alcoholContent,"%"]}),T.volume&&!T.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.volume"),":"]})," ",T.volume]}),!T.volume&&T.alcoholContent&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.abv"),":"]})," ",T.alcoholContent,"%"]}),T.country&&s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.jsxs("span",{className:"font-medium",children:[e("product.origin"),":"]})," ",VA(t,T)]})]})]}),s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[T.price.toLocaleString()," ",a]})}),So(t,T).length>0&&s.jsx("div",{className:"mt-3 mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-2",children:[So(t,T).slice(0,4).map((B,W)=>s.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full",title:B,children:rM(B)},W)),So(t,T).length>4&&s.jsxs("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full text-xs text-gray-500",children:["+",So(t,T).length-4]})]})}),s.jsxs("div",{className:"mt-auto",children:[g&&T.stock>0&&s.jsxs(Le,{to:`/products/${T.id}`,className:"btn btn-primary w-full py-3 text-sm font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),e("productsPage.addToCart")]}),!g&&s.jsxs(Le,{to:`/products/${T.id}`,className:"btn btn-outline w-full py-3 text-sm font-medium hover:shadow-md transition-all duration-200 flex items-center justify-center",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e("common.view")]})]})]})]})},T.id))})]})]})]})}),p&&s.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>k(!1)}),s.jsxs("div",{className:"absolute inset-y-0 left-0 max-w-xs w-full bg-white dark:bg-gray-800 shadow-xl p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Bo,{className:"w-5 h-5 mr-2"}),e("productsPage.filters")]}),s.jsx("button",{onClick:()=>k(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common.search")}),s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),s.jsx("input",{type:"text",placeholder:e("common.search"),value:h.search,onChange:T=>P(T.target.value),className:"input pl-10 pr-3","aria-label":e("aria.filterBy")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage.category")}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>N(null),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${!h.category||h.category===""||h.category===null?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":!h.category||h.category===""||h.category===null,children:e("productsPage.all")}),w.map(T=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>N(T),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${h.category===T.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":h.category===T.name,children:t==="is"?T.nameIs:T.name}),h.category===T.name&&T.subcategories&&T.subcategories.filter(B=>{var W;return((W=B._count)==null?void 0:W.products)>0}).length>0&&s.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[s.jsx("button",{onClick:()=>{n(Ns({subcategory:""}));const B=new URLSearchParams(o);B.set("category",T.name),B.delete("subcategory"),i(`/products?${B.toString()}`,{replace:!0}),k(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!h.subcategory||h.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage.all")}),T.subcategories.filter(B=>{var W;return((W=B._count)==null?void 0:W.products)>0}).map(B=>s.jsx("button",{onClick:()=>{n(Ns({subcategory:B.name}));const W=new URLSearchParams(o);W.set("category",T.name),W.set("subcategory",B.name),i(`/products?${W.toString()}`,{replace:!0}),k(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${h.subcategory===B.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?B.nameIs:B.name},B.id))]})]},T.id))]})]}),s.jsx("div",{className:"mb-6",children:s.jsx(wu,{min:0,max:5e4,step:100,value:[h.minPrice||0,h.maxPrice||5e4],onChange:T=>A(T[0],T[1]),label:`${e("productsPage.priceRange")} (${h.minPrice||0} - ${h.maxPrice||5e4} kr)`,formatValue:T=>`${T} kr`})}),s.jsx("div",{className:"mb-6",children:s.jsx(wu,{min:0,max:50,step:.5,value:[h.minAlcoholVolume||0,h.maxAlcoholVolume||50],onChange:T=>E(T[0],T[1]),label:`${e("productsPage.alcoholContent")} (${h.minAlcoholVolume||0} - ${h.maxAlcoholVolume||50}%)`,formatValue:T=>`${T}%`})})]})]})]})};var Ic=e=>e.type==="checkbox",Ci=e=>e instanceof Date,Fr=e=>e==null;const vS=e=>typeof e=="object";var tr=e=>!Fr(e)&&!Array.isArray(e)&&vS(e)&&!Ci(e),aM=e=>tr(e)&&e.target?Ic(e.target)?e.target.checked:e.target.value:e,nM=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,iM=(e,t)=>e.has(nM(t)),oM=e=>{const t=e.constructor&&e.constructor.prototype;return tr(t)&&t.hasOwnProperty("isPrototypeOf")},rb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function lr(e){let t;const r=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(rb&&(e instanceof Blob||a))&&(r||tr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!oM(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=lr(e[n]));else return e;return t}var Og=e=>/^\w*$/.test(e),Zt=e=>e===void 0,sb=e=>Array.isArray(e)?e.filter(Boolean):[],ab=e=>sb(e.replace(/["|']|\]/g,"").split(/\.|\[/)),De=(e,t,r)=>{if(!t||!tr(e))return r;const a=(Og(t)?[t]:ab(t)).reduce((n,i)=>Fr(n)?n:n[i],e);return Zt(a)||a===e?Zt(e[t])?r:e[t]:a},ga=e=>typeof e=="boolean",Et=(e,t,r)=>{let a=-1;const n=Og(t)?[t]:ab(t),i=n.length,o=i-1;for(;++a<i;){const d=n[a];let c=r;if(a!==o){const h=e[d];c=tr(h)||Array.isArray(h)?h:isNaN(+n[a+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=c,e=e[d]}};const Aw={BLUR:"blur",FOCUS_OUT:"focusout"},Js={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$a={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},lM=Tt.createContext(null);lM.displayName="HookFormContext";var dM=(e,t,r,a=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Js.all&&(t._proxyFormState[o]=!a||Js.all),e[o]}});return n};const cM=typeof window<"u"?Tt.useLayoutEffect:Tt.useEffect;var ls=e=>typeof e=="string",uM=(e,t,r,a,n)=>ls(e)?(a&&t.watch.add(e),De(r,e,n)):Array.isArray(e)?e.map(i=>(a&&t.watch.add(i),De(r,i))):(a&&(t.watchAll=!0),r),ox=e=>Fr(e)||!vS(e);function Nn(e,t,r=new WeakSet){if(ox(e)||ox(t))return e===t;if(Ci(e)&&Ci(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of a){const o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const d=t[i];if(Ci(o)&&Ci(d)||tr(o)&&tr(d)||Array.isArray(o)&&Array.isArray(d)?!Nn(o,d,r):o!==d)return!1}}return!0}var hM=(e,t,r,a,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:n||!0}}:{},kd=e=>Array.isArray(e)?e:[e],Mw=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}};function kS(e,t){const r={};for(const a in e)if(e.hasOwnProperty(a)){const n=e[a],i=t[a];if(n&&tr(n)&&i){const o=kS(n,i);tr(o)&&(r[a]=o)}else e[a]&&(r[a]=i)}return r}var qr=e=>tr(e)&&!Object.keys(e).length,nb=e=>e.type==="file",Xs=e=>typeof e=="function",Pm=e=>{if(!rb)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},wS=e=>e.type==="select-multiple",ib=e=>e.type==="radio",mM=e=>ib(e)||Ic(e),mf=e=>Pm(e)&&e.isConnected;function gM(e,t){const r=t.slice(0,-1).length;let a=0;for(;a<r;)e=Zt(e)?a++:e[t[a++]];return e}function fM(e){for(const t in e)if(e.hasOwnProperty(t)&&!Zt(e[t]))return!1;return!0}function Gt(e,t){const r=Array.isArray(t)?t:Og(t)?[t]:ab(t),a=r.length===1?e:gM(e,r),n=r.length-1,i=r[n];return a&&delete a[i],n!==0&&(tr(a)&&qr(a)||Array.isArray(a)&&fM(a))&&Gt(e,r.slice(0,-1)),e}var pM=e=>{for(const t in e)if(Xs(e[t]))return!0;return!1};function jS(e){return Array.isArray(e)||tr(e)&&!pM(e)}function lx(e,t={}){for(const r in e)jS(e[r])?(t[r]=Array.isArray(e[r])?[]:{},lx(e[r],t[r])):Fr(e[r])||(t[r]=!0);return t}function mo(e,t,r){r||(r=lx(t));for(const a in e)jS(e[a])?Zt(t)||ox(r[a])?r[a]=lx(e[a],Array.isArray(e[a])?[]:{}):mo(e[a],Fr(t)?{}:t[a],r[a]):r[a]=!Nn(e[a],t[a]);return r}const Rw={value:!1,isValid:!1},Dw={value:!0,isValid:!0};var NS=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Zt(e[0].attributes.value)?Zt(e[0].value)||e[0].value===""?Dw:{value:e[0].value,isValid:!0}:Dw:Rw}return Rw},_S=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>Zt(e)?e:t?e===""?NaN:e&&+e:r&&ls(e)?new Date(e):a?a(e):e;const Ow={isValid:!1,value:null};var SS=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Ow):Ow;function Fw(e){const t=e.ref;return nb(t)?t.files:ib(t)?SS(e.refs).value:wS(t)?[...t.selectedOptions].map(({value:r})=>r):Ic(t)?NS(e.refs).value:_S(Zt(t.value)?e.ref.value:t.value,e)}var xM=(e,t,r,a)=>{const n={};for(const i of e){const o=De(t,i);o&&Et(n,i,o._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:a}},Em=e=>e instanceof RegExp,Fl=e=>Zt(e)?e:Em(e)?e.source:tr(e)?Em(e.value)?e.value.source:e.value:e,Bw=e=>({isOnSubmit:!e||e===Js.onSubmit,isOnBlur:e===Js.onBlur,isOnChange:e===Js.onChange,isOnAll:e===Js.all,isOnTouch:e===Js.onTouched});const zw="AsyncFunction";var yM=e=>!!e&&!!e.validate&&!!(Xs(e.validate)&&e.validate.constructor.name===zw||tr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===zw)),bM=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),$w=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const wd=(e,t,r,a)=>{for(const n of r||Object.keys(e)){const i=De(e,n);if(i){const{_f:o,...d}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!a)return!0;if(o.ref&&t(o.ref,o.name)&&!a)return!0;if(wd(d,t))break}else if(tr(d)&&wd(d,t))break}}};function Uw(e,t,r){const a=De(e,r);if(a||Og(r))return{error:a,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),o=De(t,i),d=De(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(d&&d.type)return{name:i,error:d};if(d&&d.root&&d.root.type)return{name:`${i}.root`,error:d.root};n.pop()}return{name:r}}var vM=(e,t,r,a)=>{r(e);const{name:n,...i}=e;return qr(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!a||Js.all))},kM=(e,t,r)=>!e||!t||e===t||kd(e).some(a=>a&&(r?a===t:a.startsWith(t)||t.startsWith(a))),wM=(e,t,r,a,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?a.isOnBlur:n.isOnBlur)?!e:(r?a.isOnChange:n.isOnChange)?e:!0,jM=(e,t)=>!sb(De(e,t)).length&&Gt(e,t),NM=(e,t,r)=>{const a=kd(De(e,r));return Et(a,"root",t[r]),Et(e,r,a),e};function Vw(e,t,r="validate"){if(ls(e)||Array.isArray(e)&&e.every(ls)||ga(e)&&!e)return{type:r,message:ls(e)?e:"",ref:t}}var lo=e=>tr(e)&&!Em(e)?e:{value:e,message:""},Hw=async(e,t,r,a,n,i)=>{const{ref:o,refs:d,required:c,maxLength:h,minLength:m,min:g,max:p,pattern:k,validate:x,name:j,valueAsNumber:y,mount:b}=e._f,w=De(r,j);if(!b||t.has(j))return{};const N=d?d[0]:o,P=R=>{n&&N.reportValidity&&(N.setCustomValidity(ga(R)?"":R||""),N.reportValidity())},C={},A=ib(o),E=Ic(o),F=A||E,I=(y||nb(o))&&Zt(o.value)&&Zt(w)||Pm(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,D=hM.bind(null,j,a,C),Y=(R,Z,T,B=$a.maxLength,W=$a.minLength)=>{const Q=R?Z:T;C[j]={type:R?B:W,message:Q,ref:o,...D(R?B:W,Q)}};if(i?!Array.isArray(w)||!w.length:c&&(!F&&(I||Fr(w))||ga(w)&&!w||E&&!NS(d).isValid||A&&!SS(d).isValid)){const{value:R,message:Z}=ls(c)?{value:!!c,message:c}:lo(c);if(R&&(C[j]={type:$a.required,message:Z,ref:N,...D($a.required,Z)},!a))return P(Z),C}if(!I&&(!Fr(g)||!Fr(p))){let R,Z;const T=lo(p),B=lo(g);if(!Fr(w)&&!isNaN(w)){const W=o.valueAsNumber||w&&+w;Fr(T.value)||(R=W>T.value),Fr(B.value)||(Z=W<B.value)}else{const W=o.valueAsDate||new Date(w),Q=K=>new Date(new Date().toDateString()+" "+K),$=o.type=="time",O=o.type=="week";ls(T.value)&&w&&(R=$?Q(w)>Q(T.value):O?w>T.value:W>new Date(T.value)),ls(B.value)&&w&&(Z=$?Q(w)<Q(B.value):O?w<B.value:W<new Date(B.value))}if((R||Z)&&(Y(!!R,T.message,B.message,$a.max,$a.min),!a))return P(C[j].message),C}if((h||m)&&!I&&(ls(w)||i&&Array.isArray(w))){const R=lo(h),Z=lo(m),T=!Fr(R.value)&&w.length>+R.value,B=!Fr(Z.value)&&w.length<+Z.value;if((T||B)&&(Y(T,R.message,Z.message),!a))return P(C[j].message),C}if(k&&!I&&ls(w)){const{value:R,message:Z}=lo(k);if(Em(R)&&!w.match(R)&&(C[j]={type:$a.pattern,message:Z,ref:o,...D($a.pattern,Z)},!a))return P(Z),C}if(x){if(Xs(x)){const R=await x(w,r),Z=Vw(R,N);if(Z&&(C[j]={...Z,...D($a.validate,Z.message)},!a))return P(Z.message),C}else if(tr(x)){let R={};for(const Z in x){if(!qr(R)&&!a)break;const T=Vw(await x[Z](w,r),N,Z);T&&(R={...T,...D(Z,T.message)},P(T.message),a&&(C[j]=R))}if(!qr(R)&&(C[j]={ref:N,...R},!a))return C}}return P(!0),C};const _M={mode:Js.onSubmit,reValidateMode:Js.onChange,shouldFocusError:!0};function SM(e={}){let t={..._M,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Xs(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},a={},n=tr(t.defaultValues)||tr(t.values)?lr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:lr(n),o={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,h=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...m};const p={array:Mw(),state:Mw()},k=t.criteriaMode===Js.all,x=H=>ee=>{clearTimeout(h),h=setTimeout(H,ee)},j=async H=>{if(!t.disabled&&(m.isValid||g.isValid||H)){const ee=t.resolver?qr((await E()).errors):await I(a,!0);ee!==r.isValid&&p.state.next({isValid:ee})}},y=(H,ee)=>{!t.disabled&&(m.isValidating||m.validatingFields||g.isValidating||g.validatingFields)&&((H||Array.from(d.mount)).forEach(ae=>{ae&&(ee?Et(r.validatingFields,ae,ee):Gt(r.validatingFields,ae))}),p.state.next({validatingFields:r.validatingFields,isValidating:!qr(r.validatingFields)}))},b=(H,ee=[],ae,ve,be=!0,J=!0)=>{if(ve&&ae&&!t.disabled){if(o.action=!0,J&&Array.isArray(De(a,H))){const he=ae(De(a,H),ve.argA,ve.argB);be&&Et(a,H,he)}if(J&&Array.isArray(De(r.errors,H))){const he=ae(De(r.errors,H),ve.argA,ve.argB);be&&Et(r.errors,H,he),jM(r.errors,H)}if((m.touchedFields||g.touchedFields)&&J&&Array.isArray(De(r.touchedFields,H))){const he=ae(De(r.touchedFields,H),ve.argA,ve.argB);be&&Et(r.touchedFields,H,he)}(m.dirtyFields||g.dirtyFields)&&(r.dirtyFields=mo(n,i)),p.state.next({name:H,isDirty:Y(H,ee),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Et(i,H,ee)},w=(H,ee)=>{Et(r.errors,H,ee),p.state.next({errors:r.errors})},N=H=>{r.errors=H,p.state.next({errors:r.errors,isValid:!1})},P=(H,ee,ae,ve)=>{const be=De(a,H);if(be){const J=De(i,H,Zt(ae)?De(n,H):ae);Zt(J)||ve&&ve.defaultChecked||ee?Et(i,H,ee?J:Fw(be._f)):T(H,J),o.mount&&j()}},C=(H,ee,ae,ve,be)=>{let J=!1,he=!1;const Ee={name:H};if(!t.disabled){if(!ae||ve){(m.isDirty||g.isDirty)&&(he=r.isDirty,r.isDirty=Ee.isDirty=Y(),J=he!==Ee.isDirty);const re=Nn(De(n,H),ee);he=!!De(r.dirtyFields,H),re?Gt(r.dirtyFields,H):Et(r.dirtyFields,H,!0),Ee.dirtyFields=r.dirtyFields,J=J||(m.dirtyFields||g.dirtyFields)&&he!==!re}if(ae){const re=De(r.touchedFields,H);re||(Et(r.touchedFields,H,ae),Ee.touchedFields=r.touchedFields,J=J||(m.touchedFields||g.touchedFields)&&re!==ae)}J&&be&&p.state.next(Ee)}return J?Ee:{}},A=(H,ee,ae,ve)=>{const be=De(r.errors,H),J=(m.isValid||g.isValid)&&ga(ee)&&r.isValid!==ee;if(t.delayError&&ae?(c=x(()=>w(H,ae)),c(t.delayError)):(clearTimeout(h),c=null,ae?Et(r.errors,H,ae):Gt(r.errors,H)),(ae?!Nn(be,ae):be)||!qr(ve)||J){const he={...ve,...J&&ga(ee)?{isValid:ee}:{},errors:r.errors,name:H};r={...r,...he},p.state.next(he)}},E=async H=>{y(H,!0);const ee=await t.resolver(i,t.context,xM(H||d.mount,a,t.criteriaMode,t.shouldUseNativeValidation));return y(H),ee},F=async H=>{const{errors:ee}=await E(H);if(H)for(const ae of H){const ve=De(ee,ae);ve?Et(r.errors,ae,ve):Gt(r.errors,ae)}else r.errors=ee;return ee},I=async(H,ee,ae={valid:!0})=>{for(const ve in H){const be=H[ve];if(be){const{_f:J,...he}=be;if(J){const Ee=d.array.has(J.name),re=be._f&&yM(be._f);re&&m.validatingFields&&y([J.name],!0);const Re=await Hw(be,d.disabled,i,k,t.shouldUseNativeValidation&&!ee,Ee);if(re&&m.validatingFields&&y([J.name]),Re[J.name]&&(ae.valid=!1,ee))break;!ee&&(De(Re,J.name)?Ee?NM(r.errors,Re,J.name):Et(r.errors,J.name,Re[J.name]):Gt(r.errors,J.name))}!qr(he)&&await I(he,ee,ae)}}return ae.valid},D=()=>{for(const H of d.unMount){const ee=De(a,H);ee&&(ee._f.refs?ee._f.refs.every(ae=>!mf(ae)):!mf(ee._f.ref))&&Oe(H)}d.unMount=new Set},Y=(H,ee)=>!t.disabled&&(H&&ee&&Et(i,H,ee),!Nn(K(),n)),R=(H,ee,ae)=>uM(H,d,{...o.mount?i:Zt(ee)?n:ls(H)?{[H]:ee}:ee},ae,ee),Z=H=>sb(De(o.mount?i:n,H,t.shouldUnregister?De(n,H,[]):[])),T=(H,ee,ae={})=>{const ve=De(a,H);let be=ee;if(ve){const J=ve._f;J&&(!J.disabled&&Et(i,H,_S(ee,J)),be=Pm(J.ref)&&Fr(ee)?"":ee,wS(J.ref)?[...J.ref.options].forEach(he=>he.selected=be.includes(he.value)):J.refs?Ic(J.ref)?J.refs.forEach(he=>{(!he.defaultChecked||!he.disabled)&&(Array.isArray(be)?he.checked=!!be.find(Ee=>Ee===he.value):he.checked=be===he.value||!!be)}):J.refs.forEach(he=>he.checked=he.value===be):nb(J.ref)?J.ref.value="":(J.ref.value=be,J.ref.type||p.state.next({name:H,values:lr(i)})))}(ae.shouldDirty||ae.shouldTouch)&&C(H,be,ae.shouldTouch,ae.shouldDirty,!0),ae.shouldValidate&&O(H)},B=(H,ee,ae)=>{for(const ve in ee){if(!ee.hasOwnProperty(ve))return;const be=ee[ve],J=H+"."+ve,he=De(a,J);(d.array.has(H)||tr(be)||he&&!he._f)&&!Ci(be)?B(J,be,ae):T(J,be,ae)}},W=(H,ee,ae={})=>{const ve=De(a,H),be=d.array.has(H),J=lr(ee);Et(i,H,J),be?(p.array.next({name:H,values:lr(i)}),(m.isDirty||m.dirtyFields||g.isDirty||g.dirtyFields)&&ae.shouldDirty&&p.state.next({name:H,dirtyFields:mo(n,i),isDirty:Y(H,J)})):ve&&!ve._f&&!Fr(J)?B(H,J,ae):T(H,J,ae),$w(H,d)&&p.state.next({...r,name:H}),p.state.next({name:o.mount?H:void 0,values:lr(i)})},Q=async H=>{o.mount=!0;const ee=H.target;let ae=ee.name,ve=!0;const be=De(a,ae),J=re=>{ve=Number.isNaN(re)||Ci(re)&&isNaN(re.getTime())||Nn(re,De(i,ae,re))},he=Bw(t.mode),Ee=Bw(t.reValidateMode);if(be){let re,Re;const tt=ee.type?Fw(be._f):aM(H),wt=H.type===Aw.BLUR||H.type===Aw.FOCUS_OUT,rs=!bM(be._f)&&!t.resolver&&!De(r.errors,ae)&&!be._f.deps||wM(wt,De(r.touchedFields,ae),r.isSubmitted,Ee,he),Ra=$w(ae,d,wt);Et(i,ae,tt),wt?(!ee||!ee.readOnly)&&(be._f.onBlur&&be._f.onBlur(H),c&&c(0)):be._f.onChange&&be._f.onChange(H);const ss=C(ae,tt,wt),cn=!qr(ss)||Ra;if(!wt&&p.state.next({name:ae,type:H.type,values:lr(i)}),rs)return(m.isValid||g.isValid)&&(t.mode==="onBlur"?wt&&j():wt||j()),cn&&p.state.next({name:ae,...Ra?{}:ss});if(!wt&&Ra&&p.state.next({...r}),t.resolver){const{errors:ii}=await E([ae]);if(J(tt),ve){const bs=Uw(r.errors,a,ae),as=Uw(ii,a,bs.name||ae);re=as.error,ae=as.name,Re=qr(ii)}}else y([ae],!0),re=(await Hw(be,d.disabled,i,k,t.shouldUseNativeValidation))[ae],y([ae]),J(tt),ve&&(re?Re=!1:(m.isValid||g.isValid)&&(Re=await I(a,!0)));ve&&(be._f.deps&&(!Array.isArray(be._f.deps)||be._f.deps.length>0)&&O(be._f.deps),A(ae,Re,re,ss))}},$=(H,ee)=>{if(De(r.errors,ee)&&H.focus)return H.focus(),1},O=async(H,ee={})=>{let ae,ve;const be=kd(H);if(t.resolver){const J=await F(Zt(H)?H:be);ae=qr(J),ve=H?!be.some(he=>De(J,he)):ae}else H?(ve=(await Promise.all(be.map(async J=>{const he=De(a,J);return await I(he&&he._f?{[J]:he}:he)}))).every(Boolean),!(!ve&&!r.isValid)&&j()):ve=ae=await I(a);return p.state.next({...!ls(H)||(m.isValid||g.isValid)&&ae!==r.isValid?{}:{name:H},...t.resolver||!H?{isValid:ae}:{},errors:r.errors}),ee.shouldFocus&&!ve&&wd(a,$,H?be:d.mount),ve},K=(H,ee)=>{let ae={...o.mount?i:n};return ee&&(ae=kS(ee.dirtyFields?r.dirtyFields:r.touchedFields,ae)),Zt(H)?ae:ls(H)?De(ae,H):H.map(ve=>De(ae,ve))},V=(H,ee)=>({invalid:!!De((ee||r).errors,H),isDirty:!!De((ee||r).dirtyFields,H),error:De((ee||r).errors,H),isValidating:!!De(r.validatingFields,H),isTouched:!!De((ee||r).touchedFields,H)}),X=H=>{H&&kd(H).forEach(ee=>Gt(r.errors,ee)),p.state.next({errors:H?r.errors:{}})},le=(H,ee,ae)=>{const ve=(De(a,H,{_f:{}})._f||{}).ref,be=De(r.errors,H)||{},{ref:J,message:he,type:Ee,...re}=be;Et(r.errors,H,{...re,...ee,ref:ve}),p.state.next({name:H,errors:r.errors,isValid:!1}),ae&&ae.shouldFocus&&ve&&ve.focus&&ve.focus()},ge=(H,ee)=>Xs(H)?p.state.subscribe({next:ae=>"values"in ae&&H(R(void 0,ee),ae)}):R(H,ee,!0),ne=H=>p.state.subscribe({next:ee=>{kM(H.name,ee.name,H.exact)&&vM(ee,H.formState||m,Pe,H.reRenderRoot)&&H.callback({values:{...i},...r,...ee,defaultValues:n})}}).unsubscribe,pe=H=>(o.mount=!0,g={...g,...H.formState},ne({...H,formState:g})),Oe=(H,ee={})=>{for(const ae of H?kd(H):d.mount)d.mount.delete(ae),d.array.delete(ae),ee.keepValue||(Gt(a,ae),Gt(i,ae)),!ee.keepError&&Gt(r.errors,ae),!ee.keepDirty&&Gt(r.dirtyFields,ae),!ee.keepTouched&&Gt(r.touchedFields,ae),!ee.keepIsValidating&&Gt(r.validatingFields,ae),!t.shouldUnregister&&!ee.keepDefaultValue&&Gt(n,ae);p.state.next({values:lr(i)}),p.state.next({...r,...ee.keepDirty?{isDirty:Y()}:{}}),!ee.keepIsValid&&j()},ue=({disabled:H,name:ee})=>{(ga(H)&&o.mount||H||d.disabled.has(ee))&&(H?d.disabled.add(ee):d.disabled.delete(ee))},Me=(H,ee={})=>{let ae=De(a,H);const ve=ga(ee.disabled)||ga(t.disabled);return Et(a,H,{...ae||{},_f:{...ae&&ae._f?ae._f:{ref:{name:H}},name:H,mount:!0,...ee}}),d.mount.add(H),ae?ue({disabled:ga(ee.disabled)?ee.disabled:t.disabled,name:H}):P(H,!0,ee.value),{...ve?{disabled:ee.disabled||t.disabled}:{},...t.progressive?{required:!!ee.required,min:Fl(ee.min),max:Fl(ee.max),minLength:Fl(ee.minLength),maxLength:Fl(ee.maxLength),pattern:Fl(ee.pattern)}:{},name:H,onChange:Q,onBlur:Q,ref:be=>{if(be){Me(H,ee),ae=De(a,H);const J=Zt(be.value)&&be.querySelectorAll&&be.querySelectorAll("input,select,textarea")[0]||be,he=mM(J),Ee=ae._f.refs||[];if(he?Ee.find(re=>re===J):J===ae._f.ref)return;Et(a,H,{_f:{...ae._f,...he?{refs:[...Ee.filter(mf),J,...Array.isArray(De(n,H))?[{}]:[]],ref:{type:J.type,name:H}}:{ref:J}}}),P(H,!1,void 0,J)}else ae=De(a,H,{}),ae._f&&(ae._f.mount=!1),(t.shouldUnregister||ee.shouldUnregister)&&!(iM(d.array,H)&&o.action)&&d.unMount.add(H)}}},et=()=>t.shouldFocusError&&wd(a,$,d.mount),Ze=H=>{ga(H)&&(p.state.next({disabled:H}),wd(a,(ee,ae)=>{const ve=De(a,ae);ve&&(ee.disabled=ve._f.disabled||H,Array.isArray(ve._f.refs)&&ve._f.refs.forEach(be=>{be.disabled=ve._f.disabled||H}))},0,!1))},z=(H,ee)=>async ae=>{let ve;ae&&(ae.preventDefault&&ae.preventDefault(),ae.persist&&ae.persist());let be=lr(i);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:J,values:he}=await E();r.errors=J,be=lr(he)}else await I(a);if(d.disabled.size)for(const J of d.disabled)Gt(be,J);if(Gt(r.errors,"root"),qr(r.errors)){p.state.next({errors:{}});try{await H(be,ae)}catch(J){ve=J}}else ee&&await ee({...r.errors},ae),et(),setTimeout(et);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:qr(r.errors)&&!ve,submitCount:r.submitCount+1,errors:r.errors}),ve)throw ve},we=(H,ee={})=>{De(a,H)&&(Zt(ee.defaultValue)?W(H,lr(De(n,H))):(W(H,ee.defaultValue),Et(n,H,lr(ee.defaultValue))),ee.keepTouched||Gt(r.touchedFields,H),ee.keepDirty||(Gt(r.dirtyFields,H),r.isDirty=ee.defaultValue?Y(H,lr(De(n,H))):Y()),ee.keepError||(Gt(r.errors,H),m.isValid&&j()),p.state.next({...r}))},Ie=(H,ee={})=>{const ae=H?lr(H):n,ve=lr(ae),be=qr(H),J=be?n:ve;if(ee.keepDefaultValues||(n=ae),!ee.keepValues){if(ee.keepDirtyValues){const he=new Set([...d.mount,...Object.keys(mo(n,i))]);for(const Ee of Array.from(he))De(r.dirtyFields,Ee)?Et(J,Ee,De(i,Ee)):W(Ee,De(J,Ee))}else{if(rb&&Zt(H))for(const he of d.mount){const Ee=De(a,he);if(Ee&&Ee._f){const re=Array.isArray(Ee._f.refs)?Ee._f.refs[0]:Ee._f.ref;if(Pm(re)){const Re=re.closest("form");if(Re){Re.reset();break}}}}if(ee.keepFieldsRef)for(const he of d.mount)W(he,De(J,he));else a={}}i=t.shouldUnregister?ee.keepDefaultValues?lr(n):{}:lr(J),p.array.next({values:{...J}}),p.state.next({values:{...J}})}d={mount:ee.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!ee.keepIsValid||!!ee.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:ee.keepSubmitCount?r.submitCount:0,isDirty:be?!1:ee.keepDirty?r.isDirty:!!(ee.keepDefaultValues&&!Nn(H,n)),isSubmitted:ee.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:be?{}:ee.keepDirtyValues?ee.keepDefaultValues&&i?mo(n,i):r.dirtyFields:ee.keepDefaultValues&&H?mo(n,H):ee.keepDirty?r.dirtyFields:{},touchedFields:ee.keepTouched?r.touchedFields:{},errors:ee.keepErrors?r.errors:{},isSubmitSuccessful:ee.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Fe=(H,ee)=>Ie(Xs(H)?H(i):H,ee),se=(H,ee={})=>{const ae=De(a,H),ve=ae&&ae._f;if(ve){const be=ve.refs?ve.refs[0]:ve.ref;be.focus&&(be.focus(),ee.shouldSelect&&Xs(be.select)&&be.select())}},Pe=H=>{r={...r,...H}},_e={control:{register:Me,unregister:Oe,getFieldState:V,handleSubmit:z,setError:le,_subscribe:ne,_runSchema:E,_focusError:et,_getWatch:R,_getDirty:Y,_setValid:j,_setFieldArray:b,_setDisabledField:ue,_setErrors:N,_getFieldArray:Z,_reset:Ie,_resetDefaultValues:()=>Xs(t.defaultValues)&&t.defaultValues().then(H=>{Fe(H,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:D,_disableForm:Ze,_subjects:p,_proxyFormState:m,get _fields(){return a},get _formValues(){return i},get _state(){return o},set _state(H){o=H},get _defaultValues(){return n},get _names(){return d},set _names(H){d=H},get _formState(){return r},get _options(){return t},set _options(H){t={...t,...H}}},subscribe:pe,trigger:O,register:Me,handleSubmit:z,watch:ge,setValue:W,getValues:K,reset:Fe,resetField:we,clearErrors:X,unregister:Oe,setError:le,setFocus:se,getFieldState:V};return{..._e,formControl:_e}}function Ki(e={}){const t=Tt.useRef(void 0),r=Tt.useRef(void 0),[a,n]=Tt.useState({isDirty:!1,isValidating:!1,isLoading:Xs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Xs(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:a},e.defaultValues&&!Xs(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...d}=SM(e);t.current={...d,formState:a}}const i=t.current.control;return i._options=e,cM(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(d=>({...d,isReady:!0})),i._formState.isReady=!0,o},[i]),Tt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Tt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Tt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Tt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Tt.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==a.isDirty&&i._subjects.state.next({isDirty:o})}},[i,a.isDirty]),Tt.useEffect(()=>{e.values&&!Nn(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,n(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),Tt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=dM(a,i),t.current}const CM=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?s.jsx(_m,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("beef")||t.includes("nautakjt")?s.jsx(Cm,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("lamb")||t.includes("lambakjt")?s.jsx(xa,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pork")||t.includes("svnakjt")?s.jsx(pS,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("fowl")||t.includes("fuglakjt")||t.includes("poultry")?s.jsx(xa,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("cheese")||t.includes("ostur")?s.jsx(fS,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("vegetable")||t.includes("grnmeti")?s.jsx(gS,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("dessert")||t.includes("eftirrttur")?s.jsx(mS,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("seafood")||t.includes("sjvarfiskur")?s.jsx(_m,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pasta")||t.includes("pasta")?s.jsx(Sm,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pizza")||t.includes("pizza")?s.jsx(yS,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("salad")||t.includes("salat")?s.jsx(xS,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("meat")||t.includes("kjt")?s.jsx(Cm,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("chicken")||t.includes("kjklingur")?s.jsx(xa,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("duck")||t.includes("nd")?s.jsx(xa,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("turkey")||t.includes("kalknn")?s.jsx(xa,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):s.jsx(Sm,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})},PM=()=>{var Oe;const{t:e,currentLanguage:t}=je(),{currencySymbol:r}=tb(),{id:a}=$2(),n=xs(),i=ut(),{currentProduct:o,isLoading:d,error:c}=Se(ue=>ue.products),{user:h,isAuthenticated:m}=Se(ue=>ue.auth),{isLoading:g}=Se(ue=>ue.cart),[p,k]=_.useState(1),[x,j]=_.useState(!1),[y,b]=_.useState(!1),[w,N]=_.useState(!1),[P,C]=_.useState(!1),[A,E]=_.useState([]),[F,I]=_.useState([]),[D,Y]=_.useState({intervalType:"WEEKLY",intervalValue:1,preferredDay:"",preferredTime:"15:00",quantity:1}),R="olfong_age_verified",Z=()=>{try{const ue=localStorage.getItem(R);if(!ue)return!1;const{confirmed:Me}=JSON.parse(ue);return Me}catch(ue){return console.error("Error checking age verification:",ue),!1}},T=ue=>{try{const Me={confirmed:ue};localStorage.setItem(R,JSON.stringify(Me))}catch(Me){console.error("Error storing age verification:",Me)}},{register:B,handleSubmit:W,formState:{errors:Q},reset:$,setValue:O}=Ki({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:"",volume:"",volumeIs:"",alcoholContent:"",country:"",countryIs:"",region:"",regionIs:"",origin:"",originIs:"",producer:"",producerIs:"",distributor:"",distributorIs:"",packaging:"",packagingIs:"",packagingWeight:"",packagingWeightIs:"",carbonFootprint:"",carbonFootprintIs:"",vintage:"",grapeVariety:"",grapeVarietyIs:"",wineStyle:"",wineStyleIs:"",pricePerLiter:"",pricePerLiterIs:"",foodPairings:[],foodPairingsIs:[],specialAttributes:[],specialAttributesIs:[],certifications:[],certificationsIs:[],availability:"available",availabilityIs:"Til rstfunar",atvrProductId:"",atvrUrl:"",atvrImageUrl:""}});_.useEffect(()=>(a&&i(ph(a)),()=>{i(jA())}),[i,a]),_.useEffect(()=>{o&&o.category.name==="NICOTINE"&&h&&h.age<18&&(Z()?b(!0):j(!0))},[o,h]),_.useEffect(()=>{o&&P&&(O("name",o.name),O("nameIs",o.nameIs||""),O("description",o.description||""),O("descriptionIs",o.descriptionIs||""),O("price",o.price),O("stock",o.stock),O("category",o.category.name),O("subcategory",o.subcategory||""),O("isAgeRestricted",o.ageRestriction>18),O("imageUrl",o.imageUrl||""),O("hasDiscount",o.hasDiscount||!1),O("originalPrice",o.originalPrice||0),O("discountPercentage",o.discountPercentage||0),O("discountStartDate",o.discountStartDate?o.discountStartDate.split("T")[0]:""),O("discountEndDate",o.discountEndDate?o.discountEndDate.split("T")[0]:""),O("discountReason",o.discountReason||""),O("discountReasonIs",o.discountReasonIs||""),O("volume",o.volume||""),O("volumeIs",o.volumeIs||""),O("alcoholContent",o.alcoholContent||""),O("country",o.country||""),O("countryIs",o.countryIs||""),O("region",o.region||""),O("regionIs",o.regionIs||""),O("origin",o.origin||""),O("originIs",o.originIs||""),O("producer",o.producer||""),O("producerIs",o.producerIs||""),O("distributor",o.distributor||""),O("distributorIs",o.distributorIs||""),O("packaging",o.packaging||""),O("packagingIs",o.packagingIs||""),O("packagingWeight",o.packagingWeight||""),O("packagingWeightIs",o.packagingWeightIs||""),O("carbonFootprint",o.carbonFootprint||""),O("carbonFootprintIs",o.carbonFootprintIs||""),O("vintage",o.vintage||""),O("grapeVariety",o.grapeVariety||""),O("grapeVarietyIs",o.grapeVarietyIs||""),O("wineStyle",o.wineStyle||""),O("wineStyleIs",o.wineStyleIs||""),O("pricePerLiter",o.pricePerLiter||""),O("pricePerLiterIs",o.pricePerLiterIs||""),O("foodPairings",o.foodPairings||[]),O("foodPairingsIs",o.foodPairingsIs||[]),O("specialAttributes",o.specialAttributes||[]),O("specialAttributesIs",o.specialAttributesIs||[]),O("certifications",o.certifications||[]),O("certificationsIs",o.certificationsIs||[]),O("availability",o.availability||"available"),O("availabilityIs",o.availabilityIs||"Til rstfunar"),O("atvrProductId",o.atvrProductId||""),O("atvrUrl",o.atvrUrl||""),O("atvrImageUrl",o.atvrImageUrl||""),E([]),I([]))},[o,P,O]);const K=ue=>{const Me=Array.from(ue.target.files),et=[...A,...Me];E(et);const Ze=Me.map(z=>URL.createObjectURL(z));I(z=>[...z,...Ze])},V=ue=>{const Me=A.filter((Ze,z)=>z!==ue),et=F.filter((Ze,z)=>z!==ue);E(Me),I(et)},X=async ue=>{try{const{category:Me,...et}=ue,Ze=new FormData;Object.keys(et).forEach(z=>{z==="foodPairings"||z==="foodPairingsIs"||z==="specialAttributes"||z==="specialAttributesIs"||z==="certifications"||z==="certificationsIs"||z==="subcategories"?Ze.append(z,JSON.stringify(et[z]||[])):Ze.append(z,et[z]||"")}),Ze.append("categoryId",o.categoryId),Ze.append("ageRestriction",ue.isAgeRestricted?20:18),A.forEach(z=>{Ze.append("images",z)}),await i(fd({id:o.id,productData:Ze})).unwrap(),q.success(e("common.success")),C(!1),$(),E([]),I([])}catch(Me){console.error("Error updating product:",Me),q.error(Me.message||e("common.error"))}},le=async()=>{if(!m){q.error(e("auth.loginRequired")),n("/login");return}if(o.category.name==="NICOTINE"&&h.age<18&&!y){j(!0);return}try{await i(Mi({productId:o.id,quantity:p})).unwrap()}catch(ue){console.error("Failed to add to cart:",ue)}},ge=()=>{o&&p<o.stock&&k(p+1)},ne=()=>{p>1&&k(p-1)},pe=()=>{b(!0),j(!1),T(!0)};return d?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(pt,{size:"large"})}):c||!o?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:[e("products.title")," ",e("orderDetailPage.orderNotFound")]}),s.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage.orderNotFoundDesc")}),s.jsx(Le,{to:"/products",className:"btn btn-primary",children:e("common.back")})]})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("button",{onClick:()=>n(-1),className:"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors duration-200",children:[s.jsx(Bs,{className:"w-5 h-5 mr-2"}),e("productDetailPage.back")]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsx("div",{className:"space-y-4",children:o.imageUrl?s.jsx("div",{className:"bg-white dark:bg-white rounded-lg p-4 shadow-lg",children:s.jsx("img",{src:o.imageUrl.startsWith("http")?o.imageUrl:`https://olfong.olibuijr.com${o.imageUrl}`,alt:Xn(t,o),className:"w-full h-96 object-contain rounded-lg"})}):s.jsx("div",{className:"w-full h-96 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-lg",children:e("cartPage.noImage")})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:Xn(t,o)}),(h==null?void 0:h.role)==="ADMIN"&&s.jsxs("button",{onClick:()=>C(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(La,{className:"w-4 h-4 mr-2"}),e("common.edit")]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsxs("span",{className:"text-3xl font-bold text-primary-600",children:[o.price.toLocaleString()," ",r]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:e(`navigation.${o.category.name.toLowerCase()}`)}),o.subcategory&&s.jsx("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 rounded-full text-sm font-medium",children:o.subcategory})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("productDetailPage.description")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:Dg(t,o)||e("productDetailPage.noDescription")})]}),((Oe=o.category)==null?void 0:Oe.vatProfile)&&(()=>{const ue=o.category.vatProfile.vatRate,Me=o.price,et=Me/(1+ue/100),Ze=Me-et;return s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("productDetailPage.vatInformation")||"VAT Information"}),s.jsxs("dl",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("dt",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage.vatProfile")||"VAT Profile",":"]}),s.jsx("dd",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:t==="is"&&o.category.vatProfile.nameIs?o.category.vatProfile.nameIs:o.category.vatProfile.name})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("dt",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage.vatRate")||"VAT Rate",":"]}),s.jsxs("dd",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[ue,"%"]})]}),s.jsxs("div",{className:"border-t border-blue-200 dark:border-blue-800 pt-3 mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("dt",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage.priceBeforeVat")||"Price before VAT",":"]}),s.jsxs("dd",{className:"text-sm text-gray-900 dark:text-white",children:[et.toLocaleString("is-IS",{maximumFractionDigits:2,minimumFractionDigits:2})," ",r]})]}),s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("dt",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage.vatAmount")||"VAT Amount",":"]}),s.jsxs("dd",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:[Ze.toLocaleString("is-IS",{maximumFractionDigits:2,minimumFractionDigits:2})," ",r]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-blue-100 dark:border-blue-900",children:[s.jsxs("dt",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:[e("productDetailPage.totalPrice")||"Total Price (incl. VAT)",":"]}),s.jsxs("dd",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:[Me.toLocaleString("is-IS",{maximumFractionDigits:2,minimumFractionDigits:2})," ",r]})]})]}),o.category.vatProfile.description||o.category.vatProfile.descriptionIs&&s.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200 dark:border-blue-800",children:s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:t==="is"&&o.category.vatProfile.descriptionIs?o.category.vatProfile.descriptionIs:o.category.vatProfile.description})})]})]})})(),(o.volume||o.alcoholContent||o.producer||o.country||o.packaging)&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("productDetailPage.specifications")||"Specifications"}),s.jsxs("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-3",children:[(o.volume||o.volumeIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.volume")||"Volume"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&o.volumeIs?o.volumeIs:o.volume})]}),o.alcoholContent&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.alcoholContent")||"Alcohol Content"}),s.jsxs("dd",{className:"text-sm text-gray-900 dark:text-white",children:[o.alcoholContent,"%"]})]}),(o.producer||o.producerIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.producer")||"Producer"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&o.producerIs?o.producerIs:o.producer})]}),(o.country||o.countryIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.country")||"Country"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&o.countryIs?o.countryIs:o.country})]}),(o.packaging||o.packagingIs)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:e("productDetailPage.packaging")||"Packaging"}),s.jsx("dd",{className:"text-sm text-gray-900 dark:text-white",children:t==="is"&&o.packagingIs?o.packagingIs:o.packaging})]})]})]}),So(t,o).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products.foodPairings")}),s.jsx("div",{className:"flex flex-wrap gap-3",children:So(t,o).map((ue,Me)=>s.jsxs("div",{className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-2",children:CM(ue)}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200 text-center font-medium",children:ue})]},Me))})]}),Iw(t,o).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products.specialAttributes")}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Iw(t,o).map((ue,Me)=>s.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:ue},Me))})]}),o.availability&&o.availability!=="available"&&s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xa,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:[e("products.availability"),": ",e("products",o.availability)]}),s.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[o.availability==="special-order"&&e("productDetailPage.specialOrderDesc"),o.availability==="coming-soon"&&e("productDetailPage.comingSoonDesc"),o.availability==="discontinued"&&e("productDetailPage.discontinuedDesc")]})]})]})}),o.category.name==="NICOTINE"&&s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Xa,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:e("productDetailPage.ageRestriction")}),s.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:e("productDetailPage.ageRestrictionDesc")})]})]})}),o.stock>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage.quantity"),":"]}),s.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg",children:[s.jsx("button",{onClick:ne,disabled:p<=1,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:s.jsx(vm,{className:"w-4 h-4"})}),s.jsx("span",{className:"px-4 py-2 text-center min-w-[60px] text-gray-900 dark:text-white",children:p}),s.jsx("button",{onClick:ge,disabled:p>=o.stock,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:s.jsx(Wt,{className:"w-4 h-4"})})]}),s.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.stock," ",e("productDetailPage.available")]})]}),s.jsxs("button",{onClick:le,disabled:g||!m,className:"btn btn-primary w-full flex items-center justify-center space-x-2 py-3",children:[s.jsx(Mr,{className:"w-5 h-5"}),s.jsx("span",{children:e(m?g?"common.loading":"products.addToCart":"common.loginRequired")})]}),!m&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:[e("productDetailPage.loginToAdd"),s.jsx(Le,{to:"/login",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 ml-1",children:e("productDetailPage.loginHere")})]}),m&&o.stock>0&&s.jsxs("button",{onClick:()=>N(!0),className:"btn btn-outline w-full flex items-center justify-center space-x-2 py-3 mt-3",children:[s.jsx(Qa,{className:"w-5 h-5"}),s.jsx("span",{children:e("productDetailPage.subscribe")})]})]})]})]})})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xa,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e("ageVerification.title")}),s.jsx("p",{className:"text-gray-600 mb-6",children:e("ageVerification.message",{age:18})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{j(!1),b(!1),T(!1)},className:"btn btn-outline flex-1",children:e("common.no")}),s.jsx("button",{onClick:pe,className:"btn btn-primary flex-1",children:e("common.yes")})]})]})})}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("productDetailPage.createSubscription")}),s.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:o.nameIs||o.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[o.price.toLocaleString()," ",r," ",e("cartPage.each")]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.quantity")}),s.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg w-32",children:[s.jsx("button",{onClick:()=>Y({...D,quantity:Math.max(1,D.quantity-1)}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:s.jsx(vm,{className:"w-4 h-4"})}),s.jsx("span",{className:"px-4 py-2 text-center flex-1 text-gray-900 dark:text-white",children:D.quantity}),s.jsx("button",{onClick:()=>Y({...D,quantity:D.quantity+1}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:s.jsx(Wt,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.deliveryFrequency")}),s.jsxs("select",{value:D.intervalType,onChange:ue=>Y({...D,intervalType:ue.target.value}),className:"input w-full",children:[s.jsx("option",{value:"WEEKLY",children:e("subscription.weekly")}),s.jsx("option",{value:"BIWEEKLY",children:e("subscription.biweekly")}),s.jsx("option",{value:"MONTHLY",children:e("subscription.monthly")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[s.jsx(Qa,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage.preferredDayOptional")]}),s.jsxs("select",{value:D.preferredDay,onChange:ue=>Y({...D,preferredDay:ue.target.value}),className:"input w-full",children:[s.jsx("option",{value:"",children:e("subscription.noSpecificDay")}),s.jsx("option",{value:"MONDAY",children:e("subscription.monday")}),s.jsx("option",{value:"TUESDAY",children:e("subscription.tuesday")}),s.jsx("option",{value:"WEDNESDAY",children:e("subscription.wednesday")}),s.jsx("option",{value:"THURSDAY",children:e("subscription.thursday")}),s.jsx("option",{value:"FRIDAY",children:e("subscription.friday")}),s.jsx("option",{value:"SATURDAY",children:e("subscription.saturday")}),s.jsx("option",{value:"SUNDAY",children:e("subscription.sunday")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s.jsx(nr,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage.preferredTimeOptional")]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-3",children:e("subscription.selectPreferredTimeHelp")}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:["09:00","10:00","11:00","12:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00"].map(ue=>s.jsx("button",{type:"button",onClick:()=>Y({...D,preferredTime:ue}),className:`p-2 text-sm rounded-lg border transition-colors ${D.preferredTime===ue?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:ue},ue))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.notesOptional")}),s.jsx("textarea",{rows:3,placeholder:e("subscription.specialNotesPlaceholder"),className:"input w-full"})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{onClick:()=>N(!1),className:"btn btn-outline flex-1",children:e("subscription.cancel")}),s.jsx("button",{onClick:async()=>{if(!m){q.error(e("subscription.mustBeLoggedIn"));return}try{const ue=await fetch("https://olfong.olibuijr.com/api/payment-gateways/config"),{gateways:Me}=await ue.json();if(!Me.some(Ze=>Ze.supportsSubscriptions&&Ze.isEnabled)){q.error(e("subscription.noPaymentProviderSupport"));return}q.success(e("productDetailPage.subscriptionCreated")),N(!1)}catch(ue){console.error("Error creating subscription:",ue),q.error(e("subscription.creationFailed"))}},className:"btn btn-primary flex-1",children:e("subscription.createSubscription")})]})]})]})}),P&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("adminProductsPage.editProduct")}),s.jsx("button",{onClick:()=>{C(!1),$()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:W(X),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminProductsPage.nameEn")," *"]}),s.jsx("input",{...B("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products.title")}),Q.name&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.nameRequired")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.nameIs")}),s.jsx("input",{...B("nameIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage.nameIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("common.price")," * (",r,")"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",...B("price",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),Q.price&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.priceRequired")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("products.stock")," *"]}),s.jsx("input",{type:"number",min:"0",...B("stock",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),Q.stock&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage.stockRequired")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("products.description")}),s.jsx("textarea",{...B("description"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products.description")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.descriptionIs")}),s.jsx("textarea",{...B("descriptionIs"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage.descriptionIs")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.productImages")}),s.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:K,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),F.length>0&&s.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2",children:F.map((ue,Me)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:ue,alt:`Preview ${Me+1}`,className:"w-full h-20 object-cover rounded border"}),s.jsx("button",{type:"button",onClick:()=>V(Me),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:""})]},Me))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage.imageUrl")}),s.jsx("input",{...B("imageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://example.com/image.jpg"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",...B("isAgeRestricted"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage.ageRestricted")})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>{C(!1),$()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common.save")})]})]})]})})]})},jd=Ne("addresses/fetchAddresses",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/addresses")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch addresses")}}),Nd=Ne("addresses/createAddress",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{const o=await ce.post("/addresses",e);return q.success("Bta vi heimilisfangi"),o.data}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a bta vi heimilisfangi"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create address")}}),Eh=Ne("addresses/updateAddress",async({id:e,addressData:t},{rejectWithValue:r})=>{var a,n,i,o;try{const d=await ce.put(`/addresses/${e}`,t);return q.success("Heimilisfang uppfrt"),d.data}catch(d){return q.error(((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||"Mistkst a uppfra heimilisfang"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update address")}}),Ih=Ne("addresses/deleteAddress",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{return await ce.delete(`/addresses/${e}`),q.success("Heimilisfang eytt"),e}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a eya heimilisfangi"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete address")}}),EM={addresses:[],isLoading:!1,error:null},IM=Vr({name:"addresses",initialState:EM,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(jd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(jd.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=r.payload,t.error=null}).addCase(jd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Nd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Nd.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses.push(r.payload),t.error=null}).addCase(Nd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Eh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Eh.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.addresses.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.addresses[a]=r.payload),t.error=null}).addCase(Eh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ih.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ih.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=t.addresses.filter(a=>a.id!==r.payload),t.error=null}).addCase(Ih.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),TM=IM.reducer,LM=()=>{var ee,ae,ve,be,J,he,Ee;const{t:e,currentLanguage:t}=je(),{currencySymbol:r}=tb(),a=ut(),n=xs(),{register:i,handleSubmit:o,formState:{errors:d},setValue:c}=Ki(),{cart:h,isLoading:m}=Se(re=>re.cart),{addresses:g,isLoading:p}=Se(re=>re.addresses),{isLoading:k}=Se(re=>re.orders),{isAuthenticated:x}=Se(re=>re.auth),[j,y]=_.useState(""),[b,w]=_.useState(!1),[N,P]=_.useState(""),[C,A]=_.useState(""),[E,F]=_.useState(""),[I,D]=_.useState([]),[Y,R]=_.useState(!0),[Z,T]=_.useState([]),[B,W]=_.useState(!0),[Q,$]=_.useState(null),O=async()=>{try{const re=await ce.get("/settings?category=VAT");if(re.data){const Re={};re.data.forEach(tt=>{tt.key==="vatRate"?Re.rate=parseInt(tt.value):Re[tt.key]=tt.value==="true"}),$(Re)}}catch(re){console.error("Failed to fetch VAT settings:",re)}};_.useEffect(()=>{x&&(a(yh()),a(jd()),K(),V(),O())},[a,x]);const K=async()=>{var re;try{R(!0);const tt=((re=(await ce.get("/payment-gateways/config")).data)==null?void 0:re.gateways)||[];D(tt),tt.length>0&&(tt.find(rs=>rs.provider==="teya")?P("teya"):tt.find(rs=>rs.provider==="valitor")?P("valitor"):P(tt[0].provider))}catch(Re){console.error("Failed to fetch payment gateways:",Re)}finally{R(!1)}},V=async()=>{try{W(!0);const Re=(await ce.get("/shipping/active")).data||[];T(Re),Re&&Re.length>0&&A(Re[0].id)}catch(re){console.error("Failed to fetch shipping options:",re)}finally{W(!1)}},X=()=>{const re=[],Re=new Date,tt=Re.getHours(),wt=Re.getMinutes(),rs=Re.getDay(),ss=Qy[["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][rs]];if(!ss)return re;const[cn,ii]=ss.open.split(":").map(Number),[bs,as]=ss.close.split(":").map(Number);for(let ir=cn;ir<bs;ir++)for(let zs=0;zs<60&&!(ir===bs-1&&zs>=as);zs+=30){const un=`${ir.toString().padStart(2,"0")}:${zs.toString().padStart(2,"0")}`;(ir>tt||ir===tt&&zs>wt+30)&&re.push({value:un,label:un,display:un})}return re},le=re=>I.some(Re=>Re.provider===re),ge=re=>I.find(Re=>Re.provider===re),ne=()=>Z.find(re=>re.id===C),pe=(re,Re="en")=>{const tt=ge(re);return tt?(Re==="is"?tt.displayNameIs:tt.displayNameEn)||tt.displayName:""},Oe=()=>le("valitor"),ue=()=>le("teya"),Me=()=>{const re=ne();return le("cash_on_delivery")&&(re==null?void 0:re.type)==="delivery"},et=()=>{const re=ne();return le("pay_on_pickup")&&(re==null?void 0:re.type)==="pickup"},Ze=async re=>{try{if(!C){q.error(e("checkoutPage.selectShippingOption"));return}const Re=ne(),tt={shippingOptionId:C,paymentMethod:N,notes:re.notes||""};if(Re.type==="delivery"){if(!j){q.error(e("checkoutPage.selectDeliveryAddress"));return}tt.deliveryAddressId=j}else if(Re.type==="pickup"){if(!E){q.error(e("checkoutPage.selectPickupTime"));return}tt.pickupTime=E}const wt=await a(ch(tt)).unwrap();n(N==="teya"?`/orders/${wt.id}`:N==="valitor"?`/orders/${wt.id}`:N==="cash_on_delivery"?`/orders/${wt.id}`:N==="pay_on_pickup"?`/orders/${wt.id}`:`/orders/${wt.id}`)}catch(Re){console.error("Failed to create order:",Re)}},z=async re=>{try{const Re=await a(Nd(re)).unwrap();y(Re.id),w(!1),c("addressId",Re.id)}catch(Re){console.error("Failed to create address:",Re)}},we=async(re,Re)=>{if(Re<=0){await a(pd(re));return}try{await a(bh({itemId:re,quantity:Re})).unwrap()}catch{q.error(e("common.error"))}},Ie=async re=>{try{await a(pd(re)).unwrap()}catch{q.error(e("common.error"))}},Fe=async()=>{if(window.confirm(e("cartPage.clearCart")+"?"))try{await a(vh()).unwrap()}catch{q.error(e("cart.failedToClearCart"))}};if(!x)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:e("cart.title")}),s.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[s.jsx(ud,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.loginToViewCart")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage.mustLoginToViewCart")}),s.jsx(Le,{to:"/login",className:"btn btn-primary w-full",children:e("cartPage.login")})]})]})})});if(m||p)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(pt,{size:"large"})});if(!h||!h.items||h.items.length===0)return s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[s.jsx("div",{className:"flex items-center justify-between gap-2 sm:gap-4 flex-1 min-w-0",children:s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("cart.title")})}),s.jsx("div",{className:"hidden sm:flex flex-col gap-2",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e("cartPage.cartDescription")})})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ud,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.emptyCart")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage.addItemsToStart")}),s.jsx(Le,{to:"/products",className:"btn btn-primary",children:e("home.hero.startShopping")})]})})]})});const se=h.items.reduce((re,Re)=>re+Re.product.price*Re.quantity,0),Pe=((ee=ne())==null?void 0:ee.fee)||0,de=(Q==null?void 0:Q.rate)||24,_e=Math.round(se*(de/100)),H=se+_e+Pe;return h.items.reduce((re,Re)=>re+Re.quantity,0),s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 sm:gap-4 flex-1 min-w-0",children:[s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white whitespace-nowrap",children:e("cart.title")}),h.items.length>0&&s.jsxs("div",{className:"flex gap-2 sm:hidden flex-shrink-0",children:[s.jsx(Le,{to:"/products",className:"btn btn-outline py-1.5 px-2 flex items-center justify-center gap-0 whitespace-nowrap",title:e("cartPage.continueShopping"),children:s.jsx(Bs,{className:"w-4 h-4 flex-shrink-0"})}),s.jsx("button",{onClick:Fe,className:"inline-flex items-center justify-center gap-0 px-2 py-1.5 border border-red-300 dark:border-red-600 rounded-md shadow-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 whitespace-nowrap flex-shrink-0",title:e("cartPage.clearCart"),children:s.jsx(er,{className:"w-4 h-4 flex-shrink-0"})})]})]}),s.jsxs("div",{className:"hidden sm:flex flex-col gap-2",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:e("cartPage.cartDescription")}),h.items.length>0&&s.jsxs("div",{className:"flex gap-3",children:[s.jsx(Le,{to:"/products",className:"btn btn-outline py-2 px-4 flex items-center justify-start gap-0 whitespace-nowrap",title:e("cartPage.continueShopping"),children:s.jsx("span",{children:e("cartPage.continueShopping")})}),s.jsxs("button",{onClick:Fe,className:"inline-flex items-center justify-start gap-2 px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 whitespace-nowrap flex-shrink-0",title:e("cartPage.clearCart"),children:[s.jsx(er,{className:"w-4 h-4 flex-shrink-0"}),s.jsx("span",{children:e("cartPage.clearCart")})]})]})]})]})})}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[s.jsx("div",{className:"lg:col-span-1 space-y-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(ud,{className:"w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"}),e("cartPage.cartItems")]}),s.jsx("div",{className:"space-y-4",children:h.items.map(re=>s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 py-3 sm:py-4 last:border-b-0",children:s.jsxs("div",{className:"flex gap-2 sm:gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:re.product.imageUrl?s.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-gray-50 dark:bg-gray-700 rounded-lg p-0.5 flex items-center justify-center",children:s.jsx("img",{src:re.product.imageUrl.startsWith("http")?re.product.imageUrl:`https://olfong.olibuijr.com${re.product.imageUrl}`,alt:re.product.name,className:"w-full h-full object-contain rounded"})}):s.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-600",children:s.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:e("cartPage.noImage")})})}),s.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base sm:text-base font-medium text-gray-900 dark:text-white truncate leading-tight",children:Xn(t,re.product)}),s.jsxs("p",{className:"text-sm sm:text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:[re.product.price.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",r," ",e("cartPage.each")]})]}),s.jsxs("div",{className:"flex items-center gap-1 mt-1 sm:mt-2",children:[s.jsx("button",{onClick:()=>we(re.id,re.quantity-1),disabled:re.quantity<=1,className:"p-0.5 sm:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-400 rounded transition-colors",children:s.jsx(vm,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 text-center min-w-[28px] sm:min-w-[36px] font-medium text-xs sm:text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-700 rounded",children:re.quantity}),s.jsx("button",{onClick:()=>we(re.id,re.quantity+1),disabled:re.quantity>=re.product.stock,className:"p-0.5 sm:p-1 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-400 rounded transition-colors",children:s.jsx(Wt,{className:"w-3 h-3 sm:w-4 sm:h-4"})}),s.jsx("button",{onClick:()=>Ie(re.id),className:"p-0.5 sm:p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors ml-1",title:e("common.remove"),children:s.jsx(er,{className:"w-3 h-3 sm:w-4 sm:h-4"})})]})]}),s.jsx("div",{className:"flex-shrink-0 text-right flex flex-col justify-between",children:s.jsxs("div",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:[(re.product.price*re.quantity).toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",r]})})]})},re.id))})]})}),s.jsx("div",{className:"lg:col-span-1 space-y-6",children:s.jsxs("form",{onSubmit:o(Ze),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(Ea,{className:"w-5 h-5 mr-2 text-primary-600 dark:text-primary-400"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("checkoutPage.checkout")})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(yr,{className:"w-4 h-4 mr-2"}),e("checkoutPage.shippingOptions")]}),B?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(pt,{size:"small"}),s.jsx("span",{className:"ml-2 text-gray-600",children:e("common.loading")})]}):Z.length===0?s.jsx("div",{className:"text-center py-4 text-gray-500",children:s.jsx("p",{children:e("checkoutPage.noShippingOptions")})}):s.jsx("div",{className:"space-y-3",children:Z.map(re=>s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",name:"shippingOption",value:re.id,checked:C==re.id,onChange:Re=>A(parseInt(Re.target.value)),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:t==="is"?re.nameIs||re.name:re.name||re.nameEn}),s.jsx("div",{className:"text-sm font-semibold text-primary-600",children:re.fee===0?e("common.free"):`${re.fee.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})} ${r}`})]}),s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t==="is"?re.descriptionIs||re.description:re.description||re.descriptionEn}),re.estimatedDays&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[e("checkoutPage.estimatedDelivery"),": ",re.estimatedDays," ",e("checkoutPage.days")]})]})]},re.id))})]}),((ae=ne())==null?void 0:ae.type)==="delivery"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Ta,{className:"w-4 h-4 mr-2"}),e("checkoutPage.deliveryAddress")]}),g.length>0&&s.jsx("div",{className:"space-y-3 mb-4",children:g.map(re=>s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[s.jsx("input",{type:"radio",...i("addressId",{required:!0}),value:re.id,className:"mt-1",onChange:Re=>y(Re.target.value)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[re.street,", ",re.city]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[re.postalCode,", ",re.country]}),re.notes&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:re.notes})]})]},re.id))}),d.addressId&&s.jsx("p",{className:"text-red-600 text-sm mb-4",children:e("checkoutPage.selectDeliveryAddress")}),s.jsxs("button",{type:"button",onClick:()=>w(!0),className:"btn btn-outline text-sm",children:["+ ",e("addresses.add")]}),b&&s.jsxs("div",{className:"mt-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:e("checkoutPage.newAddress")}),s.jsxs("form",{onSubmit:o(z),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.street")}),s.jsx("input",{type:"text",...i("street",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.city")}),s.jsx("input",{type:"text",...i("city",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.postalCode")}),s.jsx("input",{type:"text",...i("postalCode",{required:!0}),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses.country")}),s.jsx("input",{type:"text",...i("country",{required:!0}),defaultValue:"Iceland",className:"input w-full"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage.notesOptional")}),s.jsx("textarea",{...i("notes"),rows:3,className:"input w-full"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"submit",className:"btn btn-primary",children:e("checkoutPage.saveAddress")}),s.jsx("button",{type:"button",onClick:()=>w(!1),className:"btn btn-outline",children:e("common.cancel")})]})]})]})]}),((ve=ne())==null?void 0:ve.type)==="pickup"&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Ta,{className:"w-4 h-4 mr-2"}),e("checkoutPage.pickupTime")]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e("checkoutPage.selectPickupTimeHelp")}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:X().map(re=>s.jsx("button",{type:"button",onClick:()=>F(re.value),className:`p-2 text-sm rounded-lg border transition-colors ${E===re.value?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:re.display},re.value))}),X().length===0&&s.jsx("p",{className:"text-red-600 text-sm",children:e("checkoutPage.noPickupTimes")})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("checkoutPage.storeLocation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("checkoutPage.storeLocationValue")})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Ea,{className:"w-4 h-4 mr-2"}),e("checkoutPage.paymentMethod")]}),s.jsx("div",{className:"space-y-3",children:Y?s.jsxs("div",{className:"flex items-center justify-center py-4",children:[s.jsx(pt,{size:"small"}),s.jsx("span",{className:"ml-2 text-gray-600",children:e("common.loading")})]}):s.jsxs(s.Fragment,{children:[ue()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"teya",checked:N==="teya",onChange:re=>P(re.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:pe("teya",t)}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.teyaDesc")})]})]}),Oe()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"valitor",checked:N==="valitor",onChange:re=>P(re.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.valitorPayment")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.valitorDesc")})]})]}),Me()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"cash_on_delivery",checked:N==="cash_on_delivery",onChange:re=>P(re.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.cashOnDelivery")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.cashOnDeliveryDesc")})]})]}),et()&&s.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[s.jsx("input",{type:"radio",value:"pay_on_pickup",checked:N==="pay_on_pickup",onChange:re=>P(re.target.value),className:"mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage.payOnPickup")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage.payOnPickupDesc")})]})]}),!Oe()&&!ue()&&!Me()&&!et()&&s.jsxs("div",{className:"text-center py-4 text-gray-500",children:[s.jsx("p",{children:e("checkoutPage.noPaymentMethodsAvailable")}),s.jsx("p",{className:"text-sm mt-1",children:e("checkoutPage.contactAdmin")})]})]})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("checkoutPage.orderNotes")}),s.jsx("textarea",{...i("notes"),rows:3,placeholder:e("checkoutPage.orderNotes"),className:"input w-full"})]}),s.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage.cartItems")}),s.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:h.items.map(re=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400 truncate",children:Xn(t,re.product)}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:["x",re.quantity]})]}),s.jsxs("p",{className:"text-gray-900 dark:text-white font-medium ml-2 flex-shrink-0",children:[(re.product.price*re.quantity).toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",r]})]},re.id))}),s.jsxs("div",{className:"border-t border-gray-300 dark:border-gray-500 mt-4 pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("checkoutPage.subtotal")}),s.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[se.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",r]})]}),_e>0&&s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:[e("checkout.vat")," (",de,"%)"]}),s.jsxs("span",{children:[_e.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",r]})]}),Pe>0&&s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:e("checkout.shipping")}),s.jsxs("span",{children:[Pe.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",r]})]})]})]}),s.jsx("div",{className:"mb-6 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/30 dark:to-primary-800/30 rounded-lg p-4 border border-primary-200 dark:border-primary-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("checkout.total")}),s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[H.toLocaleString("is-IS",{minimumFractionDigits:0,maximumFractionDigits:0})," ",r]})]})}),s.jsx("button",{type:"submit",disabled:k||!C||((be=ne())==null?void 0:be.type)==="delivery"&&!j||((J=ne())==null?void 0:J.type)==="pickup"&&!E,className:"btn btn-primary w-full py-3 text-lg mt-6",children:e(k?"checkoutPage.creatingOrder":"checkoutPage.placeOrder")}),!C&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectShippingOption")}),((he=ne())==null?void 0:he.type)==="delivery"&&!j&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectDeliveryAddress")}),((Ee=ne())==null?void 0:Ee.type)==="pickup"&&!E&&s.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage.selectPickupTime")})]})})]})})]})})};var dx={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(e,t){(function(r,a){a(t)})(a6,function(r){var a="1.9.4";function n(l){var u,f,v,S;for(f=1,v=arguments.length;f<v;f++){S=arguments[f];for(u in S)l[u]=S[u]}return l}var i=Object.create||function(){function l(){}return function(u){return l.prototype=u,new l}}();function o(l,u){var f=Array.prototype.slice;if(l.bind)return l.bind.apply(l,f.call(arguments,1));var v=f.call(arguments,2);return function(){return l.apply(u,v.length?v.concat(f.call(arguments)):arguments)}}var d=0;function c(l){return"_leaflet_id"in l||(l._leaflet_id=++d),l._leaflet_id}function h(l,u,f){var v,S,M,G;return G=function(){v=!1,S&&(M.apply(f,S),S=!1)},M=function(){v?S=arguments:(l.apply(f,arguments),setTimeout(G,u),v=!0)},M}function m(l,u,f){var v=u[1],S=u[0],M=v-S;return l===v&&f?l:((l-S)%M+M)%M+S}function g(){return!1}function p(l,u){if(u===!1)return l;var f=Math.pow(10,u===void 0?6:u);return Math.round(l*f)/f}function k(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function x(l){return k(l).split(/\s+/)}function j(l,u){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?i(l.options):{});for(var f in u)l.options[f]=u[f];return l.options}function y(l,u,f){var v=[];for(var S in l)v.push(encodeURIComponent(f?S.toUpperCase():S)+"="+encodeURIComponent(l[S]));return(!u||u.indexOf("?")===-1?"?":"&")+v.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function w(l,u){return l.replace(b,function(f,v){var S=u[v];if(S===void 0)throw new Error("No value provided for variable "+f);return typeof S=="function"&&(S=S(u)),S})}var N=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function P(l,u){for(var f=0;f<l.length;f++)if(l[f]===u)return f;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var E=0;function F(l){var u=+new Date,f=Math.max(0,16-(u-E));return E=u+f,window.setTimeout(l,f)}var I=window.requestAnimationFrame||A("RequestAnimationFrame")||F,D=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function Y(l,u,f){if(f&&I===F)l.call(u);else return I.call(window,o(l,u))}function R(l){l&&D.call(window,l)}var Z={__proto__:null,extend:n,create:i,bind:o,get lastId(){return d},stamp:c,throttle:h,wrapNum:m,falseFn:g,formatNum:p,trim:k,splitWords:x,setOptions:j,getParamString:y,template:w,isArray:N,indexOf:P,emptyImageUrl:C,requestFn:I,cancelFn:D,requestAnimFrame:Y,cancelAnimFrame:R};function T(){}T.extend=function(l){var u=function(){j(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=u.__super__=this.prototype,v=i(f);v.constructor=u,u.prototype=v;for(var S in this)Object.prototype.hasOwnProperty.call(this,S)&&S!=="prototype"&&S!=="__super__"&&(u[S]=this[S]);return l.statics&&n(u,l.statics),l.includes&&(B(l.includes),n.apply(null,[v].concat(l.includes))),n(v,l),delete v.statics,delete v.includes,v.options&&(v.options=f.options?i(f.options):{},n(v.options,l.options)),v._initHooks=[],v.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var M=0,G=v._initHooks.length;M<G;M++)v._initHooks[M].call(this)}},u},T.include=function(l){var u=this.prototype.options;return n(this.prototype,l),l.options&&(this.prototype.options=u,this.mergeOptions(l.options)),this},T.mergeOptions=function(l){return n(this.prototype.options,l),this},T.addInitHook=function(l){var u=Array.prototype.slice.call(arguments,1),f=typeof l=="function"?l:function(){this[l].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function B(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=N(l)?l:[l];for(var u=0;u<l.length;u++)l[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var W={on:function(l,u,f){if(typeof l=="object")for(var v in l)this._on(v,l[v],u);else{l=x(l);for(var S=0,M=l.length;S<M;S++)this._on(l[S],u,f)}return this},off:function(l,u,f){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var v in l)this._off(v,l[v],u);else{l=x(l);for(var S=arguments.length===1,M=0,G=l.length;M<G;M++)S?this._off(l[M]):this._off(l[M],u,f)}return this},_on:function(l,u,f,v){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(l,u,f)===!1){f===this&&(f=void 0);var S={fn:u,ctx:f};v&&(S.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(S)}},_off:function(l,u,f){var v,S,M;if(this._events&&(v=this._events[l],!!v)){if(arguments.length===1){if(this._firingCount)for(S=0,M=v.length;S<M;S++)v[S].fn=g;delete this._events[l];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var G=this._listens(l,u,f);if(G!==!1){var te=v[G];this._firingCount&&(te.fn=g,this._events[l]=v=v.slice()),v.splice(G,1)}}},fire:function(l,u,f){if(!this.listens(l,f))return this;var v=n({},u,{type:l,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var S=this._events[l];if(S){this._firingCount=this._firingCount+1||1;for(var M=0,G=S.length;M<G;M++){var te=S[M],ie=te.fn;te.once&&this.off(l,ie,te.ctx),ie.call(te.ctx||this,v)}this._firingCount--}}return f&&this._propagateEvent(v),this},listens:function(l,u,f,v){typeof l!="string"&&console.warn('"string" type argument expected');var S=u;typeof u!="function"&&(v=!!u,S=void 0,f=void 0);var M=this._events&&this._events[l];if(M&&M.length&&this._listens(l,S,f)!==!1)return!0;if(v){for(var G in this._eventParents)if(this._eventParents[G].listens(l,u,f,v))return!0}return!1},_listens:function(l,u,f){if(!this._events)return!1;var v=this._events[l]||[];if(!u)return!!v.length;f===this&&(f=void 0);for(var S=0,M=v.length;S<M;S++)if(v[S].fn===u&&v[S].ctx===f)return S;return!1},once:function(l,u,f){if(typeof l=="object")for(var v in l)this._on(v,l[v],u,!0);else{l=x(l);for(var S=0,M=l.length;S<M;S++)this._on(l[S],u,f,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[c(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[c(l)],this},_propagateEvent:function(l){for(var u in this._eventParents)this._eventParents[u].fire(l.type,n({layer:l.target,propagatedFrom:l.target},l),!0)}};W.addEventListener=W.on,W.removeEventListener=W.clearAllEventListeners=W.off,W.addOneTimeEventListener=W.once,W.fireEvent=W.fire,W.hasEventListeners=W.listens;var Q=T.extend(W);function $(l,u,f){this.x=f?Math.round(l):l,this.y=f?Math.round(u):u}var O=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(l){return this.clone()._add(K(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(K(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new $(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new $(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(l){l=K(l);var u=l.x-this.x,f=l.y-this.y;return Math.sqrt(u*u+f*f)},equals:function(l){return l=K(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=K(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function K(l,u,f){return l instanceof $?l:N(l)?new $(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new $(l.x,l.y):new $(l,u,f)}function V(l,u){if(l)for(var f=u?[l,u]:l,v=0,S=f.length;v<S;v++)this.extend(f[v])}V.prototype={extend:function(l){var u,f;if(!l)return this;if(l instanceof $||typeof l[0]=="number"||"x"in l)u=f=K(l);else if(l=X(l),u=l.min,f=l.max,!u||!f)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=f.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(l){return K((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return K(this.min.x,this.max.y)},getTopRight:function(){return K(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var u,f;return typeof l[0]=="number"||l instanceof $?l=K(l):l=X(l),l instanceof V?(u=l.min,f=l.max):u=f=l,u.x>=this.min.x&&f.x<=this.max.x&&u.y>=this.min.y&&f.y<=this.max.y},intersects:function(l){l=X(l);var u=this.min,f=this.max,v=l.min,S=l.max,M=S.x>=u.x&&v.x<=f.x,G=S.y>=u.y&&v.y<=f.y;return M&&G},overlaps:function(l){l=X(l);var u=this.min,f=this.max,v=l.min,S=l.max,M=S.x>u.x&&v.x<f.x,G=S.y>u.y&&v.y<f.y;return M&&G},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var u=this.min,f=this.max,v=Math.abs(u.x-f.x)*l,S=Math.abs(u.y-f.y)*l;return X(K(u.x-v,u.y-S),K(f.x+v,f.y+S))},equals:function(l){return l?(l=X(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function X(l,u){return!l||l instanceof V?l:new V(l,u)}function le(l,u){if(l)for(var f=u?[l,u]:l,v=0,S=f.length;v<S;v++)this.extend(f[v])}le.prototype={extend:function(l){var u=this._southWest,f=this._northEast,v,S;if(l instanceof ne)v=l,S=l;else if(l instanceof le){if(v=l._southWest,S=l._northEast,!v||!S)return this}else return l?this.extend(pe(l)||ge(l)):this;return!u&&!f?(this._southWest=new ne(v.lat,v.lng),this._northEast=new ne(S.lat,S.lng)):(u.lat=Math.min(v.lat,u.lat),u.lng=Math.min(v.lng,u.lng),f.lat=Math.max(S.lat,f.lat),f.lng=Math.max(S.lng,f.lng)),this},pad:function(l){var u=this._southWest,f=this._northEast,v=Math.abs(u.lat-f.lat)*l,S=Math.abs(u.lng-f.lng)*l;return new le(new ne(u.lat-v,u.lng-S),new ne(f.lat+v,f.lng+S))},getCenter:function(){return new ne((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ne(this.getNorth(),this.getWest())},getSouthEast:function(){return new ne(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof ne||"lat"in l?l=pe(l):l=ge(l);var u=this._southWest,f=this._northEast,v,S;return l instanceof le?(v=l.getSouthWest(),S=l.getNorthEast()):v=S=l,v.lat>=u.lat&&S.lat<=f.lat&&v.lng>=u.lng&&S.lng<=f.lng},intersects:function(l){l=ge(l);var u=this._southWest,f=this._northEast,v=l.getSouthWest(),S=l.getNorthEast(),M=S.lat>=u.lat&&v.lat<=f.lat,G=S.lng>=u.lng&&v.lng<=f.lng;return M&&G},overlaps:function(l){l=ge(l);var u=this._southWest,f=this._northEast,v=l.getSouthWest(),S=l.getNorthEast(),M=S.lat>u.lat&&v.lat<f.lat,G=S.lng>u.lng&&v.lng<f.lng;return M&&G},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,u){return l?(l=ge(l),this._southWest.equals(l.getSouthWest(),u)&&this._northEast.equals(l.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ge(l,u){return l instanceof le?l:new le(l,u)}function ne(l,u,f){if(isNaN(l)||isNaN(u))throw new Error("Invalid LatLng object: ("+l+", "+u+")");this.lat=+l,this.lng=+u,f!==void 0&&(this.alt=+f)}ne.prototype={equals:function(l,u){if(!l)return!1;l=pe(l);var f=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return f<=(u===void 0?1e-9:u)},toString:function(l){return"LatLng("+p(this.lat,l)+", "+p(this.lng,l)+")"},distanceTo:function(l){return ue.distance(this,pe(l))},wrap:function(){return ue.wrapLatLng(this)},toBounds:function(l){var u=180*l/40075017,f=u/Math.cos(Math.PI/180*this.lat);return ge([this.lat-u,this.lng-f],[this.lat+u,this.lng+f])},clone:function(){return new ne(this.lat,this.lng,this.alt)}};function pe(l,u,f){return l instanceof ne?l:N(l)&&typeof l[0]!="object"?l.length===3?new ne(l[0],l[1],l[2]):l.length===2?new ne(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new ne(l.lat,"lng"in l?l.lng:l.lon,l.alt):u===void 0?null:new ne(l,u,f)}var Oe={latLngToPoint:function(l,u){var f=this.projection.project(l),v=this.scale(u);return this.transformation._transform(f,v)},pointToLatLng:function(l,u){var f=this.scale(u),v=this.transformation.untransform(l,f);return this.projection.unproject(v)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var u=this.projection.bounds,f=this.scale(l),v=this.transformation.transform(u.min,f),S=this.transformation.transform(u.max,f);return new V(v,S)},infinite:!1,wrapLatLng:function(l){var u=this.wrapLng?m(l.lng,this.wrapLng,!0):l.lng,f=this.wrapLat?m(l.lat,this.wrapLat,!0):l.lat,v=l.alt;return new ne(f,u,v)},wrapLatLngBounds:function(l){var u=l.getCenter(),f=this.wrapLatLng(u),v=u.lat-f.lat,S=u.lng-f.lng;if(v===0&&S===0)return l;var M=l.getSouthWest(),G=l.getNorthEast(),te=new ne(M.lat-v,M.lng-S),ie=new ne(G.lat-v,G.lng-S);return new le(te,ie)}},ue=n({},Oe,{wrapLng:[-180,180],R:6371e3,distance:function(l,u){var f=Math.PI/180,v=l.lat*f,S=u.lat*f,M=Math.sin((u.lat-l.lat)*f/2),G=Math.sin((u.lng-l.lng)*f/2),te=M*M+Math.cos(v)*Math.cos(S)*G*G,ie=2*Math.atan2(Math.sqrt(te),Math.sqrt(1-te));return this.R*ie}}),Me=6378137,et={R:Me,MAX_LATITUDE:85.0511287798,project:function(l){var u=Math.PI/180,f=this.MAX_LATITUDE,v=Math.max(Math.min(f,l.lat),-f),S=Math.sin(v*u);return new $(this.R*l.lng*u,this.R*Math.log((1+S)/(1-S))/2)},unproject:function(l){var u=180/Math.PI;return new ne((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*u,l.x*u/this.R)},bounds:function(){var l=Me*Math.PI;return new V([-l,-l],[l,l])}()};function Ze(l,u,f,v){if(N(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=u,this._c=f,this._d=v}Ze.prototype={transform:function(l,u){return this._transform(l.clone(),u)},_transform:function(l,u){return u=u||1,l.x=u*(this._a*l.x+this._b),l.y=u*(this._c*l.y+this._d),l},untransform:function(l,u){return u=u||1,new $((l.x/u-this._b)/this._a,(l.y/u-this._d)/this._c)}};function z(l,u,f,v){return new Ze(l,u,f,v)}var we=n({},ue,{code:"EPSG:3857",projection:et,transformation:function(){var l=.5/(Math.PI*et.R);return z(l,.5,-l,.5)}()}),Ie=n({},we,{code:"EPSG:900913"});function Fe(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function se(l,u){var f="",v,S,M,G,te,ie;for(v=0,M=l.length;v<M;v++){for(te=l[v],S=0,G=te.length;S<G;S++)ie=te[S],f+=(S?"L":"M")+ie.x+" "+ie.y;f+=u?ze.svg?"z":"x":""}return f||"M0 0"}var Pe=document.documentElement.style,de="ActiveXObject"in window,_e=de&&!document.addEventListener,H="msLaunchUri"in navigator&&!("documentMode"in document),ee=Ke("webkit"),ae=Ke("android"),ve=Ke("android 2")||Ke("android 3"),be=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),J=ae&&Ke("Google")&&be<537&&!("AudioNode"in window),he=!!window.opera,Ee=!H&&Ke("chrome"),re=Ke("gecko")&&!ee&&!he&&!de,Re=!Ee&&Ke("safari"),tt=Ke("phantom"),wt="OTransition"in Pe,rs=navigator.platform.indexOf("Win")===0,Ra=de&&"transition"in Pe,ss="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ve,cn="MozPerspective"in Pe,ii=!window.L_DISABLE_3D&&(Ra||ss||cn)&&!wt&&!tt,bs=typeof orientation<"u"||Ke("mobile"),as=bs&&ee,ir=bs&&ss,zs=!window.PointerEvent&&window.MSPointerEvent,un=!!(window.PointerEvent||zs),fl="ontouchstart"in window||!!window.TouchEvent,Mc=!window.L_NO_TOUCH&&(fl||un),Rc=bs&&he,Dc=bs&&re,U=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,me=function(){var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",g,u),window.removeEventListener("testPassiveEventSupport",g,u)}catch{}return l}(),$e=function(){return!!document.createElement("canvas").getContext}(),Pt=!!(document.createElementNS&&Fe("svg").createSVGRect),jt=!!Pt&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ft=!Pt&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var u=l.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),vs=navigator.platform.indexOf("Mac")===0,dt=navigator.platform.indexOf("Linux")===0;function Ke(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var ze={ie:de,ielt9:_e,edge:H,webkit:ee,android:ae,android23:ve,androidStock:J,opera:he,chrome:Ee,gecko:re,safari:Re,phantom:tt,opera12:wt,win:rs,ie3d:Ra,webkit3d:ss,gecko3d:cn,any3d:ii,mobile:bs,mobileWebkit:as,mobileWebkit3d:ir,msPointer:zs,pointer:un,touch:Mc,touchNative:fl,mobileOpera:Rc,mobileGecko:Dc,retina:U,passiveEvents:me,canvas:$e,svg:Pt,vml:Ft,inlineSvg:jt,mac:vs,linux:dt},Cb=ze.msPointer?"MSPointerDown":"pointerdown",Pb=ze.msPointer?"MSPointerMove":"pointermove",Eb=ze.msPointer?"MSPointerUp":"pointerup",Ib=ze.msPointer?"MSPointerCancel":"pointercancel",Vg={touchstart:Cb,touchmove:Pb,touchend:Eb,touchcancel:Ib},Tb={touchstart:tC,touchmove:Oc,touchend:Oc,touchcancel:Oc},Xi={},Lb=!1;function Y4(l,u,f){return u==="touchstart"&&eC(),Tb[u]?(f=Tb[u].bind(this,f),l.addEventListener(Vg[u],f,!1),f):(console.warn("wrong event specified:",u),g)}function J4(l,u,f){if(!Vg[u]){console.warn("wrong event specified:",u);return}l.removeEventListener(Vg[u],f,!1)}function X4(l){Xi[l.pointerId]=l}function Q4(l){Xi[l.pointerId]&&(Xi[l.pointerId]=l)}function Ab(l){delete Xi[l.pointerId]}function eC(){Lb||(document.addEventListener(Cb,X4,!0),document.addEventListener(Pb,Q4,!0),document.addEventListener(Eb,Ab,!0),document.addEventListener(Ib,Ab,!0),Lb=!0)}function Oc(l,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var f in Xi)u.touches.push(Xi[f]);u.changedTouches=[u],l(u)}}function tC(l,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&mr(u),Oc(l,u)}function rC(l){var u={},f,v;for(v in l)f=l[v],u[v]=f&&f.bind?f.bind(l):f;return l=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var sC=200;function aC(l,u){l.addEventListener("dblclick",u);var f=0,v;function S(M){if(M.detail!==1){v=M.detail;return}if(!(M.pointerType==="mouse"||M.sourceCapabilities&&!M.sourceCapabilities.firesTouchEvents)){var G=Fb(M);if(!(G.some(function(ie){return ie instanceof HTMLLabelElement&&ie.attributes.for})&&!G.some(function(ie){return ie instanceof HTMLInputElement||ie instanceof HTMLSelectElement}))){var te=Date.now();te-f<=sC?(v++,v===2&&u(rC(M))):v=1,f=te}}}return l.addEventListener("click",S),{dblclick:u,simDblclick:S}}function nC(l,u){l.removeEventListener("dblclick",u.dblclick),l.removeEventListener("click",u.simDblclick)}var Hg=zc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),pl=zc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Mb=pl==="webkitTransition"||pl==="OTransition"?pl+"End":"transitionend";function Rb(l){return typeof l=="string"?document.getElementById(l):l}function xl(l,u){var f=l.style[u]||l.currentStyle&&l.currentStyle[u];if((!f||f==="auto")&&document.defaultView){var v=document.defaultView.getComputedStyle(l,null);f=v?v[u]:null}return f==="auto"?null:f}function it(l,u,f){var v=document.createElement(l);return v.className=u||"",f&&f.appendChild(v),v}function Mt(l){var u=l.parentNode;u&&u.removeChild(l)}function Fc(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Qi(l){var u=l.parentNode;u&&u.lastChild!==l&&u.appendChild(l)}function eo(l){var u=l.parentNode;u&&u.firstChild!==l&&u.insertBefore(l,u.firstChild)}function Wg(l,u){if(l.classList!==void 0)return l.classList.contains(u);var f=Bc(l);return f.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(f)}function Ge(l,u){if(l.classList!==void 0)for(var f=x(u),v=0,S=f.length;v<S;v++)l.classList.add(f[v]);else if(!Wg(l,u)){var M=Bc(l);qg(l,(M?M+" ":"")+u)}}function zt(l,u){l.classList!==void 0?l.classList.remove(u):qg(l,k((" "+Bc(l)+" ").replace(" "+u+" "," ")))}function qg(l,u){l.className.baseVal===void 0?l.className=u:l.className.baseVal=u}function Bc(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function ks(l,u){"opacity"in l.style?l.style.opacity=u:"filter"in l.style&&iC(l,u)}function iC(l,u){var f=!1,v="DXImageTransform.Microsoft.Alpha";try{f=l.filters.item(v)}catch{if(u===1)return}u=Math.round(u*100),f?(f.Enabled=u!==100,f.Opacity=u):l.style.filter+=" progid:"+v+"(opacity="+u+")"}function zc(l){for(var u=document.documentElement.style,f=0;f<l.length;f++)if(l[f]in u)return l[f];return!1}function oi(l,u,f){var v=u||new $(0,0);l.style[Hg]=(ze.ie3d?"translate("+v.x+"px,"+v.y+"px)":"translate3d("+v.x+"px,"+v.y+"px,0)")+(f?" scale("+f+")":"")}function qt(l,u){l._leaflet_pos=u,ze.any3d?oi(l,u):(l.style.left=u.x+"px",l.style.top=u.y+"px")}function li(l){return l._leaflet_pos||new $(0,0)}var yl,bl,Kg;if("onselectstart"in document)yl=function(){He(window,"selectstart",mr)},bl=function(){vt(window,"selectstart",mr)};else{var vl=zc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);yl=function(){if(vl){var l=document.documentElement.style;Kg=l[vl],l[vl]="none"}},bl=function(){vl&&(document.documentElement.style[vl]=Kg,Kg=void 0)}}function Gg(){He(window,"dragstart",mr)}function Zg(){vt(window,"dragstart",mr)}var $c,Yg;function Jg(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(Uc(),$c=l,Yg=l.style.outlineStyle,l.style.outlineStyle="none",He(window,"keydown",Uc))}function Uc(){$c&&($c.style.outlineStyle=Yg,$c=void 0,Yg=void 0,vt(window,"keydown",Uc))}function Db(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Xg(l){var u=l.getBoundingClientRect();return{x:u.width/l.offsetWidth||1,y:u.height/l.offsetHeight||1,boundingClientRect:u}}var oC={__proto__:null,TRANSFORM:Hg,TRANSITION:pl,TRANSITION_END:Mb,get:Rb,getStyle:xl,create:it,remove:Mt,empty:Fc,toFront:Qi,toBack:eo,hasClass:Wg,addClass:Ge,removeClass:zt,setClass:qg,getClass:Bc,setOpacity:ks,testProp:zc,setTransform:oi,setPosition:qt,getPosition:li,get disableTextSelection(){return yl},get enableTextSelection(){return bl},disableImageDrag:Gg,enableImageDrag:Zg,preventOutline:Jg,restoreOutline:Uc,getSizedParentNode:Db,getScale:Xg};function He(l,u,f,v){if(u&&typeof u=="object")for(var S in u)e0(l,S,u[S],f);else{u=x(u);for(var M=0,G=u.length;M<G;M++)e0(l,u[M],f,v)}return this}var na="_leaflet_events";function vt(l,u,f,v){if(arguments.length===1)Ob(l),delete l[na];else if(u&&typeof u=="object")for(var S in u)t0(l,S,u[S],f);else if(u=x(u),arguments.length===2)Ob(l,function(te){return P(u,te)!==-1});else for(var M=0,G=u.length;M<G;M++)t0(l,u[M],f,v);return this}function Ob(l,u){for(var f in l[na]){var v=f.split(/\d/)[0];(!u||u(v))&&t0(l,v,null,null,f)}}var Qg={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function e0(l,u,f,v){var S=u+c(f)+(v?"_"+c(v):"");if(l[na]&&l[na][S])return this;var M=function(te){return f.call(v||l,te||window.event)},G=M;!ze.touchNative&&ze.pointer&&u.indexOf("touch")===0?M=Y4(l,u,M):ze.touch&&u==="dblclick"?M=aC(l,M):"addEventListener"in l?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?l.addEventListener(Qg[u]||u,M,ze.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(M=function(te){te=te||window.event,s0(l,te)&&G(te)},l.addEventListener(Qg[u],M,!1)):l.addEventListener(u,G,!1):l.attachEvent("on"+u,M),l[na]=l[na]||{},l[na][S]=M}function t0(l,u,f,v,S){S=S||u+c(f)+(v?"_"+c(v):"");var M=l[na]&&l[na][S];if(!M)return this;!ze.touchNative&&ze.pointer&&u.indexOf("touch")===0?J4(l,u,M):ze.touch&&u==="dblclick"?nC(l,M):"removeEventListener"in l?l.removeEventListener(Qg[u]||u,M,!1):l.detachEvent("on"+u,M),l[na][S]=null}function di(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function r0(l){return e0(l,"wheel",di),this}function kl(l){return He(l,"mousedown touchstart dblclick contextmenu",di),l._leaflet_disable_click=!0,this}function mr(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function ci(l){return mr(l),di(l),this}function Fb(l){if(l.composedPath)return l.composedPath();for(var u=[],f=l.target;f;)u.push(f),f=f.parentNode;return u}function Bb(l,u){if(!u)return new $(l.clientX,l.clientY);var f=Xg(u),v=f.boundingClientRect;return new $((l.clientX-v.left)/f.x-u.clientLeft,(l.clientY-v.top)/f.y-u.clientTop)}var lC=ze.linux&&ze.chrome?window.devicePixelRatio:ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zb(l){return ze.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/lC:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function s0(l,u){var f=u.relatedTarget;if(!f)return!0;try{for(;f&&f!==l;)f=f.parentNode}catch{return!1}return f!==l}var dC={__proto__:null,on:He,off:vt,stopPropagation:di,disableScrollPropagation:r0,disableClickPropagation:kl,preventDefault:mr,stop:ci,getPropagationPath:Fb,getMousePosition:Bb,getWheelDelta:zb,isExternalTarget:s0,addListener:He,removeListener:vt},$b=Q.extend({run:function(l,u,f,v){this.stop(),this._el=l,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(v||.5,.2),this._startPos=li(l),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(l){var u=+new Date-this._startTime,f=this._duration*1e3;u<f?this._runFrame(this._easeOut(u/f),l):(this._runFrame(1),this._complete())},_runFrame:function(l,u){var f=this._startPos.add(this._offset.multiplyBy(l));u&&f._round(),qt(this._el,f),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),st=Q.extend({options:{crs:we,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,u){u=j(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(pe(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=pl&&ze.any3d&&!ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),He(this._proxy,Mb,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,u,f){if(u=u===void 0?this._zoom:this._limitZoom(u),l=this._limitCenter(pe(l),u,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=n({animate:f.animate},f.zoom),f.pan=n({animate:f.animate,duration:f.duration},f.pan));var v=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,u,f.zoom):this._tryAnimatedPan(l,f.pan);if(v)return clearTimeout(this._sizeTimer),this}return this._resetView(l,u,f.pan&&f.pan.noMoveStart),this},setZoom:function(l,u){return this._loaded?this.setView(this.getCenter(),l,{zoom:u}):(this._zoom=l,this)},zoomIn:function(l,u){return l=l||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,u)},zoomOut:function(l,u){return l=l||(ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,u)},setZoomAround:function(l,u,f){var v=this.getZoomScale(u),S=this.getSize().divideBy(2),M=l instanceof $?l:this.latLngToContainerPoint(l),G=M.subtract(S).multiplyBy(1-1/v),te=this.containerPointToLatLng(S.add(G));return this.setView(te,u,{zoom:f})},_getBoundsCenterZoom:function(l,u){u=u||{},l=l.getBounds?l.getBounds():ge(l);var f=K(u.paddingTopLeft||u.padding||[0,0]),v=K(u.paddingBottomRight||u.padding||[0,0]),S=this.getBoundsZoom(l,!1,f.add(v));if(S=typeof u.maxZoom=="number"?Math.min(u.maxZoom,S):S,S===1/0)return{center:l.getCenter(),zoom:S};var M=v.subtract(f).divideBy(2),G=this.project(l.getSouthWest(),S),te=this.project(l.getNorthEast(),S),ie=this.unproject(G.add(te).divideBy(2).add(M),S);return{center:ie,zoom:S}},fitBounds:function(l,u){if(l=ge(l),!l.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(l,u);return this.setView(f.center,f.zoom,u)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,u){return this.setView(l,this._zoom,{pan:u})},panBy:function(l,u){if(l=K(l).round(),u=u||{},!l.x&&!l.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $b,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){Ge(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,f,u.duration||.25,u.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,u,f){if(f=f||{},f.animate===!1||!ze.any3d)return this.setView(l,u,f);this._stop();var v=this.project(this.getCenter()),S=this.project(l),M=this.getSize(),G=this._zoom;l=pe(l),u=u===void 0?G:u;var te=Math.max(M.x,M.y),ie=te*this.getZoomScale(G,u),fe=S.distanceTo(v)||1,Ce=1.42,Ue=Ce*Ce;function Je(Kt){var eu=Kt?-1:1,JC=Kt?ie:te,XC=ie*ie-te*te+eu*Ue*Ue*fe*fe,QC=2*JC*Ue*fe,g0=XC/QC,kv=Math.sqrt(g0*g0+1)-g0,e6=kv<1e-9?-18:Math.log(kv);return e6}function Dr(Kt){return(Math.exp(Kt)-Math.exp(-Kt))/2}function or(Kt){return(Math.exp(Kt)+Math.exp(-Kt))/2}function js(Kt){return Dr(Kt)/or(Kt)}var Hr=Je(0);function io(Kt){return te*(or(Hr)/or(Hr+Ce*Kt))}function KC(Kt){return te*(or(Hr)*js(Hr+Ce*Kt)-Dr(Hr))/Ue}function GC(Kt){return 1-Math.pow(1-Kt,1.5)}var ZC=Date.now(),bv=(Je(1)-Hr)/Ce,YC=f.duration?1e3*f.duration:1e3*bv*.8;function vv(){var Kt=(Date.now()-ZC)/YC,eu=GC(Kt)*bv;Kt<=1?(this._flyToFrame=Y(vv,this),this._move(this.unproject(v.add(S.subtract(v).multiplyBy(KC(eu)/fe)),G),this.getScaleZoom(te/io(eu),G),{flyTo:!0})):this._move(l,u)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),vv.call(this),this},flyToBounds:function(l,u){var f=this._getBoundsCenterZoom(l,u);return this.flyTo(f.center,f.zoom,u)},setMaxBounds:function(l){return l=ge(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var u=this.options.minZoom;return this.options.minZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var u=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,u){this._enforcingBounds=!0;var f=this.getCenter(),v=this._limitCenter(f,this._zoom,ge(l));return f.equals(v)||this.panTo(v,u),this._enforcingBounds=!1,this},panInside:function(l,u){u=u||{};var f=K(u.paddingTopLeft||u.padding||[0,0]),v=K(u.paddingBottomRight||u.padding||[0,0]),S=this.project(this.getCenter()),M=this.project(l),G=this.getPixelBounds(),te=X([G.min.add(f),G.max.subtract(v)]),ie=te.getSize();if(!te.contains(M)){this._enforcingBounds=!0;var fe=M.subtract(te.getCenter()),Ce=te.extend(M).getSize().subtract(ie);S.x+=fe.x<0?-Ce.x:Ce.x,S.y+=fe.y<0?-Ce.y:Ce.y,this.panTo(this.unproject(S),u),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=n({animate:!1,pan:!0},l===!0?{animate:!0}:l);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),v=u.divideBy(2).round(),S=f.divideBy(2).round(),M=v.subtract(S);return!M.x&&!M.y?this:(l.animate&&l.pan?this.panBy(M):(l.pan&&this._rawPanBy(M),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=n({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=o(this._handleGeolocationResponse,this),f=o(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,f,l):navigator.geolocation.getCurrentPosition(u,f,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var u=l.code,f=l.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var u=l.coords.latitude,f=l.coords.longitude,v=new ne(u,f),S=v.toBounds(l.coords.accuracy*2),M=this._locateOptions;if(M.setView){var G=this.getBoundsZoom(S);this.setView(v,M.maxZoom?Math.min(G,M.maxZoom):G)}var te={latlng:v,bounds:S,timestamp:l.timestamp};for(var ie in l.coords)typeof l.coords[ie]=="number"&&(te[ie]=l.coords[ie]);this.fire("locationfound",te)}},addHandler:function(l,u){if(!u)return this;var f=this[l]=new u(this);return this._handlers.push(f),this.options[l]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)Mt(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,u){var f="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),v=it("div",f,u||this._mapPane);return l&&(this._panes[l]=v),v},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),u=this.unproject(l.getBottomLeft()),f=this.unproject(l.getTopRight());return new le(u,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,u,f){l=ge(l),f=K(f||[0,0]);var v=this.getZoom()||0,S=this.getMinZoom(),M=this.getMaxZoom(),G=l.getNorthWest(),te=l.getSouthEast(),ie=this.getSize().subtract(f),fe=X(this.project(te,v),this.project(G,v)).getSize(),Ce=ze.any3d?this.options.zoomSnap:1,Ue=ie.x/fe.x,Je=ie.y/fe.y,Dr=u?Math.max(Ue,Je):Math.min(Ue,Je);return v=this.getScaleZoom(Dr,v),Ce&&(v=Math.round(v/(Ce/100))*(Ce/100),v=u?Math.ceil(v/Ce)*Ce:Math.floor(v/Ce)*Ce),Math.max(S,Math.min(M,v))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,u){var f=this._getTopLeftPoint(l,u);return new V(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,u){var f=this.options.crs;return u=u===void 0?this._zoom:u,f.scale(l)/f.scale(u)},getScaleZoom:function(l,u){var f=this.options.crs;u=u===void 0?this._zoom:u;var v=f.zoom(l*f.scale(u));return isNaN(v)?1/0:v},project:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(pe(l),u)},unproject:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(K(l),u)},layerPointToLatLng:function(l){var u=K(l).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(l){var u=this.project(pe(l))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(pe(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(ge(l))},distance:function(l,u){return this.options.crs.distance(pe(l),pe(u))},containerPointToLayerPoint:function(l){return K(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return K(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var u=this.containerPointToLayerPoint(K(l));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(l)))},mouseEventToContainerPoint:function(l){return Bb(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var u=this._container=Rb(l);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");He(u,"scroll",this._onScroll,this),this._containerId=c(u)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&ze.any3d,Ge(l,"leaflet-container"+(ze.touch?" leaflet-touch":"")+(ze.retina?" leaflet-retina":"")+(ze.ielt9?" leaflet-oldie":"")+(ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=xl(l,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),qt(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ge(l.markerPane,"leaflet-zoom-hide"),Ge(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,u,f){qt(this._mapPane,new $(0,0));var v=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var S=this._zoom!==u;this._moveStart(S,f)._move(l,u)._moveEnd(S),this.fire("viewreset"),v&&this.fire("load")},_moveStart:function(l,u){return l&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(l,u,f,v){u===void 0&&(u=this._zoom);var S=this._zoom!==u;return this._zoom=u,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),v?f&&f.pinch&&this.fire("zoom",f):((S||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){qt(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[c(this._container)]=this;var u=l?vt:He;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),ze.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,u){for(var f=[],v,S=u==="mouseout"||u==="mouseover",M=l.target||l.srcElement,G=!1;M;){if(v=this._targets[c(M)],v&&(u==="click"||u==="preclick")&&this._draggableMoved(v)){G=!0;break}if(v&&v.listens(u,!0)&&(S&&!s0(M,l)||(f.push(v),S))||M===this._container)break;M=M.parentNode}return!f.length&&!G&&!S&&this.listens(u,!0)&&(f=[this]),f},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var u=l.target||l.srcElement;if(!(!this._loaded||u._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(u))){var f=l.type;f==="mousedown"&&Jg(u),this._fireDOMEvent(l,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,u,f){if(l.type==="click"){var v=n({},l);v.type="preclick",this._fireDOMEvent(v,v.type,f)}var S=this._findEventTargets(l,u);if(f){for(var M=[],G=0;G<f.length;G++)f[G].listens(u,!0)&&M.push(f[G]);S=M.concat(S)}if(S.length){u==="contextmenu"&&mr(l);var te=S[0],ie={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var fe=te.getLatLng&&(!te._radius||te._radius<=10);ie.containerPoint=fe?this.latLngToContainerPoint(te.getLatLng()):this.mouseEventToContainerPoint(l),ie.layerPoint=this.containerPointToLayerPoint(ie.containerPoint),ie.latlng=fe?te.getLatLng():this.layerPointToLatLng(ie.layerPoint)}for(G=0;G<S.length;G++)if(S[G].fire(u,ie,!0),ie.originalEvent._stopped||S[G].options.bubblingMouseEvents===!1&&P(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,u=this._handlers.length;l<u;l++)this._handlers[l].disable()},whenReady:function(l,u){return this._loaded?l.call(u||this,{target:this}):this.on("load",l,u),this},_getMapPanePos:function(){return li(this._mapPane)||new $(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,u){var f=l&&u!==void 0?this._getNewPixelOrigin(l,u):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,u){var f=this.getSize()._divideBy(2);return this.project(l,u)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,u,f){var v=this._getNewPixelOrigin(f,u);return this.project(l,u)._subtract(v)},_latLngBoundsToNewLayerBounds:function(l,u,f){var v=this._getNewPixelOrigin(f,u);return X([this.project(l.getSouthWest(),u)._subtract(v),this.project(l.getNorthWest(),u)._subtract(v),this.project(l.getSouthEast(),u)._subtract(v),this.project(l.getNorthEast(),u)._subtract(v)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,u,f){if(!f)return l;var v=this.project(l,u),S=this.getSize().divideBy(2),M=new V(v.subtract(S),v.add(S)),G=this._getBoundsOffset(M,f,u);return Math.abs(G.x)<=1&&Math.abs(G.y)<=1?l:this.unproject(v.add(G),u)},_limitOffset:function(l,u){if(!u)return l;var f=this.getPixelBounds(),v=new V(f.min.add(l),f.max.add(l));return l.add(this._getBoundsOffset(v,u))},_getBoundsOffset:function(l,u,f){var v=X(this.project(u.getNorthEast(),f),this.project(u.getSouthWest(),f)),S=v.min.subtract(l.min),M=v.max.subtract(l.max),G=this._rebound(S.x,-M.x),te=this._rebound(S.y,-M.y);return new $(G,te)},_rebound:function(l,u){return l+u>0?Math.round(l-u)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(u))},_limitZoom:function(l){var u=this.getMinZoom(),f=this.getMaxZoom(),v=ze.any3d?this.options.zoomSnap:1;return v&&(l=Math.round(l/v)*v),Math.max(u,Math.min(f,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,u){var f=this._getCenterOffset(l)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,u),!0)},_createAnimProxy:function(){var l=this._proxy=it("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(u){var f=Hg,v=this._proxy.style[f];oi(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),v===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),u=this.getZoom();oi(this._proxy,this.project(l,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,u,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var v=this.getZoomScale(u),S=this._getCenterOffset(l)._divideBy(1-1/v);return f.animate!==!0&&!this.getSize().contains(S)?!1:(Y(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(l,u,!0)},this),!0)},_animateZoom:function(l,u,f,v){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=u,Ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:u,noUpdate:v}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function cC(l,u){return new st(l,u)}var $s=T.extend({options:{position:"topright"},initialize:function(l){j(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var u=this._map;return u&&u.removeControl(this),this.options.position=l,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var u=this._container=this.onAdd(l),f=this.getPosition(),v=l._controlCorners[f];return Ge(u,"leaflet-control"),f.indexOf("bottom")!==-1?v.insertBefore(u,v.firstChild):v.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),wl=function(l){return new $s(l)};st.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},u="leaflet-",f=this._controlContainer=it("div",u+"control-container",this._container);function v(S,M){var G=u+S+" "+u+M;l[S+M]=it("div",G,f)}v("top","left"),v("top","right"),v("bottom","left"),v("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Mt(this._controlCorners[l]);Mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ub=$s.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,u,f,v){return f<v?-1:v<f?1:0}},initialize:function(l,u,f){j(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var v in l)this._addLayer(l[v],v);for(v in u)this._addLayer(u[v],v,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return $s.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,u){return this._addLayer(l,u),this._map?this._update():this},addOverlay:function(l,u){return this._addLayer(l,u,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var u=this._getLayer(c(l));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",u=this._container=it("div",l),f=this.options.collapsed;u.setAttribute("aria-haspopup",!0),kl(u),r0(u);var v=this._section=it("section",l+"-list");f&&(this._map.on("click",this.collapse,this),He(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var S=this._layersLink=it("a",l+"-toggle",u);S.href="#",S.title="Layers",S.setAttribute("role","button"),He(S,{keydown:function(M){M.keyCode===13&&this._expandSafely()},click:function(M){mr(M),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=it("div",l+"-base",v),this._separator=it("div",l+"-separator",v),this._overlaysList=it("div",l+"-overlays",v),u.appendChild(v)},_getLayer:function(l){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&c(this._layers[u].layer)===l)return this._layers[u]},_addLayer:function(l,u,f){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:u,overlay:f}),this.options.sortLayers&&this._layers.sort(o(function(v,S){return this.options.sortFunction(v.layer,S.layer,v.name,S.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Fc(this._baseLayersList),Fc(this._overlaysList),this._layerControlInputs=[];var l,u,f,v,S=0;for(f=0;f<this._layers.length;f++)v=this._layers[f],this._addItem(v),u=u||v.overlay,l=l||!v.overlay,S+=v.overlay?0:1;return this.options.hideSingleBase&&(l=l&&S>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=u&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var u=this._getLayer(c(l.target)),f=u.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;f&&this._map.fire(f,u)},_createRadioElement:function(l,u){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(u?' checked="checked"':"")+"/>",v=document.createElement("div");return v.innerHTML=f,v.firstChild},_addItem:function(l){var u=document.createElement("label"),f=this._map.hasLayer(l.layer),v;l.overlay?(v=document.createElement("input"),v.type="checkbox",v.className="leaflet-control-layers-selector",v.defaultChecked=f):v=this._createRadioElement("leaflet-base-layers_"+c(this),f),this._layerControlInputs.push(v),v.layerId=c(l.layer),He(v,"click",this._onInputClick,this);var S=document.createElement("span");S.innerHTML=" "+l.name;var M=document.createElement("span");u.appendChild(M),M.appendChild(v),M.appendChild(S);var G=l.overlay?this._overlaysList:this._baseLayersList;return G.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,u,f,v=[],S=[];this._handlingClick=!0;for(var M=l.length-1;M>=0;M--)u=l[M],f=this._getLayer(u.layerId).layer,u.checked?v.push(f):u.checked||S.push(f);for(M=0;M<S.length;M++)this._map.hasLayer(S[M])&&this._map.removeLayer(S[M]);for(M=0;M<v.length;M++)this._map.hasLayer(v[M])||this._map.addLayer(v[M]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,u,f,v=this._map.getZoom(),S=l.length-1;S>=0;S--)u=l[S],f=this._getLayer(u.layerId).layer,u.disabled=f.options.minZoom!==void 0&&v<f.options.minZoom||f.options.maxZoom!==void 0&&v>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,He(l,"click",mr),this.expand();var u=this;setTimeout(function(){vt(l,"click",mr),u._preventClick=!1})}}),uC=function(l,u,f){return new Ub(l,u,f)},a0=$s.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var u="leaflet-control-zoom",f=it("div",u+" leaflet-bar"),v=this.options;return this._zoomInButton=this._createButton(v.zoomInText,v.zoomInTitle,u+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(v.zoomOutText,v.zoomOutTitle,u+"-out",f,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,u,f,v,S){var M=it("a",f,v);return M.innerHTML=l,M.href="#",M.title=u,M.setAttribute("role","button"),M.setAttribute("aria-label",u),kl(M),He(M,"click",ci),He(M,"click",S,this),He(M,"click",this._refocusOnMap,this),M},_updateDisabled:function(){var l=this._map,u="leaflet-disabled";zt(this._zoomInButton,u),zt(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Ge(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Ge(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});st.mergeOptions({zoomControl:!0}),st.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new a0,this.addControl(this.zoomControl))});var hC=function(l){return new a0(l)},Vb=$s.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var u="leaflet-control-scale",f=it("div",u),v=this.options;return this._addScales(v,u+"-line",f),l.on(v.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),f},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,u,f){l.metric&&(this._mScale=it("div",u,f)),l.imperial&&(this._iScale=it("div",u,f))},_update:function(){var l=this._map,u=l.getSize().y/2,f=l.distance(l.containerPointToLatLng([0,u]),l.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(f)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var u=this._getRoundNum(l),f=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,f,u/l)},_updateImperial:function(l){var u=l*3.2808399,f,v,S;u>5280?(f=u/5280,v=this._getRoundNum(f),this._updateScale(this._iScale,v+" mi",v/f)):(S=this._getRoundNum(u),this._updateScale(this._iScale,S+" ft",S/u))},_updateScale:function(l,u,f){l.style.width=Math.round(this.options.maxWidth*f)+"px",l.innerHTML=u},_getRoundNum:function(l){var u=Math.pow(10,(Math.floor(l)+"").length-1),f=l/u;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,u*f}}),mC=function(l){return new Vb(l)},gC='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',n0=$s.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ze.inlineSvg?gC+" ":"")+"Leaflet</a>"},initialize:function(l){j(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=it("div","leaflet-control-attribution"),kl(this._container);for(var u in l._layers)l._layers[u].getAttribution&&this.addAttribution(l._layers[u].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var u in this._attributions)this._attributions[u]&&l.push(u);var f=[];this.options.prefix&&f.push(this.options.prefix),l.length&&f.push(l.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});st.mergeOptions({attributionControl:!0}),st.addInitHook(function(){this.options.attributionControl&&new n0().addTo(this)});var fC=function(l){return new n0(l)};$s.Layers=Ub,$s.Zoom=a0,$s.Scale=Vb,$s.Attribution=n0,wl.layers=uC,wl.zoom=hC,wl.scale=mC,wl.attribution=fC;var ia=T.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ia.addTo=function(l,u){return l.addHandler(u,this),this};var pC={Events:W},Hb=ze.touch?"touchstart mousedown":"mousedown",hn=Q.extend({options:{clickTolerance:3},initialize:function(l,u,f,v){j(this,v),this._element=l,this._dragStartTarget=u||l,this._preventOutline=f},enable:function(){this._enabled||(He(this._dragStartTarget,Hb,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(hn._dragging===this&&this.finishDrag(!0),vt(this._dragStartTarget,Hb,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Wg(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){hn._dragging===this&&this.finishDrag();return}if(!(hn._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(hn._dragging=this,this._preventOutline&&Jg(this._element),Gg(),yl(),!this._moving)){this.fire("down");var u=l.touches?l.touches[0]:l,f=Db(this._element);this._startPoint=new $(u.clientX,u.clientY),this._startPos=li(this._element),this._parentScale=Xg(f);var v=l.type==="mousedown";He(document,v?"mousemove":"touchmove",this._onMove,this),He(document,v?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var u=l.touches&&l.touches.length===1?l.touches[0]:l,f=new $(u.clientX,u.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,mr(l),this._moved||(this.fire("dragstart"),this._moved=!0,Ge(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),qt(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vt(document,"mousemove touchmove",this._onMove,this),vt(document,"mouseup touchend touchcancel",this._onUp,this),Zg(),bl();var u=this._moved&&this._moving;this._moving=!1,hn._dragging=!1,u&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Wb(l,u,f){var v,S=[1,4,2,8],M,G,te,ie,fe,Ce,Ue,Je;for(M=0,Ce=l.length;M<Ce;M++)l[M]._code=ui(l[M],u);for(te=0;te<4;te++){for(Ue=S[te],v=[],M=0,Ce=l.length,G=Ce-1;M<Ce;G=M++)ie=l[M],fe=l[G],ie._code&Ue?fe._code&Ue||(Je=Vc(fe,ie,Ue,u,f),Je._code=ui(Je,u),v.push(Je)):(fe._code&Ue&&(Je=Vc(fe,ie,Ue,u,f),Je._code=ui(Je,u),v.push(Je)),v.push(ie));l=v}return l}function qb(l,u){var f,v,S,M,G,te,ie,fe,Ce;if(!l||l.length===0)throw new Error("latlngs not passed");ws(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ue=pe([0,0]),Je=ge(l),Dr=Je.getNorthWest().distanceTo(Je.getSouthWest())*Je.getNorthEast().distanceTo(Je.getNorthWest());Dr<1700&&(Ue=i0(l));var or=l.length,js=[];for(f=0;f<or;f++){var Hr=pe(l[f]);js.push(u.project(pe([Hr.lat-Ue.lat,Hr.lng-Ue.lng])))}for(te=ie=fe=0,f=0,v=or-1;f<or;v=f++)S=js[f],M=js[v],G=S.y*M.x-M.y*S.x,ie+=(S.x+M.x)*G,fe+=(S.y+M.y)*G,te+=G*3;te===0?Ce=js[0]:Ce=[ie/te,fe/te];var io=u.unproject(K(Ce));return pe([io.lat+Ue.lat,io.lng+Ue.lng])}function i0(l){for(var u=0,f=0,v=0,S=0;S<l.length;S++){var M=pe(l[S]);u+=M.lat,f+=M.lng,v++}return pe([u/v,f/v])}var xC={__proto__:null,clipPolygon:Wb,polygonCenter:qb,centroid:i0};function Kb(l,u){if(!u||!l.length)return l.slice();var f=u*u;return l=vC(l,f),l=bC(l,f),l}function Gb(l,u,f){return Math.sqrt(jl(l,u,f,!0))}function yC(l,u,f){return jl(l,u,f)}function bC(l,u){var f=l.length,v=typeof Uint8Array<"u"?Uint8Array:Array,S=new v(f);S[0]=S[f-1]=1,o0(l,S,u,0,f-1);var M,G=[];for(M=0;M<f;M++)S[M]&&G.push(l[M]);return G}function o0(l,u,f,v,S){var M=0,G,te,ie;for(te=v+1;te<=S-1;te++)ie=jl(l[te],l[v],l[S],!0),ie>M&&(G=te,M=ie);M>f&&(u[G]=1,o0(l,u,f,v,G),o0(l,u,f,G,S))}function vC(l,u){for(var f=[l[0]],v=1,S=0,M=l.length;v<M;v++)kC(l[v],l[S])>u&&(f.push(l[v]),S=v);return S<M-1&&f.push(l[M-1]),f}var Zb;function Yb(l,u,f,v,S){var M=v?Zb:ui(l,f),G=ui(u,f),te,ie,fe;for(Zb=G;;){if(!(M|G))return[l,u];if(M&G)return!1;te=M||G,ie=Vc(l,u,te,f,S),fe=ui(ie,f),te===M?(l=ie,M=fe):(u=ie,G=fe)}}function Vc(l,u,f,v,S){var M=u.x-l.x,G=u.y-l.y,te=v.min,ie=v.max,fe,Ce;return f&8?(fe=l.x+M*(ie.y-l.y)/G,Ce=ie.y):f&4?(fe=l.x+M*(te.y-l.y)/G,Ce=te.y):f&2?(fe=ie.x,Ce=l.y+G*(ie.x-l.x)/M):f&1&&(fe=te.x,Ce=l.y+G*(te.x-l.x)/M),new $(fe,Ce,S)}function ui(l,u){var f=0;return l.x<u.min.x?f|=1:l.x>u.max.x&&(f|=2),l.y<u.min.y?f|=4:l.y>u.max.y&&(f|=8),f}function kC(l,u){var f=u.x-l.x,v=u.y-l.y;return f*f+v*v}function jl(l,u,f,v){var S=u.x,M=u.y,G=f.x-S,te=f.y-M,ie=G*G+te*te,fe;return ie>0&&(fe=((l.x-S)*G+(l.y-M)*te)/ie,fe>1?(S=f.x,M=f.y):fe>0&&(S+=G*fe,M+=te*fe)),G=l.x-S,te=l.y-M,v?G*G+te*te:new $(S,M)}function ws(l){return!N(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Jb(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ws(l)}function Xb(l,u){var f,v,S,M,G,te,ie,fe;if(!l||l.length===0)throw new Error("latlngs not passed");ws(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ce=pe([0,0]),Ue=ge(l),Je=Ue.getNorthWest().distanceTo(Ue.getSouthWest())*Ue.getNorthEast().distanceTo(Ue.getNorthWest());Je<1700&&(Ce=i0(l));var Dr=l.length,or=[];for(f=0;f<Dr;f++){var js=pe(l[f]);or.push(u.project(pe([js.lat-Ce.lat,js.lng-Ce.lng])))}for(f=0,v=0;f<Dr-1;f++)v+=or[f].distanceTo(or[f+1])/2;if(v===0)fe=or[0];else for(f=0,M=0;f<Dr-1;f++)if(G=or[f],te=or[f+1],S=G.distanceTo(te),M+=S,M>v){ie=(M-v)/S,fe=[te.x-ie*(te.x-G.x),te.y-ie*(te.y-G.y)];break}var Hr=u.unproject(K(fe));return pe([Hr.lat+Ce.lat,Hr.lng+Ce.lng])}var wC={__proto__:null,simplify:Kb,pointToSegmentDistance:Gb,closestPointOnSegment:yC,clipSegment:Yb,_getEdgeIntersection:Vc,_getBitCode:ui,_sqClosestPointOnSegment:jl,isFlat:ws,_flat:Jb,polylineCenter:Xb},l0={project:function(l){return new $(l.lng,l.lat)},unproject:function(l){return new ne(l.y,l.x)},bounds:new V([-180,-90],[180,90])},d0={R:6378137,R_MINOR:6356752314245179e-9,bounds:new V([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var u=Math.PI/180,f=this.R,v=l.lat*u,S=this.R_MINOR/f,M=Math.sqrt(1-S*S),G=M*Math.sin(v),te=Math.tan(Math.PI/4-v/2)/Math.pow((1-G)/(1+G),M/2);return v=-f*Math.log(Math.max(te,1e-10)),new $(l.lng*u*f,v)},unproject:function(l){for(var u=180/Math.PI,f=this.R,v=this.R_MINOR/f,S=Math.sqrt(1-v*v),M=Math.exp(-l.y/f),G=Math.PI/2-2*Math.atan(M),te=0,ie=.1,fe;te<15&&Math.abs(ie)>1e-7;te++)fe=S*Math.sin(G),fe=Math.pow((1-fe)/(1+fe),S/2),ie=Math.PI/2-2*Math.atan(M*fe)-G,G+=ie;return new ne(G*u,l.x*u/f)}},jC={__proto__:null,LonLat:l0,Mercator:d0,SphericalMercator:et},NC=n({},ue,{code:"EPSG:3395",projection:d0,transformation:function(){var l=.5/(Math.PI*d0.R);return z(l,.5,-l,.5)}()}),Qb=n({},ue,{code:"EPSG:4326",projection:l0,transformation:z(1/180,1,-1/180,.5)}),_C=n({},Oe,{projection:l0,transformation:z(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,u){var f=u.lng-l.lng,v=u.lat-l.lat;return Math.sqrt(f*f+v*v)},infinite:!0});Oe.Earth=ue,Oe.EPSG3395=NC,Oe.EPSG3857=we,Oe.EPSG900913=Ie,Oe.EPSG4326=Qb,Oe.Simple=_C;var Us=Q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[c(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[c(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var u=l.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var f=this.getEvents();u.on(f,this),this.once("remove",function(){u.off(f,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});st.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var u=c(l);return this._layers[u]?this:(this._layers[u]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var u=c(l);return this._layers[u]?(this._loaded&&l.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return c(l)in this._layers},eachLayer:function(l,u){for(var f in this._layers)l.call(u,this._layers[f]);return this},_addLayers:function(l){l=l?N(l)?l:[l]:[];for(var u=0,f=l.length;u<f;u++)this.addLayer(l[u])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[c(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var u=c(l);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,u=-1/0,f=this._getZoomSpan();for(var v in this._zoomBoundLayers){var S=this._zoomBoundLayers[v].options;l=S.minZoom===void 0?l:Math.min(l,S.minZoom),u=S.maxZoom===void 0?u:Math.max(u,S.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=l===1/0?void 0:l,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var to=Us.extend({initialize:function(l,u){j(this,u),this._layers={};var f,v;if(l)for(f=0,v=l.length;f<v;f++)this.addLayer(l[f])},addLayer:function(l){var u=this.getLayerId(l);return this._layers[u]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var u=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(l){var u=typeof l=="number"?l:this.getLayerId(l);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var u=Array.prototype.slice.call(arguments,1),f,v;for(f in this._layers)v=this._layers[f],v[l]&&v[l].apply(v,u);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,u){for(var f in this._layers)l.call(u,this._layers[f]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return c(l)}}),SC=function(l,u){return new to(l,u)},Da=to.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),to.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),to.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new le;for(var u in this._layers){var f=this._layers[u];l.extend(f.getBounds?f.getBounds():f.getLatLng())}return l}}),CC=function(l,u){return new Da(l,u)},ro=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){j(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,u){var f=this._getIconUrl(l);if(!f){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var v=this._createImg(f,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(v,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),v},_setIconStyles:function(l,u){var f=this.options,v=f[u+"Size"];typeof v=="number"&&(v=[v,v]);var S=K(v),M=K(u==="shadow"&&f.shadowAnchor||f.iconAnchor||S&&S.divideBy(2,!0));l.className="leaflet-marker-"+u+" "+(f.className||""),M&&(l.style.marginLeft=-M.x+"px",l.style.marginTop=-M.y+"px"),S&&(l.style.width=S.x+"px",l.style.height=S.y+"px")},_createImg:function(l,u){return u=u||document.createElement("img"),u.src=l,u},_getIconUrl:function(l){return ze.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function PC(l){return new ro(l)}var Nl=ro.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Nl.imagePath!="string"&&(Nl.imagePath=this._detectIconPath()),(this.options.imagePath||Nl.imagePath)+ro.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var u=function(f,v,S){var M=v.exec(f);return M&&M[S]};return l=u(l,/^url\((['"])?(.+)\1\)$/,2),l&&u(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=it("div","leaflet-default-icon-path",document.body),u=xl(l,"background-image")||xl(l,"backgroundImage");if(document.body.removeChild(l),u=this._stripUrl(u),u)return u;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),ev=ia.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new hn(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ge(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var u=this._marker,f=u._map,v=this._marker.options.autoPanSpeed,S=this._marker.options.autoPanPadding,M=li(u._icon),G=f.getPixelBounds(),te=f.getPixelOrigin(),ie=X(G.min._subtract(te).add(S),G.max._subtract(te).subtract(S));if(!ie.contains(M)){var fe=K((Math.max(ie.max.x,M.x)-ie.max.x)/(G.max.x-ie.max.x)-(Math.min(ie.min.x,M.x)-ie.min.x)/(G.min.x-ie.min.x),(Math.max(ie.max.y,M.y)-ie.max.y)/(G.max.y-ie.max.y)-(Math.min(ie.min.y,M.y)-ie.min.y)/(G.min.y-ie.min.y)).multiplyBy(v);f.panBy(fe,{animate:!1}),this._draggable._newPos._add(fe),this._draggable._startPos._add(fe),qt(u._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=Y(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,l)))},_onDrag:function(l){var u=this._marker,f=u._shadow,v=li(u._icon),S=u._map.layerPointToLatLng(v);f&&qt(f,v),u._latlng=S,l.latlng=S,l.oldLatLng=this._oldLatLng,u.fire("move",l).fire("drag",l)},_onDragEnd:function(l){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),Hc=Us.extend({options:{icon:new Nl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,u){j(this,u),this._latlng=pe(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var u=this._latlng;return this._latlng=pe(l),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=l.icon.createIcon(this._icon),v=!1;f!==this._icon&&(this._icon&&this._removeIcon(),v=!0,l.title&&(f.title=l.title),f.tagName==="IMG"&&(f.alt=l.alt||"")),Ge(f,u),l.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(f,"focus",this._panOnFocus,this);var S=l.icon.createShadow(this._shadow),M=!1;S!==this._shadow&&(this._removeShadow(),M=!0),S&&(Ge(S,u),S.alt=""),this._shadow=S,l.opacity<1&&this._updateOpacity(),v&&this.getPane().appendChild(this._icon),this._initInteraction(),S&&M&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(this._icon,"focus",this._panOnFocus,this),Mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Mt(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&qt(this._icon,l),this._shadow&&qt(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ev)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ev(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&ks(this._icon,l),this._shadow&&ks(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var u=this.options.icon.options,f=u.iconSize?K(u.iconSize):K(0,0),v=u.iconAnchor?K(u.iconAnchor):K(0,0);l.panInside(this._latlng,{paddingTopLeft:v,paddingBottomRight:f.subtract(v)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function EC(l,u){return new Hc(l,u)}var mn=Us.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return j(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Wc=mn.extend({options:{fill:!0,radius:10},initialize:function(l,u){j(this,u),this._latlng=pe(l),this._radius=this.options.radius},setLatLng:function(l){var u=this._latlng;return this._latlng=pe(l),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var u=l&&l.radius||this._radius;return mn.prototype.setStyle.call(this,l),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,u=this._radiusY||l,f=this._clickTolerance(),v=[l+f,u+f];this._pxBounds=new V(this._point.subtract(v),this._point.add(v))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function IC(l,u){return new Wc(l,u)}var c0=Wc.extend({initialize:function(l,u,f){if(typeof u=="number"&&(u=n({},f,{radius:u})),j(this,u),this._latlng=pe(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new le(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:mn.prototype.setStyle,_project:function(){var l=this._latlng.lng,u=this._latlng.lat,f=this._map,v=f.options.crs;if(v.distance===ue.distance){var S=Math.PI/180,M=this._mRadius/ue.R/S,G=f.project([u+M,l]),te=f.project([u-M,l]),ie=G.add(te).divideBy(2),fe=f.unproject(ie).lat,Ce=Math.acos((Math.cos(M*S)-Math.sin(u*S)*Math.sin(fe*S))/(Math.cos(u*S)*Math.cos(fe*S)))/S;(isNaN(Ce)||Ce===0)&&(Ce=M/Math.cos(Math.PI/180*u)),this._point=ie.subtract(f.getPixelOrigin()),this._radius=isNaN(Ce)?0:ie.x-f.project([fe,l-Ce]).x,this._radiusY=ie.y-G.y}else{var Ue=v.unproject(v.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(Ue).x}this._updateBounds()}});function TC(l,u,f){return new c0(l,u,f)}var Oa=mn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,u){j(this,u),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var u=1/0,f=null,v=jl,S,M,G=0,te=this._parts.length;G<te;G++)for(var ie=this._parts[G],fe=1,Ce=ie.length;fe<Ce;fe++){S=ie[fe-1],M=ie[fe];var Ue=v(l,S,M,!0);Ue<u&&(u=Ue,f=v(l,S,M))}return f&&(f.distance=Math.sqrt(u)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Xb(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,u){return u=u||this._defaultShape(),l=pe(l),u.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new le,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return ws(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var u=[],f=ws(l),v=0,S=l.length;v<S;v++)f?(u[v]=pe(l[v]),this._bounds.extend(u[v])):u[v]=this._convertLatLngs(l[v]);return u},_project:function(){var l=new V;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),u=new $(l,l);this._rawPxBounds&&(this._pxBounds=new V([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(l,u,f){var v=l[0]instanceof ne,S=l.length,M,G;if(v){for(G=[],M=0;M<S;M++)G[M]=this._map.latLngToLayerPoint(l[M]),f.extend(G[M]);u.push(G)}else for(M=0;M<S;M++)this._projectLatlngs(l[M],u,f)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,f,v,S,M,G,te,ie;for(f=0,S=0,M=this._rings.length;f<M;f++)for(ie=this._rings[f],v=0,G=ie.length;v<G-1;v++)te=Yb(ie[v],ie[v+1],l,v,!0),te&&(u[S]=u[S]||[],u[S].push(te[0]),(te[1]!==ie[v+1]||v===G-2)&&(u[S].push(te[1]),S++))}},_simplifyPoints:function(){for(var l=this._parts,u=this.options.smoothFactor,f=0,v=l.length;f<v;f++)l[f]=Kb(l[f],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,u){var f,v,S,M,G,te,ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(f=0,M=this._parts.length;f<M;f++)for(te=this._parts[f],v=0,G=te.length,S=G-1;v<G;S=v++)if(!(!u&&v===0)&&Gb(l,te[S],te[v])<=ie)return!0;return!1}});function LC(l,u){return new Oa(l,u)}Oa._flat=Jb;var so=Oa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qb(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var u=Oa.prototype._convertLatLngs.call(this,l),f=u.length;return f>=2&&u[0]instanceof ne&&u[0].equals(u[f-1])&&u.pop(),u},_setLatLngs:function(l){Oa.prototype._setLatLngs.call(this,l),ws(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ws(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,u=this.options.weight,f=new $(u,u);if(l=new V(l.min.subtract(f),l.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var v=0,S=this._rings.length,M;v<S;v++)M=Wb(this._rings[v],l,!0),M.length&&this._parts.push(M)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var u=!1,f,v,S,M,G,te,ie,fe;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(M=0,ie=this._parts.length;M<ie;M++)for(f=this._parts[M],G=0,fe=f.length,te=fe-1;G<fe;te=G++)v=f[G],S=f[te],v.y>l.y!=S.y>l.y&&l.x<(S.x-v.x)*(l.y-v.y)/(S.y-v.y)+v.x&&(u=!u);return u||Oa.prototype._containsPoint.call(this,l,!0)}});function AC(l,u){return new so(l,u)}var Fa=Da.extend({initialize:function(l,u){j(this,u),this._layers={},l&&this.addData(l)},addData:function(l){var u=N(l)?l:l.features,f,v,S;if(u){for(f=0,v=u.length;f<v;f++)S=u[f],(S.geometries||S.geometry||S.features||S.coordinates)&&this.addData(S);return this}var M=this.options;if(M.filter&&!M.filter(l))return this;var G=qc(l,M);return G?(G.feature=Zc(l),G.defaultOptions=G.options,this.resetStyle(G),M.onEachFeature&&M.onEachFeature(l,G),this.addLayer(G)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=n({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(u){this._setLayerStyle(u,l)},this)},_setLayerStyle:function(l,u){l.setStyle&&(typeof u=="function"&&(u=u(l.feature)),l.setStyle(u))}});function qc(l,u){var f=l.type==="Feature"?l.geometry:l,v=f?f.coordinates:null,S=[],M=u&&u.pointToLayer,G=u&&u.coordsToLatLng||u0,te,ie,fe,Ce;if(!v&&!f)return null;switch(f.type){case"Point":return te=G(v),tv(M,l,te,u);case"MultiPoint":for(fe=0,Ce=v.length;fe<Ce;fe++)te=G(v[fe]),S.push(tv(M,l,te,u));return new Da(S);case"LineString":case"MultiLineString":return ie=Kc(v,f.type==="LineString"?0:1,G),new Oa(ie,u);case"Polygon":case"MultiPolygon":return ie=Kc(v,f.type==="Polygon"?1:2,G),new so(ie,u);case"GeometryCollection":for(fe=0,Ce=f.geometries.length;fe<Ce;fe++){var Ue=qc({geometry:f.geometries[fe],type:"Feature",properties:l.properties},u);Ue&&S.push(Ue)}return new Da(S);case"FeatureCollection":for(fe=0,Ce=f.features.length;fe<Ce;fe++){var Je=qc(f.features[fe],u);Je&&S.push(Je)}return new Da(S);default:throw new Error("Invalid GeoJSON object.")}}function tv(l,u,f,v){return l?l(u,f):new Hc(f,v&&v.markersInheritOptions&&v)}function u0(l){return new ne(l[1],l[0],l[2])}function Kc(l,u,f){for(var v=[],S=0,M=l.length,G;S<M;S++)G=u?Kc(l[S],u-1,f):(f||u0)(l[S]),v.push(G);return v}function h0(l,u){return l=pe(l),l.alt!==void 0?[p(l.lng,u),p(l.lat,u),p(l.alt,u)]:[p(l.lng,u),p(l.lat,u)]}function Gc(l,u,f,v){for(var S=[],M=0,G=l.length;M<G;M++)S.push(u?Gc(l[M],ws(l[M])?0:u-1,f,v):h0(l[M],v));return!u&&f&&S.length>0&&S.push(S[0].slice()),S}function ao(l,u){return l.feature?n({},l.feature,{geometry:u}):Zc(u)}function Zc(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var m0={toGeoJSON:function(l){return ao(this,{type:"Point",coordinates:h0(this.getLatLng(),l)})}};Hc.include(m0),c0.include(m0),Wc.include(m0),Oa.include({toGeoJSON:function(l){var u=!ws(this._latlngs),f=Gc(this._latlngs,u?1:0,!1,l);return ao(this,{type:(u?"Multi":"")+"LineString",coordinates:f})}}),so.include({toGeoJSON:function(l){var u=!ws(this._latlngs),f=u&&!ws(this._latlngs[0]),v=Gc(this._latlngs,f?2:u?1:0,!0,l);return u||(v=[v]),ao(this,{type:(f?"Multi":"")+"Polygon",coordinates:v})}}),to.include({toMultiPoint:function(l){var u=[];return this.eachLayer(function(f){u.push(f.toGeoJSON(l).geometry.coordinates)}),ao(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(l){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(l);var f=u==="GeometryCollection",v=[];return this.eachLayer(function(S){if(S.toGeoJSON){var M=S.toGeoJSON(l);if(f)v.push(M.geometry);else{var G=Zc(M);G.type==="FeatureCollection"?v.push.apply(v,G.features):v.push(G)}}}),f?ao(this,{geometries:v,type:"GeometryCollection"}):{type:"FeatureCollection",features:v}}});function rv(l,u){return new Fa(l,u)}var MC=rv,Yc=Us.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,u,f){this._url=l,this._bounds=ge(u),j(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Qi(this._image),this},bringToBack:function(){return this._map&&eo(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=ge(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",u=this._image=l?this._url:it("img");if(Ge(u,"leaflet-image-layer"),this._zoomAnimated&&Ge(u,"leaflet-zoom-animated"),this.options.className&&Ge(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onload=o(this.fire,this,"load"),u.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(l){var u=this._map.getZoomScale(l.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;oi(this._image,f,u)},_reset:function(){var l=this._image,u=new V(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=u.getSize();qt(l,u.min),l.style.width=f.x+"px",l.style.height=f.y+"px"},_updateOpacity:function(){ks(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),RC=function(l,u,f){return new Yc(l,u,f)},sv=Yc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",u=this._image=l?this._url:it("video");if(Ge(u,"leaflet-image-layer"),this._zoomAnimated&&Ge(u,"leaflet-zoom-animated"),this.options.className&&Ge(u,this.options.className),u.onselectstart=g,u.onmousemove=g,u.onloadeddata=o(this.fire,this,"load"),l){for(var f=u.getElementsByTagName("source"),v=[],S=0;S<f.length;S++)v.push(f[S].src);this._url=f.length>0?v:[u.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var M=0;M<this._url.length;M++){var G=it("source");G.src=this._url[M],u.appendChild(G)}}});function DC(l,u,f){return new sv(l,u,f)}var av=Yc.extend({_initImage:function(){var l=this._image=this._url;Ge(l,"leaflet-image-layer"),this._zoomAnimated&&Ge(l,"leaflet-zoom-animated"),this.options.className&&Ge(l,this.options.className),l.onselectstart=g,l.onmousemove=g}});function OC(l,u,f){return new av(l,u,f)}var oa=Us.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,u){l&&(l instanceof ne||N(l))?(this._latlng=pe(l),j(this,u)):(j(this,l),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&ks(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&ks(this._container,1),this.bringToFront(),this.options.interactive&&(Ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(ks(this._container,0),this._removeTimeout=setTimeout(o(Mt,void 0,this._container),200)):Mt(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=pe(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qi(this._container),this},bringToBack:function(){return this._map&&eo(this._container),this},_prepareOpen:function(l){var u=this._source;if(!u._map)return!1;if(u instanceof Da){u=null;var f=this._source._layers;for(var v in f)if(f[v]._map){u=f[v];break}if(!u)return!1;this._source=u}if(!l)if(u.getCenter)l=u.getCenter();else if(u.getLatLng)l=u.getLatLng();else if(u.getBounds)l=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")l.innerHTML=u;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),u=K(this.options.offset),f=this._getAnchor();this._zoomAnimated?qt(this._container,l.add(f)):u=u.add(l).add(f);var v=this._containerBottom=-u.y,S=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=v+"px",this._container.style.left=S+"px"}},_getAnchor:function(){return[0,0]}});st.include({_initOverlay:function(l,u,f,v){var S=u;return S instanceof l||(S=new l(v).setContent(u)),f&&S.setLatLng(f),S}}),Us.include({_initOverlay:function(l,u,f,v){var S=f;return S instanceof l?(j(S,v),S._source=this):(S=u&&!v?u:new l(v,this),S.setContent(f)),S}});var Jc=oa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,oa.prototype.openOn.call(this,l)},onAdd:function(l){oa.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof mn||this._source.on("preclick",di))},onRemove:function(l){oa.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof mn||this._source.off("preclick",di))},getEvents:function(){var l=oa.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",u=this._container=it("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=it("div",l+"-content-wrapper",u);if(this._contentNode=it("div",l+"-content",f),kl(u),r0(this._contentNode),He(u,"contextmenu",di),this._tipContainer=it("div",l+"-tip-container",u),this._tip=it("div",l+"-tip",this._tipContainer),this.options.closeButton){var v=this._closeButton=it("a",l+"-close-button",u);v.setAttribute("role","button"),v.setAttribute("aria-label","Close popup"),v.href="#close",v.innerHTML='<span aria-hidden="true">&#215;</span>',He(v,"click",function(S){mr(S),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,u=l.style;u.width="",u.whiteSpace="nowrap";var f=l.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),u.width=f+1+"px",u.whiteSpace="",u.height="";var v=l.offsetHeight,S=this.options.maxHeight,M="leaflet-popup-scrolled";S&&v>S?(u.height=S+"px",Ge(l,M)):zt(l,M),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),f=this._getAnchor();qt(this._container,u.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,u=parseInt(xl(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+u,v=this._containerWidth,S=new $(this._containerLeft,-f-this._containerBottom);S._add(li(this._container));var M=l.layerPointToContainerPoint(S),G=K(this.options.autoPanPadding),te=K(this.options.autoPanPaddingTopLeft||G),ie=K(this.options.autoPanPaddingBottomRight||G),fe=l.getSize(),Ce=0,Ue=0;M.x+v+ie.x>fe.x&&(Ce=M.x+v-fe.x+ie.x),M.x-Ce-te.x<0&&(Ce=M.x-te.x),M.y+f+ie.y>fe.y&&(Ue=M.y+f-fe.y+ie.y),M.y-Ue-te.y<0&&(Ue=M.y-te.y),(Ce||Ue)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ce,Ue]))}},_getAnchor:function(){return K(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),FC=function(l,u){return new Jc(l,u)};st.mergeOptions({closePopupOnClick:!0}),st.include({openPopup:function(l,u,f){return this._initOverlay(Jc,l,u,f).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Us.include({bindPopup:function(l,u){return this._popup=this._initOverlay(Jc,this._popup,l,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Da||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){ci(l);var u=l.layer||l.target;if(this._popup._source===u&&!(u instanceof mn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=u,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Xc=oa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){oa.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){oa.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=oa.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",u=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=it("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var u,f,v=this._map,S=this._container,M=v.latLngToContainerPoint(v.getCenter()),G=v.layerPointToContainerPoint(l),te=this.options.direction,ie=S.offsetWidth,fe=S.offsetHeight,Ce=K(this.options.offset),Ue=this._getAnchor();te==="top"?(u=ie/2,f=fe):te==="bottom"?(u=ie/2,f=0):te==="center"?(u=ie/2,f=fe/2):te==="right"?(u=0,f=fe/2):te==="left"?(u=ie,f=fe/2):G.x<M.x?(te="right",u=0,f=fe/2):(te="left",u=ie+(Ce.x+Ue.x)*2,f=fe/2),l=l.subtract(K(u,f,!0)).add(Ce).add(Ue),zt(S,"leaflet-tooltip-right"),zt(S,"leaflet-tooltip-left"),zt(S,"leaflet-tooltip-top"),zt(S,"leaflet-tooltip-bottom"),Ge(S,"leaflet-tooltip-"+te),qt(S,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&ks(this._container,l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(u)},_getAnchor:function(){return K(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),BC=function(l,u){return new Xc(l,u)};st.include({openTooltip:function(l,u,f){return this._initOverlay(Xc,l,u,f).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Us.include({bindTooltip:function(l,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Xc,this._tooltip,l,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var u=l?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[u](f),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Da||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&(He(u,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),He(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var u=l.latlng,f,v;this._tooltip.options.sticky&&l.originalEvent&&(f=this._map.mouseEventToContainerPoint(l.originalEvent),v=this._map.containerPointToLayerPoint(f),u=this._map.layerPointToLatLng(v)),this._tooltip.setLatLng(u)}});var nv=ro.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var u=l&&l.tagName==="DIV"?l:document.createElement("div"),f=this.options;if(f.html instanceof Element?(Fc(u),u.appendChild(f.html)):u.innerHTML=f.html!==!1?f.html:"",f.bgPos){var v=K(f.bgPos);u.style.backgroundPosition=-v.x+"px "+-v.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function zC(l){return new nv(l)}ro.Default=Nl;var _l=Us.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){j(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Mt(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(eo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof $?l:new $(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var u=this.getPane().children,f=-l(-1/0,1/0),v=0,S=u.length,M;v<S;v++)M=u[v].style.zIndex,u[v]!==this._container&&M&&(f=l(f,+M));isFinite(f)&&(this.options.zIndex=f+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ze.ielt9){ks(this._container,this.options.opacity);var l=+new Date,u=!1,f=!1;for(var v in this._tiles){var S=this._tiles[v];if(!(!S.current||!S.loaded)){var M=Math.min(1,(l-S.loaded)/200);ks(S.el,M),M<1?u=!0:(S.active?f=!0:this._onOpaqueTile(S),S.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),u&&(R(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=it("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,u=this.options.maxZoom;if(l!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===l?(this._levels[f].el.style.zIndex=u-Math.abs(l-f),this._onUpdateLevel(f)):(Mt(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var v=this._levels[l],S=this._map;return v||(v=this._levels[l]={},v.el=it("div","leaflet-tile-container leaflet-zoom-animated",this._container),v.el.style.zIndex=u,v.origin=S.project(S.unproject(S.getPixelOrigin()),l).round(),v.zoom=l,this._setZoomTransform(v,S.getCenter(),S.getZoom()),g(v.el.offsetWidth),this._onCreateLevel(v)),this._level=v,v}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var l,u,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)u=this._tiles[l],u.retain=u.current;for(l in this._tiles)if(u=this._tiles[l],u.current&&!u.active){var v=u.coords;this._retainParent(v.x,v.y,v.z,v.z-5)||this._retainChildren(v.x,v.y,v.z,v.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var u in this._tiles)this._tiles[u].coords.z===l&&this._removeTile(u)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Mt(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,u,f,v){var S=Math.floor(l/2),M=Math.floor(u/2),G=f-1,te=new $(+S,+M);te.z=+G;var ie=this._tileCoordsToKey(te),fe=this._tiles[ie];return fe&&fe.active?(fe.retain=!0,!0):(fe&&fe.loaded&&(fe.retain=!0),G>v?this._retainParent(S,M,G,v):!1)},_retainChildren:function(l,u,f,v){for(var S=2*l;S<2*l+2;S++)for(var M=2*u;M<2*u+2;M++){var G=new $(S,M);G.z=f+1;var te=this._tileCoordsToKey(G),ie=this._tiles[te];if(ie&&ie.active){ie.retain=!0;continue}else ie&&ie.loaded&&(ie.retain=!0);f+1<v&&this._retainChildren(S,M,f+1,v)}},_resetView:function(l){var u=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var u=this.options;return u.minNativeZoom!==void 0&&l<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<l?u.maxNativeZoom:l},_setView:function(l,u,f,v){var S=Math.round(u);this.options.maxZoom!==void 0&&S>this.options.maxZoom||this.options.minZoom!==void 0&&S<this.options.minZoom?S=void 0:S=this._clampZoom(S);var M=this.options.updateWhenZooming&&S!==this._tileZoom;(!v||M)&&(this._tileZoom=S,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),S!==void 0&&this._update(l),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(l,u)},_setZoomTransforms:function(l,u){for(var f in this._levels)this._setZoomTransform(this._levels[f],l,u)},_setZoomTransform:function(l,u,f){var v=this._map.getZoomScale(f,l.zoom),S=l.origin.multiplyBy(v).subtract(this._map._getNewPixelOrigin(u,f)).round();ze.any3d?oi(l.el,S,v):qt(l.el,S)},_resetGrid:function(){var l=this._map,u=l.options.crs,f=this._tileSize=this.getTileSize(),v=this._tileZoom,S=this._map.getPixelWorldBounds(this._tileZoom);S&&(this._globalTileRange=this._pxBoundsToTileRange(S)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,u.wrapLng[0]],v).x/f.x),Math.ceil(l.project([0,u.wrapLng[1]],v).x/f.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([u.wrapLat[0],0],v).y/f.x),Math.ceil(l.project([u.wrapLat[1],0],v).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var u=this._map,f=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),v=u.getZoomScale(f,this._tileZoom),S=u.project(l,this._tileZoom).floor(),M=u.getSize().divideBy(v*2);return new V(S.subtract(M),S.add(M))},_update:function(l){var u=this._map;if(u){var f=this._clampZoom(u.getZoom());if(l===void 0&&(l=u.getCenter()),this._tileZoom!==void 0){var v=this._getTiledPixelBounds(l),S=this._pxBoundsToTileRange(v),M=S.getCenter(),G=[],te=this.options.keepBuffer,ie=new V(S.getBottomLeft().subtract([te,-te]),S.getTopRight().add([te,-te]));if(!(isFinite(S.min.x)&&isFinite(S.min.y)&&isFinite(S.max.x)&&isFinite(S.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var fe in this._tiles){var Ce=this._tiles[fe].coords;(Ce.z!==this._tileZoom||!ie.contains(new $(Ce.x,Ce.y)))&&(this._tiles[fe].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(l,f);return}for(var Ue=S.min.y;Ue<=S.max.y;Ue++)for(var Je=S.min.x;Je<=S.max.x;Je++){var Dr=new $(Je,Ue);if(Dr.z=this._tileZoom,!!this._isValidTile(Dr)){var or=this._tiles[this._tileCoordsToKey(Dr)];or?or.current=!0:G.push(Dr)}}if(G.sort(function(Hr,io){return Hr.distanceTo(M)-io.distanceTo(M)}),G.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var js=document.createDocumentFragment();for(Je=0;Je<G.length;Je++)this._addTile(G[Je],js);this._level.el.appendChild(js)}}}},_isValidTile:function(l){var u=this._map.options.crs;if(!u.infinite){var f=this._globalTileRange;if(!u.wrapLng&&(l.x<f.min.x||l.x>f.max.x)||!u.wrapLat&&(l.y<f.min.y||l.y>f.max.y))return!1}if(!this.options.bounds)return!0;var v=this._tileCoordsToBounds(l);return ge(this.options.bounds).overlaps(v)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var u=this._map,f=this.getTileSize(),v=l.scaleBy(f),S=v.add(f),M=u.unproject(v,l.z),G=u.unproject(S,l.z);return[M,G]},_tileCoordsToBounds:function(l){var u=this._tileCoordsToNwSe(l),f=new le(u[0],u[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var u=l.split(":"),f=new $(+u[0],+u[1]);return f.z=+u[2],f},_removeTile:function(l){var u=this._tiles[l];u&&(Mt(u.el),delete this._tiles[l],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Ge(l,"leaflet-tile");var u=this.getTileSize();l.style.width=u.x+"px",l.style.height=u.y+"px",l.onselectstart=g,l.onmousemove=g,ze.ielt9&&this.options.opacity<1&&ks(l,this.options.opacity)},_addTile:function(l,u){var f=this._getTilePos(l),v=this._tileCoordsToKey(l),S=this.createTile(this._wrapCoords(l),o(this._tileReady,this,l));this._initTile(S),this.createTile.length<2&&Y(o(this._tileReady,this,l,null,S)),qt(S,f),this._tiles[v]={el:S,coords:l,current:!0},u.appendChild(S),this.fire("tileloadstart",{tile:S,coords:l})},_tileReady:function(l,u,f){u&&this.fire("tileerror",{error:u,tile:f,coords:l});var v=this._tileCoordsToKey(l);f=this._tiles[v],f&&(f.loaded=+new Date,this._map._fadeAnimated?(ks(f.el,0),R(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),u||(Ge(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ze.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var u=new $(this._wrapX?m(l.x,this._wrapX):l.x,this._wrapY?m(l.y,this._wrapY):l.y);return u.z=l.z,u},_pxBoundsToTileRange:function(l){var u=this.getTileSize();return new V(l.min.unscaleBy(u).floor(),l.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function $C(l){return new _l(l)}var no=_l.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,u){this._url=l,u=j(this,u),u.detectRetina&&ze.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,u){return this._url===l&&u===void 0&&(u=!0),this._url=l,u||this.redraw(),this},createTile:function(l,u){var f=document.createElement("img");return He(f,"load",o(this._tileOnLoad,this,u,f)),He(f,"error",o(this._tileOnError,this,u,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(l),f},getTileUrl:function(l){var u={r:ze.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-l.y;this.options.tms&&(u.y=f),u["-y"]=f}return w(this._url,n(u,this.options))},_tileOnLoad:function(l,u){ze.ielt9?setTimeout(o(l,this,null,u),0):l(null,u)},_tileOnError:function(l,u,f){var v=this.options.errorTileUrl;v&&u.getAttribute("src")!==v&&(u.src=v),l(f,u)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,u=this.options.maxZoom,f=this.options.zoomReverse,v=this.options.zoomOffset;return f&&(l=u-l),l+v},_getSubdomain:function(l){var u=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var l,u;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(u=this._tiles[l].el,u.onload=g,u.onerror=g,!u.complete)){u.src=C;var f=this._tiles[l].coords;Mt(u),delete this._tiles[l],this.fire("tileabort",{tile:u,coords:f})}},_removeTile:function(l){var u=this._tiles[l];if(u)return u.el.setAttribute("src",C),_l.prototype._removeTile.call(this,l)},_tileReady:function(l,u,f){if(!(!this._map||f&&f.getAttribute("src")===C))return _l.prototype._tileReady.call(this,l,u,f)}});function iv(l,u){return new no(l,u)}var ov=no.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,u){this._url=l;var f=n({},this.defaultWmsParams);for(var v in u)v in this.options||(f[v]=u[v]);u=j(this,u);var S=u.detectRetina&&ze.retina?2:1,M=this.getTileSize();f.width=M.x*S,f.height=M.y*S,this.wmsParams=f},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,no.prototype.onAdd.call(this,l)},getTileUrl:function(l){var u=this._tileCoordsToNwSe(l),f=this._crs,v=X(f.project(u[0]),f.project(u[1])),S=v.min,M=v.max,G=(this._wmsVersion>=1.3&&this._crs===Qb?[S.y,S.x,M.y,M.x]:[S.x,S.y,M.x,M.y]).join(","),te=no.prototype.getTileUrl.call(this,l);return te+y(this.wmsParams,te,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+G},setParams:function(l,u){return n(this.wmsParams,l),u||this.redraw(),this}});function UC(l,u){return new ov(l,u)}no.WMS=ov,iv.wms=UC;var Ba=Us.extend({options:{padding:.1},initialize:function(l){j(this,l),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,u){var f=this._map.getZoomScale(u,this._zoom),v=this._map.getSize().multiplyBy(.5+this.options.padding),S=this._map.project(this._center,u),M=v.multiplyBy(-f).add(S).subtract(this._map._getNewPixelOrigin(l,u));ze.any3d?oi(this._container,M,f):qt(this._container,M)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,u=this._map.getSize(),f=this._map.containerPointToLayerPoint(u.multiplyBy(-l)).round();this._bounds=new V(f,f.add(u.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),lv=Ba.extend({options:{tolerance:0},getEvents:function(){var l=Ba.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ba.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");He(l,"mousemove",this._onMouseMove,this),He(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),He(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,Mt(this._container),vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var u in this._layers)l=this._layers[u],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ba.prototype._update.call(this);var l=this._bounds,u=this._container,f=l.getSize(),v=ze.retina?2:1;qt(u,l.min),u.width=v*f.x,u.height=v*f.y,u.style.width=f.x+"px",u.style.height=f.y+"px",ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Ba.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[c(l)]=l;var u=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var u=l._order,f=u.next,v=u.prev;f?f.prev=v:this._drawLast=v,v?v.next=f:this._drawFirst=f,delete l._order,delete this._layers[c(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var u=l.options.dashArray.split(/[, ]+/),f=[],v,S;for(S=0;S<u.length;S++){if(v=Number(u[S]),isNaN(v))return;f.push(v)}l.options._dashArray=f}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var u=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new V,this._redrawBounds.extend(l._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(l._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var u=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,u=this._redrawBounds;if(this._ctx.save(),u){var f=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var v=this._drawFirst;v;v=v.next)l=v.layer,(!u||l._pxBounds&&l._pxBounds.intersects(u))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,u){if(this._drawing){var f,v,S,M,G=l._parts,te=G.length,ie=this._ctx;if(te){for(ie.beginPath(),f=0;f<te;f++){for(v=0,S=G[f].length;v<S;v++)M=G[f][v],ie[v?"lineTo":"moveTo"](M.x,M.y);u&&ie.closePath()}this._fillStroke(ie,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var u=l._point,f=this._ctx,v=Math.max(Math.round(l._radius),1),S=(Math.max(Math.round(l._radiusY),1)||v)/v;S!==1&&(f.save(),f.scale(1,S)),f.beginPath(),f.arc(u.x,u.y/S,v,0,Math.PI*2,!1),S!==1&&f.restore(),this._fillStroke(f,l)}},_fillStroke:function(l,u){var f=u.options;f.fill&&(l.globalAlpha=f.fillOpacity,l.fillStyle=f.fillColor||f.color,l.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(l.setLineDash&&l.setLineDash(u.options&&u.options._dashArray||[]),l.globalAlpha=f.opacity,l.lineWidth=f.weight,l.strokeStyle=f.color,l.lineCap=f.lineCap,l.lineJoin=f.lineJoin,l.stroke())},_onClick:function(l){for(var u=this._map.mouseEventToLayerPoint(l),f,v,S=this._drawFirst;S;S=S.next)f=S.layer,f.options.interactive&&f._containsPoint(u)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(f))&&(v=f);this._fireEvent(v?[v]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,u)}},_handleMouseOut:function(l){var u=this._hoveredLayer;u&&(zt(this._container,"leaflet-interactive"),this._fireEvent([u],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,u){if(!this._mouseHoverThrottled){for(var f,v,S=this._drawFirst;S;S=S.next)f=S.layer,f.options.interactive&&f._containsPoint(u)&&(v=f);v!==this._hoveredLayer&&(this._handleMouseOut(l),v&&(Ge(this._container,"leaflet-interactive"),this._fireEvent([v],l,"mouseover"),this._hoveredLayer=v)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,u,f){this._map._fireDOMEvent(u,f||u.type,l)},_bringToFront:function(l){var u=l._order;if(u){var f=u.next,v=u.prev;if(f)f.prev=v;else return;v?v.next=f:f&&(this._drawFirst=f),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(l)}},_bringToBack:function(l){var u=l._order;if(u){var f=u.next,v=u.prev;if(v)v.next=f;else return;f?f.prev=v:v&&(this._drawLast=v),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(l)}}});function dv(l){return ze.canvas?new lv(l):null}var Sl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),VC={_initContainer:function(){this._container=it("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ba.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var u=l._container=Sl("shape");Ge(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",l._path=Sl("path"),u.appendChild(l._path),this._updateStyle(l),this._layers[c(l)]=l},_addPath:function(l){var u=l._container;this._container.appendChild(u),l.options.interactive&&l.addInteractiveTarget(u)},_removePath:function(l){var u=l._container;Mt(u),l.removeInteractiveTarget(u),delete this._layers[c(l)]},_updateStyle:function(l){var u=l._stroke,f=l._fill,v=l.options,S=l._container;S.stroked=!!v.stroke,S.filled=!!v.fill,v.stroke?(u||(u=l._stroke=Sl("stroke")),S.appendChild(u),u.weight=v.weight+"px",u.color=v.color,u.opacity=v.opacity,v.dashArray?u.dashStyle=N(v.dashArray)?v.dashArray.join(" "):v.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=v.lineCap.replace("butt","flat"),u.joinstyle=v.lineJoin):u&&(S.removeChild(u),l._stroke=null),v.fill?(f||(f=l._fill=Sl("fill")),S.appendChild(f),f.color=v.fillColor||v.color,f.opacity=v.fillOpacity):f&&(S.removeChild(f),l._fill=null)},_updateCircle:function(l){var u=l._point.round(),f=Math.round(l._radius),v=Math.round(l._radiusY||f);this._setPath(l,l._empty()?"M0 0":"AL "+u.x+","+u.y+" "+f+","+v+" 0,"+65535*360)},_setPath:function(l,u){l._path.v=u},_bringToFront:function(l){Qi(l._container)},_bringToBack:function(l){eo(l._container)}},Qc=ze.vml?Sl:Fe,Cl=Ba.extend({_initContainer:function(){this._container=Qc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Mt(this._container),vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ba.prototype._update.call(this);var l=this._bounds,u=l.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,f.setAttribute("width",u.x),f.setAttribute("height",u.y)),qt(f,l.min),f.setAttribute("viewBox",[l.min.x,l.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(l){var u=l._path=Qc("path");l.options.className&&Ge(u,l.options.className),l.options.interactive&&Ge(u,"leaflet-interactive"),this._updateStyle(l),this._layers[c(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Mt(l._path),l.removeInteractiveTarget(l._path),delete this._layers[c(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var u=l._path,f=l.options;u&&(f.stroke?(u.setAttribute("stroke",f.color),u.setAttribute("stroke-opacity",f.opacity),u.setAttribute("stroke-width",f.weight),u.setAttribute("stroke-linecap",f.lineCap),u.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?u.setAttribute("stroke-dasharray",f.dashArray):u.removeAttribute("stroke-dasharray"),f.dashOffset?u.setAttribute("stroke-dashoffset",f.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),f.fill?(u.setAttribute("fill",f.fillColor||f.color),u.setAttribute("fill-opacity",f.fillOpacity),u.setAttribute("fill-rule",f.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(l,u){this._setPath(l,se(l._parts,u))},_updateCircle:function(l){var u=l._point,f=Math.max(Math.round(l._radius),1),v=Math.max(Math.round(l._radiusY),1)||f,S="a"+f+","+v+" 0 1,0 ",M=l._empty()?"M0 0":"M"+(u.x-f)+","+u.y+S+f*2+",0 "+S+-f*2+",0 ";this._setPath(l,M)},_setPath:function(l,u){l._path.setAttribute("d",u)},_bringToFront:function(l){Qi(l._path)},_bringToBack:function(l){eo(l._path)}});ze.vml&&Cl.include(VC);function cv(l){return ze.svg||ze.vml?new Cl(l):null}st.include({getRenderer:function(l){var u=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var u=this._paneRenderers[l];return u===void 0&&(u=this._createRenderer({pane:l}),this._paneRenderers[l]=u),u},_createRenderer:function(l){return this.options.preferCanvas&&dv(l)||cv(l)}});var uv=so.extend({initialize:function(l,u){so.prototype.initialize.call(this,this._boundsToLatLngs(l),u)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=ge(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function HC(l,u){return new uv(l,u)}Cl.create=Qc,Cl.pointsToPath=se,Fa.geometryToLayer=qc,Fa.coordsToLatLng=u0,Fa.coordsToLatLngs=Kc,Fa.latLngToCoords=h0,Fa.latLngsToCoords=Gc,Fa.getFeature=ao,Fa.asFeature=Zc,st.mergeOptions({boxZoom:!0});var hv=ia.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),yl(),Gg(),this._startPoint=this._map.mouseEventToContainerPoint(l),He(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=it("div","leaflet-zoom-box",this._container),Ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var u=new V(this._point,this._startPoint),f=u.getSize();qt(this._box,u.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(Mt(this._box),zt(this._container,"leaflet-crosshair")),bl(),Zg(),vt(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var u=new le(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});st.addInitHook("addHandler","boxZoom",hv),st.mergeOptions({doubleClickZoom:!0});var mv=ia.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var u=this._map,f=u.getZoom(),v=u.options.zoomDelta,S=l.originalEvent.shiftKey?f-v:f+v;u.options.doubleClickZoom==="center"?u.setZoom(S):u.setZoomAround(l.containerPoint,S)}});st.addInitHook("addHandler","doubleClickZoom",mv),st.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gv=ia.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new hn(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ge(this._map.options.maxBounds);this._offsetLimit=X(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var u=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(u),this._prunePositions(u)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,u){return l-(l-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;l.x<u.min.x&&(l.x=this._viscousLimit(l.x,u.min.x)),l.y<u.min.y&&(l.y=this._viscousLimit(l.y,u.min.y)),l.x>u.max.x&&(l.x=this._viscousLimit(l.x,u.max.x)),l.y>u.max.y&&(l.y=this._viscousLimit(l.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,u=Math.round(l/2),f=this._initialWorldOffset,v=this._draggable._newPos.x,S=(v-u+f)%l+u-f,M=(v+u+f)%l-u-f,G=Math.abs(S+f)<Math.abs(M+f)?S:M;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=G},_onDragEnd:function(l){var u=this._map,f=u.options,v=!f.inertia||l.noInertia||this._times.length<2;if(u.fire("dragend",l),v)u.fire("moveend");else{this._prunePositions(+new Date);var S=this._lastPos.subtract(this._positions[0]),M=(this._lastTime-this._times[0])/1e3,G=f.easeLinearity,te=S.multiplyBy(G/M),ie=te.distanceTo([0,0]),fe=Math.min(f.inertiaMaxSpeed,ie),Ce=te.multiplyBy(fe/ie),Ue=fe/(f.inertiaDeceleration*G),Je=Ce.multiplyBy(-Ue/2).round();!Je.x&&!Je.y?u.fire("moveend"):(Je=u._limitOffset(Je,u.options.maxBounds),Y(function(){u.panBy(Je,{duration:Ue,easeLinearity:G,noMoveStart:!0,animate:!0})}))}}});st.addInitHook("addHandler","dragging",gv),st.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fv=ia.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),He(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,u=document.documentElement,f=l.scrollTop||u.scrollTop,v=l.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(v,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var u=this._panKeys={},f=this.keyCodes,v,S;for(v=0,S=f.left.length;v<S;v++)u[f.left[v]]=[-1*l,0];for(v=0,S=f.right.length;v<S;v++)u[f.right[v]]=[l,0];for(v=0,S=f.down.length;v<S;v++)u[f.down[v]]=[0,l];for(v=0,S=f.up.length;v<S;v++)u[f.up[v]]=[0,-1*l]},_setZoomDelta:function(l){var u=this._zoomKeys={},f=this.keyCodes,v,S;for(v=0,S=f.zoomIn.length;v<S;v++)u[f.zoomIn[v]]=l;for(v=0,S=f.zoomOut.length;v<S;v++)u[f.zoomOut[v]]=-l},_addHooks:function(){He(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=l.keyCode,f=this._map,v;if(u in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(v=this._panKeys[u],l.shiftKey&&(v=K(v).multiplyBy(3)),f.options.maxBounds&&(v=f._limitOffset(K(v),f.options.maxBounds)),f.options.worldCopyJump){var S=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(v)));f.panTo(S)}else f.panBy(v)}else if(u in this._zoomKeys)f.setZoom(f.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;ci(l)}}});st.addInitHook("addHandler","keyboard",fv),st.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pv=ia.extend({addHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var u=zb(l),f=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var v=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),v),ci(l)},_performZoom:function(){var l=this._map,u=l.getZoom(),f=this._map.options.zoomSnap||0;l._stop();var v=this._delta/(this._map.options.wheelPxPerZoomLevel*4),S=4*Math.log(2/(1+Math.exp(-Math.abs(v))))/Math.LN2,M=f?Math.ceil(S/f)*f:S,G=l._limitZoom(u+(this._delta>0?M:-M))-u;this._delta=0,this._startTime=null,G&&(l.options.scrollWheelZoom==="center"?l.setZoom(u+G):l.setZoomAround(this._lastMousePos,u+G))}});st.addInitHook("addHandler","scrollWheelZoom",pv);var WC=600;st.mergeOptions({tapHold:ze.touchNative&&ze.safari&&ze.mobile,tapTolerance:15});var xv=ia.extend({addHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var u=l.touches[0];this._startPos=this._newPos=new $(u.clientX,u.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(He(document,"touchend",mr),He(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),WC),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){vt(document,"touchend",mr),vt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)},_onMove:function(l){var u=l.touches[0];this._newPos=new $(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,u){var f=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});f._simulated=!0,u.target.dispatchEvent(f)}});st.addInitHook("addHandler","tapHold",xv),st.mergeOptions({touchZoom:ze.touch,bounceAtZoomLimits:!0});var yv=ia.extend({addHooks:function(){Ge(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var u=this._map;if(!(!l.touches||l.touches.length!==2||u._animatingZoom||this._zooming)){var f=u.mouseEventToContainerPoint(l.touches[0]),v=u.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(f.add(v)._divideBy(2))),this._startDist=f.distanceTo(v),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),mr(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var u=this._map,f=u.mouseEventToContainerPoint(l.touches[0]),v=u.mouseEventToContainerPoint(l.touches[1]),S=f.distanceTo(v)/this._startDist;if(this._zoom=u.getScaleZoom(S,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&S<1||this._zoom>u.getMaxZoom()&&S>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,S===1)return}else{var M=f._add(v)._divideBy(2)._subtract(this._centerPoint);if(S===1&&M.x===0&&M.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(M),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var G=o(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(G,this,!0),mr(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});st.addInitHook("addHandler","touchZoom",yv),st.BoxZoom=hv,st.DoubleClickZoom=mv,st.Drag=gv,st.Keyboard=fv,st.ScrollWheelZoom=pv,st.TapHold=xv,st.TouchZoom=yv,r.Bounds=V,r.Browser=ze,r.CRS=Oe,r.Canvas=lv,r.Circle=c0,r.CircleMarker=Wc,r.Class=T,r.Control=$s,r.DivIcon=nv,r.DivOverlay=oa,r.DomEvent=dC,r.DomUtil=oC,r.Draggable=hn,r.Evented=Q,r.FeatureGroup=Da,r.GeoJSON=Fa,r.GridLayer=_l,r.Handler=ia,r.Icon=ro,r.ImageOverlay=Yc,r.LatLng=ne,r.LatLngBounds=le,r.Layer=Us,r.LayerGroup=to,r.LineUtil=wC,r.Map=st,r.Marker=Hc,r.Mixin=pC,r.Path=mn,r.Point=$,r.PolyUtil=xC,r.Polygon=so,r.Polyline=Oa,r.Popup=Jc,r.PosAnimation=$b,r.Projection=jC,r.Rectangle=uv,r.Renderer=Ba,r.SVG=Cl,r.SVGOverlay=av,r.TileLayer=no,r.Tooltip=Xc,r.Transformation=Ze,r.Util=Z,r.VideoOverlay=sv,r.bind=o,r.bounds=X,r.canvas=dv,r.circle=TC,r.circleMarker=IC,r.control=wl,r.divIcon=zC,r.extend=n,r.featureGroup=CC,r.geoJSON=rv,r.geoJson=MC,r.gridLayer=$C,r.icon=PC,r.imageOverlay=RC,r.latLng=pe,r.latLngBounds=ge,r.layerGroup=SC,r.map=cC,r.marker=EC,r.point=K,r.polygon=AC,r.polyline=LC,r.popup=FC,r.rectangle=HC,r.setOptions=j,r.stamp=c,r.svg=cv,r.svgOverlay=OC,r.tileLayer=iv,r.tooltip=BC,r.transformation=z,r.version=a,r.videoOverlay=DC;var qC=window.L;r.noConflict=function(){return window.L=qC,this},window.L=r})})(dx,dx.exports);var AM=dx.exports;const ns=bx(AM);delete ns.Icon.Default.prototype._getIconUrl;ns.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png"});const MM=({deliveryLocation:e,deliveryAddress:t,pickupLocation:r,orderType:a="delivery"})=>{const n=_.useRef(null),i=_.useRef(null),{t:o}=je(),d=[64.1466,-21.9426],c=[64.1466,-21.9426];return _.useEffect(()=>{if(!n.current||i.current)return;const h=ns.map(n.current,{attributionControl:!1}).setView(e?[e.lat,e.lng]:d,13);if(ns.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}).addTo(h),i.current=h,a==="pickup")ns.marker(c,{icon:ns.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup('<div><div class="font-semibold"> lfng Store</div><div class="text-sm">Laugavegur 123<br/>Reykjavk 101</div></div>').addTo(h).openPopup(),h.setView(c,14);else if(a==="delivery"&&(e&&ns.marker([e.lat,e.lng],{icon:ns.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup('<div class="font-semibold"> Delivery Person</div>').addTo(h),t&&ns.marker([t.latitude||d[0],t.longitude||d[1]],{icon:ns.icon({iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon-2x.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[12,41]})}).bindPopup(`<div><div class="font-semibold"> Delivery Address</div>
            <div class="text-sm">${t.street||""}<br/>${t.city||""} ${t.postalCode||""}</div></div>`).addTo(h),e&&t)){const m=new ns.FeatureGroup([ns.marker([e.lat,e.lng]),ns.marker([t.latitude||d[0],t.longitude||d[1]])]);h.fitBounds(m.getBounds(),{padding:[50,50]})}return setTimeout(()=>{h.invalidateSize()},100),()=>{}},[a]),s.jsxs("div",{className:"space-y-4 h-full",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 flex items-start gap-2",children:[s.jsx(Ta,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:a==="pickup"?o("navigation.language")==="is"?"Pickupstasetning er merkt  kortinu hr a nean":"Pickup location is marked on the map below":o("navigation.language")==="is"?"Stasetning sendara og afhendingarheimilisfang eru sndar  kortinu":"Delivery person and delivery address locations are shown on the map"})]}),s.jsx("div",{ref:n,className:"relative w-full min-h-96 rounded-lg shadow-md border border-gray-200 dark:border-gray-700 overflow-hidden",style:{height:"600px"}}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[o("navigation.language")==="is"?"Kort fr":"Map by"," OpenStreetMap contributors"]})]})},RM=()=>{var j,y,b;const{t:e}=je(),{id:t}=$2(),r=xs(),a=ut(),{currentOrder:n,isLoading:i,error:o}=Se(w=>w.orders),{isAuthenticated:d}=Se(w=>w.auth),[c,h]=_.useState(null);_.useEffect(()=>(t&&a(dh(t)),()=>{a(I7())}),[a,t]),_.useEffect(()=>{d||r("/login")},[d,r]),_.useEffect(()=>{if(n&&n.status==="OUT_FOR_DELIVERY"){const w=setInterval(()=>{h({lat:64.1466+(Math.random()-.5)*.01,lng:-21.9426+(Math.random()-.5)*.01,timestamp:new Date().toISOString()})},5e3);return()=>clearInterval(w)}},[n]);const m=w=>{switch(w){case"PENDING":return s.jsx(nr,{className:"w-6 h-6 text-yellow-600"});case"CONFIRMED":return s.jsx(Ye,{className:"w-6 h-6 text-blue-600"});case"PREPARING":return s.jsx(Ye,{className:"w-6 h-6 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(yr,{className:"w-6 h-6 text-orange-600"});case"DELIVERED":return s.jsx(Ct,{className:"w-6 h-6 text-green-600"});case"CANCELLED":return s.jsx(Rg,{className:"w-6 h-6 text-red-600"});default:return s.jsx(Ye,{className:"w-6 h-6 text-gray-600"})}},g=w=>e("orders.statuses",w),p=w=>({COMPLETED:e("navigation.language")==="is"?"Loki":"Completed",PENDING:e("navigation.language")==="is"?" bi":"Pending",FAILED:e("navigation.language")==="is"?"Mistkst":"Failed",CANCELLED:e("navigation.language")==="is"?"Htt vi":"Cancelled"})[w]||w,k=w=>{switch(w){case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"CONFIRMED":return"bg-blue-100 text-blue-800 border-blue-200";case"PREPARING":return"bg-purple-100 text-purple-800 border-purple-200";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800 border-orange-200";case"DELIVERED":return"bg-green-100 text-green-800 border-green-200";case"CANCELLED":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},x=w=>new Date(w).toLocaleString();return i?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(pt,{size:"large"})}):o||!n?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:e("orderDetailPage.orderNotFound")}),s.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage.orderNotFoundDesc")}),s.jsx("button",{onClick:()=>r("/orders"),className:"btn btn-primary",children:e("orderDetailPage.backToOrders")})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-6 sm:py-8 md:py-12",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8",children:[s.jsxs("button",{onClick:()=>r("/orders"),className:"flex items-center text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 mb-6 font-medium",children:[s.jsx(Bs,{className:"w-5 h-5 mr-2"}),e("orderDetailPage.backToOrders")]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-primary-700 dark:from-primary-700 dark:to-primary-800 px-6 sm:px-8 py-8 text-white",children:s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-2",children:["#",n.orderNumber]}),s.jsxs("p",{className:"text-primary-100 text-sm",children:[e("orderDetailPage.created"),": ",x(n.createdAt)]})]}),s.jsxs("div",{className:`px-4 py-3 rounded-lg flex items-center space-x-2 font-semibold text-lg ${k(n.status)}`,children:[m(n.status),s.jsx("span",{children:g(n.status)})]})]})}),s.jsxs("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Ye,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.orderItems")]}),s.jsx("div",{className:"space-y-6",children:n.items.map((w,N)=>s.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[s.jsx(Ec,{product:w.product,className:"w-20 h-20 sm:w-24 sm:h-24 object-contain flex-shrink-0 bg-white dark:bg-gray-600 rounded-lg p-2",currentLanguage:e("navigation.language")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:w.product.nameIs||w.product.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:w.product.descriptionIs||w.product.description}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:[e("orderDetailPage.quantity"),": ",s.jsx("span",{className:"font-bold text-gray-900 dark:text-white ml-1",children:w.quantity})]}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w.price.toLocaleString()," ",e("common.currency")," ",e("orderDetailPage.each")]})]})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsx("p",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:(w.price*w.quantity).toLocaleString()}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("common.currency")})]})]},N))})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(yr,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(yr,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryMethod")]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-medium",children:((j=n.shippingOption)==null?void 0:j.type)==="pickup"?e("orderDetailPage.storePickup"):e("orderDetailPage.homeDelivery")}),n.pickupTime&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:[s.jsx(nr,{className:"w-4 h-4 inline mr-1"}),e("checkoutPage.pickupTime"),": ",s.jsx("span",{className:"font-semibold",children:n.pickupTime})]})]}),n.address&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(Ta,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.deliveryAddress")]}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[s.jsx("span",{className:"font-medium",children:n.address.street}),s.jsx("br",{}),s.jsxs("span",{className:"text-sm",children:[n.address.city,", ",n.address.postalCode]}),s.jsx("br",{}),s.jsx("span",{className:"text-sm",children:n.address.country})]})]}),n.deliveryPerson&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[s.jsx(ts,{className:"w-4 h-4 mr-2 text-blue-600 dark:text-blue-400"}),e("orderDetailPage.deliveryPerson")]}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:n.deliveryPerson.fullName}),n.deliveryPerson.phone&&s.jsxs("a",{href:`tel:${n.deliveryPerson.phone}`,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center mt-2",children:[s.jsx(qi,{className:"w-3 h-3 mr-1"}),n.deliveryPerson.phone]})]}),n.estimatedDelivery&&s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[s.jsx(Qa,{className:"w-4 h-4 mr-2 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.estimatedDelivery")]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:x(n.estimatedDelivery)})]}),n.deliveredAt&&s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border border-green-200 dark:border-green-800",children:[s.jsxs("h3",{className:"font-semibold text-green-900 dark:text-green-200 mb-2 flex items-center",children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),e("orderDetailPage.deliveredAt")]}),s.jsx("p",{className:"text-green-800 dark:text-green-300",children:x(n.deliveredAt)})]})]}),s.jsx("div",{children:s.jsx(MM,{deliveryLocation:c,deliveryAddress:n.address,orderType:((y=n.shippingOption)==null?void 0:y.type)||"delivery"})})]})]}),n.transaction&&s.jsxs("div",{className:"px-6 sm:px-8 py-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[s.jsx(Ea,{className:"w-6 h-6 mr-3 text-primary-600 dark:text-primary-400"}),e("orderDetailPage.paymentInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg",children:[s.jsx("span",{className:"font-semibold text-gray-900 dark:text-white block mb-2",children:e("orderDetailPage.paymentMethod")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:n.transaction.paymentMethod})]}),s.jsxs("div",{className:`p-5 rounded-lg ${n.transaction.paymentStatus==="COMPLETED"?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"}`,children:[s.jsx("span",{className:`font-semibold block mb-2 ${n.transaction.paymentStatus==="COMPLETED"?"text-green-900 dark:text-green-200":"text-yellow-900 dark:text-yellow-200"}`,children:e("orderDetailPage.status")}),s.jsx("p",{className:n.transaction.paymentStatus==="COMPLETED"?"text-green-800 dark:text-green-300 font-medium":"text-yellow-800 dark:text-yellow-300 font-medium",children:p(n.transaction.paymentStatus)})]})]})]}),n.notes&&s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-blue-50 dark:bg-blue-900/20 border-t border-blue-200 dark:border-blue-800",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(lt,{className:"w-6 h-6 mr-3 text-blue-600 dark:text-blue-400"}),e("orderDetailPage.notes")]}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:n.notes})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:e("orders.title")}),s.jsxs("div",{className:"space-y-4 max-w-md ml-auto",children:[s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:e("orders.reorder")}),s.jsxs("span",{className:"font-medium",children:[((n.totalAmount||0)-(n.deliveryFee||0)).toLocaleString()," ",e("common.currency")]})]}),s.jsxs("div",{className:"flex justify-between text-gray-600 dark:text-gray-400",children:[s.jsx("span",{children:((b=n.shippingOption)==null?void 0:b.type)==="pickup"?e("ordersPage.pickup"):e("ordersPage.delivery")}),s.jsx("span",{className:"font-medium",children:(n.deliveryFee||0)===0?e("common.free"):`${(n.deliveryFee||0).toLocaleString()} ${e("common.currency")}`})]}),s.jsxs("div",{className:"border-t-2 border-gray-300 dark:border-gray-600 pt-4 flex justify-between",children:[s.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("common.total")}),s.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[(n.totalAmount||0).toLocaleString()," ",e("common.currency")]})]})]})]}),s.jsxs("div",{className:"px-6 sm:px-8 py-8 bg-gray-900 dark:bg-black text-white",children:[s.jsx("h2",{className:"text-xl font-bold mb-6",children:e("footer.contact")}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:e("footer.email")}),s.jsx("a",{href:"mailto:info@olfong.is",className:"text-primary-400 hover:text-primary-300 font-medium break-all",children:"info@olfong.is"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-300 mb-2",children:e("footer.phone")}),s.jsx("a",{href:"tel:+3541234567",className:"text-primary-400 hover:text-primary-300 font-medium",children:"+354 123 4567"})]})]})]})]})]})]})})};var Fg={},CS={L:1,M:0,Q:3,H:2},PS={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},DM=PS;function ES(e){this.mode=DM.MODE_8BIT_BYTE,this.data=e}ES.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var OM=ES,ju=CS;function ya(e,t){this.totalCount=e,this.dataCount=t}ya.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ya.getRSBlocks=function(e,t){var r=ya.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=r.length/3,n=new Array,i=0;i<a;i++)for(var o=r[i*3+0],d=r[i*3+1],c=r[i*3+2],h=0;h<o;h++)n.push(new ya(d,c));return n};ya.getRsBlockTable=function(e,t){switch(t){case ju.L:return ya.RS_BLOCK_TABLE[(e-1)*4+0];case ju.M:return ya.RS_BLOCK_TABLE[(e-1)*4+1];case ju.Q:return ya.RS_BLOCK_TABLE[(e-1)*4+2];case ju.H:return ya.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var FM=ya;function IS(){this.buffer=new Array,this.length=0}IS.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var BM=IS,Qs={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Qs.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Qs.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var pr=0;pr<8;pr++)Qs.EXP_TABLE[pr]=1<<pr;for(var pr=8;pr<256;pr++)Qs.EXP_TABLE[pr]=Qs.EXP_TABLE[pr-4]^Qs.EXP_TABLE[pr-5]^Qs.EXP_TABLE[pr-6]^Qs.EXP_TABLE[pr-8];for(var pr=0;pr<255;pr++)Qs.LOG_TABLE[Qs.EXP_TABLE[pr]]=pr;var TS=Qs,hi=TS;function Th(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var a=0;a<e.length-r;a++)this.num[a]=e[a+r]}Th.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var a=0;a<e.getLength();a++)t[r+a]^=hi.gexp(hi.glog(this.get(r))+hi.glog(e.get(a)));return new Th(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=hi.glog(this.get(0))-hi.glog(e.get(0)),r=new Array(this.getLength()),a=0;a<this.getLength();a++)r[a]=this.get(a);for(var a=0;a<e.getLength();a++)r[a]^=hi.gexp(hi.glog(e.get(a))+t);return new Th(r,0).mod(e)}};var LS=Th,_s=PS,Ww=LS,zM=TS,fn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},gr={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;gr.getBCHDigit(t)-gr.getBCHDigit(gr.G15)>=0;)t^=gr.G15<<gr.getBCHDigit(t)-gr.getBCHDigit(gr.G15);return(e<<10|t)^gr.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;gr.getBCHDigit(t)-gr.getBCHDigit(gr.G18)>=0;)t^=gr.G18<<gr.getBCHDigit(t)-gr.getBCHDigit(gr.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return gr.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case fn.PATTERN000:return(t+r)%2==0;case fn.PATTERN001:return t%2==0;case fn.PATTERN010:return r%3==0;case fn.PATTERN011:return(t+r)%3==0;case fn.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case fn.PATTERN101:return t*r%2+t*r%3==0;case fn.PATTERN110:return(t*r%2+t*r%3)%2==0;case fn.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Ww([1],0),r=0;r<e;r++)t=t.multiply(new Ww([1,zM.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case _s.MODE_NUMBER:return 10;case _s.MODE_ALPHA_NUM:return 9;case _s.MODE_8BIT_BYTE:return 8;case _s.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case _s.MODE_NUMBER:return 12;case _s.MODE_ALPHA_NUM:return 11;case _s.MODE_8BIT_BYTE:return 16;case _s.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case _s.MODE_NUMBER:return 14;case _s.MODE_ALPHA_NUM:return 13;case _s.MODE_8BIT_BYTE:return 16;case _s.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,a=0;a<t;a++)for(var n=0;n<t;n++){for(var i=0,o=e.isDark(a,n),d=-1;d<=1;d++)if(!(a+d<0||t<=a+d))for(var c=-1;c<=1;c++)n+c<0||t<=n+c||d==0&&c==0||o==e.isDark(a+d,n+c)&&i++;i>5&&(r+=3+i-5)}for(var a=0;a<t-1;a++)for(var n=0;n<t-1;n++){var h=0;e.isDark(a,n)&&h++,e.isDark(a+1,n)&&h++,e.isDark(a,n+1)&&h++,e.isDark(a+1,n+1)&&h++,(h==0||h==4)&&(r+=3)}for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(a,n)&&!e.isDark(a,n+1)&&e.isDark(a,n+2)&&e.isDark(a,n+3)&&e.isDark(a,n+4)&&!e.isDark(a,n+5)&&e.isDark(a,n+6)&&(r+=40);for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(a,n)&&!e.isDark(a+1,n)&&e.isDark(a+2,n)&&e.isDark(a+3,n)&&e.isDark(a+4,n)&&!e.isDark(a+5,n)&&e.isDark(a+6,n)&&(r+=40);for(var m=0,n=0;n<t;n++)for(var a=0;a<t;a++)e.isDark(a,n)&&m++;var g=Math.abs(100*m/t/t-50)/5;return r+=g*10,r}},$M=gr,UM=OM,AS=FM,MS=BM,ni=$M,VM=LS;function va(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var ys=va.prototype;ys.addData=function(e){var t=new UM(e);this.dataList.push(t),this.dataCache=null};ys.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};ys.getModuleCount=function(){return this.moduleCount};ys.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=AS.getRSBlocks(e,this.errorCorrectLevel),r=new MS,a=0,n=0;n<t.length;n++)a+=t[n].dataCount;for(var n=0;n<this.dataList.length;n++){var i=this.dataList[n];r.put(i.mode,4),r.put(i.getLength(),ni.getLengthInBits(i.mode,e)),i.write(r)}if(r.getLengthInBits()<=a*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};ys.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=va.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};ys.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(0<=r&&r<=6&&(a==0||a==6)||0<=a&&a<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=a&&a<=4?this.modules[e+r][t+a]=!0:this.modules[e+r][t+a]=!1)};ys.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var a=ni.getLostPoint(this);(r==0||e>a)&&(e=a,t=r)}return t};ys.createMovieClip=function(e,t,r){var a=e.createEmptyMovieClip(t,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*n,d=0;d<this.modules[i].length;d++){var c=d*n,h=this.modules[i][d];h&&(a.beginFill(0,100),a.moveTo(c,o),a.lineTo(c+n,o),a.lineTo(c+n,o+n),a.lineTo(c,o+n),a.endFill())}return a};ys.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};ys.setupPositionAdjustPattern=function(){for(var e=ni.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var a=e[t],n=e[r];if(this.modules[a][n]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[a+i][n+o]=!0:this.modules[a+i][n+o]=!1}};ys.setupTypeNumber=function(e){for(var t=ni.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var a=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=a}for(var r=0;r<18;r++){var a=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=a}};ys.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,a=ni.getBCHTypeInfo(r),n=0;n<15;n++){var i=!e&&(a>>n&1)==1;n<6?this.modules[n][8]=i:n<8?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;n<15;n++){var i=!e&&(a>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=i:n<9?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!e};ys.mapData=function(e,t){for(var r=-1,a=this.moduleCount-1,n=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var d=0;d<2;d++)if(this.modules[a][o-d]==null){var c=!1;i<e.length&&(c=(e[i]>>>n&1)==1);var h=ni.getMask(t,a,o-d);h&&(c=!c),this.modules[a][o-d]=c,n--,n==-1&&(i++,n=7)}if(a+=r,a<0||this.moduleCount<=a){a-=r,r=-r;break}}};va.PAD0=236;va.PAD1=17;va.createData=function(e,t,r){for(var a=AS.getRSBlocks(e,t),n=new MS,i=0;i<r.length;i++){var o=r[i];n.put(o.mode,4),n.put(o.getLength(),ni.getLengthInBits(o.mode,e)),o.write(n)}for(var d=0,i=0;i<a.length;i++)d+=a[i].dataCount;if(n.getLengthInBits()>d*8)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+d*8+")");for(n.getLengthInBits()+4<=d*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=d*8||(n.put(va.PAD0,8),n.getLengthInBits()>=d*8));)n.put(va.PAD1,8);return va.createBytes(n,a)};va.createBytes=function(e,t){for(var r=0,a=0,n=0,i=new Array(t.length),o=new Array(t.length),d=0;d<t.length;d++){var c=t[d].dataCount,h=t[d].totalCount-c;a=Math.max(a,c),n=Math.max(n,h),i[d]=new Array(c);for(var m=0;m<i[d].length;m++)i[d][m]=255&e.buffer[m+r];r+=c;var g=ni.getErrorCorrectPolynomial(h),p=new VM(i[d],g.getLength()-1),k=p.mod(g);o[d]=new Array(g.getLength()-1);for(var m=0;m<o[d].length;m++){var x=m+k.getLength()-o[d].length;o[d][m]=x>=0?k.get(x):0}}for(var j=0,m=0;m<t.length;m++)j+=t[m].totalCount;for(var y=new Array(j),b=0,m=0;m<a;m++)for(var d=0;d<t.length;d++)m<i[d].length&&(y[b++]=i[d][m]);for(var m=0;m<n;m++)for(var d=0;d<t.length;d++)m<o[d].length&&(y[b++]=o[d][m]);return y};var HM=va,ob={};Object.defineProperty(ob,"__esModule",{value:!0});var WM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},qM=Jy,Ss=DS(qM),RS=_,Nu=DS(RS);function DS(e){return e&&e.__esModule?e:{default:e}}function KM(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var GM={bgColor:Ss.default.oneOfType([Ss.default.object,Ss.default.string]).isRequired,bgD:Ss.default.string.isRequired,fgColor:Ss.default.oneOfType([Ss.default.object,Ss.default.string]).isRequired,fgD:Ss.default.string.isRequired,size:Ss.default.number.isRequired,title:Ss.default.string,viewBoxSize:Ss.default.number.isRequired,xmlns:Ss.default.string},lb=(0,RS.forwardRef)(function(e,t){var r=e.bgColor,a=e.bgD,n=e.fgD,i=e.fgColor,o=e.size,d=e.title,c=e.viewBoxSize,h=e.xmlns,m=h===void 0?"http://www.w3.org/2000/svg":h,g=KM(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Nu.default.createElement("svg",WM({},g,{height:o,ref:t,viewBox:"0 0 "+c+" "+c,width:o,xmlns:m}),d?Nu.default.createElement("title",null,d):null,Nu.default.createElement("path",{d:a,fill:r}),Nu.default.createElement("path",{d:n,fill:i}))});lb.displayName="QRCodeSvg";lb.propTypes=GM;ob.default=lb;Object.defineProperty(Fg,"__esModule",{value:!0});Fg.QRCode=void 0;var ZM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},YM=Jy,Ua=Tc(YM),JM=CS,XM=Tc(JM),QM=HM,eR=Tc(QM),OS=_,tR=Tc(OS),rR=ob,sR=Tc(rR);function Tc(e){return e&&e.__esModule?e:{default:e}}function aR(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var nR={bgColor:Ua.default.oneOfType([Ua.default.object,Ua.default.string]),fgColor:Ua.default.oneOfType([Ua.default.object,Ua.default.string]),level:Ua.default.string,size:Ua.default.number,value:Ua.default.string.isRequired},Bg=(0,OS.forwardRef)(function(e,t){var r=e.bgColor,a=r===void 0?"#FFFFFF":r,n=e.fgColor,i=n===void 0?"#000000":n,o=e.level,d=o===void 0?"L":o,c=e.size,h=c===void 0?256:c,m=e.value,g=aR(e,["bgColor","fgColor","level","size","value"]),p=new eR.default(-1,XM.default[d]);p.addData(m),p.make();var k=p.modules;return tR.default.createElement(sR.default,ZM({},g,{bgColor:a,bgD:k.map(function(x,j){return x.map(function(y,b){return y?"":"M "+b+" "+j+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:k.map(function(x,j){return x.map(function(y,b){return y?"M "+b+" "+j+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:h,viewBoxSize:k.length}))});Fg.QRCode=Bg;Bg.displayName="QRCode";Bg.propTypes=nR;var iR=Fg.default=Bg;const oR=({order:e,settings:t,template:r="modern",paperSize:a="80mm",showBarcode:n=!0,showQrCode:i=!0,className:o=""})=>{var w;const d=N=>`${new Intl.NumberFormat("is-IS",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(N)} kr.`,c=N=>new Intl.DateTimeFormat("is-IS",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(N)),h=()=>t.companyNameIs||t.companyName,m=()=>t.companyAddressIs||t.companyAddress,g=()=>t.footerTextIs||t.footerText,p=()=>t.fromNameIs||t.fromName,k=()=>(t.logoInversion||"none")==="always"?{filter:"invert(1)"}:{},x=()=>t.logoUrl?t.logoUrl.startsWith("http")?t.logoUrl:`${"https://olfong.olibuijr.com/api".replace("/api","")}${t.logoUrl}`:null,j=()=>{const N={color:"white"};return t.useGradient&&t.headerGradient?{...N,background:t.headerGradient,WebkitPrintColorAdjust:"exact",printColorAdjust:"exact"}:{...N,backgroundColor:t.headerColor||"#1e40af",WebkitPrintColorAdjust:"exact",printColorAdjust:"exact"}},y=a.toLowerCase().replace(/[^a-z0-9]/g,""),b=r||"modern";return s.jsxs("div",{className:`receipt receipt-${b} receipt-${y} ${o}`,style:{"--receipt-header-color":t.headerColor||"#1e40af","--receipt-accent-color":t.accentColor||"#3b82f6",fontFamily:t.fontFamily||"'Courier New', monospace",fontSize:t.fontSize||"14px",padding:0},children:[s.jsxs("div",{className:"header",style:{...j(),margin:0},children:[x()&&s.jsx("div",{className:"mb-2 flex justify-center",children:s.jsx("img",{src:x(),alt:h(),className:"h-12",style:{maxHeight:"48px",...k()}})}),!x()&&s.jsx("div",{className:"company-name",style:{color:"white"},children:h()}),m()&&s.jsx("div",{className:"company-details",children:m()}),t.companyPhone&&s.jsx("div",{className:"company-details",children:t.companyPhone}),t.companyEmail&&s.jsx("div",{className:"company-details",children:t.companyEmail}),t.companyWebsite&&s.jsx("div",{className:"company-details",children:t.companyWebsite}),t.taxId&&s.jsxs("div",{className:"company-details",children:["VSK nr.",": ",t.taxId]})]}),s.jsxs("div",{className:"content",children:[s.jsxs("div",{className:"order-info",children:[s.jsxs("div",{className:"order-number",children:["Pntun",": #",e.orderNumber]}),s.jsxs("div",{className:"order-details",children:["Dagsetning",": ",c(e.createdAt)]}),e.customer&&s.jsxs("div",{className:"order-details",children:["Viskiptavinur",": ",e.customer.name]}),e.deliveryMethod&&s.jsxs("div",{className:"order-details",children:["Afhendingarafer",": ",e.deliveryMethod==="PICKUP"?"Skja  verslun":"Heimsending"]}),e.deliveryMethod==="PICKUP"&&e.pickupTime&&s.jsxs("div",{className:"order-details",children:["Afhendingartmi",": ",e.pickupTime]}),e.deliveryAddress&&s.jsxs("div",{className:"order-details",children:["Heimilisfang",": ",e.deliveryAddress.address]}),e.paymentMethod&&s.jsxs("div",{className:"order-details",children:["Greisla",": ",e.paymentMethod]})]}),s.jsx("div",{className:"items",children:(w=e.items)==null?void 0:w.map((N,P)=>{var C;return s.jsxs("div",{className:"item",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"item-name",children:(C=N.product)==null?void 0:C.name}),N.quantity>1&&s.jsxs("div",{className:"item-details",children:[N.quantity," x ",d(N.price||0)]}),N.notes&&s.jsxs("div",{className:"item-details",children:["Athugasemd",": ",N.notes]})]}),s.jsx("div",{className:"item-price",children:d((N.price||0)*(N.quantity||1))})]},P)})}),s.jsxs("div",{className:"totals",children:[s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["Vrur",":"]}),s.jsx("span",{children:d(e.subtotal||0)})]}),e.shippingCost>0&&s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["Sendingarkostnaur",":"]}),s.jsx("span",{children:d(e.shippingCost)})]}),e.taxAmount>0&&s.jsxs("div",{className:"total-line",children:[s.jsxs("span",{children:["VSK",":"]}),s.jsx("span",{children:d(e.taxAmount)})]}),s.jsxs("div",{className:"total-line final",children:[s.jsxs("span",{children:["Samtals",":"]}),s.jsx("span",{children:d(e.totalAmount||0)})]})]}),(n||i)&&s.jsxs("div",{className:"codes",children:[i&&s.jsxs("div",{className:"qr-code",children:[s.jsx("div",{className:"text-xs mb-1",children:"QR ki"}),s.jsx("div",{className:"w-20 h-20 mx-auto flex items-center justify-center",children:s.jsx(iR,{value:`${window.location.origin}/orders/${e.id}`,size:80,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]}),n&&s.jsxs("div",{className:"barcode",children:[s.jsx("div",{className:"text-xs mb-1",children:"Strikamerki"}),s.jsx("div",{className:"h-8 bg-gray-200 mx-auto flex items-center justify-center text-xs",children:"||||||||||||||||||||"})]})]}),s.jsxs("div",{className:"footer",children:[g()&&s.jsx("div",{className:"footer-text",children:g()}),s.jsxs("div",{className:"company-info",children:[p()," - ",m()]}),s.jsxs("div",{className:"company-info",children:[t.companyPhone," - ",t.companyEmail]})]})]})]})},FS=({isOpen:e,onClose:t,order:r,onEmailSent:a})=>{var P;const{t:n}=je(),i=ut(),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,g]=_.useState(null),[p,k]=_.useState("screen"),{settings:x,isLoading:j}=Se(C=>C.receiptSettings),{user:y}=Se(C=>C.auth);_.useEffect(()=>{e&&!x&&i($o())},[e,x,i]),_.useEffect(()=>{if(!e)return;const C=A=>{A.key==="Escape"&&t()};return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[e,t]);const b=()=>{k("print"),setTimeout(()=>{window.print(),k("screen")},100)},w=async()=>{if(r!=null&&r.id){d(!0);try{const C=await fetch(`/api/orders/${r.id}/receipt/pdf`,{headers:{Authorization:`Bearer ${y==null?void 0:y.token}`}});if(C.ok){const A=await C.blob(),E=window.URL.createObjectURL(A),F=document.createElement("a");F.href=E,F.download=`receipt-${r.orderNumber}.pdf`,document.body.appendChild(F),F.click(),window.URL.revokeObjectURL(E),document.body.removeChild(F)}else throw new Error("Failed to generate PDF")}catch(C){console.error("Error downloading PDF:",C),alert(n("receipts.pdfDownloadError"))}finally{d(!1)}}},N=async()=>{var C;if(!(r!=null&&r.id)||!((C=r==null?void 0:r.customer)!=null&&C.email)){alert(n("receipts.noEmailAddress"));return}d(!0),g(null);try{const A=await i(hh({orderId:r.id,email:r.customer.email})).unwrap();h(!0),a&&a(A)}catch(A){console.error("Error sending email:",A),g(A.message||n("receipts.emailSendError"))}finally{d(!1)}};return!e||!r?null:s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50 dark:bg-black/70",onClick:t}),s.jsxs("div",{className:"relative w-full max-w-4xl h-[90vh] bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden px-4 sm:px-6 py-5 sm:py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[n("receipts.receiptForOrder")," #",r.orderNumber]}),s.jsx("button",{onClick:t,className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(at,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[s.jsxs("button",{onClick:b,className:"btn btn-outline flex items-center gap-2",disabled:o,children:[s.jsx(Ky,{className:"w-4 h-4"}),n("receipts.print")]}),s.jsxs("button",{onClick:w,disabled:o,className:"btn btn-outline flex items-center gap-2",children:[s.jsx(Ia,{className:"w-4 h-4"}),n(o?"common.loading":"receipts.downloadPdf")]}),((P=r.customer)==null?void 0:P.email)&&s.jsxs("button",{onClick:N,disabled:o||c,className:`btn flex items-center gap-2 ${c?"btn-secondary":"btn-primary"}`,children:[s.jsx(os,{className:"w-4 h-4"}),n(o?"common.sending":c?"receipts.emailSent":"receipts.emailReceipt")]})]}),m&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/30 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded",children:m}),c&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 dark:bg-green-900/30 border border-green-400 dark:border-green-700 text-green-700 dark:text-green-300 rounded",children:n("receipts.emailSentSuccess")}),s.jsx("div",{className:"flex flex-col flex-1 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-900/50 overflow-hidden",children:j?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n("common.loading")})}):x?s.jsx("div",{className:"flex-1 overflow-y-auto flex items-center justify-center p-4 w-full",children:s.jsx("div",{className:"w-full h-full flex items-center justify-center",children:s.jsx(oR,{order:r,settings:x,template:x.template,paperSize:x.paperSize,showBarcode:x.showBarcode,showQrCode:x.showQrCode,className:p==="print"?"receipt-print":""})})}):s.jsx("div",{className:"flex-1 flex items-center justify-center overflow-y-auto p-4",children:s.jsxs("div",{className:"max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"text-red-600 dark:text-red-400 font-semibold mb-2",children:n("receipts.settingsNotFound")}),s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:n("receipts.configureInSettings")})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[s.jsx("div",{className:"font-semibold text-red-900 dark:text-red-200 mb-3 text-sm",children:"Required Configuration:"}),s.jsxs("ul",{className:"space-y-2 text-sm",children:[s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Name (English & Icelandic)"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Address (English & Icelandic)"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Phone Number"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Company Email Address"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Header Color"})]}),s.jsxs("li",{className:"flex items-start gap-2 text-red-800 dark:text-red-300",children:[s.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-red-600 mt-1.5 flex-shrink-0"}),s.jsx("span",{children:"Paper Size Selection"})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-red-200 dark:border-red-800",children:s.jsxs("a",{href:"/admin/settings/receipts",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 font-medium text-sm",children:[s.jsx("span",{children:"Configure Receipt Settings"}),s.jsx("span",{children:""})]})})]})]})})})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 px-4 sm:px-6 py-3 sm:py-4 flex justify-end gap-2",children:s.jsx("button",{onClick:t,className:"btn btn-secondary dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:n("common.close")})})]})]})},lR=()=>{const{t:e}=je(),t=ut(),{user:r,isAuthenticated:a}=Se(V=>V.auth),{orders:n,pagination:i,filters:o,isLoading:d}=Se(V=>V.orders),{addresses:c,isLoading:h}=Se(V=>V.addresses),[m,g]=_.useState(!1),[p,k]=_.useState(null),[x,j]=_.useState(!1),[y,b]=_.useState(!1),[w,N]=_.useState(null),{register:P,handleSubmit:C,formState:{errors:A},reset:E}=Ki({defaultValues:{fullName:"",email:"",phone:""}}),{register:F,handleSubmit:I,formState:{errors:D},reset:Y}=Ki({defaultValues:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1}});_.useEffect(()=>{a&&t(jd())},[t,a]),_.useEffect(()=>{a&&t(Oo(o))},[t,a,o]),_.useEffect(()=>{r&&E({fullName:r.fullName||"",email:r.email||"",phone:r.phone||""})},[r,E]),_.useEffect(()=>{Y(p?{street:p.street||"",city:p.city||"",postalCode:p.postalCode||"",country:p.country||"Iceland",isDefault:p.isDefault||!1}:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1})},[p,Y]);const R=async V=>{try{await t(lh(V)).unwrap(),q.success(e("profile.updateSuccess")),j(!1)}catch(X){q.error(X.message||e("profile.updateError"))}},Z=async V=>{try{p?(await t(Eh({id:p.id,...V})).unwrap(),q.success(e("addresses.edit"))):(await t(Nd(V)).unwrap(),q.success(e("addresses.add"))),g(!1),k(null)}catch(X){q.error(X.message||e("common.error"))}},T=V=>{k(V),g(!0)},B=async V=>{if(window.confirm(e("addresses.delete")+"?"))try{await t(Ih(V)).unwrap(),q.success(e("common.success"))}catch(X){q.error(X.message||e("common.error"))}},W=()=>{t($y()),q.success(e("auth.logout"))},Q=V=>{switch(V){case"PENDING":return s.jsx(nr,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return s.jsx(Ye,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ye,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(yr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(Ct,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return s.jsx(Rg,{className:"w-5 h-5 text-red-600"});default:return s.jsx(Ye,{className:"w-5 h-5 text-gray-600"})}},$=V=>e("orders.statuses",V),O=V=>{switch(V){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},K=V=>{t(E7({status:V===o.status?"":V}))};return a?h||d?s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(pt,{size:"large"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("profile.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("profilePage.manageInfo")})]}),s.jsx("button",{onClick:W,className:"inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 mt-4 sm:mt-0 whitespace-nowrap flex-shrink-0",children:e("profilePage.logout")})]})})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[s.jsx(ts,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e("profilePage.personalInformation")})]}),s.jsx("button",{onClick:()=>j(!x),className:"btn btn-outline btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:x?s.jsxs(s.Fragment,{children:[s.jsx(at,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.cancel")})]}):s.jsxs(s.Fragment,{children:[s.jsx(La,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.edit")})]})})]}),x?s.jsxs("form",{onSubmit:C(R),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.fullName")}),s.jsx("input",{...P("fullName"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.fullName")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.email")}),s.jsx("input",{type:"email",...P("email",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.email")}),A.email&&s.jsxs("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:[e("profilePage.email")," ",e("common.error")]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage.phone")}),s.jsx("input",{type:"tel",...P("phone"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.phone")})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>j(!1),className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:s.jsx("span",{children:e("common.cancel")})}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[s.jsx(Tr,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("common.save")})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ts,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.name")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.fullName)||e("profilePage.notSpecified")})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(os,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.email")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.email)||e("profilePage.notSpecified")}),!(r!=null&&r.email)&&s.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-1",children:[" ",e("profilePage.emailMissingWarning")]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(qi,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage.phone")}),s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.phone)||e("profilePage.notSpecified")})]})]})]})]})}),s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[s.jsx(Ta,{className:"w-5 h-5 mr-2 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e("profilePage.addresses")})]}),s.jsxs("button",{onClick:()=>{k(null),g(!0)},className:"btn btn-primary btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:[s.jsx(Wt,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e("profilePage.newAddress")})]})]}),c.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ta,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("profilePage.noAddresses")})]}):s.jsx("div",{className:"space-y-4",children:c.map(V=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:V.street}),V.isDefault&&s.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400 text-xs rounded-full whitespace-nowrap flex-shrink-0",children:e("profilePage.default")})]}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-words",children:[V.city,", ",V.postalCode,s.jsx("br",{}),V.country]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>T(V),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-200",children:s.jsx(La,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>B(V.id),className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-200",children:s.jsx(er,{className:"w-4 h-4"})})]})]})},V.id))}),c.length===0&&s.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[" ",e("profilePage.addressMissingWarning")]})})]})}),s.jsx("div",{className:"space-y-6 lg:col-span-1",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Ye,{className:"w-5 h-5 mr-2"}),e("orders.title")]}),s.jsxs("select",{value:o.status,onChange:V=>K(V.target.value),className:"input w-auto min-w-[150px] dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:e("ordersPage.allOrders")}),s.jsx("option",{value:"PENDING",children:e("ordersPage.pending")}),s.jsx("option",{value:"CONFIRMED",children:e("ordersPage.confirmed")}),s.jsx("option",{value:"OUT_FOR_DELIVERY",children:e("ordersPage.outForDelivery")}),s.jsx("option",{value:"DELIVERED",children:e("ordersPage.delivered")})]})]}),n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ye,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("ordersPage.noOrders")})]}):s.jsx("div",{className:"space-y-4",children:n.map(V=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2 flex-wrap",children:[s.jsxs("h3",{className:"text-md font-semibold text-gray-900 dark:text-white",children:[e("orderDetailPage.order")," #",V.orderNumber]}),s.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${O(V.status)}`,children:[Q(V.status),s.jsx("span",{children:$(V.status)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.date")}),s.jsx("span",{className:"truncate block",children:new Date(V.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.total")}),s.jsxs("span",{className:"truncate block",children:[V.totalAmount.toLocaleString()," ",e("common.currency")]})]}),s.jsxs("div",{className:"min-w-0 sm:col-span-2 xl:col-span-1",children:[s.jsx("span",{className:"font-medium block",children:e("ordersPage.delivery")}),s.jsx("span",{className:"truncate block",children:V.deliveryMethod==="PICKUP"?e("ordersPage.pickup"):e("ordersPage.homeDelivery")})]})]})]}),s.jsx("button",{onClick:()=>{N(V),b(!0)},className:"flex-shrink-0 p-2 bg-purple-600 hover:bg-purple-700 dark:bg-purple-700 dark:hover:bg-purple-600 text-white rounded-lg transition-colors duration-200 shadow-sm hover:shadow-md",title:e("receipts.viewReceipt"),children:s.jsx(Gy,{className:"w-5 h-5"})})]})},V.id))}),i.pages>1&&s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(Oo({...o,page:i.page-1})),disabled:i.page===1,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage.previous")}),s.jsxs("span",{className:"px-3 py-1 text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap",children:[e("ordersPage.page")," ",i.page," ",e("ordersPage.of")," ",i.pages]}),s.jsx("button",{onClick:()=>t(Oo({...o,page:i.page+1})),disabled:i.page===i.pages,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage.next")})]})})]})})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e(p?"profilePage.editAddress":"profilePage.newAddressTitle")}),s.jsx("button",{onClick:()=>{g(!1),k(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:I(Z),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.street")," *"]}),s.jsx("input",{...F("street",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.street")}),D.street&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.streetRequired")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.city")," *"]}),s.jsx("input",{...F("city",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.city")}),D.city&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.cityRequired")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.postalCode")," *"]}),s.jsx("input",{...F("postalCode",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.postalCode")}),D.postalCode&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage.postalCodeRequired")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage.country")," *"]}),s.jsx("input",{...F("country",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage.country")}),D.country&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("navigation.language")==="is"?"Land er nausynlegt":"Country is required"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...F("isDefault"),className:"rounded"}),s.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("profilePage.setAsDefaultAddress")})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{g(!1),k(null)},className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:s.jsx("span",{children:e("common.cancel")})}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[s.jsx(Tr,{className:"w-4 h-4 mr-1 flex-shrink-0"}),s.jsx("span",{children:e(p?"adminProductsPage.update":"adminProductsPage.create")})]})]})]})]})}),s.jsx(FS,{isOpen:y,onClose:()=>b(!1),order:w,onEmailSent:()=>{q.success(e("receipts.emailSentSuccess"))}})]})}):s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("profile.title")}),s.jsxs("div",{className:"card p-8",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("navigation.language")==="is"?"Skru ig inn":"Please log in"}),s.jsx("p",{className:"text-gray-600 mb-6",children:e("navigation.language")==="is"?" verur a skr ig inn til a skoa prflinn inn.":"You must be logged in to view your profile."})]})]})})})};function dR(){throw new Error("Kenni OIDC not configured")}function cR(e){const t=e.startsWith("#")?e.substring(1):e,r=new URLSearchParams(t),a=r.get("id_token"),n=r.get("state"),i=r.get("error"),o=r.get("error_description");return{idToken:a,state:n,error:i,errorDescription:o}}const uR=()=>{var C,A;const{t:e}=je(),t=xs(),r=Ur(),a=ut(),{isAuthenticated:n,isLoading:i}=Se(E=>E.auth),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,g]=_.useState(""),[p,k]=_.useState({email:"",password:""}),x=((A=(C=r.state)==null?void 0:C.from)==null?void 0:A.pathname)||"/";_.useEffect(()=>{a(S7())},[a]),_.useEffect(()=>{n&&!i&&t(x,{replace:!0})},[n,i,t,x]);const j=E=>{E.preventDefault();try{const F=dR();window.location.href=F}catch(F){console.error(F)}},y=E=>{E.preventDefault(),d(!o)},b=async E=>{if(E.preventDefault(),!!m.trim())try{await a(ih({phone:m})).unwrap(),t(x,{replace:!0})}catch(F){console.error("Dummy login failed:",F)}},w=E=>{E.preventDefault(),h(!c)},N=async E=>{if(E.preventDefault(),!(!p.email.trim()||!p.password.trim()))try{await a(dd({username:"test_customer",password:p.password})).unwrap(),t(x,{replace:!0})}catch(F){console.error("Test login failed:",F)}},P=E=>{k({...p,[E.target.name]:E.target.value})};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth.login")}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:e("authExtra.loginWithElectronicIdDescription")})]}),s.jsxs("div",{className:"mt-6 space-y-4",children:[s.jsxs("button",{onClick:j,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-primary-600 text-base font-semibold rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("auth.login")}),s.jsx("span",{className:"text-sm opacity-90",children:e("authExtra.loginWithElectronicId")})]}),s.jsxs("button",{onClick:y,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-orange-600 text-base font-semibold rounded-lg text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("login.testLogin")}),s.jsx("span",{className:"text-sm opacity-90",children:e("login.dummyElectronicId")})]}),s.jsxs("button",{onClick:w,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-green-600 text-base font-semibold rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[s.jsx("span",{children:e("login.automatedTestLogin")}),s.jsx("span",{className:"text-sm opacity-90",children:e("login.emailPasswordTests")})]}),o&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.insertPhoneNumber")}),s.jsx("input",{id:"phone",type:"tel",value:m,onChange:E=>g(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterPhoneNumber")})]}),s.jsx("button",{onClick:b,disabled:!m.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e(i?"login.loggingIn":"login.loginWithPhone")})]}),c&&s.jsxs("form",{onSubmit:N,className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.email")}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:p.email,onChange:P,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterEmailAddress")})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("login.password")}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:p.password,onChange:P,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("login.enterPassword")})]}),s.jsx("button",{type:"submit",disabled:!p.email.trim()||!p.password.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e(i?"login.loggingIn":"login.loginWithEmail")})]})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx(Le,{to:"/admin-login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("authExtra.adminDeliveryLogin")})})]})})},hR=()=>{const e=ut(),t=xs(),r=Ur();return _.useEffect(()=>{const{idToken:a,state:n,error:i}=cR(r.hash),o=sessionStorage.getItem("kenni_oidc_state");if(sessionStorage.removeItem("kenni_oidc_state"),i){t("/login");return}if(!a||!n||n!==o){t("/login");return}e(nh({idToken:a})).unwrap().then(()=>t("/")).catch(()=>t("/login"))},[e,t,r.hash]),s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:s.jsx(pt,{size:"large"})})},mR=()=>{var x,j;const{t:e}=je(),t=ut(),r=xs(),a=Ur(),{isLoading:n,error:i,user:o}=Se(y=>y.auth),[d,c]=_.useState({username:"",password:""}),[h,m]=_.useState(!1),g=((j=(x=a.state)==null?void 0:x.from)==null?void 0:j.pathname)||"/admin";_.useEffect(()=>{o&&["ADMIN","DELIVERY"].includes(o.role)&&r("/admin",{replace:!0})},[o,r]);const p=y=>{c({...d,[y.target.name]:y.target.value})},k=async y=>{y.preventDefault();const b=await t(dd(d));if(b.type==="auth/login/fulfilled"){const N=b.payload.user.role==="ADMIN"?"/admin":g;r(N,{replace:!0})}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:"/logo_black-web.webp",alt:"lfng Logo",className:"h-16 w-auto dark:invert"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth.loginStaff")})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:k,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"label",children:e("auth.username")}),s.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:d.username,onChange:p,className:"input",placeholder:e("auth.username"),"data-testid":"admin-username"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"label",children:e("auth.password")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:h?"text":"password",required:!0,value:d.password,onChange:p,className:"input pr-10",placeholder:e("auth.password"),"data-testid":"admin-password"}),s.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>m(!h),children:h?s.jsx(Er,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})})]})]})]}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:i}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200","data-testid":"admin-login-button",children:e("auth.login")})}),s.jsx("div",{className:"text-center mt-4",children:s.jsx(Le,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("common.back")})})]})]})})},_d=Ne("dashboard/fetchStats",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/dashboard/stats")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch dashboard statistics")}}),gf={stats:{totalRevenue:0,totalOrders:0,totalProducts:0,totalCustomers:0,revenueGrowth:0,orderGrowth:0,productGrowth:0,customerGrowth:0},recentOrders:[],orderStatusCounts:{pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0},topProducts:[],isLoading:!1,error:null},gR=Vr({name:"dashboard",initialState:gf,reducers:{clearError:e=>{e.error=null},updateOrderStatus:(e,t)=>{const{orderId:r,status:a}=t.payload,n=e.recentOrders.find(i=>i.id===r);n&&(n.status=a),a==="delivered"?(e.orderStatusCounts.delivered+=1,e.orderStatusCounts.pending-=1):a==="cancelled"&&(e.orderStatusCounts.cancelled+=1,e.orderStatusCounts.pending-=1)}},extraReducers:e=>{e.addCase(_d.pending,t=>{t.isLoading=!0,t.error=null}).addCase(_d.fulfilled,(t,r)=>{t.isLoading=!1;const a=r.payload.data||r.payload;t.stats=a.stats||gf.stats,t.recentOrders=a.recentOrders||[],t.orderStatusCounts=a.orderStatusCounts||gf.orderStatusCounts,t.topProducts=a.topProducts||[]}).addCase(_d.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),fR=gR.reducer,Ae=({children:e,showSidebar:t=!0})=>{const{t:r}=je(),[a,n]=_.useState(()=>{const o=localStorage.getItem("adminSidebarCollapsed");return o?JSON.parse(o):!1}),i=o=>{n(o)};return t?s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsxs("div",{className:"hidden lg:flex lg:flex-1",children:[s.jsx("div",{className:"fixed top-16 bottom-0 left-0 z-10 flex-shrink-0",children:s.jsx("div",{className:"m-4 lg:m-0 lg:mt-0 lg:mb-0 lg:pt-6",style:{height:"calc(100vh - 4rem)"},children:s.jsx(Xy,{onCollapseChange:i})})}),s.jsx("div",{className:`flex-1 flex flex-col min-w-0 transition-all duration-300 ease-in-out ${a?"lg:ml-16":"lg:ml-56"}`,children:s.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})})]}),s.jsx("div",{className:"lg:hidden flex-1 flex flex-col min-w-0",children:s.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:s.jsx("main",{className:"p-4 lg:p-6",children:e})})};Ae.propTypes={children:xe.node.isRequired,showSidebar:xe.bool};const BS=({user:e})=>{const{t}=je(),r=xs(),a=[{icon:Ye,label:t("adminDashboard.addProduct"),onClick:()=>r("/admin/products"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:_a,label:t("adminDashboard.manageUsers"),onClick:()=>r("/admin/customers"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:pa,label:t("adminDashboard.viewAnalytics"),onClick:()=>r("/admin/analytics"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Bo,label:t("adminDashboard.reports"),onClick:()=>r("/admin/reports"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Ia,label:t("adminDashboard.export"),onClick:()=>{alert(t("adminDashboard.export")+" - Coming soon")},className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Wt,label:t("adminDashboard.newOrder"),onClick:()=>r("/admin/orders"),className:"flex flex-col items-center justify-center p-4 bg-blue-600 hover:bg-blue-700 rounded-xl border border-blue-600 hover:border-blue-700 shadow-sm hover:shadow-lg transition-all duration-300 group"}];return s.jsxs("div",{className:"py-4 sm:py-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:t("adminDashboard.dashboardOverview")}),s.jsxs("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:[t("adminDashboard.welcomeBack")," ",(e==null?void 0:e.fullName)||(e==null?void 0:e.username)]})]})}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4",children:a.map((n,i)=>s.jsxs("button",{onClick:n.onClick,className:n.className,children:[s.jsx(n.icon,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mb-2 group-hover:text-blue-500 transition-colors"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:n.label})]},i))})]})};BS.propTypes={user:xe.shape({fullName:xe.string,username:xe.string})};const zS=({title:e,value:t,growth:r,icon:a,color:n="blue"})=>{const{t:i}=je();return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-1 sm:p-1.5 lg:p-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:e}),s.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mt-1 sm:mt-2 truncate",children:t}),s.jsxs("div",{className:"flex items-center mt-2 sm:mt-3",children:[s.jsx(pa,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 mr-1 flex-shrink-0"}),s.jsxs("span",{className:"text-xs sm:text-sm text-green-600 dark:text-green-400 font-medium",children:["+",r,"%"]})]})]}),s.jsx("div",{className:`p-1 sm:p-1.5 lg:p-2 rounded-lg bg-${n}-100 dark:bg-${n}-900/20 ml-2 sm:ml-3 flex-shrink-0`,children:s.jsx(a,{className:`h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 text-${n}-600 dark:text-${n}-400`})})]})})};zS.propTypes={title:xe.string.isRequired,value:xe.oneOfType([xe.string,xe.number]).isRequired,growth:xe.number.isRequired,icon:xe.elementType.isRequired,color:xe.string};const $S=({stats:e,formatCurrency:t})=>{const{t:r}=je(),a=[{title:r("adminDashboard.totalRevenue"),value:t(e.totalRevenue),growth:e.revenueGrowth,icon:Wi,color:"green"},{title:r("adminDashboard.totalOrders"),value:e.totalOrders.toLocaleString(),growth:e.orderGrowth,icon:Mr,color:"blue"},{title:r("adminDashboard.totalProducts"),value:e.totalProducts,growth:e.productGrowth,icon:Ye,color:"purple"},{title:r("adminDashboard.totalCustomers"),value:e.totalCustomers,growth:e.customerGrowth,icon:_a,color:"indigo"}];return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 mb-6 sm:mb-8",children:a.map((n,i)=>s.jsx(zS,{title:n.title,value:n.value,growth:n.growth,icon:n.icon,color:n.color},i))})};$S.propTypes={stats:xe.shape({totalRevenue:xe.number.isRequired,revenueGrowth:xe.number.isRequired,totalOrders:xe.number.isRequired,orderGrowth:xe.number.isRequired,totalProducts:xe.number.isRequired,productGrowth:xe.number.isRequired,totalCustomers:xe.number.isRequired,customerGrowth:xe.number.isRequired}).isRequired,formatCurrency:xe.func.isRequired};const cx=e=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(e),pR=e=>new Date(e).toLocaleDateString("is-IS"),xR=e=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",confirmed:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",preparing:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",out_for_delivery:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400",delivered:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"})[e]||"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",US=e=>({pending:nr,confirmed:Ct,preparing:Ye,out_for_delivery:Ye,delivered:Ct,cancelled:lt})[e]||nr,VS=(e,t)=>({pending:t("orders.statuses.PENDING")||"Pending",confirmed:t("orders.statuses.CONFIRMED")||"Confirmed",preparing:t("orders.statuses.PREPARING")||"Preparing",out_for_delivery:t("orders.statuses.OUT_FOR_DELIVERY")||"Out for Delivery",delivered:t("orders.statuses.DELIVERED")||"Delivered",cancelled:t("orders.statuses.CANCELLED")||"Cancelled"})[e]||e,HS=({recentOrders:e,formatCurrency:t,formatDate:r})=>{const{t:a}=je();return s.jsx("div",{className:"mb-6 sm:mb-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:a("adminDashboard.recentOrders")}),s.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[s.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(ht,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),s.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(sS,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"hidden sm:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:a("adminDashboard.orderId")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:a("adminDashboard.customer")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:a("adminDashboard.amount")}),s.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:a("adminDashboard.status")}),s.jsx("th",{className:"hidden md:table-cell px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:a("adminDashboard.date")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(n=>{const i=US(n.status);return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsxs("td",{className:"hidden sm:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",n.id]}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100 truncate max-w-[120px]",children:n.customer}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 dark:text-gray-100",children:t(n.amount)}),s.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${xR(n.status)}`,children:[s.jsx(i,{className:"h-3 w-3 mr-0.5"}),s.jsx("span",{className:"hidden sm:inline",children:VS(n.status,a)})]})}),s.jsx("td",{className:"hidden md:table-cell px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r(n.date)})]},n.id)})})]})})]})})};HS.propTypes={recentOrders:xe.arrayOf(xe.shape({id:xe.oneOfType([xe.string,xe.number]).isRequired,customer:xe.string.isRequired,amount:xe.number.isRequired,status:xe.string.isRequired,date:xe.string.isRequired})).isRequired,formatCurrency:xe.func.isRequired,formatDate:xe.func.isRequired};const WS=({orderStatusCounts:e})=>{const{t}=je();return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard.orderStatus")})}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-3 sm:space-y-4",children:Object.entries(e).map(([r,a])=>{const n=US(r),i=Object.values(e).reduce((d,c)=>d+c,0),o=i>0?a/i*100:0;return s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-2 gap-2",children:[s.jsxs("div",{className:"flex items-center min-w-0",children:[s.jsx(n,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-3 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 capitalize truncate",children:VS(r,t)})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[s.jsx("div",{className:"flex-1 sm:w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 w-8 text-right flex-shrink-0",children:a})]})]},r)})})})]})};WS.propTypes={orderStatusCounts:xe.objectOf(xe.number).isRequired};const qS=({topProducts:e})=>{const{t}=je();return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard.topProducts")})}),s.jsx("div",{className:"p-4 sm:p-6",children:s.jsx("div",{className:"space-y-3",children:e.map((r,a)=>s.jsxs("div",{className:"flex items-center justify-between py-2 sm:py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0 gap-2",children:[s.jsxs("div",{className:"flex items-center min-w-0 flex-1",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:a+1})}),s.jsxs("div",{className:"ml-3 min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:r.name}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.sales," ",t("adminDashboard.sales")]})]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:cx(r.revenue)})})]},r.id))})})]})};qS.propTypes={topProducts:xe.arrayOf(xe.shape({id:xe.oneOfType([xe.string,xe.number]).isRequired,name:xe.string.isRequired,sales:xe.number.isRequired,revenue:xe.number.isRequired})).isRequired};const yR=()=>{const{t:e}=je();return s.jsx(Ae,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("common.loading")})]})})})},KS=({error:e,onRetry:t})=>{const{t:r}=je();return s.jsx(Ae,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:s.jsx(lt,{className:"h-12 w-12 mx-auto"})}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r("common.retry")})]})})})};KS.propTypes={error:xe.string.isRequired,onRetry:xe.func.isRequired};const bR=()=>{const e=ut(),{user:t}=Se(c=>c.auth),{stats:r,recentOrders:a,topProducts:n,orderStatusCounts:i,isLoading:o,error:d}=Se(c=>c.dashboard);return _.useEffect(()=>{e(_d())},[e]),o?s.jsx(yR,{}):d?s.jsx(KS,{error:d,onRetry:()=>e(_d())}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16",children:s.jsx(BS,{user:t})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4 sm:py-6",children:[s.jsx($S,{stats:r,formatCurrency:cx}),s.jsx(HS,{recentOrders:a,formatCurrency:cx,formatDate:pR}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[s.jsx(WS,{orderStatusCounts:i}),s.jsx(qS,{topProducts:n})]})]})})]})})},hr=({title:e,description:t,icon:r,backUrl:a=null,actions:n=null,hasUnsavedChanges:i=!1,isSaving:o=!1,onSave:d=null})=>s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-3 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-4 sm:py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4 lg:gap-6 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[a&&s.jsx(Le,{to:a,className:"flex-shrink-0 p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 mt-0.5",children:s.jsx(Bs,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl font-bold text-gray-900 dark:text-white flex items-center gap-1.5 sm:gap-2 lg:gap-3 flex-wrap leading-tight",children:[r&&s.jsx(r,{className:"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsx("span",{children:e})]}),t&&s.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:t})]})]}),s.jsxs("div",{className:"flex flex-col xs:flex-row items-center justify-end gap-2 sm:gap-3 lg:gap-4 flex-shrink-0 w-full sm:w-auto",children:[d&&s.jsxs(s.Fragment,{children:[i?s.jsxs("div",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 whitespace-nowrap",children:[s.jsx(lt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"Unsaved Changes"})]}):s.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 whitespace-nowrap",children:[s.jsx(Ct,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"All Saved"})]}),s.jsxs("button",{onClick:d,disabled:o||!i,className:"inline-flex items-center px-3 sm:px-4 py-2 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 whitespace-nowrap",children:[o?s.jsx(ht,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Tr,{className:"w-4 h-4 mr-2"}),o?"Saving...":"Save Changes"]})]}),n&&!d&&n]})]})})});hr.propTypes={title:xe.string.isRequired,description:xe.string,icon:xe.elementType,backUrl:xe.string,actions:xe.node,hasUnsavedChanges:xe.bool,isSaving:xe.bool,onSave:xe.func};hr.defaultProps={description:null,icon:null,backUrl:null,actions:null,hasUnsavedChanges:!1,isSaving:!1,onSave:null};const vR=({onImportProduct:e,onClose:t,onGeneratingProducts:r})=>{const{t:a}=je(),[n,i]=_.useState(""),[o,d]=_.useState([]),[c,h]=_.useState(!1),[m,g]=_.useState([]),[p,k]=_.useState(!1),[x,j]=_.useState(!1),[y,b]=_.useState(!1),[w,N]=_.useState(!1);_.useEffect(()=>{(async()=>{var Z;try{const T=localStorage.getItem("token"),W=await fetch("https://olfong.olibuijr.com/api/ai-image/settings",{headers:{Authorization:`Bearer ${T}`}});if(W.ok){const Q=await W.json(),$=!!((Z=Q.settings)!=null&&Z.runpodApiKey);b($),console.log("RunPod API key check:",{hasKey:$,data:Q})}}catch(T){console.error("Error checking RunPod API key:",T)}})()},[]);const P={beer:{is:"Bjr",en:"Beer"},"red-wine":{is:"Rauvn",en:"Red wine"},"white-wine":{is:"Hvtvn",en:"White wine"},strong:{is:"Sterkt fengi",en:"Spirits"},cider:{is:"Sder",en:"Cider"},liqueur:{is:"Lkjr",en:"Liqueur"},"rose-wine":{is:"Rsavn",en:"Rose wine"},"sparkling-wine":{is:"Freyivn",en:"Sparkling wine"},"dessert-wine":{is:"Eftirrttavn",en:"Dessert wine"},packaging:{is:"Umbir",en:"Packaging"}},C=async R=>{var Z;if(R.trim()){h(!0);try{const B=await fetch("https://olfong.olibuijr.com/api/atvr/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchTerm:R})});if(!B.ok)throw new Error(a("atvrImport.failedToImport"));const W=await B.json();d(((Z=W.data)==null?void 0:Z.products)||[])}catch(T){console.error("Error searching ATVR products:",T),q.error(a("atvrImport.failedToImport"))}finally{h(!1)}}},A=R=>{R.preventDefault(),C(n)},E=R=>{g(Z=>Z.some(B=>B.id===R.id)?Z.filter(B=>B.id!==R.id):[...Z,R])},F=R=>{var B;const Z=R.foodPairings||[],T=R.foodPairingsIs||[];return{name:R.name,nameIs:R.nameIs||R.name,description:R.description||"",descriptionIs:R.descriptionIs||R.description||"",price:typeof R.price=="number"?R.price:parseFloat(R.price.replace(/[^\d.,]/g,"").replace(",",".")),category:((B=P[R.category])==null?void 0:B.en)||R.category,image:R.image,alcoholContent:R.alcoholContent,volume:R.volume,volumeIs:R.volumeIs,country:R.country,countryIs:R.countryIs,region:R.region,regionIs:R.regionIs,origin:R.origin,originIs:R.originIs,producer:R.producer,producerIs:R.producerIs,distributor:R.distributor,distributorIs:R.distributorIs,packaging:R.packaging,packagingIs:R.packagingIs,packagingWeight:R.packagingWeight,packagingWeightIs:R.packagingWeightIs,carbonFootprint:R.carbonFootprint,carbonFootprintIs:R.carbonFootprintIs,vintage:R.vintage,grapeVariety:R.grapeVariety,grapeVarietyIs:R.grapeVarietyIs,wineStyle:R.wineStyle,wineStyleIs:R.wineStyleIs,pricePerLiter:R.pricePerLiter,pricePerLiterIs:R.pricePerLiterIs,foodPairings:Z,foodPairingsIs:T,specialAttributes:R.specialAttributes||[],specialAttributesIs:R.specialAttributesIs||[],certifications:R.certifications||[],certificationsIs:R.certificationsIs||[],availability:R.availability||"available",availabilityIs:R.availabilityIs,atvrProductId:R.id,atvrUrl:R.url,atvrImageUrl:R.atvrImageUrl||R.image}},I=async R=>{try{const T=await fetch(`https://olfong.olibuijr.com/api/atvr/product/${R}`);return T.ok?(await T.json()).data:(console.warn(`Failed to fetch details for product ${R}`),null)}catch(Z){return console.error(`Error fetching product details for ${R}:`,Z),null}},D=async()=>{if(m.length===0){q.error(a("atvrImport.pleaseSelectOne"));return}N(!0);try{const Z=(await Promise.all(m.map(async B=>{const W=await I(B.id);return{...B,...W,id:B.id}}))).map(F),T=[];for(const B of Z){const W=await e(B);x&&(W!=null&&W.mediaId)&&T.push(W.mediaId)}if(x&&T.length>0){r&&r(T),q.loading(`Generating AI images for ${T.length} product(s)...`);for(const B of T)try{await fetch(`https://olfong.olibuijr.com/api/ai-image/generate/${B}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({shadowStyle:"soft",backgroundColor:"#FFFFFF"})})}catch(W){console.error(`Error generating AI image for media ${B}:`,W)}q.dismiss(),q.success(`${a("atvrImport.successfullyImported")} ${Z.length} ${a("atvrImport.productsImported")} and AI images are being generated...`)}else q.success(`${a("atvrImport.successfullyImported")} ${Z.length} ${a("atvrImport.productsImported")}`);g([]),d([]),i(""),t()}catch(R){console.error("Error importing products:",R),q.error(a("atvrImport.failedToImport"))}finally{N(!1)}},Y=()=>{k(!0)};return s.jsxs(s.Fragment,{children:[p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:60},children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[a("atvrImport.previewImportTitle")," (",m.length," ",a("atvrImport.products"),")"]}),s.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:s.jsx("div",{className:"space-y-6",children:m.map((R,Z)=>{const T=F(R);return s.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[T.image&&s.jsx("div",{className:"md:col-span-1",children:s.jsx("img",{src:T.image,alt:T.name,className:"w-full h-auto rounded border border-gray-200 dark:border-gray-600"})}),s.jsx("div",{className:T.image?"md:col-span-2":"md:col-span-3",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:T.name}),T.nameIs&&T.nameIs!==T.name&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[s.jsxs("strong",{children:[a("atvrImport.icelandicLabel"),":"]})," ",T.nameIs]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 px-2 py-1 rounded",children:T.category}),s.jsxs("p",{className:"text-lg font-bold text-primary-600",children:[T.price," kr"]})]}),T.description&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:T.description}),T.descriptionIs&&T.descriptionIs!==T.description&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:[s.jsxs("strong",{children:[a("atvrImport.icelandicLabel"),":"]})," ",T.descriptionIs]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[T.volume&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:a("atvrImport.volume")}),s.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[T.volume,T.volumeIs&&T.volumeIs!==T.volume&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" / ",T.volumeIs]})]})]}),T.alcoholContent&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:a("atvrImport.alcoholContent")}),s.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[T.alcoholContent,"%"]})]}),T.country&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:a("atvrImport.country")}),s.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[T.country,T.countryIs&&T.countryIs!==T.country&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" / ",T.countryIs]})]})]}),T.producer&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:a("atvrImport.producer")}),s.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[T.producer,T.producerIs&&T.producerIs!==T.producer&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" / ",T.producerIs]})]})]}),T.distributor&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:a("atvrImport.distributor")}),s.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[T.distributor,T.distributorIs&&T.distributorIs!==T.distributor&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" / ",T.distributorIs]})]})]}),T.packaging&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:a("atvrImport.packaging")}),s.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[T.packaging,T.packagingIs&&T.packagingIs!==T.packaging&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" / ",T.packagingIs]})]})]}),T.availability&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase",children:a("atvrImport.availability")}),s.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:[T.availability,T.availabilityIs&&T.availabilityIs!==T.availability&&s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" / ",T.availabilityIs]})]})]})]}),T.foodPairings&&T.foodPairings.length>0&&s.jsxs("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:a("atvrImport.foodPairings")}),s.jsx("div",{className:"flex flex-wrap gap-1",children:T.foodPairings.map((B,W)=>s.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:typeof B=="string"?B:B.name},W))})]}),T.specialAttributes&&T.specialAttributes.length>0&&s.jsxs("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:a("atvrImport.specialAttributes")}),s.jsx("div",{className:"flex flex-wrap gap-1",children:T.specialAttributes.map((B,W)=>s.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded",children:typeof B=="string"?B:B.name},W))})]}),T.atvrUrl&&s.jsx("div",{className:"pt-3 border-t border-gray-200 dark:border-gray-600",children:s.jsxs("a",{href:T.atvrUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 underline",children:[a("atvrImport.viewOnATVR")," "]})})]})})]})},Z)})})}),s.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:a("atvrImport.cancel")}),s.jsx("button",{onClick:()=>{k(!1),D()},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:a("atvrImport.importProductsButton")})]})]})}),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 pointer-events-none",style:{zIndex:50},children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a("atvrImport.title")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:a("atvrImport.subtitle")})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("form",{onSubmit:A,className:"flex space-x-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",value:n,onChange:R=>i(R.target.value),placeholder:a("atvrImport.searchPlaceholderIs"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})}),s.jsxs("button",{type:"submit",disabled:c||!n.trim(),className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[c?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):s.jsx(Qt,{className:"h-4 w-4"}),s.jsx("span",{children:a("atvrImport.search")})]})]})}),s.jsxs("div",{className:"flex-1 overflow-hidden flex min-h-0",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-6 min-h-0 min-w-0",children:o.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a("atvrImport.searchResults")," (",o.length,")"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[m.length," ",a("atvrImport.selected")]}),s.jsx("button",{onClick:()=>g([]),className:"text-sm text-primary-600 hover:text-primary-700",children:a("atvrImport.clearAll")})]})]}),s.jsx("div",{className:"grid gap-4",children:o.map(R=>s.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${m.some(Z=>Z.id===R.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>E(R),children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:R.image?s.jsx("img",{src:R.image,alt:R.name,className:"w-16 h-16 object-contain rounded"}):s.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-xs",children:a("atvrImport.noImage")})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:R.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[R.category,"  ",R.country]}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[R.volume,"  ",R.alcoholContent,"%"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[R.price," kr."]}),R.foodPairings&&R.foodPairings.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[R.foodPairings.slice(0,3).map((Z,T)=>s.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:Z},T)),R.foodPairings.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",R.foodPairings.length-3," ",a("atvrImport.more")]})]})]})]})}),s.jsx("div",{className:"flex-shrink-0",children:m.some(Z=>Z.id===R.id)?s.jsx(Ct,{className:"h-5 w-5 text-primary-600"}):s.jsx("div",{className:"h-5 w-5 border-2 border-gray-300 dark:border-gray-600 rounded-full"})})]})},R.id))})]}):n&&!c?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(lt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:a("atvrImport.noProductsFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a("atvrImport.tryDifferentTerms")})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Qt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:a("atvrImport.searchATVRProducts")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a("atvrImport.enterSearchTerm")})]})}),m.length>0&&s.jsxs("div",{className:"w-80 border-l border-gray-200 dark:border-gray-700 p-6 overflow-y-auto min-h-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[a("atvrImport.selected")," (",m.length,")"]}),s.jsx("button",{onClick:()=>g([]),className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a("atvrImport.clearAll")})]}),s.jsx("div",{className:"space-y-3 mb-6",children:m.map(R=>s.jsx("div",{className:"border rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:R.name}),s.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[R.price," kr."]})]}),s.jsx("button",{onClick:()=>E(R),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"h-4 w-4"})})]})},R.id))}),y&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg",children:s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:x,onChange:R=>j(R.target.checked),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-2 focus:ring-primary-500"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white flex items-center space-x-1",children:[s.jsx(sa,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),s.jsx("span",{children:a("atvrImport.generateAIImages")||"Generate AI Images"})]}),s.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a("atvrImport.generateAIImagesDescription")||"Automatically generate product images after import"})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:Y,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center space-x-2",children:[s.jsx(Yt,{className:"h-4 w-4"}),s.jsx("span",{children:a("atvrImport.previewImport")})]}),s.jsx("button",{onClick:D,disabled:w,className:"w-full px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:w?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),s.jsx("span",{children:a("atvrImport.importing")||"Importing..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ia,{className:"h-4 w-4"}),s.jsx("span",{children:a("atvrImport.importProducts")})]})})]})]})]})]})})]})};class kR{constructor(){this.sources={unsplash:{name:"Unsplash",apiKey:null,baseUrl:"https://api.unsplash.com",enabled:!1},pexels:{name:"Pexels",apiKey:null,baseUrl:"https://api.pexels.com/v1",enabled:!1},pixabay:{name:"Pixabay",apiKey:null,baseUrl:"https://pixabay.com/api",enabled:!1},google:{name:"Google Custom Search",apiKey:null,searchEngineId:null,baseUrl:"https://www.googleapis.com/customsearch/v1",enabled:!1}},this.apiKeysLoaded=!1}async loadApiKeys(){if(!this.apiKeysLoaded)try{const t=await fetch("/api/settings/public");if(t.ok){const a=(await t.json()).data.settings;this.sources.unsplash.apiKey=a.UNSPLASH_ACCESS_KEY||"",this.sources.pexels.apiKey=a.PEXELS_API_KEY||"",this.sources.pixabay.apiKey=a.PIXABAY_API_KEY||"",this.sources.google.apiKey=a.GOOGLE_API_KEY||"",this.sources.google.searchEngineId=a.GOOGLE_SEARCH_ENGINE_ID||"",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}catch(t){console.warn("Failed to load API keys from settings:",t),this.sources.unsplash.apiKey="",this.sources.pexels.apiKey="",this.sources.pixabay.apiKey="",this.sources.google.apiKey="",this.sources.google.searchEngineId="",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}async searchImages(t,r={}){await this.loadApiKeys();const{perPage:a=20,orientation:n="all",color:i="all",sources:o=Object.keys(this.sources).filter(g=>this.sources[g].enabled)}=r;if(o.length===0)return{images:[],errors:[{source:"All Sources",error:"No API keys configured. Please configure API keys in admin settings."}],total:0,sources:[]};const d=o.map(g=>this.searchFromSource(g,t,{perPage:a,orientation:n,color:i}).catch(p=>(console.warn(`Failed to search ${g}:`,p),[]))),h=(await Promise.all(d)).flat(),m=this.removeDuplicates(h);return this.shuffleArray(m).slice(0,a)}async searchFromSource(t,r,a){switch(t){case"unsplash":return this.searchUnsplash(r,a);case"pexels":return this.searchPexels(r,a);case"pixabay":return this.searchPixabay(r,a);case"google":return this.searchGoogle(r,a);default:throw new Error(`Unknown source: ${t}`)}}async searchUnsplash(t,r){const{perPage:a,orientation:n,color:i}=r,o=this.sources.unsplash;if(!o.enabled)return[];const d=new URLSearchParams({query:t,per_page:Math.min(a,30),orientation:n==="all"?void 0:n,color:i==="all"?void 0:i}),c=await fetch(`${o.baseUrl}/search/photos?${d}`,{headers:{Authorization:`Client-ID ${o.apiKey}`}});if(!c.ok)throw new Error(`Unsplash API error: ${c.status}`);return(await c.json()).results.map(m=>{var g;return{id:m.id,url:m.urls.regular,thumbnail:m.urls.thumb,fullSize:m.urls.full,alt:m.alt_description||m.description||t,source:"unsplash",sourceName:"Unsplash",photographer:m.user.name,photographerUrl:m.user.links.html,downloadUrl:m.links.download,width:m.width,height:m.height,color:m.color,tags:((g=m.tags)==null?void 0:g.map(p=>p.title))||[]}})}async searchPexels(t,r){const{perPage:a,orientation:n,color:i}=r,o=this.sources.pexels;if(!o.enabled)return[];const d=new URLSearchParams({query:t,per_page:Math.min(a,80),orientation:n==="all"?void 0:n,color:i==="all"?void 0:i}),c=await fetch(`${o.baseUrl}/search?${d}`,{headers:{Authorization:o.apiKey}});if(!c.ok)throw new Error(`Pexels API error: ${c.status}`);return(await c.json()).photos.map(m=>({id:m.id,url:m.src.medium,thumbnail:m.src.small,fullSize:m.src.large2x,alt:m.alt||t,source:"pexels",sourceName:"Pexels",photographer:m.photographer,photographerUrl:m.photographer_url,downloadUrl:m.src.original,width:m.width,height:m.height,color:m.avg_color,tags:[]}))}async searchPixabay(t,r){const{perPage:a,orientation:n,color:i}=r,o=this.sources.pixabay;if(!o.enabled)return[];const d=new URLSearchParams({key:o.apiKey,q:t,per_page:Math.min(a,200),image_type:"photo",orientation:n==="all"?"all":n,colors:i==="all"?void 0:i,safesearch:"true"}),c=await fetch(`${o.baseUrl}/?${d}`);if(!c.ok)throw new Error(`Pixabay API error: ${c.status}`);return(await c.json()).hits.map(m=>({id:m.id,url:m.webformatURL,thumbnail:m.previewURL,fullSize:m.largeImageURL,alt:m.tags||t,source:"pixabay",sourceName:"Pixabay",photographer:m.user,photographerUrl:`https://pixabay.com/users/${m.user}-${m.user_id}/`,downloadUrl:m.largeImageURL,width:m.imageWidth,height:m.imageHeight,color:m.color,tags:m.tags.split(", ").map(g=>g.trim())}))}async searchGoogle(t,r){const{perPage:a}=r,n=this.sources.google;if(!n.enabled)return[];const i=new URLSearchParams({key:n.apiKey,cx:n.searchEngineId,q:t,searchType:"image",num:Math.min(a,10),safe:"active",imgSize:"medium",imgType:"photo"}),o=await fetch(`${n.baseUrl}?${i}`);if(!o.ok)throw new Error(`Google Custom Search API error: ${o.status}`);return((await o.json()).items||[]).map(c=>{var h,m,g,p;return{id:c.link,url:c.link,thumbnail:((h=c.image)==null?void 0:h.thumbnailLink)||c.link,fullSize:c.link,alt:c.title||t,source:"google",sourceName:"Google Images",photographer:c.displayLink,photographerUrl:((m=c.image)==null?void 0:m.contextLink)||c.link,downloadUrl:c.link,width:((g=c.image)==null?void 0:g.width)||0,height:((p=c.image)==null?void 0:p.height)||0,color:null,tags:[]}})}removeDuplicates(t){const r=new Set;return t.filter(a=>r.has(a.url)?!1:(r.add(a.url),!0))}shuffleArray(t){const r=[...t];for(let a=r.length-1;a>0;a--){const n=Math.floor(Math.random()*(a+1));[r[a],r[n]]=[r[n],r[a]]}return r}getAvailableSources(){return Object.entries(this.sources).filter(([,t])=>t.enabled).map(([t,r])=>({key:t,name:r.name}))}getSearchSuggestions(t,r){const a=[t];return r&&typeof r=="string"&&(a.push(`${t} ${r.toLowerCase()}`),a.push(`${r.toLowerCase()} ${t}`)),["product photo","professional","white background","isolated","high quality","commercial"].forEach(i=>{a.push(`${t} ${i}`)}),[...new Set(a)]}}const ff=new kR,wR=({isOpen:e,onClose:t,onSelectImage:r,productName:a="",category:n="",initialQuery:i=""})=>{const{t:o}=je(),[d,c]=_.useState(i||a),[h,m]=_.useState([]),[g,p]=_.useState(!1),[k,x]=_.useState(null),[j,y]=_.useState(null),[b,w]=_.useState("grid"),[N,P]=_.useState({orientation:"all",color:"all",sources:ff.getAvailableSources().map(X=>X.key)}),[C,A]=_.useState([]),[E,F]=_.useState(!1),[I,D]=_.useState([]),[Y,R]=_.useState([]),Z=_.useRef(null),T=_.useRef(null);_.useEffect(()=>{const X=localStorage.getItem("imageSearchFavorites"),le=localStorage.getItem("imageSearchRecent");X&&D(JSON.parse(X)),le&&R(JSON.parse(le))},[]),_.useEffect(()=>{if(a||n){const X=ff.getSearchSuggestions(a,n);A(X)}},[a,n]),_.useEffect(()=>{e&&Z.current&&Z.current.focus()},[e]),_.useEffect(()=>{if(!e)return;const X=le=>{le.key==="Escape"&&t()};return document.addEventListener("keydown",X),()=>{document.removeEventListener("keydown",X)}},[e,t]);const B=async(X=d)=>{if(X.trim()){p(!0),x(null),y(null);try{const le=await ff.searchImages(X,{perPage:24,...N});m(le);const ge=[X,...Y.filter(ne=>ne!==X)].slice(0,10);R(ge),localStorage.setItem("imageSearchRecent",JSON.stringify(ge))}catch(le){x(le.message),q.error(`Search failed: ${le.message}`)}finally{p(!1)}}},W=X=>{c(X.target.value),F(!0)},Q=X=>{c(X),F(!1),B(X)},$=X=>{y(X)},O=async X=>{try{p(!0);const le=await fetch("/api/images/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:X.url,source:X.source,photographer:X.photographer,photographerUrl:X.photographerUrl})});if(!le.ok)throw new Error("Failed to download image");const{imageUrl:ge}=await le.json();r(ge,{originalUrl:X.url,source:X.source,photographer:X.photographer,photographerUrl:X.photographerUrl}),q.success("Image downloaded and selected successfully"),t()}catch(le){q.error(`Failed to download image: ${le.message}`)}finally{p(!1)}},K=X=>{const le=I.some(ne=>ne.id===X.id);let ge;le?ge=I.filter(ne=>ne.id!==X.id):ge=[...I,X],D(ge),localStorage.setItem("imageSearchFavorites",JSON.stringify(ge))},V=X=>{X.key==="Enter"?(F(!1),B()):X.key==="Escape"&&F(!1)};return _.useEffect(()=>{const X=le=>{T.current&&!T.current.contains(le.target)&&F(!1)};return document.addEventListener("mousedown",X),()=>document.removeEventListener("mousedown",X)},[]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] flex flex-col shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search for Product Images"}),s.jsxs("div",{className:"relative",ref:T,children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{ref:Z,type:"text",value:d,onChange:W,onKeyPress:V,placeholder:o("adminPlaceholders.searchForImages"),className:"input pl-10 pr-4 w-full"}),g&&s.jsx(At,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 animate-spin"})]}),E&&(C.length>0||Y.length>0)&&s.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-10 mt-1",children:[C.length>0&&s.jsxs("div",{className:"p-2",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal.suggestions")}),C.slice(0,5).map((X,le)=>s.jsx("button",{onClick:()=>Q(X),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:X},le))]}),Y.length>0&&s.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-600",children:[s.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal.recentSearches")}),Y.slice(0,5).map((X,le)=>s.jsx("button",{onClick:()=>Q(X),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:X},le))]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("button",{onClick:()=>w(b==="grid"?"list":"grid"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:b==="grid"?s.jsx(Mg,{className:"w-4 h-4"}):s.jsx(Ag,{className:"w-4 h-4"})}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(at,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Bo,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),s.jsxs("select",{value:N.orientation,onChange:X=>P({...N,orientation:X.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[s.jsx("option",{value:"all",children:o("imageSearchModal.allOrientations")}),s.jsx("option",{value:"landscape",children:o("imageSearchModal.landscape")}),s.jsx("option",{value:"portrait",children:o("imageSearchModal.portrait")}),s.jsx("option",{value:"squarish",children:o("imageSearchModal.square")})]}),s.jsxs("select",{value:N.color,onChange:X=>P({...N,color:X.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[s.jsx("option",{value:"all",children:o("imageSearchModal.allColors")}),s.jsx("option",{value:"black_and_white",children:"Black & White"}),s.jsx("option",{value:"black",children:o("imageSearchModal.black")}),s.jsx("option",{value:"white",children:o("imageSearchModal.white")}),s.jsx("option",{value:"yellow",children:o("imageSearchModal.yellow")}),s.jsx("option",{value:"orange",children:o("imageSearchModal.orange")}),s.jsx("option",{value:"red",children:o("imageSearchModal.red")}),s.jsx("option",{value:"purple",children:o("imageSearchModal.purple")}),s.jsx("option",{value:"magenta",children:o("imageSearchModal.magenta")}),s.jsx("option",{value:"green",children:o("imageSearchModal.green")}),s.jsx("option",{value:"teal",children:o("imageSearchModal.teal")}),s.jsx("option",{value:"blue",children:o("imageSearchModal.blue")})]}),s.jsxs("button",{onClick:()=>B(),className:"btn btn-primary btn-sm",disabled:g,children:[g?s.jsx(At,{className:"w-4 h-4 animate-spin"}):s.jsx(Qt,{className:"w-4 h-4"}),"Search"]})]})}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[k&&s.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:s.jsxs("div",{className:"flex",children:[s.jsx(lt,{className:"w-5 h-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:k})})]})}),g&&h.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(At,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Searching for images..."})]})}):h.length===0?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Qt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No images found"}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Try a different search term or adjust your filters"})]})}):s.jsx("div",{className:"p-4 overflow-y-auto",children:b==="grid"?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.map(X=>s.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${(j==null?void 0:j.id)===X.id&&(j==null?void 0:j.source)===X.source?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>$(X),children:[s.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700",children:s.jsx("img",{src:X.thumbnail,alt:X.alt,className:"w-full h-full object-cover",loading:"lazy"})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center",children:s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-2",children:[s.jsx("button",{onClick:le=>{le.stopPropagation(),O(X)},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels.selectImage"),children:s.jsx(lc,{className:"w-4 h-4 text-green-600"})}),s.jsx("button",{onClick:le=>{le.stopPropagation(),window.open(X.url,"_blank")},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels.viewOriginal"),children:s.jsx(tx,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{onClick:le=>{le.stopPropagation(),K(X)},className:`p-2 rounded-full shadow-lg ${I.some(le=>le.id===X.id&&le.source===X.source)?"bg-red-500 text-white":"bg-white hover:bg-gray-100"}`,title:o("adminLabels.addToFavorites"),children:s.jsx(Z7,{className:"w-4 h-4"})})]})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-black bg-opacity-75 text-white rounded",children:X.sourceName})}),X.photographer&&s.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:s.jsxs("p",{className:"text-xs text-white bg-black bg-opacity-75 px-2 py-1 rounded truncate",children:["by ",X.photographer]})})]},`${X.source}-${X.id}`))}):s.jsx("div",{className:"space-y-4",children:h.map(X=>s.jsxs("div",{className:`flex items-center space-x-4 p-4 rounded-lg border-2 transition-all cursor-pointer ${(j==null?void 0:j.id)===X.id&&(j==null?void 0:j.source)===X.source?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>$(X),children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:s.jsx("img",{src:X.thumbnail,alt:X.alt,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:X.alt}),s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:X.sourceName})]}),X.photographer&&s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",X.photographer]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[X.width,"  ",X.height]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("button",{onClick:le=>{le.stopPropagation(),O(X)},className:"btn btn-primary btn-sm",children:[s.jsx(Ia,{className:"w-4 h-4 mr-1"}),"Select"]}),s.jsx("button",{onClick:le=>{le.stopPropagation(),window.open(X.url,"_blank")},className:"btn btn-outline btn-sm",children:s.jsx(tx,{className:"w-4 h-4"})})]})]},`${X.source}-${X.id}`))})})]}),j&&s.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-600 rounded-lg overflow-hidden",children:s.jsx("img",{src:j.thumbnail,alt:j.alt,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:j.alt}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[j.sourceName,"  ",j.width,"  ",j.height]})]})]}),s.jsxs("button",{onClick:()=>O(j),className:"btn btn-primary",disabled:g,children:[g?s.jsx(At,{className:"w-4 h-4 animate-spin mr-2"}):s.jsx(Ia,{className:"w-4 h-4 mr-2"}),"Download & Select"]})]})})]})}):null},db=({isOpen:e,onClose:t,onSelect:r,collection:a="PRODUCTS",selectedMedia:n=null,multiple:i=!1})=>{const{t:o}=je(),[d,c]=_.useState([]),[h,m]=_.useState(!1),[g,p]=_.useState(""),[k,x]=_.useState(a),[j,y]=_.useState(i?n||[]:n?[n]:[]),[b,w]=_.useState("grid"),[N,P]=_.useState({page:1,limit:20,total:0,pages:0}),C=[{id:"PRODUCTS",name:o("adminMedia.products"),icon:""},{id:"CATEGORIES",name:o("adminMedia.categories"),icon:""},{id:"BANNERS",name:o("adminMedia.banners"),icon:""},{id:"PROFILE",name:o("adminMedia.profile"),icon:""},{id:"DOCUMENTS",name:o("adminMedia.documents"),icon:""},{id:"VIDEOS",name:o("adminMedia.videos"),icon:""}];_.useEffect(()=>{e&&A()},[e,k,N.page,g]),_.useEffect(()=>{e&&(x(a),y(i?n||[]:n?[n]:[]))},[e,a,n,i]),_.useEffect(()=>{if(!e)return;const R=Z=>{Z.key==="Escape"&&t()};return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}},[e,t]);const A=async()=>{m(!0);try{const R=new URLSearchParams({collection:k,page:N.page,limit:N.limit,...g&&{search:g}}),Z=await fetch(`/api/media?${R}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Z.ok){const T=await Z.json();c(T.data.media),P(T.data.pagination)}else throw new Error("Failed to load media")}catch(R){console.error("Load media error:",R),q.error("Failed to load media")}finally{m(!1)}},E=R=>{if(i){const Z=j.some(T=>T.id===R.id);y(Z?T=>T.filter(B=>B.id!==R.id):T=>[...T,R])}else y([R])},F=()=>{r(i?j:j[0]||null),t()},I=()=>{window.open(`/admin/media/upload?collection=${k}`,"_blank")},D=R=>j.some(Z=>Z.id===R.id),Y=R=>{if(R===0)return"0 Bytes";const Z=1024,T=["Bytes","KB","MB","GB"],B=Math.floor(Math.log(R)/Math.log(Z));return parseFloat((R/Math.pow(Z,B)).toFixed(2))+" "+T[B]};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o("adminMedia.selectMedia")}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:o(i?"adminMedia.selectMultipleMedia":"adminMedia.selectSingleMedia")})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(at,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(R=>s.jsxs("button",{onClick:()=>{x(R.id),P(Z=>({...Z,page:1}))},className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${k===R.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"mr-2",children:R.icon}),R.name]},R.id))})}),s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:o("adminMedia.searchMedia"),value:g,onChange:R=>p(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>w("grid"),className:`p-2 rounded-md ${b==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(Ag,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>w("list"),className:`p-2 rounded-md ${b==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(Mg,{className:"h-4 w-4"})}),s.jsxs("button",{onClick:I,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),o("adminMedia.upload")]})]})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Yn,{className:"h-8 w-8 animate-spin text-blue-500"})}):d.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:o("adminMedia.noMediaFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:o("adminMedia.noMediaInCollection")}),s.jsxs("button",{onClick:I,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),o("adminMedia.uploadFirstMedia")]})]}):s.jsxs(s.Fragment,{children:[b==="grid"?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:d.map(R=>s.jsxs("div",{onClick:()=>E(R),className:`relative group cursor-pointer rounded-lg border-2 overflow-hidden transition-all ${D(R)?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:R.mimeType.startsWith("image/")?s.jsx("img",{src:R.thumbnailUrl||R.url,alt:R.alt||R.originalName,className:"w-full h-full object-cover",loading:"lazy"}):s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(xr,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("span",{className:"text-xs",children:R.mimeType.split("/")[1].toUpperCase()})]})}),D(R)&&s.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 text-white rounded-full p-1",children:s.jsx(lc,{className:"h-3 w-3"})}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity flex items-center justify-center",children:s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white text-center",children:[s.jsx("p",{className:"text-sm font-medium truncate px-2",children:R.originalName}),s.jsx("p",{className:"text-xs",children:Y(R.size)})]})})]},R.id))}):s.jsx("div",{className:"space-y-2",children:d.map(R=>s.jsxs("div",{onClick:()=>E(R),className:`flex items-center p-3 rounded-lg border cursor-pointer transition-all ${D(R)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center flex-shrink-0 mr-4",children:R.mimeType.startsWith("image/")?s.jsx("img",{src:R.thumbnailUrl||R.url,alt:R.alt||R.originalName,className:"w-full h-full object-cover rounded"}):s.jsx(xr,{className:"w-6 h-6 text-gray-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:R.originalName}),s.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Y(R.size),"  ",R.mimeType]})]}),D(R)&&s.jsx("div",{className:"ml-4",children:s.jsx(lc,{className:"h-5 w-5 text-blue-500"})})]},R.id))}),N.pages>1&&s.jsxs("div",{className:"flex items-center justify-center mt-6 gap-2",children:[s.jsx("button",{onClick:()=>P(R=>({...R,page:R.page-1})),disabled:N.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia.previous")}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[N.page," / ",N.pages]}),s.jsx("button",{onClick:()=>P(R=>({...R,page:R.page+1})),disabled:N.page===N.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia.next")})]})]})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.length>0&&s.jsx("span",{children:i?`${j.length} ${o("adminMedia.itemsSelected")}`:`${j.length} ${o("adminMedia.itemSelected")}`})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:o("adminMedia.cancel")}),s.jsx("button",{onClick:F,disabled:j.length===0,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o(i?"adminMedia.selectItems":"adminMedia.selectItem")})]})]})]})}):null},jR=({isOpen:e,onClose:t,onSubmit:r,editingProduct:a,categories:n,subcategories:i,uploadedImage:o,setUploadedImage:d,handleImageUpload:c,setShowImageSearch:h,setShowMediaPicker:m})=>{const{t:g}=je(),[p,k]=_.useState("basic"),[x,j]=_.useState(!1),[y,b]=_.useState(!1),{register:w,handleSubmit:N,formState:{errors:P,isDirty:C},watch:A,setValue:E,reset:F}=Ki();_.useEffect(()=>{const Z=T=>{T.key==="Escape"&&e&&(C?window.confirm(g("productModal.unsavedChanges")||"You have unsaved changes. Are you sure you want to close without saving?")&&I():I())};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[e,C,g]),_.useEffect(()=>{if(a){E("name",a.name||""),E("nameIs",a.nameIs||""),E("price",a.price||0),E("stock",a.stock||0),E("category",a.category||""),E("subcategory",a.subcategory||""),E("isAgeRestricted",a.isAgeRestricted||!1),E("ageRestriction",a.ageRestriction||18),E("description",a.description||""),E("descriptionIs",a.descriptionIs||""),E("volume",a.volume||""),E("volumeIs",a.volumeIs||""),E("alcoholContent",a.alcoholContent||""),E("packaging",a.packaging||""),E("packagingIs",a.packagingIs||""),E("producer",a.producer||""),E("producerIs",a.producerIs||""),E("country",a.country||""),E("countryIs",a.countryIs||""),E("region",a.region||""),E("regionIs",a.regionIs||""),E("origin",a.origin||""),E("originIs",a.originIs||""),E("distributor",a.distributor||""),E("distributorIs",a.distributorIs||""),E("vintage",a.vintage||""),E("grapeVariety",a.grapeVariety||""),E("grapeVarietyIs",a.grapeVarietyIs||""),E("wineStyle",a.wineStyle||""),E("wineStyleIs",a.wineStyleIs||""),E("pricePerLiter",a.pricePerLiter||""),E("pricePerLiterIs",a.pricePerLiterIs||"");const Z=T=>{if(!T)return"";if(Array.isArray(T))return T.join(", ");if(typeof T=="string")try{const B=JSON.parse(T);return Array.isArray(B)?B.join(", "):T}catch{return T}return""};E("foodPairings",Z(a.foodPairings)),E("foodPairingsIs",Z(a.foodPairingsIs)),E("specialAttributes",Z(a.specialAttributes)),E("specialAttributesIs",Z(a.specialAttributesIs)),E("certifications",Z(a.certifications)),E("certificationsIs",Z(a.certificationsIs)),E("atvrProductId",a.atvrProductId||""),E("atvrUrl",a.atvrUrl||""),E("atvrImageUrl",a.atvrImageUrl||""),E("availability",a.availability||"available"),E("availabilityIs",a.availabilityIs||""),E("imageUrl",a.imageUrl||""),a.imageUrl&&d(a.imageUrl),E("hasDiscount",a.hasDiscount||!1),E("originalPrice",a.originalPrice||0),E("discountPercentage",a.discountPercentage||0),E("discountStartDate",a.discountStartDate?a.discountStartDate.split("T")[0]:""),E("discountEndDate",a.discountEndDate?a.discountEndDate.split("T")[0]:""),E("discountReason",a.discountReason||""),E("discountReasonIs",a.discountReasonIs||"")}else F(),d(null)},[a,E,F,d]);const I=()=>{C&&!window.confirm(g("adminProductModal.unsavedChanges")||"You have unsaved changes. Are you sure you want to close without saving?")||(k("basic"),F(),d(null),t())},D=Z=>{const T=W=>W?W.split(",").map(Q=>Q.trim()).filter(Q=>Q):[],B={...Z,foodPairings:JSON.stringify(T(Z.foodPairings)),foodPairingsIs:JSON.stringify(T(Z.foodPairingsIs)),specialAttributes:JSON.stringify(T(Z.specialAttributes)),specialAttributesIs:JSON.stringify(T(Z.specialAttributesIs)),certifications:JSON.stringify(T(Z.certifications)),certificationsIs:JSON.stringify(T(Z.certificationsIs))};r(B)},Y=async Z=>{var B,W,Q;const T=A(Z==="en"?"name":"nameIs");if(!T){alert(Z==="en"?"Please enter product name first":"Please enter Icelandic product name first");return}Z==="en"?j(!0):b(!0);try{const $=await ce.post("/products/generate/description",{productName:T,language:Z});$.success&&((B=$.data)!=null&&B.description)?E(Z==="en"?"description":"descriptionIs",$.data.description):alert("Failed to generate description. Please try again.")}catch($){console.error("Error generating description:",$),alert("Error generating description: "+(((Q=(W=$.response)==null?void 0:W.data)==null?void 0:Q.message)||$.message))}finally{Z==="en"?j(!1):b(!1)}};if(!e)return null;const R=[{id:"basic",label:g("productModal.tabs.basicInfo"),icon:""},{id:"details",label:g("productModal.tabs.details"),icon:""},{id:"origin",label:g("productModal.tabs.origin"),icon:""},{id:"pairings",label:g("productModal.tabs.pairingsAttributes"),icon:""},{id:"images",label:g("productModal.tabs.images"),icon:""},{id:"discounts",label:g("productModal.tabs.discounts"),icon:""}];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:g(a?"adminProductsPage.editProduct":"adminProductsPage.newProductTitle")}),s.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(at,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 px-6",children:s.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:R.map(Z=>s.jsxs("button",{type:"button",onClick:()=>k(Z.id),className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${p===Z.id?"border-primary-600 text-primary-600 dark:text-primary-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"}`,children:[s.jsx("span",{className:"mr-2",children:Z.icon}),Z.label]},Z.id))})}),s.jsxs("form",{onSubmit:N(D),className:"flex-1 overflow-y-auto",children:[s.jsxs("div",{className:"p-6 space-y-6",children:[p==="basic"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[g("adminProductsPage.nameEn")," *"]}),s.jsx("input",{...w("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Product name in English"}),P.name&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Name is required"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[g("adminProductsPage.nameIs")," *"]}),s.jsx("input",{...w("nameIs",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vruheiti  slensku"}),P.nameIs&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:"Icelandic name is required"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[g("productModal.fields.price")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",...w("price",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),P.price&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g("productModal.errors.priceRequired")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[g("productModal.fields.stock")," *"]}),s.jsx("input",{type:"number",min:"0",...w("stock",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),P.stock&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g("productModal.errors.stockRequired")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.fields.ageRestriction")}),s.jsx("input",{type:"number",min:"0",max:"100",...w("ageRestriction"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"18"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[g("productModal.fields.category")," *"]}),s.jsxs("select",{...w("category",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:g("productModal.fields.selectCategory")}),n==null?void 0:n.map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))]}),P.category&&s.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:g("productModal.errors.categoryRequired")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.fields.subcategory")}),s.jsxs("select",{...w("subcategory"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:g("productModal.fields.selectSubcategory")}),i==null?void 0:i.filter(Z=>Z.category===A("category")).map(Z=>s.jsx("option",{value:Z.value,children:Z.label},Z.value))]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",...w("isAgeRestricted"),className:"rounded border-gray-300 dark:border-gray-600"}),s.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:g("productModal.fields.ageRestrictedProduct")})]})]}),p==="details"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:g("productModal.fields.descriptionEn")}),s.jsxs("button",{type:"button",onClick:()=>Y("en"),disabled:x||!A("name"),className:`flex items-center space-x-1 px-3 py-1 rounded text-sm transition-colors ${x||!A("name")?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:[s.jsx(Ew,{className:"w-4 h-4"}),s.jsx("span",{children:x?"Generating...":"Generate with AI"})]})]}),s.jsx("textarea",{...w("description"),rows:4,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Product description in English"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:g("productModal.fields.descriptionIs")}),s.jsxs("button",{type:"button",onClick:()=>Y("is"),disabled:y||!A("nameIs"),className:`flex items-center space-x-1 px-3 py-1 rounded text-sm transition-colors ${y||!A("nameIs")?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"bg-primary-600 hover:bg-primary-700 text-white"}`,children:[s.jsx(Ew,{className:"w-4 h-4"}),s.jsx("span",{children:y?"Generating...":"Generate with AI"})]})]}),s.jsx("textarea",{...w("descriptionIs"),rows:4,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vrulsing  slensku"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Volume (EN)"}),s.jsx("input",{...w("volume"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 500 ml, 750 ml"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Volume (IS)"}),s.jsx("input",{...w("volumeIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., 500 ml, 750 ml"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Alcohol Content (%)"}),s.jsx("input",{...w("alcoholContent"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 5.0, 12.5"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Vintage (Year)"}),s.jsx("input",{...w("vintage"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 2020"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Packaging (EN)"}),s.jsx("input",{...w("packaging"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Bottle, Can, Box"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Packaging (IS)"}),s.jsx("input",{...w("packagingIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., Flaska, Ds"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grape Variety (EN)"}),s.jsx("input",{...w("grapeVariety"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Cabernet Sauvignon"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Grape Variety (IS)"}),s.jsx("input",{...w("grapeVarietyIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"rgutegund"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wine Style (EN)"}),s.jsx("input",{...w("wineStyle"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Dry, Sweet, Sparkling"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wine Style (IS)"}),s.jsx("input",{...w("wineStyleIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Vnstll"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price Per Liter (EN)"}),s.jsx("input",{...w("pricePerLiter"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 2,500 kr/L"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Price Per Liter (IS)"}),s.jsx("input",{...w("pricePerLiterIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., 2.500 kr/L"})]})]})]}),p==="origin"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producer (EN)"}),s.jsx("input",{...w("producer"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Producer name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producer (IS)"}),s.jsx("input",{...w("producerIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Framleiandi"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country (EN)"}),s.jsx("input",{...w("country"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Iceland, France"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country (IS)"}),s.jsx("input",{...w("countryIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., sland, Frakkland"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Region (EN)"}),s.jsx("input",{...w("region"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., Bordeaux, Tuscany"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Region (IS)"}),s.jsx("input",{...w("regionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Svi"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Origin (EN)"}),s.jsx("input",{...w("origin"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Specific origin details"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Origin (IS)"}),s.jsx("input",{...w("originIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Uppruni"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Distributor (EN)"}),s.jsx("input",{...w("distributor"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Distributor name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Distributor (IS)"}),s.jsx("input",{...w("distributorIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Dreifingaraili"})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"ATVR Information"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR Product ID"}),s.jsx("input",{...w("atvrProductId"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"e.g., 01448",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR URL"}),s.jsx("input",{...w("atvrUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white text-xs",placeholder:"ATVR product page URL",readOnly:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-1",children:"ATVR Image URL"}),s.jsx("input",{...w("atvrImageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white text-xs",placeholder:"ATVR product image URL",readOnly:!0})]})]})]})]}),p==="pairings"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Food Pairings (EN)"}),s.jsx("input",{...w("foodPairings"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Fish, Fowl, Beef"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter food pairings separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Food Pairings (IS)"}),s.jsx("input",{...w("foodPairingsIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum, t.d., Fiskur, Alifuglar, Nautakjt"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn matarpr askilin me kommum"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Special Attributes (EN)"}),s.jsx("input",{...w("specialAttributes"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Organic, Vegan, Premium"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter special attributes separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Special Attributes (IS)"}),s.jsx("input",{...w("specialAttributesIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum, t.d., Lfrnt, Vegan, Premium"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn sreiginleika askilda me kommum"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Certifications (EN)"}),s.jsx("input",{...w("certifications"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Comma-separated, e.g., Fair Trade, Kosher"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter certifications separated by commas"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Certifications (IS)"}),s.jsx("input",{...w("certificationsIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Askili me kommum"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Settu inn vottanir askildar me kommum"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Availability (EN)"}),s.jsxs("select",{...w("availability"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"available",children:"Available"}),s.jsx("option",{value:"special-order",children:"Special Order"}),s.jsx("option",{value:"coming-soon",children:"Coming Soon"}),s.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Availability (IS)"}),s.jsx("input",{...w("availabilityIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"t.d., Til rstfunar"})]})]})]}),p==="images"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:g("productModal.fields.productImage")}),s.jsxs("div",{className:"flex space-x-2 mb-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:c,className:"input flex-1 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"btn btn-outline flex items-center space-x-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),s.jsx("span",{children:g("productModal.buttons.searchOnline")})]}),s.jsxs("button",{type:"button",onClick:()=>m(!0),className:"btn btn-outline flex items-center space-x-2",children:[s.jsx(xr,{className:"w-4 h-4"}),s.jsx("span",{children:g("productModal.buttons.mediaLibrary")})]})]}),o&&s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:o,alt:"Product preview",className:"w-64 h-64 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"}),s.jsx("button",{type:"button",onClick:()=>d(null),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",children:s.jsx(at,{className:"w-4 h-4"})})]}),!o&&s.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12 text-center",children:[s.jsx(xr,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:g("productModal.fields.noImageSelected")}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:g("productModal.help.uploadImageHelp")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.fields.imageUrl")}),s.jsx("input",{...w("imageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://example.com/image.jpg"})]})]}),p==="discounts"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("input",{type:"checkbox",...w("hasDiscount"),className:"rounded border-gray-300 dark:border-gray-600"}),s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:g("productModal.discounts.enableDiscount")})]}),A("hasDiscount")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.discounts.originalPrice")}),s.jsx("input",{type:"number",step:"0.01",min:"0",...w("originalPrice",{min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.discounts.discountPercentage")}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",...w("discountPercentage",{min:0,max:100}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.discounts.startDate")}),s.jsx("input",{type:"date",...w("discountStartDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.discounts.endDate")}),s.jsx("input",{type:"date",...w("discountEndDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.discounts.reasonEn")}),s.jsx("input",{...w("discountReason"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:g("productModal.discounts.reasonPlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:g("productModal.discounts.reasonIs")}),s.jsx("input",{...w("discountReasonIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:g("productModal.discounts.reasonIsPlaceholder")})]})]}),!A("hasDiscount")&&s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-8 text-center",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:g("productModal.discounts.emptyStateMessage")})})]})]}),s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-800/50",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:I,className:"btn btn-outline px-6",children:g("productModal.buttons.cancel")}),s.jsx("button",{type:"submit",className:"btn btn-primary px-6",children:g(a?"productModal.buttons.updateProduct":"productModal.buttons.createProduct")})]})})]})]})})},NR=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(z=>z.auth),{products:a,isLoading:n,error:i}=Se(z=>z.products),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,g]=_.useState(!1),[p,k]=_.useState(!1),[x,j]=_.useState(null),[y,b]=_.useState(""),[w,N]=_.useState(""),[P,C]=_.useState(!1),[A,E]=_.useState(null),[F,I]=_.useState("grid"),[D,Y]=_.useState("kr"),[R,Z]=_.useState([]),{register:T,handleSubmit:B,formState:{errors:W},reset:Q,setValue:$,watch:O}=Ki({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:""}});_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(Sa({limit:100}))},[t,r]),_.useEffect(()=>{x?($("name",x.name),$("nameIs",x.nameIs||""),$("description",x.description),$("descriptionIs",x.descriptionIs||""),$("price",x.price),$("stock",x.stock),$("category",x.category),$("subcategory",x.subcategory||""),$("isAgeRestricted",x.isAgeRestricted),$("imageUrl",x.imageUrl||""),$("hasDiscount",x.hasDiscount||!1),$("originalPrice",x.originalPrice||0),$("discountPercentage",x.discountPercentage||0),$("discountStartDate",x.discountStartDate?x.discountStartDate.split("T")[0]:""),$("discountEndDate",x.discountEndDate?x.discountEndDate.split("T")[0]:""),$("discountReason",x.discountReason||""),$("discountReasonIs",x.discountReasonIs||""),E(x.imageUrl||null)):(Q(),E(null))},[x,$,Q]),_.useEffect(()=>{(async()=>{try{const Ie=await(await fetch("/api/settings/public",{})).json();if(Ie.data&&Ie.data.settings)if(Array.isArray(Ie.data.settings)){const Fe=Ie.data.settings.find(se=>se.key==="currencySymbol");Fe&&Fe.value&&Y(Fe.value)}else typeof Ie.data.settings=="object"&&Ie.data.settings.currencySymbol&&Y(Ie.data.settings.currencySymbol)}catch(we){console.warn("Failed to fetch currency symbol:",we)}})()},[]);const K=async z=>{try{const we={...z,price:parseFloat(z.price),stock:parseInt(z.stock),imageUrl:A||z.imageUrl};x?(await t(fd({id:x.id,...we})).unwrap(),q.success(e("common.success"))):(await t(gd(we)).unwrap(),q.success(e("common.success"))),d(!1),j(null),Q(),E(null)}catch(we){q.error(we.message||e("common.error"))}},V=async z=>{Z(z);for(const we of z)X(we)},X=async z=>{let Ie=0;const Fe=async()=>{try{const Pe=localStorage.getItem("token"),_e=await fetch(`https://olfong.olibuijr.com/api/media/${z}`,{headers:{Authorization:`Bearer ${Pe}`}});if(!_e.ok)return!1;const H=await _e.json(),ee=H.data||H;if(ee.url&&ee.url.includes("ai-")){const ae=a.map(ve=>ve.mediaId===z?{...ve,imageUrl:ee.url}:ve);return t({type:"products/fulfilled",payload:ae}),console.log(`AI image generation completed for mediaId ${z}`),Z(ve=>ve.filter(be=>be!==z)),!0}return!1}catch(Pe){return console.error(`Error polling media status for ${z}:`,Pe),!1}},se=setInterval(async()=>{Ie++,(await Fe()||Ie>=120)&&(clearInterval(se),Ie>=120&&(console.warn(`Polling timeout for mediaId ${z}`),Z(de=>de.filter(_e=>_e!==z))))},5e3);return se},le=async z=>{try{const we=Pe=>{if(!Pe)return 0;if(typeof Pe=="number")return Pe;if(typeof Pe=="string"){const de=Pe.match(/(\d+(?:\.\d+)?)/);return de?parseFloat(de[1]):0}return 0},Ie=Pe=>({Sder:"CIDER_RTD",Bjr:"BEER",Beer:"BEER",Rauvn:"WINE",Hvtvn:"WINE",Rsavn:"WINE",Freyivn:"WINE","Red wine":"WINE","White wine":"WINE","Rose wine":"WINE","Sparkling wine":"WINE","Sterkt fengi":"SPIRITS",Spirits:"SPIRITS",Lkjr:"SPIRITS",Liqueur:"SPIRITS",Cider:"CIDER_RTD",Unknown:"WINE"})[Pe]||"WINE",Fe={name:z.name,nameIs:z.nameIs||z.name,description:z.description||"",descriptionIs:z.descriptionIs||z.description||"",price:we(z.price),stock:100,category:Ie(z.category),ageRestriction:20,atvrImageUrl:z.image||"",alcoholContent:z.alcoholContent,volume:z.volume,volumeIs:z.volumeIs,country:z.country,countryIs:z.countryIs,region:z.region,regionIs:z.regionIs,origin:z.origin,originIs:z.originIs,producer:z.producer,producerIs:z.producerIs,distributor:z.distributor,distributorIs:z.distributorIs,packaging:z.packaging,packagingIs:z.packagingIs,packagingWeight:z.packagingWeight,packagingWeightIs:z.packagingWeightIs,carbonFootprint:z.carbonFootprint,carbonFootprintIs:z.carbonFootprintIs,vintage:z.vintage,grapeVariety:z.grapeVariety,grapeVarietyIs:z.grapeVarietyIs,wineStyle:z.wineStyle,wineStyleIs:z.wineStyleIs,pricePerLiter:z.pricePerLiter,pricePerLiterIs:z.pricePerLiterIs,subcategories:z.subcategories||[],foodPairings:JSON.stringify(z.foodPairings||[]),foodPairingsIs:JSON.stringify(z.foodPairingsIs||[]),specialAttributes:JSON.stringify(z.specialAttributes||[]),specialAttributesIs:JSON.stringify(z.specialAttributesIs||[]),certifications:JSON.stringify(z.certifications||[]),certificationsIs:JSON.stringify(z.certificationsIs||[]),storeAvailability:z.storeAvailability?JSON.stringify(z.storeAvailability):null,atvrProductId:z.atvrProductId,atvrUrl:z.atvrUrl,availability:z.availability||"available",availabilityIs:z.availabilityIs},se=await t(gd(Fe)).unwrap();return q.success(`Product "${z.name}" imported successfully`),se}catch(we){throw console.error("Error importing product:",we),q.error(`Failed to import product: ${we.message||"Unknown error"}`),we}},ge=z=>{j(z),d(!0)},ne=async z=>{if(window.confirm(e("common.delete")+"?"))try{await t(xh(z)).unwrap(),q.success(e("common.success"))}catch(we){q.error(we.message||e("common.error"))}},pe=z=>{const we=z.target.files[0];if(we){const Ie=new FileReader;Ie.onload=Fe=>{E(Fe.target.result)},Ie.readAsDataURL(we)}},Oe=z=>{E(z)},ue=z=>{z&&z.url&&(E(z.url),$("imageUrl",z.url)),k(!1)},Me=a.filter(z=>{const we=z.name.toLowerCase().includes(y.toLowerCase())||z.nameIs&&z.nameIs.toLowerCase().includes(y.toLowerCase()),Ie=!w||z.category===w,Fe=!P||z.isAgeRestricted;return we&&Ie&&Fe}),et=[{value:"WINE",label:e("categories.WINE")},{value:"BEER",label:e("categories.BEER")},{value:"BEERS",label:e("categories.BEERS")},{value:"CIDER_RTD",label:e("categories.CIDER_RTD")},{value:"SPIRITS",label:e("categories.SPIRITS")},{value:"NICOTINE",label:e("categories.NICOTINE")},{value:"NON_ALCOHOLIC",label:e("categories.NON_ALCOHOLIC")},{value:"OFFERS",label:e("categories.OFFERS")}],Ze=[{value:"WHITE_WINE",label:e("subcategories.WHITE_WINE"),category:"WINE"},{value:"RED_WINE",label:e("subcategories.RED_WINE"),category:"WINE"},{value:"SPARKLING_WINE",label:e("subcategories.SPARKLING_WINE"),category:"WINE"},{value:"CHAMPAGNE",label:e("subcategories.CHAMPAGNE"),category:"WINE"},{value:"YELLOW_WINE",label:e("subcategories.YELLOW_WINE"),category:"WINE"},{value:"ROSE_WINE",label:e("subcategories.ROSE_WINE"),category:"WINE"},{value:"GIN",label:e("subcategories.GIN"),category:"SPIRITS"},{value:"COGNAC",label:e("subcategories.COGNAC"),category:"SPIRITS"},{value:"RUM",label:e("subcategories.RUM"),category:"SPIRITS"},{value:"LIQUEURS_SHOTS",label:e("subcategories.LIQUEURS_SHOTS"),category:"SPIRITS"},{value:"TEQUILA",label:e("subcategories.TEQUILA"),category:"SPIRITS"},{value:"VODKA",label:e("subcategories.VODKA"),category:"SPIRITS"},{value:"WHISKEY",label:e("subcategories.WHISKEY"),category:"SPIRITS"},{value:"VAPE",label:e("subcategories.VAPE"),category:"NICOTINE"},{value:"NICOTINE_PADS",label:e("subcategories.NICOTINE_PADS"),category:"NICOTINE"},{value:"SODA",label:e("subcategories.SODA"),category:"NON_ALCOHOLIC"},{value:"SOFT_DRINKS",label:e("subcategories.SOFT_DRINKS"),category:"NON_ALCOHOLIC"},{value:"ENERGY_DRINKS",label:e("subcategories.ENERGY_DRINKS"),category:"NON_ALCOHOLIC"}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ae,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):n?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):i?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(lt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:e("common.error")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:i}),s.jsx("button",{onClick:()=>t(Sa({limit:100})),className:"btn btn-primary",children:e("common.retry")})]})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:Ye,title:e("adminProductsPage.productManagement"),description:e("adminProductsPage.manageProducts"),actions:s.jsxs("div",{className:"flex flex-col xs:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs("button",{onClick:()=>{j(null),d(!0)},className:"inline-flex items-center px-3 sm:px-4 py-2 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),e("adminProductsPage.newProduct")]}),s.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center px-3 sm:px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),e("adminProducts.importFromATVR")]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminLabels.filters")}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>I("grid"),className:`p-2 rounded-lg transition-colors ${F==="grid"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels.gridView"),children:s.jsx(Ag,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>I("list"),className:`p-2 rounded-lg transition-colors ${F==="list"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels.listView"),children:s.jsx(Mg,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminProductsPage.searchProducts"),value:y,onChange:z=>b(z.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:w,onChange:z=>N(z.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminProductsPage.allCategories")}),et.map(z=>s.jsx("option",{value:z.value,children:z.label},z.value))]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:P,onChange:z=>C(z.target.checked),className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage.showOnlyAgeRestricted")})]})]})]}),F==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Me.map(z=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:[s.jsx("div",{onClick:()=>ge(z),className:"aspect-square bg-white dark:bg-white rounded-lg mb-4 overflow-hidden p-2 cursor-pointer hover:shadow-md transition-shadow duration-200 relative",children:R.includes(z.mediaId)?s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 rounded",children:[s.jsx(sa,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-2 animate-spin"}),s.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300 text-center px-2",children:e("adminProductsPage.generatingAIImage")||"Generating AI Image"})]}):z.imageUrl?s.jsx("img",{src:z.imageUrl.startsWith("http")?z.imageUrl:`https://olfong.olibuijr.com${z.imageUrl}`,alt:z.name,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:s.jsx(Ye,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:"font-medium text-gray-900 dark:text-white line-clamp-2",children:z.nameIs||z.name}),z.isAgeRestricted&&s.jsx(lt,{className:"w-4 h-4 text-red-500 flex-shrink-0 ml-2"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:z.descriptionIs||z.description}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[z.price.toLocaleString()," ",D]}),s.jsxs("span",{className:`text-sm px-2 py-1 rounded ${z.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":z.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[z.stock," ",e("adminProductsPage.inStock")]})]}),s.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[s.jsxs("button",{onClick:()=>ge(z),className:"btn btn-outline btn-sm flex-1 flex items-center justify-center space-x-1",children:[s.jsx(La,{className:"w-3 h-3"}),s.jsx("span",{children:e("common.edit")})]}),s.jsx("button",{onClick:()=>ne(z.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900","data-testid":`delete-product-${z.id}`,"aria-label":`Delete ${z.name}`,children:s.jsx(er,{className:"w-3 h-3"})})]})]})]},z.id))}):s.jsx("div",{className:"space-y-4",children:Me.map(z=>{var we;return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{onClick:()=>ge(z),className:"w-24 h-24 bg-white dark:bg-white rounded-lg overflow-hidden flex-shrink-0 p-2 cursor-pointer hover:shadow-md transition-shadow duration-200 relative",children:R.includes(z.mediaId)?s.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900 dark:to-blue-800 rounded",children:[s.jsx(sa,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 animate-spin"}),s.jsx("p",{className:"text-xs font-medium text-blue-700 dark:text-blue-300 text-center mt-1",children:e("adminProductsPage.generatingAIImage")||"Gen"})]}):z.imageUrl?s.jsx("img",{src:z.imageUrl.startsWith("http")?z.imageUrl:`https://olfong.olibuijr.com${z.imageUrl}`,alt:z.name,className:"w-full h-full object-contain"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700 rounded",children:s.jsx(Ye,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:z.nameIs||z.name}),z.isAgeRestricted&&s.jsx(lt,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:z.descriptionIs||z.description}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:((we=z.category)==null?void 0:we.name)||"Unknown"}),s.jsxs("span",{className:`text-xs px-2 py-1 rounded ${z.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":z.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[z.stock," ",e("adminProductsPage.inStock")]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400 text-lg whitespace-nowrap",children:[z.price.toLocaleString()," ",D]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>ge(z),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(La,{className:"w-3 h-3"}),s.jsx("span",{children:e("common.edit")})]}),s.jsx("button",{onClick:()=>ne(z.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900","data-testid":`delete-product-${z.id}`,"aria-label":`Delete ${z.name}`,children:s.jsx(er,{className:"w-3 h-3"})})]})]})]})})]})},z.id)})}),Me.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ye,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminProductsPage.noProductsFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminProductsPage.adjustSearchOrAdd")})]}),s.jsx(jR,{isOpen:o,onClose:()=>{d(!1),j(null),E(null)},onSubmit:K,editingProduct:x,categories:et,subcategories:Ze,uploadedImage:A,setUploadedImage:E,handleImageUpload:pe,setShowImageSearch:g,setShowMediaPicker:k})]}),c&&s.jsx(vR,{onImportProduct:le,onClose:()=>h(!1),onGeneratingProducts:V}),m&&s.jsx(wR,{isOpen:m,onClose:()=>g(!1),onSelectImage:Oe,productName:(x==null?void 0:x.name)||"",category:(x==null?void 0:x.category)||"",initialQuery:(x==null?void 0:x.name)||""}),s.jsx(db,{isOpen:p,onClose:()=>k(!1),onSelect:ue,collection:"PRODUCTS",multiple:!1})]})]})})},_R=({isOpen:e,editingCategory:t,onClose:r,onSubmit:a,showImagePicker:n,onImagePickerOpen:i,onImagePickerClose:o,selectedImage:d,onImageSelect:c,onImageRemove:h})=>{var Z,T,B,W;const{t:m}=je(),[g,p]=_.useState("basic"),[k,x]=_.useState(!1),[j,y]=_.useState([]),[b,w]=_.useState(!1),{register:N,handleSubmit:P,formState:{errors:C},reset:A,setValue:E,watch:F}=Ki({defaultValues:{name:"",nameIs:"",slug:"",description:"",descriptionIs:"",icon:"",sortOrder:0,isActive:!0,metaTitle:"",metaTitleIs:"",metaDescription:"",metaDescriptionIs:"",hasDiscount:!1,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:"",vatProfileId:""}});_.useEffect(()=>{e&&(async()=>{var $,O;try{w(!0);const K=await ce.get("/vat-profiles"),V=(($=K.data)==null?void 0:$.profiles)||((O=K.data)==null?void 0:O.data)||K.data||[];y(Array.isArray(V)?V:[])}catch(K){console.error("Failed to fetch VAT profiles:",K),y([])}finally{w(!1)}})()},[e]);const I=[{id:"basic",label:m("adminCategories.basicInfo"),icon:""},{id:"images",label:m("adminCategories.images"),icon:""},{id:"vat",label:m("adminCategories.vat")||"VAT",icon:""},{id:"seo",label:m("adminCategories.seo"),icon:""},{id:"discounts",label:m("adminCategories.discounts"),icon:""}];_.useEffect(()=>{const Q=$=>{$.key==="Escape"&&e&&(k?window.confirm(m("common.unsavedChanges")||"You have unsaved changes. Are you sure you want to close without saving?")&&Y():Y())};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[e,k]),_.useEffect(()=>{e&&t?(E("name",t.name||""),E("nameIs",t.nameIs||""),E("slug",t.slug||""),E("description",t.description||""),E("descriptionIs",t.descriptionIs||""),E("icon",t.icon||""),E("sortOrder",t.sortOrder||0),E("isActive",t.isActive!==void 0?t.isActive:!0),E("vatProfileId",t.vatProfileId?String(t.vatProfileId):""),E("metaTitle",t.metaTitle||""),E("metaTitleIs",t.metaTitleIs||""),E("metaDescription",t.metaDescription||""),E("metaDescriptionIs",t.metaDescriptionIs||""),E("hasDiscount",t.hasDiscount||!1),E("discountPercentage",t.discountPercentage||0),E("discountStartDate",t.discountStartDate?t.discountStartDate.split("T")[0]:""),E("discountEndDate",t.discountEndDate?t.discountEndDate.split("T")[0]:""),E("discountReason",t.discountReason||""),E("discountReasonIs",t.discountReasonIs||""),p("basic")):e&&(A(),p("basic")),x(!1)},[e,t,E,A]);const D=()=>{x(!0)},Y=()=>{x(!1),A(),r()},R=async Q=>{try{const $={...Q,sortOrder:parseInt(Q.sortOrder),imageUrl:d||null,discountPercentage:Q.hasDiscount?parseFloat(Q.discountPercentage):0,vatProfileId:Q.vatProfileId?parseInt(Q.vatProfileId):null};t?await a({id:t.id,...$},"edit"):await a($,"create"),x(!1),A(),Y()}catch($){q.error($.message||m("common.error"))}};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:m(t?"adminCategories.editCategory":"adminCategories.newCategory")}),s.jsx("button",{onClick:Y,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(at,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:s.jsx("div",{className:"flex overflow-x-auto",children:I.map(Q=>s.jsxs("button",{onClick:()=>p(Q.id),className:`flex items-center gap-2 px-6 py-4 font-medium text-sm whitespace-nowrap transition-all duration-200 border-b-2 ${g===Q.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-300"}`,children:[s.jsx("span",{children:Q.icon}),Q.label]},Q.id))})}),s.jsxs("form",{onSubmit:P(R),onChange:D,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[g==="basic"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[m("adminCategories.nameEn")," *"]}),s.jsx("input",{type:"text",...N("name",{required:m("adminCategories.nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterNameEn")}),C.name&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:C.name.message})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[m("adminCategories.nameIs")," *"]}),s.jsx("input",{type:"text",...N("nameIs",{required:m("adminCategories.nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterNameIs")}),C.nameIs&&s.jsx("p",{className:"text-red-600 text-sm mt-1",children:C.nameIs.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.slug")}),s.jsx("input",{type:"text",...N("slug"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterSlugEn")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:m("adminCategories.slugHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.descEn")}),s.jsx("textarea",{...N("description"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"3",placeholder:m("adminPlaceholders.enterDescriptionEn")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.descIs")}),s.jsx("textarea",{...N("descriptionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"3",placeholder:m("adminPlaceholders.enterDescriptionIs")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.icon")}),s.jsx("input",{type:"text",...N("icon"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterIcon")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:m("adminCategories.iconHelp")})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.sortOrder")}),s.jsx("input",{type:"number",...N("sortOrder"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterSortOrder")})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-3 mt-8",children:[s.jsx("input",{type:"checkbox",...N("isActive"),className:"rounded border-gray-300 dark:border-gray-600 w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:m("adminCategories.active")})]})})]})]}),g==="images"&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4",children:m("adminCategories.categoryImageFromProduct")}),s.jsxs("div",{className:"flex items-center gap-4",children:[d&&s.jsx("div",{className:"relative",children:s.jsx("img",{src:d,alt:"Category",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600"})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("button",{type:"button",onClick:i,className:"btn btn-primary flex items-center gap-2",children:[s.jsx(xr,{className:"w-4 h-4"}),m(d?"adminCategories.changeImage":"adminCategories.selectFromMedia")]}),d&&s.jsx("button",{type:"button",onClick:h,className:"btn btn-outline text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:m("adminCategories.removeImage")})]})]})]})}),g==="vat"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:s.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:m("adminCategories.vatHelp")||"Select a VAT profile to apply to all products in this category. The VAT rate will be calculated based on the selected profile."})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.vatProfile")||"VAT Profile"}),b?s.jsx("div",{className:"flex items-center justify-center p-4 text-gray-500",children:m("common.loading")||"Loading..."}):s.jsxs("select",{...N("vatProfileId"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:m("adminCategories.selectVatProfile")||"Select a VAT Profile"}),j.map(Q=>s.jsxs("option",{value:String(Q.id),children:[Q.nameIs||Q.name," (",Q.vatRate,"%)"]},Q.id))]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:m("adminCategories.vatProfileHelp")||"The VAT rate will be applied to all products in this category."})]}),F("vatProfileId")&&(()=>{const Q=j.find($=>String($.id)===F("vatProfileId"));return Q?s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/20 rounded-lg p-4 border border-purple-200 dark:border-purple-700",children:[s.jsx("p",{className:"text-sm font-medium text-purple-900 dark:text-purple-100 mb-2",children:m("adminCategories.selectedVatProfile")||"Selected VAT Profile"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:[s.jsxs("span",{className:"font-medium",children:[m("adminCategories.name")||"Name",":"]})," ",Q.nameIs||Q.name]}),s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:[s.jsxs("span",{className:"font-medium",children:[m("adminCategories.rate")||"Rate",":"]})," ",Q.vatRate,"%"]}),Q.description&&s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:[s.jsxs("span",{className:"font-medium",children:[m("adminCategories.description")||"Description",":"]})," ",Q.description]})]})]}):null})()]}),g==="seo"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:s.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:m("adminCategories.seoHelp")})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.metaTitleEn")}),s.jsx("input",{type:"text",...N("metaTitle"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterMetaTitleEn"),maxLength:"60"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[((Z=F("metaTitle"))==null?void 0:Z.length)||0,"/60 characters"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.metaTitleIs")}),s.jsx("input",{type:"text",...N("metaTitleIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterMetaTitleIs"),maxLength:"60"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[((T=F("metaTitleIs"))==null?void 0:T.length)||0,"/60 characters"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.metaDescEn")}),s.jsx("textarea",{...N("metaDescription"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"3",placeholder:m("adminPlaceholders.enterMetaDescEn"),maxLength:"160"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[((B=F("metaDescription"))==null?void 0:B.length)||0,"/160 characters"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.metaDescIs")}),s.jsx("textarea",{...N("metaDescriptionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"3",placeholder:m("adminPlaceholders.enterMetaDescIs"),maxLength:"160"}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[((W=F("metaDescriptionIs"))==null?void 0:W.length)||0,"/160 characters"]})]})]}),g==="discounts"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4 mb-4",children:s.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-300",children:m("adminCategories.discountHelp")})}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",...N("hasDiscount"),className:"rounded border-gray-300 dark:border-gray-600 w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:m("adminCategories.enableCategoryDiscount")})]})}),F("hasDiscount")&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[m("adminCategories.discountPercentage")," *"]}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",...N("discountPercentage",{min:0,max:100}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.discountStartDate")}),s.jsx("input",{type:"date",...N("discountStartDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.discountEndDate")}),s.jsx("input",{type:"date",...N("discountEndDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.discountReasonEn")}),s.jsx("input",{type:"text",...N("discountReason"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterDiscountReasonEn")||"e.g., Seasonal Sale"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:m("adminCategories.discountReasonIs")}),s.jsx("input",{type:"text",...N("discountReasonIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:m("adminPlaceholders.enterDiscountReasonIs")||"e.g., Tmabundin sala"})]})]}),!F("hasDiscount")&&s.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 border border-gray-200 dark:border-gray-600 rounded-lg p-8 text-center",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:m("adminCategories.enableDiscountMessage")})})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6 bg-gray-50 dark:bg-gray-900/50 flex gap-3",children:[s.jsx("button",{type:"button",onClick:Y,className:"btn btn-outline flex-1",children:m("common.cancel")}),s.jsx("button",{type:"submit",onClick:P(R),className:"btn btn-primary flex-1",children:m(t?"common.save":"common.add")})]})]})}),s.jsx(db,{isOpen:n,onClose:o,onSelect:Q=>{c(Q.url)},collection:"PRODUCTS",selectedMedia:d,multiple:!1})]}):null},SR=({subcategory:e,onEdit:t,onDelete:r})=>{var n,i,o;const{t:a}=je();return s.jsx("div",{className:"px-6 py-4 pl-16",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.icon?s.jsx("span",{className:"text-lg text-white",children:e.icon}):s.jsx(Pc,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:e.slug}),!e.isActive&&s.jsx("span",{className:"text-xs text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20 px-2 py-1 rounded",children:a("adminCategories.inactive")})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.descriptionIs||e.description||a("adminCategories.noDescription")}),s.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a("adminCategories.productCount"),": ",((n=e._count)==null?void 0:n.products)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a("adminCategories.sortOrder"),": ",e.sortOrder]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>t(e),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(La,{className:"w-3 h-3"}),s.jsx("span",{children:a("common.edit")})]}),s.jsx("button",{onClick:()=>r(e.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((i=e._count)==null?void 0:i.products)>0,title:((o=e._count)==null?void 0:o.products)>0?a("adminCategories.cannotDeleteWithProducts"):"",children:s.jsx(er,{className:"w-3 h-3"})})]})]})})},CR=({subcategories:e,onEdit:t,onDelete:r})=>{const{t:a}=je();return!e||e.length===0?null:s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50",children:[s.jsx("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("adminCategories.subcategories")})}),s.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:e.map(n=>s.jsx(SR,{subcategory:n,onEdit:t,onDelete:r},n.id))})]})},PR=({category:e,onEdit:t,onDelete:r,onEditSubcategory:a,onDeleteSubcategory:n})=>{var o,d,c,h;const{t:i}=je();return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx("div",{className:"w-16 h-16 bg-white dark:bg-white rounded-lg flex items-center justify-center flex-shrink-0 border border-gray-200 dark:border-gray-200 overflow-hidden aspect-square",children:e.imageUrl?s.jsx("img",{src:e.imageUrl,alt:e.nameIs||e.name,className:"w-full h-full object-contain"}):e.icon?s.jsx("span",{className:"text-2xl",children:e.icon}):s.jsx(Pc,{className:"w-6 h-6 text-blue-600 dark:text-blue-600"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:e.nameIs||e.name}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:e.slug}),!e.isActive&&s.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20 px-2 py-1 rounded",children:i("adminCategories.inactive")})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.descriptionIs||e.description||i("adminCategories.noDescription")}),s.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.productCount"),": ",((o=e._count)==null?void 0:o.products)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.subcategories"),": ",((d=e.subcategories)==null?void 0:d.length)||0]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[i("adminCategories.sortOrder"),": ",e.sortOrder]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:()=>t(e),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[s.jsx(La,{className:"w-3 h-3"}),s.jsx("span",{children:i("common.edit")})]}),e.slug!=="tilbodin"&&s.jsx("button",{onClick:()=>r(e.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((c=e._count)==null?void 0:c.products)>0,title:((h=e._count)==null?void 0:h.products)>0?i("adminCategories.cannotDeleteWithProducts"):"",children:s.jsx(er,{className:"w-3 h-3"})})]})]})}),e.subcategories&&e.subcategories.length>0&&s.jsx(CR,{subcategories:e.subcategories,onEdit:a,onDelete:n})]})},ER=({categories:e,searchTerm:t,onEdit:r,onDelete:a,onEditSubcategory:n,onDeleteSubcategory:i})=>{const{t:o}=je(),d=e.filter(c=>t===""||c.name.toLowerCase().includes(t.toLowerCase())||c.nameIs.toLowerCase().includes(t.toLowerCase())||c.slug.toLowerCase().includes(t.toLowerCase()));return e.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Pc,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:o("adminCategories.noCategories")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:o("adminCategories.createFirstCategory")})]}):d.length===0?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o("common.noResults")})}):s.jsx("div",{className:"space-y-6",children:d.map(c=>s.jsx(PR,{category:c,onEdit:r,onDelete:a,onEditSubcategory:n,onDeleteSubcategory:i},c.id))})},IR=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(P=>P.auth),{categories:a,isLoading:n}=Se(P=>P.categories),[i,o]=_.useState(!1),[d,c]=_.useState(null),[h,m]=_.useState(!1),[g,p]=_.useState(null),[k,x]=_.useState("");_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(Ri({includeInactive:!0}))},[t,r]);const j=async(P,C)=>{try{C==="edit"?(await t(wh(P)).unwrap(),q.success(e("common.success"))):(await t(kh(P)).unwrap(),q.success(e("common.success"))),o(!1),c(null),p(null)}catch(A){q.error(A.message||e("common.error"))}},y=P=>{c(P),o(!0)},b=async P=>{if(window.confirm(e("adminCategories.confirmDelete")))try{await t(jh(P)).unwrap(),q.success(e("common.success"))}catch(C){q.error(C||e("common.error"))}},w=()=>{q.info("Subcategory editing will be implemented in a future update")},N=async()=>{q.info("Subcategory deletion will be implemented in a future update")};return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ae,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage.noPermission")})]})})})]}):n&&a.length===0?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsxs(Ae,{children:[s.jsx(hr,{icon:Pc,title:e("adminCategories.title"),description:e("adminCategories.manageCategories"),actions:s.jsxs("button",{onClick:()=>{c(null),o(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),e("adminCategories.newCategory")]})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4 mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Search categories by name...",value:k,onChange:P=>x(P.target.value),className:"input"}),k&&s.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:""})]})}),s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[s.jsx(ER,{categories:a,searchTerm:k,onEdit:y,onDelete:b,onEditSubcategory:w,onDeleteSubcategory:N}),s.jsx(_R,{isOpen:i,editingCategory:d,onClose:()=>{o(!1),c(null),p(null)},onSubmit:j,showImagePicker:h,onImagePickerOpen:()=>m(!0),onImagePickerClose:()=>m(!1),selectedImage:g,onImageSelect:P=>{p(P),m(!1)},onImageRemove:()=>p(null)})]})]})},TR=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(B=>B.auth),{orders:a,isLoading:n}=Se(B=>B.orders),[i,o]=_.useState(""),[d,c]=_.useState(""),[h,m]=_.useState(""),[g,p]=_.useState(null),[k,x]=_.useState(!1),[j,y]=_.useState(!1),[b,w]=_.useState(!1),[N,P]=_.useState(""),[C,A]=_.useState("");_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(Fo({limit:100}))},[t,r]);const E=B=>{switch(B){case"PENDING":return s.jsx(nr,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return s.jsx(Ye,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ye,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(yr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(Ct,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return s.jsx(Rg,{className:"w-5 h-5 text-red-600"});default:return s.jsx(Ye,{className:"w-5 h-5 text-gray-600"})}},F=B=>e("orders.statuses")[B],I=B=>{switch(B){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=a.filter(B=>{var O,K;const W=B.orderNumber.toLowerCase().includes(i.toLowerCase())||((O=B.user)==null?void 0:O.fullName)&&B.user.fullName.toLowerCase().includes(i.toLowerCase())||((K=B.user)==null?void 0:K.username)&&B.user.username.toLowerCase().includes(i.toLowerCase()),Q=!d||B.status===d,$=!h||B.deliveryMethod===h;return W&&Q&&$}),Y=async()=>{try{await t(cd({orderId:g.id,status:N})).unwrap(),q.success(e("adminPage.statusUpdated")),x(!1),p(null),P("")}catch(B){q.error(B.message||e("adminPage.errorOccurred"))}},R=async()=>{try{await t(uh({id:g.id,deliveryPersonId:C})).unwrap(),q.success(e("adminPage.deliveryAssigned")),y(!1),p(null),A("")}catch(B){q.error(B.message||e("adminPage.errorOccurred"))}},Z=[{value:"PENDING",label:e("orders.statuses.PENDING")},{value:"CONFIRMED",label:e("orders.statuses.CONFIRMED")},{value:"PREPARING",label:e("orders.statuses.PREPARING")},{value:"OUT_FOR_DELIVERY",label:e("orders.statuses.OUT_FOR_DELIVERY")},{value:"DELIVERED",label:e("orders.statuses.DELIVERED")},{value:"CANCELLED",label:e("orders.statuses.CANCELLED")}],T=[{id:1,name:"Jn Jnsson",phone:"+354 123 4567"},{id:2,name:"Anna Sigurardttir",phone:"+354 765 4321"},{id:3,name:"Magns Magnsson",phone:"+354 987 6543"}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ae,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):n?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:Mr,title:e("adminPage.orderManagement"),description:e("adminPage.manageOrders")}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminPage.searchOrders"),value:i,onChange:B=>o(B.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:d,onChange:B=>c(B.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminPage.allStatuses")}),Z.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))]}),s.jsxs("select",{value:h,onChange:B=>m(B.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminPage.allDeliveryMethods")}),s.jsx("option",{value:"DELIVERY",children:e("adminPage.homeDelivery")}),s.jsx("option",{value:"PICKUP",children:e("adminPage.storePickup")})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(Bo,{className:"w-4 h-4 mr-2"}),D.length," ",e("adminPage.results")]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.order")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.customer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.status")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.delivery")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.amount")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.date")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:D.map(B=>{var W,Q,$;return s.jsxs("tr",{onClick:()=>{p(B),w(!0)},className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150 cursor-pointer",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ye,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["#",B.orderNumber]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[B.items.length," ",e("cart.items")]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ts,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((W=B.user)==null?void 0:W.fullName)||((Q=B.user)==null?void 0:Q.username)||e("common.unknown")}),(($=B.user)==null?void 0:$.email)&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:B.user.email})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 w-fit ${I(B.status)}`,children:[E(B.status),s.jsx("span",{children:F(B.status)})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ta,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 mr-2"}),s.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:B.deliveryMethod==="PICKUP"?e("ordersPage.pickup"):e("ordersPage.homeDelivery")})]}),B.deliveryPerson&&s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e("adminPage.deliveryPerson"),": ",B.deliveryPerson.fullName]})]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[B.totalAmount.toLocaleString()," ",e("common.currency")]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(B.createdAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:O=>{O.stopPropagation(),p(B),w(!0)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-900 dark:hover:text-purple-300 transition-colors duration-200 flex items-center space-x-1",title:e("receipts.viewReceipt"),children:[s.jsx(Gy,{className:"w-4 h-4"}),s.jsx("span",{children:e("receipts.receipt")})]}),s.jsx("button",{onClick:O=>{O.stopPropagation(),p(B),x(!0),P(B.status)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200",children:e("adminPage.update")}),B.deliveryMethod==="DELIVERY"&&!B.deliveryPerson&&B.status==="CONFIRMED"&&s.jsx("button",{onClick:O=>{O.stopPropagation(),p(B),y(!0)},className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200",children:e("adminPage.assign")})]})})]},B.id)})})]})})}),D.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ye,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminPage.noOrdersFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage.adjustSearchCriteria")})]}),k&&g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage.updateOrder")," #",g.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage.newStatus")}),s.jsx("select",{value:N,onChange:B=>P(B.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:Z.map(B=>s.jsx("option",{value:B.value,children:B.label},B.value))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{x(!1),p(null),P("")},className:"btn btn-outline flex-1",children:e("common.cancel")}),s.jsx("button",{onClick:Y,className:"btn btn-primary flex-1",children:e("adminPage.update")})]})]})}),j&&g&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage.assignDeliveryPerson")," #",g.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage.deliveryPerson")}),s.jsxs("select",{value:C,onChange:B=>A(B.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[s.jsx("option",{value:"",children:e("adminPage.selectDeliveryPerson")}),T.map(B=>s.jsxs("option",{value:B.id,children:[B.name," (",B.phone,")"]},B.id))]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{y(!1),p(null),A("")},className:"btn btn-outline flex-1",children:e("common.cancel")}),s.jsx("button",{onClick:R,disabled:!C,className:"btn btn-primary flex-1",children:e("adminPage.assign")})]})]})}),s.jsx(FS,{isOpen:b,onClose:()=>w(!1),order:g,onEmailSent:()=>{q.success(e("receipts.emailSentSuccess"))}})]})})]})})},LR=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(se=>se.auth),{products:a,categories:n}=Se(se=>se.products),[i,o]=_.useState([]),[d,c]=_.useState(null),[h,m]=_.useState({name:"",email:"",phone:""}),[g,p]=_.useState(""),[k,x]=_.useState(""),[j,y]=_.useState("cash"),[b]=_.useState("COMPLETED"),[w,N]=_.useState(""),[P,C]=_.useState(""),[A,E]=_.useState([]),[F,I]=_.useState([]),[D,Y]=_.useState(!1),[R,Z]=_.useState(!1),[T,B]=_.useState(null),[W,Q]=_.useState(null),$=async()=>{try{const se=await ce.get("/settings?category=VAT");if(se.data){const Pe={};se.data.forEach(de=>{de.key==="vatRate"?Pe.rate=parseInt(de.value):Pe[de.key]=de.value==="true"}),Q(Pe)}}catch(se){console.error("Failed to fetch VAT settings:",se)}};_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(Sa({limit:100})),t(Ri()),O(),K(),$())},[t,r]);const O=async()=>{try{const se=await ce.get("/shipping");E(se.data),se.data.length>0&&C(se.data[0].id)}catch(se){console.error("Error fetching shipping options:",se)}},K=async()=>{try{const se=await fetch("/api/payment-gateways",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(se.ok){const de=((await se.json()).data.gateways||[]).filter(_e=>_e.isEnabled);I(de),de.length>0&&y(de[0].provider)}}catch(se){console.error("Error fetching payment gateways:",se),q.error("Failed to load payment methods")}},V=a.filter(se=>{const Pe=se.name.toLowerCase().includes(g.toLowerCase())||se.nameIs.toLowerCase().includes(g.toLowerCase()),de=!k||se.categoryId===parseInt(k);return Pe&&de&&se.isActive}),X=se=>{const Pe=i.find(de=>de.productId===se.id);o(Pe?i.map(de=>de.productId===se.id?{...de,quantity:de.quantity+1}:de):[...i,{productId:se.id,product:se,quantity:1,price:se.price}])},le=(se,Pe)=>{Pe<=0?o(i.filter(de=>de.productId!==se)):o(i.map(de=>de.productId===se?{...de,quantity:Pe}:de))},ge=se=>{o(i.filter(Pe=>Pe.productId!==se))},ne=i.reduce((se,Pe)=>se+Pe.price*Pe.quantity,0),pe=A.find(se=>se.id===parseInt(P)),Oe=pe?pe.fee:0,ue=(W==null?void 0:W.rate)||24,Me=Math.round(ne*(ue/100)),et=ne+Me+Oe,Ze=async se=>{if(!(se.length<2))try{return(await ce.get(`/customers?search=${se}&limit=10`)).data.customers||[]}catch(Pe){return console.error("Error searching customers:",Pe),[]}},z=async()=>{var se,Pe;if(i.length===0){q.error("Cart is empty");return}if(!d&&!h.email){q.error("Please select a customer or enter guest information");return}if(!P){q.error("Please select a shipping option");return}Y(!0);try{const de={items:i.map(H=>({productId:H.productId,quantity:H.quantity,price:H.price})),shippingOptionId:parseInt(P),paymentMethod:j,paymentStatus:b,notes:w,...d?{customerId:d.id}:{guestInfo:h}},_e=await ce.post("/orders/pos",de);B(_e.data.order),Z(!0),o([]),c(null),m({name:"",email:"",phone:""}),N(""),q.success("Order processed successfully!")}catch(de){console.error("Error processing order:",de),q.error(((Pe=(se=de.response)==null?void 0:se.data)==null?void 0:Pe.message)||"Failed to process order")}finally{Y(!1)}},we=()=>{window.print()},Ie=async se=>{if(T)try{await ce.post(`/orders/${T.id}/receipt/email`,{email:se}),q.success("Receipt sent successfully!")}catch(Pe){console.error("Error sending receipt:",Pe),q.error("Failed to send receipt")}},Fe=async()=>{if(T)try{const se=await ce.get(`/orders/${T.id}/receipt/pdf`,{responseType:"blob"}),Pe=window.URL.createObjectURL(new Blob([se.data])),de=document.createElement("a");de.href=Pe,de.setAttribute("download",`receipt-${T.orderNumber}.pdf`),document.body.appendChild(de),de.click(),de.remove(),window.URL.revokeObjectURL(Pe)}catch(se){console.error("Error downloading PDF:",se),q.error("Failed to download PDF")}};return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("admin.accessDeniedMessage")})]})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:Q_,title:e("pos.title"),description:e("pos.description")}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsxs("div",{className:"col-span-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("pos.customer")}),d?s.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ts,{className:"w-5 h-5 text-blue-600 mr-3"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.email})]})]}),s.jsx("button",{onClick:()=>c(null),className:"text-red-600 hover:text-red-800",children:s.jsx(at,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("pos.searchCustomers"),className:"input pl-10 w-full",onChange:async se=>{const Pe=se.target.value;Pe.length>=2&&await Ze(Pe)}})]}),s.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:e("pos.or")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("input",{type:"text",placeholder:e("pos.guestName"),value:h.name,onChange:se=>m({...h,name:se.target.value}),className:"input"}),s.jsx("input",{type:"email",placeholder:e("pos.guestEmail"),value:h.email,onChange:se=>m({...h,email:se.target.value}),className:"input"}),s.jsx("input",{type:"tel",placeholder:e("pos.guestPhone"),value:h.phone,onChange:se=>m({...h,phone:se.target.value}),className:"input"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("pos.searchProducts"),value:g,onChange:se=>p(se.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:k,onChange:se=>x(se.target.value),className:"input w-full md:w-48",children:[s.jsx("option",{value:"",children:e("pos.allCategories")}),n.map(se=>s.jsx("option",{value:se.id,children:se.name},se.id))]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:V.map(se=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer bg-white dark:bg-gray-800",onClick:()=>X(se),children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white rounded-lg mb-3 flex items-center justify-center border border-gray-200 dark:border-gray-300",children:se.imageUrl?s.jsx("img",{src:se.imageUrl,alt:se.name,className:"w-full h-full object-contain rounded-lg p-2"}):s.jsx(Ye,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white mb-1 line-clamp-2",children:se.name}),s.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[se.price.toLocaleString()," ISK"]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("pos.stock"),": ",se.stock]})]},se.id))})]})]}),s.jsx("div",{className:"col-span-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(Mr,{className:"w-5 h-5 mr-2"}),e("pos.cartTitle")," (",i.length," ",e("pos.cartItems"),")"]}),s.jsx("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:i.map(se=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:se.product.name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[se.price.toLocaleString()," ISK each"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>le(se.productId,se.quantity-1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(vm,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center text-sm font-medium",children:se.quantity}),s.jsx("button",{onClick:()=>le(se.productId,se.quantity+1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:s.jsx(Wt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>ge(se.productId),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-full",children:s.jsx(at,{className:"w-4 h-4"})})]})]},se.productId))}),s.jsxs("div",{className:"space-y-2 mb-6",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("pos.subtotal"),":"]}),s.jsxs("span",{children:[ne.toLocaleString()," ISK"]})]}),Me>0&&s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:[e("checkout.vat")," (",ue,"%):"]}),s.jsxs("span",{children:[Me.toLocaleString()," ISK"]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("pos.shipping"),":"]}),s.jsxs("span",{children:[Oe.toLocaleString()," ISK"]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 dark:border-gray-700 pt-2",children:[s.jsxs("span",{children:[e("pos.total"),":"]}),s.jsxs("span",{children:[et.toLocaleString()," ISK"]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.paymentMethod")}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.length>0?F.map(se=>{let Pe=Ea;return se.provider==="valitor"||se.provider==="rapyd"||se.provider==="stripe"||se.provider==="paypal"||se.provider==="netgiro"||se.provider==="teya"?Pe=Ea:(se.provider==="cash_on_delivery"||se.provider==="pay_on_pickup")&&(Pe=W7),s.jsxs("button",{onClick:()=>y(se.provider),className:`p-3 rounded-lg border text-sm font-medium transition-all ${j===se.provider?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300 ring-2 ring-blue-200":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300 hover:border-gray-400"}`,children:[s.jsx(Pe,{className:"w-5 h-5 mx-auto mb-1"}),s.jsx("div",{className:"text-xs truncate",children:se.displayName}),s.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5",children:se.environment==="production"?"Live":"Test"})]},se.id)}):s.jsx("div",{className:"col-span-2 text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No payment methods available. Please configure payment gateways in settings."})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.shippingOption")}),s.jsx("select",{value:P,onChange:se=>C(se.target.value),className:"input w-full",children:A.map(se=>s.jsxs("option",{value:se.id,children:[se.name," - ",se.fee.toLocaleString()," ISK"]},se.id))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.notes")}),s.jsx("textarea",{value:w,onChange:se=>N(se.target.value),className:"input w-full h-20 resize-none",placeholder:e("pos.orderNotes")})]}),s.jsx("button",{onClick:z,disabled:i.length===0||D,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:D?s.jsxs(s.Fragment,{children:[s.jsx(At,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ct,{className:"w-4 h-4 mr-2"}),e("pos.processOrder")]})})]})})]}),R&&T&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Order Receipt - ",T.orderNumber]}),s.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(at,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Order Date:"}),s.jsx("p",{children:new Date(T.createdAt).toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Status:"}),s.jsx("p",{className:"capitalize",children:T.status})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium mb-2",children:"Items:"}),s.jsx("div",{className:"space-y-2",children:T.items.map(se=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[se.product.name," x ",se.quantity]}),s.jsxs("span",{children:[(se.price*se.quantity).toLocaleString()," ISK"]})]},se.id))})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4 space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("checkoutPage.subtotal"),":"]}),s.jsxs("span",{children:[(T.subtotalBeforeVat||T.totalAmount-T.deliveryFee-(T.taxAmount||0)).toLocaleString()," ISK"]})]}),T.taxAmount>0&&s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("span",{children:[e("checkout.vat")," (",T.vatRate||24,"%):"]}),s.jsxs("span",{children:[T.taxAmount.toLocaleString()," ISK"]})]}),T.deliveryFee>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[e("pos.shipping"),":"]}),s.jsxs("span",{children:[T.deliveryFee.toLocaleString()," ISK"]})]}),s.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[s.jsxs("span",{children:[e("pos.total"),":"]}),s.jsxs("span",{children:[T.totalAmount.toLocaleString()," ISK"]})]})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:we,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(Ky,{className:"w-4 h-4 mr-2"}),"Print"]}),s.jsxs("button",{onClick:()=>{const se=prompt("Enter email address:");se&&Ie(se)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(Zy,{className:"w-4 h-4 mr-2"}),"Email"]}),s.jsxs("button",{onClick:Fe,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[s.jsx(Ia,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]})})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Lc(e){return e+.5|0}const Pn=(e,t,r)=>Math.max(Math.min(e,r),t);function Jl(e){return Pn(Lc(e*2.55),0,255)}function Wn(e){return Pn(Lc(e*255),0,255)}function Ga(e){return Pn(Lc(e/2.55)/100,0,1)}function qw(e){return Pn(Lc(e*100),0,100)}const Cs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ux=[..."0123456789ABCDEF"],AR=e=>ux[e&15],MR=e=>ux[(e&240)>>4]+ux[e&15],_u=e=>(e&240)>>4===(e&15),RR=e=>_u(e.r)&&_u(e.g)&&_u(e.b)&&_u(e.a);function DR(e){var t=e.length,r;return e[0]==="#"&&(t===4||t===5?r={r:255&Cs[e[1]]*17,g:255&Cs[e[2]]*17,b:255&Cs[e[3]]*17,a:t===5?Cs[e[4]]*17:255}:(t===7||t===9)&&(r={r:Cs[e[1]]<<4|Cs[e[2]],g:Cs[e[3]]<<4|Cs[e[4]],b:Cs[e[5]]<<4|Cs[e[6]],a:t===9?Cs[e[7]]<<4|Cs[e[8]]:255})),r}const OR=(e,t)=>e<255?t(e):"";function FR(e){var t=RR(e)?AR:MR;return e?"#"+t(e.r)+t(e.g)+t(e.b)+OR(e.a,t):void 0}const BR=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function GS(e,t,r){const a=t*Math.min(r,1-r),n=(i,o=(i+e/30)%12)=>r-a*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function zR(e,t,r){const a=(n,i=(n+e/60)%6)=>r-r*t*Math.max(Math.min(i,4-i,1),0);return[a(5),a(3),a(1)]}function $R(e,t,r){const a=GS(e,1,.5);let n;for(t+r>1&&(n=1/(t+r),t*=n,r*=n),n=0;n<3;n++)a[n]*=1-t-r,a[n]+=t;return a}function UR(e,t,r,a,n){return e===n?(t-r)/a+(t<r?6:0):t===n?(r-e)/a+2:(e-t)/a+4}function cb(e){const r=e.r/255,a=e.g/255,n=e.b/255,i=Math.max(r,a,n),o=Math.min(r,a,n),d=(i+o)/2;let c,h,m;return i!==o&&(m=i-o,h=d>.5?m/(2-i-o):m/(i+o),c=UR(r,a,n,m,i),c=c*60+.5),[c|0,h||0,d]}function ub(e,t,r,a){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,a)).map(Wn)}function hb(e,t,r){return ub(GS,e,t,r)}function VR(e,t,r){return ub($R,e,t,r)}function HR(e,t,r){return ub(zR,e,t,r)}function ZS(e){return(e%360+360)%360}function WR(e){const t=BR.exec(e);let r=255,a;if(!t)return;t[5]!==a&&(r=t[6]?Jl(+t[5]):Wn(+t[5]));const n=ZS(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?a=VR(n,i,o):t[1]==="hsv"?a=HR(n,i,o):a=hb(n,i,o),{r:a[0],g:a[1],b:a[2],a:r}}function qR(e,t){var r=cb(e);r[0]=ZS(r[0]+t),r=hb(r),e.r=r[0],e.g=r[1],e.b=r[2]}function KR(e){if(!e)return;const t=cb(e),r=t[0],a=qw(t[1]),n=qw(t[2]);return e.a<255?`hsla(${r}, ${a}%, ${n}%, ${Ga(e.a)})`:`hsl(${r}, ${a}%, ${n}%)`}const Kw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function GR(){const e={},t=Object.keys(Gw),r=Object.keys(Kw);let a,n,i,o,d;for(a=0;a<t.length;a++){for(o=d=t[a],n=0;n<r.length;n++)i=r[n],d=d.replace(i,Kw[i]);i=parseInt(Gw[o],16),e[d]=[i>>16&255,i>>8&255,i&255]}return e}let Su;function ZR(e){Su||(Su=GR(),Su.transparent=[0,0,0,0]);const t=Su[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const YR=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function JR(e){const t=YR.exec(e);let r=255,a,n,i;if(t){if(t[7]!==a){const o=+t[7];r=t[8]?Jl(o):Pn(o*255,0,255)}return a=+t[1],n=+t[3],i=+t[5],a=255&(t[2]?Jl(a):Pn(a,0,255)),n=255&(t[4]?Jl(n):Pn(n,0,255)),i=255&(t[6]?Jl(i):Pn(i,0,255)),{r:a,g:n,b:i,a:r}}}function XR(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${Ga(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const pf=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,co=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function QR(e,t,r){const a=co(Ga(e.r)),n=co(Ga(e.g)),i=co(Ga(e.b));return{r:Wn(pf(a+r*(co(Ga(t.r))-a))),g:Wn(pf(n+r*(co(Ga(t.g))-n))),b:Wn(pf(i+r*(co(Ga(t.b))-i))),a:e.a+r*(t.a-e.a)}}function Cu(e,t,r){if(e){let a=cb(e);a[t]=Math.max(0,Math.min(a[t]+a[t]*r,t===0?360:1)),a=hb(a),e.r=a[0],e.g=a[1],e.b=a[2]}}function YS(e,t){return e&&Object.assign(t||{},e)}function Zw(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Wn(e[3]))):(t=YS(e,{r:0,g:0,b:0,a:1}),t.a=Wn(t.a)),t}function eD(e){return e.charAt(0)==="r"?JR(e):WR(e)}class uc{constructor(t){if(t instanceof uc)return t;const r=typeof t;let a;r==="object"?a=Zw(t):r==="string"&&(a=DR(t)||ZR(t)||eD(t)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var t=YS(this._rgb);return t&&(t.a=Ga(t.a)),t}set rgb(t){this._rgb=Zw(t)}rgbString(){return this._valid?XR(this._rgb):void 0}hexString(){return this._valid?FR(this._rgb):void 0}hslString(){return this._valid?KR(this._rgb):void 0}mix(t,r){if(t){const a=this.rgb,n=t.rgb;let i;const o=r===i?.5:r,d=2*o-1,c=a.a-n.a,h=((d*c===-1?d:(d+c)/(1+d*c))+1)/2;i=1-h,a.r=255&h*a.r+i*n.r+.5,a.g=255&h*a.g+i*n.g+.5,a.b=255&h*a.b+i*n.b+.5,a.a=o*a.a+(1-o)*n.a,this.rgb=a}return this}interpolate(t,r){return t&&(this._rgb=QR(this._rgb,t._rgb,r)),this}clone(){return new uc(this.rgb)}alpha(t){return this._rgb.a=Wn(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=Lc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Cu(this._rgb,2,t),this}darken(t){return Cu(this._rgb,2,-t),this}saturate(t){return Cu(this._rgb,1,t),this}desaturate(t){return Cu(this._rgb,1,-t),this}rotate(t){return qR(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Va(){}const tD=(()=>{let e=0;return()=>e++})();function ct(e){return e==null}function sr(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function ot(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ds(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function ca(e,t){return Ds(e)?e:t}function Xe(e,t){return typeof e>"u"?t:e}const rD=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function _t(e,t,r){if(e&&typeof e.call=="function")return e.apply(r,t)}function mt(e,t,r,a){let n,i,o;if(sr(e))for(i=e.length,n=0;n<i;n++)t.call(r,e[n],n);else if(ot(e))for(o=Object.keys(e),i=o.length,n=0;n<i;n++)t.call(r,e[o[n]],o[n])}function Im(e,t){let r,a,n,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,a=e.length;r<a;++r)if(n=e[r],i=t[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function Tm(e){if(sr(e))return e.map(Tm);if(ot(e)){const t=Object.create(null),r=Object.keys(e),a=r.length;let n=0;for(;n<a;++n)t[r[n]]=Tm(e[r[n]]);return t}return e}function JS(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function sD(e,t,r,a){if(!JS(e))return;const n=t[e],i=r[e];ot(n)&&ot(i)?hc(n,i,a):t[e]=Tm(i)}function hc(e,t,r){const a=sr(t)?t:[t],n=a.length;if(!ot(e))return e;r=r||{};const i=r.merger||sD;let o;for(let d=0;d<n;++d){if(o=a[d],!ot(o))continue;const c=Object.keys(o);for(let h=0,m=c.length;h<m;++h)i(c[h],e,o,r)}return e}function Sd(e,t){return hc(e,t,{merger:aD})}function aD(e,t,r){if(!JS(e))return;const a=t[e],n=r[e];ot(a)&&ot(n)?Sd(a,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Tm(n))}const Yw={"":e=>e,x:e=>e.x,y:e=>e.y};function nD(e){const t=e.split("."),r=[];let a="";for(const n of t)a+=n,a.endsWith("\\")?a=a.slice(0,-1)+".":(r.push(a),a="");return r}function iD(e){const t=nD(e);return r=>{for(const a of t){if(a==="")break;r=r&&r[a]}return r}}function rl(e,t){return(Yw[t]||(Yw[t]=iD(t)))(e)}function mb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const mc=e=>typeof e<"u",Qn=e=>typeof e=="function",Jw=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};function oD(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const bt=Math.PI,kr=2*bt,lD=kr+bt,Lm=Number.POSITIVE_INFINITY,dD=bt/180,br=bt/2,mi=bt/4,Xw=bt*2/3,XS=Math.log10,Ca=Math.sign;function Cd(e,t,r){return Math.abs(e-t)<r}function Qw(e){const t=Math.round(e);e=Cd(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(XS(e))),a=e/r;return(a<=1?1:a<=2?2:a<=5?5:10)*r}function cD(e){const t=[],r=Math.sqrt(e);let a;for(a=1;a<r;a++)e%a===0&&(t.push(a),t.push(e/a));return r===(r|0)&&t.push(r),t.sort((n,i)=>n-i).pop(),t}function uD(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function gc(e){return!uD(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function hD(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}function mD(e,t,r){let a,n,i;for(a=0,n=e.length;a<n;a++)i=e[a][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Pi(e){return e*(bt/180)}function gD(e){return e*(180/bt)}function ej(e){if(!Ds(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function QS(e,t){const r=t.x-e.x,a=t.y-e.y,n=Math.sqrt(r*r+a*a);let i=Math.atan2(a,r);return i<-.5*bt&&(i+=kr),{angle:i,distance:n}}function hx(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function fD(e,t){return(e-t+lD)%kr-bt}function Gs(e){return(e%kr+kr)%kr}function gb(e,t,r,a){const n=Gs(e),i=Gs(t),o=Gs(r),d=Gs(i-n),c=Gs(o-n),h=Gs(n-i),m=Gs(n-o);return n===i||n===o||a&&i===o||d>c&&h<m}function Lr(e,t,r){return Math.max(t,Math.min(r,e))}function pD(e){return Lr(e,-32768,32767)}function En(e,t,r,a=1e-6){return e>=Math.min(t,r)-a&&e<=Math.max(t,r)+a}function fb(e,t,r){r=r||(o=>e[o]<t);let a=e.length-1,n=0,i;for(;a-n>1;)i=n+a>>1,r(i)?n=i:a=i;return{lo:n,hi:a}}const Ei=(e,t,r,a)=>fb(e,r,a?n=>{const i=e[n][t];return i<r||i===r&&e[n+1][t]===r}:n=>e[n][t]<r),xD=(e,t,r)=>fb(e,r,a=>e[a][t]>=r);function yD(e,t,r){let a=0,n=e.length;for(;a<n&&e[a]<t;)a++;for(;n>a&&e[n-1]>r;)n--;return a>0||n<e.length?e.slice(a,n):e}const e4=["push","pop","shift","splice","unshift"];function bD(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),e4.forEach(r=>{const a="_onData"+mb(r),n=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return e._chartjs.listeners.forEach(d=>{typeof d[a]=="function"&&d[a](...i)}),o}})})}function tj(e,t){const r=e._chartjs;if(!r)return;const a=r.listeners,n=a.indexOf(t);n!==-1&&a.splice(n,1),!(a.length>0)&&(e4.forEach(i=>{delete e[i]}),delete e._chartjs)}function t4(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const r4=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function s4(e,t){let r=[],a=!1;return function(...n){r=n,a||(a=!0,r4.call(window,()=>{a=!1,e.apply(t,r)}))}}function vD(e,t){let r;return function(...a){return t?(clearTimeout(r),r=setTimeout(e,t,a)):e.apply(this,a),t}}const pb=e=>e==="start"?"left":e==="end"?"right":"center",Cr=(e,t,r)=>e==="start"?t:e==="end"?r:(t+r)/2,kD=(e,t,r,a)=>e===(a?"left":"right")?r:e==="center"?(t+r)/2:t;function wD(e,t,r){const a=t.length;let n=0,i=a;if(e._sorted){const{iScale:o,vScale:d,_parsed:c}=e,h=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,m=o.axis,{min:g,max:p,minDefined:k,maxDefined:x}=o.getUserBounds();if(k){if(n=Math.min(Ei(c,m,g).lo,r?a:Ei(t,m,o.getPixelForValue(g)).lo),h){const j=c.slice(0,n+1).reverse().findIndex(y=>!ct(y[d.axis]));n-=Math.max(0,j)}n=Lr(n,0,a-1)}if(x){let j=Math.max(Ei(c,o.axis,p,!0).hi+1,r?0:Ei(t,m,o.getPixelForValue(p),!0).hi+1);if(h){const y=c.slice(j-1).findIndex(b=>!ct(b[d.axis]));j+=Math.max(0,y)}i=Lr(j,n,a)-n}else i=a-n}return{start:n,count:i}}function jD(e){const{xScale:t,yScale:r,_scaleRanges:a}=e,n={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!a)return e._scaleRanges=n,!0;const i=a.xmin!==t.min||a.xmax!==t.max||a.ymin!==r.min||a.ymax!==r.max;return Object.assign(a,n),i}const Pu=e=>e===0||e===1,rj=(e,t,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*kr/r)),sj=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*kr/r)+1,Pd={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*br)+1,easeOutSine:e=>Math.sin(e*br),easeInOutSine:e=>-.5*(Math.cos(bt*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Pu(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Pu(e)?e:rj(e,.075,.3),easeOutElastic:e=>Pu(e)?e:sj(e,.075,.3),easeInOutElastic(e){return Pu(e)?e:e<.5?.5*rj(e*2,.1125,.45):.5+.5*sj(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Pd.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Pd.easeInBounce(e*2)*.5:Pd.easeOutBounce(e*2-1)*.5+.5};function xb(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function aj(e){return xb(e)?e:new uc(e)}function xf(e){return xb(e)?e:new uc(e).saturate(.5).darken(.1).hexString()}const ND=["x","y","borderWidth","radius","tension"],_D=["color","borderColor","backgroundColor"];function SD(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:_D},numbers:{type:"number",properties:ND}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function CD(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nj=new Map;function PD(e,t){t=t||{};const r=e+JSON.stringify(t);let a=nj.get(r);return a||(a=new Intl.NumberFormat(e,t),nj.set(r,a)),a}function a4(e,t,r){return PD(t,r).format(e)}const ED={values(e){return sr(e)?e:""+e},numeric(e,t,r){if(e===0)return"0";const a=this.chart.options.locale;let n,i=e;if(r.length>1){const h=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),i=ID(e,r)}const o=XS(Math.abs(i)),d=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:d,maximumFractionDigits:d};return Object.assign(c,this.options.ticks.format),a4(e,a,c)}};function ID(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}var n4={formatters:ED};function TD(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:n4.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Gi=Object.create(null),mx=Object.create(null);function Ed(e,t){if(!t)return e;const r=t.split(".");for(let a=0,n=r.length;a<n;++a){const i=r[a];e=e[i]||(e[i]=Object.create(null))}return e}function yf(e,t,r){return typeof t=="string"?hc(Ed(e,t),r):hc(Ed(e,""),t)}class LD{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=a=>a.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(a,n)=>xf(n.backgroundColor),this.hoverBorderColor=(a,n)=>xf(n.borderColor),this.hoverColor=(a,n)=>xf(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return yf(this,t,r)}get(t){return Ed(this,t)}describe(t,r){return yf(mx,t,r)}override(t,r){return yf(Gi,t,r)}route(t,r,a,n){const i=Ed(this,t),o=Ed(this,a),d="_"+r;Object.defineProperties(i,{[d]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[d],h=o[n];return ot(c)?Object.assign({},h,c):Xe(c,h)},set(c){this[d]=c}}})}apply(t){t.forEach(r=>r(this))}}var Ut=new LD({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[SD,CD,TD]);function AD(e){return!e||ct(e.size)||ct(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function ij(e,t,r,a,n){let i=t[n];return i||(i=t[n]=e.measureText(n).width,r.push(n)),i>a&&(a=i),a}function gi(e,t,r){const a=e.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((t-n)*a)/a+n}function oj(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function gx(e,t,r,a){i4(e,t,r,a,null)}function i4(e,t,r,a,n){let i,o,d,c,h,m,g,p;const k=t.pointStyle,x=t.rotation,j=t.radius;let y=(x||0)*dD;if(k&&typeof k=="object"&&(i=k.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(r,a),e.rotate(y),e.drawImage(k,-k.width/2,-k.height/2,k.width,k.height),e.restore();return}if(!(isNaN(j)||j<=0)){switch(e.beginPath(),k){default:n?e.ellipse(r,a,n/2,j,0,0,kr):e.arc(r,a,j,0,kr),e.closePath();break;case"triangle":m=n?n/2:j,e.moveTo(r+Math.sin(y)*m,a-Math.cos(y)*j),y+=Xw,e.lineTo(r+Math.sin(y)*m,a-Math.cos(y)*j),y+=Xw,e.lineTo(r+Math.sin(y)*m,a-Math.cos(y)*j),e.closePath();break;case"rectRounded":h=j*.516,c=j-h,o=Math.cos(y+mi)*c,g=Math.cos(y+mi)*(n?n/2-h:c),d=Math.sin(y+mi)*c,p=Math.sin(y+mi)*(n?n/2-h:c),e.arc(r-g,a-d,h,y-bt,y-br),e.arc(r+p,a-o,h,y-br,y),e.arc(r+g,a+d,h,y,y+br),e.arc(r-p,a+o,h,y+br,y+bt),e.closePath();break;case"rect":if(!x){c=Math.SQRT1_2*j,m=n?n/2:c,e.rect(r-m,a-c,2*m,2*c);break}y+=mi;case"rectRot":g=Math.cos(y)*(n?n/2:j),o=Math.cos(y)*j,d=Math.sin(y)*j,p=Math.sin(y)*(n?n/2:j),e.moveTo(r-g,a-d),e.lineTo(r+p,a-o),e.lineTo(r+g,a+d),e.lineTo(r-p,a+o),e.closePath();break;case"crossRot":y+=mi;case"cross":g=Math.cos(y)*(n?n/2:j),o=Math.cos(y)*j,d=Math.sin(y)*j,p=Math.sin(y)*(n?n/2:j),e.moveTo(r-g,a-d),e.lineTo(r+g,a+d),e.moveTo(r+p,a-o),e.lineTo(r-p,a+o);break;case"star":g=Math.cos(y)*(n?n/2:j),o=Math.cos(y)*j,d=Math.sin(y)*j,p=Math.sin(y)*(n?n/2:j),e.moveTo(r-g,a-d),e.lineTo(r+g,a+d),e.moveTo(r+p,a-o),e.lineTo(r-p,a+o),y+=mi,g=Math.cos(y)*(n?n/2:j),o=Math.cos(y)*j,d=Math.sin(y)*j,p=Math.sin(y)*(n?n/2:j),e.moveTo(r-g,a-d),e.lineTo(r+g,a+d),e.moveTo(r+p,a-o),e.lineTo(r-p,a+o);break;case"line":o=n?n/2:Math.cos(y)*j,d=Math.sin(y)*j,e.moveTo(r-o,a-d),e.lineTo(r+o,a+d);break;case"dash":e.moveTo(r,a),e.lineTo(r+Math.cos(y)*(n?n/2:j),a+Math.sin(y)*j);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function fc(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function yb(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function bb(e){e.restore()}function MD(e,t,r,a,n){if(!t)return e.lineTo(r.x,r.y);if(n==="middle"){const i=(t.x+r.x)/2;e.lineTo(i,t.y),e.lineTo(i,r.y)}else n==="after"!=!!a?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function RD(e,t,r,a){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(a?t.cp1x:t.cp2x,a?t.cp1y:t.cp2y,a?r.cp2x:r.cp1x,a?r.cp2y:r.cp1y,r.x,r.y)}function DD(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ct(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function OD(e,t,r,a,n){if(n.strikethrough||n.underline){const i=e.measureText(a),o=t-i.actualBoundingBoxLeft,d=t+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,h=r+i.actualBoundingBoxDescent,m=n.strikethrough?(c+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(o,m),e.lineTo(d,m),e.stroke()}}function FD(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function pc(e,t,r,a,n,i={}){const o=sr(t)?t:[t],d=i.strokeWidth>0&&i.strokeColor!=="";let c,h;for(e.save(),e.font=n.string,DD(e,i),c=0;c<o.length;++c)h=o[c],i.backdrop&&FD(e,i.backdrop),d&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),ct(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(h,r,a,i.maxWidth)),e.fillText(h,r,a,i.maxWidth),OD(e,r,a,h,i),a+=Number(n.lineHeight);e.restore()}function Am(e,t){const{x:r,y:a,w:n,h:i,radius:o}=t;e.arc(r+o.topLeft,a+o.topLeft,o.topLeft,1.5*bt,bt,!0),e.lineTo(r,a+i-o.bottomLeft),e.arc(r+o.bottomLeft,a+i-o.bottomLeft,o.bottomLeft,bt,br,!0),e.lineTo(r+n-o.bottomRight,a+i),e.arc(r+n-o.bottomRight,a+i-o.bottomRight,o.bottomRight,br,0,!0),e.lineTo(r+n,a+o.topRight),e.arc(r+n-o.topRight,a+o.topRight,o.topRight,0,-br,!0),e.lineTo(r+o.topLeft,a)}const BD=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zD=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function $D(e,t){const r=(""+e).match(BD);if(!r||r[1]==="normal")return t*1.2;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100;break}return t*e}const UD=e=>+e||0;function vb(e,t){const r={},a=ot(t),n=a?Object.keys(t):t,i=ot(e)?a?o=>Xe(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of n)r[o]=UD(i(o));return r}function o4(e){return vb(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Uo(e){return vb(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Os(e){const t=o4(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ar(e,t){e=e||{},t=t||Ut.font;let r=Xe(e.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let a=Xe(e.style,t.style);a&&!(""+a).match(zD)&&(console.warn('Invalid font style specified: "'+a+'"'),a=void 0);const n={family:Xe(e.family,t.family),lineHeight:$D(Xe(e.lineHeight,t.lineHeight),r),size:r,style:a,weight:Xe(e.weight,t.weight),string:""};return n.string=AD(n),n}function Eu(e,t,r,a){let n,i,o;for(n=0,i=e.length;n<i;++n)if(o=e[n],o!==void 0&&o!==void 0)return o}function VD(e,t,r){const{min:a,max:n}=e,i=rD(t,(n-a)/2),o=(d,c)=>r&&d===0?0:d+c;return{min:o(a,-Math.abs(i)),max:o(n,i)}}function Ji(e,t){return Object.assign(Object.create(e),t)}function kb(e,t=[""],r,a,n=()=>e[0]){const i=r||e;typeof a>"u"&&(a=u4("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:a,_getTarget:n,override:d=>kb([d,...e],t,i,a)};return new Proxy(o,{deleteProperty(d,c){return delete d[c],delete d._keys,delete e[0][c],!0},get(d,c){return d4(d,c,()=>JD(c,t,e,d))},getOwnPropertyDescriptor(d,c){return Reflect.getOwnPropertyDescriptor(d._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(d,c){return dj(d).includes(c)},ownKeys(d){return dj(d)},set(d,c,h){const m=d._storage||(d._storage=n());return d[c]=m[c]=h,delete d._keys,!0}})}function sl(e,t,r,a){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:l4(e,a),setContext:i=>sl(e,i,r,a),override:i=>sl(e.override(i),t,r,a)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,d){return d4(i,o,()=>WD(i,o,d))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,d){return e[o]=d,delete i[o],!0}})}function l4(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:a=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:r,indexable:a,isScriptable:Qn(r)?r:()=>r,isIndexable:Qn(a)?a:()=>a}}const HD=(e,t)=>e?e+mb(t):t,wb=(e,t)=>ot(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function d4(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const a=r();return e[t]=a,a}function WD(e,t,r){const{_proxy:a,_context:n,_subProxy:i,_descriptors:o}=e;let d=a[t];return Qn(d)&&o.isScriptable(t)&&(d=qD(t,d,e,r)),sr(d)&&d.length&&(d=KD(t,d,e,o.isIndexable)),wb(t,d)&&(d=sl(d,n,i&&i[t],o)),d}function qD(e,t,r,a){const{_proxy:n,_context:i,_subProxy:o,_stack:d}=r;if(d.has(e))throw new Error("Recursion detected: "+Array.from(d).join("->")+"->"+e);d.add(e);let c=t(i,o||a);return d.delete(e),wb(e,c)&&(c=jb(n._scopes,n,e,c)),c}function KD(e,t,r,a){const{_proxy:n,_context:i,_subProxy:o,_descriptors:d}=r;if(typeof i.index<"u"&&a(e))return t[i.index%t.length];if(ot(t[0])){const c=t,h=n._scopes.filter(m=>m!==c);t=[];for(const m of c){const g=jb(h,n,e,m);t.push(sl(g,i,o&&o[e],d))}}return t}function c4(e,t,r){return Qn(e)?e(t,r):e}const GD=(e,t)=>e===!0?t:typeof e=="string"?rl(t,e):void 0;function ZD(e,t,r,a,n){for(const i of t){const o=GD(r,i);if(o){e.add(o);const d=c4(o._fallback,r,n);if(typeof d<"u"&&d!==r&&d!==a)return d}else if(o===!1&&typeof a<"u"&&r!==a)return null}return!1}function jb(e,t,r,a){const n=t._rootScopes,i=c4(t._fallback,r,a),o=[...e,...n],d=new Set;d.add(a);let c=lj(d,o,r,i||r,a);return c===null||typeof i<"u"&&i!==r&&(c=lj(d,o,i,c,a),c===null)?!1:kb(Array.from(d),[""],n,i,()=>YD(t,r,a))}function lj(e,t,r,a,n){for(;r;)r=ZD(e,t,r,a,n);return r}function YD(e,t,r){const a=e._getTarget();t in a||(a[t]={});const n=a[t];return sr(n)&&ot(r)?r:n||{}}function JD(e,t,r,a){let n;for(const i of t)if(n=u4(HD(i,e),r),typeof n<"u")return wb(e,n)?jb(r,a,e,n):n}function u4(e,t){for(const r of t){if(!r)continue;const a=r[e];if(typeof a<"u")return a}}function dj(e){let t=e._keys;return t||(t=e._keys=XD(e._scopes)),t}function XD(e){const t=new Set;for(const r of e)for(const a of Object.keys(r).filter(n=>!n.startsWith("_")))t.add(a);return Array.from(t)}const QD=Number.EPSILON||1e-14,al=(e,t)=>t<e.length&&!e[t].skip&&e[t],h4=e=>e==="x"?"y":"x";function eO(e,t,r,a){const n=e.skip?t:e,i=t,o=r.skip?t:r,d=hx(i,n),c=hx(o,i);let h=d/(d+c),m=c/(d+c);h=isNaN(h)?0:h,m=isNaN(m)?0:m;const g=a*h,p=a*m;return{previous:{x:i.x-g*(o.x-n.x),y:i.y-g*(o.y-n.y)},next:{x:i.x+p*(o.x-n.x),y:i.y+p*(o.y-n.y)}}}function tO(e,t,r){const a=e.length;let n,i,o,d,c,h=al(e,0);for(let m=0;m<a-1;++m)if(c=h,h=al(e,m+1),!(!c||!h)){if(Cd(t[m],0,QD)){r[m]=r[m+1]=0;continue}n=r[m]/t[m],i=r[m+1]/t[m],d=Math.pow(n,2)+Math.pow(i,2),!(d<=9)&&(o=3/Math.sqrt(d),r[m]=n*o*t[m],r[m+1]=i*o*t[m])}}function rO(e,t,r="x"){const a=h4(r),n=e.length;let i,o,d,c=al(e,0);for(let h=0;h<n;++h){if(o=d,d=c,c=al(e,h+1),!d)continue;const m=d[r],g=d[a];o&&(i=(m-o[r])/3,d[`cp1${r}`]=m-i,d[`cp1${a}`]=g-i*t[h]),c&&(i=(c[r]-m)/3,d[`cp2${r}`]=m+i,d[`cp2${a}`]=g+i*t[h])}}function sO(e,t="x"){const r=h4(t),a=e.length,n=Array(a).fill(0),i=Array(a);let o,d,c,h=al(e,0);for(o=0;o<a;++o)if(d=c,c=h,h=al(e,o+1),!!c){if(h){const m=h[t]-c[t];n[o]=m!==0?(h[r]-c[r])/m:0}i[o]=d?h?Ca(n[o-1])!==Ca(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}tO(e,n,i),rO(e,i,t)}function Iu(e,t,r){return Math.max(Math.min(e,r),t)}function aO(e,t){let r,a,n,i,o,d=fc(e[0],t);for(r=0,a=e.length;r<a;++r)o=i,i=d,d=r<a-1&&fc(e[r+1],t),i&&(n=e[r],o&&(n.cp1x=Iu(n.cp1x,t.left,t.right),n.cp1y=Iu(n.cp1y,t.top,t.bottom)),d&&(n.cp2x=Iu(n.cp2x,t.left,t.right),n.cp2y=Iu(n.cp2y,t.top,t.bottom)))}function nO(e,t,r,a,n){let i,o,d,c;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")sO(e,n);else{let h=a?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)d=e[i],c=eO(h,d,e[Math.min(i+1,o-(a?0:1))%o],t.tension),d.cp1x=c.previous.x,d.cp1y=c.previous.y,d.cp2x=c.next.x,d.cp2y=c.next.y,h=d}t.capBezierPoints&&aO(e,r)}function Nb(){return typeof window<"u"&&typeof document<"u"}function _b(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Mm(e,t,r){let a;return typeof e=="string"?(a=parseInt(e,10),e.indexOf("%")!==-1&&(a=a/100*t.parentNode[r])):a=e,a}const zg=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function iO(e,t){return zg(e).getPropertyValue(t)}const oO=["top","right","bottom","left"];function Di(e,t,r){const a={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=oO[n];a[i]=parseFloat(e[t+"-"+i+r])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}const lO=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function dO(e,t){const r=e.touches,a=r&&r.length?r[0]:e,{offsetX:n,offsetY:i}=a;let o=!1,d,c;if(lO(n,i,e.target))d=n,c=i;else{const h=t.getBoundingClientRect();d=a.clientX-h.left,c=a.clientY-h.top,o=!0}return{x:d,y:c,box:o}}function vi(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:a}=t,n=zg(r),i=n.boxSizing==="border-box",o=Di(n,"padding"),d=Di(n,"border","width"),{x:c,y:h,box:m}=dO(e,r),g=o.left+(m&&d.left),p=o.top+(m&&d.top);let{width:k,height:x}=t;return i&&(k-=o.width+d.width,x-=o.height+d.height),{x:Math.round((c-g)/k*r.width/a),y:Math.round((h-p)/x*r.height/a)}}function cO(e,t,r){let a,n;if(t===void 0||r===void 0){const i=e&&_b(e);if(!i)t=e.clientWidth,r=e.clientHeight;else{const o=i.getBoundingClientRect(),d=zg(i),c=Di(d,"border","width"),h=Di(d,"padding");t=o.width-h.width-c.width,r=o.height-h.height-c.height,a=Mm(d.maxWidth,i,"clientWidth"),n=Mm(d.maxHeight,i,"clientHeight")}}return{width:t,height:r,maxWidth:a||Lm,maxHeight:n||Lm}}const In=e=>Math.round(e*10)/10;function uO(e,t,r,a){const n=zg(e),i=Di(n,"margin"),o=Mm(n.maxWidth,e,"clientWidth")||Lm,d=Mm(n.maxHeight,e,"clientHeight")||Lm,c=cO(e,t,r);let{width:h,height:m}=c;if(n.boxSizing==="content-box"){const p=Di(n,"border","width"),k=Di(n,"padding");h-=k.width+p.width,m-=k.height+p.height}return h=Math.max(0,h-i.width),m=Math.max(0,a?h/a:m-i.height),h=In(Math.min(h,o,c.maxWidth)),m=In(Math.min(m,d,c.maxHeight)),h&&!m&&(m=In(h/2)),(t!==void 0||r!==void 0)&&a&&c.height&&m>c.height&&(m=c.height,h=In(Math.floor(m*a))),{width:h,height:m}}function cj(e,t,r){const a=t||1,n=In(e.height*a),i=In(e.width*a);e.height=In(e.height),e.width=In(e.width);const o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==a||o.height!==n||o.width!==i?(e.currentDevicePixelRatio=a,o.height=n,o.width=i,e.ctx.setTransform(a,0,0,a,0,0),!0):!1}const hO=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Nb()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function uj(e,t){const r=iO(e,t),a=r&&r.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function ki(e,t,r,a){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function mO(e,t,r,a){return{x:e.x+r*(t.x-e.x),y:a==="middle"?r<.5?e.y:t.y:a==="after"?r<1?e.y:t.y:r>0?t.y:e.y}}function gO(e,t,r,a){const n={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=ki(e,n,r),d=ki(n,i,r),c=ki(i,t,r),h=ki(o,d,r),m=ki(d,c,r);return ki(h,m,r)}const fO=function(e,t){return{x(r){return e+e+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,a){return r-a},leftForLtr(r,a){return r-a}}},pO=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Vo(e,t,r){return e?fO(t,r):pO()}function m4(e,t){let r,a;(t==="ltr"||t==="rtl")&&(r=e.canvas.style,a=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=a)}function g4(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function f4(e){return e==="angle"?{between:gb,compare:fD,normalize:Gs}:{between:En,compare:(t,r)=>t-r,normalize:t=>t}}function hj({start:e,end:t,count:r,loop:a,style:n}){return{start:e%r,end:t%r,loop:a&&(t-e+1)%r===0,style:n}}function xO(e,t,r){const{property:a,start:n,end:i}=r,{between:o,normalize:d}=f4(a),c=t.length;let{start:h,end:m,loop:g}=e,p,k;if(g){for(h+=c,m+=c,p=0,k=c;p<k&&o(d(t[h%c][a]),n,i);++p)h--,m--;h%=c,m%=c}return m<h&&(m+=c),{start:h,end:m,loop:g,style:e.style}}function yO(e,t,r){if(!r)return[e];const{property:a,start:n,end:i}=r,o=t.length,{compare:d,between:c,normalize:h}=f4(a),{start:m,end:g,loop:p,style:k}=xO(e,t,r),x=[];let j=!1,y=null,b,w,N;const P=()=>c(n,N,b)&&d(n,N)!==0,C=()=>d(i,b)===0||c(i,N,b),A=()=>j||P(),E=()=>!j||C();for(let F=m,I=m;F<=g;++F)w=t[F%o],!w.skip&&(b=h(w[a]),b!==N&&(j=c(b,n,i),y===null&&A()&&(y=d(b,n)===0?F:I),y!==null&&E()&&(x.push(hj({start:y,end:F,loop:p,count:o,style:k})),y=null),I=F,N=b));return y!==null&&x.push(hj({start:y,end:g,loop:p,count:o,style:k})),x}function bO(e,t){const r=[],a=e.segments;for(let n=0;n<a.length;n++){const i=yO(a[n],e.points,t);i.length&&r.push(...i)}return r}function vO(e,t,r,a){let n=0,i=t-1;if(r&&!a)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,r&&(i+=n);i>n&&e[i%t].skip;)i--;return i%=t,{start:n,end:i}}function kO(e,t,r,a){const n=e.length,i=[];let o=t,d=e[t],c;for(c=t+1;c<=r;++c){const h=e[c%n];h.skip||h.stop?d.skip||(a=!1,i.push({start:t%n,end:(c-1)%n,loop:a}),t=o=h.stop?c:null):(o=c,d.skip&&(t=c)),d=h}return o!==null&&i.push({start:t%n,end:o%n,loop:a}),i}function wO(e,t){const r=e.points,a=e.options.spanGaps,n=r.length;if(!n)return[];const i=!!e._loop,{start:o,end:d}=vO(r,n,i,a);if(a===!0)return mj(e,[{start:o,end:d,loop:i}],r,t);const c=d<o?d+n:d,h=!!e._fullLoop&&o===0&&d===n-1;return mj(e,kO(r,o,c,h),r,t)}function mj(e,t,r,a){return!a||!a.setContext||!r?t:jO(e,t,r,a)}function jO(e,t,r,a){const n=e._chart.getContext(),i=gj(e.options),{_datasetIndex:o,options:{spanGaps:d}}=e,c=r.length,h=[];let m=i,g=t[0].start,p=g;function k(x,j,y,b){const w=d?-1:1;if(x!==j){for(x+=c;r[x%c].skip;)x-=w;for(;r[j%c].skip;)j+=w;x%c!==j%c&&(h.push({start:x%c,end:j%c,loop:y,style:b}),m=b,g=j%c)}}for(const x of t){g=d?g:x.start;let j=r[g%c],y;for(p=g+1;p<=x.end;p++){const b=r[p%c];y=gj(a.setContext(Ji(n,{type:"segment",p0:j,p1:b,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),NO(y,m)&&k(g,p-1,x.loop,m),j=b,m=y}g<p-1&&k(g,p-1,x.loop,m)}return h}function gj(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function NO(e,t){if(!t)return!1;const r=[],a=function(n,i){return xb(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(e,a)!==JSON.stringify(t,a)}function Tu(e,t,r){return e.options.clip?e[r]:t[r]}function _O(e,t){const{xScale:r,yScale:a}=e;return r&&a?{left:Tu(r,t,"left"),right:Tu(r,t,"right"),top:Tu(a,t,"top"),bottom:Tu(a,t,"bottom")}:t}function SO(e,t){const r=t._clip;if(r.disabled)return!1;const a=_O(t,e.chartArea);return{left:r.left===!1?0:a.left-(r.left===!0?0:r.left),right:r.right===!1?e.width:a.right+(r.right===!0?0:r.right),top:r.top===!1?0:a.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?e.height:a.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class CO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,a,n){const i=r.listeners[n],o=r.duration;i.forEach(d=>d({chart:t,initial:r.initial,numSteps:o,currentStep:Math.min(a-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=r4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((a,n)=>{if(!a.running||!a.items.length)return;const i=a.items;let o=i.length-1,d=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>a.duration&&(a.duration=c._total),c.tick(t),d=!0):(i[o]=i[i.length-1],i.pop());d&&(n.draw(),this._notify(n,a,t,"progress")),i.length||(a.running=!1,this._notify(n,a,t,"complete"),a.initial=!1),r+=i.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let a=r.get(t);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,a)),a}listen(t,r,a){this._getAnims(t).listeners[r].push(a)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((a,n)=>Math.max(a,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const a=r.items;let n=a.length-1;for(;n>=0;--n)a[n].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ha=new CO;const fj="transparent",PO={boolean(e,t,r){return r>.5?t:e},color(e,t,r){const a=aj(e||fj),n=a.valid&&aj(t||fj);return n&&n.valid?n.mix(a,r).hexString():t},number(e,t,r){return e+(t-e)*r}};class EO{constructor(t,r,a,n){const i=r[a];n=Eu([t.to,n,i,t.from]);const o=Eu([t.from,i,n]);this._active=!0,this._fn=t.fn||PO[t.type||typeof o],this._easing=Pd[t.easing]||Pd.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=a,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,r,a){if(this._active){this._notify(!1);const n=this._target[this._prop],i=a-this._start,o=this._duration-i;this._start=a,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Eu([t.to,r,n,t.from]),this._from=Eu([t.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,a=this._duration,n=this._prop,i=this._from,o=this._loop,d=this._to;let c;if(this._active=i!==d&&(o||r<a),!this._active){this._target[n]=d,this._notify(!0);return}if(r<0){this._target[n]=i;return}c=r/a%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,d,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,a)=>{t.push({res:r,rej:a})})}_notify(t){const r=t?"res":"rej",a=this._promises||[];for(let n=0;n<a.length;n++)a[n][r]()}}class p4{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!ot(t))return;const r=Object.keys(Ut.animation),a=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const i=t[n];if(!ot(i))return;const o={};for(const d of r)o[d]=i[d];(sr(i.properties)&&i.properties||[n]).forEach(d=>{(d===n||!a.has(d))&&a.set(d,o)})})}_animateOptions(t,r){const a=r.options,n=TO(t,a);if(!n)return[];const i=this._createAnimations(n,a);return a.$shared&&IO(t.options.$animations,a).then(()=>{t.options=a},()=>{}),i}_createAnimations(t,r){const a=this._properties,n=[],i=t.$animations||(t.$animations={}),o=Object.keys(r),d=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(t,r));continue}const m=r[h];let g=i[h];const p=a.get(h);if(g)if(p&&g.active()){g.update(p,m,d);continue}else g.cancel();if(!p||!p.duration){t[h]=m;continue}i[h]=g=new EO(p,t,h,m),n.push(g)}return n}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const a=this._createAnimations(t,r);if(a.length)return Ha.add(this._chart,a),!0}}function IO(e,t){const r=[],a=Object.keys(t);for(let n=0;n<a.length;n++){const i=e[a[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function TO(e,t){if(!t)return;let r=e.options;if(!r){e.options=t;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function pj(e,t){const r=e&&e.options||{},a=r.reverse,n=r.min===void 0?t:0,i=r.max===void 0?t:0;return{start:a?i:n,end:a?n:i}}function LO(e,t,r){if(r===!1)return!1;const a=pj(e,r),n=pj(t,r);return{top:n.end,right:a.end,bottom:n.start,left:a.start}}function AO(e){let t,r,a,n;return ot(e)?(t=e.top,r=e.right,a=e.bottom,n=e.left):t=r=a=n=e,{top:t,right:r,bottom:a,left:n,disabled:e===!1}}function x4(e,t){const r=[],a=e._getSortedDatasetMetas(t);let n,i;for(n=0,i=a.length;n<i;++n)r.push(a[n].index);return r}function xj(e,t,r,a={}){const n=e.keys,i=a.mode==="single";let o,d,c,h;if(t===null)return;let m=!1;for(o=0,d=n.length;o<d;++o){if(c=+n[o],c===r){if(m=!0,a.all)continue;break}h=e.values[c],Ds(h)&&(i||t===0||Ca(t)===Ca(h))&&(t+=h)}return!m&&!a.all?0:t}function MO(e,t){const{iScale:r,vScale:a}=t,n=r.axis==="x"?"x":"y",i=a.axis==="x"?"x":"y",o=Object.keys(e),d=new Array(o.length);let c,h,m;for(c=0,h=o.length;c<h;++c)m=o[c],d[c]={[n]:m,[i]:e[m]};return d}function bf(e,t){const r=e&&e.options.stacked;return r||r===void 0&&t.stack!==void 0}function RO(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}function DO(e){const{min:t,max:r,minDefined:a,maxDefined:n}=e.getUserBounds();return{min:a?t:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function OO(e,t,r){const a=e[t]||(e[t]={});return a[r]||(a[r]={})}function yj(e,t,r,a){for(const n of t.getMatchingVisibleMetas(a).reverse()){const i=e[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function bj(e,t){const{chart:r,_cachedMeta:a}=e,n=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:d}=a,c=i.axis,h=o.axis,m=RO(i,o,a),g=t.length;let p;for(let k=0;k<g;++k){const x=t[k],{[c]:j,[h]:y}=x,b=x._stacks||(x._stacks={});p=b[h]=OO(n,m,j),p[d]=y,p._top=yj(p,o,!0,a.type),p._bottom=yj(p,o,!1,a.type);const w=p._visualValues||(p._visualValues={});w[d]=y}}function vf(e,t){const r=e.scales;return Object.keys(r).filter(a=>r[a].axis===t).shift()}function FO(e,t){return Ji(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function BO(e,t,r){return Ji(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function Bl(e,t){const r=e.controller.index,a=e.vScale&&e.vScale.axis;if(a){t=t||e._parsed;for(const n of t){const i=n._stacks;if(!i||i[a]===void 0||i[a][r]===void 0)return;delete i[a][r],i[a]._visualValues!==void 0&&i[a]._visualValues[r]!==void 0&&delete i[a]._visualValues[r]}}}const kf=e=>e==="reset"||e==="none",vj=(e,t)=>t?e:Object.assign({},e),zO=(e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:x4(r,!0),values:null};class Ho{constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=bf(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Bl(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,a=this.getDataset(),n=(g,p,k,x)=>g==="x"?p:g==="r"?x:k,i=r.xAxisID=Xe(a.xAxisID,vf(t,"x")),o=r.yAxisID=Xe(a.yAxisID,vf(t,"y")),d=r.rAxisID=Xe(a.rAxisID,vf(t,"r")),c=r.indexAxis,h=r.iAxisID=n(c,i,o,d),m=r.vAxisID=n(c,o,i,d);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(d),r.iScale=this.getScaleForId(h),r.vScale=this.getScaleForId(m)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&tj(this._data,this),t._stacked&&Bl(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),a=this._data;if(ot(r)){const n=this._cachedMeta;this._data=MO(r,n)}else if(a!==r){if(a){tj(a,this);const n=this._cachedMeta;Bl(n),n._parsed=[]}r&&Object.isExtensible(r)&&bD(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,a=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=bf(r.vScale,r),r.stack!==a.stack&&(n=!0,Bl(r),r.stack=a.stack),this._resyncElements(t),(n||i!==r._stacked)&&(bj(this,r._parsed),r._stacked=bf(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),a=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:a,_data:n}=this,{iScale:i,_stacked:o}=a,d=i.axis;let c=t===0&&r===n.length?!0:a._sorted,h=t>0&&a._parsed[t-1],m,g,p;if(this._parsing===!1)a._parsed=n,a._sorted=!0,p=n;else{sr(n[t])?p=this.parseArrayData(a,n,t,r):ot(n[t])?p=this.parseObjectData(a,n,t,r):p=this.parsePrimitiveData(a,n,t,r);const k=()=>g[d]===null||h&&g[d]<h[d];for(m=0;m<r;++m)a._parsed[m+t]=g=p[m],c&&(k()&&(c=!1),h=g);a._sorted=c}o&&bj(this,p)}parsePrimitiveData(t,r,a,n){const{iScale:i,vScale:o}=t,d=i.axis,c=o.axis,h=i.getLabels(),m=i===o,g=new Array(n);let p,k,x;for(p=0,k=n;p<k;++p)x=p+a,g[p]={[d]:m||i.parse(h[x],x),[c]:o.parse(r[x],x)};return g}parseArrayData(t,r,a,n){const{xScale:i,yScale:o}=t,d=new Array(n);let c,h,m,g;for(c=0,h=n;c<h;++c)m=c+a,g=r[m],d[c]={x:i.parse(g[0],m),y:o.parse(g[1],m)};return d}parseObjectData(t,r,a,n){const{xScale:i,yScale:o}=t,{xAxisKey:d="x",yAxisKey:c="y"}=this._parsing,h=new Array(n);let m,g,p,k;for(m=0,g=n;m<g;++m)p=m+a,k=r[p],h[m]={x:i.parse(rl(k,d),p),y:o.parse(rl(k,c),p)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,a){const n=this.chart,i=this._cachedMeta,o=r[t.axis],d={keys:x4(n,!0),values:r._stacks[t.axis]._visualValues};return xj(d,o,i.index,{mode:a})}updateRangeFromParsed(t,r,a,n){const i=a[r.axis];let o=i===null?NaN:i;const d=n&&a._stacks[r.axis];n&&d&&(n.values=d,o=xj(n,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,r){const a=this._cachedMeta,n=a._parsed,i=a._sorted&&t===a.iScale,o=n.length,d=this._getOtherScale(t),c=zO(r,a,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:m,max:g}=DO(d);let p,k;function x(){k=n[p];const j=k[d.axis];return!Ds(k[t.axis])||m>j||g<j}for(p=0;p<o&&!(!x()&&(this.updateRangeFromParsed(h,t,k,c),i));++p);if(i){for(p=o-1;p>=0;--p)if(!x()){this.updateRangeFromParsed(h,t,k,c);break}}return h}getAllParsedValues(t){const r=this._cachedMeta._parsed,a=[];let n,i,o;for(n=0,i=r.length;n<i;++n)o=r[n][t.axis],Ds(o)&&a.push(o);return a}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,a=r.iScale,n=r.vScale,i=this.getParsed(t);return{label:a?""+a.getLabelForValue(i[a.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=AO(Xe(this.options.clip,LO(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,a=this._cachedMeta,n=a.data||[],i=r.chartArea,o=[],d=this._drawStart||0,c=this._drawCount||n.length-d,h=this.options.drawActiveElementsOnTop;let m;for(a.dataset&&a.dataset.draw(t,i,d,c),m=d;m<d+c;++m){const g=n[m];g.hidden||(g.active&&h?o.push(g):g.draw(t,i))}for(m=0;m<o.length;++m)o[m].draw(t,i)}getStyle(t,r){const a=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(t||0,a)}getContext(t,r,a){const n=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=BO(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=n.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=FO(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=a,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",a){const n=r==="active",i=this._cachedDataOpts,o=t+"-"+r,d=i[o],c=this.enableOptionSharing&&mc(a);if(d)return vj(d,c);const h=this.chart.config,m=h.datasetElementScopeKeys(this._type,t),g=n?[`${t}Hover`,"hover",t,""]:[t,""],p=h.getOptionScopes(this.getDataset(),m),k=Object.keys(Ut.elements[t]),x=()=>this.getContext(a,n,r),j=h.resolveNamedOptions(p,k,x,g);return j.$shared&&(j.$shared=c,i[o]=Object.freeze(vj(j,c))),j}_resolveAnimations(t,r,a){const n=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,d=i[o];if(d)return d;let c;if(n.options.animation!==!1){const m=this.chart.config,g=m.datasetAnimationScopeKeys(this._type,r),p=m.getOptionScopes(this.getDataset(),g);c=m.createResolver(p,this.getContext(t,a,r))}const h=new p4(n,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||kf(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const a=this.resolveDataElementOptions(t,r),n=this._sharedOptions,i=this.getSharedOptions(a),o=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,a),{sharedOptions:i,includeOptions:o}}updateElement(t,r,a,n){kf(n)?Object.assign(t,a):this._resolveAnimations(r,n).update(t,a)}updateSharedOptions(t,r,a){t&&!kf(r)&&this._resolveAnimations(void 0,r).update(t,a)}_setStyle(t,r,a,n){t.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,a,n).update(t,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(t,r,a){this._setStyle(t,a,"active",!1)}setHoverStyle(t,r,a){this._setStyle(t,a,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,a=this._cachedMeta.data;for(const[d,c,h]of this._syncList)this[d](c,h);this._syncList=[];const n=a.length,i=r.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,t):i<n&&this._removeElements(i,n-i)}_insertElements(t,r,a=!0){const n=this._cachedMeta,i=n.data,o=t+r;let d;const c=h=>{for(h.length+=r,d=h.length-1;d>=o;d--)h[d]=h[d-r]};for(c(i),d=t;d<o;++d)i[d]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(t,r),a&&this.updateElements(i,t,r,"reset")}updateElements(t,r,a,n){}_removeElements(t,r){const a=this._cachedMeta;if(this._parsing){const n=a._parsed.splice(t,r);a._stacked&&Bl(a,n)}a.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,a,n]=t;this[r](a,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const a=arguments.length-2;a&&this._sync(["_insertElements",t,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Be(Ho,"defaults",{}),Be(Ho,"datasetElementType",null),Be(Ho,"dataElementType",null);function $O(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let a=[];for(let n=0,i=r.length;n<i;n++)a=a.concat(r[n].controller.getAllParsedValues(e));e._cache.$bar=t4(a.sort((n,i)=>n-i))}return e._cache.$bar}function UO(e){const t=e.iScale,r=$O(t,e.type);let a=t._length,n,i,o,d;const c=()=>{o===32767||o===-32768||(mc(d)&&(a=Math.min(a,Math.abs(o-d)||a)),d=o)};for(n=0,i=r.length;n<i;++n)o=t.getPixelForValue(r[n]),c();for(d=void 0,n=0,i=t.ticks.length;n<i;++n)o=t.getPixelForTick(n),c();return a}function VO(e,t,r,a){const n=r.barThickness;let i,o;return ct(n)?(i=t.min*r.categoryPercentage,o=r.barPercentage):(i=n*a,o=1),{chunk:i/a,ratio:o,start:t.pixels[e]-i/2}}function HO(e,t,r,a){const n=t.pixels,i=n[e];let o=e>0?n[e-1]:null,d=e<n.length-1?n[e+1]:null;const c=r.categoryPercentage;o===null&&(o=i-(d===null?t.end-t.start:d-i)),d===null&&(d=i+i-o);const h=i-(i-Math.min(o,d))/2*c;return{chunk:Math.abs(d-o)/2*c/a,ratio:r.barPercentage,start:h}}function WO(e,t,r,a){const n=r.parse(e[0],a),i=r.parse(e[1],a),o=Math.min(n,i),d=Math.max(n,i);let c=o,h=d;Math.abs(o)>Math.abs(d)&&(c=d,h=o),t[r.axis]=h,t._custom={barStart:c,barEnd:h,start:n,end:i,min:o,max:d}}function y4(e,t,r,a){return sr(e)?WO(e,t,r,a):t[r.axis]=r.parse(e,a),t}function kj(e,t,r,a){const n=e.iScale,i=e.vScale,o=n.getLabels(),d=n===i,c=[];let h,m,g,p;for(h=r,m=r+a;h<m;++h)p=t[h],g={},g[n.axis]=d||n.parse(o[h],h),c.push(y4(p,g,i,h));return c}function wf(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function qO(e,t,r){return e!==0?Ca(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function KO(e){let t,r,a,n,i;return e.horizontal?(t=e.base>e.x,r="left",a="right"):(t=e.base<e.y,r="bottom",a="top"),t?(n="end",i="start"):(n="start",i="end"),{start:r,end:a,reverse:t,top:n,bottom:i}}function GO(e,t,r,a){let n=t.borderSkipped;const i={};if(!n){e.borderSkipped=i;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:d,reverse:c,top:h,bottom:m}=KO(e);n==="middle"&&r&&(e.enableBorderRadius=!0,(r._top||0)===a?n=h:(r._bottom||0)===a?n=m:(i[wj(m,o,d,c)]=!0,n=h)),i[wj(n,o,d,c)]=!0,e.borderSkipped=i}function wj(e,t,r,a){return a?(e=ZO(e,t,r),e=jj(e,r,t)):e=jj(e,t,r),e}function ZO(e,t,r){return e===t?r:e===r?t:e}function jj(e,t,r){return e==="start"?t:e==="end"?r:e}function YO(e,{inflateAmount:t},r){e.inflateAmount=t==="auto"?r===1?.33:0:t}class Lh extends Ho{parsePrimitiveData(t,r,a,n){return kj(t,r,a,n)}parseArrayData(t,r,a,n){return kj(t,r,a,n)}parseObjectData(t,r,a,n){const{iScale:i,vScale:o}=t,{xAxisKey:d="x",yAxisKey:c="y"}=this._parsing,h=i.axis==="x"?d:c,m=o.axis==="x"?d:c,g=[];let p,k,x,j;for(p=a,k=a+n;p<k;++p)j=r[p],x={},x[i.axis]=i.parse(rl(j,h),p),g.push(y4(rl(j,m),x,o,p));return g}updateRangeFromParsed(t,r,a,n){super.updateRangeFromParsed(t,r,a,n);const i=a._custom;i&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:a,vScale:n}=r,i=this.getParsed(t),o=i._custom,d=wf(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+a.getLabelForValue(i[a.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,a,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:d}}=this,c=d.getBasePixel(),h=d.isHorizontal(),m=this._getRuler(),{sharedOptions:g,includeOptions:p}=this._getSharedOptions(r,n);for(let k=r;k<r+a;k++){const x=this.getParsed(k),j=i||ct(x[d.axis])?{base:c,head:c}:this._calculateBarValuePixels(k),y=this._calculateBarIndexPixels(k,m),b=(x._stacks||{})[d.axis],w={horizontal:h,base:j.base,enableBorderRadius:!b||wf(x._custom)||o===b._top||o===b._bottom,x:h?j.head:y.center,y:h?y.center:j.head,height:h?y.size:Math.abs(j.size),width:h?Math.abs(j.size):y.size};p&&(w.options=g||this.resolveDataElementOptions(k,t[k].active?"active":n));const N=w.options||t[k].options;GO(w,N,b,o),YO(w,N,m.ratio),this.updateElement(t[k],k,w,n)}}_getStacks(t,r){const{iScale:a}=this._cachedMeta,n=a.getMatchingVisibleMetas(this._type).filter(m=>m.controller.options.grouped),i=a.options.stacked,o=[],d=this._cachedMeta.controller.getParsed(r),c=d&&d[a.axis],h=m=>{const g=m._parsed.find(k=>k[a.axis]===c),p=g&&g[m.vScale.axis];if(ct(p)||isNaN(p))return!0};for(const m of n)if(!(r!==void 0&&h(m))&&((i===!1||o.indexOf(m.stack)===-1||i===void 0&&m.stack===void 0)&&o.push(m.stack),m.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(a=>t[a].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const a of this.chart.data.datasets)t[Xe(this.chart.options.indexAxis==="x"?a.xAxisID:a.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,a){const n=this._getStacks(t,a),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const t=this.options,r=this._cachedMeta,a=r.iScale,n=[];let i,o;for(i=0,o=r.data.length;i<o;++i)n.push(a.getPixelForValue(this.getParsed(i)[a.axis],i));const d=t.barThickness;return{min:d||UO(r),pixels:n,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:t.grouped,ratio:d?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:a,index:n},options:{base:i,minBarLength:o}}=this,d=i||0,c=this.getParsed(t),h=c._custom,m=wf(h);let g=c[r.axis],p=0,k=a?this.applyStack(r,c,a):g,x,j;k!==g&&(p=k-g,k=g),m&&(g=h.barStart,k=h.barEnd-h.barStart,g!==0&&Ca(g)!==Ca(h.barEnd)&&(p=0),p+=g);const y=!ct(i)&&!m?i:p;let b=r.getPixelForValue(y);if(this.chart.getDataVisibility(t)?x=r.getPixelForValue(p+k):x=b,j=x-b,Math.abs(j)<o){j=qO(j,r,d)*o,g===d&&(b-=j/2);const w=r.getPixelForDecimal(0),N=r.getPixelForDecimal(1),P=Math.min(w,N),C=Math.max(w,N);b=Math.max(Math.min(b,C),P),x=b+j,a&&!m&&(c._stacks[r.axis]._visualValues[n]=r.getValueForPixel(x)-r.getValueForPixel(b))}if(b===r.getPixelForValue(d)){const w=Ca(j)*r.getLineWidthForValue(d)/2;b+=w,j-=w}return{size:j,base:b,head:x,center:x+j/2}}_calculateBarIndexPixels(t,r){const a=r.scale,n=this.options,i=n.skipNull,o=Xe(n.maxBarThickness,1/0);let d,c;const h=this._getAxisCount();if(r.grouped){const m=i?this._getStackCount(t):r.stackCount,g=n.barThickness==="flex"?HO(t,r,n,m*h):VO(t,r,n,m*h),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,k=this._getAxis().indexOf(Xe(p,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+k;d=g.start+g.chunk*x+g.chunk/2,c=Math.min(o,g.chunk*g.ratio)}else d=a.getPixelForValue(this.getParsed(t)[a.axis],t),c=Math.min(o,r.min*r.ratio);return{base:d-c/2,head:d+c/2,center:d,size:c}}draw(){const t=this._cachedMeta,r=t.vScale,a=t.data,n=a.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!a[i].hidden&&a[i].draw(this._ctx)}}Be(Lh,"id","bar"),Be(Lh,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Be(Lh,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ah extends Ho{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:a,data:n=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:d,count:c}=wD(r,n,o);this._drawStart=d,this._drawCount=c,jD(r)&&(d=0,c=n.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!i._decimated,a.points=n;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!o,options:h},t),this.updateElements(n,d,c,t)}updateElements(t,r,a,n){const i=n==="reset",{iScale:o,vScale:d,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:m,includeOptions:g}=this._getSharedOptions(r,n),p=o.axis,k=d.axis,{spanGaps:x,segment:j}=this.options,y=gc(x)?x:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||n==="none",w=r+a,N=t.length;let P=r>0&&this.getParsed(r-1);for(let C=0;C<N;++C){const A=t[C],E=b?A:{};if(C<r||C>=w){E.skip=!0;continue}const F=this.getParsed(C),I=ct(F[k]),D=E[p]=o.getPixelForValue(F[p],C),Y=E[k]=i||I?d.getBasePixel():d.getPixelForValue(c?this.applyStack(d,F,c):F[k],C);E.skip=isNaN(D)||isNaN(Y)||I,E.stop=C>0&&Math.abs(F[p]-P[p])>y,j&&(E.parsed=F,E.raw=h.data[C]),g&&(E.options=m||this.resolveDataElementOptions(C,A.active?"active":n)),b||this.updateElement(A,C,E,n),P=F}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,a=r.options&&r.options.borderWidth||0,n=t.data||[];if(!n.length)return a;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(a,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}Be(Ah,"id","line"),Be(Ah,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Be(Ah,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function fi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Sb{constructor(t){Be(this,"options");this.options=t||{}}static override(t){Object.assign(Sb.prototype,t)}init(){}formats(){return fi()}parse(){return fi()}format(){return fi()}add(){return fi()}diff(){return fi()}startOf(){return fi()}endOf(){return fi()}}var JO={_date:Sb};function XO(e,t,r,a){const{controller:n,data:i,_sorted:o}=e,d=n._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(d&&t===d.axis&&t!=="r"&&o&&i.length){const h=d._reversePixels?xD:Ei;if(a){if(n._sharedOptions){const m=i[0],g=typeof m.getRange=="function"&&m.getRange(t);if(g){const p=h(i,t,r-g),k=h(i,t,r+g);return{lo:p.lo,hi:k.hi}}}}else{const m=h(i,t,r);if(c){const{vScale:g}=n._cachedMeta,{_parsed:p}=e,k=p.slice(0,m.lo+1).reverse().findIndex(j=>!ct(j[g.axis]));m.lo-=Math.max(0,k);const x=p.slice(m.hi).findIndex(j=>!ct(j[g.axis]));m.hi+=Math.max(0,x)}return m}}return{lo:0,hi:i.length-1}}function $g(e,t,r,a,n){const i=e.getSortedVisibleDatasetMetas(),o=r[t];for(let d=0,c=i.length;d<c;++d){const{index:h,data:m}=i[d],{lo:g,hi:p}=XO(i[d],t,o,n);for(let k=g;k<=p;++k){const x=m[k];x.skip||a(x,h,k)}}}function QO(e){const t=e.indexOf("x")!==-1,r=e.indexOf("y")!==-1;return function(a,n){const i=t?Math.abs(a.x-n.x):0,o=r?Math.abs(a.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function jf(e,t,r,a,n){const i=[];return!n&&!e.isPointInArea(t)||$g(e,r,t,function(d,c,h){!n&&!fc(d,e.chartArea,0)||d.inRange(t.x,t.y,a)&&i.push({element:d,datasetIndex:c,index:h})},!0),i}function e8(e,t,r,a){let n=[];function i(o,d,c){const{startAngle:h,endAngle:m}=o.getProps(["startAngle","endAngle"],a),{angle:g}=QS(o,{x:t.x,y:t.y});gb(g,h,m)&&n.push({element:o,datasetIndex:d,index:c})}return $g(e,r,t,i),n}function t8(e,t,r,a,n,i){let o=[];const d=QO(r);let c=Number.POSITIVE_INFINITY;function h(m,g,p){const k=m.inRange(t.x,t.y,n);if(a&&!k)return;const x=m.getCenterPoint(n);if(!(!!i||e.isPointInArea(x))&&!k)return;const y=d(t,x);y<c?(o=[{element:m,datasetIndex:g,index:p}],c=y):y===c&&o.push({element:m,datasetIndex:g,index:p})}return $g(e,r,t,h),o}function Nf(e,t,r,a,n,i){return!i&&!e.isPointInArea(t)?[]:r==="r"&&!a?e8(e,t,r,n):t8(e,t,r,a,n,i)}function Nj(e,t,r,a,n){const i=[],o=r==="x"?"inXRange":"inYRange";let d=!1;return $g(e,r,t,(c,h,m)=>{c[o]&&c[o](t[r],n)&&(i.push({element:c,datasetIndex:h,index:m}),d=d||c.inRange(t.x,t.y,n))}),a&&!d?[]:i}var r8={modes:{index(e,t,r,a){const n=vi(t,e),i=r.axis||"x",o=r.includeInvisible||!1,d=r.intersect?jf(e,n,i,a,o):Nf(e,n,i,!1,a,o),c=[];return d.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const m=d[0].index,g=h.data[m];g&&!g.skip&&c.push({element:g,datasetIndex:h.index,index:m})}),c):[]},dataset(e,t,r,a){const n=vi(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;let d=r.intersect?jf(e,n,i,a,o):Nf(e,n,i,!1,a,o);if(d.length>0){const c=d[0].datasetIndex,h=e.getDatasetMeta(c).data;d=[];for(let m=0;m<h.length;++m)d.push({element:h[m],datasetIndex:c,index:m})}return d},point(e,t,r,a){const n=vi(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return jf(e,n,i,a,o)},nearest(e,t,r,a){const n=vi(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Nf(e,n,i,r.intersect,a,o)},x(e,t,r,a){const n=vi(t,e);return Nj(e,n,"x",r.intersect,a)},y(e,t,r,a){const n=vi(t,e);return Nj(e,n,"y",r.intersect,a)}}};const b4=["left","top","right","bottom"];function zl(e,t){return e.filter(r=>r.pos===t)}function _j(e,t){return e.filter(r=>b4.indexOf(r.pos)===-1&&r.box.axis===t)}function $l(e,t){return e.sort((r,a)=>{const n=t?a:r,i=t?r:a;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function s8(e){const t=[];let r,a,n,i,o,d;for(r=0,a=(e||[]).length;r<a;++r)n=e[r],{position:i,options:{stack:o,stackWeight:d=1}}=n,t.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:d});return t}function a8(e){const t={};for(const r of e){const{stack:a,pos:n,stackWeight:i}=r;if(!a||!b4.includes(n))continue;const o=t[a]||(t[a]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function n8(e,t){const r=a8(e),{vBoxMaxWidth:a,hBoxMaxHeight:n}=t;let i,o,d;for(i=0,o=e.length;i<o;++i){d=e[i];const{fullSize:c}=d.box,h=r[d.stack],m=h&&d.stackWeight/h.weight;d.horizontal?(d.width=m?m*a:c&&t.availableWidth,d.height=n):(d.width=a,d.height=m?m*n:c&&t.availableHeight)}return r}function i8(e){const t=s8(e),r=$l(t.filter(h=>h.box.fullSize),!0),a=$l(zl(t,"left"),!0),n=$l(zl(t,"right")),i=$l(zl(t,"top"),!0),o=$l(zl(t,"bottom")),d=_j(t,"x"),c=_j(t,"y");return{fullSize:r,leftAndTop:a.concat(i),rightAndBottom:n.concat(c).concat(o).concat(d),chartArea:zl(t,"chartArea"),vertical:a.concat(n).concat(c),horizontal:i.concat(o).concat(d)}}function Sj(e,t,r,a){return Math.max(e[r],t[r])+Math.max(e[a],t[a])}function v4(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function o8(e,t,r,a){const{pos:n,box:i}=r,o=e.maxPadding;if(!ot(n)){r.size&&(e[n]-=r.size);const g=a[r.stack]||{size:0,count:1};g.size=Math.max(g.size,r.horizontal?i.height:i.width),r.size=g.size/g.count,e[n]+=r.size}i.getPadding&&v4(o,i.getPadding());const d=Math.max(0,t.outerWidth-Sj(o,e,"left","right")),c=Math.max(0,t.outerHeight-Sj(o,e,"top","bottom")),h=d!==e.w,m=c!==e.h;return e.w=d,e.h=c,r.horizontal?{same:h,other:m}:{same:m,other:h}}function l8(e){const t=e.maxPadding;function r(a){const n=Math.max(t[a]-e[a],0);return e[a]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}function d8(e,t){const r=t.maxPadding;function a(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(t[o],r[o])}),i}return a(e?["left","right"]:["top","bottom"])}function Xl(e,t,r,a){const n=[];let i,o,d,c,h,m;for(i=0,o=e.length,h=0;i<o;++i){d=e[i],c=d.box,c.update(d.width||t.w,d.height||t.h,d8(d.horizontal,t));const{same:g,other:p}=o8(t,r,d,a);h|=g&&n.length,m=m||p,c.fullSize||n.push(d)}return h&&Xl(n,t,r,a)||m}function Lu(e,t,r,a,n){e.top=r,e.left=t,e.right=t+a,e.bottom=r+n,e.width=a,e.height=n}function Cj(e,t,r,a){const n=r.padding;let{x:i,y:o}=t;for(const d of e){const c=d.box,h=a[d.stack]||{placed:0,weight:1},m=d.stackWeight/h.weight||1;if(d.horizontal){const g=t.w*m,p=h.size||c.height;mc(h.start)&&(o=h.start),c.fullSize?Lu(c,n.left,o,r.outerWidth-n.right-n.left,p):Lu(c,t.left+h.placed,o,g,p),h.start=o,h.placed+=g,o=c.bottom}else{const g=t.h*m,p=h.size||c.width;mc(h.start)&&(i=h.start),c.fullSize?Lu(c,i,n.top,p,r.outerHeight-n.bottom-n.top):Lu(c,i,t.top+h.placed,p,g),h.start=i,h.placed+=g,i=c.right}}t.x=i,t.y=o}var Ls={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;r!==-1&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,a){if(!e)return;const n=Os(e.options.layout.padding),i=Math.max(t-n.width,0),o=Math.max(r-n.height,0),d=i8(e.boxes),c=d.vertical,h=d.horizontal;mt(e.boxes,j=>{typeof j.beforeLayout=="function"&&j.beforeLayout()});const m=c.reduce((j,y)=>y.box.options&&y.box.options.display===!1?j:j+1,0)||1,g=Object.freeze({outerWidth:t,outerHeight:r,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/m,hBoxMaxHeight:o/2}),p=Object.assign({},n);v4(p,Os(a));const k=Object.assign({maxPadding:p,w:i,h:o,x:n.left,y:n.top},n),x=n8(c.concat(h),g);Xl(d.fullSize,k,g,x),Xl(c,k,g,x),Xl(h,k,g,x)&&Xl(c,k,g,x),l8(k),Cj(d.leftAndTop,k,g,x),k.x+=k.w,k.y+=k.h,Cj(d.rightAndBottom,k,g,x),e.chartArea={left:k.left,top:k.top,right:k.left+k.w,bottom:k.top+k.h,height:k.h,width:k.w},mt(d.chartArea,j=>{const y=j.box;Object.assign(y,e.chartArea),y.update(k.w,k.h,{left:0,top:0,right:0,bottom:0})})}};class k4{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,a){}removeEventListener(t,r,a){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,a,n){return r=Math.max(0,r||t.width),a=a||t.height,{width:r,height:Math.max(0,n?Math.floor(r/n):a)}}isAttached(t){return!0}updateConfig(t){}}class c8 extends k4{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Mh="$chartjs",u8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Pj=e=>e===null||e==="";function h8(e,t){const r=e.style,a=e.getAttribute("height"),n=e.getAttribute("width");if(e[Mh]={initial:{height:a,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Pj(n)){const i=uj(e,"width");i!==void 0&&(e.width=i)}if(Pj(a))if(e.style.height==="")e.height=e.width/(t||2);else{const i=uj(e,"height");i!==void 0&&(e.height=i)}return e}const w4=hO?{passive:!0}:!1;function m8(e,t,r){e&&e.addEventListener(t,r,w4)}function g8(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,w4)}function f8(e,t){const r=u8[e.type]||e.type,{x:a,y:n}=vi(e,t);return{type:r,chart:t,native:e,x:a!==void 0?a:null,y:n!==void 0?n:null}}function Rm(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function p8(e,t,r){const a=e.canvas,n=new MutationObserver(i=>{let o=!1;for(const d of i)o=o||Rm(d.addedNodes,a),o=o&&!Rm(d.removedNodes,a);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function x8(e,t,r){const a=e.canvas,n=new MutationObserver(i=>{let o=!1;for(const d of i)o=o||Rm(d.removedNodes,a),o=o&&!Rm(d.addedNodes,a);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const xc=new Map;let Ej=0;function j4(){const e=window.devicePixelRatio;e!==Ej&&(Ej=e,xc.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function y8(e,t){xc.size||window.addEventListener("resize",j4),xc.set(e,t)}function b8(e){xc.delete(e),xc.size||window.removeEventListener("resize",j4)}function v8(e,t,r){const a=e.canvas,n=a&&_b(a);if(!n)return;const i=s4((d,c)=>{const h=n.clientWidth;r(d,c),h<n.clientWidth&&r()},window),o=new ResizeObserver(d=>{const c=d[0],h=c.contentRect.width,m=c.contentRect.height;h===0&&m===0||i(h,m)});return o.observe(n),y8(e,i),o}function _f(e,t,r){r&&r.disconnect(),t==="resize"&&b8(e)}function k8(e,t,r){const a=e.canvas,n=s4(i=>{e.ctx!==null&&r(f8(i,e))},e);return m8(a,t,n),n}class w8 extends k4{acquireContext(t,r){const a=t&&t.getContext&&t.getContext("2d");return a&&a.canvas===t?(h8(t,r),a):null}releaseContext(t){const r=t.canvas;if(!r[Mh])return!1;const a=r[Mh].initial;["height","width"].forEach(i=>{const o=a[i];ct(o)?r.removeAttribute(i):r.setAttribute(i,o)});const n=a.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[Mh],!0}addEventListener(t,r,a){this.removeEventListener(t,r);const n=t.$proxies||(t.$proxies={}),o={attach:p8,detach:x8,resize:v8}[r]||k8;n[r]=o(t,r,a)}removeEventListener(t,r){const a=t.$proxies||(t.$proxies={}),n=a[r];if(!n)return;({attach:_f,detach:_f,resize:_f}[r]||g8)(t,r,n),a[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,a,n){return uO(t,r,a,n)}isAttached(t){const r=t&&_b(t);return!!(r&&r.isConnected)}}function j8(e){return!Nb()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?c8:w8}var Fu;let dn=(Fu=class{constructor(){Be(this,"x");Be(this,"y");Be(this,"active",!1);Be(this,"options");Be(this,"$animations")}tooltipPosition(t){const{x:r,y:a}=this.getProps(["x","y"],t);return{x:r,y:a}}hasValue(){return gc(this.x)&&gc(this.y)}getProps(t,r){const a=this.$animations;if(!r||!a)return this;const n={};return t.forEach(i=>{n[i]=a[i]&&a[i].active()?a[i]._to:this[i]}),n}},Be(Fu,"defaults",{}),Be(Fu,"defaultRoutes"),Fu);function N8(e,t){const r=e.options.ticks,a=_8(e),n=Math.min(r.maxTicksLimit||a,a),i=r.major.enabled?C8(t):[],o=i.length,d=i[0],c=i[o-1],h=[];if(o>n)return P8(t,h,i,o/n),h;const m=S8(i,t,n);if(o>0){let g,p;const k=o>1?Math.round((c-d)/(o-1)):null;for(Au(t,h,m,ct(k)?0:d-k,d),g=0,p=o-1;g<p;g++)Au(t,h,m,i[g],i[g+1]);return Au(t,h,m,c,ct(k)?t.length:c+k),h}return Au(t,h,m),h}function _8(e){const t=e.options.offset,r=e._tickSize(),a=e._length/r+(t?0:1),n=e._maxLength/r;return Math.floor(Math.min(a,n))}function S8(e,t,r){const a=E8(e),n=t.length/r;if(!a)return Math.max(n,1);const i=cD(a);for(let o=0,d=i.length-1;o<d;o++){const c=i[o];if(c>n)return c}return Math.max(n,1)}function C8(e){const t=[];let r,a;for(r=0,a=e.length;r<a;r++)e[r].major&&t.push(r);return t}function P8(e,t,r,a){let n=0,i=r[0],o;for(a=Math.ceil(a),o=0;o<e.length;o++)o===i&&(t.push(e[o]),n++,i=r[n*a])}function Au(e,t,r,a,n){const i=Xe(a,0),o=Math.min(Xe(n,e.length),e.length);let d=0,c,h,m;for(r=Math.ceil(r),n&&(c=n-a,r=c/Math.floor(c/r)),m=i;m<0;)d++,m=Math.round(i+d*r);for(h=Math.max(i,0);h<o;h++)h===m&&(t.push(e[h]),d++,m=Math.round(i+d*r))}function E8(e){const t=e.length;let r,a;if(t<2)return!1;for(a=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==a)return!1;return a}const I8=e=>e==="left"?"right":e==="right"?"left":e,Ij=(e,t,r)=>t==="top"||t==="left"?e[t]+r:e[t]-r,Tj=(e,t)=>Math.min(t||e,e);function Lj(e,t){const r=[],a=e.length/t,n=e.length;let i=0;for(;i<n;i+=a)r.push(e[Math.floor(i)]);return r}function T8(e,t,r){const a=e.ticks.length,n=Math.min(t,a-1),i=e._startPixel,o=e._endPixel,d=1e-6;let c=e.getPixelForTick(n),h;if(!(r&&(a===1?h=Math.max(c-i,o-c):t===0?h=(e.getPixelForTick(1)-c)/2:h=(c-e.getPixelForTick(n-1))/2,c+=n<t?h:-h,c<i-d||c>o+d)))return c}function L8(e,t){mt(e,r=>{const a=r.gc,n=a.length/2;let i;if(n>t){for(i=0;i<n;++i)delete r.data[a[i]];a.splice(0,n)}})}function Ul(e){return e.drawTicks?e.tickLength:0}function Aj(e,t){if(!e.display)return 0;const r=Ar(e.font,t),a=Os(e.padding);return(sr(e.text)?e.text.length:1)*r.lineHeight+a.height}function A8(e,t){return Ji(e,{scale:t,type:"scale"})}function M8(e,t,r){return Ji(e,{tick:r,index:t,type:"tick"})}function R8(e,t,r){let a=pb(e);return(r&&t!=="right"||!r&&t==="right")&&(a=I8(a)),a}function D8(e,t,r,a){const{top:n,left:i,bottom:o,right:d,chart:c}=e,{chartArea:h,scales:m}=c;let g=0,p,k,x;const j=o-n,y=d-i;if(e.isHorizontal()){if(k=Cr(a,i,d),ot(r)){const b=Object.keys(r)[0],w=r[b];x=m[b].getPixelForValue(w)+j-t}else r==="center"?x=(h.bottom+h.top)/2+j-t:x=Ij(e,r,t);p=d-i}else{if(ot(r)){const b=Object.keys(r)[0],w=r[b];k=m[b].getPixelForValue(w)-y+t}else r==="center"?k=(h.left+h.right)/2-y+t:k=Ij(e,r,t);x=Cr(a,o,n),g=r==="left"?-br:br}return{titleX:k,titleY:x,maxWidth:p,rotation:g}}class gl extends dn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:a,_suggestedMax:n}=this;return t=ca(t,Number.POSITIVE_INFINITY),r=ca(r,Number.NEGATIVE_INFINITY),a=ca(a,Number.POSITIVE_INFINITY),n=ca(n,Number.NEGATIVE_INFINITY),{min:ca(t,a),max:ca(r,n),minDefined:Ds(t),maxDefined:Ds(r)}}getMinMax(t){let{min:r,max:a,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:r,max:a};const d=this.getMatchingVisibleMetas();for(let c=0,h=d.length;c<h;++c)o=d[c].controller.getMinMax(this,t),n||(r=Math.min(r,o.min)),i||(a=Math.max(a,o.max));return r=i&&r>a?a:r,a=n&&r>a?r:a,{min:ca(r,ca(a,r)),max:ca(a,ca(r,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_t(this.options.beforeUpdate,[this])}update(t,r,a){const{beginAtZero:n,grace:i,ticks:o}=this.options,d=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=VD(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=d<this.ticks.length;this._convertTicksToLabels(c?Lj(this.ticks,d):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=N8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,a;this.isHorizontal()?(r=this.left,a=this.right):(r=this.top,a=this.bottom,t=!t),this._startPixel=r,this._endPixel=a,this._reversePixels=t,this._length=a-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_t(this.options.afterUpdate,[this])}beforeSetDimensions(){_t(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_t(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),_t(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_t(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let a,n,i;for(a=0,n=t.length;a<n;a++)i=t[a],i.label=_t(r.callback,[i.value,a,t],this)}afterTickToLabelConversion(){_t(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_t(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,a=Tj(this.ticks.length,t.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let o=n,d,c,h;if(!this._isVisible()||!r.display||n>=i||a<=1||!this.isHorizontal()){this.labelRotation=n;return}const m=this._getLabelSizes(),g=m.widest.width,p=m.highest.height,k=Lr(this.chart.width-g,0,this.maxWidth);d=t.offset?this.maxWidth/a:k/(a-1),g+6>d&&(d=k/(a-(t.offset?.5:1)),c=this.maxHeight-Ul(t.grid)-r.padding-Aj(t.title,this.chart.options.font),h=Math.sqrt(g*g+p*p),o=gD(Math.min(Math.asin(Lr((m.highest.height+6)/d,-1,1)),Math.asin(Lr(c/h,-1,1))-Math.asin(Lr(p/h,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){_t(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_t(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:a,title:n,grid:i}}=this,o=this._isVisible(),d=this.isHorizontal();if(o){const c=Aj(n,r.options.font);if(d?(t.width=this.maxWidth,t.height=Ul(i)+c):(t.height=this.maxHeight,t.width=Ul(i)+c),a.display&&this.ticks.length){const{first:h,last:m,widest:g,highest:p}=this._getLabelSizes(),k=a.padding*2,x=Pi(this.labelRotation),j=Math.cos(x),y=Math.sin(x);if(d){const b=a.mirror?0:y*g.width+j*p.height;t.height=Math.min(this.maxHeight,t.height+b+k)}else{const b=a.mirror?0:j*g.width+y*p.height;t.width=Math.min(this.maxWidth,t.width+b+k)}this._calculatePadding(h,m,y,j)}}this._handleMargins(),d?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,a,n){const{ticks:{align:i,padding:o},position:d}=this.options,c=this.labelRotation!==0,h=d!=="top"&&this.axis==="x";if(this.isHorizontal()){const m=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,k=0;c?h?(p=n*t.width,k=a*r.height):(p=a*t.height,k=n*r.width):i==="start"?k=r.width:i==="end"?p=t.width:i!=="inner"&&(p=t.width/2,k=r.width/2),this.paddingLeft=Math.max((p-m+o)*this.width/(this.width-m),0),this.paddingRight=Math.max((k-g+o)*this.width/(this.width-g),0)}else{let m=r.height/2,g=t.height/2;i==="start"?(m=0,g=t.height):i==="end"&&(m=r.height,g=0),this.paddingTop=m+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_t(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,a;for(r=0,a=t.length;r<a;r++)ct(t[r].label)&&(t.splice(r,1),a--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let a=this.ticks;r<a.length&&(a=Lj(a,r)),this._labelSizes=t=this._computeLabelSizes(a,a.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,a){const{ctx:n,_longestTextCache:i}=this,o=[],d=[],c=Math.floor(r/Tj(r,a));let h=0,m=0,g,p,k,x,j,y,b,w,N,P,C;for(g=0;g<r;g+=c){if(x=t[g].label,j=this._resolveTickFontOptions(g),n.font=y=j.string,b=i[y]=i[y]||{data:{},gc:[]},w=j.lineHeight,N=P=0,!ct(x)&&!sr(x))N=ij(n,b.data,b.gc,N,x),P=w;else if(sr(x))for(p=0,k=x.length;p<k;++p)C=x[p],!ct(C)&&!sr(C)&&(N=ij(n,b.data,b.gc,N,C),P+=w);o.push(N),d.push(P),h=Math.max(N,h),m=Math.max(P,m)}L8(i,r);const A=o.indexOf(h),E=d.indexOf(m),F=I=>({width:o[I]||0,height:d[I]||0});return{first:F(0),last:F(r-1),widest:F(A),highest:F(E),widths:o,heights:d}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return pD(this._alignToPixels?gi(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const a=r[t];return a.$context||(a.$context=M8(this.getContext(),t,a))}return this.$context||(this.$context=A8(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=Pi(this.labelRotation),a=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,d=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*a>d*n?d/a:c/n:c*n<d*a?c/a:d/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,a=this.chart,n=this.options,{grid:i,position:o,border:d}=n,c=i.offset,h=this.isHorizontal(),g=this.ticks.length+(c?1:0),p=Ul(i),k=[],x=d.setContext(this.getContext()),j=x.display?x.width:0,y=j/2,b=function(W){return gi(a,W,j)};let w,N,P,C,A,E,F,I,D,Y,R,Z;if(o==="top")w=b(this.bottom),E=this.bottom-p,I=w-y,Y=b(t.top)+y,Z=t.bottom;else if(o==="bottom")w=b(this.top),Y=t.top,Z=b(t.bottom)-y,E=w+y,I=this.top+p;else if(o==="left")w=b(this.right),A=this.right-p,F=w-y,D=b(t.left)+y,R=t.right;else if(o==="right")w=b(this.left),D=t.left,R=b(t.right)-y,A=w+y,F=this.left+p;else if(r==="x"){if(o==="center")w=b((t.top+t.bottom)/2+.5);else if(ot(o)){const W=Object.keys(o)[0],Q=o[W];w=b(this.chart.scales[W].getPixelForValue(Q))}Y=t.top,Z=t.bottom,E=w+y,I=E+p}else if(r==="y"){if(o==="center")w=b((t.left+t.right)/2);else if(ot(o)){const W=Object.keys(o)[0],Q=o[W];w=b(this.chart.scales[W].getPixelForValue(Q))}A=w-y,F=A-p,D=t.left,R=t.right}const T=Xe(n.ticks.maxTicksLimit,g),B=Math.max(1,Math.ceil(g/T));for(N=0;N<g;N+=B){const W=this.getContext(N),Q=i.setContext(W),$=d.setContext(W),O=Q.lineWidth,K=Q.color,V=$.dash||[],X=$.dashOffset,le=Q.tickWidth,ge=Q.tickColor,ne=Q.tickBorderDash||[],pe=Q.tickBorderDashOffset;P=T8(this,N,c),P!==void 0&&(C=gi(a,P,O),h?A=F=D=R=C:E=I=Y=Z=C,k.push({tx1:A,ty1:E,tx2:F,ty2:I,x1:D,y1:Y,x2:R,y2:Z,width:O,color:K,borderDash:V,borderDashOffset:X,tickWidth:le,tickColor:ge,tickBorderDash:ne,tickBorderDashOffset:pe}))}return this._ticksLength=g,this._borderValue=w,k}_computeLabelItems(t){const r=this.axis,a=this.options,{position:n,ticks:i}=a,o=this.isHorizontal(),d=this.ticks,{align:c,crossAlign:h,padding:m,mirror:g}=i,p=Ul(a.grid),k=p+m,x=g?-m:k,j=-Pi(this.labelRotation),y=[];let b,w,N,P,C,A,E,F,I,D,Y,R,Z="middle";if(n==="top")A=this.bottom-x,E=this._getXAxisLabelAlignment();else if(n==="bottom")A=this.top+x,E=this._getXAxisLabelAlignment();else if(n==="left"){const B=this._getYAxisLabelAlignment(p);E=B.textAlign,C=B.x}else if(n==="right"){const B=this._getYAxisLabelAlignment(p);E=B.textAlign,C=B.x}else if(r==="x"){if(n==="center")A=(t.top+t.bottom)/2+k;else if(ot(n)){const B=Object.keys(n)[0],W=n[B];A=this.chart.scales[B].getPixelForValue(W)+k}E=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")C=(t.left+t.right)/2-k;else if(ot(n)){const B=Object.keys(n)[0],W=n[B];C=this.chart.scales[B].getPixelForValue(W)}E=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(c==="start"?Z="top":c==="end"&&(Z="bottom"));const T=this._getLabelSizes();for(b=0,w=d.length;b<w;++b){N=d[b],P=N.label;const B=i.setContext(this.getContext(b));F=this.getPixelForTick(b)+i.labelOffset,I=this._resolveTickFontOptions(b),D=I.lineHeight,Y=sr(P)?P.length:1;const W=Y/2,Q=B.color,$=B.textStrokeColor,O=B.textStrokeWidth;let K=E;o?(C=F,E==="inner"&&(b===w-1?K=this.options.reverse?"left":"right":b===0?K=this.options.reverse?"right":"left":K="center"),n==="top"?h==="near"||j!==0?R=-Y*D+D/2:h==="center"?R=-T.highest.height/2-W*D+D:R=-T.highest.height+D/2:h==="near"||j!==0?R=D/2:h==="center"?R=T.highest.height/2-W*D:R=T.highest.height-Y*D,g&&(R*=-1),j!==0&&!B.showLabelBackdrop&&(C+=D/2*Math.sin(j))):(A=F,R=(1-Y)*D/2);let V;if(B.showLabelBackdrop){const X=Os(B.backdropPadding),le=T.heights[b],ge=T.widths[b];let ne=R-X.top,pe=0-X.left;switch(Z){case"middle":ne-=le/2;break;case"bottom":ne-=le;break}switch(E){case"center":pe-=ge/2;break;case"right":pe-=ge;break;case"inner":b===w-1?pe-=ge:b>0&&(pe-=ge/2);break}V={left:pe,top:ne,width:ge+X.width,height:le+X.height,color:B.backdropColor}}y.push({label:P,font:I,textOffset:R,options:{rotation:j,color:Q,strokeColor:$,strokeWidth:O,textAlign:K,textBaseline:Z,translation:[C,A],backdrop:V}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-Pi(this.labelRotation))return t==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:a,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),d=t+i,c=o.widest.width;let h,m;return r==="left"?n?(m=this.right+i,a==="near"?h="left":a==="center"?(h="center",m+=c/2):(h="right",m+=c)):(m=this.right-d,a==="near"?h="right":a==="center"?(h="center",m-=c/2):(h="left",m=this.left)):r==="right"?n?(m=this.left+i,a==="near"?h="right":a==="center"?(h="center",m-=c/2):(h="left",m-=c)):(m=this.left+d,a==="near"?h="left":a==="center"?(h="center",m+=c/2):(h="right",m=this.right)):h="right",{textAlign:h,x:m}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:a,top:n,width:i,height:o}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(a,n,i,o),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===t);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const r=this.options.grid,a=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const d=(c,h,m)=>{!m.width||!m.color||(a.save(),a.lineWidth=m.width,a.strokeStyle=m.color,a.setLineDash(m.borderDash||[]),a.lineDashOffset=m.borderDashOffset,a.beginPath(),a.moveTo(c.x,c.y),a.lineTo(h.x,h.y),a.stroke(),a.restore())};if(r.display)for(i=0,o=n.length;i<o;++i){const c=n[i];r.drawOnChartArea&&d({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&d({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:a,grid:n}}=this,i=a.setContext(this.getContext()),o=a.display?i.width:0;if(!o)return;const d=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,m,g,p;this.isHorizontal()?(h=gi(t,this.left,o)-o/2,m=gi(t,this.right,d)+d/2,g=p=c):(g=gi(t,this.top,o)-o/2,p=gi(t,this.bottom,d)+d/2,h=m=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(h,g),r.lineTo(m,p),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const a=this.ctx,n=this._computeLabelArea();n&&yb(a,n);const i=this.getLabelItems(t);for(const o of i){const d=o.options,c=o.font,h=o.label,m=o.textOffset;pc(a,h,0,m,c,d)}n&&bb(a)}drawTitle(){const{ctx:t,options:{position:r,title:a,reverse:n}}=this;if(!a.display)return;const i=Ar(a.font),o=Os(a.padding),d=a.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||ot(r)?(c+=o.bottom,sr(a.text)&&(c+=i.lineHeight*(a.text.length-1))):c+=o.top;const{titleX:h,titleY:m,maxWidth:g,rotation:p}=D8(this,c,r,d);pc(t,a.text,0,0,i,{color:a.color,maxWidth:g,rotation:p,textAlign:R8(d,r,n),textBaseline:"middle",translation:[h,m]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,a=Xe(t.grid&&t.grid.z,-1),n=Xe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==gl.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:a,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",n=[];let i,o;for(i=0,o=r.length;i<o;++i){const d=r[i];d[a]===this.id&&(!t||d.type===t)&&n.push(d)}return n}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return Ar(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Mu{constructor(t,r,a){this.type=t,this.scope=r,this.override=a,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let a;B8(r)&&(a=this.register(r));const n=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in n||(n[i]=t,O8(t,o,a),this.override&&Ut.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const r=this.items,a=t.id,n=this.scope;a in r&&delete r[a],n&&a in Ut[n]&&(delete Ut[n][a],this.override&&delete Gi[a])}}function O8(e,t,r){const a=hc(Object.create(null),[r?Ut.get(r):{},Ut.get(t),e.defaults]);Ut.set(t,a),e.defaultRoutes&&F8(t,e.defaultRoutes),e.descriptors&&Ut.describe(t,e.descriptors)}function F8(e,t){Object.keys(t).forEach(r=>{const a=r.split("."),n=a.pop(),i=[e].concat(a).join("."),o=t[r].split("."),d=o.pop(),c=o.join(".");Ut.route(i,n,c,d)})}function B8(e){return"id"in e&&"defaults"in e}class z8{constructor(){this.controllers=new Mu(Ho,"datasets",!0),this.elements=new Mu(dn,"elements"),this.plugins=new Mu(Object,"plugins"),this.scales=new Mu(gl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,a){[...r].forEach(n=>{const i=a||this._getRegistryForType(n);a||i.isForType(n)||i===this.plugins&&n.id?this._exec(t,i,n):mt(n,o=>{const d=a||this._getRegistryForType(o);this._exec(t,d,o)})})}_exec(t,r,a){const n=mb(t);_t(a["before"+n],[],a),r[t](a),_t(a["after"+n],[],a)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const a=this._typedRegistries[r];if(a.isForType(t))return a}return this.plugins}_get(t,r,a){const n=r.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+a+".");return n}}var ma=new z8;class $8{constructor(){this._init=void 0}notify(t,r,a,n){if(r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(i,t,r,a);return r==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,r,a,n){n=n||{};for(const i of t){const o=i.plugin,d=o[a],c=[r,n,i.options];if(_t(d,c,o)===!1&&n.cancelable)return!1}return!0}invalidate(){ct(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const a=t&&t.config,n=Xe(a.options&&a.options.plugins,{}),i=U8(a);return n===!1&&!r?[]:H8(t,i,n,r)}_notifyStateChanges(t){const r=this._oldCache||[],a=this._cache,n=(i,o)=>i.filter(d=>!o.some(c=>d.plugin.id===c.plugin.id));this._notify(n(r,a),t,"stop"),this._notify(n(a,r),t,"start")}}function U8(e){const t={},r=[],a=Object.keys(ma.plugins.items);for(let i=0;i<a.length;i++)r.push(ma.getPlugin(a[i]));const n=e.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];r.indexOf(o)===-1&&(r.push(o),t[o.id]=!0)}return{plugins:r,localIds:t}}function V8(e,t){return!t&&e===!1?null:e===!0?{}:e}function H8(e,{plugins:t,localIds:r},a,n){const i=[],o=e.getContext();for(const d of t){const c=d.id,h=V8(a[c],n);h!==null&&i.push({plugin:d,options:W8(e.config,{plugin:d,local:r[c]},h,o)})}return i}function W8(e,{plugin:t,local:r},a,n){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(a,i);return r&&t.defaults&&o.push(t.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fx(e,t){const r=Ut.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function q8(e,t){let r=e;return e==="_index_"?r=t:e==="_value_"&&(r=t==="x"?"y":"x"),r}function K8(e,t){return e===t?"_index_":"_value_"}function Mj(e){if(e==="x"||e==="y"||e==="r")return e}function G8(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function px(e,...t){if(Mj(e))return e;for(const r of t){const a=r.axis||G8(r.position)||e.length>1&&Mj(e[0].toLowerCase());if(a)return a}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function Rj(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function Z8(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(a=>a.xAxisID===e||a.yAxisID===e);if(r.length)return Rj(e,"x",r[0])||Rj(e,"y",r[0])}return{}}function Y8(e,t){const r=Gi[e.type]||{scales:{}},a=t.scales||{},n=fx(e.type,t),i=Object.create(null);return Object.keys(a).forEach(o=>{const d=a[o];if(!ot(d))return console.error(`Invalid scale configuration for scale: ${o}`);if(d._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=px(o,d,Z8(o,e),Ut.scales[d.type]),h=K8(c,n),m=r.scales||{};i[o]=Sd(Object.create(null),[{axis:c},d,m[c],m[h]])}),e.data.datasets.forEach(o=>{const d=o.type||e.type,c=o.indexAxis||fx(d,t),m=(Gi[d]||{}).scales||{};Object.keys(m).forEach(g=>{const p=q8(g,c),k=o[p+"AxisID"]||p;i[k]=i[k]||Object.create(null),Sd(i[k],[{axis:p},a[k],m[g]])})}),Object.keys(i).forEach(o=>{const d=i[o];Sd(d,[Ut.scales[d.type],Ut.scale])}),i}function N4(e){const t=e.options||(e.options={});t.plugins=Xe(t.plugins,{}),t.scales=Y8(e,t)}function _4(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function J8(e){return e=e||{},e.data=_4(e.data),N4(e),e}const Dj=new Map,S4=new Set;function Ru(e,t){let r=Dj.get(e);return r||(r=t(),Dj.set(e,r),S4.add(r)),r}const Vl=(e,t,r)=>{const a=rl(t,r);a!==void 0&&e.add(a)};class X8{constructor(t){this._config=J8(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=_4(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),N4(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ru(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return Ru(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return Ru(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,a=this.type;return Ru(`${a}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const a=this._scopeCache;let n=a.get(t);return(!n||r)&&(n=new Map,a.set(t,n)),n}getOptionScopes(t,r,a){const{options:n,type:i}=this,o=this._cachedScopes(t,a),d=o.get(r);if(d)return d;const c=new Set;r.forEach(m=>{t&&(c.add(t),m.forEach(g=>Vl(c,t,g))),m.forEach(g=>Vl(c,n,g)),m.forEach(g=>Vl(c,Gi[i]||{},g)),m.forEach(g=>Vl(c,Ut,g)),m.forEach(g=>Vl(c,mx,g))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),S4.has(r)&&o.set(r,h),h}chartOptionScopes(){const{options:t,type:r}=this;return[t,Gi[r]||{},Ut.datasets[r]||{},{type:r},Ut,mx]}resolveNamedOptions(t,r,a,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:d}=Oj(this._resolverCache,t,n);let c=o;if(eF(o,r)){i.$shared=!1,a=Qn(a)?a():a;const h=this.createResolver(t,a,d);c=sl(o,a,h)}for(const h of r)i[h]=c[h];return i}createResolver(t,r,a=[""],n){const{resolver:i}=Oj(this._resolverCache,t,a);return ot(r)?sl(i,r,void 0,n):i}}function Oj(e,t,r){let a=e.get(t);a||(a=new Map,e.set(t,a));const n=r.join();let i=a.get(n);return i||(i={resolver:kb(t,r),subPrefixes:r.filter(d=>!d.toLowerCase().includes("hover"))},a.set(n,i)),i}const Q8=e=>ot(e)&&Object.getOwnPropertyNames(e).some(t=>Qn(e[t]));function eF(e,t){const{isScriptable:r,isIndexable:a}=l4(e);for(const n of t){const i=r(n),o=a(n),d=(o||i)&&e[n];if(i&&(Qn(d)||Q8(d))||o&&sr(d))return!0}return!1}var tF="4.5.1";const rF=["top","bottom","left","right","chartArea"];function Fj(e,t){return e==="top"||e==="bottom"||rF.indexOf(e)===-1&&t==="x"}function Bj(e,t){return function(r,a){return r[e]===a[e]?r[t]-a[t]:r[e]-a[e]}}function zj(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),_t(r&&r.onComplete,[e],t)}function sF(e){const t=e.chart,r=t.options.animation;_t(r&&r.onProgress,[e],t)}function C4(e){return Nb()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Rh={},$j=e=>{const t=C4(e);return Object.values(Rh).filter(r=>r.canvas===t).pop()};function aF(e,t,r){const a=Object.keys(e);for(const n of a){const i=+n;if(i>=t){const o=e[n];delete e[n],(r>0||i>t)&&(e[i+r]=o)}}}function nF(e,t,r,a){return!r||e.type==="mouseout"?null:a?t:e}var pn;let Ac=(pn=class{static register(...t){ma.add(...t),Uj()}static unregister(...t){ma.remove(...t),Uj()}constructor(t,r){const a=this.config=new X8(r),n=C4(t),i=$j(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||j8(n)),this.platform.updateConfig(a);const d=this.platform.acquireContext(n,o.aspectRatio),c=d&&d.canvas,h=c&&c.height,m=c&&c.width;if(this.id=tD(),this.ctx=d,this.canvas=c,this.width=m,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new $8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vD(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],Rh[this.id]=this,!d||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ha.listen(this,"complete",zj),Ha.listen(this,"progress",sF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:a,height:n,_aspectRatio:i}=this;return ct(t)?r&&i?i:n?a/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ma}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cj(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return oj(this.canvas,this.ctx),this}stop(){return Ha.stop(this),this}resize(t,r){Ha.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const a=this.options,n=this.canvas,i=a.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,r,i),d=a.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,cj(this,d,!0)&&(this.notifyPlugins("resize",{size:o}),_t(a.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};mt(r,(a,n)=>{a.id=n})}buildOrUpdateScales(){const t=this.options,r=t.scales,a=this.scales,n=Object.keys(a).reduce((o,d)=>(o[d]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const d=r[o],c=px(o,d),h=c==="r",m=c==="x";return{options:d,dposition:h?"chartArea":m?"bottom":"left",dtype:h?"radialLinear":m?"category":"linear"}}))),mt(i,o=>{const d=o.options,c=d.id,h=px(c,d),m=Xe(d.type,o.dtype);(d.position===void 0||Fj(d.position,h)!==Fj(o.dposition))&&(d.position=o.dposition),n[c]=!0;let g=null;if(c in a&&a[c].type===m)g=a[c];else{const p=ma.getScale(m);g=new p({id:c,type:m,ctx:this.ctx,chart:this}),a[g.id]=g}g.init(d,t)}),mt(n,(o,d)=>{o||delete a[d]}),mt(a,o=>{Ls.configure(this,o,o.options),Ls.addBox(this,o)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,a=t.length;if(t.sort((n,i)=>n.index-i.index),a>r){for(let n=r;n<a;++n)this._destroyDatasetMeta(n);t.splice(r,a-r)}this._sortedMetasets=t.slice(0).sort(Bj("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((a,n)=>{r.filter(i=>i===a._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let a,n;for(this._removeUnreferencedMetasets(),a=0,n=r.length;a<n;a++){const i=r[a];let o=this.getDatasetMeta(a);const d=i.type||this.config.type;if(o.type&&o.type!==d&&(this._destroyDatasetMeta(a),o=this.getDatasetMeta(a)),o.type=d,o.indexAxis=i.indexAxis||fx(d,this.options),o.order=i.order||0,o.index=a,o.label=""+i.label,o.visible=this.isDatasetVisible(a),o.controller)o.controller.updateIndex(a),o.controller.linkScales();else{const c=ma.getController(d),{datasetElementType:h,dataElementType:m}=Ut.datasets[d];Object.assign(c,{dataElementType:ma.getElement(m),datasetElementType:h&&ma.getElement(h)}),o.controller=new c(this,a),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){mt(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const a=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,m=this.data.datasets.length;h<m;h++){const{controller:g}=this.getDatasetMeta(h),p=!n&&i.indexOf(g)===-1;g.buildOrUpdateElements(p),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=a.layout.autoPadding?o:0,this._updateLayout(o),n||mt(i,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Bj("z","_idx"));const{_active:d,_lastEvent:c}=this;c?this._eventHandler(c,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){mt(this.scales,t=>{Ls.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),a=new Set(t.events);(!Jw(r,a)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:a,start:n,count:i}of r){const o=a==="_removeElements"?-i:i;aF(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,a=i=>new Set(t.filter(o=>o[0]===i).map((o,d)=>d+","+o.splice(1).join(","))),n=a(0);for(let i=1;i<r;i++)if(!Jw(n,a(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ls.update(this,this.width,this.height,t);const r=this.chartArea,a=r.width<=0||r.height<=0;this._layers=[],mt(this.boxes,n=>{a&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,a=this.data.datasets.length;r<a;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,a=this.data.datasets.length;r<a;++r)this._updateDataset(r,Qn(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const a=this.getDatasetMeta(t),n={meta:a,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(a.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ha.has(this)?this.attached&&!Ha.running(this)&&Ha.start(this):(this.draw(),zj({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:a,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(a,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,a=[];let n,i;for(n=0,i=r.length;n<i;++n){const o=r[n];(!t||o.visible)&&a.push(o)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,a={meta:t,index:t.index,cancelable:!0},n=SO(this,t);this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(n&&yb(r,n),t.controller.draw(),n&&bb(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return fc(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,a,n){const i=r8.modes[r];return typeof i=="function"?i(this,t,a,n):[]}getDatasetMeta(t){const r=this.data.datasets[t],a=this._metasets;let n=a.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},a.push(n)),n}getContext(){return this.$context||(this.$context=Ji(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const a=this.getDatasetMeta(t);return typeof a.hidden=="boolean"?!a.hidden:!r.hidden}setDatasetVisibility(t,r){const a=this.getDatasetMeta(t);a.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,a){const n=a?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,n);mc(r)?(i.data[r].hidden=!a,this.update()):(this.setDatasetVisibility(t,a),o.update(i,{visible:a}),this.update(d=>d.datasetIndex===t?n:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Ha.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),oj(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Rh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,a=(i,o)=>{r.addEventListener(this,i,o),t[i]=o},n=(i,o,d)=>{i.offsetX=o,i.offsetY=d,this._eventHandler(i)};mt(this.options.events,i=>a(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,a=(c,h)=>{r.addEventListener(this,c,h),t[c]=h},n=(c,h)=>{t[c]&&(r.removeEventListener(this,c,h),delete t[c])},i=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const d=()=>{n("attach",d),this.attached=!0,this.resize(),a("resize",i),a("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),a("attach",d)},r.isAttached(this.canvas)?d():o()}unbindEvents(){mt(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},mt(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,a){const n=a?"set":"remove";let i,o,d,c;for(r==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),d=0,c=t.length;d<c;++d){o=t[d];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],a=t.map(({datasetIndex:i,index:o})=>{const d=this.getDatasetMeta(i);if(!d)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:d.data[o],index:o}});!Im(a,r)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,r))}notifyPlugins(t,r,a){return this._plugins.notify(this,t,r,a)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,a){const n=this.options.hover,i=(c,h)=>c.filter(m=>!h.some(g=>m.datasetIndex===g.datasetIndex&&m.index===g.index)),o=i(r,t),d=a?t:i(t,r);o.length&&this.updateHoverStyle(o,n.mode,!1),d.length&&n.mode&&this.updateHoverStyle(d,n.mode,!0)}_eventHandler(t,r){const a={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",a,n)===!1)return;const i=this._handleEvent(t,r,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,n),(i||a.changed)&&this.render(),this}_handleEvent(t,r,a){const{_active:n=[],options:i}=this,o=r,d=this._getActiveElements(t,n,a,o),c=oD(t),h=nF(t,this._lastEvent,a,c);a&&(this._lastEvent=null,_t(i.onHover,[t,d,this],this),c&&_t(i.onClick,[t,d,this],this));const m=!Im(d,n);return(m||r)&&(this._active=d,this._updateHoverStyles(d,n,r)),this._lastEvent=h,m}_getActiveElements(t,r,a,n){if(t.type==="mouseout")return[];if(!a)return r;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,n)}},Be(pn,"defaults",Ut),Be(pn,"instances",Rh),Be(pn,"overrides",Gi),Be(pn,"registry",ma),Be(pn,"version",tF),Be(pn,"getChart",$j),pn);function Uj(){return mt(Ac.instances,e=>e._plugins.invalidate())}function iF(e,t,r){const{startAngle:a,x:n,y:i,outerRadius:o,innerRadius:d,options:c}=t,{borderWidth:h,borderJoinStyle:m}=c,g=Math.min(h/o,Gs(a-r));if(e.beginPath(),e.arc(n,i,o-h/2,a+g/2,r-g/2),d>0){const p=Math.min(h/d,Gs(a-r));e.arc(n,i,d+h/2,r-p/2,a+p/2,!0)}else{const p=Math.min(h/2,o*Gs(a-r));if(m==="round")e.arc(n,i,p,r-bt/2,a+bt/2,!0);else if(m==="bevel"){const k=2*p*p,x=-k*Math.cos(r+bt/2)+n,j=-k*Math.sin(r+bt/2)+i,y=k*Math.cos(a+bt/2)+n,b=k*Math.sin(a+bt/2)+i;e.lineTo(x,j),e.lineTo(y,b)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function oF(e,t,r){const{startAngle:a,pixelMargin:n,x:i,y:o,outerRadius:d,innerRadius:c}=t;let h=n/d;e.beginPath(),e.arc(i,o,d,a-h,r+h),c>n?(h=n/c,e.arc(i,o,c,r+h,a-h,!0)):e.arc(i,o,n,r+br,a-br),e.closePath(),e.clip()}function lF(e){return vb(e,["outerStart","outerEnd","innerStart","innerEnd"])}function dF(e,t,r,a){const n=lF(e.options.borderRadius),i=(r-t)/2,o=Math.min(i,a*t/2),d=c=>{const h=(r-Math.min(i,c))*a/2;return Lr(c,0,Math.min(i,h))};return{outerStart:d(n.outerStart),outerEnd:d(n.outerEnd),innerStart:Lr(n.innerStart,0,o),innerEnd:Lr(n.innerEnd,0,o)}}function uo(e,t,r,a){return{x:r+e*Math.cos(t),y:a+e*Math.sin(t)}}function Dm(e,t,r,a,n,i){const{x:o,y:d,startAngle:c,pixelMargin:h,innerRadius:m}=t,g=Math.max(t.outerRadius+a+r-h,0),p=m>0?m+a+r+h:0;let k=0;const x=n-c;if(a){const B=m>0?m-a:0,W=g>0?g-a:0,Q=(B+W)/2,$=Q!==0?x*Q/(Q+a):x;k=(x-$)/2}const j=Math.max(.001,x*g-r/bt)/g,y=(x-j)/2,b=c+y+k,w=n-y-k,{outerStart:N,outerEnd:P,innerStart:C,innerEnd:A}=dF(t,p,g,w-b),E=g-N,F=g-P,I=b+N/E,D=w-P/F,Y=p+C,R=p+A,Z=b+C/Y,T=w-A/R;if(e.beginPath(),i){const B=(I+D)/2;if(e.arc(o,d,g,I,B),e.arc(o,d,g,B,D),P>0){const O=uo(F,D,o,d);e.arc(O.x,O.y,P,D,w+br)}const W=uo(R,w,o,d);if(e.lineTo(W.x,W.y),A>0){const O=uo(R,T,o,d);e.arc(O.x,O.y,A,w+br,T+Math.PI)}const Q=(w-A/p+(b+C/p))/2;if(e.arc(o,d,p,w-A/p,Q,!0),e.arc(o,d,p,Q,b+C/p,!0),C>0){const O=uo(Y,Z,o,d);e.arc(O.x,O.y,C,Z+Math.PI,b-br)}const $=uo(E,b,o,d);if(e.lineTo($.x,$.y),N>0){const O=uo(E,I,o,d);e.arc(O.x,O.y,N,b-br,I)}}else{e.moveTo(o,d);const B=Math.cos(I)*g+o,W=Math.sin(I)*g+d;e.lineTo(B,W);const Q=Math.cos(D)*g+o,$=Math.sin(D)*g+d;e.lineTo(Q,$)}e.closePath()}function cF(e,t,r,a,n){const{fullCircles:i,startAngle:o,circumference:d}=t;let c=t.endAngle;if(i){Dm(e,t,r,a,c,n);for(let h=0;h<i;++h)e.fill();isNaN(d)||(c=o+(d%kr||kr))}return Dm(e,t,r,a,c,n),e.fill(),c}function uF(e,t,r,a,n){const{fullCircles:i,startAngle:o,circumference:d,options:c}=t,{borderWidth:h,borderJoinStyle:m,borderDash:g,borderDashOffset:p,borderRadius:k}=c,x=c.borderAlign==="inner";if(!h)return;e.setLineDash(g||[]),e.lineDashOffset=p,x?(e.lineWidth=h*2,e.lineJoin=m||"round"):(e.lineWidth=h,e.lineJoin=m||"bevel");let j=t.endAngle;if(i){Dm(e,t,r,a,j,n);for(let y=0;y<i;++y)e.stroke();isNaN(d)||(j=o+(d%kr||kr))}x&&oF(e,t,j),c.selfJoin&&j-o>=bt&&k===0&&m!=="miter"&&iF(e,t,j),i||(Dm(e,t,r,a,j,n),e.stroke())}class Co extends dn{constructor(r){super();Be(this,"circumference");Be(this,"endAngle");Be(this,"fullCircles");Be(this,"innerRadius");Be(this,"outerRadius");Be(this,"pixelMargin");Be(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,a,n){const i=this.getProps(["x","y"],n),{angle:o,distance:d}=QS(i,{x:r,y:a}),{startAngle:c,endAngle:h,innerRadius:m,outerRadius:g,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),k=(this.options.spacing+this.options.borderWidth)/2,x=Xe(p,h-c),j=gb(o,c,h)&&c!==h,y=x>=kr||j,b=En(d,m+k,g+k);return y&&b}getCenterPoint(r){const{x:a,y:n,startAngle:i,endAngle:o,innerRadius:d,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:h,spacing:m}=this.options,g=(i+o)/2,p=(d+c+m+h)/2;return{x:a+Math.cos(g)*p,y:n+Math.sin(g)*p}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:a,circumference:n}=this,i=(a.offset||0)/4,o=(a.spacing||0)/2,d=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=n>kr?Math.floor(n/kr):0,n===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const c=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(c)*i,Math.sin(c)*i);const h=1-Math.sin(Math.min(bt,n||0)),m=i*h;r.fillStyle=a.backgroundColor,r.strokeStyle=a.borderColor,cF(r,this,m,o,d),uF(r,this,m,o,d),r.restore()}}Be(Co,"id","arc"),Be(Co,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),Be(Co,"defaultRoutes",{backgroundColor:"backgroundColor"}),Be(Co,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function P4(e,t,r=t){e.lineCap=Xe(r.borderCapStyle,t.borderCapStyle),e.setLineDash(Xe(r.borderDash,t.borderDash)),e.lineDashOffset=Xe(r.borderDashOffset,t.borderDashOffset),e.lineJoin=Xe(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Xe(r.borderWidth,t.borderWidth),e.strokeStyle=Xe(r.borderColor,t.borderColor)}function hF(e,t,r){e.lineTo(r.x,r.y)}function mF(e){return e.stepped?MD:e.tension||e.cubicInterpolationMode==="monotone"?RD:hF}function E4(e,t,r={}){const a=e.length,{start:n=0,end:i=a-1}=r,{start:o,end:d}=t,c=Math.max(n,o),h=Math.min(i,d),m=n<o&&i<o||n>d&&i>d;return{count:a,start:c,loop:t.loop,ilen:h<c&&!m?a+h-c:h-c}}function gF(e,t,r,a){const{points:n,options:i}=t,{count:o,start:d,loop:c,ilen:h}=E4(n,r,a),m=mF(i);let{move:g=!0,reverse:p}=a||{},k,x,j;for(k=0;k<=h;++k)x=n[(d+(p?h-k:k))%o],!x.skip&&(g?(e.moveTo(x.x,x.y),g=!1):m(e,j,x,p,i.stepped),j=x);return c&&(x=n[(d+(p?h:0))%o],m(e,j,x,p,i.stepped)),!!c}function fF(e,t,r,a){const n=t.points,{count:i,start:o,ilen:d}=E4(n,r,a),{move:c=!0,reverse:h}=a||{};let m=0,g=0,p,k,x,j,y,b;const w=P=>(o+(h?d-P:P))%i,N=()=>{j!==y&&(e.lineTo(m,y),e.lineTo(m,j),e.lineTo(m,b))};for(c&&(k=n[w(0)],e.moveTo(k.x,k.y)),p=0;p<=d;++p){if(k=n[w(p)],k.skip)continue;const P=k.x,C=k.y,A=P|0;A===x?(C<j?j=C:C>y&&(y=C),m=(g*m+P)/++g):(N(),e.lineTo(P,C),x=A,g=0,j=y=C),b=C}N()}function xx(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?fF:gF}function pF(e){return e.stepped?mO:e.tension||e.cubicInterpolationMode==="monotone"?gO:ki}function xF(e,t,r,a){let n=t._path;n||(n=t._path=new Path2D,t.path(n,r,a)&&n.closePath()),P4(e,t.options),e.stroke(n)}function yF(e,t,r,a){const{segments:n,options:i}=t,o=xx(t);for(const d of n)P4(e,i,d.style),e.beginPath(),o(e,t,d,{start:r,end:r+a-1})&&e.closePath(),e.stroke()}const bF=typeof Path2D=="function";function vF(e,t,r,a){bF&&!t.options.segment?xF(e,t,r,a):yF(e,t,r,a)}class Po extends dn{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const a=this.options;if((a.tension||a.cubicInterpolationMode==="monotone")&&!a.stepped&&!this._pointsUpdated){const n=a.spanGaps?this._loop:this._fullLoop;nO(this._points,a,t,n,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=wO(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,a=t.length;return a&&r[t[a-1].end]}interpolate(t,r){const a=this.options,n=t[r],i=this.points,o=bO(this,{property:r,start:n,end:n});if(!o.length)return;const d=[],c=pF(a);let h,m;for(h=0,m=o.length;h<m;++h){const{start:g,end:p}=o[h],k=i[g],x=i[p];if(k===x){d.push(k);continue}const j=Math.abs((n-k[r])/(x[r]-k[r])),y=c(k,x,j,a.stepped);y[r]=t[r],d.push(y)}return d.length===1?d[0]:d}pathSegment(t,r,a){return xx(this)(t,this,r,a)}path(t,r,a){const n=this.segments,i=xx(this);let o=this._loop;r=r||0,a=a||this.points.length-r;for(const d of n)o&=i(t,this,d,{start:r,end:r+a-1});return!!o}draw(t,r,a,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),vF(t,this,a,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Be(Po,"id","line"),Be(Po,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Be(Po,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Be(Po,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Vj(e,t,r,a){const n=e.options,{[r]:i}=e.getProps([r],a);return Math.abs(t-i)<n.radius+n.hitRadius}class Id extends dn{constructor(r){super();Be(this,"parsed");Be(this,"skip");Be(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,a,n){const i=this.options,{x:o,y:d}=this.getProps(["x","y"],n);return Math.pow(r-o,2)+Math.pow(a-d,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,a){return Vj(this,r,"x",a)}inYRange(r,a){return Vj(this,r,"y",a)}getCenterPoint(r){const{x:a,y:n}=this.getProps(["x","y"],r);return{x:a,y:n}}size(r){r=r||this.options||{};let a=r.radius||0;a=Math.max(a,a&&r.hoverRadius||0);const n=a&&r.borderWidth||0;return(a+n)*2}draw(r,a){const n=this.options;this.skip||n.radius<.1||!fc(this,a,this.size(n)/2)||(r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.fillStyle=n.backgroundColor,gx(r,n,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}Be(Id,"id","point"),Be(Id,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Be(Id,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function I4(e,t){const{x:r,y:a,base:n,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let d,c,h,m,g;return e.horizontal?(g=o/2,d=Math.min(r,n),c=Math.max(r,n),h=a-g,m=a+g):(g=i/2,d=r-g,c=r+g,h=Math.min(a,n),m=Math.max(a,n)),{left:d,top:h,right:c,bottom:m}}function Tn(e,t,r,a){return e?0:Lr(t,r,a)}function kF(e,t,r){const a=e.options.borderWidth,n=e.borderSkipped,i=o4(a);return{t:Tn(n.top,i.top,0,r),r:Tn(n.right,i.right,0,t),b:Tn(n.bottom,i.bottom,0,r),l:Tn(n.left,i.left,0,t)}}function wF(e,t,r){const{enableBorderRadius:a}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,i=Uo(n),o=Math.min(t,r),d=e.borderSkipped,c=a||ot(n);return{topLeft:Tn(!c||d.top||d.left,i.topLeft,0,o),topRight:Tn(!c||d.top||d.right,i.topRight,0,o),bottomLeft:Tn(!c||d.bottom||d.left,i.bottomLeft,0,o),bottomRight:Tn(!c||d.bottom||d.right,i.bottomRight,0,o)}}function jF(e){const t=I4(e),r=t.right-t.left,a=t.bottom-t.top,n=kF(e,r/2,a/2),i=wF(e,r/2,a/2);return{outer:{x:t.left,y:t.top,w:r,h:a,radius:i},inner:{x:t.left+n.l,y:t.top+n.t,w:r-n.l-n.r,h:a-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Sf(e,t,r,a){const n=t===null,i=r===null,d=e&&!(n&&i)&&I4(e,a);return d&&(n||En(t,d.left,d.right))&&(i||En(r,d.top,d.bottom))}function NF(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function _F(e,t){e.rect(t.x,t.y,t.w,t.h)}function Cf(e,t,r={}){const a=e.x!==r.x?-t:0,n=e.y!==r.y?-t:0,i=(e.x+e.w!==r.x+r.w?t:0)-a,o=(e.y+e.h!==r.y+r.h?t:0)-n;return{x:e.x+a,y:e.y+n,w:e.w+i,h:e.h+o,radius:e.radius}}class Td extends dn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:a,backgroundColor:n}}=this,{inner:i,outer:o}=jF(this),d=NF(o.radius)?Am:_F;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),d(t,Cf(o,r,i)),t.clip(),d(t,Cf(i,-r,o)),t.fillStyle=a,t.fill("evenodd")),t.beginPath(),d(t,Cf(i,r)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,r,a){return Sf(this,t,r,a)}inXRange(t,r){return Sf(this,t,null,r)}inYRange(t,r){return Sf(this,null,t,r)}getCenterPoint(t){const{x:r,y:a,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(r+n)/2:r,y:i?a:(a+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}Be(Td,"id","bar"),Be(Td,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Be(Td,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Hj=(e,t)=>{let{boxHeight:r=t,boxWidth:a=t}=e;return e.usePointStyle&&(r=Math.min(r,t),a=e.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(t,r)}},SF=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Wj extends dn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,a){this.maxWidth=t,this.maxHeight=r,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=_t(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(a=>t.filter(a,this.chart.data))),t.sort&&(r=r.sort((a,n)=>t.sort(a,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const a=t.labels,n=Ar(a.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:d,itemHeight:c}=Hj(a,i);let h,m;r.font=n.string,this.isHorizontal()?(h=this.maxWidth,m=this._fitRows(o,i,d,c)+10):(m=this.maxHeight,h=this._fitCols(o,n,d,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(m,t.maxHeight||this.maxHeight)}_fitRows(t,r,a,n){const{ctx:i,maxWidth:o,options:{labels:{padding:d}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],m=n+d;let g=t;i.textAlign="left",i.textBaseline="middle";let p=-1,k=-m;return this.legendItems.forEach((x,j)=>{const y=a+r/2+i.measureText(x.text).width;(j===0||h[h.length-1]+y+2*d>o)&&(g+=m,h[h.length-(j>0?0:1)]=0,k+=m,p++),c[j]={left:0,top:k,row:p,width:y,height:n},h[h.length-1]+=y+d}),g}_fitCols(t,r,a,n){const{ctx:i,maxHeight:o,options:{labels:{padding:d}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],m=o-t;let g=d,p=0,k=0,x=0,j=0;return this.legendItems.forEach((y,b)=>{const{itemWidth:w,itemHeight:N}=CF(a,r,i,y,n);b>0&&k+N+2*d>m&&(g+=p+d,h.push({width:p,height:k}),x+=p+d,j++,p=k=0),c[b]={left:x,top:k,col:j,width:w,height:N},p=Math.max(p,w),k+=N+d}),g+=p,h.push({width:p,height:k}),g}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:a,labels:{padding:n},rtl:i}}=this,o=Vo(i,this.left,this.width);if(this.isHorizontal()){let d=0,c=Cr(a,this.left+n,this.right-this.lineWidths[d]);for(const h of r)d!==h.row&&(d=h.row,c=Cr(a,this.left+n,this.right-this.lineWidths[d])),h.top+=this.top+t+n,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+n}else{let d=0,c=Cr(a,this.top+t+n,this.bottom-this.columnSizes[d].height);for(const h of r)h.col!==d&&(d=h.col,c=Cr(a,this.top+t+n,this.bottom-this.columnSizes[d].height)),h.top=c,h.left+=this.left+n,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;yb(t,this),this._draw(),bb(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:a,ctx:n}=this,{align:i,labels:o}=t,d=Ut.color,c=Vo(t.rtl,this.left,this.width),h=Ar(o.font),{padding:m}=o,g=h.size,p=g/2;let k;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:x,boxHeight:j,itemHeight:y}=Hj(o,g),b=function(A,E,F){if(isNaN(x)||x<=0||isNaN(j)||j<0)return;n.save();const I=Xe(F.lineWidth,1);if(n.fillStyle=Xe(F.fillStyle,d),n.lineCap=Xe(F.lineCap,"butt"),n.lineDashOffset=Xe(F.lineDashOffset,0),n.lineJoin=Xe(F.lineJoin,"miter"),n.lineWidth=I,n.strokeStyle=Xe(F.strokeStyle,d),n.setLineDash(Xe(F.lineDash,[])),o.usePointStyle){const D={radius:j*Math.SQRT2/2,pointStyle:F.pointStyle,rotation:F.rotation,borderWidth:I},Y=c.xPlus(A,x/2),R=E+p;i4(n,D,Y,R,o.pointStyleWidth&&x)}else{const D=E+Math.max((g-j)/2,0),Y=c.leftForLtr(A,x),R=Uo(F.borderRadius);n.beginPath(),Object.values(R).some(Z=>Z!==0)?Am(n,{x:Y,y:D,w:x,h:j,radius:R}):n.rect(Y,D,x,j),n.fill(),I!==0&&n.stroke()}n.restore()},w=function(A,E,F){pc(n,F.text,A,E+y/2,h,{strikethrough:F.hidden,textAlign:c.textAlign(F.textAlign)})},N=this.isHorizontal(),P=this._computeTitleHeight();N?k={x:Cr(i,this.left+m,this.right-a[0]),y:this.top+m+P,line:0}:k={x:this.left+m,y:Cr(i,this.top+P+m,this.bottom-r[0].height),line:0},m4(this.ctx,t.textDirection);const C=y+m;this.legendItems.forEach((A,E)=>{n.strokeStyle=A.fontColor,n.fillStyle=A.fontColor;const F=n.measureText(A.text).width,I=c.textAlign(A.textAlign||(A.textAlign=o.textAlign)),D=x+p+F;let Y=k.x,R=k.y;c.setWidth(this.width),N?E>0&&Y+D+m>this.right&&(R=k.y+=C,k.line++,Y=k.x=Cr(i,this.left+m,this.right-a[k.line])):E>0&&R+C>this.bottom&&(Y=k.x=Y+r[k.line].width+m,k.line++,R=k.y=Cr(i,this.top+P+m,this.bottom-r[k.line].height));const Z=c.x(Y);if(b(Z,R,A),Y=kD(I,Y+x+p,N?Y+D:this.right,t.rtl),w(c.x(Y),R,A),N)k.x+=D+m;else if(typeof A.text!="string"){const T=h.lineHeight;k.y+=T4(A,T)+m}else k.y+=C}),g4(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,a=Ar(r.font),n=Os(r.padding);if(!r.display)return;const i=Vo(t.rtl,this.left,this.width),o=this.ctx,d=r.position,c=a.size/2,h=n.top+c;let m,g=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),m=this.top+h,g=Cr(t.align,g,this.right-p);else{const x=this.columnSizes.reduce((j,y)=>Math.max(j,y.height),0);m=h+Cr(t.align,this.top,this.bottom-x-t.labels.padding-this._computeTitleHeight())}const k=Cr(d,g,g+p);o.textAlign=i.textAlign(pb(d)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=a.string,pc(o,r.text,k,m,a)}_computeTitleHeight(){const t=this.options.title,r=Ar(t.font),a=Os(t.padding);return t.display?r.lineHeight+a.height:0}_getLegendItemAt(t,r){let a,n,i;if(En(t,this.left,this.right)&&En(r,this.top,this.bottom)){for(i=this.legendHitBoxes,a=0;a<i.length;++a)if(n=i[a],En(t,n.left,n.left+n.width)&&En(r,n.top,n.top+n.height))return this.legendItems[a]}return null}handleEvent(t){const r=this.options;if(!IF(t.type,r))return;const a=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,i=SF(n,a);n&&!i&&_t(r.onLeave,[t,n,this],this),this._hoveredItem=a,a&&!i&&_t(r.onHover,[t,a,this],this)}else a&&_t(r.onClick,[t,a,this],this)}}function CF(e,t,r,a,n){const i=PF(a,e,t,r),o=EF(n,a,t.lineHeight);return{itemWidth:i,itemHeight:o}}function PF(e,t,r,a){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),t+r.size/2+a.measureText(n).width}function EF(e,t,r){let a=e;return typeof t.text!="string"&&(a=T4(t,r)),a}function T4(e,t){const r=e.text?e.text.length:0;return t*r}function IF(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var L4={id:"legend",_element:Wj,start(e,t,r){const a=e.legend=new Wj({ctx:e.ctx,options:r,chart:e});Ls.configure(e,a,r),Ls.addBox(e,a)},stop(e){Ls.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const a=e.legend;Ls.configure(e,a,r),a.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const a=t.datasetIndex,n=r.chart;n.isDatasetVisible(a)?(n.hide(a),t.hidden=!0):(n.show(a),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:a,textAlign:n,color:i,useBorderRadius:o,borderRadius:d}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(r?0:void 0),m=Os(h.borderWidth);return{text:t[c.index].label,fillStyle:h.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(m.width+m.height)/4,strokeStyle:h.borderColor,pointStyle:a||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:o&&(d||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class A4 extends dn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const a=this.options;if(this.left=0,this.top=0,!a.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const n=sr(a.text)?a.text.length:1;this._padding=Os(a.padding);const i=n*Ar(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:a,bottom:n,right:i,options:o}=this,d=o.align;let c=0,h,m,g;return this.isHorizontal()?(m=Cr(d,a,i),g=r+t,h=i-a):(o.position==="left"?(m=a+t,g=Cr(d,n,r),c=bt*-.5):(m=i-t,g=Cr(d,r,n),c=bt*.5),h=n-r),{titleX:m,titleY:g,maxWidth:h,rotation:c}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const a=Ar(r.font),i=a.lineHeight/2+this._padding.top,{titleX:o,titleY:d,maxWidth:c,rotation:h}=this._drawArgs(i);pc(t,r.text,0,0,a,{color:r.color,maxWidth:c,rotation:h,textAlign:pb(r.align),textBaseline:"middle",translation:[o,d]})}}function TF(e,t){const r=new A4({ctx:e.ctx,options:t,chart:e});Ls.configure(e,r,t),Ls.addBox(e,r),e.titleBlock=r}var M4={id:"title",_element:A4,start(e,t,r){TF(e,r)},stop(e){const t=e.titleBlock;Ls.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const a=e.titleBlock;Ls.configure(e,a,r),a.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ql={average(e){if(!e.length)return!1;let t,r,a=new Set,n=0,i=0;for(t=0,r=e.length;t<r;++t){const d=e[t].element;if(d&&d.hasValue()){const c=d.tooltipPosition();a.add(c.x),n+=c.y,++i}}return i===0||a.size===0?!1:{x:[...a].reduce((d,c)=>d+c)/a.size,y:n/i}},nearest(e,t){if(!e.length)return!1;let r=t.x,a=t.y,n=Number.POSITIVE_INFINITY,i,o,d;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),m=hx(t,h);m<n&&(n=m,d=c)}}if(d){const c=d.tooltipPosition();r=c.x,a=c.y}return{x:r,y:a}}};function ua(e,t){return t&&(sr(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Wa(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function LF(e,t){const{element:r,datasetIndex:a,index:n}=t,i=e.getDatasetMeta(a).controller,{label:o,value:d}=i.getLabelAndValue(n);return{chart:e,label:o,parsed:i.getParsed(n),raw:e.data.datasets[a].data[n],formattedValue:d,dataset:i.getDataset(),dataIndex:n,datasetIndex:a,element:r}}function qj(e,t){const r=e.chart.ctx,{body:a,footer:n,title:i}=e,{boxWidth:o,boxHeight:d}=t,c=Ar(t.bodyFont),h=Ar(t.titleFont),m=Ar(t.footerFont),g=i.length,p=n.length,k=a.length,x=Os(t.padding);let j=x.height,y=0,b=a.reduce((P,C)=>P+C.before.length+C.lines.length+C.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,g&&(j+=g*h.lineHeight+(g-1)*t.titleSpacing+t.titleMarginBottom),b){const P=t.displayColors?Math.max(d,c.lineHeight):c.lineHeight;j+=k*P+(b-k)*c.lineHeight+(b-1)*t.bodySpacing}p&&(j+=t.footerMarginTop+p*m.lineHeight+(p-1)*t.footerSpacing);let w=0;const N=function(P){y=Math.max(y,r.measureText(P).width+w)};return r.save(),r.font=h.string,mt(e.title,N),r.font=c.string,mt(e.beforeBody.concat(e.afterBody),N),w=t.displayColors?o+2+t.boxPadding:0,mt(a,P=>{mt(P.before,N),mt(P.lines,N),mt(P.after,N)}),w=0,r.font=m.string,mt(e.footer,N),r.restore(),y+=x.width,{width:y,height:j}}function AF(e,t){const{y:r,height:a}=t;return r<a/2?"top":r>e.height-a/2?"bottom":"center"}function MF(e,t,r,a){const{x:n,width:i}=a,o=r.caretSize+r.caretPadding;if(e==="left"&&n+i+o>t.width||e==="right"&&n-i-o<0)return!0}function RF(e,t,r,a){const{x:n,width:i}=r,{width:o,chartArea:{left:d,right:c}}=e;let h="center";return a==="center"?h=n<=(d+c)/2?"left":"right":n<=i/2?h="left":n>=o-i/2&&(h="right"),MF(h,e,t,r)&&(h="center"),h}function Kj(e,t,r){const a=r.yAlign||t.yAlign||AF(e,r);return{xAlign:r.xAlign||t.xAlign||RF(e,t,r,a),yAlign:a}}function DF(e,t){let{x:r,width:a}=e;return t==="right"?r-=a:t==="center"&&(r-=a/2),r}function OF(e,t,r){let{y:a,height:n}=e;return t==="top"?a+=r:t==="bottom"?a-=n+r:a-=n/2,a}function Gj(e,t,r,a){const{caretSize:n,caretPadding:i,cornerRadius:o}=e,{xAlign:d,yAlign:c}=r,h=n+i,{topLeft:m,topRight:g,bottomLeft:p,bottomRight:k}=Uo(o);let x=DF(t,d);const j=OF(t,c,h);return c==="center"?d==="left"?x+=h:d==="right"&&(x-=h):d==="left"?x-=Math.max(m,p)+n:d==="right"&&(x+=Math.max(g,k)+n),{x:Lr(x,0,a.width-t.width),y:Lr(j,0,a.height-t.height)}}function Du(e,t,r){const a=Os(r.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-a.right:e.x+a.left}function Zj(e){return ua([],Wa(e))}function FF(e,t,r){return Ji(e,{tooltip:t,tooltipItems:r,type:"tooltip"})}function Yj(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const R4={beforeTitle:Va,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,a=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(a>0&&t.dataIndex<a)return r[t.dataIndex]}return""},afterTitle:Va,beforeBody:Va,beforeLabel:Va,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return ct(r)||(t+=r),t},labelColor(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Va,afterBody:Va,beforeFooter:Va,footer:Va,afterFooter:Va};function Wr(e,t,r,a){const n=e[t].call(r,a);return typeof n>"u"?R4[t].call(r,a):n}class yx extends dn{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,a=this.options.setContext(this.getContext()),n=a.enabled&&r.options.animation&&a.animations,i=new p4(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=FF(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:a}=r,n=Wr(a,"beforeTitle",this,t),i=Wr(a,"title",this,t),o=Wr(a,"afterTitle",this,t);let d=[];return d=ua(d,Wa(n)),d=ua(d,Wa(i)),d=ua(d,Wa(o)),d}getBeforeBody(t,r){return Zj(Wr(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:a}=r,n=[];return mt(t,i=>{const o={before:[],lines:[],after:[]},d=Yj(a,i);ua(o.before,Wa(Wr(d,"beforeLabel",this,i))),ua(o.lines,Wr(d,"label",this,i)),ua(o.after,Wa(Wr(d,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(t,r){return Zj(Wr(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:a}=r,n=Wr(a,"beforeFooter",this,t),i=Wr(a,"footer",this,t),o=Wr(a,"afterFooter",this,t);let d=[];return d=ua(d,Wa(n)),d=ua(d,Wa(i)),d=ua(d,Wa(o)),d}_createItems(t){const r=this._active,a=this.chart.data,n=[],i=[],o=[];let d=[],c,h;for(c=0,h=r.length;c<h;++c)d.push(LF(this.chart,r[c]));return t.filter&&(d=d.filter((m,g,p)=>t.filter(m,g,p,a))),t.itemSort&&(d=d.sort((m,g)=>t.itemSort(m,g,a))),mt(d,m=>{const g=Yj(t.callbacks,m);n.push(Wr(g,"labelColor",this,m)),i.push(Wr(g,"labelPointStyle",this,m)),o.push(Wr(g,"labelTextColor",this,m))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=d,d}update(t,r){const a=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const d=Ql[a.position].call(this,n,this._eventPosition);o=this._createItems(a),this.title=this.getTitle(o,a),this.beforeBody=this.getBeforeBody(o,a),this.body=this.getBody(o,a),this.afterBody=this.getAfterBody(o,a),this.footer=this.getFooter(o,a);const c=this._size=qj(this,a),h=Object.assign({},d,c),m=Kj(this.chart,a,h),g=Gj(a,h,m,this.chart);this.xAlign=m.xAlign,this.yAlign=m.yAlign,i={opacity:1,x:g.x,y:g.y,width:c.width,height:c.height,caretX:d.x,caretY:d.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,a,n){const i=this.getCaretPosition(t,a,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(t,r,a){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:d}=a,{topLeft:c,topRight:h,bottomLeft:m,bottomRight:g}=Uo(d),{x:p,y:k}=t,{width:x,height:j}=r;let y,b,w,N,P,C;return i==="center"?(P=k+j/2,n==="left"?(y=p,b=y-o,N=P+o,C=P-o):(y=p+x,b=y+o,N=P-o,C=P+o),w=y):(n==="left"?b=p+Math.max(c,m)+o:n==="right"?b=p+x-Math.max(h,g)-o:b=this.caretX,i==="top"?(N=k,P=N-o,y=b-o,w=b+o):(N=k+j,P=N+o,y=b+o,w=b-o),C=N),{x1:y,x2:b,x3:w,y1:N,y2:P,y3:C}}drawTitle(t,r,a){const n=this.title,i=n.length;let o,d,c;if(i){const h=Vo(a.rtl,this.x,this.width);for(t.x=Du(this,a.titleAlign,a),r.textAlign=h.textAlign(a.titleAlign),r.textBaseline="middle",o=Ar(a.titleFont),d=a.titleSpacing,r.fillStyle=a.titleColor,r.font=o.string,c=0;c<i;++c)r.fillText(n[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+d,c+1===i&&(t.y+=a.titleMarginBottom-d)}}_drawColorBox(t,r,a,n,i){const o=this.labelColors[a],d=this.labelPointStyles[a],{boxHeight:c,boxWidth:h}=i,m=Ar(i.bodyFont),g=Du(this,"left",i),p=n.x(g),k=c<m.lineHeight?(m.lineHeight-c)/2:0,x=r.y+k;if(i.usePointStyle){const j={radius:Math.min(h,c)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},y=n.leftForLtr(p,h)+h/2,b=x+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,gx(t,j,y,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,gx(t,j,y,b)}else{t.lineWidth=ot(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const j=n.leftForLtr(p,h),y=n.leftForLtr(n.xPlus(p,1),h-2),b=Uo(o.borderRadius);Object.values(b).some(w=>w!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Am(t,{x:j,y:x,w:h,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Am(t,{x:y,y:x+1,w:h-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(j,x,h,c),t.strokeRect(j,x,h,c),t.fillStyle=o.backgroundColor,t.fillRect(y,x+1,h-2,c-2))}t.fillStyle=this.labelTextColors[a]}drawBody(t,r,a){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:d,boxHeight:c,boxWidth:h,boxPadding:m}=a,g=Ar(a.bodyFont);let p=g.lineHeight,k=0;const x=Vo(a.rtl,this.x,this.width),j=function(F){r.fillText(F,x.x(t.x+k),t.y+p/2),t.y+=p+i},y=x.textAlign(o);let b,w,N,P,C,A,E;for(r.textAlign=o,r.textBaseline="middle",r.font=g.string,t.x=Du(this,y,a),r.fillStyle=a.bodyColor,mt(this.beforeBody,j),k=d&&y!=="right"?o==="center"?h/2+m:h+2+m:0,P=0,A=n.length;P<A;++P){for(b=n[P],w=this.labelTextColors[P],r.fillStyle=w,mt(b.before,j),N=b.lines,d&&N.length&&(this._drawColorBox(r,t,P,x,a),p=Math.max(g.lineHeight,c)),C=0,E=N.length;C<E;++C)j(N[C]),p=g.lineHeight;mt(b.after,j)}k=0,p=g.lineHeight,mt(this.afterBody,j),t.y-=i}drawFooter(t,r,a){const n=this.footer,i=n.length;let o,d;if(i){const c=Vo(a.rtl,this.x,this.width);for(t.x=Du(this,a.footerAlign,a),t.y+=a.footerMarginTop,r.textAlign=c.textAlign(a.footerAlign),r.textBaseline="middle",o=Ar(a.footerFont),r.fillStyle=a.footerColor,r.font=o.string,d=0;d<i;++d)r.fillText(n[d],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a.footerSpacing}}drawBackground(t,r,a,n){const{xAlign:i,yAlign:o}=this,{x:d,y:c}=t,{width:h,height:m}=a,{topLeft:g,topRight:p,bottomLeft:k,bottomRight:x}=Uo(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(d+g,c),o==="top"&&this.drawCaret(t,r,a,n),r.lineTo(d+h-p,c),r.quadraticCurveTo(d+h,c,d+h,c+p),o==="center"&&i==="right"&&this.drawCaret(t,r,a,n),r.lineTo(d+h,c+m-x),r.quadraticCurveTo(d+h,c+m,d+h-x,c+m),o==="bottom"&&this.drawCaret(t,r,a,n),r.lineTo(d+k,c+m),r.quadraticCurveTo(d,c+m,d,c+m-k),o==="center"&&i==="left"&&this.drawCaret(t,r,a,n),r.lineTo(d,c+g),r.quadraticCurveTo(d,c,d+g,c),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,a=this.$animations,n=a&&a.x,i=a&&a.y;if(n||i){const o=Ql[t.position].call(this,this._active,this._eventPosition);if(!o)return;const d=this._size=qj(this,t),c=Object.assign({},o,this._size),h=Kj(r,t,c),m=Gj(t,c,h,r);(n._to!==m.x||i._to!==m.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=d.width,this.height=d.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,m))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let a=this.opacity;if(!a)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;const o=Os(r.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&d&&(t.save(),t.globalAlpha=a,this.drawBackground(i,t,n,r),m4(t,r.textDirection),i.y+=o.top,this.drawTitle(i,t,r),this.drawBody(i,t,r),this.drawFooter(i,t,r),g4(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const a=this._active,n=t.map(({datasetIndex:d,index:c})=>{const h=this.chart.getDatasetMeta(d);if(!h)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:h.data[c],index:c}}),i=!Im(a,n),o=this._positionChanged(n,r);(i||o)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,a=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(t,i,r,a),d=this._positionChanged(o,t),c=r||!Im(o,i)||d;return c&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),c}_getActiveElements(t,r,a,n){const i=this.options;if(t.type==="mouseout")return[];if(!n)return r.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,a);return i.reverse&&o.reverse(),o}_positionChanged(t,r){const{caretX:a,caretY:n,options:i}=this,o=Ql[i.position].call(this,t,r);return o!==!1&&(a!==o.x||n!==o.y)}}Be(yx,"positioners",Ql);var D4={id:"tooltip",_element:yx,positioners:Ql,afterInit(e,t,r){r&&(e.tooltip=new yx({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:R4},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const BF=(e,t,r,a)=>(typeof t=="string"?(r=e.push(t)-1,a.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function zF(e,t,r,a){const n=e.indexOf(t);if(n===-1)return BF(e,t,r,a);const i=e.lastIndexOf(t);return n!==i?r:n}const $F=(e,t)=>e===null?null:Lr(Math.round(e),0,t);function Jj(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Om extends gl{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const a=this.getLabels();for(const{index:n,label:i}of r)a[n]===i&&a.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(ct(t))return null;const a=this.getLabels();return r=isFinite(r)&&a[r]===t?r:zF(a,t,Xe(r,t),this._addedLabels),$F(r,a.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:a,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(a=0),r||(n=this.getLabels().length-1)),this.min=a,this.max=n}buildTicks(){const t=this.min,r=this.max,a=this.options.offset,n=[];let i=this.getLabels();i=t===0&&r===i.length-1?i:i.slice(t,r+1),this._valueRange=Math.max(i.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let o=t;o<=r;o++)n.push({value:o});return n}getLabelForValue(t){return Jj.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}Be(Om,"id","category"),Be(Om,"defaults",{ticks:{callback:Jj}});function UF(e,t){const r=[],{bounds:n,step:i,min:o,max:d,precision:c,count:h,maxTicks:m,maxDigits:g,includeBounds:p}=e,k=i||1,x=m-1,{min:j,max:y}=t,b=!ct(o),w=!ct(d),N=!ct(h),P=(y-j)/(g+1);let C=Qw((y-j)/x/k)*k,A,E,F,I;if(C<1e-14&&!b&&!w)return[{value:j},{value:y}];I=Math.ceil(y/C)-Math.floor(j/C),I>x&&(C=Qw(I*C/x/k)*k),ct(c)||(A=Math.pow(10,c),C=Math.ceil(C*A)/A),n==="ticks"?(E=Math.floor(j/C)*C,F=Math.ceil(y/C)*C):(E=j,F=y),b&&w&&i&&hD((d-o)/i,C/1e3)?(I=Math.round(Math.min((d-o)/C,m)),C=(d-o)/I,E=o,F=d):N?(E=b?o:E,F=w?d:F,I=h-1,C=(F-E)/I):(I=(F-E)/C,Cd(I,Math.round(I),C/1e3)?I=Math.round(I):I=Math.ceil(I));const D=Math.max(ej(C),ej(E));A=Math.pow(10,ct(c)?D:c),E=Math.round(E*A)/A,F=Math.round(F*A)/A;let Y=0;for(b&&(p&&E!==o?(r.push({value:o}),E<o&&Y++,Cd(Math.round((E+Y*C)*A)/A,o,Xj(o,P,e))&&Y++):E<o&&Y++);Y<I;++Y){const R=Math.round((E+Y*C)*A)/A;if(w&&R>d)break;r.push({value:R})}return w&&p&&F!==d?r.length&&Cd(r[r.length-1].value,d,Xj(d,P,e))?r[r.length-1].value=d:r.push({value:d}):(!w||F===d)&&r.push({value:F}),r}function Xj(e,t,{horizontal:r,minRotation:a}){const n=Pi(a),i=(r?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class VF extends gl{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return ct(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:a}=this.getUserBounds();let{min:n,max:i}=this;const o=c=>n=r?n:c,d=c=>i=a?i:c;if(t){const c=Ca(n),h=Ca(i);c<0&&h<0?d(0):c>0&&h>0&&o(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);d(i+c),t||o(n-c)}this.min=n,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:a}=t,n;return a?(n=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${a} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let a=this.getTickLimit();a=Math.max(2,a);const n={maxTicks:a,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=UF(n,i);return t.bounds==="ticks"&&mD(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let r=this.min,a=this.max;if(super.configure(),this.options.offset&&t.length){const n=(a-r)/Math.max(t.length-1,1)/2;r-=n,a+=n}this._startValue=r,this._endValue=a,this._valueRange=a-r}getLabelForValue(t){return a4(t,this.chart.options.locale,this.options.ticks.format)}}class Fm extends VF{determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=Ds(t)?t:0,this.max=Ds(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,a=Pi(this.options.ticks.minRotation),n=(t?Math.sin(a):Math.cos(a))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}Be(Fm,"id","linear"),Be(Fm,"defaults",{ticks:{callback:n4.formatters.numeric}});const Ug={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Gr=Object.keys(Ug);function Qj(e,t){return e-t}function e1(e,t){if(ct(t))return null;const r=e._adapter,{parser:a,round:n,isoWeekday:i}=e._parseOpts;let o=t;return typeof a=="function"&&(o=a(o)),Ds(o)||(o=typeof a=="string"?r.parse(o,a):r.parse(o)),o===null?null:(n&&(o=n==="week"&&(gc(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,n)),+o)}function t1(e,t,r,a){const n=Gr.length;for(let i=Gr.indexOf(e);i<n-1;++i){const o=Ug[Gr[i]],d=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-t)/(d*o.size))<=a)return Gr[i]}return Gr[n-1]}function HF(e,t,r,a,n){for(let i=Gr.length-1;i>=Gr.indexOf(r);i--){const o=Gr[i];if(Ug[o].common&&e._adapter.diff(n,a,o)>=t-1)return o}return Gr[r?Gr.indexOf(r):0]}function WF(e){for(let t=Gr.indexOf(e)+1,r=Gr.length;t<r;++t)if(Ug[Gr[t]].common)return Gr[t]}function r1(e,t,r){if(!r)e[t]=!0;else if(r.length){const{lo:a,hi:n}=fb(r,t),i=r[a]>=t?r[a]:r[n];e[i]=!0}}function qF(e,t,r,a){const n=e._adapter,i=+n.startOf(t[0].value,a),o=t[t.length-1].value;let d,c;for(d=i;d<=o;d=+n.add(d,1,a))c=r[d],c>=0&&(t[c].major=!0);return t}function s1(e,t,r){const a=[],n={},i=t.length;let o,d;for(o=0;o<i;++o)d=t[o],n[d]=o,a.push({value:d,major:!1});return i===0||!r?a:qF(e,a,n,r)}class Bm extends gl{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const a=t.time||(t.time={}),n=this._adapter=new JO._date(t.adapters.date);n.init(r),Sd(a.displayFormats,n.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:e1(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,a=t.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:d}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!d&&!isNaN(h.max)&&(i=Math.max(i,h.max))}(!o||!d)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=Ds(n)&&!isNaN(n)?n:+r.startOf(Date.now(),a),i=Ds(i)&&!isNaN(i)?i:+r.endOf(Date.now(),a)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],a=t[t.length-1]),{min:r,max:a}}buildTicks(){const t=this.options,r=t.time,a=t.ticks,n=a.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,d=yD(n,i,o);return this._unit=r.unit||(a.autoSkip?t1(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):HF(this,d.length,r.minUnit,this.min,this.max)),this._majorUnit=!a.major.enabled||this._unit==="year"?void 0:WF(this._unit),this.initOffsets(n),t.reverse&&d.reverse(),s1(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,a=0,n,i;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?r=1-n:r=(this.getDecimalForValue(t[1])-n)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?a=i:a=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=Lr(r,0,o),a=Lr(a,0,o),this._offsets={start:r,end:a,factor:1/(r+1+a)}}_generate(){const t=this._adapter,r=this.min,a=this.max,n=this.options,i=n.time,o=i.unit||t1(i.minUnit,r,a,this._getLabelCapacity(r)),d=Xe(n.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,h=gc(c)||c===!0,m={};let g=r,p,k;if(h&&(g=+t.startOf(g,"isoWeek",c)),g=+t.startOf(g,h?"day":o),t.diff(a,r,o)>1e5*d)throw new Error(r+" and "+a+" are too far apart with stepSize of "+d+" "+o);const x=n.ticks.source==="data"&&this.getDataTimestamps();for(p=g,k=0;p<a;p=+t.add(p,d,o),k++)r1(m,p,x);return(p===a||n.bounds==="ticks"||k===1)&&r1(m,p,x),Object.keys(m).sort(Qj).map(j=>+j)}getLabelForValue(t){const r=this._adapter,a=this.options.time;return a.tooltipFormat?r.format(t,a.tooltipFormat):r.format(t,a.displayFormats.datetime)}format(t,r){const n=this.options.time.displayFormats,i=this._unit,o=r||n[i];return this._adapter.format(t,o)}_tickFormatFunction(t,r,a,n){const i=this.options,o=i.ticks.callback;if(o)return _t(o,[t,r,a],this);const d=i.time.displayFormats,c=this._unit,h=this._majorUnit,m=c&&d[c],g=h&&d[h],p=a[r],k=h&&g&&p&&p.major;return this._adapter.format(t,n||(k?g:m))}generateTickLabels(t){let r,a,n;for(r=0,a=t.length;r<a;++r)n=t[r],n.label=this._tickFormatFunction(n.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,a=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+a)*r.factor)}getValueForPixel(t){const r=this._offsets,a=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+a*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,a=this.ctx.measureText(t).width,n=Pi(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),o=Math.sin(n),d=this._resolveTickFontOptions(0).size;return{w:a*i+d*o,h:a*o+d*i}}_getLabelCapacity(t){const r=this.options.time,a=r.displayFormats,n=a[r.unit]||a.millisecond,i=this._tickFormatFunction(t,0,s1(this,[t],this._majorUnit),n),o=this._getLabelSize(i),d=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return d>0?d:1}getDataTimestamps(){let t=this._cache.data||[],r,a;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,a=n.length;r<a;++r)t=t.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,a;if(t.length)return t;const n=this.getLabels();for(r=0,a=n.length;r<a;++r)t.push(e1(this,n[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return t4(t.sort(Qj))}}Be(Bm,"id","time"),Be(Bm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ou(e,t,r){let a=0,n=e.length-1,i,o,d,c;r?(t>=e[a].pos&&t<=e[n].pos&&({lo:a,hi:n}=Ei(e,"pos",t)),{pos:i,time:d}=e[a],{pos:o,time:c}=e[n]):(t>=e[a].time&&t<=e[n].time&&({lo:a,hi:n}=Ei(e,"time",t)),{time:i,pos:d}=e[a],{time:o,pos:c}=e[n]);const h=o-i;return h?d+(c-d)*(t-i)/h:d}class a1 extends Bm{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=Ou(r,this.min),this._tableRange=Ou(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:a}=this,n=[],i=[];let o,d,c,h,m;for(o=0,d=t.length;o<d;++o)h=t[o],h>=r&&h<=a&&n.push(h);if(n.length<2)return[{time:r,pos:0},{time:a,pos:1}];for(o=0,d=n.length;o<d;++o)m=n[o+1],c=n[o-1],h=n[o],Math.round((m+c)/2)!==h&&i.push({time:h,pos:o/(d-1)});return i}_generate(){const t=this.min,r=this.max;let a=super.getDataTimestamps();return(!a.includes(t)||!a.length)&&a.splice(0,0,t),(!a.includes(r)||a.length===1)&&a.push(r),a.sort((n,i)=>n-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),a=this.getLabelTimestamps();return r.length&&a.length?t=this.normalize(r.concat(a)):t=r.length?r:a,t=this._cache.all=t,t}getDecimalForValue(t){return(Ou(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,a=this.getDecimalForPixel(t)/r.factor-r.end;return Ou(this._table,a*this._tableRange+this._minPos,!0)}}Be(a1,"id","timeseries"),Be(a1,"defaults",Bm.defaults);const O4="label";function n1(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function KF(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function F4(e,t){e.labels=t}function B4(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O4;const a=[];e.datasets=t.map(n=>{const i=e.datasets.find(o=>o[r]===n[r]);return!i||!n.data||a.includes(i)?{...n}:(a.push(i),Object.assign(i,n),i)})}function GF(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:O4;const r={labels:[],datasets:[]};return F4(r,e.labels),B4(r,e.datasets,t),r}function ZF(e,t){const{height:r=150,width:a=300,redraw:n=!1,datasetIdKey:i,type:o,data:d,options:c,plugins:h=[],fallbackContent:m,updateMode:g,...p}=e,k=_.useRef(null),x=_.useRef(null),j=()=>{k.current&&(x.current=new Ac(k.current,{type:o,data:GF(d,i),options:c&&{...c},plugins:h}),n1(t,x.current))},y=()=>{n1(t,null),x.current&&(x.current.destroy(),x.current=null)};return _.useEffect(()=>{!n&&x.current&&c&&KF(x.current,c)},[n,c]),_.useEffect(()=>{!n&&x.current&&F4(x.current.config.data,d.labels)},[n,d.labels]),_.useEffect(()=>{!n&&x.current&&d.datasets&&B4(x.current.config.data,d.datasets,i)},[n,d.datasets]),_.useEffect(()=>{x.current&&(n?(y(),setTimeout(j)):x.current.update(g))},[n,c,d.labels,d.datasets,g]),_.useEffect(()=>{x.current&&(y(),setTimeout(j))},[o]),_.useEffect(()=>(j(),()=>y()),[]),Tt.createElement("canvas",{ref:k,role:"img",height:r,width:a,...p},m)}const YF=_.forwardRef(ZF);function z4(e,t){return Ac.register(t),_.forwardRef((r,a)=>Tt.createElement(YF,{...r,ref:a,type:e}))}const $4=z4("line",Ah),JF=z4("bar",Lh),Ld=Ne("analytics/fetchAnalytics",async(e="30d",{rejectWithValue:t})=>{var r,a,n;try{const i=await ce.get(`/analytics?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch analytics data")}}),Ad=Ne("analytics/fetchRevenueTrend",async(e="30d",{rejectWithValue:t})=>{var r,a,n;try{const i=await ce.get(`/analytics/revenue-trend?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to fetch revenue trend data")}}),XF={metrics:{revenue:{current:0,previous:0,growth:0},orders:{current:0,previous:0,growth:0},customers:{current:0,previous:0,growth:0},products:{current:0,previous:0,growth:0}},orderStatusDistribution:[],topProducts:[],revenueTrend:[],timeRange:"30d",period:{current:{start:null,end:null},previous:{start:null,end:null}},isLoading:!1,error:null},QF=Vr({name:"analytics",initialState:XF,reducers:{clearError:e=>{e.error=null},setTimeRange:(e,t)=>{e.timeRange=t.payload}},extraReducers:e=>{e.addCase(Ld.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ld.fulfilled,(t,r)=>{t.isLoading=!1,t.metrics=r.payload.metrics,t.orderStatusDistribution=r.payload.orderStatusDistribution,t.topProducts=r.payload.topProducts,t.timeRange=r.payload.timeRange,t.period=r.payload.period}).addCase(Ld.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ad.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ad.fulfilled,(t,r)=>{t.isLoading=!1,t.revenueTrend=r.payload}).addCase(Ad.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),e9=QF.reducer;Ac.register(Om,Fm,Id,Po,Td,M4,D4,L4,Co);const t9=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(y=>y.auth),{metrics:a,orderStatusDistribution:n,topProducts:i,revenueTrend:o,isLoading:d}=Se(y=>y.analytics),[c,h]=_.useState("30d");_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(Ld(c)),t(Ad(c)))},[t,r,c]);const m=y=>{h(y),t(Ld(y)),t(Ad(y))},g=y=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(y),p=y=>y>=0?"text-green-600":"text-red-600",k=y=>y>=0?pa:nx,x=({title:y,value:b,growth:w,icon:N,color:P="blue"})=>{const C=k(w),A=p(w);return s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:y}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:b}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsx(C,{className:`h-4 w-4 mr-1 ${A}`}),s.jsxs("span",{className:`text-sm font-medium ${A}`,children:[w>=0?"+":"",w.toFixed(1),"%"]}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminAnalytics.vsPreviousPeriod")})]})]}),s.jsx("div",{className:`p-3 rounded-lg bg-${P}-100 dark:bg-${P}-900/20`,children:s.jsx(N,{className:`h-6 w-6 text-${P}-600 dark:text-${P}-400`})})]})})},j=[{value:"7d",label:e("adminAnalytics.last7Days")},{value:"30d",label:e("adminAnalytics.last30Days")},{value:"90d",label:e("adminAnalytics.last90Days")},{value:"1y",label:e("adminAnalytics.lastYear")}];return(r==null?void 0:r.role)!=="ADMIN"?s.jsxs(Ae,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:Hi,title:e("adminAnalytics.analyticsDashboard"),description:e("adminAnalytics.businessInsights"),actions:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:c,onChange:y=>m(y.target.value),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:j.map(y=>s.jsx("option",{value:y.value,children:y.label},y.value))}),s.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ia,{className:"h-4 w-4 mr-2"}),e("adminAnalytics.export")]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-10",children:d?s.jsxs("div",{className:"col-span-full flex items-center justify-center py-12",children:[s.jsx(At,{className:"h-8 w-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]}):s.jsxs(s.Fragment,{children:[s.jsx(x,{title:e("adminAnalytics.totalRevenue"),value:g(a.revenue.current),previous:a.revenue.previous,growth:a.revenue.growth,icon:Wi,color:"green"}),s.jsx(x,{title:e("adminAnalytics.totalOrders"),value:a.orders.current.toLocaleString(),previous:a.orders.previous,growth:a.orders.growth,icon:Mr,color:"blue"}),s.jsx(x,{title:e("adminAnalytics.totalCustomers"),value:a.customers.current.toLocaleString(),previous:a.customers.previous,growth:a.customers.growth,icon:_a,color:"purple"}),s.jsx(x,{title:e("adminAnalytics.totalProducts"),value:a.products.current,previous:a.products.previous,growth:a.products.growth,icon:Ye,color:"indigo"})]})}),!d&&a.vat&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/20 rounded-xl border border-blue-200 dark:border-blue-700 shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:e("adminAnalytics.totalVat")||"Total VAT"}),s.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-2",children:g(a.vat.total)}),s.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[(a.vat.total/a.revenue.current*100).toFixed(1),"% ",e("adminAnalytics.ofRevenue")||"of revenue"]})]}),s.jsx("div",{className:"bg-blue-200 dark:bg-blue-700 rounded-full p-3",children:s.jsx(Wi,{className:"h-6 w-6 text-blue-700 dark:text-blue-200"})})]})}),s.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/20 rounded-xl border border-indigo-200 dark:border-indigo-700 shadow-sm p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-indigo-700 dark:text-indigo-300",children:e("adminAnalytics.revenueBeforeVat")||"Revenue (before VAT)"}),s.jsx("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100 mt-2",children:g(a.vat.beforeVat)}),s.jsx("p",{className:"text-xs text-indigo-600 dark:text-indigo-400 mt-1",children:e("adminAnalytics.netRevenue")||"Net revenue"})]}),s.jsx("div",{className:"bg-indigo-200 dark:bg-indigo-700 rounded-full p-3",children:s.jsx(pa,{className:"h-6 w-6 text-indigo-700 dark:text-indigo-200"})})]})}),a.vat.profiles&&a.vat.profiles.map((y,b)=>{var P,C,A,E;const w=[{bg:"from-purple-50 to-purple-100",darkBg:"dark:from-purple-900/30 dark:to-purple-800/20",border:"border-purple-200 dark:border-purple-700",text:"text-purple-700 dark:text-purple-300",darkText:"text-purple-900 dark:text-purple-100",iconBg:"bg-purple-200 dark:bg-purple-700",icon:"text-purple-700 dark:text-purple-200"},{bg:"from-green-50 to-green-100",darkBg:"dark:from-green-900/30 dark:to-green-800/20",border:"border-green-200 dark:border-green-700",text:"text-green-700 dark:text-green-300",darkText:"text-green-900 dark:text-green-100",iconBg:"bg-green-200 dark:bg-green-700",icon:"text-green-700 dark:text-green-200"},{bg:"from-orange-50 to-orange-100",darkBg:"dark:from-orange-900/30 dark:to-orange-800/20",border:"border-orange-200 dark:border-orange-700",text:"text-orange-700 dark:text-orange-300",darkText:"text-orange-900 dark:text-orange-100",iconBg:"bg-orange-200 dark:bg-orange-700",icon:"text-orange-700 dark:text-orange-200"},{bg:"from-pink-50 to-pink-100",darkBg:"dark:from-pink-900/30 dark:to-pink-800/20",border:"border-pink-200 dark:border-pink-700",text:"text-pink-700 dark:text-pink-300",darkText:"text-pink-900 dark:text-pink-100",iconBg:"bg-pink-200 dark:bg-pink-700",icon:"text-pink-700 dark:text-pink-200"},{bg:"from-cyan-50 to-cyan-100",darkBg:"dark:from-cyan-900/30 dark:to-cyan-800/20",border:"border-cyan-200 dark:border-cyan-700",text:"text-cyan-700 dark:text-cyan-300",darkText:"text-cyan-900 dark:text-cyan-100",iconBg:"bg-cyan-200 dark:bg-cyan-700",icon:"text-cyan-700 dark:text-cyan-200"}],N=w[b%w.length];return s.jsx("div",{className:`bg-gradient-to-br ${N.bg} ${N.darkBg} rounded-xl border ${N.border} shadow-sm p-6`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:`text-sm font-medium ${N.text}`,children:[((P=y.profile)==null?void 0:P.nameIs)||((C=y.profile)==null?void 0:C.name)," (",(A=y.profile)==null?void 0:A.vatRate,"%)"]}),s.jsx("p",{className:`text-2xl font-bold ${N.darkText} mt-2`,children:g(y.total)}),s.jsxs("p",{className:`text-xs ${N.text.replace("700","600").replace("300","400")} mt-1`,children:[y.percentage.toFixed(1),"% ",e("adminAnalytics.ofVat")||"of VAT"]})]}),s.jsx("div",{className:`${N.iconBg} rounded-full p-3`,children:s.jsx(Hi,{className:`h-6 w-6 ${N.icon}`})})]})},((E=y.profile)==null?void 0:E.id)||b)})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.revenueTrend")})}),s.jsx("div",{className:"p-6",children:d?s.jsx("div",{className:"h-80 flex items-center justify-center",children:s.jsx(At,{className:"h-8 w-8 animate-spin text-blue-600"})}):o!=null&&o.dailyRevenue&&o.dailyRevenue.length>0?s.jsx("div",{className:"h-80",children:s.jsx($4,{data:{labels:o.dailyRevenue.map(y=>new Date(y.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminAnalytics.revenue"),data:o.dailyRevenue.map(y=>parseFloat(y.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:y=>g(y.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:y=>g(y)}}}}})}):s.jsx("div",{className:"h-80 flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx(pa,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noRevenueData")})]})})})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.orderStatusDistribution")})}),s.jsx("div",{className:"p-6",children:d?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx(At,{className:"h-6 w-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]}):n&&n.length>0?s.jsx("div",{className:"h-80",children:s.jsx(JF,{data:{labels:n.map(y=>({DELIVERED:e("adminAnalytics.delivered"),SHIPPED:e("adminAnalytics.shipped"),PROCESSING:e("adminAnalytics.processing"),PENDING:e("adminAnalytics.pending"),CANCELLED:e("adminAnalytics.cancelled")})[y.status]||y.status),datasets:[{label:e("adminAnalytics.orders"),data:n.map(y=>y.count||0),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(245, 158, 11, 0.8)","rgba(156, 163, 175, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(59, 130, 246)","rgb(245, 158, 11)","rgb(156, 163, 175)","rgb(239, 68, 68)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:y=>`${y.parsed.y} ${e("adminAnalytics.orders").toLowerCase()}`}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})}):s.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noData")})})]})]}),s.jsx("div",{className:"mt-8",children:s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics.topPerformingProducts")})}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.product")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.category")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.sales")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.revenue")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics.growth")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(At,{className:"h-6 w-6 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics.loading")})]})})}):i.length>0?i.map((y,b)=>{var w,N,P,C,A;return s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:((w=y.product)==null?void 0:w.name)||e("adminAnalytics.unknownProduct")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:((P=(N=y.product)==null?void 0:N.category)==null?void 0:P.name)||e("adminAnalytics.unknownCategory")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((C=y._sum)==null?void 0:C.quantity)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:g(((A=y._sum)==null?void 0:A.price)||0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:e("adminAnalytics.topPerformer")})})]},y.productId||b)}):s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:e("adminAnalytics.noProducts")})})})]})})})]})})]})})]})})},r9=()=>{const{t:e}=je(),{user:t}=Se(C=>C.auth),[r,a]=_.useState([]),[n,i]=_.useState(!0),[o,d]=_.useState(""),[c,h]=_.useState(""),[m,g]=_.useState(null),[p,k]=_.useState({page:1,limit:20,total:0,pages:0}),x=async(C=1,A="",E="")=>{var F,I,D;try{i(!0);const Y=new URLSearchParams({page:C.toString(),limit:"20"});A&&Y.append("search",A),E&&Y.append("status",E);const R=await ce.get("/customers?${params","toString()}");console.log("Customers API response:",R),console.log("Response data:",R.data),console.log("Customers array:",((F=R.data)==null?void 0:F.customers)||R.customers),a(((I=R.data)==null?void 0:I.customers)||R.customers||[]),k(((D=R.data)==null?void 0:D.pagination)||R.pagination||{page:1,limit:20,total:0,pages:0})}catch(Y){console.error("Error fetching customers:",Y),a([]),k({page:1,limit:20,total:0,pages:0})}finally{i(!1)}};_.useEffect(()=>{(t==null?void 0:t.role)==="ADMIN"&&x()},[t]),_.useEffect(()=>{if((t==null?void 0:t.role)==="ADMIN"){const C=setTimeout(()=>{x(1,o,c)},300);return()=>clearTimeout(C)}},[o,c,t]);const j=C=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(C),y=C=>new Date(C).toLocaleDateString("is-IS"),b=C=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",vip:"bg-purple-100 text-purple-800",new:"bg-blue-100 text-blue-800"})[C]||"bg-gray-100 text-gray-800",w=C=>{const A=`adminCustomers.status${C.charAt(0).toUpperCase()}${C.slice(1)}`;return e(A)},N=C=>{d(C.target.value)},P=C=>{h(C.target.value)};return(t==null?void 0:t.role)!=="ADMIN"?s.jsxs(Ae,{children:[s.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600",children:e("adminPage.noPermission")})]})})})]}):s.jsxs(Ae,{children:[s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:_a,title:e("adminCustomers.customerManagement"),description:e("adminCustomers.manageCustomerInfo"),actions:s.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ia,{className:"h-4 w-4 mr-2"}),e("adminCustomers.export")]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminCustomers.searchCustomers"),value:o,onChange:N,className:"input pl-10 pr-3"})]}),s.jsxs("select",{value:c,onChange:P,className:"input",children:[s.jsx("option",{value:"",children:e("adminCustomers.allStatus")}),s.jsx("option",{value:"active",children:e("adminCustomers.active")}),s.jsx("option",{value:"inactive",children:e("adminCustomers.inactive")}),s.jsx("option",{value:"vip",children:e("adminCustomers.vip")}),s.jsx("option",{value:"new",children:e("adminCustomers.new")})]}),s.jsxs("div",{className:"flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-md px-4 py-2",children:[s.jsx(_a,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("adminCustomers.customersCount",{filtered:r.length,total:p.total})})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminCustomers.customerList")})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.customer")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.contact")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.orders")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.totalSpent")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.status")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.lastOrder")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(At,{className:"h-6 w-6 animate-spin text-gray-400 mr-2"}),s.jsx("span",{className:"text-gray-500",children:e("common.loading")})]})})}):r.map(C=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:C.name.split(" ").map(A=>A[0]).join("")})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:C.name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("adminCustomers.idLabel")," ",C.id]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(os,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),C.email]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(qi,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),C.phone]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:C.totalOrders}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:j(C.totalSpent)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(C.status)}`,children:w(C.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:y(C.lastOrder)}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[s.jsx("button",{onClick:()=>g(C),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3 transition-colors duration-200",children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsx("button",{className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:s.jsx(sS,{className:"h-4 w-4"})})]})]},C.id))})]})})]}),!n&&r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(_a,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminCustomers.noCustomersFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminCustomers.adjustSearchCriteria")})]})]})})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e("adminCustomers.customerDetails")}),s.jsxs("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600",children:[s.jsx("span",{className:"sr-only",children:e("adminCustomers.close")}),s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-medium text-gray-700",children:m.name.split(" ").map(C=>C[0]).join("")})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:m.name}),s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.customerSince",{date:y(m.joinDate)})})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.contactInformation")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(os,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.email})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(qi,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.phone})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ta,{className:"h-4 w-4 text-gray-400 mr-3"}),s.jsx("span",{className:"text-sm text-gray-900",children:m.address})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.orderStatistics")}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.totalOrders")}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.totalOrders})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.totalSpent")}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j(m.totalSpent)})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers.status")}),s.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${b(m.status)}`,children:w(m.status)})]})]})]})})]})},Md=Ne("reports/fetchReports",async({reportType:e,timeRange:t,startDate:r,endDate:a},{rejectWithValue:n})=>{var i,o,d,c,h,m;try{const g=new URLSearchParams({timeRange:t,...r&&{startDate:r},...a&&{endDate:a}});let p;switch(e){case"sales":return p=await ce.get(`/reports/sales?${g}`),{sales:((i=p.data)==null?void 0:i.data)||p.data};case"products":return p=await ce.get(`/reports/inventory?${g}`),{products:((o=p.data)==null?void 0:o.data)||p.data};case"customers":return p=await ce.get(`/reports/customers?${g}`),{customers:((d=p.data)==null?void 0:d.data)||p.data};case"orders":return p=await ce.get(`/analytics?timeRange=${t}`),{orders:((c=p.data)==null?void 0:c.data)||p.data};default:return{}}}catch(g){return n(((m=(h=g.response)==null?void 0:h.data)==null?void 0:m.message)||"Failed to fetch reports data")}}),Pf=Ne("reports/fetchSalesReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:a})=>{var n,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await ce.get(`/reports/sales?${d}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(d){return a(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch sales report")}}),Ef=Ne("reports/fetchProductsReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:a})=>{var n,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await ce.get(`/reports/products?${d}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(d){return a(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch products report")}}),If=Ne("reports/fetchCustomersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:a})=>{var n,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await ce.get(`/reports/customers?${d}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(d){return a(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch customers report")}}),Tf=Ne("reports/fetchOrdersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:a})=>{var n,i,o;try{const d=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await ce.get(`/reports/orders?${d}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(d){return a(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch orders report")}}),s9={sales:{totalRevenue:0,totalOrders:0,averageOrderValue:0,growthRate:0,dailySales:[]},products:{totalProducts:0,activeProducts:0,outOfStock:0,topSelling:[],categoryBreakdown:[]},customers:{totalCustomers:0,newCustomers:0,returningCustomers:0,averageOrderFrequency:0,customerSegments:[],topCustomers:[]},orders:{totalOrders:0,completedOrders:0,pendingOrders:0,cancelledOrders:0,averageProcessingTime:0,deliveryMethods:[],orderStatusTrend:[]},currentReport:"sales",timeRange:"last30days",dateRange:{start:null,end:null},isLoading:!1,error:null},U4=Vr({name:"reports",initialState:s9,reducers:{clearError:e=>{e.error=null},setCurrentReport:(e,t)=>{e.currentReport=t.payload},setTimeRange:(e,t)=>{e.timeRange=t.payload},setDateRange:(e,t)=>{e.dateRange=t.payload}},extraReducers:e=>{e.addCase(Md.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Md.fulfilled,(t,r)=>{t.isLoading=!1;const{sales:a,products:n,customers:i,orders:o}=r.payload;a&&(t.sales=a),n&&(t.products=n),i&&(t.customers=i),o&&(t.orders=o)}).addCase(Md.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Pf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Pf.fulfilled,(t,r)=>{t.isLoading=!1,t.sales=r.payload}).addCase(Pf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ef.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ef.fulfilled,(t,r)=>{t.isLoading=!1,t.products=r.payload}).addCase(Ef.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(If.pending,t=>{t.isLoading=!0,t.error=null}).addCase(If.fulfilled,(t,r)=>{t.isLoading=!1,t.customers=r.payload}).addCase(If.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Tf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Tf.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload}).addCase(Tf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setCurrentReport:a9,setTimeRange:n9,setDateRange:i1}=U4.actions,i9=U4.reducer;Ac.register(Om,Fm,Id,Po,Td,M4,D4,L4,Co);const o9=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(A=>A.auth),{sales:a,products:n,customers:i,orders:o,currentReport:d,timeRange:c,dateRange:h,isLoading:m}=Se(A=>A.reports);_.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(Md({reportType:d,timeRange:c,startDate:h.start,endDate:h.end}))},[t,r,d,c,h]);const g=A=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(A),p=A=>new Date(A).toLocaleDateString("is-IS"),k=A=>A>=0?s.jsx(pa,{className:"h-4 w-4 text-green-500"}):s.jsx(nx,{className:"h-4 w-4 text-red-500"}),x=A=>A>=0?"text-green-600":"text-red-600",j=A=>{console.log(`Exporting ${d} report as ${A}`);const E={sales:a,products:n,customers:i,orders:o}[d],F=JSON.stringify(E,null,2),I="data:application/json;charset=utf-8,"+encodeURIComponent(F),D=`${d}_report_${new Date().toISOString().split("T")[0]}.${A}`,Y=document.createElement("a");Y.setAttribute("href",I),Y.setAttribute("download",D),Y.click()},y=({title:A,value:E,subtitle:F,icon:I,growth:D,color:Y="blue"})=>s.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:A}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:E}),F&&s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:F}),D!==void 0&&s.jsxs("div",{className:"flex items-center mt-2",children:[k(D),s.jsxs("span",{className:`text-sm font-medium ml-1 ${x(D)}`,children:[D>=0?"+":"",D,"%"]}),s.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminReports.vsPreviousPeriod")})]})]}),s.jsx("div",{className:`p-3 rounded-lg bg-${Y}-100 dark:bg-${Y}-900/20`,children:s.jsx(I,{className:`h-6 w-6 text-${Y}-600 dark:text-${Y}-400`})})]})}),b=({title:A,children:E,actions:F})=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:A}),F&&s.jsx("div",{className:"flex items-center space-x-2",children:F})]})}),s.jsx("div",{className:"p-8",children:E})]}),w=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(y,{title:e("adminReports.totalRevenue"),value:g(a.totalRevenue||0),icon:Wi,growth:a.growthRate,color:"green"}),s.jsx(y,{title:e("adminReports.totalOrders"),value:(a.totalOrders||0).toLocaleString(),icon:Mr,growth:8.3,color:"blue"}),s.jsx(y,{title:e("adminReports.averageOrderValue"),value:g(a.averageOrderValue||0),icon:pa,growth:5.2,color:"purple"}),s.jsx(y,{title:e("adminReports.growthRate"),value:`${a.growthRate||0}%`,icon:Hi,growth:a.growthRate,color:"indigo"})]}),s.jsx(b,{title:e("adminReports.dailySalesTrend"),actions:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:s.jsx(Yt,{className:"h-4 w-4"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:s.jsx(Ia,{className:"h-4 w-4"})})]}),children:a.dailySales&&a.dailySales.length>0?s.jsx("div",{className:"h-80",children:s.jsx($4,{data:{labels:a.dailySales.map(A=>new Date(A.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminReports.revenue"),data:a.dailySales.map(A=>parseFloat(A.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:A=>g(A.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:A=>g(A)}}}}})}):s.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:e("adminReports.noData")})})]}),N=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(y,{title:e("adminReports.totalProducts"),value:n.totalProducts,icon:Ye,growth:15.2,color:"blue"}),s.jsx(y,{title:e("adminReports.activeProducts"),value:n.activeProducts,subtitle:`${Math.round(n.activeProducts/n.totalProducts*100)}% ${e("adminReports.ofTotal")}`,icon:Ct,color:"green"}),s.jsx(y,{title:e("adminReports.outOfStock"),value:n.outOfStock,subtitle:`${Math.round(n.outOfStock/n.totalProducts*100)}% ${e("adminReports.ofTotal")}`,icon:lt,color:"red"})]}),s.jsx(b,{title:e("adminReports.topSellingProducts"),children:s.jsx("div",{className:"space-y-4",children:n.topSelling.length>0?n.topSelling.map((A,E)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-blue-600",children:E+1})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[A.sales," sales"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g(A.revenue)}),s.jsxs("div",{className:"flex items-center",children:[k(A.growth),s.jsxs("span",{className:`text-xs ml-1 ${x(A.growth)}`,children:["+",A.growth,"%"]})]})]})]},A.name)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(b,{title:e("adminReports.revenueByCategory"),children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.categoryBreakdown.length>0?n.categoryBreakdown.map(A=>s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:A.category}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:A.count}),s.jsx("p",{className:"text-xs text-gray-500",children:e("adminReports.products")}),s.jsx("p",{className:"text-sm font-medium text-blue-600 mt-1",children:g(A.revenue)})]},A.category)):s.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]}),P=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(y,{title:e("adminReports.totalCustomers"),value:i.totalCustomers,icon:_a,growth:6.7,color:"blue"}),s.jsx(y,{title:e("adminReports.newCustomers"),value:i.newCustomers,subtitle:e("adminReports.thisPeriod"),icon:pa,growth:12.3,color:"green"}),s.jsx(y,{title:e("adminReports.avgOrderFrequency"),value:i.averageOrderFrequency,subtitle:e("adminReports.ordersPerCustomer"),icon:Mr,growth:-2.1,color:"purple"})]}),s.jsx(b,{title:e("adminReports.customerSegmentation"),children:s.jsx("div",{className:"space-y-4",children:i.customerSegments.length>0?i.customerSegments.map(A=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.segment})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${A.percentage}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 w-12",children:A.count}),s.jsxs("span",{className:"text-sm text-gray-500 w-12",children:[A.percentage,"%"]})]})]},A.segment)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(b,{title:e("adminReports.topCustomersByRevenue"),children:s.jsx("div",{className:"space-y-4",children:i.topCustomers.length>0?i.topCustomers.map((A,E)=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-green-600",children:E+1})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[A.orders," ",e("adminReports.orders")]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:g(A.totalSpent)}),s.jsxs("p",{className:"text-xs text-gray-500",children:[e("adminReports.last"),": ",p(A.lastOrder)]})]})]},A.name)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]}),C=()=>s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(y,{title:e("adminReports.totalOrders"),value:o.totalOrders,icon:Mr,growth:8.3,color:"blue"}),s.jsx(y,{title:e("adminReports.completedOrders"),value:o.completedOrders,subtitle:`${Math.round(o.completedOrders/o.totalOrders*100)}% ${e("adminReports.completionRate")}`,icon:Ct,growth:12.1,color:"green"}),s.jsx(y,{title:e("adminReports.pendingOrders"),value:o.pendingOrders,icon:nr,growth:-15.2,color:"yellow"}),s.jsx(y,{title:e("adminReports.avgProcessingTime"),value:`${o.averageProcessingTime} ${e("adminReports.days")}`,icon:pa,growth:-5.3,color:"purple"})]}),s.jsx(b,{title:e("adminReports.orderDistributionByDeliveryMethod"),children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.deliveryMethods.length>0?o.deliveryMethods.map(A=>s.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:A.method==="HOME_DELIVERY"?e("adminPage.homeDelivery"):e("ordersPage.pickup")}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:A.count}),s.jsxs("p",{className:"text-sm text-gray-500",children:[A.percentage,"% ",e("adminReports.ofTotalOrders")]})]},A.method)):s.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports.noData")})})}),s.jsx(b,{title:e("adminReports.orderStatusDistribution"),children:s.jsx("div",{className:"space-y-4",children:o.orderStatusTrend.length>0?o.orderStatusTrend.map(A=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-4 h-4 rounded-full mr-3 ${A.status==="delivered"?"bg-green-500":A.status==="shipped"?"bg-blue-500":A.status==="confirmed"?"bg-yellow-500":A.status==="pending"?"bg-orange-500":"bg-red-500"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:A.status})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:s.jsx("div",{className:`h-2 rounded-full ${A.status==="delivered"?"bg-green-500":A.status==="shipped"?"bg-blue-500":A.status==="confirmed"?"bg-yellow-500":A.status==="pending"?"bg-orange-500":"bg-red-500"}`,style:{width:`${A.count/o.totalOrders*100}%`}})}),s.jsx("span",{className:"text-sm text-gray-500 w-12",children:A.count}),s.jsx("div",{className:"flex items-center ml-2",children:A.trend==="up"?s.jsx(pa,{className:"h-4 w-4 text-green-500"}):A.trend==="down"?s.jsx(nx,{className:"h-4 w-4 text-red-500"}):s.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})})]})]},A.status)):s.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports.noData")})})})]});return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):m?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:rx,title:e("adminSidebar.reportsAnalytics"),description:e("adminSidebar.comprehensiveInsights"),actions:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>j("pdf"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(rx,{className:"h-4 w-4 mr-2"}),e("adminReports.exportPDF")]}),s.jsxs("button",{onClick:()=>j("csv"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ia,{className:"h-4 w-4 mr-2"}),e("adminReports.exportCSV")]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.reportType")}),s.jsxs("select",{value:d,onChange:A=>t(a9(A.target.value)),className:"input w-full",children:[s.jsx("option",{value:"sales",children:e("adminReports.salesReport")}),s.jsx("option",{value:"products",children:e("adminReports.productsReport")}),s.jsx("option",{value:"customers",children:e("adminReports.customersReport")}),s.jsx("option",{value:"orders",children:e("adminReports.ordersReport")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.timePeriod")}),s.jsxs("select",{value:c,onChange:A=>t(n9(A.target.value)),className:"input w-full",children:[s.jsx("option",{value:"last7days",children:e("adminReports.last7Days")}),s.jsx("option",{value:"last30days",children:e("adminReports.last30Days")}),s.jsx("option",{value:"last90days",children:e("adminReports.last90Days")}),s.jsx("option",{value:"lastyear",children:e("adminReports.lastYear")}),s.jsx("option",{value:"custom",children:e("adminReports.customRange")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.startDate")}),s.jsx("input",{type:"date",value:h.start||"",onChange:A=>t(i1({...h,start:A.target.value})),className:"input w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports.endDate")}),s.jsx("input",{type:"date",value:h.end||"",onChange:A=>t(i1({...h,end:A.target.value})),className:"input w-full"})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[s.jsxs("button",{onClick:()=>{t(Md({reportType:d,timeRange:c,startDate:h.start,endDate:h.end}))},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(ht,{className:"h-4 w-4 mr-2"}),e("adminReports.refreshData")]}),s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[s.jsx(Qa,{className:"h-4 w-4"}),s.jsxs("span",{children:["Last updated: ",new Date().toLocaleString("is-IS")]})]})]})]}),s.jsxs("div",{className:"space-y-8",children:[d==="sales"&&s.jsx(w,{}),d==="products"&&s.jsx(N,{}),d==="customers"&&s.jsx(P,{}),d==="orders"&&s.jsx(C,{})]})]})})]})})},l9=()=>{const{t:e,currentLanguage:t}=je(),{user:r}=Se(O=>O.auth),[a,n]=_.useState(!0),[i,o]=_.useState([]),[d,c]=_.useState([]),[h,m]=_.useState(""),[g,p]=_.useState(""),[k,x]=_.useState(""),[j,y]=_.useState([]),[b,w]=_.useState(!1),[N,P]=_.useState({email:!0,push:!0,sms:!1,orderUpdates:!0,systemAlerts:!0,marketing:!1,securityAlerts:!0}),C=(O,K)=>{if(t==="is"&&O.metadata){const V=`${K}Is`;if(O.metadata[V])return O.metadata[V]}return O[K]};_.useEffect(()=>{A()},[]);const A=async()=>{try{n(!0);const O=new URLSearchParams;g&&O.append("status",g),k&&O.append("type",k);const K=await ce.get(`/notifications?${O.toString()}`);let V=[];Array.isArray(K)?V=K:Array.isArray(K.data)?V=K.data:K.data&&Array.isArray(K.data.notifications)&&(V=K.data.notifications);const X=V.map(le=>({...le,id:parseInt(le.id),priority:le.priority||"medium",isRead:le.isRead===void 0?!1:le.isRead,isArchived:le.isArchived===void 0?!1:le.isArchived,timestamp:le.createdAt||new Date().toISOString(),metadata:le.metadata||{}}));o(X),c(X)}catch(O){console.error("Error fetching notifications:",O),q.error("Failed to load notifications"),o([]),c([])}finally{n(!1)}};_.useEffect(()=>{let O=i;h&&(O=O.filter(K=>K.title.toLowerCase().includes(h.toLowerCase())||K.message.toLowerCase().includes(h.toLowerCase()))),g&&(g==="unread"?O=O.filter(K=>!K.isRead):g==="read"?O=O.filter(K=>K.isRead):g==="archived"&&(O=O.filter(K=>K.isArchived))),k&&(O=O.filter(K=>K.type===k)),c(O)},[i,h,g,k]);const E=(O,K)=>{const V=`h-5 w-5 ${K==="high"?"text-red-500":K==="medium"?"text-yellow-500":"text-blue-500"}`;switch(O){case"order":return s.jsx(Mr,{className:V});case"payment":return s.jsx(Ea,{className:V});case"delivery":return s.jsx(Ye,{className:V});case"system":return s.jsx(us,{className:V});case"security":return s.jsx(Xa,{className:V});case"marketing":return s.jsx(os,{className:V});default:return s.jsx(wi,{className:V})}},F=O=>{switch(O){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},I=O=>{const K=new Date(O),X=Math.floor((new Date-K)/(1e3*60));return X<1?t==="is"?"N etta":"Just now":X<60?t==="is"?`${X}m san`:`${X}m ago`:X<1440?t==="is"?`${Math.floor(X/60)}h san`:`${Math.floor(X/60)}h ago`:K.toLocaleDateString(t==="is"?"is-IS":"en-US")},D=async O=>{try{await ce.put(`/notifications/${O}/read`),o(K=>K.map(V=>V.id===O?{...V,isRead:!0}:V)),q.success(e("adminNotifications.notificationMarkedRead"))}catch(K){console.error("Error marking as read:",K),q.error("Failed to mark notification as read")}},Y=async O=>{try{await ce.put(`/notifications/${O}/unread`),o(K=>K.map(V=>V.id===O?{...V,isRead:!1}:V)),q.success(e("adminNotifications.notificationMarkedUnread"))}catch(K){console.error("Error marking as unread:",K),q.error("Failed to mark notification as unread")}},R=async O=>{try{await ce.put(`/notifications/${O}/archive`),o(K=>K.map(V=>V.id===O?{...V,isArchived:!0}:V)),q.success(e("adminNotifications.notificationArchived"))}catch(K){console.error("Error archiving notification:",K),q.error("Failed to archive notification")}},Z=async O=>{try{await ce.put(`/notifications/${O}/unarchive`),o(K=>K.map(V=>V.id===O?{...V,isArchived:!1}:V)),q.success(e("adminNotifications.notificationUnarchived"))}catch(K){console.error("Error unarchiving notification:",K),q.error("Failed to unarchive notification")}},T=async O=>{try{await ce.delete(`/notifications/${O}`),o(K=>K.filter(V=>V.id!==O)),q.success(e("adminNotifications.notificationDeleted"))}catch(K){console.error("Error deleting notification:",K),q.error("Failed to delete notification")}},B=async O=>{if(j.length===0){q.error(e("adminNotifications.selectNotificationsFirst"));return}try{switch(O){case"mark-read":await ce.post("/notifications/bulk/read",{ids:j}),o(K=>K.map(V=>j.includes(V.id)?{...V,isRead:!0}:V)),q.success(e("adminNotifications.bulkMarkedRead",{count:j.length}));break;case"mark-unread":await ce.post("/notifications/bulk/unread",{ids:j}),o(K=>K.map(V=>j.includes(V.id)?{...V,isRead:!1}:V)),q.success(e("adminNotifications.bulkMarkedUnread",{count:j.length}));break;case"archive":await ce.post("/notifications/bulk/archive",{ids:j}),o(K=>K.map(V=>j.includes(V.id)?{...V,isArchived:!0}:V)),q.success(e("adminNotifications.bulkArchived",{count:j.length}));break;case"delete":await ce.post("/notifications/bulk/delete",{ids:j}),o(K=>K.filter(V=>!j.includes(V.id))),q.success(e("adminNotifications.bulkDeleted",{count:j.length}));break}y([])}catch(K){console.error("Error performing bulk action:",K),q.error("Failed to perform bulk action")}},W=()=>{j.length===d.length?y([]):y(d.map(O=>O.id))},Q=i.filter(O=>!O.isRead&&!O.isArchived).length,$=i.filter(O=>O.isArchived).length;return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):a?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsxs(Ae,{children:[s.jsx(hr,{icon:wi,title:e("adminNotifications.title"),description:`${Q} ${e("adminNotifications.unread")}  ${$} ${e("adminNotifications.archived")}  ${i.length} ${e("adminNotifications.totalCount")}`,actions:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(us,{className:"h-4 w-4 mr-2"}),e("adminNotifications.settings")]}),s.jsxs("button",{onClick:()=>B("mark-read"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Ct,{className:"h-4 w-4 mr-2"}),e("adminNotifications.markAllRead")]})]})}),s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:e("adminNotifications.searchNotifications"),value:h,onChange:O=>m(O.target.value),className:"input pl-10 w-full"})]}),s.jsxs("select",{value:g,onChange:O=>p(O.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminNotifications.allStatus")}),s.jsx("option",{value:"unread",children:e("adminNotifications.unread")}),s.jsx("option",{value:"read",children:e("adminNotifications.read")}),s.jsx("option",{value:"archived",children:e("adminNotifications.archived")})]}),s.jsxs("select",{value:k,onChange:O=>x(O.target.value),className:"input w-full",children:[s.jsx("option",{value:"",children:e("adminNotifications.allTypes")}),s.jsx("option",{value:"order",children:e("adminNotifications.orders")}),s.jsx("option",{value:"payment",children:e("adminNotifications.payments")}),s.jsx("option",{value:"delivery",children:e("adminNotifications.delivery")}),s.jsx("option",{value:"system",children:e("adminNotifications.system")}),s.jsx("option",{value:"security",children:e("adminNotifications.security")}),s.jsx("option",{value:"marketing",children:e("adminNotifications.marketing")})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:j.length===d.length&&d.length>0,onChange:W,className:"rounded"}),s.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications.selectAll")})]})]}),j.length>0&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 pt-4 border-t border-gray-200",children:[s.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications.selected",{count:j.length})}),s.jsxs("button",{onClick:()=>B("mark-read"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(Ct,{className:"h-4 w-4 mr-1"}),e("adminNotifications.markRead")]}),s.jsxs("button",{onClick:()=>B("mark-unread"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(Er,{className:"h-4 w-4 mr-1"}),e("adminNotifications.markUnread")]}),s.jsxs("button",{onClick:()=>B("archive"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx(af,{className:"h-4 w-4 mr-1"}),e("adminNotifications.archive")]}),s.jsxs("button",{onClick:()=>B("delete"),className:"inline-flex items-center px-3 py-1 border border-red-300 rounded-md text-sm text-red-700 bg-red-50 hover:bg-red-100",children:[s.jsx(er,{className:"h-4 w-4 mr-1"}),e("adminNotifications.delete")]})]})]}),s.jsx("div",{className:"space-y-4",children:d.map(O=>s.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 border-l-4 ${F(O.priority)} ${O.isRead?"":"ring-2 ring-blue-100 dark:ring-blue-900/20"}`,children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[s.jsx("input",{type:"checkbox",checked:j.includes(O.id),onChange:K=>{K.target.checked?y(V=>[...V,O.id]):y(V=>V.filter(X=>X!==O.id))},className:"mt-1 rounded"}),s.jsx("div",{className:"flex-shrink-0",children:E(O.type,O.priority)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h3",{className:`text-lg font-semibold ${O.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:C(O,"title")}),!O.isRead&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.priority==="high"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400":O.priority==="medium"?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400"}`,children:O.priority}),O.isArchived&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:e("adminNotifications.archived")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:C(O,"message")}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(nr,{className:"h-4 w-4 mr-1"}),I(O.timestamp)]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(wi,{className:"h-4 w-4 mr-1"}),e(`adminNotifications.${O.type}`)]})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[O.isRead?s.jsx("button",{onClick:()=>Y(O.id),className:"p-2 text-gray-400 hover:text-gray-600",title:e("tooltips.markAsUnread"),children:s.jsx(Er,{className:"h-4 w-4"})}):s.jsx("button",{onClick:()=>D(O.id),className:"p-2 text-gray-400 hover:text-blue-600",title:e("tooltips.markAsRead"),children:s.jsx(Yt,{className:"h-4 w-4"})}),O.isArchived?s.jsx("button",{onClick:()=>Z(O.id),className:"p-2 text-gray-400 hover:text-green-600",title:e("tooltips.unarchive"),children:s.jsx(af,{className:"h-4 w-4"})}):s.jsx("button",{onClick:()=>R(O.id),className:"p-2 text-gray-400 hover:text-yellow-600",title:e("tooltips.archive"),children:s.jsx(af,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>T(O.id),className:"p-2 text-gray-400 hover:text-red-600",title:e("tooltips.delete"),children:s.jsx(er,{className:"h-4 w-4"})})]})]})})},O.id))}),d.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(wi,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("notifications.noNotifications")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:h||g||k?"Try adjusting your search criteria or filters.":"You're all caught up! No new notifications."})]})]}),b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e("notifications.settings")}),s.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:e("notifications.deliveryMethods")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.email,onChange:O=>P(K=>({...K,email:O.target.checked})),className:"rounded mr-3"}),s.jsx(os,{className:"h-4 w-4 mr-2"}),e("notifications.emailNotifications")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.push,onChange:O=>P(K=>({...K,push:O.target.checked})),className:"rounded mr-3"}),s.jsx(wi,{className:"h-4 w-4 mr-2"}),e("notifications.pushNotifications")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.sms,onChange:O=>P(K=>({...K,sms:O.target.checked})),className:"rounded mr-3"}),s.jsx(qi,{className:"h-4 w-4 mr-2"}),e("notifications.smsNotifications")]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:e("notifications.types")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.orderUpdates,onChange:O=>P(K=>({...K,orderUpdates:O.target.checked})),className:"rounded mr-3"}),s.jsx(Mr,{className:"h-4 w-4 mr-2"}),e("notifications.orderUpdates")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.systemAlerts,onChange:O=>P(K=>({...K,systemAlerts:O.target.checked})),className:"rounded mr-3"}),s.jsx(us,{className:"h-4 w-4 mr-2"}),e("notifications.systemAlerts")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.marketing,onChange:O=>P(K=>({...K,marketing:O.target.checked})),className:"rounded mr-3"}),s.jsx(os,{className:"h-4 w-4 mr-2"}),e("notifications.marketing")]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.securityAlerts,onChange:O=>P(K=>({...K,securityAlerts:O.target.checked})),className:"rounded mr-3"}),s.jsx(Xa,{className:"h-4 w-4 mr-2"}),e("notifications.securityAlerts")]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>w(!1),className:"btn btn-outline",children:"Cancel"}),s.jsx("button",{onClick:async()=>{try{await ce.post("/notifications/preferences/settings",N),q.success("Notification settings saved!"),w(!1)}catch(O){console.error("Error saving settings:",O),q.error("Failed to save notification settings")}},className:"btn btn-primary",children:"Save Settings"})]})]})})]})},d9=()=>{const{t:e}=je(),{user:t}=Se(a=>a.auth);if((t==null?void 0:t.role)==="ADMIN")return s.jsx(ac,{to:"/admin/settings/general",replace:!0});if((t==null?void 0:t.role)!=="ADMIN")return s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ht,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})});const r=[{title:e("adminSettings.storeSettings"),description:e("adminSettings.storeSettingsDescription"),icon:us,color:"blue",items:[{name:e("adminSettings.general"),description:e("adminSettings.generalDescription"),href:"/admin/settings/general",icon:us},{name:e("adminSettings.business"),description:e("adminSettings.businessDescription"),href:"/admin/settings/business",icon:q7},{name:e("adminSettings.shipping"),description:e("adminSettings.shippingDescription"),href:"/admin/settings/shipping",icon:yr},{name:e("adminSettings.vat"),description:e("adminSettings.vatDescription"),href:"/admin/settings/vat",icon:wm}]},{title:e("adminSettings.integrations"),description:e("adminSettings.integrationsDescription"),icon:ix,color:"green",items:[{name:e("adminSettings.apiKeys"),description:e("adminSettings.apiKeysDescription"),href:"/admin/settings/api-keys",icon:dc},{name:e("adminSettings.paymentGateways"),description:e("adminSettings.paymentGatewayDescription"),href:"/admin/settings/payment-gateways",icon:Ea},{name:e("adminSettings.integrations"),description:e("adminSettings.integrationsDescription"),href:"/admin/settings/integrations",icon:ix}]}];return s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-6xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.settings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSettings.manageSystemSettings")})]}),s.jsx("div",{className:"space-y-8",children:r.map(a=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 bg-${a.color}-100 dark:bg-${a.color}-900/20 rounded-lg flex items-center justify-center`,children:s.jsx(a.icon,{className:`w-4 h-4 text-${a.color}-600 dark:text-${a.color}-400`})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:a.title}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.description})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.items.map(n=>s.jsx(Le,{to:n.href,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 group",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/20 transition-colors",children:s.jsx(n.icon,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:n.name}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:n.description})]})]})},n.name))})]},a.title))})]})})},Rd=Ne("smtpSettings/fetchSMTPSettings",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/smtp-settings")).data.settings}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch SMTP settings")}}),Dd=Ne("smtpSettings/updateSMTPSettings",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.put("/smtp-settings",e)).data.settings}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to update SMTP settings")}}),Od=Ne("smtpSettings/testSMTPConnection",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.post("/smtp-settings/test",e)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"SMTP test failed")}}),c9={settings:null,isLoading:!1,error:null,testResult:null,isTesting:!1},V4=Vr({name:"smtpSettings",initialState:c9,reducers:{clearError:e=>{e.error=null},clearTestResult:e=>{e.testResult=null},updateSettingsField:(e,t)=>{const{field:r,value:a}=t.payload;e.settings&&(e.settings[r]=a)}},extraReducers:e=>{e.addCase(Rd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Rd.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(Rd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Dd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Dd.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(Dd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Od.pending,t=>{t.isTesting=!0,t.error=null,t.testResult=null}).addCase(Od.fulfilled,(t,r)=>{t.isTesting=!1,t.testResult={success:!0,message:r.payload.message,details:r.payload.details},t.error=null}).addCase(Od.rejected,(t,r)=>{t.isTesting=!1,t.testResult={success:!1,message:r.payload},t.error=r.payload})}}),{updateSettingsField:H4}=V4.actions,u9=V4.reducer,h9=()=>{var fl,Mc,Rc,Dc;const{t:e}=je(),t=ut(),{user:r}=Se(U=>U.auth),{settings:a,testResult:n,isTesting:i}=Se(U=>U.smtpSettings),[o,d]=_.useState("general"),[c,h]=_.useState(!0),[m,g]=_.useState(!1),[p,k]=_.useState(!1),[x,j]=_.useState({storeName:"lfng",storeDescription:"Icelandic wine and beer shop with home delivery",storeEmail:"info@olfong.is",storePhone:"+354 555 1234",storeAddress:"Laugavegur 123, 101 Reykjavk, Iceland",language:"is",dateFormat:"DD/MM/YYYY",timeFormat:"24h"}),[y,b]=_.useState([{code:"ISK",symbol:"kr",name:e("adminSettings.currencyISK"),isActive:!0},{code:"USD",symbol:"$",name:e("adminSettings.currencyUSD"),isActive:!1},{code:"EUR",symbol:"",name:e("adminSettings.currencyEUR"),isActive:!1}]),[w,N]=_.useState(!1),[P,C]=_.useState({code:"",symbol:"",name:""}),[A,E]=_.useState({openingHours:{monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"23:59",closed:!1},sunday:{open:"12:00",close:"23:59",closed:!1}},ageRestriction:{enabled:!0,nicotineAge:18,alcoholNicotineAge:20,generalProducts:0}}),[F,I]=_.useState(!1),[D,Y]=_.useState({host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"lfng",fromNameIs:"lfng",isEnabled:!1}),[R,Z]=_.useState(!1),[T,B]=_.useState({}),[W,Q]=_.useState({}),[$,O]=_.useState({enabled:!0,rate:24,country:"IS",displayInAdmin:!0,includeInCustomerPrice:!0,showVatBreakdown:!1}),[K,V]=_.useState([]),[X,le]=_.useState([]),[ge,ne]=_.useState(!1),[pe,Oe]=_.useState(null),[ue,Me]=_.useState({name:"",nameIs:"",description:"",descriptionIs:"",vatRate:24,isDefault:!1,categoryIds:[]}),[et,Ze]=_.useState(!1),[z,we]=_.useState({});_.useEffect(()=>{Ie()},[o]);const Ie=async()=>{var U,me,$e,Pt;h(!0);try{const jt=await fetch("/api/settings?category=GENERAL",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(jt.ok){const Ft=await jt.json(),vs={};(U=Ft.data.settings.GENERAL)==null||U.forEach(dt=>{vs[dt.key]=dt.value||""}),j(dt=>({...dt,...vs}))}if(o==="apiKeys"){const Ft=await fetch("/api/settings?category=API_KEYS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Ft.ok){const vs=await Ft.json(),dt={};(me=vs.data.settings.API_KEYS)==null||me.forEach(Ke=>{dt[Ke.key]=Ke.value||""}),B(dt)}}if(o==="business"||o==="ageRestrictions"){const Ft=await fetch("/api/settings?category=BUSINESS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Ft.ok){const vs=await Ft.json(),dt={};($e=vs.data.settings.BUSINESS)==null||$e.forEach(Ke=>{Ke.key==="openingHours"?dt.openingHours=JSON.parse(Ke.value):Ke.key==="ageRestrictionEnabled"?dt.ageRestriction={...dt.ageRestriction,enabled:Ke.value==="true"}:Ke.key==="nicotineAge"?dt.ageRestriction={...dt.ageRestriction,nicotineAge:parseInt(Ke.value)}:Ke.key==="alcoholNicotineAge"?dt.ageRestriction={...dt.ageRestriction,alcoholNicotineAge:parseInt(Ke.value)}:Ke.key==="generalProductsAge"&&(dt.ageRestriction={...dt.ageRestriction,generalProducts:parseInt(Ke.value)})}),E(Ke=>({...Ke,...dt}))}}if(o==="smtp"&&t(Rd()),o==="currencies"&&await Fe(),o==="vat"){const Ft=await fetch("/api/settings?category=VAT",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(Ft.ok){const vs=await Ft.json(),dt={};(Pt=vs.data.settings.VAT)==null||Pt.forEach(Ke=>{Ke.key==="vatEnabled"?dt.enabled=Ke.value==="true":Ke.key==="vatRate"?dt.rate=parseFloat(Ke.value)||0:Ke.key==="vatCountry"?dt.country=Ke.value:Ke.key==="vatDisplayInAdmin"?dt.displayInAdmin=Ke.value==="true":Ke.key==="vatIncludeInCustomerPrice"?dt.includeInCustomerPrice=Ke.value==="true":Ke.key==="vatShowBreakdown"&&(dt.showVatBreakdown=Ke.value==="true")}),O(Ke=>({...Ke,...dt}))}await rs(),await Ra()}}catch(jt){console.error("Error loading settings:",jt),q.error("Failed to load settings")}finally{h(!1)}},Fe=async()=>{try{const U=await fetch("/api/settings?category=CURRENCY",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(U.ok){const $e=(await U.json()).data.settings.CURRENCY||[];if($e.length>0)try{const Pt=JSON.parse($e[0].value);b(Pt)}catch(Pt){console.warn("Failed to parse currencies:",Pt)}}}catch(U){console.warn("Failed to load currencies:",U)}},se=()=>{const U={};return x.storeName.trim()||(U.storeName="Store name is required"),x.storeEmail.trim()?/\S+@\S+\.\S+/.test(x.storeEmail)||(U.storeEmail="Please enter a valid email address"):U.storeEmail="Store email is required",x.storePhone.trim()||(U.storePhone="Phone number is required"),x.storeAddress.trim()||(U.storeAddress="Store address is required"),we(U),Object.keys(U).length===0},Pe=()=>{if(!P.code||!P.symbol||!P.name){q.error("Please fill in all currency fields");return}if(y.some(me=>me.code===P.code)){q.error("Currency code already exists");return}const U={code:P.code.toUpperCase(),symbol:P.symbol,name:P.name,isActive:!1};b([...y,U]),C({code:"",symbol:"",name:""}),N(!1),g(!0),q.success("Currency added. Don't forget to save!")},de=U=>{const me=y.find($e=>$e.code===U);if(me!=null&&me.isActive){q.error("Cannot remove active currency. Set another currency as active first.");return}b(y.filter($e=>$e.code!==U)),g(!0),q.success("Currency removed. Don't forget to save!")},_e=U=>{b(y.map(me=>({...me,isActive:me.code===U}))),g(!0)},H=async()=>{var U,me;if(!y.some($e=>$e.isActive)){q.error("Please set an active currency");return}k(!0);try{const $e=[{key:"currencies",value:JSON.stringify(y),category:"CURRENCY",description:"Available currencies in the system",isPublic:!0},{key:"currencySymbol",value:((U=y.find(jt=>jt.isActive))==null?void 0:U.symbol)||"kr",category:"GENERAL",description:"Active currency symbol",isPublic:!0},{key:"currencyCode",value:((me=y.find(jt=>jt.isActive))==null?void 0:me.code)||"ISK",category:"GENERAL",description:"Active currency code",isPublic:!0}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:$e})})).ok)throw new Error("Failed to save currencies");q.success("Currencies saved successfully"),g(!1)}catch($e){console.error("Error saving currencies:",$e),q.error("Failed to save currencies")}finally{k(!1)}},ee=async()=>{if(!se()){q.error("Please fix the validation errors before saving");return}k(!0);try{const U=[{key:"storeName",value:x.storeName,category:"GENERAL",description:"Store name",isPublic:!0},{key:"storeDescription",value:x.storeDescription,category:"GENERAL",description:"Store description",isPublic:!0},{key:"storeEmail",value:x.storeEmail,category:"GENERAL",description:"Store email",isPublic:!0},{key:"storePhone",value:x.storePhone,category:"GENERAL",description:"Store phone number",isPublic:!0},{key:"storeAddress",value:x.storeAddress,category:"GENERAL",description:"Store address",isPublic:!0},{key:"language",value:x.language,category:"GENERAL",description:"Default language",isPublic:!0},{key:"dateFormat",value:x.dateFormat,category:"GENERAL",description:"Date format",isPublic:!0},{key:"timeFormat",value:x.timeFormat,category:"GENERAL",description:"Time format",isPublic:!0}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:U})})).ok)throw new Error("Failed to save settings");q.success(e("adminSettings.settingsSaved")),g(!1),we({})}catch(U){console.error("Error saving settings:",U),q.error("Failed to save settings")}finally{k(!1)}},ae=(U,me)=>{j($e=>({...$e,[U]:me})),g(!0),z[U]&&we($e=>({...$e,[U]:""}))},ve=async(U,me)=>{k(!0);try{const $e=[{key:U,value:me,category:"API_KEYS",description:`${U} API key`}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:$e})})).ok)throw new Error("Failed to save API key");q.success(e("adminSettings.settingsSaved")),g(!1)}catch($e){console.error("Error saving API key:",$e),q.error("Failed to save API key")}finally{k(!1)}},be=U=>{Q(me=>({...me,[U]:!me[U]}))},J=async()=>{k(!0);try{const U=[{key:"openingHours",value:JSON.stringify(A.openingHours),category:"BUSINESS",description:"Store opening hours"},{key:"ageRestrictionEnabled",value:A.ageRestriction.enabled.toString(),category:"BUSINESS",description:"Age restriction enabled"},{key:"nicotineAge",value:A.ageRestriction.nicotineAge.toString(),category:"BUSINESS",description:"Minimum age for nicotine products"},{key:"alcoholNicotineAge",value:A.ageRestriction.alcoholNicotineAge.toString(),category:"BUSINESS",description:"Minimum age for alcohol and nicotine products"},{key:"generalProductsAge",value:A.ageRestriction.generalProducts.toString(),category:"BUSINESS",description:"Minimum age for general products"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:U})})).ok)throw new Error("Failed to save settings");q.success(e("adminSettings.settingsSaved")),g(!1)}catch(U){console.error("Error saving settings:",U),q.error("Failed to save settings")}finally{k(!1)}},he=U=>{const me=A.openingHours[U],$e={};Object.keys(A.openingHours).forEach(Pt=>{$e[Pt]={...me}}),E(Pt=>({...Pt,openingHours:$e})),g(!0),I(!1),q.success(e("adminSettings.copiedHoursToAllDays").replace("{day}",tt(U)))},Ee=()=>{const U={...A.openingHours};["monday","tuesday","wednesday","thursday","friday"].forEach(me=>{U[me]={open:"10:00",close:"22:00",closed:!1}}),E(me=>({...me,openingHours:U})),g(!0),q.success(e("adminSettings.setWeekdayHoursSuccess"))},re=()=>{const U={...A.openingHours};["saturday","sunday"].forEach(me=>{U[me]={open:"12:00",close:"23:59",closed:!1}}),E(me=>({...me,openingHours:U})),g(!0),q.success(e("adminSettings.setWeekendHoursSuccess"))},Re=()=>{const U={};Object.keys(A.openingHours).forEach(me=>{U[me]={open:"00:00",close:"23:59",closed:!1}}),E(me=>({...me,openingHours:U})),g(!0),q.success(e("adminSettings.set24hSuccess"))},tt=U=>({monday:e("adminSettings.monday"),tuesday:e("adminSettings.tuesday"),wednesday:e("adminSettings.wednesday"),thursday:e("adminSettings.thursday"),friday:e("adminSettings.friday"),saturday:e("adminSettings.saturday"),sunday:e("adminSettings.sunday")})[U]||U,wt=U=>{if(U.closed)return null;const me=parseInt(U.open.split(":")[0]),$e=parseInt(U.open.split(":")[1]),Pt=parseInt(U.close.split(":")[0]),jt=parseInt(U.close.split(":")[1]),Ft=Pt*60+jt-(me*60+$e),vs=Math.floor(Ft/60),dt=Ft%60;return{hours:vs,minutes:dt,total:Ft/60}},rs=async()=>{var U;try{Ze(!0);const me=await fetch("/api/vat-profiles",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(me.ok){const $e=await me.json();V(((U=$e.data)==null?void 0:U.profiles)||[])}}catch(me){console.error("Error loading VAT profiles:",me)}finally{Ze(!1)}},Ra=async()=>{var U;try{const me=await fetch("/api/categories",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(me.ok){const $e=await me.json();le(((U=$e.data)==null?void 0:U.categories)||[])}}catch(me){console.error("Error loading categories:",me)}},ss=async()=>{try{if(!ue.name||!ue.nameIs){q.error("Name and Icelandic name are required");return}k(!0);const U=pe?`/api/vat-profiles/${pe.id}`:"/api/vat-profiles";if(!(await fetch(U,{method:pe?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({name:ue.name,nameIs:ue.nameIs,description:ue.description,descriptionIs:ue.descriptionIs,vatRate:parseFloat(ue.vatRate),isDefault:ue.isDefault,categoryIds:ue.categoryIds})})).ok)throw new Error("Failed to save VAT profile");q.success(pe?"VAT profile updated":"VAT profile created"),await rs(),ne(!1),Oe(null),Me({name:"",nameIs:"",description:"",descriptionIs:"",vatRate:24,isDefault:!1,categoryIds:[]})}catch(U){console.error("Error saving VAT profile:",U),q.error("Failed to save VAT profile")}finally{k(!1)}},cn=async U=>{if(window.confirm("Are you sure you want to delete this profile?"))try{if(k(!0),!(await fetch(`/api/vat-profiles/${U}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to delete VAT profile");q.success("VAT profile deleted"),await rs()}catch(me){console.error("Error deleting VAT profile:",me),q.error("Failed to delete VAT profile")}finally{k(!1)}},ii=U=>{var me;Oe(U),Me({name:U.name,nameIs:U.nameIs,description:U.description||"",descriptionIs:U.descriptionIs||"",vatRate:U.vatRate,isDefault:U.isDefault,categoryIds:((me=U.categories)==null?void 0:me.map($e=>$e.id))||[]}),ne(!0)},bs=async()=>{k(!0);try{const U=[{key:"vatEnabled",value:$.enabled.toString(),category:"VAT",description:"VAT enabled",isPublic:!0},{key:"vatRate",value:$.rate.toString(),category:"VAT",description:"VAT rate",isPublic:!0},{key:"vatCountry",value:$.country,category:"VAT",description:"VAT country",isPublic:!0},{key:"vatDisplayInAdmin",value:$.displayInAdmin.toString(),category:"VAT",description:"Show VAT in admin",isPublic:!0},{key:"vatIncludeInCustomerPrice",value:$.includeInCustomerPrice.toString(),category:"VAT",description:"Include VAT in customer price",isPublic:!0},{key:"vatShowBreakdown",value:$.showVatBreakdown.toString(),category:"VAT",description:"Show VAT breakdown",isPublic:!0}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:U})})).ok)throw new Error("Failed to save VAT settings");q.success(e("adminSettings.settingsSaved")),g(!1)}catch(U){console.error("Error saving VAT settings:",U),q.error("Failed to save VAT settings")}finally{k(!1)}},as=(U,me)=>{O($e=>({...$e,[U]:me})),g(!0)};_.useEffect(()=>{a&&o==="smtp"&&Y({host:a.host||"",port:a.port||587,secure:a.secure||!1,username:a.username||"",password:"",fromEmail:a.fromEmail||"",fromName:a.fromName||"lfng",fromNameIs:a.fromNameIs||"lfng",isEnabled:a.isEnabled||!1})},[a,o]);const ir=(U,me)=>{Y($e=>({...$e,[U]:me})),t(H4({field:U,value:me})),g(!0)},zs=async()=>{k(!0);try{await t(Dd(D)).unwrap(),q.success("SMTP settings saved successfully!"),g(!1)}catch(U){q.error(U||"Failed to save settings")}finally{k(!1)}},un=async()=>{if(!D.host||!D.username||!D.password||!D.fromEmail){q.error("Please fill in all required fields before testing");return}try{await t(Od(D)).unwrap(),n!=null&&n.success&&q.success("SMTP test successful!")}catch(U){q.error(U||"SMTP test failed")}};return(r==null?void 0:r.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ht,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:e("admin.accessDeniedMessage")})]})})}):c?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-3 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-4 sm:py-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3 sm:gap-4 lg:gap-6 mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex items-start gap-2 sm:gap-3 lg:gap-4 min-w-0 flex-1",children:[s.jsx(Le,{to:"/admin/settings",className:"flex-shrink-0 p-1.5 sm:p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 mt-0.5",children:s.jsx(Bs,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h1",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl font-bold text-gray-900 dark:text-white flex items-center gap-1.5 sm:gap-2 lg:gap-3 flex-wrap leading-tight",children:[s.jsx(us,{className:"w-6 h-6 sm:w-7 sm:h-7 lg:w-8 lg:h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsx("span",{children:e("adminSettings.generalSettings")})]}),s.jsx("p",{className:"text-xs sm:text-sm lg:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:e("adminSettings.generalDescription")})]})]}),s.jsxs("div",{className:"flex flex-col xs:flex-row items-center justify-end gap-2 sm:gap-3 lg:gap-4 flex-shrink-0 w-full sm:w-auto",children:[m?s.jsxs("div",{className:"flex items-center gap-1 text-amber-600 dark:text-amber-400 whitespace-nowrap",children:[s.jsx(lt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"Unsaved Changes"})]}):s.jsxs("div",{className:"flex items-center gap-1 text-green-600 dark:text-green-400 whitespace-nowrap",children:[s.jsx(Ct,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"text-xs sm:text-sm font-medium hidden sm:inline",children:"All Saved"})]}),s.jsxs("button",{onClick:()=>{o==="business"||o==="ageRestrictions"?J():o==="apiKeys"?q.info("API keys are saved individually"):o==="smtp"?zs():o==="vat"?bs():o==="currencies"?H():ee()},disabled:p||!m,className:"inline-flex items-center px-3 sm:px-4 py-2 border border-transparent rounded-md shadow-sm text-xs sm:text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 whitespace-nowrap",children:[p?s.jsx(ht,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Tr,{className:"w-4 h-4 mr-2"}),e(p?"common.loading":"adminSettings.saveChanges")]})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 overflow-x-auto",children:s.jsxs("nav",{className:"flex gap-1 sm:gap-2 lg:gap-4 px-2 sm:px-4 lg:px-6 min-w-max sm:min-w-full","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>d("general"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="general"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(us,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.general")})]})}),s.jsx("button",{onClick:()=>d("apiKeys"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="apiKeys"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(dc,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.apiKeys")})]})}),s.jsx("button",{onClick:()=>d("business"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="business"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(nr,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.openingHours")||"Opnunartmar"})]})}),s.jsx("button",{onClick:()=>d("ageRestrictions"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="ageRestrictions"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(lt,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.ageRestrictions")||"Aldurstakmrk"})]})}),s.jsx("button",{onClick:()=>d("smtp"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="smtp"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(os,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.smtp")})]})}),s.jsx("button",{onClick:()=>d("vat"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="vat"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(wm,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.vat")})]})}),s.jsx("button",{onClick:()=>d("currencies"),className:`py-3 sm:py-4 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap transition-colors duration-200 ${o==="currencies"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(Wi,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),s.jsx("span",{className:"hidden sm:inline",children:e("adminSettings.currencies")||"Currencies"})]})})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-2 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-6",children:s.jsx("div",{className:"space-y-6",children:o==="general"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(oA,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.storeInformation")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.storeInformationDesc")})]}),s.jsxs("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeName")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:x.storeName,onChange:U=>ae("storeName",U.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${z.storeName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store name"}),z.storeName&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.storeName})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeEmail")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",value:x.storeEmail,onChange:U=>ae("storeEmail",U.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${z.storeEmail?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"info@yourstore.com"})]}),z.storeEmail&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.storeEmail})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.phoneNumber")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(qi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"tel",value:x.storePhone,onChange:U=>ae("storePhone",U.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${z.storePhone?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"+354 555 1234"})]}),z.storePhone&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.storePhone})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.storeAddress")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ta,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),s.jsx("textarea",{value:x.storeAddress,onChange:U=>ae("storeAddress",U.target.value),rows:3,className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${z.storeAddress?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store address"})]}),z.storeAddress&&s.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:z.storeAddress})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.storeDescription")}),s.jsx("textarea",{value:x.storeDescription,onChange:U=>ae("storeDescription",U.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Describe your store and what makes it special"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(zo,{className:"w-6 h-6 text-green-600 dark:text-green-400 mr-3"}),s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.preferences")})]}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.preferencesDesc")})]}),s.jsx("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-4 gap-4 xl:gap-6 2xl:gap-8",children:[s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.language")}),s.jsxs("div",{className:"relative",children:[s.jsx(zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.language,onChange:U=>ae("language",U.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"is",children:e("adminSettings.languageIcelandic")}),s.jsx("option",{value:"en",children:e("adminSettings.languageEnglish")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.dateFormat")}),s.jsxs("div",{className:"relative",children:[s.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.dateFormat,onChange:U=>ae("dateFormat",U.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"DD/MM/YYYY",children:e("adminSettings.dateFormatDDMMYYYY")}),s.jsx("option",{value:"MM/DD/YYYY",children:e("adminSettings.dateFormatMMDDYYYY")}),s.jsx("option",{value:"YYYY-MM-DD",children:e("adminSettings.dateFormatYYYYMMDD")})]})]})]}),s.jsxs("div",{className:"2xl:col-span-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.timeFormat")}),s.jsxs("div",{className:"relative",children:[s.jsx(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsxs("select",{value:x.timeFormat,onChange:U=>ae("timeFormat",U.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"24h",children:e("adminSettings.timeFormat24h")}),s.jsx("option",{value:"12h",children:e("adminSettings.timeFormat12h")})]})]})]})]})})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4 xl:p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(ho,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm xl:text-base font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.needHelp")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:e("adminSettings.settingsControlDesc")}),s.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.storeNameAppears")]}),s.jsxs("li",{children:[" ",e("adminSettings.currencyAffects")]}),s.jsxs("li",{children:[" ",e("adminSettings.languageSets")]}),s.jsxs("li",{children:[" ",e("adminSettings.dateTimeFormats")]})]})]})]})})]}):o==="apiKeys"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(dc,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.apiKeysConfiguration")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.apiKeysDescription")})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-pink-600 dark:text-pink-400 font-semibold text-sm",children:"U"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.unsplashApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.unsplashDevelopers")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.unsplash?"text":"password",placeholder:e("adminSettings.enterUnsplashApiKey"),value:T.unsplash||"",onChange:U=>{B(me=>({...me,unsplash:U.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>be("unsplash"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.unsplash?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>ve("unsplash",T.unsplash||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:"P"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pexelsApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pexelsApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.pexels?"text":"password",placeholder:e("adminSettings.enterPexelsApiKey"),value:T.pexels||"",onChange:U=>{B(me=>({...me,pexels:U.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>be("pexels"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.pexels?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>ve("pexels",T.pexels||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold text-sm",children:"PX"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pixabayApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pixabayApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.pixabay?"text":"password",placeholder:e("adminSettings.enterPixabayApiKey"),value:T.pixabay||"",onChange:U=>{B(me=>({...me,pixabay:U.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>be("pixabay"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.pixabay?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>ve("pixabay",T.pixabay||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold text-sm",children:"G"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.googleApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.googleCloudConsole")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.google?"text":"password",placeholder:e("adminSettings.enterGoogleApiKey"),value:T.google||"",onChange:U=>{B(me=>({...me,google:U.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>be("google"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.google?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>ve("google",T.google||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:e("adminSettings.enterGoogleSearchEngineId"),value:T.googleSearchEngineId||"",onChange:U=>{B(me=>({...me,googleSearchEngineId:U.target.value})),g(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{onClick:()=>ve("googleSearchEngineId",T.googleSearchEngineId||""),disabled:p||!m,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.test")})]})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center mr-3",children:s.jsx(sa,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"RunPod API Key"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Required for AI product image generation (FLUX models)"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:W.runpodApiKey?"text":"password",placeholder:"Enter RunPod API key (rpa_...)",value:T.runpodApiKey||"",onChange:U=>{B(me=>({...me,runpodApiKey:U.target.value})),g(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>be("runpodApiKey"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:W.runpodApiKey?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>ve("runpodApiKey",T.runpodApiKey||""),disabled:p||!m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:p?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Get your API key from"," ",s.jsx("a",{href:"https://runpod.io",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"RunPod Dashboard"})]})]})]}),s.jsxs("div",{className:"mt-8 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-3",children:e("adminSettings.importantNotes")}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote1")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote2")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote3")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote4")]})]})]})]}):o==="business"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(sa,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.quickActions")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:Ee,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Qa,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekdayHours")})]}),s.jsxs("button",{onClick:re,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Qa,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekendHours")})]}),s.jsxs("button",{onClick:Re,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(nr,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.operation24h")})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>I(!F),className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(tS,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.copyHours")})]}),F&&s.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10 overflow-hidden",children:Object.keys(A.openingHours).map(U=>s.jsxs("button",{onClick:()=>he(U),className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300 transition-colors capitalize",children:[e("adminSettings.copy")," ",tt(U)]},U))})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(nr,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.openingHours")})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(A.openingHours).map(([U,me])=>{const $e=wt(me);return s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:tt(U)})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",value:me.open,onChange:Pt=>{const jt=Pt.target.value;(jt===""||/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(jt)||/^([0-1]?[0-9]?|2[0-3]?)(:([0-5]?[0-9]?)?)?$/.test(jt))&&(E(Ft=>({...Ft,openingHours:{...Ft.openingHours,[U]:{...me,open:jt}}})),g(!0))},disabled:me.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800 font-mono",title:e("adminSettings.openingTime"),placeholder:"HH:MM",pattern:"^([0-1][0-9]|2[0-3]):[0-5][0-9]$"})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:""})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"text",value:me.close,onChange:Pt=>{const jt=Pt.target.value;(jt===""||/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(jt)||/^([0-1]?[0-9]?|2[0-3]?)(:([0-5]?[0-9]?)?)?$/.test(jt))&&(E(Ft=>({...Ft,openingHours:{...Ft.openingHours,[U]:{...me,close:jt}}})),g(!0))},disabled:me.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800 font-mono",title:e("adminSettings.closingTime"),placeholder:"HH:MM",pattern:"^([0-1][0-9]|2[0-3]):[0-5][0-9]$"})}),s.jsx("div",{className:"col-span-2 text-center",children:$e?s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[$e.hours,"h ",$e.minutes,"m"]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:me.closed,onChange:Pt=>{E(jt=>({...jt,openingHours:{...jt.openingHours,[U]:{...me,closed:Pt.target.checked}}})),g(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.closed")})]})})]},U)})}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ho,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:e("adminSettings.weeklySummary")}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.openDays")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(A.openingHours).filter(U=>!U.closed).length,"/7"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.totalHoursPerWeek")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(A.openingHours).reduce((U,me)=>{const $e=wt(me);return U+(($e==null?void 0:$e.total)||0)},0).toFixed(1),"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.avgHoursPerDay")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[(Object.values(A.openingHours).reduce((U,me)=>{const $e=wt(me);return U+(($e==null?void 0:$e.total)||0)},0)/Object.values(A.openingHours).filter(U=>!U.closed).length).toFixed(1),"h"]})]})]})]})]})})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:J,disabled:p||!m,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p?s.jsx(ht,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Tr,{className:"w-4 h-4 mr-2"}),e(p?"common.saving":"adminSettings.saveChanges")]})})})]}):o==="ageRestrictions"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(lt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.ageRestriction")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"enableAgeRestriction",checked:A.ageRestriction.enabled,onChange:U=>{E(me=>({...me,ageRestriction:{...me.ageRestriction,enabled:U.target.checked}})),g(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"enableAgeRestriction",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.enableRestrictions")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.nicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:A.ageRestriction.nicotineAge,onChange:U=>{E(me=>({...me,ageRestriction:{...me.ageRestriction,nicotineAge:parseInt(U.target.value)||18}})),g(!0)},disabled:!A.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.nicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.alcoholNicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:A.ageRestriction.alcoholNicotineAge,onChange:U=>{E(me=>({...me,ageRestriction:{...me.ageRestriction,alcoholNicotineAge:parseInt(U.target.value)||20}})),g(!0)},disabled:!A.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.alcoholNicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.generalProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:A.ageRestriction.generalProducts,onChange:U=>{E(me=>({...me,ageRestriction:{...me.ageRestriction,generalProducts:parseInt(U.target.value)||0}})),g(!0)},disabled:!A.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.generalProductsDescription")})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.ageRestrictionNotice")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.ageRestrictionDescription")})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsx("button",{onClick:J,disabled:p||!m,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:p?s.jsxs(s.Fragment,{children:[s.jsx(ht,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}),e("common.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"w-5 h-5 mr-2"}),e("adminSettings.saveChanges")]})})})})]}):o==="smtp"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ax,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.smtpSettings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.smtp.description")})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:D.isEnabled,onChange:U=>ir("isEnabled",U.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.smtp.enableSmtp")})]})})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.host")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ax,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:D.host,onChange:U=>ir("host",U.target.value),placeholder:"smtp.gmail.com",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.hostHelp")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.port")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:D.port,onChange:U=>ir("port",parseInt(U.target.value)||587),placeholder:"587",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.portHelp")})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:D.secure,onChange:U=>ir("secure",U.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx(sx,{className:"w-4 h-4 ml-2 mr-1 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.smtp.useSecure")})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6",children:e("adminSettings.smtp.secureHelp")})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(ts,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.authCredentials")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.username")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"text",value:D.username,onChange:U=>ir("username",U.target.value),placeholder:"your-email@example.com",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.password")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(sx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:R?"text":"password",value:D.password,onChange:U=>ir("password",U.target.value),placeholder:"Enter SMTP password",className:"w-full pl-10 pr-10 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>Z(!R),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:R?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.passwordHelp")})]})]})]}),s.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(os,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.senderInfo")]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.smtp.fromEmail")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),s.jsx("input",{type:"email",value:D.fromEmail,onChange:U=>ir("fromEmail",U.target.value),placeholder:"noreply@olfong.is",className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.smtp.fromEmailHelp")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.smtp.fromNameEn")}),s.jsx("input",{type:"text",value:D.fromName,onChange:U=>ir("fromName",U.target.value),placeholder:"lfng",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.smtp.fromNameIs")}),s.jsx("input",{type:"text",value:D.fromNameIs,onChange:U=>ir("fromNameIs",U.target.value),placeholder:"lfng",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:un,disabled:i||!D.host||!D.username||!D.password||!D.fromEmail,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:i?s.jsxs(s.Fragment,{children:[s.jsx(At,{className:"w-4 h-4 mr-2 animate-spin"}),e("adminSettings.smtp.testingConnection")]}):s.jsxs(s.Fragment,{children:[s.jsx(Yy,{className:"w-4 h-4 mr-2"}),e("adminSettings.smtp.testConnection")]})}),s.jsxs("button",{onClick:zs,disabled:p||!m,className:"inline-flex items-center px-6 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[p?s.jsx(ht,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Tr,{className:"w-4 h-4 mr-2"}),e(p?"common.saving":"adminSettings.smtp.saveSettings")]})]})}),n&&s.jsx("div",{className:`p-4 rounded-md ${n.success?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"}`,children:s.jsxs("div",{className:"flex items-start",children:[n.success?s.jsx(Ct,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-3 mt-0.5"}):s.jsx(lt,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:`text-sm font-medium ${n.success?"text-green-900 dark:text-green-100":"text-red-900 dark:text-red-100"}`,children:n.success?e("adminSettings.smtp.connectionSuccess"):e("adminSettings.smtp.connectionFailed")}),s.jsx("p",{className:`text-sm mt-1 ${n.success?"text-green-700 dark:text-green-300":"text-red-700 dark:text-red-300"}`,children:n.message||(n.success?e("adminSettings.smtp.connectionSuccessMsg"):e("adminSettings.smtp.connectionFailedMsg"))})]})]})})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(ho,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.smtp.commonProviders")}),s.jsxs("div",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-300",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Gmail:"})," ",e("adminSettings.smtp.providerGmail")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Outlook/Office365:"})," ",e("adminSettings.smtp.providerOutlook")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Yahoo:"})," ",e("adminSettings.smtp.providerYahoo")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"SendGrid:"})," ",e("adminSettings.smtp.providerSendGrid")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Mailgun:"})," ",e("adminSettings.smtp.providerMailgun")]})]}),s.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-3",children:e("adminSettings.smtp.gmailTip")})]})]})})]}):o==="vat"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(wm,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatConfiguration")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.vatInformationDescription")})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.vatEnabled")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.enableVatForStore")})]}),s.jsx("label",{className:"flex items-center cursor-pointer",children:s.jsx("input",{type:"checkbox",checked:$.enabled,onChange:U=>as("enabled",U.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"})})]}),$.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.vatRate")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:$.rate,onChange:U=>as("rate",parseFloat(U.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"",children:"Select a VAT profile..."}),K.map(U=>s.jsxs("option",{value:U.vatRate,children:[U.name," (",U.nameIs,") - ",U.vatRate,"%"]},U.id))]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.vatRateDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.country")}),s.jsxs("select",{value:$.country,onChange:U=>as("country",U.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"IS",children:e("adminSettings.iceland")}),s.jsx("option",{value:"EU",children:e("adminSettings.euCountries")}),s.jsx("option",{value:"OTHER",children:e("adminSettings.otherCountries")})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatDisplaySettings")})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",id:"displayInAdmin",checked:$.displayInAdmin,onChange:U=>as("displayInAdmin",U.target.checked),disabled:!$.enabled,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 mt-1 disabled:opacity-50"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("label",{htmlFor:"displayInAdmin",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatInAdmin")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.showVatInAdminDescription")})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",id:"includeInCustomerPrice",checked:$.includeInCustomerPrice,onChange:U=>as("includeInCustomerPrice",U.target.checked),disabled:!$.enabled,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 mt-1 disabled:opacity-50"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("label",{htmlFor:"includeInCustomerPrice",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.includeVatInCustomerPrice")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.includeVatInCustomerPriceDescription")})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",id:"showVatBreakdown",checked:$.showVatBreakdown,onChange:U=>as("showVatBreakdown",U.target.checked),disabled:!$.enabled,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 mt-1 disabled:opacity-50"}),s.jsxs("div",{className:"ml-3",children:[s.jsx("label",{htmlFor:"showVatBreakdown",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatBreakdown")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.showVatBreakdownDescription")})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatProfiles")}),s.jsx("button",{onClick:()=>{ne(!ge),Oe(null),Me({name:"",nameIs:"",description:"",descriptionIs:"",vatRate:24,isDefault:!1,categoryIds:[]})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium transition-colors",children:e(ge?"adminSettings.cancel":"adminSettings.addProfile")})]})}),s.jsxs("div",{className:"p-6",children:[ge&&s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-4",children:e(pe?"adminSettings.editVatProfile":"adminSettings.createNewVatProfile")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.nameEnglish")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:ue.name,onChange:U=>Me({...ue,name:U.target.value}),placeholder:"e.g., Standard Rate",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.nameIcelandic")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:ue.nameIs,onChange:U=>Me({...ue,nameIs:U.target.value}),placeholder:"e.g., Venjuleg hlutfll",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.vatRatePercent")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:ue.vatRate,onChange:U=>Me({...ue,vatRate:parseFloat(U.target.value)||0}),min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center mt-6",children:[s.jsx("input",{type:"checkbox",checked:ue.isDefault,onChange:U=>Me({...ue,isDefault:U.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.setAsDefault")})]})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.descriptionEnglish")}),s.jsx("textarea",{value:ue.description,onChange:U=>Me({...ue,description:U.target.value}),placeholder:"e.g., Standard VAT rate for most products",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.descriptionIcelandic")}),s.jsx("textarea",{value:ue.descriptionIs,onChange:U=>Me({...ue,descriptionIs:U.target.value}),placeholder:"e.g., Venjuleg VSK hlutfall fyrir flestar vrur",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.assignCategories")}),s.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-3 bg-white dark:bg-gray-800",children:X.length===0?s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("adminSettings.noCategoriesAvailable")}):s.jsx("div",{className:"space-y-2",children:X.map(U=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:ue.categoryIds.includes(U.id),onChange:me=>{me.target.checked?Me({...ue,categoryIds:[...ue.categoryIds,U.id]}):Me({...ue,categoryIds:ue.categoryIds.filter($e=>$e!==U.id)})},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsxs("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:[U.name," ",U.nameIs?`(${U.nameIs})`:""]})]},U.id))})})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:ss,disabled:p,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 text-sm font-medium transition-colors",children:e(p?"adminSettings.saving":"adminSettings.saveProfile")}),s.jsx("button",{onClick:()=>{ne(!1),Oe(null)},className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 text-sm font-medium transition-colors",children:e("adminSettings.cancel")})]})]}),et?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("common.loading")})}):K.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.noVatProfilesCreated")})}):s.jsx("div",{className:"space-y-3",children:K.map(U=>s.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:U.name}),U.isDefault&&s.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded-full font-semibold",children:"Default"})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:U.nameIs}),s.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2",children:[s.jsx("span",{className:"font-medium",children:e("adminSettings.vatRateLabel")})," ",U.vatRate,"%"]}),U.categories.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:e("adminSettings.categories")}),s.jsx("div",{className:"flex flex-wrap gap-1",children:U.categories.map(me=>s.jsx("span",{className:"px-2 py-1 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-xs rounded-md border border-gray-200 dark:border-gray-600",children:me.name},me.id))})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[s.jsx("button",{onClick:()=>ii(U),className:"px-3 py-1 bg-blue-500 text-white rounded text-xs font-medium hover:bg-blue-600 transition-colors",children:e("adminSettings.edit")}),s.jsx("button",{onClick:()=>cn(U.id),className:"px-3 py-1 bg-red-500 text-white rounded text-xs font-medium hover:bg-red-600 transition-colors disabled:opacity-50",disabled:p,children:e("adminSettings.delete")})]})]})},U.id))})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(ho,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.vatInformation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.vatInformationDescription")})]})]})})]}):o==="currencies"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Wi,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:e("adminSettings.currencyManagement")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminSettings.currencyManagementDesc")})]})]})}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100",children:e("adminSettings.activeCurrency")}),s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:[(fl=y.find(U=>U.isActive))==null?void 0:fl.name," (",(Mc=y.find(U=>U.isActive))==null?void 0:Mc.code,") - ",(Rc=y.find(U=>U.isActive))==null?void 0:Rc.symbol]})]}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:(Dc=y.find(U=>U.isActive))==null?void 0:Dc.symbol})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e("adminSettings.availableCurrencies")}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(U=>s.jsx("div",{className:`p-4 border rounded-lg transition-colors duration-200 ${U.isActive?"bg-blue-50 dark:bg-blue-900/20 border-blue-300 dark:border-blue-700":"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:U.symbol}),s.jsx("span",{className:"text-xs font-medium bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-gray-100 px-2 py-1 rounded",children:U.code})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:U.name})]}),s.jsxs("div",{className:"flex gap-2 flex-col",children:[!U.isActive&&s.jsx("button",{onClick:()=>_e(U.code),className:"px-3 py-1 text-xs font-medium bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:e("adminSettings.setActive")}),U.code!=="ISK"&&!U.isActive&&s.jsxs("button",{onClick:()=>de(U.code),className:"px-3 py-1 text-xs font-medium bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-900/40 transition-colors",children:[s.jsx(er,{className:"w-3 h-3 inline mr-1"}),e("common.remove")]}),U.isActive&&s.jsx("span",{className:"px-3 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-300 rounded text-center",children:e("adminSettings.active")})]})]})},U.code))})]}),w?s.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:e("adminSettings.addNewCurrency")}),s.jsx("button",{onClick:()=>N(!1),className:"p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.currencyCode")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",maxLength:"3",value:P.code,onChange:U=>C({...P,code:U.target.value.toUpperCase()}),placeholder:"e.g., USD",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.currencySymbol")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",maxLength:"5",value:P.symbol,onChange:U=>C({...P,symbol:U.target.value}),placeholder:"e.g., $",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings.currencyName")," ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:P.name,onChange:U=>C({...P,name:U.target.value}),placeholder:"e.g., US Dollar",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:text-white"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:Pe,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium text-sm",children:[s.jsx(Wt,{className:"w-4 h-4 inline mr-2"}),e("adminSettings.addNewCurrency")]}),s.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-white rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors font-medium text-sm",children:e("common.cancel")})]})]}):s.jsxs("button",{onClick:()=>N(!0),className:"w-full px-4 py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:border-blue-400 hover:text-blue-600 dark:hover:border-blue-400 dark:hover:text-blue-400 transition-colors font-medium",children:[s.jsx(Wt,{className:"w-5 h-5 inline mr-2"}),e("adminSettings.addNewCurrency")]})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx(ho,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("adminSettings.currencyManagementGuide")}),s.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.onlyOneCurrency")]}),s.jsxs("li",{children:[" ",e("adminSettings.currencySymbolDisplay")]}),s.jsxs("li",{children:[" ",e("adminSettings.cannotDeleteActive")]}),s.jsxs("li",{children:[" ",e("adminSettings.currencyChangesSaved")]})]})]})]})})]}):null})})})]})})},m9=()=>{const{t:e}=je(),{user:t}=Se(P=>P.auth),[r,a]=_.useState(!0),[n,i]=_.useState(!1),[o,d]=_.useState(!1),[c,h]=_.useState(!1),[m,g]=_.useState({openingHours:{monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"24:00",closed:!1},sunday:{open:"12:00",close:"24:00",closed:!1}},ageRestriction:{enabled:!0,nicotineAge:18,alcoholNicotineAge:20,generalProducts:0}});_.useEffect(()=>{p()},[]);const p=async()=>{var P;a(!0);try{const C=await fetch("/api/settings?category=BUSINESS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(C.ok){const A=await C.json(),E={};(P=A.data.settings.BUSINESS)==null||P.forEach(F=>{F.key==="openingHours"?E.openingHours=JSON.parse(F.value):F.key==="ageRestrictionEnabled"?E.ageRestriction={...E.ageRestriction,enabled:F.value==="true"}:F.key==="nicotineAge"?E.ageRestriction={...E.ageRestriction,nicotineAge:parseInt(F.value)}:F.key==="alcoholNicotineAge"?E.ageRestriction={...E.ageRestriction,alcoholNicotineAge:parseInt(F.value)}:F.key==="generalProductsAge"&&(E.ageRestriction={...E.ageRestriction,generalProducts:parseInt(F.value)})}),g(F=>({...F,...E}))}}catch(C){console.error("Error loading settings:",C),q.error("Failed to load settings")}finally{a(!1)}},k=async()=>{d(!0);try{const P=[{key:"openingHours",value:JSON.stringify(m.openingHours),category:"BUSINESS",description:"Store opening hours"},{key:"ageRestrictionEnabled",value:m.ageRestriction.enabled.toString(),category:"BUSINESS",description:"Age restriction enabled"},{key:"nicotineAge",value:m.ageRestriction.nicotineAge.toString(),category:"BUSINESS",description:"Minimum age for nicotine products"},{key:"alcoholNicotineAge",value:m.ageRestriction.alcoholNicotineAge.toString(),category:"BUSINESS",description:"Minimum age for alcohol and nicotine products"},{key:"generalProductsAge",value:m.ageRestriction.generalProducts.toString(),category:"BUSINESS",description:"Minimum age for general products"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:P})})).ok)throw new Error("Failed to save settings");q.success(e("adminSettings.settingsSaved")),i(!1)}catch(P){console.error("Error saving settings:",P),q.error("Failed to save settings")}finally{d(!1)}},x=P=>{const C=m.openingHours[P],A={};Object.keys(m.openingHours).forEach(E=>{A[E]={...C}}),g(E=>({...E,openingHours:A})),i(!0),h(!1),q.success(e("adminSettings.copiedHoursToAllDays").replace("{day}",w(P)))},j=()=>{const P={...m.openingHours};["monday","tuesday","wednesday","thursday","friday"].forEach(C=>{P[C]={open:"10:00",close:"22:00",closed:!1}}),g(C=>({...C,openingHours:P})),i(!0),q.success(e("adminSettings.setWeekdayHoursSuccess"))},y=()=>{const P={...m.openingHours};["saturday","sunday"].forEach(C=>{P[C]={open:"12:00",close:"24:00",closed:!1}}),g(C=>({...C,openingHours:P})),i(!0),q.success(e("adminSettings.setWeekendHoursSuccess"))},b=()=>{const P={};Object.keys(m.openingHours).forEach(C=>{P[C]={open:"00:00",close:"23:59",closed:!1}}),g(C=>({...C,openingHours:P})),i(!0),q.success(e("adminSettings.set24hSuccess"))},w=P=>({monday:e("adminSettings.monday"),tuesday:e("adminSettings.tuesday"),wednesday:e("adminSettings.wednesday"),thursday:e("adminSettings.thursday"),friday:e("adminSettings.friday"),saturday:e("adminSettings.saturday"),sunday:e("adminSettings.sunday")})[P]||P,N=P=>{if(P.closed)return null;const C=parseInt(P.open.split(":")[0]),A=parseInt(P.open.split(":")[1]),E=parseInt(P.close.split(":")[0]),F=parseInt(P.close.split(":")[1]),I=E*60+F-(C*60+A),D=Math.floor(I/60),Y=I%60;return{hours:D,minutes:Y,total:I/60}};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ht,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Le,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Bs,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.businessSettings")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.businessDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(sa,{className:"w-5 h-5 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.quickActions")})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:j,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Qa,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekdayHours")})]}),s.jsxs("button",{onClick:y,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(Qa,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.setWeekendHours")})]}),s.jsxs("button",{onClick:b,className:"flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(nr,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.operation24h")})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>h(!c),className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md transition-colors border border-gray-200 dark:border-gray-600",children:[s.jsx(tS,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-medium",children:e("adminSettings.copyHours")})]}),c&&s.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10 overflow-hidden",children:Object.keys(m.openingHours).map(P=>s.jsxs("button",{onClick:()=>x(P),className:"w-full text-left px-4 py-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-sm text-gray-700 dark:text-gray-300 transition-colors capitalize",children:[e("adminSettings.copy")," ",w(P)]},P))})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(nr,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.openingHours")})]}),s.jsx("div",{className:"space-y-3",children:Object.entries(m.openingHours).map(([P,C])=>{const A=N(C);return s.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[s.jsx("div",{className:"col-span-2",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:w(P)})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"time",value:C.open,onChange:E=>{g(F=>({...F,openingHours:{...F.openingHours,[P]:{...C,open:E.target.value}}})),i(!0)},disabled:C.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800",title:e("adminSettings.openingTime")})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:""})}),s.jsx("div",{className:"col-span-3",children:s.jsx("input",{type:"time",value:C.close,onChange:E=>{g(F=>({...F,openingHours:{...F.openingHours,[P]:{...C,close:E.target.value}}})),i(!0)},disabled:C.closed,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50 disabled:bg-gray-100 dark:disabled:bg-gray-800",title:e("adminSettings.closingTime")})}),s.jsx("div",{className:"col-span-2 text-center",children:A?s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[A.hours,"h ",A.minutes,"m"]}):s.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:""})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:C.closed,onChange:E=>{g(F=>({...F,openingHours:{...F.openingHours,[P]:{...C,closed:E.target.checked}}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.closed")})]})})]},P)})}),s.jsx("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ho,{className:"w-5 h-5 text-gray-500 dark:text-gray-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-medium text-gray-900 dark:text-gray-100 mb-2",children:e("adminSettings.weeklySummary")}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.openDays")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(m.openingHours).filter(P=>!P.closed).length,"/7"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.totalHoursPerWeek")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[Object.values(m.openingHours).reduce((P,C)=>{const A=N(C);return P+((A==null?void 0:A.total)||0)},0).toFixed(1),"h"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.avgHoursPerDay")}),s.jsxs("span",{className:"ml-2 text-gray-900 dark:text-gray-100 font-medium",children:[(Object.values(m.openingHours).reduce((P,C)=>{const A=N(C);return P+((A==null?void 0:A.total)||0)},0)/Object.values(m.openingHours).filter(P=>!P.closed).length).toFixed(1),"h"]})]})]})]})]})})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(lt,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.ageRestriction")})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"enableAgeRestriction",checked:m.ageRestriction.enabled,onChange:P=>{g(C=>({...C,ageRestriction:{...C.ageRestriction,enabled:P.target.checked}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"enableAgeRestriction",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.enableAgeRestriction")})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.nicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.nicotineAge,onChange:P=>{g(C=>({...C,ageRestriction:{...C.ageRestriction,nicotineAge:parseInt(P.target.value)||18}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.nicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.alcoholNicotineProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.alcoholNicotineAge,onChange:P=>{g(C=>({...C,ageRestriction:{...C.ageRestriction,alcoholNicotineAge:parseInt(P.target.value)||20}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.alcoholNicotineAgeDescription")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.generalProducts")," (",e("adminSettings.years"),")"]}),s.jsx("input",{type:"number",value:m.ageRestriction.generalProducts,onChange:P=>{g(C=>({...C,ageRestriction:{...C.ageRestriction,generalProducts:parseInt(P.target.value)||0}})),i(!0)},disabled:!m.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings.generalProductsDescription")})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.ageRestrictionNotice")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.ageRestrictionDescription")})]})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:k,disabled:o||!n,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?s.jsx(ht,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Tr,{className:"w-4 h-4 mr-2"}),e(o?"common.loading":"adminSettings.saveChanges")]})})})]})})},g9=()=>{const{t:e,currentLanguage:t}=je(),{user:r}=Se(b=>b.auth),[a,n]=_.useState(!0),[i,o]=_.useState([]),[d,c]=_.useState(!1),[h,m]=_.useState({});_.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const b=await fetch("/api/shipping/active",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const w=await b.json();o(w.data||[])}}catch(b){console.error("Error loading shipping options:",b),q.error("Failed to load shipping options")}finally{n(!1)}},p=async(b,w)=>{try{if((await fetch(`/api/shipping/${b}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:w})})).ok)o(P=>P.map(C=>C.id===b?{...C,isEnabled:w}:C)),q.success(`Shipping option ${w?"enabled":"disabled"} successfully`);else throw new Error("Failed to toggle shipping option")}catch(N){console.error("Error toggling shipping option:",N),q.error("Failed to toggle shipping option")}},k=async b=>{if(window.confirm(e("adminSettings.confirmDeleteShipping")))try{if((await fetch(`/api/shipping/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)o(N=>N.filter(P=>P.id!==b)),q.success("Shipping option deleted successfully");else throw new Error("Failed to delete shipping option")}catch(w){console.error("Error deleting shipping option:",w),q.error("Failed to delete shipping option")}},x=async b=>{try{const w=await fetch("/api/shipping",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(b)});if(w.ok){const N=await w.json();o(P=>[...P,N.data]),c(!1),m({}),q.success("Shipping option created successfully")}else throw new Error("Failed to create shipping option")}catch(w){console.error("Error creating shipping option:",w),q.error("Failed to create shipping option")}},j=async(b,w)=>{try{const N=await fetch(`/api/shipping/${b}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(w)});if(N.ok){const P=await N.json();o(C=>C.map(A=>A.id===b?P.data:A)),c(!1),m({}),q.success("Shipping option updated successfully")}else throw new Error("Failed to update shipping option")}catch(N){console.error("Error updating shipping option:",N),q.error("Failed to update shipping option")}};if((r==null?void 0:r.role)!=="ADMIN")return s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ht,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})});if(a)return s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})});const y=()=>d?s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:h.id?e("adminSettings.editShippingOption"):e("adminSettings.addShippingOption")}),s.jsx("button",{onClick:()=>{c(!1),m({})},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:b=>{b.preventDefault();const w=new FormData(b.target),N=Object.fromEntries(w.entries());N.fee=parseFloat(N.fee)||0,N.estimatedDays=parseInt(N.estimatedDays)||1,N.sortOrder=parseInt(N.sortOrder)||0,h.id?j(h.id,N):x(N)},children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.nameEnglish")}),s.jsx("input",{type:"text",name:"name",defaultValue:h.name||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.nameIcelandic")}),s.jsx("input",{type:"text",name:"nameIs",defaultValue:h.nameIs||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.type")}),s.jsxs("select",{name:"type",defaultValue:h.type||"DELIVERY",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"DELIVERY",children:e("adminSettings.delivery")}),s.jsx("option",{value:"PICKUP",children:e("adminSettings.pickup")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.price")," (ISK)"]}),s.jsx("input",{type:"number",name:"fee",defaultValue:h.fee||0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.estimatedDays")}),s.jsx("input",{type:"number",name:"estimatedDays",defaultValue:h.estimatedDays||1,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.sortOrder")}),s.jsx("input",{type:"number",name:"sortOrder",defaultValue:h.sortOrder||0,min:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.descriptionEnglish")}),s.jsx("textarea",{name:"description",defaultValue:h.description||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.descriptionIcelandic")}),s.jsx("textarea",{name:"descriptionIs",defaultValue:h.descriptionIs||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>{c(!1),m({})},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:e("adminSettings.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:h.id?e("adminSettings.update"):e("adminSettings.create")})]})]})]})})}):null;return s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Le,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Bs,{className:"w-5 h-5"})}),s.jsx(yr,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.shipping")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.shippingDescription")})]})]}),s.jsxs("button",{onClick:()=>{m({}),c(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),e("adminSettings.addShippingOption")]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.map(b=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(yr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t==="is"?b.nameIs:b.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t==="is"?b.name:b.nameIs})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>k(b.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:e("adminSettings.delete"),children:s.jsx(er,{className:"h-4 w-4"})}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b.isEnabled,onChange:w=>p(b.id,w.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:t==="is"?b.descriptionIs:b.description}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-4 leading-relaxed italic",children:t==="is"?b.description:b.descriptionIs}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${b.isEnabled?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:b.isEnabled?e("adminSettings.enabled"):e("adminSettings.disabled")})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[b.fee," ISK"]}),s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:b.type})]})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsx("button",{onClick:()=>{m(b),c(!0)},className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:e("adminSettings.edit")})})]},b.id))}),i.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(yr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminSettings.noShippingOptions")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminSettings.noShippingOptionsDescription")}),s.jsxs("button",{onClick:()=>{m({}),c(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),e("adminSettings.addFirstShippingOption")]})]})]})}),y()]})})},f9=()=>{const{t:e}=je(),{user:t}=Se(b=>b.auth),[r,a]=_.useState(!0),[n,i]=_.useState(!1),[o,d]=_.useState(!1),[c,h]=_.useState({enabled:!0,rate:24,country:"IS",displayInAdmin:!0,includeInCustomerPrice:!0,showVatBreakdown:!1}),[m,g]=_.useState([]),[p,k]=_.useState({});_.useEffect(()=>{x(),j()},[]);const x=async()=>{var b;a(!0);try{const w=await fetch("/api/settings?category=VAT",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(w.ok){const N=await w.json(),P={};(b=N.data.settings.VAT)==null||b.forEach(C=>{C.key==="vatEnabled"?P.enabled=C.value==="true":C.key==="vatRate"?P.rate=parseFloat(C.value):C.key==="vatCountry"?P.country=C.value:C.key==="vatDisplayInAdmin"?P.displayInAdmin=C.value==="true":C.key==="vatIncludeInCustomerPrice"?P.includeInCustomerPrice=C.value==="true":C.key==="vatShowBreakdown"&&(P.showVatBreakdown=C.value==="true")}),h(C=>({...C,...P}))}}catch(w){console.error("Error loading settings:",w),q.error("Failed to load settings")}finally{a(!1)}},j=async()=>{try{const b=await fetch("/api/categories?limit=100",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const w=await b.json();g(w.categories||[]);const N={};(w.categories||[]).forEach(P=>{N[P.id]=P.vatRate||null}),k(N)}}catch(b){console.error("Error loading categories:",b)}},y=async()=>{d(!0);try{const b=[{key:"vatEnabled",value:c.enabled.toString(),category:"VAT",description:"VAT enabled"},{key:"vatRate",value:c.rate.toString(),category:"VAT",description:"VAT rate"},{key:"vatCountry",value:c.country,category:"VAT",description:"VAT country"},{key:"vatDisplayInAdmin",value:c.displayInAdmin.toString(),category:"VAT",description:"Show VAT in admin"},{key:"vatIncludeInCustomerPrice",value:c.includeInCustomerPrice.toString(),category:"VAT",description:"Include VAT in customer price"},{key:"vatShowBreakdown",value:c.showVatBreakdown.toString(),category:"VAT",description:"Show VAT breakdown"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:b})})).ok)throw new Error("Failed to save settings");for(const[N,P]of Object.entries(p))try{await fetch(`/api/categories/${N}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({vatRate:P===null?null:parseFloat(P)})})}catch(C){console.error(`Error saving VAT rate for category ${N}:`,C)}q.success(e("adminSettings.settingsSaved")),i(!1)}catch(b){console.error("Error saving settings:",b),q.error("Failed to save settings")}finally{d(!1)}};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ht,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Le,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Bs,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.vatSettings")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.vatDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(wm,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.vatSettings")})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings.vatConfiguration")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"vatEnabled",checked:c.enabled,onChange:b=>{h(w=>({...w,enabled:b.target.checked})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),s.jsx("label",{htmlFor:"vatEnabled",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.vatEnabled")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings.vatRate")," (%)"]}),s.jsx("input",{type:"number",value:c.rate,onChange:b=>{h(w=>({...w,rate:parseFloat(b.target.value)||0})),i(!0)},disabled:!c.enabled,min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"24.00"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings.country")}),s.jsxs("select",{name:"country",value:c.country,onChange:b=>{h(w=>({...w,country:b.target.value})),i(!0)},disabled:!c.enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"IS",children:e("adminSettings.iceland")}),s.jsx("option",{value:"EU",children:e("adminSettings.euCountries")}),s.jsx("option",{value:"OTHER",children:e("adminSettings.otherCountries")})]})]})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[s.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.vatInformation")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.vatInformationDescription")})]})})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings.vatDisplaySettings")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showVatInAdmin",checked:c.displayInAdmin,onChange:b=>{h(w=>({...w,displayInAdmin:b.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"showVatInAdmin",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatInAdmin")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.showVatInAdminDescription")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"includeVatInCustomerPrice",checked:c.includeInCustomerPrice,onChange:b=>{h(w=>({...w,includeInCustomerPrice:b.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"includeVatInCustomerPrice",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.includeVatInCustomerPrice")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.includeVatInCustomerPriceDescription")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showVatBreakdown",checked:c.showVatBreakdown,onChange:b=>{h(w=>({...w,showVatBreakdown:b.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),s.jsxs("div",{className:"ml-2",children:[s.jsx("label",{htmlFor:"showVatBreakdown",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.showVatBreakdown")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.showVatBreakdownDescription")})]})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4 flex items-center",children:[s.jsx(hd,{className:"w-5 h-5 mr-2"}),"Category VAT Rates (Optional)"]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Set different VAT rates for specific product categories. Leave blank to use the default VAT rate above."}),s.jsx("div",{className:"space-y-4",children:m.map(b=>s.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/30 rounded-md",children:[s.jsx("div",{className:"flex-1",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:b.nameIs||b.name})}),s.jsx("div",{className:"w-32",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",value:p[b.id]===null?"":p[b.id]||"",onChange:w=>{const N=w.target.value===""?null:parseFloat(w.target.value);k(P=>({...P,[b.id]:N})),i(!0)},disabled:!c.enabled,min:"0",max:"100",step:"0.01",placeholder:"Default",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white disabled:opacity-50"}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"%"})]})})]},b.id))})]})]})}),s.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:s.jsxs("button",{onClick:y,disabled:o||!n,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?s.jsx(ht,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(Tr,{className:"w-4 h-4 mr-2"}),e(o?"common.loading":"adminSettings.saveChanges")]})})})]})})},p9=()=>{const{t:e}=je(),{user:t}=Se(j=>j.auth),[r,a]=_.useState(!0),[n,i]=_.useState(!1),[o,d]=_.useState(!1),[c,h]=_.useState({}),[m,g]=_.useState({});_.useEffect(()=>{p()},[]);const p=async()=>{var j;a(!0);try{const y=await fetch("/api/settings?category=API_KEYS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(y.ok){const b=await y.json(),w={};(j=b.data.settings.API_KEYS)==null||j.forEach(N=>{w[N.key]=N.value||""}),h(w)}}catch(y){console.error("Error loading settings:",y),q.error("Failed to load settings")}finally{a(!1)}},k=async(j,y)=>{d(!0);try{const b=[{key:j,value:y,category:"API_KEYS",description:`${j} API key`}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:b})})).ok)throw new Error("Failed to save API key");q.success(e("adminSettings.settingsSaved")),i(!1)}catch(b){console.error("Error saving API key:",b),q.error("Failed to save API key")}finally{d(!1)}},x=j=>{g(y=>({...y,[j]:!y[j]}))};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ht,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("admin.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("admin.accessDeniedMessage")})]})})}):r?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Le,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Bs,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.apiKeysDescription")})]})]})})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx(dc,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings.apiKeys")})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings.apiKeysConfiguration")}),s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings.apiKeysDescription")})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-pink-600 dark:text-pink-400 font-semibold text-sm",children:"U"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.unsplashApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.unsplashDevelopers")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.unsplash?"text":"password",placeholder:e("adminSettings.enterUnsplashApiKey"),value:c.unsplash||"",onChange:j=>{h(y=>({...y,unsplash:j.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("unsplash"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.unsplash?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{disabled:o||!n,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:"P"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pexelsApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pexelsApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.pexels?"text":"password",placeholder:e("adminSettings.enterPexelsApiKey"),value:c.pexels||"",onChange:j=>{h(y=>({...y,pexels:j.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("pexels"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.pexels?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>k("pexels",c.pexels||""),disabled:o||!n,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold text-sm",children:"PX"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.pixabayApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.pixabayApi")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.pixabay?"text":"password",placeholder:e("adminSettings.enterPixabayApiKey"),value:c.pixabay||"",onChange:j=>{h(y=>({...y,pixabay:j.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("pixabay"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.pixabay?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>k("pixabay",c.pixabay||""),disabled:o||!n,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]})]}),s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mr-3",children:s.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold text-sm",children:"G"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings.googleApiKey")}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings.googleCloudConsole")})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2",children:""}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:m.google?"text":"password",placeholder:e("adminSettings.enterGoogleApiKey"),value:c.google||"",onChange:j=>{h(y=>({...y,google:j.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{type:"button",onClick:()=>x("google"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m.google?s.jsx(Er,{className:"h-4 w-4 text-gray-400"}):s.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),s.jsx("button",{onClick:()=>k("google",c.google||""),disabled:o||!n,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.save")})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("input",{type:"text",placeholder:e("adminSettings.enterGoogleSearchEngineId"),value:c.googleSearchEngineId||"",onChange:j=>{h(y=>({...y,googleSearchEngineId:j.target.value})),i(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("button",{onClick:()=>k("googleSearchEngineId",c.googleSearchEngineId||""),disabled:o||!n,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:o?s.jsx(ht,{className:"w-4 h-4 animate-spin"}):e("adminSettings.test")})]})]})]})]}),s.jsxs("div",{className:"mt-8 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-3",children:e("adminSettings.importantNotes")}),s.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote1")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote2")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote3")]}),s.jsxs("li",{children:[" ",e("adminSettings.apiKeysImportantNote4")]})]})]})]})})]})})},x9=()=>{const{t:e}=je();return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Le,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:s.jsx(Bs,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.paymentGateways")}),s.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings.paymentGatewayDescription")})]})]})})})},W4=({gateway:e,onToggle:t,onTest:r,onEdit:a})=>{var i,o;const{t:n}=je();return s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(Ea,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:e.displayName}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.provider})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-400 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20",title:n("adminSettings.testConnection"),children:s.jsx(ix,{className:"h-4 w-4"})}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.isEnabled,onChange:d=>t(e.id,d.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:e.description}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${e.isEnabled?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.isEnabled?n("adminSettings.enabled"):n("adminSettings.disabled")})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.environment})})]}),s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[(i=e.supportedMethods)==null?void 0:i.slice(0,4).map(d=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:d},d)),((o=e.supportedMethods)==null?void 0:o.length)>4&&s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:["+",e.supportedMethods.length-4]})]})}),s.jsx("div",{className:"flex space-x-3",children:s.jsx("button",{onClick:()=>a(e),className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:n("adminSettings.edit")})})]})};W4.propTypes={gateway:xe.shape({id:xe.number.isRequired,displayName:xe.string.isRequired,provider:xe.string.isRequired,description:xe.string,isEnabled:xe.bool.isRequired,environment:xe.string.isRequired,supportedMethods:xe.arrayOf(xe.string)}).isRequired,onToggle:xe.func.isRequired,onTest:xe.func.isRequired,onEdit:xe.func.isRequired};const y9=({onAddGateway:e})=>{const{t}=je();return s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ea,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("adminSettings.noPaymentGateways")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t("adminSettings.noPaymentGatewaysDescription")}),s.jsxs("button",{onClick:e,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),t("adminSettings.addFirstPaymentGateway")]})]})},b9=()=>{const{t:e}=je();return s.jsx(s.Fragment,{children:s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5",children:""}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminSettings.paymentGatewayConfiguration")}),s.jsx("p",{children:e("adminSettings.paymentGatewayDescription")})]})]})})})},q4=({isOpen:e,onClose:t,gatewayData:r,onSave:a})=>{const{t:n}=je(),[i,o]=_.useState({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}}),[d,c]=_.useState({}),[h,m]=_.useState(!1);_.useEffect(()=>{r&&e?o({displayName:r.displayName||"",provider:r.provider||"",description:r.description||"",environment:r.environment||"sandbox",isEnabled:r.isEnabled||!1,supportedMethods:r.supportedMethods||[],merchantId:r.merchantId||"",apiKey:r.apiKey||"",secretKey:r.secretKey||"",webhookSecret:r.webhookSecret||"",accessKey:r.accessKey||"",publishableKey:r.publishableKey||"",clientId:r.clientId||"",clientSecret:r.clientSecret||"",applicationId:r.applicationId||"",paymentGatewayId:r.paymentGatewayId||"",privateKey:r.privateKey||"",publicKey:r.publicKey||"",config:r.config||{}}):e&&o({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}})},[r,e]),_.useEffect(()=>{if(!e)return;const y=b=>{b.key==="Escape"&&t()};return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[e,t]);const g=async y=>{y.preventDefault();try{await a(i),t()}catch(b){console.error("Error saving payment gateway:",b),q.error(n("adminSettings.errorSavingPaymentGateway"))}},p=y=>{const{name:b,value:w,type:N,checked:P}=y.target;o(C=>({...C,[b]:N==="checkbox"?P:w}))},k=y=>{c(b=>({...b,[y]:!b[y]}))},x=async()=>{if(!i.provider){q.error(n("adminSettings.pleaseSelectProvider"));return}m(!0);try{const y=await fetch("/api/payment-gateways/test",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({provider:i.provider,environment:i.environment,...i})}),b=await y.json();y.ok?q.success(n("adminSettings.connectionTestSuccessful")):q.error(b.message||n("adminSettings.connectionTestFailed"))}catch(y){console.error("Connection test error:",y),q.error(n("adminSettings.connectionTestFailed"))}finally{m(!1)}},j=()=>{switch(i.provider){case"valitor":return[{name:"merchantId",label:n("adminSettings.merchantId"),type:"text",required:!0,placeholder:n("adminSettings.enterMerchantId")},{name:"apiKey",label:n("adminSettings.apiKey"),type:"password",required:!0,placeholder:n("adminSettings.enterApiKey")},{name:"secretKey",label:n("adminSettings.secretKey"),type:"password",required:!0,placeholder:n("adminSettings.enterSecretKey")},{name:"webhookSecret",label:n("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings.enterWebhookSecret")}];case"rapyd":return[{name:"accessKey",label:n("adminSettings.accessKey"),type:"password",required:!0,placeholder:n("adminSettings.enterAccessKey")},{name:"secretKey",label:n("adminSettings.secretKey"),type:"password",required:!0,placeholder:n("adminSettings.enterSecretKey")},{name:"webhookSecret",label:n("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings.enterWebhookSecret")}];case"stripe":return[{name:"publishableKey",label:n("adminSettings.publishableKey"),type:"password",required:!0,placeholder:n("adminSettings.enterPublishableKey")},{name:"secretKey",label:n("adminSettings.secretKey"),type:"password",required:!0,placeholder:n("adminSettings.enterSecretKey")},{name:"webhookSecret",label:n("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings.enterWebhookSecret")}];case"paypal":return[{name:"clientId",label:n("adminSettings.clientId"),type:"password",required:!0,placeholder:n("adminSettings.enterClientId")},{name:"clientSecret",label:n("adminSettings.clientSecret"),type:"password",required:!0,placeholder:n("adminSettings.enterClientSecret")},{name:"webhookSecret",label:n("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings.enterWebhookSecret")}];case"netgiro":return[{name:"applicationId",label:n("adminSettings.applicationId"),type:"text",required:!0,placeholder:n("adminSettings.enterApplicationId")},{name:"secretKey",label:n("adminSettings.secretKey"),type:"password",required:!0,placeholder:n("adminSettings.enterSecretKey")},{name:"webhookSecret",label:n("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings.enterWebhookSecret")}];case"teya":return[{name:"merchantId",label:n("adminSettings.merchantId"),type:"text",required:!0,placeholder:n("adminSettings.enterMerchantId")},{name:"paymentGatewayId",label:n("adminSettings.paymentGatewayId"),type:"text",required:!0,placeholder:n("adminSettings.enterPaymentGatewayId")},{name:"secretKey",label:n("adminSettings.secretKey"),type:"password",required:!0,placeholder:n("adminSettings.enterSecretKey")},{name:"privateKey",label:n("adminSettings.privateKey"),type:"password",required:!1,placeholder:n("adminSettings.enterPrivateKey")},{name:"publicKey",label:n("adminSettings.publicKey"),type:"password",required:!1,placeholder:n("adminSettings.enterPublicKey")},{name:"webhookSecret",label:n("adminSettings.webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings.enterWebhookSecret")}];default:return[]}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r!=null&&r.id?n("adminSettings.editPaymentGateway"):n("adminSettings.addPaymentGateway")}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:g,className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings.displayName")}),s.jsx("input",{type:"text",name:"displayName",value:i.displayName,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings.provider")}),s.jsxs("select",{name:"provider",value:i.provider,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0,children:[s.jsx("option",{value:"",children:n("adminSettings.selectPaymentProvider")}),s.jsx("option",{value:"valitor",children:n("adminSettings.valitor")}),s.jsx("option",{value:"rapyd",children:n("adminSettings.rapyd")}),s.jsx("option",{value:"stripe",children:n("adminSettings.stripe")}),s.jsx("option",{value:"paypal",children:n("adminSettings.paypal")}),s.jsx("option",{value:"netgiro",children:n("adminSettings.netgiro")}),s.jsx("option",{value:"teya",children:n("adminSettings.teya")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings.description")}),s.jsx("textarea",{name:"description",value:i.description,onChange:p,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings.environment")}),s.jsxs("select",{name:"environment",value:i.environment,onChange:p,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"sandbox",children:n("adminSettings.sandbox")}),s.jsx("option",{value:"production",children:n("adminSettings.production")})]})]}),i.provider&&s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:i.provider?`${i.provider.charAt(0).toUpperCase()+i.provider.slice(1)} ${n("adminSettings.configuration")}`:n("adminSettings.configuration")}),s.jsxs("button",{type:"button",onClick:x,disabled:h,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[s.jsx(Yy,{className:"h-4 w-4 mr-2"}),n(h?"adminSettings.testing":"adminSettings.testConnection")]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j().map(y=>s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[y.label,y.required&&s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:y.type==="password"&&!d[y.name]?"password":"text",name:y.name,value:i[y.name]||"",onChange:p,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:y.required,placeholder:n("adminSettings.enterFieldLabel",{fieldLabel:y.label.toLowerCase()})}),y.type==="password"&&s.jsx("button",{type:"button",onClick:()=>k(y.name),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:d[y.name]?s.jsx(Er,{className:"h-4 w-4"}):s.jsx(Yt,{className:"h-4 w-4"})})]})]},y.name))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings.supportedPaymentMethods")}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["card","visa","mastercard","amex","diners","jcb","paypal","apple_pay","google_pay","bank_transfer","sepa","ideal","sofort","giropay","eps","bancontact"].map(y=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:i.supportedMethods.includes(y),onChange:b=>{b.target.checked?o(w=>({...w,supportedMethods:[...w.supportedMethods,y]})):o(w=>({...w,supportedMethods:w.supportedMethods.filter(N=>N!==y)}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 capitalize",children:y.replace("_"," ")})]},y))})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:"isEnabled",checked:i.isEnabled,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:n("adminSettings.enabled")})]}),s.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.provider&&s.jsxs("p",{children:[s.jsx("strong",{children:"Provider:"})," ",i.provider.charAt(0).toUpperCase()+i.provider.slice(1)," |",s.jsx("strong",{children:" Environment:"})," ",i.environment]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md transition-colors",children:n("adminSettings.cancel")}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(Tr,{className:"h-4 w-4 mr-2"}),r!=null&&r.id?n("adminSettings.updateGateway"):n("adminSettings.createGateway")]})]})]})]})]})}):null};q4.propTypes={isOpen:xe.bool.isRequired,onClose:xe.func.isRequired,gatewayData:xe.shape({id:xe.string,displayName:xe.string,provider:xe.string,description:xe.string,environment:xe.string,isEnabled:xe.bool,supportedMethods:xe.arrayOf(xe.string),merchantId:xe.string,apiKey:xe.string,secretKey:xe.string,webhookSecret:xe.string,accessKey:xe.string,publishableKey:xe.string,clientId:xe.string,clientSecret:xe.string,applicationId:xe.string,paymentGatewayId:xe.string,privateKey:xe.string,publicKey:xe.string,config:xe.object}),onSave:xe.func.isRequired};const v9=()=>{const{t:e}=je(),{user:t}=Se(y=>y.auth),[r,a]=_.useState(!0),[n,i]=_.useState([]),[o,d]=_.useState(!1),[c,h]=_.useState({});_.useEffect(()=>{m()},[]);const m=_.useCallback(async()=>{a(!0);try{const y=await fetch("/api/payment-gateways",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(y.ok){const b=await y.json();i(b.data.gateways||[])}}catch(y){console.error("Error loading payment gateways:",y),q.error(e("adminSettings.errorLoadingPaymentGateways"))}finally{a(!1)}},[e]),g=async(y,b)=>{try{if((await fetch(`/api/payment-gateways/${y}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:b})})).ok)i(N=>N.map(P=>P.id===y?{...P,isEnabled:b}:P)),q.success(e(b?"adminSettings.paymentGatewayEnabled":"adminSettings.paymentGatewayDisabled"));else throw new Error(e("adminSettings.errorTogglingPaymentGateway"))}catch(w){console.error("Error toggling payment gateway:",w),q.error(e("adminSettings.errorTogglingPaymentGateway"))}},p=async y=>{try{const b=await fetch(`/api/payment-gateways/${y}/test`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok)q.success(e("adminSettings.paymentGatewayTestSuccessful"));else{const w=await b.json();q.error(e("adminSettings.paymentGatewayTestFailed",{message:w.message||"Unknown error"}))}}catch(b){console.error("Error testing payment gateway:",b),q.error(e("adminSettings.errorTestingPaymentGateway"))}},k=y=>{h(y),d(!0)},x=async y=>{try{if((await fetch(`/api/payment-gateways/${y.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(y)})).ok)await m(),q.success(e("adminSettings.paymentGatewayUpdatedSuccessfully"));else throw new Error(e("adminSettings.errorUpdatingPaymentGateway"))}catch(b){throw console.error("Error updating payment gateway:",b),q.error(e("adminSettings.errorUpdatingPaymentGateway")),b}},j=()=>{d(!1),h({})};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx("div",{className:"text-red-400 mb-4",children:s.jsx(ht,{className:"w-16 h-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminSettings.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:e("adminSettings.noPermissionMessage")})]})})}):r?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(x9,{}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[s.jsx(b9,{}),n.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(y=>s.jsx(W4,{gateway:y,onToggle:g,onTest:p,onEdit:k},y.id))}):s.jsx(y9,{})]})}),s.jsx(q4,{isOpen:o,onClose:j,gatewayData:c,onSave:x})]})})},k9=()=>{const{t:e}=je(),t=ut(),{settings:r,isLoading:a,uploadProgress:n}=Se(b=>b.receiptSettings),[i,o]=_.useState({companyName:"",companyNameIs:"",companyAddress:"",companyAddressIs:"",companyPhone:"",companyEmail:"",companyWebsite:"",taxId:"",headerColor:"#1e40af",headerGradient:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",useGradient:!1,accentColor:"#3b82f6",fontFamily:"Inter, system-ui, sans-serif",fontSize:"14px",footerText:"",footerTextIs:"",showBarcode:!0,showQrCode:!0,template:"modern",paperSize:"80mm",logoInversion:"none"}),d=[{name:"Blue Gradient",value:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)"},{name:"Purple Gradient",value:"linear-gradient(135deg, #7c3aed 0%, #d946ef 100%)"},{name:"Green Gradient",value:"linear-gradient(135deg, #059669 0%, #10b981 100%)"},{name:"Orange Gradient",value:"linear-gradient(135deg, #ea580c 0%, #f97316 100%)"},{name:"Red Gradient",value:"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)"},{name:"Teal Gradient",value:"linear-gradient(135deg, #0d9488 0%, #14b8a6 100%)"},{name:"Pink Gradient",value:"linear-gradient(135deg, #ec4899 0%, #f43f5e 100%)"},{name:"Indigo Gradient",value:"linear-gradient(135deg, #4f46e5 0%, #6366f1 100%)"}],[c,h]=_.useState(!0),[m,g]=_.useState(!1);_.useEffect(()=>{t($o())},[t]),_.useEffect(()=>{r&&o({companyName:r.companyName||"",companyNameIs:r.companyNameIs||"",companyAddress:r.companyAddress||"",companyAddressIs:r.companyAddressIs||"",companyPhone:r.companyPhone||"",companyEmail:r.companyEmail||"",companyWebsite:r.companyWebsite||"",taxId:r.taxId||"",headerColor:r.headerColor||"#1e40af",headerGradient:r.headerGradient||"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)",useGradient:r.useGradient||!1,accentColor:r.accentColor||"#3b82f6",fontFamily:r.fontFamily||"Inter, system-ui, sans-serif",fontSize:r.fontSize||"14px",footerText:r.footerText||"",footerTextIs:r.footerTextIs||"",showBarcode:r.showBarcode!==void 0?r.showBarcode:!0,showQrCode:r.showQrCode!==void 0?r.showQrCode:!0,template:r.template||"modern",paperSize:r.paperSize||"80mm",logoInversion:r.logoInversion||"none"})},[r]),_.useEffect(()=>{n===100&&(q.success(e("adminSettings.logoUploadedSuccessfully")),setTimeout(()=>{t({type:"receiptSettings/setUploadProgress",payload:0})},1e3))},[n,t,e]);const p=(b,w)=>{o(N=>({...N,[b]:w})),t(bA({field:b,value:w}))},k=b=>{const w=b.target.files[0];if(w){if(w.size>5*1024*1024){q.error(e("adminSettings.fileSizeTooLarge"));return}if(!w.type.startsWith("image/")){q.error(e("adminSettings.invalidFileType"));return}t(gh(w)).then(N=>{var P;(P=N.payload)!=null&&P.error&&q.error(N.payload.error)}).catch(N=>{q.error(e("adminSettings.logoUploadFailed")),console.error("Upload error:",N)})}},x=async()=>{g(!0);try{await t(mh(i)).unwrap(),q.success(e("adminSettings.receiptSettingsSaved"))}catch(b){q.error(b||e("adminSettings.failedToSaveSettings"))}finally{g(!1)}},j=()=>{window.confirm(e("adminSettings.confirmDeleteLogo"))&&t(fh())},y=()=>{const b=i.useGradient?i.headerGradient:i.headerColor,w=r!=null&&r.logoUrl?`${"https://olfong.olibuijr.com/api".replace("/api","")}${r.logoUrl}`:null;let N="";return i.logoInversion==="always"?N="filter: invert(1);":i.logoInversion==="theme-aware"&&(N=document.documentElement.classList.contains("dark")?"filter: invert(1);":""),`
      <div class="receipt receipt-${i.template}" style="max-width: ${i.paperSize==="80mm"?"300px":"100%"}; margin: 0 auto; font-family: ${i.fontFamily}; font-size: ${i.fontSize}; background: white; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">
        <div class="header" style="background: ${b}; color: white; text-align: center; padding: 15px;">
          ${w?`<div style="display: flex; justify-content: center; margin-bottom: 10px;"><img src="${w}" alt="${i.companyNameIs||i.companyName}" style="max-height: 48px; ${N}" /></div>`:`<h1 style="font-size: 18px; font-weight: bold; margin: 0 0 5px 0;">${i.companyNameIs||i.companyName}</h1>`}
          ${i.companyAddress?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyAddressIs||i.companyAddress}</div>`:""}
          ${i.companyPhone?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyPhone}</div>`:""}
          ${i.companyEmail?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${i.companyEmail}</div>`:""}
        </div>
        
        <div class="content" style="padding: 15px;">
          <div class="order-info" style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e5e7eb;">
            <div style="font-weight: bold; font-size: 16px; color: ${i.accentColor}; margin-bottom: 5px;">Pntun: #12345</div>
            <div style="display: flex; justify-content: space-between; font-size: 12px; color: #6b7280;">
              <span>Dagsetning: ${new Date().toLocaleDateString()}</span>
              <span>Staa: CONFIRMED</span>
            </div>
          </div>

          <div class="items" style="margin-bottom: 15px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Vn - Rauvn</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 2  2,500 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">5,000 ISK</div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Bjr - Pilsner</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 1  800 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">800 ISK</div>
            </div>
          </div>

          <div class="totals" style="border-top: 2px solid ${i.accentColor}; padding-top: 10px; margin-top: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Vrur:</span>
              <span>5,800 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Sending:</span>
              <span>500 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 16px; color: ${i.headerColor}; border-top: 1px solid #e5e7eb; padding-top: 8px; margin-top: 8px;">
              <span>Heildarupph:</span>
              <span>6,300 ISK</span>
            </div>
          </div>
        </div>

        <div class="footer" style="text-align: center; padding: 15px; background: #f9fafb; font-size: 11px; color: #6b7280;">
          ${i.footerTextIs||i.footerText||"Takk fyrir viskiptin!"}
        </div>
      </div>
    `};return a&&!r?s.jsx(Ae,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(At,{className:"w-8 h-8 animate-spin text-blue-600"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminSettings.receiptSettings")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminSettings.receiptSettingsDescription")})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(us,{className:"w-5 h-5 mr-2"}),e("adminSettings.companyInformation")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.companyNameEnglish")}),s.jsx("input",{type:"text",value:i.companyName,onChange:b=>p("companyName",b.target.value),className:"input w-full",placeholder:"lfng"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.companyNameIcelandic")}),s.jsx("input",{type:"text",value:i.companyNameIs,onChange:b=>p("companyNameIs",b.target.value),className:"input w-full",placeholder:"lfng"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.addressEnglish")}),s.jsx("input",{type:"text",value:i.companyAddress,onChange:b=>p("companyAddress",b.target.value),className:"input w-full",placeholder:"Reykjavk, Iceland"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.addressIcelandic")}),s.jsx("input",{type:"text",value:i.companyAddressIs,onChange:b=>p("companyAddressIs",b.target.value),className:"input w-full",placeholder:"Reykjavk, sland"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.phone")}),s.jsx("input",{type:"tel",value:i.companyPhone,onChange:b=>p("companyPhone",b.target.value),className:"input w-full",placeholder:"+354 555 1234"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.email")}),s.jsx("input",{type:"email",value:i.companyEmail,onChange:b=>p("companyEmail",b.target.value),className:"input w-full",placeholder:"info@olfong.is"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.website")}),s.jsx("input",{type:"url",value:i.companyWebsite,onChange:b=>p("companyWebsite",b.target.value),className:"input w-full",placeholder:"www.olfong.is"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.taxId")}),s.jsx("input",{type:"text",value:i.taxId,onChange:b=>p("taxId",b.target.value),className:"input w-full",placeholder:"1234567890"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(xr,{className:"w-5 h-5 mr-2"}),e("adminSettings.logo")]}),s.jsxs("div",{className:"space-y-4",children:[r!=null&&r.logoUrl?s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-32 h-32 border border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 p-2 flex items-center justify-center",children:s.jsx("img",{src:`${"https://olfong.olibuijr.com/api".replace("/api","")}${r.logoUrl}`,alt:"Company Logo",className:"max-w-full max-h-full object-contain"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("adminSettings.currentLogo")}),s.jsxs("button",{onClick:j,className:"text-red-600 hover:text-red-800 text-sm flex items-center mt-1",children:[s.jsx(er,{className:"w-4 h-4 mr-1"}),e("adminSettings.remove")]})]})]}):s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[s.jsx(xr,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:e("adminSettings.noLogoUploaded")}),s.jsx("p",{className:"text-sm text-gray-500",children:e("adminSettings.uploadLogoDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.uploadLogo")}),s.jsx("input",{type:"file",accept:"image/*",onChange:k,className:"input w-full"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e("adminSettings.uploadLogoFormats")})]}),n>0&&n<100&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})}),(r==null?void 0:r.logoUrl)&&s.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings.logoColorMode")}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"logoInversion",value:"none",checked:i.logoInversion==="none",onChange:b=>p("logoInversion",b.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.logoNoInversion")})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"logoInversion",value:"theme-aware",checked:i.logoInversion==="theme-aware",onChange:b=>p("logoInversion",b.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.logoThemeAware")})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",name:"logoInversion",value:"always",checked:i.logoInversion==="always",onChange:b=>p("logoInversion",b.target.value),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.logoAlwaysInvert")})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(rA,{className:"w-5 h-5 mr-2"}),e("adminSettings.designColors")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.headerColor")}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",checked:!i.useGradient,onChange:()=>p("useGradient",!1),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.solidColor")})]}),s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"radio",checked:i.useGradient,onChange:()=>p("useGradient",!0),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.gradientColor")})]})]}),!i.useGradient&&s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("input",{type:"color",value:i.headerColor,onChange:b=>p("headerColor",b.target.value),className:"w-12 h-10 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:i.headerColor,onChange:b=>p("headerColor",b.target.value),className:"input flex-1"})]}),i.useGradient&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:d.map(b=>s.jsx("button",{onClick:()=>p("headerGradient",b.value),className:`p-3 rounded-lg border-2 transition-all ${i.headerGradient===b.value?"border-blue-500":"border-gray-300 dark:border-gray-600"}`,style:{background:b.value,minHeight:"60px"},title:b.name},b.value))}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.customGradient")}),s.jsx("textarea",{value:i.headerGradient,onChange:b=>p("headerGradient",b.target.value),className:"input w-full h-20 resize-none font-mono text-xs",placeholder:"linear-gradient(135deg, #1e40af 0%, #3b82f6 100%)"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e("adminSettings.gradientHelpText")})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.accentColor")}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:i.accentColor,onChange:b=>p("accentColor",b.target.value),className:"w-12 h-10 rounded border border-gray-300"}),s.jsx("input",{type:"text",value:i.accentColor,onChange:b=>p("accentColor",b.target.value),className:"input flex-1"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.fontFamily")}),s.jsxs("select",{value:i.fontFamily,onChange:b=>p("fontFamily",b.target.value),className:"input w-full",children:[s.jsx("option",{value:"Inter, system-ui, sans-serif",children:"Inter"}),s.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),s.jsx("option",{value:"Helvetica, sans-serif",children:"Helvetica"}),s.jsx("option",{value:"Georgia, serif",children:"Georgia"}),s.jsx("option",{value:"Times New Roman, serif",children:"Times New Roman"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.fontSize")}),s.jsxs("select",{value:i.fontSize,onChange:b=>p("fontSize",b.target.value),className:"input w-full",children:[s.jsx("option",{value:"12px",children:"12px"}),s.jsx("option",{value:"14px",children:"14px"}),s.jsx("option",{value:"16px",children:"16px"}),s.jsx("option",{value:"18px",children:"18px"})]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(dA,{className:"w-5 h-5 mr-2"}),e("adminSettings.templateLayout")]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.templateStyle")}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["modern","classic","minimal"].map(b=>s.jsx("button",{onClick:()=>p("template",b),className:`p-3 rounded-lg border text-sm font-medium capitalize ${i.template===b?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:b},b))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.paperSize")}),s.jsxs("select",{value:i.paperSize,onChange:b=>p("paperSize",b.target.value),className:"input w-full",children:[s.jsx("option",{value:"80mm",children:"80mm (Thermal)"}),s.jsx("option",{value:"A4",children:"A4"}),s.jsx("option",{value:"letter",children:"Letter"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showBarcode",checked:i.showBarcode,onChange:b=>p("showBarcode",b.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"showBarcode",className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.showBarcode")})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"showQrCode",checked:i.showQrCode,onChange:b=>p("showQrCode",b.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"showQrCode",className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings.showQRCode")})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminSettings.footerMessages")}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.footerTextEnglish")}),s.jsx("textarea",{value:i.footerText,onChange:b=>p("footerText",b.target.value),className:"input w-full h-20 resize-none",placeholder:e("adminSettings.footerTextEnPlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings.footerTextIcelandic")}),s.jsx("textarea",{value:i.footerTextIs,onChange:b=>p("footerTextIs",b.target.value),className:"input w-full h-20 resize-none",placeholder:e("adminSettings.footerTextIsPlaceholder")})]})]})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:x,disabled:m,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:m?s.jsxs(s.Fragment,{children:[s.jsx(At,{className:"w-4 h-4 mr-2 animate-spin"}),e("adminSettings.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"w-4 h-4 mr-2"}),e("adminSettings.saveSettings")]})})})]}),s.jsx("div",{className:"lg:sticky lg:top-6",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Yt,{className:"w-5 h-5 mr-2"}),e("adminSettings.livePreview")]}),s.jsxs("button",{onClick:()=>h(!c),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(Ky,{className:"w-4 h-4 mr-1"}),e(c?"adminSettings.screenView":"adminSettings.printView")]})]}),s.jsx("div",{className:`border rounded-lg p-4 ${c?"bg-gray-50":"bg-white"} flex items-center justify-center min-h-96`,children:s.jsx("div",{dangerouslySetInnerHTML:{__html:y()},className:c?"transform scale-90 origin-center":""})})]})})]})})})]})})},w9=()=>{const e=ut(),{settings:t,isLoading:r,testResult:a,isTesting:n}=Se(x=>x.smtpSettings),[i,o]=_.useState({host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"lfng",fromNameIs:"lfng",isEnabled:!1}),[d,c]=_.useState(!1),[h,m]=_.useState(!1);_.useEffect(()=>{e(Rd())},[e]),_.useEffect(()=>{t&&o({host:t.host||"",port:t.port||587,secure:t.secure||!1,username:t.username||"",password:"",fromEmail:t.fromEmail||"",fromName:t.fromName||"lfng",fromNameIs:t.fromNameIs||"lfng",isEnabled:t.isEnabled||!1})},[t]);const g=(x,j)=>{o(y=>({...y,[x]:j})),e(H4({field:x,value:j}))},p=async()=>{m(!0);try{await e(Dd(i)).unwrap(),q.success("SMTP settings saved successfully!")}catch(x){q.error(x||"Failed to save settings")}finally{m(!1)}},k=async()=>{if(!i.host||!i.username||!i.password||!i.fromEmail){q.error("Please fill in all required fields before testing");return}try{await e(Od(i)).unwrap(),a!=null&&a.success&&q.success("SMTP test successful!")}catch(x){q.error(x||"SMTP test failed")}};return r&&!t?s.jsx(Ae,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(At,{className:"w-8 h-8 animate-spin text-blue-600"})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email Settings"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure SMTP settings for sending receipt emails"})]})}),a&&s.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center ${a.success?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300"}`,children:[a.success?s.jsx(Ct,{className:"w-5 h-5 mr-3 flex-shrink-0"}):s.jsx(lt,{className:"w-5 h-5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:a.message}),a.details&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Host:"})," ",a.details.host]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Port:"})," ",a.details.port]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Secure:"})," ",a.details.secure?"Yes":"No"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Username:"})," ",a.details.username]}),s.jsxs("p",{children:[s.jsx("strong",{children:"From Email:"})," ",a.details.fromEmail]})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(ax,{className:"w-5 h-5 mr-2"}),"SMTP Configuration"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SMTP Host *"}),s.jsx("input",{type:"text",value:i.host,onChange:x=>g("host",x.target.value),className:"input w-full",placeholder:"smtp.gmail.com",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port *"}),s.jsx("input",{type:"number",value:i.port,onChange:x=>g("port",parseInt(x.target.value)),className:"input w-full",placeholder:"587",min:"1",max:"65535",required:!0})]})]}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"secure",checked:i.secure,onChange:x=>g("secure",x.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"secure",className:"text-sm text-gray-700 dark:text-gray-300",children:"Use TLS/SSL (recommended for port 587/465)"})]})})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(dc,{className:"w-5 h-5 mr-2"}),"Authentication"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username *"}),s.jsxs("div",{className:"relative",children:[s.jsx(ts,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",value:i.username,onChange:x=>g("username",x.target.value),className:"input pl-10 w-full",placeholder:"your-email@gmail.com",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password *"}),s.jsxs("div",{className:"relative",children:[s.jsx(sx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:d?"text":"password",value:i.password,onChange:x=>g("password",x.target.value),className:"input pl-10 pr-10 w-full",placeholder:"Your app password",required:!0}),s.jsx("button",{type:"button",onClick:()=>c(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?s.jsx(Er,{className:"w-4 h-4"}):s.jsx(Yt,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]})]})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[s.jsx(os,{className:"w-5 h-5 mr-2"}),"Sender Information"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Email Address *"}),s.jsx("input",{type:"email",value:i.fromEmail,onChange:x=>g("fromEmail",x.target.value),className:"input w-full",placeholder:"noreply@olfong.is",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (English)"}),s.jsx("input",{type:"text",value:i.fromName,onChange:x=>g("fromName",x.target.value),className:"input w-full",placeholder:"lfng"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (Icelandic)"}),s.jsx("input",{type:"text",value:i.fromNameIs,onChange:x=>g("fromNameIs",x.target.value),className:"input w-full",placeholder:"lfng"})]})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"isEnabled",checked:i.isEnabled,onChange:x=>g("isEnabled",x.target.checked),className:"mr-3"}),s.jsx("label",{htmlFor:"isEnabled",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable email sending"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, receipt emails will be sent to customers"})]}),s.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:k,disabled:n||!i.host||!i.username||!i.password||!i.fromEmail,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center",children:n?s.jsxs(s.Fragment,{children:[s.jsx(At,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Yy,{className:"w-4 h-4 mr-2"}),"Test Connection"]})}),s.jsx("button",{onClick:p,disabled:h,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:h?s.jsxs(s.Fragment,{children:[s.jsx(At,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})]})}),s.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-3",children:"Common SMTP Settings"}),s.jsxs("div",{className:"space-y-3 text-sm text-blue-800 dark:text-blue-200",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Gmail:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp.gmail.com"}),s.jsx("li",{children:" Port: 587 (TLS) or 465 (SSL)"}),s.jsx("li",{children:" Username: your-email@gmail.com"}),s.jsx("li",{children:" Password: Use App Password (not your regular password)"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Outlook/Hotmail:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp-mail.outlook.com"}),s.jsx("li",{children:" Port: 587"}),s.jsx("li",{children:" Username: your-email@outlook.com"}),s.jsx("li",{children:" Password: Your regular password"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Yahoo:"}),s.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[s.jsx("li",{children:" Host: smtp.mail.yahoo.com"}),s.jsx("li",{children:" Port: 587 or 465"}),s.jsx("li",{children:" Username: your-email@yahoo.com"}),s.jsx("li",{children:" Password: Use App Password"})]})]})]})]})]})})},j9=()=>{const{t:e}=je(),{user:t}=Se(I=>I.auth),[r,a]=_.useState([]),[n,i]=_.useState(!0),[o,d]=_.useState(!1),[c,h]=_.useState(null),[m,g]=_.useState({username:"",email:"",fullName:"",phone:"",role:"DELIVERY"}),[p,k]=_.useState(""),[x,j]=_.useState(""),y=async()=>{var I;try{i(!0);const D=await ce.get("/staff");a(((I=D.data)==null?void 0:I.staff)||D.data||[])}catch(D){console.error("Error fetching staff:",D),a([])}finally{i(!1)}};_.useEffect(()=>{(t==null?void 0:t.role)==="ADMIN"&&y()},[t]),_.useEffect(()=>{if(!o)return;const I=D=>{D.key==="Escape"&&(d(!1),h(null),g({username:"",email:"",fullName:"",phone:"",role:"DELIVERY"}))};return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[o]);const b=(I=null)=>{I?(h(I),g({username:I.username,email:I.email||"",fullName:I.fullName||"",phone:I.phone||"",role:I.role})):(h(null),g({username:"",email:"",fullName:"",phone:"",role:"DELIVERY"})),d(!0)},w=()=>{d(!1),h(null),g({username:"",email:"",fullName:"",phone:"",role:"DELIVERY"})},N=I=>{const{name:D,value:Y}=I.target;g(R=>({...R,[D]:Y}))},P=async()=>{try{if(!m.username||!m.fullName){alert(e("adminStaff.requiredFields"));return}c?await ce.put(`/staff/${c.id}`,m):await ce.post("/staff",m),await y(),w()}catch(I){console.error("Error saving staff:",I),alert(e("adminStaff.errorSaving"))}},C=async I=>{if(confirm(e("adminStaff.confirmDelete")))try{await ce.delete(`/staff/${I}`),await y()}catch(D){console.error("Error deleting staff:",D),alert(e("adminStaff.errorDeleting"))}},A=r.filter(I=>{var R,Z;const D=I.username.toLowerCase().includes(p.toLowerCase())||((R=I.fullName)==null?void 0:R.toLowerCase().includes(p.toLowerCase()))||((Z=I.email)==null?void 0:Z.toLowerCase().includes(p.toLowerCase())),Y=!x||I.role===x;return D&&Y}),E=I=>({ADMIN:"bg-red-100 text-red-800",DELIVERY:"bg-blue-100 text-blue-800",CUSTOMER:"bg-gray-100 text-gray-800"})[I]||"bg-gray-100 text-gray-800",F=I=>({ADMIN:e("adminStaff.roleAdmin"),DELIVERY:e("adminStaff.roleDelivery"),CUSTOMER:e("adminStaff.roleCustomer")})[I]||I;return(t==null?void 0:t.role)!=="ADMIN"?s.jsxs(Ae,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminPage.accessDenied")})})}),s.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("adminPage.accessDenied")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage.noPermission")})]})})})]}):s.jsxs(Ae,{children:[s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:_a,title:e("adminStaff.title"),description:e("adminStaff.description"),actions:s.jsxs("button",{onClick:()=>b(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-900 transition-colors duration-200",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),e("adminStaff.createNew")]})}),s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx("input",{type:"text",placeholder:e("adminStaff.searchPlaceholder"),value:p,onChange:I=>k(I.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-700 placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"})}),s.jsx("div",{children:s.jsxs("select",{value:x,onChange:I=>j(I.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx("option",{value:"",children:e("adminStaff.allRoles")}),s.jsx("option",{value:"ADMIN",children:e("adminStaff.roleAdmin")}),s.jsx("option",{value:"DELIVERY",children:e("adminStaff.roleDelivery")})]})})]}),n?s.jsx("div",{className:"flex justify-center items-center py-12",children:s.jsx(At,{className:"h-8 w-8 text-blue-600 animate-spin"})}):A.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8 text-center",children:[s.jsx(_a,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:e("adminStaff.noStaffFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminStaff.createFirstStaff")}),s.jsxs("button",{onClick:()=>b(),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-200",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),e("adminStaff.createNew")]})]}):s.jsx("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminStaff.username")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminStaff.fullName")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminStaff.email")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminStaff.role")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminStaff.actions")})]})}),s.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:A.map(I=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:I.username}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:I.fullName||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:I.email||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${E(I.role)}`,children:F(I.role)})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[s.jsx("button",{onClick:()=>b(I),className:"inline-flex items-center px-3 py-1.5 rounded-md text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900 transition-colors duration-200",children:s.jsx(km,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>C(I.id),className:"inline-flex items-center px-3 py-1.5 rounded-md text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900 transition-colors duration-200",children:s.jsx(er,{className:"h-4 w-4"})})]})]},I.id))})]})})]})]}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e(c?"adminStaff.editStaff":"adminStaff.createStaff")}),s.jsx("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:s.jsx(at,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminStaff.username")}),s.jsx("input",{type:"text",name:"username",value:m.username,onChange:N,disabled:!!c,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminStaff.fullName")}),s.jsx("input",{type:"text",name:"fullName",value:m.fullName,onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminStaff.email")}),s.jsx("input",{type:"email",name:"email",value:m.email,onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminStaff.phone")}),s.jsx("input",{type:"tel",name:"phone",value:m.phone,onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminStaff.role")}),s.jsxs("select",{name:"role",value:m.role,onChange:N,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx("option",{value:"DELIVERY",children:e("adminStaff.roleDelivery")}),s.jsx("option",{value:"ADMIN",children:e("adminStaff.roleAdmin")})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:w,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200",children:e("adminStaff.cancel")}),s.jsx("button",{onClick:P,className:"px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors duration-200",children:e(c?"adminStaff.update":"adminStaff.create")})]})]})})]})},N9=()=>{const{t:e,isLoading:t}=je(),r=ut(),{banners:a,isLoading:n,error:i}=Se(I=>I.banners),{categories:o}=Se(I=>I.categories),{products:d}=Se(I=>I.products),[c,h]=_.useState(!1),[m,g]=_.useState(!1),[p,k]=_.useState(null),[x,j]=_.useState(!1),[y,b]=_.useState({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null,isHero:!1,backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:"",backgroundOpacity:1,marqueeText:"",marqueeTextIs:"",marqueeSpeed:50,marqueeCount:3,heroLogoUrl:"",heroButtonText:"",heroButtonTextIs:"",heroButtonLink:"",heroSubtitle:"",heroSubtitleIs:"",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0});_.useEffect(()=>{r(xd({includeInactive:!0})),r(Ri()),r(Sa())},[r]),_.useEffect(()=>{const I=D=>{x&&!D.target.closest(".link-dropdown-container")&&j(!1)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[x]),_.useEffect(()=>{if(!c)return;const I=D=>{D.key==="Escape"&&(h(!1),k(null),b({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null,isHero:!1,backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:"",backgroundOpacity:1,marqueeText:"",marqueeTextIs:"",marqueeSpeed:50,marqueeCount:3,heroLogoUrl:"",heroButtonText:"",heroButtonTextIs:"",heroButtonLink:"",heroSubtitle:"",heroSubtitleIs:"",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0}))};return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[c]);const w=async I=>{I.preventDefault();try{p?await r(_h({id:p.id,...y})):await r(Nh(y)),h(!1),k(null),b({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0})}catch(D){console.error("Error saving banner:",D)}},N=I=>{k(I),b({title:I.title||"",titleIs:I.titleIs||"",description:I.description||"",descriptionIs:I.descriptionIs||"",imageUrl:I.imageUrl||"",alt:I.alt||"",link:I.link||"",sortOrder:I.sortOrder||0,isFeatured:I.isFeatured||!1,featuredOrder:I.featuredOrder||null,isHero:I.isHero||!1,backgroundType:I.backgroundType||"gradient",gradientStartColor:I.gradientStartColor||"#374151",gradientEndColor:I.gradientEndColor||"#111827",gradientDirection:I.gradientDirection||"to-r",backgroundImageUrl:I.backgroundImageUrl||"",backgroundOpacity:I.backgroundOpacity!==void 0?I.backgroundOpacity:1,marqueeText:I.marqueeText||"",marqueeTextIs:I.marqueeTextIs||"",marqueeSpeed:I.marqueeSpeed||50,marqueeCount:I.marqueeCount||3,heroLogoUrl:I.heroLogoUrl||"",heroButtonText:I.heroButtonText||"",heroButtonTextIs:I.heroButtonTextIs||"",heroButtonLink:I.heroButtonLink||"",heroSubtitle:I.heroSubtitle||"",heroSubtitleIs:I.heroSubtitleIs||"",textColor:I.textColor||"#ffffff",buttonBgColor:I.buttonBgColor||"#ffffff",buttonTextColor:I.buttonTextColor||"#1f2937",overlayOpacity:I.overlayOpacity!==void 0?I.overlayOpacity:0}),h(!0)},P=async I=>{window.confirm(e("admin.banners.confirmDelete"))&&await r(Sh(I))},C=async I=>{await r(Ch(I))},A=async I=>{if(I.isFeatured)await r(vd(I.id));else{const Y=a.filter(Z=>Z.isFeatured).map(Z=>Z.featuredOrder).filter(Boolean);let R=1;for(;Y.includes(R);)R++;await r(bd({id:I.id,featuredOrder:R}))}},E=I=>{I&&I.url&&b({...y,imageUrl:I.url}),g(!1)},F=()=>{h(!1),k(null),b({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null,isHero:!1,backgroundType:"gradient",gradientStartColor:"#374151",gradientEndColor:"#111827",gradientDirection:"to-r",backgroundImageUrl:"",backgroundOpacity:1,marqueeText:"",marqueeTextIs:"",marqueeSpeed:50,marqueeCount:3,heroLogoUrl:"",heroButtonText:"",heroButtonTextIs:"",heroButtonLink:"",heroSubtitle:"",heroSubtitleIs:"",textColor:"#ffffff",buttonBgColor:"#ffffff",buttonTextColor:"#1f2937",overlayOpacity:0})};return n||t?s.jsx(Ae,{children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(pt,{size:"large"})})}):s.jsxs(Ae,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(hr,{icon:xr,title:e("admin.banners.title"),description:e("admin.banners.subtitle"),actions:s.jsxs("button",{onClick:()=>h(!0),className:"btn btn-primary flex items-center gap-2",children:[s.jsx(Wt,{className:"w-4 h-4"}),e("admin.banners.addBanner")]})}),i&&s.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:s.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(I=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[s.jsxs("div",{className:"relative h-48 bg-gray-100 dark:bg-gray-700",children:[I.imageUrl?s.jsx("img",{src:I.imageUrl,alt:I.alt||"Banner",className:"w-full h-full object-cover"}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(xr,{className:"w-12 h-12 text-gray-400"})}),s.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[I.isFeatured&&s.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[e("admin.banners.featured")," #",I.featuredOrder]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:I.isActive?e("common.active"):e("common.inactive")})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:I.titleIs||I.title||e("admin.banners.untitled")}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:I.descriptionIs||I.description||e("admin.banners.noDescription")}),I.link&&s.jsxs("div",{className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 mb-3",children:[s.jsx(tx,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:I.link})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N(I),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:e("common.edit"),children:s.jsx(La,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>A(I),className:`p-2 transition-colors ${I.isFeatured?"text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"}`,title:I.isFeatured?e("admin.banners.removeFromFeatured"):e("admin.banners.addToFeatured"),children:s.jsx(Yt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(I.id),className:`p-2 transition-colors ${I.isActive?"text-gray-400 hover:text-orange-600 dark:hover:text-orange-400":"text-gray-400 hover:text-green-600 dark:hover:text-green-400"}`,title:I.isActive?e("admin.banners.deactivate"):e("admin.banners.activate"),children:I.isActive?s.jsx(Er,{className:"w-4 h-4"}):s.jsx(Yt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>P(I.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:e("common.delete"),children:s.jsx(er,{className:"w-4 h-4"})})]}),s.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",I.sortOrder]})]})]})]},I.id))}),a.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("admin.banners.noBanners")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("admin.banners.noBannersDescription")}),s.jsx("button",{onClick:()=>h(!0),className:"btn btn-primary",children:e("admin.banners.addFirstBanner")})]})]}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e(p?"admin.banners.editBanner":"admin.banners.addBanner")}),s.jsx("button",{onClick:F,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.titleEn")}),s.jsx("input",{type:"text",value:y.title,onChange:I=>b({...y,title:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.titlePlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.titleIs")}),s.jsx("input",{type:"text",value:y.titleIs,onChange:I=>b({...y,titleIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.titlePlaceholderIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.descriptionEn")}),s.jsx("textarea",{value:y.description,onChange:I=>b({...y,description:I.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.descriptionPlaceholder")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.descriptionIs")}),s.jsx("textarea",{value:y.descriptionIs,onChange:I=>b({...y,descriptionIs:I.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.descriptionPlaceholderIs")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("admin.banners.imageUrl")," *"]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:e("admin.banners.imageHelpText")}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"url",value:y.imageUrl,onChange:I=>b({...y,imageUrl:I.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders.enterImageUrl"),required:!0}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>g(!0),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(Jn,{className:"w-4 h-4"}),s.jsx("span",{children:e("adminMedia.select")})]}),s.jsxs("button",{type:"button",onClick:()=>window.open("/admin/media?collection=BANNERS","_blank"),className:"px-3 py-2 border border-blue-300 dark:border-blue-600 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200 flex items-center space-x-2",children:[s.jsx(xr,{className:"w-4 h-4"}),s.jsx("span",{children:e("admin.banners.manageImages")})]})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.altText")}),s.jsx("input",{type:"text",value:y.alt,onChange:I=>b({...y,alt:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners.altPlaceholder")})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"link-dropdown-container",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.link")}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"url",value:y.link,onChange:I=>b({...y,link:I.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders.enterWebsiteUrl")}),s.jsx("button",{type:"button",onClick:()=>j(!x),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:e("admin.banners.selectLink"),children:s.jsx(eS,{className:"w-4 h-4"})})]}),x&&s.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[o.map(I=>s.jsxs("div",{children:[s.jsx("button",{type:"button",onClick:()=>{b({...y,link:`/products?category=${I.name.toUpperCase()}`}),j(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nf,{className:"w-4 h-4"}),s.jsxs("span",{children:[I.nameIs||I.name," (",e("admin.banners.category"),")"]})]})}),I.subcategories&&I.subcategories.map(D=>s.jsx("button",{type:"button",onClick:()=>{b({...y,link:`/products?category=${I.name.toUpperCase()}&subcategory=${D.name.toUpperCase()}`}),j(!1)},className:"w-full px-6 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nf,{className:"w-3 h-3"}),s.jsxs("span",{children:[D.nameIs||D.name," (",e("admin.banners.subcategory"),")"]})]})},D.id))]},I.id)),d.slice(0,20).map(I=>s.jsx("button",{type:"button",onClick:()=>{b({...y,link:`/products/${I.id}`}),j(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(nf,{className:"w-4 h-4"}),s.jsxs("span",{children:[I.nameIs||I.name," (",e("admin.banners.product"),")"]})]})},I.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.sortOrder")}),s.jsx("input",{type:"number",value:y.sortOrder,onChange:I=>b({...y,sortOrder:parseInt(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:y.isFeatured,onChange:I=>b({...y,isFeatured:I.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("admin.banners.featuredBanner")})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("admin.banners.featuredBannerHelp")})]}),y.isFeatured&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners.featuredOrder")}),s.jsxs("select",{value:y.featuredOrder||"",onChange:I=>b({...y,featuredOrder:I.target.value?parseInt(I.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:e("admin.banners.selectPosition")}),s.jsxs("option",{value:"1",children:[e("admin.banners.position")," 1"]}),s.jsxs("option",{value:"2",children:[e("admin.banners.position")," 2"]}),s.jsxs("option",{value:"3",children:[e("admin.banners.position")," 3"]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4 mt-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:y.isHero,onChange:I=>b({...y,isHero:I.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Hero Banner (Homepage)"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use this banner as the hero section on the homepage"})]}),y.isHero&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Background Type"}),s.jsxs("select",{value:y.backgroundType,onChange:I=>b({...y,backgroundType:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"gradient",children:"Color Gradient"}),s.jsx("option",{value:"image",children:"Background Image"}),s.jsx("option",{value:"marquee",children:"Marquee Background"})]})]}),y.backgroundType==="gradient"&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Start Color"}),s.jsx("input",{type:"color",value:y.gradientStartColor,onChange:I=>b({...y,gradientStartColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"End Color"}),s.jsx("input",{type:"color",value:y.gradientEndColor,onChange:I=>b({...y,gradientEndColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Direction"}),s.jsxs("select",{value:y.gradientDirection,onChange:I=>b({...y,gradientDirection:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[s.jsx("option",{value:"to-r",children:"Left to Right"}),s.jsx("option",{value:"to-l",children:"Right to Left"}),s.jsx("option",{value:"to-t",children:"Bottom to Top"}),s.jsx("option",{value:"to-b",children:"Top to Bottom"}),s.jsx("option",{value:"to-br",children:"Top-Left to Bottom-Right"}),s.jsx("option",{value:"to-bl",children:"Top-Right to Bottom-Left"}),s.jsx("option",{value:"to-tr",children:"Bottom-Left to Top-Right"}),s.jsx("option",{value:"to-tl",children:"Bottom-Right to Top-Left"})]})]})]}),y.backgroundType==="image"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Background Image URL"}),s.jsx("input",{type:"url",value:y.backgroundImageUrl,onChange:I=>b({...y,backgroundImageUrl:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter background image URL"})]}),y.backgroundType==="marquee"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Marquee Text (English)"}),s.jsx("input",{type:"text",value:y.marqueeText,onChange:I=>b({...y,marqueeText:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter scrolling text"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Marquee Text (Icelandic)"}),s.jsx("input",{type:"text",value:y.marqueeTextIs,onChange:I=>b({...y,marqueeTextIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Slu inn rllunartext"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Speed (px/sec)"}),s.jsx("input",{type:"number",value:y.marqueeSpeed,onChange:I=>b({...y,marqueeSpeed:parseInt(I.target.value)||50}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"10",max:"200"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Repeat Count"}),s.jsx("input",{type:"number",value:y.marqueeCount,onChange:I=>b({...y,marqueeCount:parseInt(I.target.value)||3}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"1",max:"10"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Subtitle (English)"}),s.jsx("input",{type:"text",value:y.heroSubtitle,onChange:I=>b({...y,heroSubtitle:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter hero subtitle"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Subtitle (Icelandic)"}),s.jsx("input",{type:"text",value:y.heroSubtitleIs,onChange:I=>b({...y,heroSubtitleIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Slu inn undirtitil"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hero Logo URL"}),s.jsx("input",{type:"url",value:y.heroLogoUrl,onChange:I=>b({...y,heroLogoUrl:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter logo URL (leave empty for default)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text (EN)"}),s.jsx("input",{type:"text",value:y.heroButtonText,onChange:I=>b({...y,heroButtonText:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Button text"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text (IS)"}),s.jsx("input",{type:"text",value:y.heroButtonTextIs,onChange:I=>b({...y,heroButtonTextIs:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Texti  hnapp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Link"}),s.jsx("input",{type:"text",value:y.heroButtonLink,onChange:I=>b({...y,heroButtonLink:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"/products"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Text Color"}),s.jsx("input",{type:"color",value:y.textColor,onChange:I=>b({...y,textColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Background"}),s.jsx("input",{type:"color",value:y.buttonBgColor,onChange:I=>b({...y,buttonBgColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Text Color"}),s.jsx("input",{type:"color",value:y.buttonTextColor,onChange:I=>b({...y,buttonTextColor:I.target.value}),className:"w-full h-10 border border-gray-300 dark:border-gray-600 rounded-lg"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Overlay Opacity (",y.overlayOpacity,")"]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:y.overlayOpacity,onChange:I=>b({...y,overlayOpacity:parseFloat(I.target.value)}),className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Adds a dark overlay to improve text readability"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:F,className:"btn btn-outline",children:e("common.cancel")}),s.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",children:[s.jsx(Tr,{className:"w-4 h-4"}),e(p?"common.update":"common.create")]})]})]})]})})}),s.jsx(db,{isOpen:m,onClose:()=>g(!1),onSelect:E,collection:"BANNERS",multiple:!1})]})},Dh=Ne("chat/fetchConversations",async(e={})=>{var r;const t=await ce.get("/chat/conversations",{params:e});return((r=t.data)==null?void 0:r.data)||t.data}),Oh=Ne("chat/fetchMessages",async e=>{var r;const t=await ce.get(`/chat/conversations/${e}/messages`);return((r=t.data)==null?void 0:r.data)||t.data}),Fh=Ne("chat/sendMessage",async({conversationId:e,content:t,messageType:r="TEXT",metadata:a})=>(await ce.post(`/chat/conversations/${e}/messages`,{content:t,messageType:r,metadata:a})).data.data),_9=Ne("chat/createConversation",async e=>(await ce.post("/chat/conversations",e)).data.data),S9=Ne("chat/joinConversation",async e=>(await ce.post(`/chat/conversations/${e}/join`)).data.data),K4=Ne("chat/updateConversationStatus",async({conversationId:e,status:t,priority:r})=>(await ce.patch(`/chat/conversations/${e}`,{status:t,priority:r})).data.data),C9=Ne("chat/fetchUnreadCount",async()=>(await ce.get("/chat/unread-count")).data.unreadCount),G4=Ne("chat/markMessagesAsRead",async e=>(await ce.post(`/chat/conversations/${e}/messages/read`)).data),Z4=Vr({name:"chat",initialState:{conversations:[],currentConversation:null,messages:[],unreadCount:0,isLoading:!1,isTyping:!1,otherUserTyping:!1,error:null,isWidgetOpen:!1,isWidgetMinimized:!1,filters:{status:"ACTIVE",type:"",priority:""},pagination:{page:1,limit:20,total:0,pages:0}},reducers:{toggleWidget:e=>{e.isWidgetOpen=!e.isWidgetOpen,e.isWidgetOpen&&(e.isWidgetMinimized=!1)},minimizeWidget:e=>{e.isWidgetMinimized=!e.isWidgetMinimized},closeWidget:e=>{e.isWidgetOpen=!1,e.isWidgetMinimized=!1},setCurrentConversation:(e,t)=>{var r;e.currentConversation=t.payload,e.messages=((r=t.payload)==null?void 0:r.messages)||[]},addMessage:(e,t)=>{e.messages.push(t.payload)},updateMessage:(e,t)=>{const{messageId:r,updates:a}=t.payload,n=e.messages.findIndex(i=>i.id===r);n!==-1&&(e.messages[n]={...e.messages[n],...a})},markMessageAsRead:(e,t)=>{const r=t.payload,a=e.messages.find(n=>n.id===r);a&&(a.isRead=!0,a.readAt=new Date().toISOString())},markAllMessagesAsRead:(e,t)=>{const r=t.payload;e.messages.forEach(a=>{a.conversationId===r&&(a.isRead=!0,a.readAt=new Date().toISOString())})},setTyping:(e,t)=>{e.isTyping=t.payload},setOtherUserTyping:(e,t)=>{e.otherUserTyping=t.payload},handleNewMessage:(e,t)=>{var i;const{message:r,conversationId:a}=t.payload;((i=e.currentConversation)==null?void 0:i.id)===a&&(e.messages.some(d=>d.id===r.id)||e.messages.push(r));const n=e.conversations.findIndex(o=>o.id===a);n!==-1&&(e.conversations[n].lastMessageAt=r.createdAt,e.conversations[n].messages=[r]),r.senderId!==t.payload.currentUserId&&(e.unreadCount+=1)},handleConversationUpdate:(e,t)=>{var n;const r=t.payload,a=e.conversations.findIndex(i=>i.id===r.id);a!==-1&&(e.conversations[a]=r),((n=e.currentConversation)==null?void 0:n.id)===r.id&&(e.currentConversation=r)},handleUserTyping:(e,t)=>{const{userId:r,isTyping:a,currentUserId:n}=t.payload;r!==n&&(e.otherUserTyping=a)},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload},e.pagination.page=1},clearFilters:e=>{e.filters={status:"ACTIVE",type:"",priority:""},e.pagination.page=1},setPage:(e,t)=>{e.pagination.page=t.payload},clearError:e=>{e.error=null},resetChat:e=>{e.conversations=[],e.currentConversation=null,e.messages=[],e.unreadCount=0,e.isWidgetOpen=!1,e.isWidgetMinimized=!1,e.error=null}},extraReducers:e=>{e.addCase(Dh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Dh.fulfilled,(t,r)=>{t.isLoading=!1,t.conversations=r.payload.conversations,t.pagination=r.payload.pagination}).addCase(Dh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(Oh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Oh.fulfilled,(t,r)=>{t.isLoading=!1,t.messages=Array.isArray(r.payload)?r.payload:r.payload.messages||r.payload.data||[]}).addCase(Oh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(Fh.pending,t=>{t.error=null}).addCase(Fh.fulfilled,(t,r)=>{t.messages.push(r.payload)}).addCase(Fh.rejected,(t,r)=>{t.error=r.error.message}).addCase(_9.fulfilled,(t,r)=>{t.conversations.unshift(r.payload),t.currentConversation=r.payload,t.messages=[]}).addCase(S9.fulfilled,(t,r)=>{const a=r.payload,n=t.conversations.findIndex(i=>i.id===a.id);n!==-1&&(t.conversations[n]=a)}).addCase(K4.fulfilled,(t,r)=>{var i;const a=r.payload,n=t.conversations.findIndex(o=>o.id===a.id);n!==-1&&(t.conversations[n]=a),((i=t.currentConversation)==null?void 0:i.id)===a.id&&(t.currentConversation=a)}).addCase(C9.fulfilled,(t,r)=>{t.unreadCount=r.payload}).addCase(G4.fulfilled,(t,r)=>{t.unreadCount=Math.max(0,t.unreadCount-t.messages.filter(a=>!a.isRead).length)})}}),{setCurrentConversation:P9,handleNewMessage:o1}=Z4.actions,E9=Z4.reducer,I9=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:a})=>{const{t:n}=je();return s.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:n("adminChat.searchConversations"),value:e,onChange:i=>t(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("select",{value:r,onChange:i=>a(i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"",children:n("adminChat.allStatuses")}),s.jsx("option",{value:"ACTIVE",children:n("adminChat.active")}),s.jsx("option",{value:"ARCHIVED",children:n("adminChat.archived")}),s.jsx("option",{value:"RESOLVED",children:n("adminChat.resolved")})]})})]})})},T9=({conversation:e,isSelected:t,onSelect:r})=>{var c,h,m;const a=g=>{switch(g){case"ACTIVE":return s.jsx(Ct,{className:"h-4 w-4 text-green-500"});case"ARCHIVED":return s.jsx(lt,{className:"h-4 w-4 text-gray-500"});case"RESOLVED":return s.jsx(Ct,{className:"h-4 w-4 text-blue-500"});default:return s.jsx(nr,{className:"h-4 w-4 text-gray-400"})}},n=(c=e.participants.find(g=>g.user.role==="CUSTOMER"))==null?void 0:c.user,i=(h=e.messages)==null?void 0:h[0],o=((m=e._count)==null?void 0:m.messages)||0,d=g=>{const p=new Date(g),x=(new Date-p)/(1e3*60*60);return x<1?"Just now":x<24?`${Math.floor(x)}h ago`:x<48?"Yesterday":p.toLocaleDateString()};return s.jsx("div",{onClick:r,"data-conversation-id":e.id,"data-testid":`conversation-item-${e.id}`,className:`p-4 cursor-pointer border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${t?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":""}`,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx(ts,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(n==null?void 0:n.fullName)||(n==null?void 0:n.username)||"Unknown Customer"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[a(e.status),o>0&&s.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:o})]})]}),i&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:i.content}),s.jsx("div",{className:"flex items-center justify-between mt-2",children:s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(i?i.createdAt:e.createdAt)})})]})]})})},L9=({isLoading:e,selectedConversation:t,onSelectConversation:r,filteredConversations:a})=>{const{t:n}=je();return e?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(pt,{size:"small"})}):a.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Hn,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:n("adminChat.noConversations")})]}):s.jsx("div",{className:"space-y-1",children:a.map(i=>s.jsx(T9,{conversation:i,isSelected:(t==null?void 0:t.id)===i.id,onSelect:()=>r(i)},i.id))})},A9=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:a,conversations:n,isLoading:i,selectedConversation:o,onSelectConversation:d,filteredConversations:c})=>s.jsxs("div",{className:"w-full sm:w-1/3 lg:w-1/4 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex flex-col h-full",children:[s.jsx(I9,{searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:a}),s.jsx(L9,{conversations:n,isLoading:i,selectedConversation:o,onSelectConversation:d,filteredConversations:c})]}),M9=({conversation:e,otherUserTyping:t,onUpdateStatus:r})=>{var i,o;const{t:a}=je(),n=(i=e.participants.find(d=>d.user.role==="CUSTOMER"))==null?void 0:i.user;return s.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>window.history.back(),className:"sm:hidden p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:s.jsx(Bs,{className:"h-5 w-5"})}),s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:s.jsx(ts,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(n==null?void 0:n.fullName)||(n==null?void 0:n.username)||a("adminChat.unknownCustomer")}),((o=e.metadata)==null?void 0:o.orderNumber)&&s.jsx("div",{className:"mt-1",children:s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[s.jsx(ud,{className:"h-3 w-3 mr-1"}),a("order.orderNumber"),": ",e.metadata.orderNumber]})}),t&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:a("adminChat.customerTyping")})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsxs("select",{value:e.status,onChange:d=>r(e.id,d.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[s.jsx("option",{value:"ACTIVE",children:a("adminChat.active")}),s.jsx("option",{value:"ARCHIVED",children:a("adminChat.archived")}),s.jsx("option",{value:"RESOLVED",children:a("adminChat.resolved")})]})})]})})},R9=({message:e})=>{const{user:t}=Se(n=>n.auth),r=t&&e.senderId===t.id,a=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s.jsx("div",{className:`flex ${r?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${r?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[s.jsx("p",{className:"text-sm",children:e.content}),s.jsx("p",{className:`text-xs mt-1 ${r?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:a(e.createdAt)})]})})},D9=({messages:e,isLoading:t})=>{const{t:r}=je(),a=_.useRef(null),n=()=>{var i;(i=a.current)==null||i.scrollIntoView({behavior:"smooth"})};return _.useEffect(()=>{n()},[e]),t?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(pt,{size:"small"})}):e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Hn,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r("adminChat.noMessages")})]}):s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:s.jsxs("div",{className:"space-y-4",children:[e.map(i=>s.jsx(R9,{message:i},i.id)),s.jsx("div",{ref:a})]})})},O9=({newMessage:e,onSendMessage:t,onTyping:r,onKeyPress:a,isLoading:n,currentConversation:i})=>{const{t:o}=je();return s.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800",children:s.jsxs("div",{className:"flex items-end space-x-2",children:[s.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s.jsx(sA,{className:"h-5 w-5"})}),s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:e,onChange:r,onKeyPress:a,placeholder:o(i?"chat.typeMessage":"chat.initializing"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:1,disabled:n})}),s.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:s.jsx(iA,{className:"h-5 w-5"})}),s.jsx("button",{onClick:t,disabled:!e.trim()||!i||n,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:s.jsx(Zy,{className:"h-5 w-5"})})]})})},F9=({conversation:e})=>{var r;const{t}=je();return(r=e.metadata)!=null&&r.orderId?s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-blue-50 dark:bg-blue-900/20 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(ud,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t("adminChat.orderDetails")})]}),s.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:[t("order.orderNumber"),":"]})," ",e.metadata.orderNumber]}),s.jsxs("p",{children:[s.jsxs("strong",{children:[t("chat.topics.topic"),":"]})," ",e.metadata.topic]}),e.metadata.customTopic&&s.jsxs("p",{children:[s.jsxs("strong",{children:[t("chat.customTopic"),":"]})," ",e.metadata.customTopic]})]})]}):null},B9=()=>{const{t:e}=je();return s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Hn,{className:"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminChat.selectConversation")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat.selectConversationMessage")})]})})},z9=({currentConversation:e,messages:t,newMessage:r,setNewMessage:a,isLoading:n,otherUserTyping:i,onSendMessage:o,onTyping:d,onKeyPress:c,onUpdateStatus:h})=>e?s.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-gray-800 h-full rounded-r-lg",children:[s.jsx(M9,{conversation:e,otherUserTyping:i,onUpdateStatus:h}),s.jsx(F9,{conversation:e}),s.jsx(D9,{messages:t,isLoading:n}),s.jsx(O9,{newMessage:r,setNewMessage:a,onSendMessage:o,onTyping:d,onKeyPress:c,isLoading:n,currentConversation:e})]}):s.jsx(B9,{}),$9=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(E=>E.auth),{conversations:a,currentConversation:n,messages:i,isLoading:o,otherUserTyping:d}=Se(E=>E.chat),[c,h]=_.useState(""),[m,g]=_.useState("ACTIVE"),[p,k]=_.useState(""),[x,j]=_.useState(null),y=_.useRef(null);_.useEffect(()=>{if(r&&!["ADMIN","DELIVERY"].includes(r.role)){Ve.error(e("adminChat.accessDeniedMessage"));return}},[r,e]),_.useEffect(()=>{r&&["ADMIN","DELIVERY"].includes(r.role)&&t(Dh())},[t,r]),_.useEffect(()=>{if(!r)return;const E=I=>{t(o1({message:I,currentUserId:r.id}))},F=I=>{t(o1({message:{...I,isRead:!0,readAt:I.readAt},currentUserId:r.id}))};return yt.on("new-message",E),yt.on("message-read",F),()=>{yt.removeListener("new-message",E),yt.removeListener("message-read",F)}},[t,r]);const b=a.filter(E=>{var D;const F=!c||E.participants.some(Y=>{var R,Z;return((R=Y.user.fullName)==null?void 0:R.toLowerCase().includes(c.toLowerCase()))||((Z=Y.user.username)==null?void 0:Z.toLowerCase().includes(c.toLowerCase()))})||((D=E.messages)==null?void 0:D.some(Y=>Y.content.toLowerCase().includes(c.toLowerCase()))),I=!m||E.status===m;return F&&I}),w=async E=>{j(E),await t(P9(E)).unwrap();try{await t(Oh(E.id)).unwrap()}catch(F){console.warn("Failed to fetch messages:",F)}try{await t(G4(E.id)).unwrap()}catch(F){console.warn("Failed to mark messages as read:",F)}},N=async()=>{if(!(!p.trim()||!n))try{await t(Fh({conversationId:n.id,content:p.trim(),messageType:"TEXT"})).unwrap(),k(""),n&&yt.emitTypingStop(n.id,r.id)}catch{Ve.error(e("adminChat.sendMessageError"))}},P=E=>{k(E.target.value),n&&yt.emitTypingStart(n.id,r.id),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{n&&yt.emitTypingStop(n.id,r.id)},1e3)},C=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),N())},A=async(E,F)=>{try{await t(K4({conversationId:E,status:F})).unwrap(),Ve.success(e("adminChat.statusUpdated"))}catch{Ve.error(e("adminChat.updateStatusError"))}};return!r||!["ADMIN","DELIVERY"].includes(r.role)?s.jsx(Ae,{children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e("adminChat.accessDenied")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat.accessDeniedMessage")})]})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"h-[calc(100vh-2rem)] flex flex-col mt-0",children:[s.jsx(hr,{icon:Hn,title:e("adminChat.title"),description:e("adminChat.subtitle")}),s.jsx("div",{className:"flex-1 flex flex-col h-[calc(100vh-2rem)] bg-white dark:bg-gray-800 border-l border-r border-b border-gray-200 dark:border-gray-700 rounded-b-lg",children:s.jsxs("div",{className:"flex flex-1 overflow-hidden h-full",children:[s.jsx(A9,{searchTerm:c,setSearchTerm:h,statusFilter:m,setStatusFilter:g,conversations:a,isLoading:o,selectedConversation:x,onSelectConversation:w,filteredConversations:b}),s.jsx(z9,{currentConversation:n,messages:i,newMessage:p,setNewMessage:k,isLoading:o,otherUserTyping:d,onSendMessage:N,onTyping:P,onKeyPress:C,onUpdateStatus:A})]})})]})})},U9=()=>{const{t:e}=je(),[t,r]=_.useState(!1),[a,n]=_.useState(null),i=async()=>{r(!0),n("insert");try{const h=await(await fetch("/api/admin/demo-data/insert",{method:"POST",headers:{"Content-Type":"application/json"}})).json();h.success?Ve.success(e("demoData.insertSuccess")):Ve.error(h.message||e("demoData.insertError"))}catch(c){console.error("Error inserting demo data:",c),Ve.error(e("demoData.insertError"))}finally{r(!1),n(null)}},o=async()=>{r(!0),n("remove");try{const h=await(await fetch("/api/admin/demo-data/remove",{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();h.success?Ve.success(e("demoData.removeSuccess")):Ve.error(h.message||e("demoData.removeError"))}catch(c){console.error("Error removing demo data:",c),Ve.error(e("demoData.removeError"))}finally{r(!1),n(null)}},d=[{type:"customers",count:5,description:e("demoData.customersDescription"),details:["Anna Johnson (anna.johnson@example.com)","Bjrn Andersson (bjorn.andersson@example.com)","Kristn Petersen (kristin.petersen@example.com)","Magns orsteinsson (magnus.thorsteinsson@example.com)","Sara Gumundsdttir (sara.gudmundsdottir@example.com)"]},{type:"addresses",count:5,description:e("demoData.addressesDescription"),details:["Reykjavk addresses for each customer","Default shipping addresses","Various locations around Reykjavk"]},{type:"orders",count:8,description:e("demoData.ordersDescription"),details:["Various order statuses (PENDING, CONFIRMED, PREPARING, etc.)","Different shipping methods (delivery & pickup)","Mixed product types (wine, beer, nicotine, food)","Realistic order amounts and dates"]},{type:"orderItems",count:15,description:e("demoData.orderItemsDescription"),details:["Multiple items per order","Various quantities and prices","Links orders to products correctly"]}];return s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:cc,title:e("demoData.title"),description:e("demoData.description")}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData.overview")}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map(c=>s.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:e("demoData.${item","type}")}),s.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-base font-medium px-3 py-1 rounded-lg",children:c.count})]}),s.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 mb-4",children:c.description}),s.jsx("ul",{className:"text-sm text-gray-500 dark:text-gray-500 space-y-2",children:c.details.map((h,m)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-blue-500 mt-1",children:""}),h]},m))})]},c.type))})]})}),s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Xa,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200",children:e("demoData.warningTitle")}),s.jsx("p",{className:"text-base text-yellow-700 dark:text-yellow-300 mt-2",children:e("demoData.warningMessage")})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData.actions")}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[s.jsxs("button",{onClick:i,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&a==="insert"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsx(cc,{className:"h-5 w-5"}),e("demoData.insertButton")]}),s.jsxs("button",{onClick:o,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&a==="remove"?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):s.jsx(er,{className:"h-5 w-5"}),e("demoData.removeButton")]})]}),s.jsxs("div",{className:"mt-6 text-base text-gray-600 dark:text-gray-400",children:[s.jsxs("p",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Ct,{className:"h-5 w-5 text-green-500"}),e("demoData.insertNote")]}),s.jsxs("p",{className:"flex items-center gap-3",children:[s.jsx(Rg,{className:"h-5 w-5 text-red-500"}),e("demoData.removeNote")]})]})]})})]})})},V9=({isOpen:e,type:t,title:r,onClose:a,sourceLocale:n,targetLocale:i,itemKey:o,itemValue:d,translatingKey:c})=>{const[h,m]=_.useState([]),[g,p]=_.useState(!1),[k,x]=_.useState(!1),[j,y]=_.useState(null),b=_.useRef(null);return _.useEffect(()=>{var w;(w=b.current)==null||w.scrollIntoView({behavior:"smooth"})},[h]),_.useEffect(()=>{if(!e){m([]),p(!1),x(!1),y(null);return}(async()=>{try{let N="",P={};t==="batch"?(N="/api/translations/generate-stream",P={sourceLocale:n,targetLocale:i}):t==="single"&&(N="/api/translations/translate-item-stream",P={key:o,sourceLocale:n,targetLocale:i,value:d});const C=await fetch(N,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(P)});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const A=C.body.getReader(),E=new TextDecoder;for(;;){const{done:F,value:I}=await A.read();if(F)break;const Y=E.decode(I).split(`
`);for(const R of Y)if(R.startsWith("data: "))try{const Z=JSON.parse(R.slice(6));Z.type==="start"?m(T=>[...T,{type:"info",message:Z.message}]):Z.type==="log"?m(T=>[...T,{type:"log",message:Z.message}]):Z.type==="error"?(m(T=>[...T,{type:"error",message:Z.message}]),x(!0)):Z.type==="complete"&&(m(T=>[...T,{type:"success",message:"Translation completed successfully!"}]),y(Z.data),p(!0))}catch(Z){console.error("Failed to parse SSE data:",Z)}}}catch(N){console.error("Error streaming translation:",N),m(P=>[...P,{type:"error",message:`Error: ${N.message}`}]),x(!0)}finally{k||p(!0)}})()},[e,t,n,i,o,d]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-96 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[g?k?s.jsx(lt,{className:"w-5 h-5 text-red-600"}):s.jsx(lc,{className:"w-5 h-5 text-green-600"}):s.jsx(At,{className:"w-5 h-5 animate-spin text-blue-600"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r})]}),s.jsx("button",{onClick:a,disabled:!g,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:s.jsx(at,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-900 dark:bg-gray-950 p-4 font-mono text-sm",children:[h.length===0?s.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:"Starting translation..."}):h.map((w,N)=>s.jsx("div",{className:`whitespace-pre-wrap break-words mb-1 ${w.type==="error"?"text-red-400":w.type==="success"?"text-green-400":w.type==="info"?"text-blue-400":"text-gray-300"}`,children:w.message},N)),s.jsx("div",{ref:b})]}),g&&s.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:s.jsx("button",{onClick:a,className:`px-4 py-2 rounded-lg text-white font-medium transition-colors ${k?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:k?"Close":"Done"})})]})}):null},_r="https://olfong.olibuijr.com/api";class H9{getAuthHeaders(){const t=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}async getAllTranslations(t=null,r=null){var a;try{if(console.log("TranslationService: getAllTranslations called with language:",t),t){const c=`${_r}/translations/language/${t}`;console.log("TranslationService: Making request to:",c);const h=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("TranslationService: Response status:",h.status),console.log("TranslationService: Response ok:",h.ok),!h.ok)throw new Error(`HTTP error! status: ${h.status}`);const m=await h.json();return console.log("TranslationService: Response data received, success:",m.success),console.log("TranslationService: Response data length:",(a=m.data)==null?void 0:a.length),m}const n=new URLSearchParams;r&&n.append("format",r);const i=`${_r}/translations${n.toString()?`?${n.toString()}`:""}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(n){throw console.error("Error fetching translations:",n),n}}async getTranslationsBySection(t=null){try{const r=new URLSearchParams;t&&r.append("language",t),r.append("format","grouped");const a=`${_r}/translations?${r.toString()}`,n=await fetch(a,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error fetching translations by section:",r),r}}async searchTranslations(t,r=null,a=null){try{const n=new URLSearchParams;r&&n.append("language",r),a&&n.append("section",a);const i=`${_r}/translations/search/${encodeURIComponent(t)}?${n.toString()}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(n){throw console.error("Error searching translations:",n),n}}async getTranslationStats(){try{const t=`${_r}/translations/stats`,r=await fetch(t,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching translation stats:",t),t}}async getRecentChanges(t=10){try{const r=`${_r}/translations/recent?limit=${t}`,a=await fetch(r,{method:"GET",headers:this.getAuthHeaders()});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error fetching recent changes:",r),r}}async getTranslation(t,r){try{const a=`${_r}/translations/${encodeURIComponent(t)}/${r}`,n=await fetch(a,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){if(n.status===404)return null;throw new Error(`HTTP error! status: ${n.status}`)}return await n.json()}catch(a){throw console.error("Error fetching translation:",a),a}}async createTranslation(t){try{const r=`${_r}/translations`,a=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error creating translation:",r),r}}async upsertTranslation(t){try{const r=`${_r}/translations/upsert`,a=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error upserting translation:",r),r}}async getAllTranslationsMultiLang(){try{const t=`${_r}/translations/all`,r=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching multi-lang translations:",t),t}}async updateTranslation(t,r){try{const a=`${_r}/translations/${t}`,n=await fetch(a,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(a){throw console.error("Error updating translation:",a),a}}async deleteTranslation(t){try{const r=`${_r}/translations/${t}`,a=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders()});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error deleting translation:",r),r}}async bulkUpdateTranslations(t){try{const r=`${_r}/translations/bulk-update`,a=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({updates:t})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error bulk updating translations:",r),r}}async bulkDeleteTranslations(t){try{const r=`${_r}/translations/bulk-delete`,a=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders(),body:JSON.stringify({ids:t})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(r){throw console.error("Error bulk deleting translations:",r),r}}async exportTranslations(t="json",r=null){try{const a=new URLSearchParams;a.append("format",t),r&&a.append("language",r);const n=`${_r}/translations/export?${a.toString()}`,i=await fetch(n,{method:"GET",headers:this.getAuthHeaders()});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.blob(),d=window.URL.createObjectURL(o),c=document.createElement("a");return c.href=d,c.download=`translations_${r||"all"}_${new Date().toISOString().split("T")[0]}.${t}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d),{success:!0,message:"Export completed successfully"}}catch(a){throw console.error("Error exporting translations:",a),a}}async importTranslations(t,r="json"){try{const a=`${_r}/translations/import`,n=await fetch(a,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({data:t,format:r})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(a){throw console.error("Error importing translations:",a),a}}async loadTranslationsForI18next(t){try{const r=await this.getAllTranslations(t);if(r.success&&r.data){const a=this.transformToNestedObject(r.data);return localStorage.setItem(`translations_${t}`,JSON.stringify(a)),localStorage.setItem(`translations_${t}_timestamp`,Date.now().toString()),a}return console.warn("No translations found in API response"),{}}catch(r){return console.error("Failed to load translations from API:",r),{}}}transformToNestedObject(t){const r={};return t.forEach(a=>{const n=a.key.split(".");let i=r;for(let o=0;o<n.length-1;o++)(!i[n[o]]||typeof i[n[o]]!="object")&&(i[n[o]]={}),i=i[n[o]];i[n[n.length-1]]=a.value}),r}isCacheValid(t,r=24*60*60*1e3){try{const a=localStorage.getItem(`translations_${t}_timestamp`);return a?Date.now()-parseInt(a)<r:!1}catch{return!1}}getCachedTranslations(t){try{const r=localStorage.getItem(`translations_${t}`);return r?JSON.parse(r):null}catch(r){return console.error("Error getting cached translations:",r),null}}clearCache(t=null){try{t?(localStorage.removeItem(`translations_${t}`),localStorage.removeItem(`translations_${t}_timestamp`)):Object.keys(localStorage).forEach(r=>{r.startsWith("translations_")&&localStorage.removeItem(r)})}catch(r){console.error("Error clearing cache:",r)}}async refreshTranslations(t,r){try{this.clearCache(t);const a=await this.loadTranslationsForI18next(t);return r&&a&&(r.addResourceBundle(t,"translation",a,!0,!0),r.reloadResources(t)),a}catch(a){throw console.error("Error refreshing translations:",a),a}}}const pi=new H9,W9=()=>{const{t:e}=je(),t=_.useRef(null),[r,a]=_.useState([]),[n,i]=_.useState([]),[o,d]=_.useState(null),[c,h]=_.useState(!0),[m,g]=_.useState(!1),[p,k]=_.useState(""),[x,j]=_.useState(1),[y,b]=_.useState(null),[w,N]=_.useState({key:"",is:"",en:""}),[P,C]=_.useState(!1),[A,E]=_.useState(!0),[F,I]=_.useState(!1),[D,Y]=_.useState(!1),[R,Z]=_.useState({sourceLocale:"is",targetLocale:"en"}),[T,B]=_.useState(null),[W,Q]=_.useState(!1),[$,O]=_.useState(null),[K,V]=_.useState({}),X=20,le=_.useCallback(async()=>{h(!0);try{const de=await pi.getAllTranslationsMultiLang();de.success&&(a(de.data.is||[]),i(de.data.en||[]))}catch(de){console.error("Error fetching translations:",de),q.error(e("adminTranslations.errorFetching"))}finally{h(!1)}},[e]),ge=_.useCallback(async()=>{g(!0);try{const de=await fetch("/api/translations/stats");if(de.ok){const _e=await de.json();d(_e.data)}}catch(de){console.error("Error fetching stats:",de)}finally{g(!1)}},[]);_.useEffect(()=>{le(),ge()},[le,ge]);const ne=_.useMemo(()=>{const de=new Map;return r.forEach(_e=>{de.set(_e.key,{key:_e.key,is:_e.value,isId:_e.id,en:"",enId:null})}),n.forEach(_e=>{const H=de.get(_e.key);H?(H.en=_e.value,H.enId=_e.id):de.set(_e.key,{key:_e.key,is:"",isId:null,en:_e.value,enId:_e.id})}),Array.from(de.values()).sort((_e,H)=>_e.key.localeCompare(H.key))},[r,n]),pe=_.useMemo(()=>{if(!p)return ne;const de=p.toLowerCase();return ne.filter(_e=>_e.key.toLowerCase().includes(de)||_e.is.toLowerCase().includes(de)||_e.en.toLowerCase().includes(de))},[ne,p]),Oe=_.useMemo(()=>{const de=(x-1)*X;return pe.slice(de,de+X)},[pe,x]),ue=Math.ceil(pe.length/X),Me=de=>{b(de.key),N({key:de.key,is:de.is,en:de.en})},et=async()=>{try{const de=[];w.is&&de.push(pi.upsertTranslation({key:w.key,value:w.is,locale:"is"})),w.en&&de.push(pi.upsertTranslation({key:w.key,value:w.en,locale:"en"})),await Promise.all(de),q.success(e("adminTranslations.translationUpdated")),b(null),le(),ge()}catch(de){console.error("Error saving translation:",de),q.error(e("adminTranslations.errorSaving"))}},Ze=()=>{b(null),N({key:"",is:"",en:""})},z=async de=>{if(window.confirm(e("adminTranslations.confirmDelete")))try{const _e=[];de.isId&&_e.push(pi.deleteTranslation(de.isId)),de.enId&&_e.push(pi.deleteTranslation(de.enId)),await Promise.all(_e),q.success(e("adminTranslations.translationDeleted")),le(),ge()}catch(_e){console.error("Error deleting translation:",_e),q.error(e("adminTranslations.errorDeleting"))}},we=async de=>{de.preventDefault();try{const _e=[];w.is&&_e.push(pi.createTranslation({key:w.key,value:w.is,locale:"is"})),w.en&&_e.push(pi.createTranslation({key:w.key,value:w.en,locale:"en"})),await Promise.all(_e),q.success(e("adminTranslations.translationAdded")),C(!1),N({key:"",is:"",en:""}),le(),ge()}catch(_e){console.error("Error adding translation:",_e),q.error(e("adminTranslations.errorSaving"))}},Ie=async de=>{try{const _e=await fetch(`/api/translations/export?format=${de}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!_e.ok)throw new Error("Export failed");const H=await _e.blob(),ee=window.URL.createObjectURL(H),ae=document.createElement("a");ae.href=ee,ae.download=`translations.${de}`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),window.URL.revokeObjectURL(ee),q.success(e("adminTranslations.exportSuccess"))}catch(_e){console.error("Error exporting:",_e),q.error(e("adminTranslations.exportError"))}},Fe=async de=>{var H;const _e=(H=de.target.files)==null?void 0:H[0];if(_e){try{const ee=await _e.text(),ae=_e.name.endsWith(".csv")?"csv":"json",ve=ae==="json"?JSON.parse(ee):ee,be=await fetch("/api/translations/import",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({data:ve,format:ae})});if(!be.ok)throw new Error("Import failed");const J=await be.json();q.success(`${e("adminTranslations.importSuccess")} (${J.data.imported})`),le(),ge()}catch(ee){console.error("Error importing:",ee),q.error(e("adminTranslations.importError"))}t.current&&(t.current.value="")}},se=async()=>{if(!R.sourceLocale||!R.targetLocale){q.error("Please select both source and target languages");return}I(!1),O("batch"),V({}),Q(!0)},Pe=async(de,_e,H)=>{if(!de[_e==="is"?"is":"en"]){q.error("Source translation not found");return}O("single"),V({itemKey:de.key,itemValue:de[_e==="is"?"is":"en"]}),Q(!0)};return c?s.jsx(Ae,{children:s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(At,{className:"w-8 h-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-3 text-lg text-gray-700 dark:text-gray-300",children:e("common.loading")})]})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsx(hr,{icon:qy,title:e("adminTranslations.title"),description:e("adminTranslations.subtitle"),actions:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("button",{onClick:()=>E(!A),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:[s.jsx(Hi,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e(A?"adminTranslations.hideStats":"adminTranslations.showStats")})]}),s.jsxs("button",{onClick:le,className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600 transition-colors",children:[s.jsx(ht,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.refresh")})]}),s.jsxs("button",{onClick:()=>Ie("json"),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[s.jsx(Pw,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.exportJSON")})]}),s.jsxs("button",{onClick:()=>Ie("csv"),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[s.jsx(K7,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.exportCSV")})]}),s.jsxs("label",{className:"flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 cursor-pointer transition-colors",children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.import")}),s.jsx("input",{ref:t,type:"file",accept:".json,.csv",onChange:Fe,className:"hidden"})]}),s.jsxs("button",{onClick:()=>I(!0),className:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:[s.jsx(Pw,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Generate with Gemini"})]}),s.jsxs("button",{onClick:()=>{C(!0),N({key:"",is:"",en:""})},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:e("adminTranslations.addTranslation")})]})]})}),A&&o&&s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[s.jsx(Hi,{className:"w-5 h-5 mr-2"}),e("adminTranslations.statistics")]}),m&&s.jsx(At,{className:"w-5 h-5 animate-spin text-blue-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:e("adminTranslations.totalEntries")}),s.jsx("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:o.total})]}),s.jsx(zo,{className:"w-10 h-10 text-blue-400 dark:text-blue-600"})]})}),s.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:e("adminTranslations.icelandic")}),s.jsx("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:o.byLocale.is}),s.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:[o.completeness.icelandic,"%"]})]}),s.jsx(Ct,{className:"w-10 h-10 text-green-400 dark:text-green-600"})]})}),s.jsx("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border border-purple-200 dark:border-purple-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400",children:e("adminTranslations.english")}),s.jsx("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:o.byLocale.en}),s.jsxs("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:[o.completeness.english,"%"]})]}),s.jsx(Ct,{className:"w-10 h-10 text-purple-400 dark:text-purple-600"})]})}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:e("adminTranslations.uniqueKeys")}),s.jsx("p",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:o.uniqueKeys}),s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:[o.completeness.overall,"% ",e("adminTranslations.complete")]})]}),s.jsx(lt,{className:"w-10 h-10 text-amber-400 dark:text-amber-600"})]})})]}),(o.missingTranslations.missingInEnglish>0||o.missingTranslations.missingInIcelandic>0)&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[s.jsx("h3",{className:"text-sm font-semibold text-red-900 dark:text-red-100 mb-2",children:e("adminTranslations.missingTranslations")}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[e("adminTranslations.missingInEnglish"),": ",s.jsx("span",{className:"font-bold",children:o.missingTranslations.missingInEnglish})]})}),s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[e("adminTranslations.missingInIcelandic"),": ",s.jsx("span",{className:"font-bold",children:o.missingTranslations.missingInIcelandic})]})})]})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:e("adminTranslations.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",value:p,onChange:de=>{k(de.target.value),j(1)}})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/4",children:e("adminTranslations.key")}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/3",children:e("adminTranslations.icelandic")}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-1/3",children:e("adminTranslations.english")}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-24",children:e("adminTranslations.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Oe.length>0?Oe.map(de=>s.jsx("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:y===de.key?s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"text",value:w.key,disabled:!0,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-gray-100 dark:bg-gray-600 dark:text-white"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("textarea",{value:w.is,onChange:_e=>N({...w,is:_e.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",rows:2})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("textarea",{value:w.en,onChange:_e=>N({...w,en:_e.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",rows:2})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:et,className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:e("common.save"),children:s.jsx(Tr,{className:"w-4 h-4"})}),s.jsx("button",{onClick:Ze,className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-300",title:e("common.cancel"),children:s.jsx(at,{className:"w-4 h-4"})})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900 dark:text-white",children:de.key}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:de.is||s.jsx("span",{className:"text-red-500 italic",children:e("adminTranslations.missing")})}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:de.en||s.jsx("span",{className:"text-red-500 italic",children:e("adminTranslations.missing")})}),s.jsx("td",{className:"px-4 py-3 text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[!de.is&&de.en&&s.jsx("button",{onClick:()=>Pe(de,"en"),disabled:T===de.key,className:"text-cyan-600 hover:text-cyan-900 dark:text-cyan-400 dark:hover:text-cyan-300 disabled:opacity-50",title:"Translate to Icelandic",children:T===de.key?s.jsx(At,{className:"w-4 h-4 animate-spin"}):s.jsx(zo,{className:"w-4 h-4"})}),!de.en&&de.is&&s.jsx("button",{onClick:()=>Pe(de,"is"),disabled:T===de.key,className:"text-cyan-600 hover:text-cyan-900 dark:text-cyan-400 dark:hover:text-cyan-300 disabled:opacity-50",title:"Translate to English",children:T===de.key?s.jsx(At,{className:"w-4 h-4 animate-spin"}):s.jsx(zo,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Me(de),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:e("common.edit"),children:s.jsx(km,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>z(de),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:e("common.delete"),children:s.jsx(er,{className:"w-4 h-4"})})]})})]})},de.key)):s.jsx("tr",{children:s.jsx("td",{colSpan:"4",className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:e("adminTranslations.noTranslationsFound")})})})]})}),ue>1&&s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-400",children:[e("common.showing")," ",(x-1)*X+1," ",e("common.to")," ",Math.min(x*X,pe.length)," ",e("common.of")," ",pe.length," ",e("common.results")]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>j(de=>Math.max(de-1,1)),disabled:x===1,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e("common.previous")}),s.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300",children:[x," / ",ue]}),s.jsx("button",{onClick:()=>j(de=>Math.min(de+1,ue)),disabled:x===ue,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e("common.next")})]})]})]})}),P&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("adminTranslations.addTranslation")}),s.jsx("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{className:"h-6 w-6"})})]}),s.jsxs("form",{onSubmit:we,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminTranslations.key")," *"]}),s.jsx("input",{type:"text",value:w.key,onChange:de=>N({...w,key:de.target.value}),required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"e.g., common.greeting"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminTranslations.icelandic")}),s.jsx("textarea",{value:w.is,onChange:de=>N({...w,is:de.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Icelandic translation"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminTranslations.english")}),s.jsx("textarea",{value:w.en,onChange:de=>N({...w,en:de.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"English translation"})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:()=>C(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:e("common.cancel")}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:s.jsx("span",{children:e("common.add")})})]})]})]})}),F&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Generate Translations with Gemini"}),s.jsx("button",{onClick:()=>I(!1),disabled:D,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 disabled:opacity-50",children:s.jsx(at,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Generate missing translations using Gemini Flash 2.5 model. This will translate from the source language to the target language for any keys that don't already have translations."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Source Language"}),s.jsxs("select",{value:R.sourceLocale,onChange:de=>Z({...R,sourceLocale:de.target.value}),disabled:D,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"is",children:"Icelandic"}),s.jsx("option",{value:"en",children:"English"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Target Language"}),s.jsxs("select",{value:R.targetLocale,onChange:de=>Z({...R,targetLocale:de.target.value}),disabled:D,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"is",children:"Icelandic"})]})]}),R.sourceLocale===R.targetLocale&&s.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Source and target languages are the same. Please select different languages."})})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:()=>I(!1),disabled:D,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:se,disabled:D||R.sourceLocale===R.targetLocale,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[D&&s.jsx(At,{className:"w-4 h-4 animate-spin"}),s.jsx("span",{children:D?"Generating...":"Generate"})]})]})]})]})}),s.jsx(V9,{isOpen:W,type:$,title:$==="batch"?"Generating Translations":`Translating "${K.itemKey}"`,onClose:()=>{Q(!1),le(),ge()},sourceLocale:R.sourceLocale,targetLocale:R.targetLocale,itemKey:K.itemKey,itemValue:K.itemValue,translatingKey:T})]})})},q9=({media:e,selectedItems:t,onSelectItem:r,onEdit:a,onDelete:n,onAIGenerate:i,formatFileSize:o,formatDate:d})=>{const{t:c}=je(),[h,m]=_.useState(new Set),g=k=>t.includes(k.id),p=k=>{m(x=>{const j=new Set(x);return j.delete(k),j})};return s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(k=>s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow",children:[s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"aspect-square bg-white dark:bg-white flex items-center justify-center relative",children:k.mimeType.startsWith("image/")?s.jsxs(s.Fragment,{children:[h.has(k.id)&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-gray-600",children:s.jsx(Yn,{className:"w-6 h-6 animate-spin text-gray-400"})}),s.jsx("img",{src:k.thumbnailUrl||k.url,alt:k.alt||k.originalName,className:`w-full h-full object-contain transition-opacity duration-300 ${h.has(k.id)?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:()=>p(k.id),onError:()=>p(k.id)})]}):s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx(xr,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("span",{className:"text-xs",children:k.mimeType.split("/")[1].toUpperCase()})]})}),s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("input",{type:"checkbox",checked:g(k),onChange:x=>{x.target.checked?r(k.id,!0):r(k.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[k.collection==="PRODUCTS"&&k.mimeType.startsWith("image/")&&s.jsx("button",{onClick:x=>{x.stopPropagation(),i&&i(k)},className:"p-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded shadow hover:from-purple-600 hover:to-pink-600 text-white",title:"Generate AI Product Photo",children:s.jsx(sa,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>a(k),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-gray-50 dark:hover:bg-gray-600",title:c("adminMedia.edit"),children:s.jsx(La,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>n(k.id),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600",title:c("adminMedia.delete"),children:s.jsx(er,{className:"h-3 w-3"})})]})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate mb-1",children:k.originalName}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(k.size)}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:d(k.createdAt)})]})]},k.id))})},K9=({media:e,selectedItems:t,onSelectItem:r,onEdit:a,onDelete:n,formatFileSize:i,formatDate:o})=>{const{t:d}=je(),c=h=>t.includes(h.id);return s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:s.jsx("input",{type:"checkbox",checked:t.length===e.length&&e.length>0,onChange:h=>{h.target.checked?r(e.map(m=>m.id),!0):r([],!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.preview")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.name")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.type")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.size")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.uploaded")}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:d("adminMedia.actions")})]})}),s.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(h=>s.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:c(h),onChange:m=>{m.target.checked?r(h.id,!0):r(h.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center",children:h.mimeType.startsWith("image/")?s.jsx("img",{src:h.thumbnailUrl||h.url,alt:h.alt||h.originalName,className:"w-full h-full object-cover rounded",loading:"lazy"}):s.jsx(xr,{className:"w-6 h-6 text-gray-400"})})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:h.originalName}),h.alt&&s.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:h.alt})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:h.mimeType}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i(h.size)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o(h.createdAt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>a(h),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:s.jsx(La,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>n(h.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(er,{className:"h-4 w-4"})})]})})]},h.id))})]})})})},G9=({searchQuery:e,onSearchChange:t,viewMode:r,onViewModeChange:a,selectedItems:n,onBulkDelete:i,collections:o,selectedCollection:d,onCollectionChange:c,onUploadClick:h})=>{const{t:m}=je();return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(g=>s.jsxs("button",{onClick:()=>c(g.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors ${d===g.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[s.jsx("span",{className:"mr-2",children:g.icon}),g.name]},g.id))})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",placeholder:m("adminMedia.searchMedia"),value:e,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>a("grid"),className:`p-2 rounded-md ${r==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(Ag,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>a("list"),className:`p-2 rounded-md ${r==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:s.jsx(Mg,{className:"h-4 w-4"})}),n.length>0&&s.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx("span",{className:"mr-2",children:""}),m("adminMedia.deleteSelected")," (",n.length,")"]}),s.jsxs("button",{onClick:h,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),m("adminMedia.upload")]})]})]})})]})},Z9=({isOpen:e,onClose:t,media:r,onSave:a})=>{const{t:n}=je(),[i,o]=_.useState({alt:"",caption:"",description:""}),[d,c]=_.useState(!1);_.useEffect(()=>{r&&e&&o({alt:r.alt||"",caption:r.caption||"",description:r.description||""})},[r,e]),_.useEffect(()=>{if(!e)return;const g=p=>{p.key==="Escape"&&t()};return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[e,t]);const h=async g=>{if(g.preventDefault(),!!r){c(!0);try{const p=await fetch(`/api/media/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)});if(p.ok){const k=await p.json();a(k.data.media),t(),q.success("Media updated successfully")}else throw new Error("Failed to update media")}catch(p){console.error("Update media error:",p),q.error("Failed to update media")}finally{c(!1)}}},m=(g,p)=>{o(k=>({...k,[g]:p}))};return!e||!r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("form",{onSubmit:h,children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n("adminMedia.editMedia")}),s.jsx("button",{type:"button",onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:s.jsx(at,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:r.mimeType.startsWith("image/")?s.jsx("img",{src:r.thumbnailUrl||r.url,alt:r.alt||r.originalName,className:"w-full h-full object-cover rounded-lg"}):s.jsx("div",{className:"text-center text-gray-400",children:s.jsx("span",{className:"text-sm",children:r.mimeType.split("/")[1].toUpperCase()})})})}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.originalName}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[r.mimeType,"  ",Y9(r.size)]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n("adminMedia.altText")}),s.jsx("input",{type:"text",value:i.alt,onChange:g=>m("alt",g.target.value),placeholder:n("adminMedia.altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n("adminMedia.altTextDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n("adminMedia.caption")}),s.jsx("input",{type:"text",value:i.caption,onChange:g=>m("caption",g.target.value),placeholder:n("adminMedia.captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n("adminMedia.captionDescription")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n("adminMedia.description")}),s.jsx("textarea",{value:i.description,onChange:g=>m("description",g.target.value),placeholder:n("adminMedia.descriptionPlaceholder"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n("adminMedia.descriptionDescription")})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:n("adminMedia.cancel")}),s.jsx("button",{type:"submit",disabled:d,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?s.jsxs(s.Fragment,{children:[s.jsx(Yn,{className:"h-4 w-4 mr-2 animate-spin"}),n("adminMedia.saving")]}):s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"h-4 w-4 mr-2"}),n("adminMedia.save")]})})]})]})})})},Y9=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,a)).toFixed(2))+" "+r[a]},J9=({isOpen:e,onClose:t})=>{const[r,a]=_.useState({}),[n,i]=_.useState(!0),[o,d]=_.useState(!1);_.useEffect(()=>{e&&c()},[e]);const c=async()=>{try{i(!0);const g=await(await fetch("/api/ai-image/settings",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();g.success&&a(g.settings)}catch(m){console.error("Load settings error:",m),q.error("Failed to load settings")}finally{i(!1)}},h=async()=>{try{d(!0),(await(await fetch("/api/ai-image/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(r)})).json()).success&&(q.success("Settings saved successfully"),t())}catch(m){console.error("Save settings error:",m),q.error("Failed to save settings")}finally{d(!1)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(sa,{className:"w-6 h-6 text-purple-600 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"AI Image Generation Settings"})]}),s.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:s.jsx(at,{className:"h-5 w-5"})})]}),n?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Yn,{className:"w-8 h-8 animate-spin text-purple-600"})}):s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Shadow Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-4",children:["minimal","soft","dramatic"].map(m=>s.jsxs("button",{onClick:()=>a({...r,aiImageDefaultShadow:m}),className:`p-4 border rounded-lg ${r.aiImageDefaultShadow===m?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600"}`,children:[s.jsx("div",{className:"font-medium capitalize text-gray-900 dark:text-white",children:m}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[m==="minimal"&&"Subtle, barely visible shadow",m==="soft"&&"Realistic depth (Recommended)",m==="dramatic"&&"Strong visual impact"]})]},m))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Default Background Color"}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.jsx("button",{onClick:()=>a({...r,aiImageDefaultBackground:"#FFFFFF"}),className:`p-3 border rounded-lg bg-white ${r.aiImageDefaultBackground==="#FFFFFF"?"ring-2 ring-purple-500":""}`,children:s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"White"})}),s.jsx("button",{onClick:()=>a({...r,aiImageDefaultBackground:"#F3F4F6"}),className:`p-3 border rounded-lg bg-gray-100 ${r.aiImageDefaultBackground==="#F3F4F6"?"ring-2 ring-purple-500":""}`,children:s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Light Gray"})}),s.jsx("button",{onClick:()=>a({...r,aiImageDefaultBackground:"#FFF8F0"}),className:`p-3 border rounded-lg ${r.aiImageDefaultBackground==="#FFF8F0"?"ring-2 ring-purple-500":""}`,style:{backgroundColor:"#FFF8F0"},children:s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Warm White"})}),s.jsx("button",{onClick:()=>a({...r,aiImageDefaultBackground:"#F0F9FF"}),className:`p-3 border rounded-lg ${r.aiImageDefaultBackground==="#F0F9FF"?"ring-2 ring-purple-500":""}`,style:{backgroundColor:"#F0F9FF"},children:s.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Cool White"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Output Resolution"}),s.jsxs("select",{value:r.aiImageResolution||"1024",onChange:m=>a({...r,aiImageResolution:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"1024",children:"10241024 ($0.03/image)"}),s.jsx("option",{value:"1536",children:"15361536 ($0.07/image)"}),s.jsx("option",{value:"2048",children:"20482048 ($0.13/image)"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Higher resolution = better quality but higher cost"})]}),s.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Advanced Settings"}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Inference Steps: ",s.jsx("span",{className:"text-purple-600",children:r.aiImageInferenceSteps||28})]}),s.jsx("input",{type:"range",min:"20",max:"40",value:r.aiImageInferenceSteps||28,onChange:m=>a({...r,aiImageInferenceSteps:m.target.value}),className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"More steps = higher quality but slower generation (20-40)"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Guidance Scale: ",s.jsx("span",{className:"text-purple-600",children:r.aiImageGuidance||3.5})]}),s.jsx("input",{type:"range",min:"2",max:"5",step:"0.5",value:r.aiImageGuidance||3.5,onChange:m=>a({...r,aiImageGuidance:m.target.value}),className:"w-full"}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Higher values follow prompt more strictly (2-5)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Concurrent Generations (Batch Mode)"}),s.jsxs("select",{value:r.aiImageMaxConcurrent||"3",onChange:m=>a({...r,aiImageMaxConcurrent:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"1",children:"1 (Slower, cheapest)"}),s.jsx("option",{value:"3",children:"3 (Recommended)"}),s.jsx("option",{value:"5",children:"5 (Faster, more expensive)"})]}),s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Number of images to generate simultaneously in batch mode"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700 sticky bottom-0 bg-white dark:bg-gray-800",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),s.jsx("button",{onClick:h,disabled:o,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Yn,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Tr,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})]})}):null},X9=({media:e,isOpen:t,onClose:r,onComplete:a})=>{const[n,i]=_.useState("idle"),[o,d]=_.useState(null),[c,h]=_.useState(0),[m,g]=_.useState(null),[p,k]=_.useState(null),[x,j]=_.useState({shadowStyle:"soft",backgroundColor:"#FFFFFF"});_.useEffect(()=>{if(!o||n==="completed"||n==="error")return;const w=setInterval(async()=>{try{const P=await(await fetch(`/api/ai-image/status/${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).json();P.status==="COMPLETED"?(i("completed"),g(P.media),h(100),q.success("AI generation completed!"),setTimeout(()=>{a(P.media),r()},3e3)):P.status==="FAILED"?(i("error"),k("Generation failed"),q.error("Generation failed")):h(C=>Math.min(C+5,90))}catch(N){console.error("Status poll error:",N)}},2e3);return()=>clearInterval(w)},[o,n,a,r]);const y=async()=>{try{i("generating"),h(10),k(null);const N=await(await fetch(`/api/ai-image/generate/${e.id}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(x)})).json();if(N.success)d(N.jobId),q.success("Generation started!");else throw new Error(N.error||"Failed to start generation")}catch(w){i("error"),k(w.message),q.error(w.message)}},b=()=>{i("idle"),d(null),h(0),k(null)};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(sa,{className:"w-6 h-6 text-purple-600 mr-3"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"AI Product Image Generation"})]}),s.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:s.jsx(at,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Original Image"}),s.jsx("div",{className:"w-full h-48 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:e==null?void 0:e.url,alt:e==null?void 0:e.originalName,className:"max-w-full max-h-full object-contain"})})]}),n==="idle"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Shadow Style"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:["minimal","soft","dramatic"].map(w=>s.jsx("button",{onClick:()=>j({...x,shadowStyle:w}),className:`p-3 border rounded-lg text-sm font-medium capitalize ${x.shadowStyle===w?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:border-gray-400"}`,children:w},w))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Background Color"}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.jsx("button",{onClick:()=>j({...x,backgroundColor:"#FFFFFF"}),className:`p-3 border rounded-lg bg-white ${x.backgroundColor==="#FFFFFF"?"ring-2 ring-purple-500":""}`,children:s.jsx("div",{className:"text-xs font-medium text-gray-700",children:"White"})}),s.jsx("button",{onClick:()=>j({...x,backgroundColor:"#F3F4F6"}),className:`p-3 border rounded-lg bg-gray-100 ${x.backgroundColor==="#F3F4F6"?"ring-2 ring-purple-500":""}`,children:s.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Light Gray"})}),s.jsx("button",{onClick:()=>j({...x,backgroundColor:"#FFF8F0"}),className:`p-3 border rounded-lg ${x.backgroundColor==="#FFF8F0"?"ring-2 ring-purple-500":""}`,style:{backgroundColor:"#FFF8F0"},children:s.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Warm"})}),s.jsx("button",{onClick:()=>j({...x,backgroundColor:"#F0F9FF"}),className:`p-3 border rounded-lg ${x.backgroundColor==="#F0F9FF"?"ring-2 ring-purple-500":""}`,style:{backgroundColor:"#F0F9FF"},children:s.jsx("div",{className:"text-xs font-medium text-gray-700",children:"Cool"})})]})]})]}),n==="generating"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(Yn,{className:"w-12 h-12 animate-spin text-purple-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400 mb-2",children:[s.jsx("span",{children:"Generating AI image..."}),s.jsxs("span",{children:[c,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]}),s.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:"This usually takes 10-15 seconds"})]}),n==="completed"&&m&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:s.jsx(lc,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Generated Image"}),s.jsx("div",{className:"w-full h-48 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center overflow-hidden",children:s.jsx("img",{src:m.url,alt:"AI Generated",className:"max-w-full max-h-full object-contain"})})]}),s.jsx("div",{className:"text-center text-sm text-green-600 dark:text-green-400",children:"Image replaced successfully! Closing in 3 seconds..."})]}),n==="error"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center",children:s.jsx(lt,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})}),s.jsx("div",{className:"text-center text-red-600 dark:text-red-400",children:p||"Generation failed. Please try again."}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("button",{onClick:b,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[s.jsx(ht,{className:"w-4 h-4 mr-2"}),"Retry"]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:n==="completed"?"Close":"Cancel"}),n==="idle"&&s.jsxs("button",{onClick:y,className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-md hover:from-purple-600 hover:to-pink-600",children:[s.jsx(sa,{className:"w-4 h-4 mr-2"}),"Generate AI Image"]})]})]})}):null},Q9=()=>{const{t:e}=je(),{user:t}=Se(ne=>ne.auth),[r,a]=_.useState(!0),[n,i]=_.useState([]),[o,d]=_.useState("PRODUCTS"),[c,h]=_.useState("grid"),[m,g]=_.useState(""),[p,k]=_.useState([]),[,x]=_.useState(!1),[j,y]=_.useState(!1),[b,w]=_.useState(null),[N,P]=_.useState(!1),[C,A]=_.useState(!1),[E,F]=_.useState(null),I=(ne,pe)=>{Array.isArray(ne)?k(ne):k(pe?Oe=>[...Oe,ne]:Oe=>Oe.filter(ue=>ue!==ne))},D=ne=>{d(ne),B(pe=>({...pe,page:1})),k([])},Y=ne=>{g(ne)},R=ne=>{h(ne)},Z=()=>{window.open("/admin/media/upload","_blank")},[T,B]=_.useState({page:1,limit:20,total:0,pages:0}),W=[{id:"PRODUCTS",name:e("adminMedia.products"),icon:""},{id:"CATEGORIES",name:e("adminMedia.categories"),icon:""},{id:"PROFILE",name:e("adminMedia.profile"),icon:""},{id:"DOCUMENTS",name:e("adminMedia.documents"),icon:""},{id:"VIDEOS",name:e("adminMedia.videos"),icon:""}],Q=_.useCallback(async()=>{a(!0);try{const ne=new URLSearchParams({collection:o,page:T.page,limit:T.limit,...m&&{search:m}}),pe=await fetch(`/api/media?${ne}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(pe.ok){const Oe=await pe.json();i(Oe.data.media),B(Oe.data.pagination)}else throw new Error("Failed to load media")}catch(ne){console.error("Load media error:",ne),q.error("Failed to load media")}finally{a(!1)}},[o,T.page,T.limit,m]);_.useEffect(()=>{Q()},[Q]);const $=async ne=>{if(window.confirm(e("adminMedia.confirmDelete")))try{if((await fetch(`/api/media/${ne}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)i(Oe=>Oe.filter(ue=>ue.id!==ne)),q.success("Media deleted successfully");else throw new Error("Failed to delete media")}catch(pe){console.error("Delete media error:",pe),q.error("Failed to delete media")}},O=async()=>{if(p.length!==0&&window.confirm(e("adminMedia","confirmBulkDelete",{count:p.length})))try{const ne=await fetch("/api/media/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({ids:p})});if(ne.ok){const pe=await ne.json();q.success(`Deleted ${pe.data.deletedCount} of ${p.length} items`),k([]),Q()}else throw new Error("Failed to bulk delete media")}catch(ne){console.error("Bulk delete error:",ne),q.error("Failed to bulk delete media")}},K=ne=>{w(ne),y(!0)},V=ne=>{F(ne),A(!0)},X=ne=>{i(pe=>pe.map(Oe=>Oe.id===ne.id?ne:Oe)),q.success("Product image updated with AI generation")},le=ne=>{if(ne===0)return"0 Bytes";const pe=1024,Oe=["Bytes","KB","MB","GB"],ue=Math.floor(Math.log(ne)/Math.log(pe));return parseFloat((ne/Math.pow(pe,ue)).toFixed(2))+" "+Oe[ue]},ge=ne=>new Date(ne).toLocaleDateString();return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(Xa,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(hr,{icon:Wy,title:e("adminNavigation.media"),description:e("adminMedia.manageMediaDescription"),actions:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>P(!0),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-md hover:from-purple-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors duration-200",children:[s.jsx(sa,{className:"h-4 w-4 mr-2"}),"AI Settings"]}),s.jsxs("button",{onClick:()=>window.open("/admin/media/upload","_blank"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadMedia")]})]})}),s.jsx(G9,{searchQuery:m,onSearchChange:Y,viewMode:c,onViewModeChange:R,selectedItems:p,onBulkDelete:O,collections:W.map(ne=>({...ne,name:ne.name,...o===ne.id&&{count:T.total}})),selectedCollection:o,onCollectionChange:D,onUploadClick:Z}),r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(pt,{size:"large"})}):n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(xr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia.noMediaFound")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia.noMediaDescription")}),s.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadFirstMedia")]})]}):s.jsxs(s.Fragment,{children:[c==="grid"?s.jsx(q9,{media:n,selectedItems:p,onSelectItem:I,onEdit:K,onDelete:$,onAIGenerate:V,formatFileSize:le,formatDate:ge}):s.jsx(K9,{media:n,selectedItems:p,onSelectItem:I,onEdit:K,onDelete:$,formatFileSize:le,formatDate:ge}),T.pages>1&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e("adminMedia.showing")," ",(T.page-1)*T.limit+1," ",e("adminMedia.to")," ",Math.min(T.page*T.limit,T.total)," ",e("adminMedia.of")," ",T.total," ",e("adminMedia.results")]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>B(ne=>({...ne,page:ne.page-1})),disabled:T.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia.previous")}),s.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[T.page," / ",T.pages]}),s.jsx("button",{onClick:()=>B(ne=>({...ne,page:ne.page+1})),disabled:T.page===T.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia.next")})]})]})]}),s.jsx(Z9,{isOpen:j,onClose:()=>{y(!1),w(null)},media:b,onSave:ne=>{i(pe=>pe.map(Oe=>Oe.id===ne.id?ne:Oe)),y(!1),w(null)}}),s.jsx(J9,{isOpen:N,onClose:()=>P(!1)}),s.jsx(X9,{media:E,isOpen:C,onClose:()=>{A(!1),F(null)},onComplete:X})]})})},eB=()=>{const{t:e}=je(),{user:t}=Se(W=>W.auth),[r,a]=_.useState("PRODUCTS"),[n,i]=_.useState([]),[o,d]=_.useState(!1),[c,h]=_.useState({}),[m,g]=_.useState({}),[p,k]=_.useState({}),[x,j]=_.useState({}),[y,b]=_.useState({}),w=[{id:"PRODUCTS",name:e("adminMedia.products"),icon:"",accept:"image/*"},{id:"CATEGORIES",name:e("adminMedia.categories"),icon:"",accept:"image/*"},{id:"BANNERS",name:e("adminMedia.banners"),icon:"",accept:"image/*"},{id:"PROFILE",name:e("adminMedia.profile"),icon:"",accept:"image/*"},{id:"DOCUMENTS",name:e("adminMedia.documents"),icon:"",accept:".pdf,.doc,.docx"},{id:"VIDEOS",name:e("adminMedia.videos"),icon:"",accept:"video/*"}],N=w.find(W=>W.id===r),P=_.useCallback(W=>{const Q=Array.from(W.target.files),$=[],O=[];Q.forEach(K=>{const V=R(r);if(K.size>V){O.push(`${K.name}: File too large (max ${T(V)})`);return}if(!Z(K,r)){O.push(`${K.name}: Invalid file type`);return}$.push(K)}),O.length>0&&q.error(O.join(`
`)),$.length>0&&(i(K=>[...K,...$]),$.forEach(K=>{if(K.type.startsWith("image/")){const V=new FileReader;V.onload=X=>{b(le=>({...le,[K.name+K.size]:X.target.result}))},V.readAsDataURL(K)}}))},[r]),C=_.useCallback(W=>{W.preventDefault();const Q=Array.from(W.dataTransfer.files);P({target:{files:Q}})},[P]),A=_.useCallback(W=>{W.preventDefault()},[]),E=W=>{const Q=n[W],$=Q.name+Q.size;i(O=>O.filter((K,V)=>V!==W)),b(O=>{const K={...O};return delete K[$],K}),g(O=>{const K={...O};return delete K[W],K}),k(O=>{const K={...O};return delete K[W],K}),j(O=>{const K={...O};return delete K[W],K})},F=(W,Q)=>{g($=>({...$,[W]:Q}))},I=(W,Q)=>{k($=>({...$,[W]:Q}))},D=(W,Q)=>{j($=>({...$,[W]:Q}))},Y=async()=>{if(n.length===0){q.error("Please select files to upload");return}d(!0);const W=[];for(let O=0;O<n.length;O++){const K=n[O],V=new FormData;V.append("file",K),V.append("collection",r),m[O]&&V.append("alt",m[O]),p[O]&&V.append("caption",p[O]),x[O]&&V.append("description",x[O]);try{h(le=>({...le,[O]:0}));const X=await fetch("/api/media/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:V});if(X.ok){const le=await X.json();W.push({success:!0,data:le.data}),h(ge=>({...ge,[O]:100}))}else{const le=await X.json();W.push({success:!1,error:le.message||"Upload failed"})}}catch(X){console.error("Upload error:",X),W.push({success:!1,error:X.message})}}d(!1),h({});const Q=W.filter(O=>O.success).length,$=W.filter(O=>!O.success).length;Q>0&&(q.success(`Successfully uploaded ${Q} file(s)`),i([]),g({}),k({}),j({})),$>0&&q.error(`Failed to upload ${$} file(s)`)},R=W=>({PRODUCTS:5242880,CATEGORIES:2097152,BANNERS:10485760,PROFILE:2097152,DOCUMENTS:10485760,VIDEOS:52428800})[W]||5*1024*1024,Z=(W,Q)=>{var O;return((O={PRODUCTS:["image/jpeg","image/png","image/webp","image/gif"],CATEGORIES:["image/jpeg","image/png","image/webp"],BANNERS:["image/jpeg","image/png","image/webp"],PROFILE:["image/jpeg","image/png","image/webp"],DOCUMENTS:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],VIDEOS:["video/mp4","video/webm","video/avi"]}[Q])==null?void 0:O.includes(W.type))||!1},T=W=>{if(W===0)return"0 Bytes";const Q=1024,$=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(W)/Math.log(Q));return parseFloat((W/Math.pow(Q,O)).toFixed(2))+" "+$[O]},B=W=>{if(W.type.startsWith("image/")){const Q=W.name+W.size;return y[Q]?s.jsx("img",{src:y[Q],alt:W.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}):s.jsx(xr,{className:"w-8 h-8 text-blue-500"})}return W.type.startsWith("video/")?s.jsx(uA,{className:"w-8 h-8 text-red-500"}):s.jsx(G7,{className:"w-8 h-8 text-gray-500"})};return(t==null?void 0:t.role)!=="ADMIN"?s.jsx(Ae,{children:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[s.jsx(Xa,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels.accessDenied")}),s.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):s.jsx(Ae,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminMedia.uploadMedia")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminMedia.uploadMediaDescription")})]})}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminMedia.selectCollection")}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:w.map(W=>s.jsxs("button",{onClick:()=>a(W.id),className:`p-4 rounded-lg border-2 transition-colors ${r===W.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[s.jsx("div",{className:"text-2xl mb-2",children:W.icon}),s.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:W.name}),s.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Max: ",T(R(W.id))]})]},W.id))})]}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{onDrop:C,onDragOver:A,className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors",children:[s.jsx(Jn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia.dragDropFiles")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia.orClickToSelect")}),s.jsx("input",{type:"file",multiple:!0,accept:N==null?void 0:N.accept,onChange:P,className:"hidden",id:"file-upload"}),s.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),e("adminMedia.selectFiles")]}),s.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e("adminMedia.supportedFormats"),": ",N==null?void 0:N.accept]})]})}),n.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminMedia.selectedFiles")," (",n.length,")"]}),s.jsx("div",{className:"space-y-4",children:n.map((W,Q)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[B(W),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:W.name}),s.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:T(W.size)}),c[Q]!==void 0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[c[Q]<100?s.jsx(Yn,{className:"w-4 h-4 animate-spin text-blue-500"}):s.jsx(Ct,{className:"w-4 h-4 text-green-500"}),s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c[Q],"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c[Q]}%`}})})]})]})]}),s.jsx("button",{onClick:()=>E(Q),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",disabled:o,children:s.jsx(at,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.altText")}),s.jsx("input",{type:"text",value:m[Q]||"",onChange:$=>F(Q,$.target.value),placeholder:e("adminMedia.altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.caption")}),s.jsx("input",{type:"text",value:p[Q]||"",onChange:$=>I(Q,$.target.value),placeholder:e("adminMedia.captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia.description")}),s.jsx("input",{type:"text",value:x[Q]||"",onChange:$=>D(Q,$.target.value),placeholder:e("adminMedia.descriptionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]})]})]},Q))}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:Y,disabled:o||n.length===0,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Yn,{className:"h-4 w-4 mr-2 animate-spin"}),e("adminMedia.uploading")]}):s.jsxs(s.Fragment,{children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),e("adminMedia.uploadFiles")," (",n.length,")"]})})})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Xa,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-medium mb-1",children:e("adminMedia.uploadGuidelines")}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[e("adminMedia.maxFileSize"),": ",T(R(r))]}),s.jsxs("li",{children:[e("adminMedia.supportedFormats"),": ",N==null?void 0:N.accept]}),s.jsx("li",{children:e("adminMedia.automaticOptimization")}),s.jsx("li",{children:e("adminMedia.altTextRecommendation")})]})]})]})})]})})},l1={"Seasonal Sale":{en:"Seasonal Sale",is:"rstabundin sala"},Clearance:{en:"Clearance",is:"tslu"},"Bundle Deal":{en:"Bundle Deal",is:"Bnt tilbo"},"Customer Loyalty":{en:"Customer Loyalty",is:"Trygg viskiptavina"},"Stock Reduction":{en:"Stock Reduction",is:"Minnkun birga"},"New Item Launch":{en:"New Item Launch",is:"N vru sem hleypt er t"}};function tB({isOpen:e,onClose:t,onSubmit:r,editingDiscount:a,allProducts:n,isLoading:i}){const{t:o}=je(),[d,c]=_.useState({productId:"",originalPrice:"",discountPercentage:"",discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:"",reasonTemplate:"custom"}),[h,m]=_.useState({}),[g,p]=_.useState([]),[k,x]=_.useState(!1),[j,y]=_.useState("");_.useEffect(()=>{c(a?{productId:a.id,originalPrice:a.originalPrice||"",discountPercentage:a.discountPercentage||"",discountStartDate:a.discountStartDate?a.discountStartDate.split("T")[0]:"",discountEndDate:a.discountEndDate?a.discountEndDate.split("T")[0]:"",discountReason:a.discountReason||"",discountReasonIs:a.discountReasonIs||"",reasonTemplate:"custom"}:{productId:"",originalPrice:"",discountPercentage:"",discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:"",reasonTemplate:"custom"}),m({})},[a,e]),_.useEffect(()=>{if(!e)return;const D=Y=>{Y.key==="Escape"&&t()};return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[e,t]),_.useEffect(()=>{if(j.trim()){const D=n.filter(Y=>!Y.hasDiscount&&(Y.name.toLowerCase().includes(j.toLowerCase())||Y.nameIs&&Y.nameIs.toLowerCase().includes(j.toLowerCase())));p(D),x(!0)}else p([]),x(!1)},[j,n]);const b=D=>{c({...d,productId:D.id,originalPrice:D.price||D.basePrice||""}),y(D.name),x(!1)},w=D=>{const Y=D.target.value;c({...d,discountPercentage:Y}),h.discountPercentage&&m({...h,discountPercentage:""})},N=D=>{if(D==="custom")c({...d,reasonTemplate:"custom",discountReason:"",discountReasonIs:""});else{const Y=l1[D];c({...d,reasonTemplate:D,discountReason:Y.en,discountReasonIs:Y.is})}},P=D=>{c({...d,[D]:""})},C=()=>{const D={};return!a&&!d.productId&&(D.productId=o("discounts.messages.selectProduct")),d.discountPercentage?(isNaN(d.discountPercentage)||d.discountPercentage<0||d.discountPercentage>100)&&(D.discountPercentage=o("discounts.messages.invalidDiscount")):D.discountPercentage="Required",d.discountStartDate&&d.discountEndDate&&new Date(d.discountStartDate)>new Date(d.discountEndDate)&&(D.dates=o("discounts.messages.startAfterEnd")),m(D),Object.keys(D).length===0},A=async D=>{if(D.preventDefault(),!C())return;n.find(R=>R.id===d.productId);const Y={productId:d.productId,originalPrice:parseFloat(d.originalPrice),discountPercentage:parseFloat(d.discountPercentage),discountStartDate:d.discountStartDate||null,discountEndDate:d.discountEndDate||null,discountReason:d.discountReason||null,discountReasonIs:d.discountReasonIs||null};r(Y)};d.productId?a||n.find(D=>D.id===d.productId):null;const F=d.originalPrice&&d.discountPercentage?parseFloat(d.originalPrice)*(1-parseFloat(d.discountPercentage)/100):0,I=d.originalPrice&&d.discountPercentage?parseFloat(d.originalPrice)*(parseFloat(d.discountPercentage)/100):0;return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:o(a?"discounts.modal.editTitle":"discounts.modal.createTitle")}),s.jsx("button",{onClick:t,disabled:i,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:s.jsx(at,{size:24})})]}),s.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[!a&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("discounts.modal.selectProduct"),s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:j,onChange:D=>y(D.target.value),placeholder:o("discounts.modal.selectProductPlaceholder"),disabled:i,className:`w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600 ${h.productId?"border-red-500":"border-gray-300"}`}),k&&g.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg mt-1 max-h-48 overflow-y-auto z-10",children:g.map(D=>s.jsxs("button",{type:"button",onClick:()=>b(D),className:"w-full text-left px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:D.name}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["kr ",(D.price||D.basePrice||0).toLocaleString()]})]},D.id))})]}),h.productId&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.productId})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("discounts.modal.originalPrice")}),s.jsx("input",{type:"text",value:`kr ${parseFloat(d.originalPrice||0).toLocaleString()}`,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[o("discounts.modal.discountPercentage"),s.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",min:"0",max:"100",value:d.discountPercentage,onChange:w,placeholder:"25",disabled:i,className:`flex-1 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600 ${h.discountPercentage?"border-red-500":"border-gray-300"}`}),s.jsx("span",{className:"px-3 py-2 text-gray-600 dark:text-gray-400",children:"%"})]}),h.discountPercentage&&s.jsx("p",{className:"mt-1 text-sm text-red-500",children:h.discountPercentage})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("discounts.modal.discountStartDate")}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",value:d.discountStartDate,onChange:D=>c({...d,discountStartDate:D.target.value}),disabled:i,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"}),d.discountStartDate&&s.jsx("button",{type:"button",onClick:()=>P("discountStartDate"),disabled:i,className:"px-2 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("discounts.modal.discountEndDate")}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",value:d.discountEndDate,onChange:D=>c({...d,discountEndDate:D.target.value}),disabled:i,className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"}),d.discountEndDate&&s.jsx("button",{type:"button",onClick:()=>P("discountEndDate"),disabled:i,className:"px-2 py-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})]})]})]}),h.dates&&s.jsx("p",{className:"text-sm text-red-500",children:h.dates}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("discounts.modal.discountReason")}),d.reasonTemplate==="custom"?s.jsx("input",{type:"text",value:d.discountReason,onChange:D=>c({...d,discountReason:D.target.value}),placeholder:"e.g., Seasonal Sale",disabled:i,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"}):s.jsx("div",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:d.discountReason})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("discounts.modal.discountReasonIs")}),d.reasonTemplate==="custom"?s.jsx("input",{type:"text",value:d.discountReasonIs,onChange:D=>c({...d,discountReasonIs:D.target.value}),placeholder:"e.g., rstabundin sala",disabled:i,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"}):s.jsx("div",{className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:d.discountReasonIs})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("discounts.modal.selectReason")}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[Object.keys(l1).map(D=>s.jsx("button",{type:"button",onClick:()=>N(D),disabled:i,className:`px-3 py-1 rounded-full text-sm ${d.reasonTemplate===D?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:D},D)),s.jsx("button",{type:"button",onClick:()=>N("custom"),disabled:i,className:`px-3 py-1 rounded-full text-sm ${d.reasonTemplate==="custom"?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:o("discounts.modal.reasonCustom")})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[s.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:o("discounts.modal.preview")}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[o("discounts.modal.previewOriginal"),":"]}),s.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["kr ",parseFloat(d.originalPrice||0).toLocaleString()]})]}),d.discountPercentage&&s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[o("discounts.modal.previewDiscount")," (",d.discountPercentage,"%):"]}),s.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["-kr ",parseFloat(I).toLocaleString()]})]}),s.jsxs("div",{className:"border-t border-gray-300 dark:border-gray-700 pt-2 mt-2 flex justify-between font-bold",children:[s.jsxs("span",{className:"text-gray-900 dark:text-white",children:[o("discounts.modal.previewFinal"),":"]}),s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["kr ",parseFloat(F).toLocaleString()]})]})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,disabled:i,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50",children:o("discounts.modal.cancel")}),s.jsx("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),o("discounts.modal.loading")]}):o(a?"discounts.modal.submitEdit":"discounts.modal.submit")})]})]})]})}):null}const Ws=Ne("discounts/fetchProductsWithDiscounts",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/api/products?hasDiscount=true&limit=100")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch discounted products")}}),Bh=Ne("discounts/fetchAllProducts",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get("/api/products?limit=500")).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch products")}}),Ii=Ne("discounts/setProductDiscount",async(e,{rejectWithValue:t})=>{var r,a;try{const{productId:n,originalPrice:i,discountPercentage:o,discountStartDate:d,discountEndDate:c,discountReason:h,discountReasonIs:m}=e;return(await ce.post(`/api/products/${n}/discount`,{originalPrice:i,discountPercentage:o,discountStartDate:d,discountEndDate:c,discountReason:h,discountReasonIs:m})).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to set discount")}}),zh=Ne("discounts/removeProductDiscount",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.delete(`/api/products/${e}/discount`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to remove discount")}}),Fd=Ne("discounts/bulkRemoveDiscounts",async(e,{rejectWithValue:t})=>{var r,a;try{const n=e.map(o=>ce.delete(`/api/products/${o}/discount`));return(await Promise.all(n)).map(o=>o.data)}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to bulk remove discounts")}}),rB={productsWithDiscounts:[],allProducts:[],isLoading:!1,error:null,operationLoading:!1},sB=Vr({name:"discounts",initialState:rB,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Ws.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ws.fulfilled,(t,r)=>{t.isLoading=!1,t.productsWithDiscounts=Array.isArray(r.payload)?r.payload:r.payload.data||[]}).addCase(Ws.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}),e.addCase(Bh.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Bh.fulfilled,(t,r)=>{t.isLoading=!1,t.allProducts=Array.isArray(r.payload)?r.payload:r.payload.data||[]}).addCase(Bh.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}),e.addCase(Ii.pending,t=>{t.operationLoading=!0,t.error=null}).addCase(Ii.fulfilled,(t,r)=>{t.operationLoading=!1;const a=r.payload,n=t.productsWithDiscounts.findIndex(i=>i.id===a.id);n>=0?t.productsWithDiscounts[n]=a:t.productsWithDiscounts.push(a)}).addCase(Ii.rejected,(t,r)=>{t.operationLoading=!1,t.error=r.payload}),e.addCase(zh.pending,t=>{t.operationLoading=!0,t.error=null}).addCase(zh.fulfilled,(t,r)=>{t.operationLoading=!1,t.productsWithDiscounts=t.productsWithDiscounts.filter(a=>a.id!==r.payload.id)}).addCase(zh.rejected,(t,r)=>{t.operationLoading=!1,t.error=r.payload}),e.addCase(Fd.pending,t=>{t.operationLoading=!0,t.error=null}).addCase(Fd.fulfilled,(t,r)=>{t.operationLoading=!1;const a=r.payload.map(n=>n.id);t.productsWithDiscounts=t.productsWithDiscounts.filter(n=>!a.includes(n.id))}).addCase(Fd.rejected,(t,r)=>{t.operationLoading=!1,t.error=r.payload})}}),aB=sB.reducer,xn=e=>{const t=new Date;return e.hasDiscount?e.discountStartDate&&new Date(e.discountStartDate)>t?"scheduled":e.discountEndDate&&new Date(e.discountEndDate)<t?"expired":e.discountEndDate&&(new Date(e.discountEndDate)-t)/864e5<=7?"expiring":"active":"inactive"},nB=e=>{const t=xn(e),r=new Date;if(t==="scheduled"){const a=Math.ceil((new Date(e.discountStartDate)-r)/864e5);return`Starts in ${a} day${a!==1?"s":""}`}if(t==="active"||t==="expiring"){const a=Math.ceil((new Date(e.discountEndDate)-r)/864e5);return`${a} day${a!==1?"s":""} left`}return""};function iB(){const{t:e}=je(),t=ut(),{productsWithDiscounts:r,allProducts:a,isLoading:n,operationLoading:i}=Se(z=>z.discounts),[o,d]=_.useState(!1),[c,h]=_.useState(null),[m,g]=_.useState(""),[p,k]=_.useState(""),[x,j]=_.useState(""),[y,b]=_.useState([]),[w,N]=_.useState(null),[P,C]=_.useState(""),[A,E]=_.useState(1),F=20;_.useEffect(()=>{t(Ws()),t(Bh())},[t]);const I=r.filter(z=>{const we=!m||z.name.toLowerCase().includes(m.toLowerCase())||z.nameIs&&z.nameIs.toLowerCase().includes(m.toLowerCase()),Ie=xn(z),Fe=!p||Ie===p,se=!x||z.category===x;return we&&Fe&&se}),D=[...I].sort((z,we)=>{const Ie={active:0,expiring:1,scheduled:2,expired:3},Fe=xn(z),se=xn(we);return Ie[Fe]!==Ie[se]?Ie[Fe]-Ie[se]:z.name.localeCompare(we.name)}),Y=Math.ceil(D.length/F),R=D.slice((A-1)*F,A*F),Z=r.length,T=r.reduce((z,we)=>z+(we.originalPrice*(we.discountPercentage/100)||0),0),B=Z>0?(r.reduce((z,we)=>z+(we.discountPercentage||0),0)/Z).toFixed(1):0,W=r.filter(z=>xn(z)==="expiring").length,Q=r.filter(z=>xn(z)==="expired").length,$=[...new Set(a.map(z=>z.category).filter(Boolean))],O=()=>{h(null),d(!0)},K=z=>{h(z),d(!0)},V=async z=>{try{await t(Ii({productId:(c==null?void 0:c.id)||z.productId,originalPrice:z.originalPrice,discountPercentage:z.discountPercentage,discountStartDate:z.discountStartDate||null,discountEndDate:z.discountEndDate||null,discountReason:z.discountReason,discountReasonIs:z.discountReasonIs})).unwrap(),d(!1),h(null),Ve.success(e(c?"common.updated":"common.created")),t(Ws())}catch(we){Ve.error(we||e("common.error"))}},X=()=>{d(!1),h(null)},le=async z=>{if(window.confirm(e("discounts.confirm.removeDiscount")||"Are you sure you want to remove this discount? This cannot be undone."))try{await t(zh(z)).unwrap(),Ve.success(e("common.deleted")),t(Ws())}catch(we){Ve.error(we||e("common.error"))}},ge=async(z,we)=>{const Ie=r.find(Fe=>Fe.id===z);if(Ie)try{const Fe=new Date(Ie.discountEndDate);Fe.setDate(Fe.getDate()+we),await t(Ii({productId:z,originalPrice:Ie.originalPrice,discountPercentage:Ie.discountPercentage,discountStartDate:Ie.discountStartDate,discountEndDate:Fe.toISOString().split("T")[0],discountReason:Ie.discountReason,discountReasonIs:Ie.discountReasonIs})).unwrap(),Ve.success(e("discounts.messages.extendedSuccessfully")),t(Ws())}catch(Fe){Ve.error(Fe||e("common.error"))}},ne=async()=>{if(window.confirm(`Remove discount from ${y.length} products?`))try{await t(Fd(y)).unwrap(),Ve.success(`Removed discounts from ${y.length} products`),b([]),t(Ws())}catch(z){Ve.error(z||e("common.error"))}},pe=async z=>{try{const we=y.map(Ie=>{const Fe=r.find(Pe=>Pe.id===Ie);if(!Fe||!Fe.discountEndDate)return null;const se=new Date(Fe.discountEndDate);return se.setDate(se.getDate()+z),t(Ii({productId:Ie,originalPrice:Fe.originalPrice,discountPercentage:Fe.discountPercentage,discountStartDate:Fe.discountStartDate,discountEndDate:se.toISOString().split("T")[0],discountReason:Fe.discountReason,discountReasonIs:Fe.discountReasonIs}))});await Promise.all(we.filter(Boolean)),Ve.success(`Extended ${y.length} discounts`),b([]),t(Ws())}catch(we){Ve.error(we||e("common.error"))}},Oe=async(z,we)=>{if(we<0||we>100){Ve.error(e("discounts.messages.invalidDiscount"));return}const Ie=r.find(Fe=>Fe.id===z);if(Ie)try{await t(Ii({productId:z,originalPrice:Ie.originalPrice,discountPercentage:we,discountStartDate:Ie.discountStartDate,discountEndDate:Ie.discountEndDate,discountReason:Ie.discountReason,discountReasonIs:Ie.discountReasonIs})).unwrap(),N(null),Ve.success("Discount updated"),t(Ws())}catch(Fe){Ve.error(Fe||e("common.error"))}},ue=z=>{y.includes(z)?b(y.filter(we=>we!==z)):b([...y,z])},Me=()=>{y.length===R.length?b([]):b(R.map(z=>z.id))},et=async()=>{const z=r.filter(we=>xn(we)==="expired").map(we=>we.id);if(window.confirm(`Remove ${z.length} expired discounts?`))try{await t(Fd(z)).unwrap(),Ve.success(`Removed ${z.length} expired discounts`),t(Ws())}catch(we){Ve.error(we||e("common.error"))}},Ze=z=>{const we="px-3 py-1 rounded-full text-xs font-medium";switch(z){case"active":return`${we} bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400`;case"scheduled":return`${we} bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-400`;case"expiring":return`${we} bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-400`;case"expired":return`${we} bg-gray-100 dark:bg-gray-900/30 text-gray-800 dark:text-gray-400`;default:return we}};return s.jsx(Ae,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsx(hr,{icon:hd,title:e("discounts.title"),description:e("discounts.description"),action:{label:e("discounts.createDiscount"),onClick:O,icon:Wt}}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e("discounts.summary.productsOnDiscount")}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:Z})]}),s.jsx(Ye,{className:"w-10 h-10 text-blue-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e("discounts.summary.totalSaved")}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:["kr ",Math.round(T).toLocaleString()]})]}),s.jsx(Wi,{className:"w-10 h-10 text-green-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e("discounts.summary.averageDiscount")}),s.jsxs("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:[B,"%"]})]}),s.jsx(hd,{className:"w-10 h-10 text-purple-500"})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e("discounts.summary.expiringCount")}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:W})]}),s.jsx(lt,{className:"w-10 h-10 text-orange-500"})]})})]}),Q>0&&s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),s.jsxs("span",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:[Q," discounts have expired"]})]}),s.jsx("button",{onClick:et,className:"text-sm px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Clean Up"})]}),W>0&&s.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(lt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"}),s.jsxs("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-300",children:[W," discounts expiring in the next 7 days"]})]})}),y.length>0&&s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:[y.length," items selected"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>pe(7),className:"text-sm px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Extend All +7 Days"}),s.jsx("button",{onClick:ne,className:"text-sm px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Remove All"}),s.jsx("button",{onClick:()=>b([]),className:"text-sm px-4 py-2 bg-gray-300 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-400 dark:hover:bg-gray-600",children:"Clear"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 space-y-4",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:e("discounts.search"),value:m,onChange:z=>{g(z.target.value),E(1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"})}),s.jsxs("select",{value:p,onChange:z=>{k(z.target.value),E(1)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"",children:e("discounts.allStatuses")}),s.jsx("option",{value:"active",children:e("discounts.statusActive")}),s.jsx("option",{value:"scheduled",children:e("discounts.statusScheduled")}),s.jsx("option",{value:"expiring",children:e("discounts.statusExpiringsoon")}),s.jsx("option",{value:"expired",children:e("discounts.statusExpired")})]}),s.jsxs("select",{value:x,onChange:z=>{j(z.target.value),E(1)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white",children:[s.jsx("option",{value:"",children:e("discounts.allCategories")}),$.map(z=>s.jsx("option",{value:z,children:z},z))]})]}),s.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400",children:s.jsx("span",{children:e("discounts.results",{count:I.length})})})]}),n?s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 text-center",children:s.jsx("div",{className:"inline-block w-8 h-8 border-4 border-gray-300 dark:border-gray-600 border-t-blue-600 rounded-full animate-spin"})}):I.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-12 text-center border border-gray-200 dark:border-gray-700",children:[s.jsx(hd,{className:"w-16 h-16 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("discounts.messages.noDiscounts")}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("discounts.messages.noDiscountsDescription")}),s.jsx("button",{onClick:O,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:e("discounts.createDiscount")})]}):s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:s.jsx("input",{type:"checkbox",checked:y.length===R.length,onChange:Me,className:"rounded"})}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.product")}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.category")}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.originalPrice")}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.discountPercent")}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.amountSaved")}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.currentPrice")}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.status")}),s.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("discounts.table.actions")})]})}),s.jsx("tbody",{children:R.map((z,we)=>{const Ie=xn(z),Fe=nB(z),se=z.originalPrice*(1-z.discountPercentage/100),Pe=z.originalPrice*(z.discountPercentage/100);return s.jsxs("tr",{className:`border-b border-gray-200 dark:border-gray-700 ${Ie==="expired"?"bg-gray-50 dark:bg-gray-900/30 opacity-60":we%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-900/30"} hover:bg-gray-100 dark:hover:bg-gray-700`,children:[s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"checkbox",checked:y.includes(z.id),onChange:()=>ue(z.id),className:"rounded"})}),s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white",children:z.name}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400",children:z.category}),s.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white",children:["kr ",z.originalPrice.toLocaleString()]}),s.jsx("td",{className:"px-4 py-3 text-sm",children:w===z.id?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",min:"0",max:"100",value:P,onChange:de=>C(de.target.value),className:"w-16 px-2 py-1 border border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white",autoFocus:!0}),s.jsx("button",{onClick:()=>{Oe(z.id,parseFloat(P))},className:"text-green-600 dark:text-green-400 hover:text-green-700",children:""}),s.jsx("button",{onClick:()=>N(null),className:"text-red-600 dark:text-red-400 hover:text-red-700",children:""})]}):s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600",onClick:()=>{N(z.id),C(z.discountPercentage)},children:[z.discountPercentage,"%",s.jsx(km,{size:14})]})}),s.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 dark:text-white",children:["kr ",Math.round(Pe).toLocaleString()]}),s.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-green-600 dark:text-green-400",children:["kr ",Math.round(se).toLocaleString()]}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("span",{className:Ze(Ie),children:[Ie==="active"&&"Active",Ie==="scheduled"&&"Scheduled",Ie==="expiring"&&"Expiring",Ie==="expired"&&"Expired"]}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Fe})]})}),s.jsx("td",{className:"px-4 py-3 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>K(z),className:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:"Edit",children:s.jsx(km,{size:16})}),z.discountEndDate&&s.jsxs("div",{className:"relative group",children:[s.jsx("button",{className:"p-1 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",children:"+"}),s.jsxs("div",{className:"absolute right-0 mt-1 w-32 bg-white dark:bg-gray-700 shadow-lg rounded hidden group-hover:block z-10 border border-gray-200 dark:border-gray-600",children:[s.jsx("button",{onClick:()=>ge(z.id,7),className:"block w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"+7 Days"}),s.jsx("button",{onClick:()=>ge(z.id,14),className:"block w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border-t border-gray-200 dark:border-gray-600",children:"+14 Days"}),s.jsx("button",{onClick:()=>ge(z.id,30),className:"block w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border-t border-gray-200 dark:border-gray-600",children:"+30 Days"})]})]}),s.jsx("button",{onClick:()=>le(z.id),className:"p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Delete",children:s.jsx(er,{size:16})})]})})]},z.id)})})]})}),Y>1&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Page ",A," of ",Y]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>E(Math.max(1,A-1)),disabled:A===1,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"Previous"}),s.jsx("button",{onClick:()=>E(Math.min(Y,A+1)),disabled:A===Y,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"Next"})]})]}),s.jsx(tB,{isOpen:o,onClose:X,onSubmit:V,editingDiscount:c,allProducts:a,isLoading:i})]})})}const oB=()=>{const{t:e}=je(),t=ut(),{user:r}=Se(E=>E.auth),{orders:a,isLoading:n}=Se(E=>E.orders),[i,o]=_.useState([]),[d,c]=_.useState(!1),[h,m]=_.useState(null),[g,p]=_.useState(!1),[k,x]=_.useState("");_.useEffect(()=>{(r==null?void 0:r.role)==="DELIVERY"?t(Fo({deliveryPersonId:r.id})):(r==null?void 0:r.role)==="ADMIN"&&t(Fo())},[t,r]),_.useEffect(()=>{if(a){if((r==null?void 0:r.role)==="DELIVERY"){const E=a.filter(F=>{var I;return((I=F.deliveryPerson)==null?void 0:I.id)===(r==null?void 0:r.id)&&["CONFIRMED","PREPARING","OUT_FOR_DELIVERY"].includes(F.status)});o(E)}else if((r==null?void 0:r.role)==="ADMIN"){const E=a.filter(F=>F.deliveryMethod==="DELIVERY"&&["CONFIRMED","PREPARING","OUT_FOR_DELIVERY"].includes(F.status));o(E)}}},[a,r]),_.useEffect(()=>{let E;return d&&navigator.geolocation&&(E=navigator.geolocation.watchPosition(()=>{},F=>{console.error("Error getting location:",F),q.error("Villa vi a f stasetningu")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e4})),()=>{E&&navigator.geolocation.clearWatch(E)}},[d,t,r,e]);const j=E=>{switch(E){case"CONFIRMED":return s.jsx(Ye,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return s.jsx(Ye,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return s.jsx(yr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return s.jsx(Ct,{className:"w-5 h-5 text-green-600"});default:return s.jsx(Ye,{className:"w-5 h-5 text-gray-600"})}},y=E=>{switch(E){case"CONFIRMED":return"Stafest";case"PREPARING":return"Undirbningur";case"OUT_FOR_DELIVERY":return" afhendingu";case"DELIVERED":return"Afhent";default:return E}},b=E=>{switch(E){case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},w=async()=>{try{await t(cd({orderId:h.id,status:k})).unwrap(),q.success("Staa uppfrt!"),p(!1),m(null),x("")}catch(E){q.error(E.message||"Villa kom upp")}},N=()=>{c(!d),d?q.info("Stasetning stvu"):q.success("Stasetning byrja")},P=E=>{m(E),x("OUT_FOR_DELIVERY"),p(!0)},C=E=>{m(E),x("DELIVERED"),p(!0)},A=[{value:"CONFIRMED",label:"Stafest"},{value:"PREPARING",label:"Undirbningur"},{value:"OUT_FOR_DELIVERY",label:" afhendingu"},{value:"DELIVERED",label:"Afhent"}];return(r==null?void 0:r.role)!=="DELIVERY"&&(r==null?void 0:r.role)!=="ADMIN"?s.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("delivery.title")}),s.jsxs("div",{className:"card p-8",children:[s.jsx(lt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Agangur bannaur"}),s.jsx("p",{className:"text-gray-600",children:" hefur ekki leyfi til a skoa essa su."})]})]})})}):n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})}):s.jsx(Ae,{children:s.jsxs("div",{className:"max-w-none",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[s.jsx(hr,{icon:yr,title:(r==null?void 0:r.role)==="ADMIN"?"Yfirlit afhendinga":"Afhendingarbor",description:(r==null?void 0:r.role)==="ADMIN"?"Fylgstu me llum afhendingum  kerfinu.":"Velkomin, "+((r==null?void 0:r.fullName)||(r==null?void 0:r.username))+". Stjrnau afhendingum num."}),(r==null?void 0:r.role)==="DELIVERY"&&s.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${d?"bg-green-500 animate-pulse":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:d?"Stasetning virk":"Stasetning virk"})]}),s.jsxs("button",{onClick:N,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${d?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"} focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200`,children:[d?s.jsx(aA,{className:"w-4 h-4 mr-2"}):s.jsx(cc,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:d?"Stva":"Byrja"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(Ye,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:(r==null?void 0:r.role)==="ADMIN"?"Allar pantanir":"thlutaar pantanir"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:s.jsx(yr,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:" afhendingu"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(E=>E.status==="OUT_FOR_DELIVERY").length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(Ct,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Afhent  dag"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(E=>E.status==="DELIVERED"&&new Date(E.updatedAt).toDateString()===new Date().toDateString()).length})]})]})}),s.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:s.jsx(nr,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Bur afhendingar"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:i.filter(E=>["CONFIRMED","PREPARING"].includes(E.status)).length})]})]})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(r==null?void 0:r.role)==="ADMIN"?"Afhendingarpantanir":"thlutaar pantanir"}),i.length===0?s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8 text-center",children:[s.jsx(yr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:(r==null?void 0:r.role)==="ADMIN"?"Engar afhendingarpantanir":"Engar pantanir thlutaar"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:(r==null?void 0:r.role)==="ADMIN"?"Engar afhendingarpantanir fundust  kerfinu.":"Engar pantanir hafa veri thlutaar r enn."})]}):s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(E=>{var F,I,D;return s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pntun #",E.orderNumber]}),s.jsx("p",{className:"text-sm text-gray-600",children:new Date(E.createdAt).toLocaleDateString()})]}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${b(E.status)}`,children:[j(E.status),s.jsx("span",{children:y(E.status)})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx(ts,{className:"w-4 h-4 text-gray-400"}),s.jsx("span",{className:"font-medium text-gray-900",children:((F=E.user)==null?void 0:F.fullName)||((I=E.user)==null?void 0:I.username)})]}),((D=E.user)==null?void 0:D.phone)&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(qi,{className:"w-4 h-4 text-gray-400"}),s.jsx("a",{href:`tel:${E.user.phone}`,className:"text-primary-600 hover:text-primary-700",children:E.user.phone})]})]}),E.deliveryMethod==="DELIVERY"&&E.address&&s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"flex items-start space-x-2",children:[s.jsx(Ta,{className:"w-4 h-4 text-gray-400 mt-1"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Afhendingarstaur"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[E.address.street,s.jsx("br",{}),E.address.city,", ",E.address.postalCode]})]})]})}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Vrur:"}),s.jsxs("div",{className:"space-y-1",children:[E.items.slice(0,3).map((Y,R)=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:[Y.quantity,"x ",Y.product.nameIs||Y.product.name]}),s.jsxs("span",{className:"font-medium",children:[(Y.price*Y.quantity).toLocaleString()," ",e("common.currency")]})]},R)),E.items.length>3&&s.jsx("p",{className:"text-xs text-gray-500",children:"fleiri"})]})]}),s.jsx("div",{className:"border-t pt-4 mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Samtals:"}),s.jsxs("span",{className:"text-lg font-bold text-primary-600",children:[E.totalAmount.toLocaleString()," ",e("common.currency")]})]})}),s.jsxs("div",{className:"flex space-x-2",children:[E.status==="CONFIRMED"&&s.jsxs("button",{onClick:()=>P(E),className:"btn btn-primary flex-1 flex items-center justify-center space-x-2",children:[s.jsx(cc,{className:"w-4 h-4"}),"Byrja afhendingu"]}),E.status==="OUT_FOR_DELIVERY"&&s.jsxs("button",{onClick:()=>C(E),className:"btn btn-success flex-1 flex items-center justify-center space-x-2",children:[s.jsx(Ct,{className:"w-4 h-4"}),"Ljka afhendingu"]}),s.jsx("button",{onClick:()=>{m(E),x(E.status),p(!0)},className:"btn btn-outline",children:"Breyta"})]})]},E.id)})})]}),g&&h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[s.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:["Uppfra pntun #",h.orderNumber]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"N staa"}),s.jsx("select",{value:k,onChange:E=>x(E.target.value),className:"input w-full",children:A.map(E=>s.jsx("option",{value:E.value,children:E.label},E.value))})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{p(!1),m(null),x("")},className:"btn btn-outline flex-1",children:"Htta vi"}),s.jsx("button",{onClick:w,className:"btn btn-primary flex-1",children:"Uppfra"})]})]})})]})})};function lB(){const e=ut(),t=Ur(),{isAuthenticated:r,user:a,isLoading:n}=Se(o=>o.auth);kA();const i=t.pathname.startsWith("/admin")||t.pathname.startsWith("/delivery");return _.useEffect(()=>{(()=>{document.title="lfng - Vn og Bjrverslun"})();const d=()=>{var h;if(typeof window<"u"&&((h=window.Capacitor)!=null&&h.isNativePlatform())){const m=document.documentElement.classList.contains("dark");Cw.setStyle({style:m?bm.Dark:bm.Light}).catch(g=>{console.warn("Status bar styling not available:",g)}),Cw.setBackgroundColor({color:m?"#1f2937":"#ffffff"}).catch(g=>{console.warn("Status bar background color not available:",g)})}};d();const c=new MutationObserver(h=>{h.forEach(m=>{m.attributeName==="class"&&d()})});return c.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>c.disconnect()},[]),_.useEffect(()=>{requestAnimationFrame(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})})},[t.pathname]),_.useEffect(()=>{localStorage.getItem("token")&&!r&&e(oh())},[e,r]),_.useEffect(()=>{if(r&&a)try{yt.connect(),a.role==="ADMIN"?yt.joinAdminRoom():a.role==="DELIVERY"&&yt.joinDeliveryRoom(a.id)}catch(o){console.warn("Socket connection failed, continuing without real-time features:",o)}return()=>{yt.isSocketConnected()&&yt.disconnect()}},[r,a]),_.useEffect(()=>{if(r){const o=d=>{e(T7(d))};return yt.onOrderStatusUpdate(o),()=>{yt.removeListener("order-status-update",o)}}},[r,e]),n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(pt,{size:"large"})}):s.jsx(e_,{children:s.jsx(fI,{children:s.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[s.jsx(LA,{}),s.jsx("main",{className:"flex-1 pt-16-safe",children:s.jsxs(gE,{children:[s.jsx(We,{path:"/",element:s.jsx(KA,{})}),s.jsx(We,{path:"/products",element:s.jsx(sM,{})}),s.jsx(We,{path:"/products/:id",element:s.jsx(PM,{})}),s.jsx(We,{path:"/login",element:s.jsx(uR,{})}),s.jsx(We,{path:"/admin-login",element:s.jsx(mR,{})}),s.jsx(We,{path:"/auth/callback",element:s.jsx(hR,{})}),s.jsxs(We,{element:s.jsx(cf,{}),children:[s.jsx(We,{path:"/cart",element:s.jsx(LM,{})}),s.jsx(We,{path:"/orders",element:s.jsx(ac,{to:"/profile",replace:!0})}),s.jsx(We,{path:"/orders/:id",element:s.jsx(RM,{})}),s.jsx(We,{path:"/profile",element:s.jsx(lR,{})})]}),s.jsxs(We,{element:s.jsx(cf,{requiredRole:"ADMIN"}),children:[s.jsx(We,{path:"/admin",element:s.jsx(bR,{})}),s.jsx(We,{path:"/admin/products",element:s.jsx(NR,{})}),s.jsx(We,{path:"/admin/discounts",element:s.jsx(iB,{})}),s.jsx(We,{path:"/admin/categories",element:s.jsx(IR,{})}),s.jsx(We,{path:"/admin/orders",element:s.jsx(TR,{})}),s.jsx(We,{path:"/admin/pos",element:s.jsx(LR,{})}),s.jsx(We,{path:"/admin/customers",element:s.jsx(r9,{})}),s.jsx(We,{path:"/admin/chat",element:s.jsx($9,{})}),s.jsx(We,{path:"/admin/analytics",element:s.jsx(t9,{})}),s.jsx(We,{path:"/admin/reports",element:s.jsx(o9,{})}),s.jsx(We,{path:"/admin/notifications",element:s.jsx(l9,{})}),s.jsx(We,{path:"/admin/media",element:s.jsx(Q9,{})}),s.jsx(We,{path:"/admin/media/upload",element:s.jsx(eB,{})}),s.jsx(We,{path:"/admin/banners",element:s.jsx(N9,{})}),s.jsx(We,{path:"/admin/demo-data",element:s.jsx(U9,{})}),s.jsx(We,{path:"/admin/translations",element:s.jsx(W9,{})}),s.jsx(We,{path:"/admin/settings",element:s.jsx(d9,{})}),s.jsx(We,{path:"/admin/settings/general",element:s.jsx(h9,{})}),s.jsx(We,{path:"/admin/settings/business",element:s.jsx(m9,{})}),s.jsx(We,{path:"/admin/settings/shipping",element:s.jsx(g9,{})}),s.jsx(We,{path:"/admin/settings/vat",element:s.jsx(f9,{})}),s.jsx(We,{path:"/admin/settings/api-keys",element:s.jsx(p9,{})}),s.jsx(We,{path:"/admin/settings/payment-gateways",element:s.jsx(v9,{})}),s.jsx(We,{path:"/admin/settings/receipts",element:s.jsx(k9,{})}),s.jsx(We,{path:"/admin/settings/smtp",element:s.jsx(w9,{})}),s.jsx(We,{path:"/admin/settings/staff",element:s.jsx(j9,{})})]}),s.jsx(We,{element:s.jsx(cf,{requiredRoles:["ADMIN","DELIVERY"]}),children:s.jsx(We,{path:"/delivery",element:s.jsx(oB,{})})}),s.jsx(We,{path:"*",element:s.jsx(ac,{to:"/",replace:!0})})]})}),!i&&s.jsx(AA,{}),!i&&s.jsx(MA,{}),s.jsx(RA,{}),s.jsx(xA,{})]})})})}const Lf=Ne("subscriptions/fetchUserSubscriptions",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await ce.get(`/subscriptions/my-subscriptions?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch subscriptions")}}),Af=Ne("subscriptions/fetchSubscription",async(e,{rejectWithValue:t})=>{var r,a;try{return(await ce.get(`/subscriptions/${e}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch subscription")}}),Mf=Ne("subscriptions/createSubscription",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{const o=await ce.post("/subscriptions",e);return q.success("skrift stofnu"),o.data}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a stofna skrift"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create subscription")}}),Rf=Ne("subscriptions/updateSubscription",async({id:e,subscriptionData:t},{rejectWithValue:r})=>{var a,n,i,o;try{const d=await ce.put(`/subscriptions/${e}`,t);return q.success("skrift uppfr"),d.data}catch(d){return q.error(((n=(a=d.response)==null?void 0:a.data)==null?void 0:n.message)||"Mistkst a uppfra skrift"),r(((o=(i=d.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update subscription")}}),Df=Ne("subscriptions/deleteSubscription",async(e,{rejectWithValue:t})=>{var r,a,n,i;try{return await ce.delete(`/subscriptions/${e}`),q.success("skrift htt vi"),e}catch(o){return q.error(((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||"Mistkst a htta vi skrift"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to cancel subscription")}}),Of=Ne("subscriptions/fetchAllSubscriptions",async(e={},{rejectWithValue:t})=>{var r,a;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await ce.get(`/subscriptions?${n.toString()}`)).data}catch(n){return t(((a=(r=n.response)==null?void 0:r.data)==null?void 0:a.message)||"Failed to fetch subscriptions")}}),dB={subscriptions:[],currentSubscription:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},cB=Vr({name:"subscriptions",initialState:dB,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentSubscription:e=>{e.currentSubscription=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Lf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Lf.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(Lf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Af.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Af.fulfilled,(t,r)=>{t.isLoading=!1,t.currentSubscription=r.payload,t.error=null}).addCase(Af.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Mf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Mf.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions.unshift(r.payload),t.error=null}).addCase(Mf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Rf.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Rf.fulfilled,(t,r)=>{t.isLoading=!1;const a=t.subscriptions.findIndex(n=>n.id===r.payload.id);a!==-1&&(t.subscriptions[a]=r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload.id&&(t.currentSubscription=r.payload),t.error=null}).addCase(Rf.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Df.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Df.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=t.subscriptions.filter(a=>a.id!==r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload&&(t.currentSubscription=null),t.error=null}).addCase(Df.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Of.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Of.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(Of.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),uB=cB.reducer,en=KI({reducer:{auth:C7,products:NA,categories:BA,cart:CA,orders:L7,addresses:TM,subscriptions:uB,dashboard:fR,banners:UA,chat:E9,analytics:e9,reports:i9,receiptSettings:vA,smtpSettings:u9,discounts:aB},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})});console.log("Store created:",en);console.log("Store state:",en.getState());typeof window<"u"&&(window.store=en);console.log("Store in main.jsx:",en);console.log("Store state in main:",en==null?void 0:en.getState());typeof window<"u"&&(window.store=en);Ff.createRoot(document.getElementById("root")).render(s.jsx(Tt.StrictMode,{children:s.jsx(yP,{store:en,children:s.jsxs(wE,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[s.jsx(e_,{children:s.jsx(lB,{})}),s.jsx(gI,{position:"bottom-center",toastOptions:{duration:4e3,success:{style:{background:"#10b981",color:"#fff",padding:"16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",marginBottom:window.innerWidth<768?"70px":"0px"},iconTheme:{primary:"#fff",secondary:"#10b981"}},error:{style:{background:"#ef4444",color:"#fff",padding:"16px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",marginBottom:window.innerWidth<768?"70px":"0px"},iconTheme:{primary:"#fff",secondary:"#ef4444"}}}})]})})}));
