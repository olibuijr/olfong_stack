var n2=Object.defineProperty;var i2=(e,t,r)=>t in e?n2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var me=(e,t,r)=>i2(e,typeof t!="symbol"?t+"":t,r);function o2(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();function fv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gv={exports:{}},bu={},pv={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fl=Symbol.for("react.element"),l2=Symbol.for("react.portal"),c2=Symbol.for("react.fragment"),d2=Symbol.for("react.strict_mode"),u2=Symbol.for("react.profiler"),h2=Symbol.for("react.provider"),m2=Symbol.for("react.context"),f2=Symbol.for("react.forward_ref"),g2=Symbol.for("react.suspense"),p2=Symbol.for("react.memo"),x2=Symbol.for("react.lazy"),Rp=Symbol.iterator;function y2(e){return e===null||typeof e!="object"?null:(e=Rp&&e[Rp]||e["@@iterator"],typeof e=="function"?e:null)}var xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yv=Object.assign,bv={};function gi(e,t,r){this.props=e,this.context=t,this.refs=bv,this.updater=r||xv}gi.prototype.isReactComponent={};gi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vv(){}vv.prototype=gi.prototype;function Ig(e,t,r){this.props=e,this.context=t,this.refs=bv,this.updater=r||xv}var Rg=Ig.prototype=new vv;Rg.constructor=Ig;yv(Rg,gi.prototype);Rg.isPureReactComponent=!0;var Ap=Array.isArray,wv=Object.prototype.hasOwnProperty,Ag={current:null},jv={key:!0,ref:!0,__self:!0,__source:!0};function kv(e,t,r){var s,n={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)wv.call(t,s)&&!jv.hasOwnProperty(s)&&(n[s]=t[s]);var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)n[s]===void 0&&(n[s]=l[s]);return{$$typeof:fl,type:e,key:i,ref:o,props:n,_owner:Ag.current}}function b2(e,t){return{$$typeof:fl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Og(e){return typeof e=="object"&&e!==null&&e.$$typeof===fl}function v2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Op=/\/+/g;function Th(e,t){return typeof e=="object"&&e!==null&&e.key!=null?v2(""+e.key):t.toString(36)}function xc(e,t,r,s,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case fl:case l2:o=!0}}if(o)return o=e,n=n(o),e=s===""?"."+Th(o,0):s,Ap(n)?(r="",e!=null&&(r=e.replace(Op,"$&/")+"/"),xc(n,t,r,"",function(d){return d})):n!=null&&(Og(n)&&(n=b2(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(Op,"$&/")+"/")+e)),t.push(n)),1;if(o=0,s=s===""?".":s+":",Ap(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Th(i,l);o+=xc(i,t,r,c,n)}else if(c=y2(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Th(i,l++),o+=xc(i,t,r,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Al(e,t,r){if(e==null)return e;var s=[],n=0;return xc(e,s,"","",function(i){return t.call(r,i,n++)}),s}function w2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zt={current:null},yc={transition:null},j2={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:yc,ReactCurrentOwner:Ag};function Nv(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Al,forEach:function(e,t,r){Al(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Al(e,function(){t++}),t},toArray:function(e){return Al(e,function(t){return t})||[]},only:function(e){if(!Og(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=gi;be.Fragment=c2;be.Profiler=u2;be.PureComponent=Ig;be.StrictMode=d2;be.Suspense=g2;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j2;be.act=Nv;be.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=yv({},e.props),n=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ag.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)wv.call(t,c)&&!jv.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:fl,type:e.type,key:n,ref:i,props:s,_owner:o}};be.createContext=function(e){return e={$$typeof:m2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:h2,_context:e},e.Consumer=e};be.createElement=kv;be.createFactory=function(e){var t=kv.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:f2,render:e}};be.isValidElement=Og;be.lazy=function(e){return{$$typeof:x2,_payload:{_status:-1,_result:e},_init:w2}};be.memo=function(e,t){return{$$typeof:p2,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=yc.transition;yc.transition={};try{e()}finally{yc.transition=t}};be.unstable_act=Nv;be.useCallback=function(e,t){return zt.current.useCallback(e,t)};be.useContext=function(e){return zt.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return zt.current.useDeferredValue(e)};be.useEffect=function(e,t){return zt.current.useEffect(e,t)};be.useId=function(){return zt.current.useId()};be.useImperativeHandle=function(e,t,r){return zt.current.useImperativeHandle(e,t,r)};be.useInsertionEffect=function(e,t){return zt.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return zt.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return zt.current.useMemo(e,t)};be.useReducer=function(e,t,r){return zt.current.useReducer(e,t,r)};be.useRef=function(e){return zt.current.useRef(e)};be.useState=function(e){return zt.current.useState(e)};be.useSyncExternalStore=function(e,t,r){return zt.current.useSyncExternalStore(e,t,r)};be.useTransition=function(){return zt.current.useTransition()};be.version="18.3.1";pv.exports=be;var j=pv.exports;const We=fv(j),k2=o2({__proto__:null,default:We},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2=j,S2=Symbol.for("react.element"),C2=Symbol.for("react.fragment"),_2=Object.prototype.hasOwnProperty,E2=N2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P2={key:!0,ref:!0,__self:!0,__source:!0};function Sv(e,t,r){var s,n={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)_2.call(t,s)&&!P2.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:S2,type:e,key:i,ref:o,props:n,_owner:E2.current}}bu.Fragment=C2;bu.jsx=Sv;bu.jsxs=Sv;gv.exports=bu;var a=gv.exports,Qm={},Cv={exports:{}},hr={},_v={exports:{}},Ev={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,O){var q=E.length;E.push(O);e:for(;0<q;){var ae=q-1>>>1,U=E[ae];if(0<n(U,O))E[ae]=O,E[q]=U,q=ae;else break e}}function r(E){return E.length===0?null:E[0]}function s(E){if(E.length===0)return null;var O=E[0],q=E.pop();if(q!==O){E[0]=q;e:for(var ae=0,U=E.length,re=U>>>1;ae<re;){var fe=2*(ae+1)-1,Ne=E[fe],A=fe+1,ue=E[A];if(0>n(Ne,q))A<U&&0>n(ue,Ne)?(E[ae]=ue,E[A]=q,ae=A):(E[ae]=Ne,E[fe]=q,ae=fe);else if(A<U&&0>n(ue,q))E[ae]=ue,E[A]=q,ae=A;else break e}}return O}function n(E,O){var q=E.sortIndex-O.sortIndex;return q!==0?q:E.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,g=!1,f=!1,x=!1,p=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(E){for(var O=r(d);O!==null;){if(O.callback===null)s(d);else if(O.startTime<=E)s(d),O.sortIndex=O.expirationTime,t(c,O);else break;O=r(d)}}function w(E){if(x=!1,v(E),!f)if(r(c)!==null)f=!0,M(k);else{var O=r(d);O!==null&&_(w,O.startTime-E)}}function k(E,O){f=!1,x&&(x=!1,b(N),N=-1),g=!0;var q=m;try{for(v(O),h=r(c);h!==null&&(!(h.expirationTime>O)||E&&!F());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,m=h.priorityLevel;var U=ae(h.expirationTime<=O);O=e.unstable_now(),typeof U=="function"?h.callback=U:h===r(c)&&s(c),v(O)}else s(c);h=r(c)}if(h!==null)var re=!0;else{var fe=r(d);fe!==null&&_(w,fe.startTime-O),re=!1}return re}finally{h=null,m=q,g=!1}}var P=!1,C=null,N=-1,S=5,R=-1;function F(){return!(e.unstable_now()-R<S)}function I(){if(C!==null){var E=e.unstable_now();R=E;var O=!0;try{O=C(!0,E)}finally{O?V():(P=!1,C=null)}}else P=!1}var V;if(typeof y=="function")V=function(){y(I)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=I,V=function(){z.postMessage(null)}}else V=function(){p(I,0)};function M(E){C=E,P||(P=!0,V())}function _(E,O){N=p(function(){E(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){f||g||(f=!0,M(k))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(E){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var q=m;m=O;try{return E()}finally{m=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,O){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var q=m;m=E;try{return O()}finally{m=q}},e.unstable_scheduleCallback=function(E,O,q){var ae=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?ae+q:ae):q=ae,E){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=q+U,E={id:u++,callback:O,priorityLevel:E,startTime:q,expirationTime:U,sortIndex:-1},q>ae?(E.sortIndex=q,t(d,E),r(c)===null&&E===r(d)&&(x?(b(N),N=-1):x=!0,_(w,q-ae))):(E.sortIndex=U,t(c,E),f||g||(f=!0,M(k))),E},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(E){var O=m;return function(){var q=m;m=O;try{return E.apply(this,arguments)}finally{m=q}}}})(Ev);_v.exports=Ev;var T2=_v.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I2=j,cr=T2;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pv=new Set,Lo={};function xn(e,t){ei(e,t),ei(e+"Capture",t)}function ei(e,t){for(Lo[e]=t,e=0;e<t.length;e++)Pv.add(t[e])}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xm=Object.prototype.hasOwnProperty,R2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lp={},Mp={};function A2(e){return Xm.call(Mp,e)?!0:Xm.call(Lp,e)?!1:R2.test(e)?Mp[e]=!0:(Lp[e]=!0,!1)}function O2(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L2(e,t,r,s){if(t===null||typeof t>"u"||O2(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bt(e,t,r,s,n,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kt[e]=new Bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kt[t]=new Bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){kt[e]=new Bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kt[e]=new Bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kt[e]=new Bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){kt[e]=new Bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){kt[e]=new Bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){kt[e]=new Bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){kt[e]=new Bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lg=/[\-:]([a-z])/g;function Mg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lg,Mg);kt[t]=new Bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lg,Mg);kt[t]=new Bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lg,Mg);kt[t]=new Bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){kt[e]=new Bt(e,1,!1,e.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){kt[e]=new Bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dg(e,t,r,s){var n=kt.hasOwnProperty(t)?kt[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L2(t,r,n,s)&&(r=null),s||n===null?A2(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,s=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var Ks=I2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ol=Symbol.for("react.element"),Cn=Symbol.for("react.portal"),_n=Symbol.for("react.fragment"),Fg=Symbol.for("react.strict_mode"),Jm=Symbol.for("react.profiler"),Tv=Symbol.for("react.provider"),Iv=Symbol.for("react.context"),$g=Symbol.for("react.forward_ref"),Zm=Symbol.for("react.suspense"),ef=Symbol.for("react.suspense_list"),zg=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),Rv=Symbol.for("react.offscreen"),Dp=Symbol.iterator;function Ei(e){return e===null||typeof e!="object"?null:(e=Dp&&e[Dp]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Object.assign,Ih;function Hi(e){if(Ih===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ih=t&&t[1]||""}return`
`+Ih+e}var Rh=!1;function Ah(e,t){if(!e||Rh)return"";Rh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var n=d.stack.split(`
`),i=s.stack.split(`
`),o=n.length-1,l=i.length-1;1<=o&&0<=l&&n[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(n[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||n[o]!==i[l]){var c=`
`+n[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Rh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Hi(e):""}function M2(e){switch(e.tag){case 5:return Hi(e.type);case 16:return Hi("Lazy");case 13:return Hi("Suspense");case 19:return Hi("SuspenseList");case 0:case 2:case 15:return e=Ah(e.type,!1),e;case 11:return e=Ah(e.type.render,!1),e;case 1:return e=Ah(e.type,!0),e;default:return""}}function tf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _n:return"Fragment";case Cn:return"Portal";case Jm:return"Profiler";case Fg:return"StrictMode";case Zm:return"Suspense";case ef:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Iv:return(e.displayName||"Context")+".Consumer";case Tv:return(e._context.displayName||"Context")+".Provider";case $g:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zg:return t=e.displayName||null,t!==null?t:tf(e.type)||"Memo";case Zs:t=e._payload,e=e._init;try{return tf(e(t))}catch{}}return null}function D2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tf(t);case 8:return t===Fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ca(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Av(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function F2(e){var t=Av(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ll(e){e._valueTracker||(e._valueTracker=F2(e))}function Ov(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Av(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function wd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rf(e,t){var r=t.checked;return Ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Fp(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ca(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Lv(e,t){t=t.checked,t!=null&&Dg(e,"checked",t,!1)}function sf(e,t){Lv(e,t);var r=Ca(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?af(e,t.type,r):t.hasOwnProperty("defaultValue")&&af(e,t.type,Ca(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $p(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function af(e,t,r){(t!=="number"||wd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wi=Array.isArray;function Bn(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ca(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function nf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zp(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(Wi(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ca(r)}}function Mv(e,t){var r=Ca(t.value),s=Ca(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Bp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Dv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function of(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Dv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ml,Fv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ml=Ml||document.createElement("div"),Ml.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ml.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$2=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(e){$2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zi[t]=Zi[e]})});function $v(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zi.hasOwnProperty(e)&&Zi[e]?(""+t).trim():t+"px"}function zv(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=$v(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}var z2=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lf(e,t){if(t){if(z2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function cf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var df=null;function Bg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var uf=null,Un=null,Vn=null;function Up(e){if(e=xl(e)){if(typeof uf!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Nu(t),uf(e.stateNode,e.type,t))}}function Bv(e){Un?Vn?Vn.push(e):Vn=[e]:Un=e}function Uv(){if(Un){var e=Un,t=Vn;if(Vn=Un=null,Up(e),t)for(e=0;e<t.length;e++)Up(t[e])}}function Vv(e,t){return e(t)}function Hv(){}var Oh=!1;function Wv(e,t,r){if(Oh)return e(t,r);Oh=!0;try{return Vv(e,t,r)}finally{Oh=!1,(Un!==null||Vn!==null)&&(Hv(),Uv())}}function Do(e,t){var r=e.stateNode;if(r===null)return null;var s=Nu(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var hf=!1;if(zs)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){hf=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{hf=!1}function B2(e,t,r,s,n,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var eo=!1,jd=null,kd=!1,mf=null,U2={onError:function(e){eo=!0,jd=e}};function V2(e,t,r,s,n,i,o,l,c){eo=!1,jd=null,B2.apply(U2,arguments)}function H2(e,t,r,s,n,i,o,l,c){if(V2.apply(this,arguments),eo){if(eo){var d=jd;eo=!1,jd=null}else throw Error(X(198));kd||(kd=!0,mf=d)}}function yn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function qv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vp(e){if(yn(e)!==e)throw Error(X(188))}function W2(e){var t=e.alternate;if(!t){if(t=yn(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return Vp(n),e;if(i===s)return Vp(n),t;i=i.sibling}throw Error(X(188))}if(r.return!==s.return)r=n,s=i;else{for(var o=!1,l=n.child;l;){if(l===r){o=!0,r=n,s=i;break}if(l===s){o=!0,s=n,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=n;break}if(l===s){o=!0,s=i,r=n;break}l=l.sibling}if(!o)throw Error(X(189))}}if(r.alternate!==s)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function Kv(e){return e=W2(e),e!==null?Gv(e):null}function Gv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gv(e);if(t!==null)return t;e=e.sibling}return null}var Yv=cr.unstable_scheduleCallback,Hp=cr.unstable_cancelCallback,q2=cr.unstable_shouldYield,K2=cr.unstable_requestPaint,Xe=cr.unstable_now,G2=cr.unstable_getCurrentPriorityLevel,Ug=cr.unstable_ImmediatePriority,Qv=cr.unstable_UserBlockingPriority,Nd=cr.unstable_NormalPriority,Y2=cr.unstable_LowPriority,Xv=cr.unstable_IdlePriority,vu=null,cs=null;function Q2(e){if(cs&&typeof cs.onCommitFiberRoot=="function")try{cs.onCommitFiberRoot(vu,e,void 0,(e.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:Z2,X2=Math.log,J2=Math.LN2;function Z2(e){return e>>>=0,e===0?32:31-(X2(e)/J2|0)|0}var Dl=64,Fl=4194304;function qi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Sd(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~n;l!==0?s=qi(l):(i&=o,i!==0&&(s=qi(i)))}else o=r&~n,o!==0?s=qi(o):i!==0&&(s=qi(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Hr(t),n=1<<r,s|=e[r],t&=~n;return s}function e4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function t4(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Hr(i),l=1<<o,c=n[o];c===-1?(!(l&r)||l&s)&&(n[o]=e4(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ff(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Jv(){var e=Dl;return Dl<<=1,!(Dl&4194240)&&(Dl=64),e}function Lh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function gl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Hr(t),e[t]=r}function r4(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-Hr(r),i=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~i}}function Vg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Hr(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var Te=0;function Zv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var e1,Hg,t1,r1,s1,gf=!1,$l=[],ma=null,fa=null,ga=null,Fo=new Map,$o=new Map,ta=[],s4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(e,t){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":Fo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$o.delete(t.pointerId)}}function Ti(e,t,r,s,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[n]},t!==null&&(t=xl(t),t!==null&&Hg(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function a4(e,t,r,s,n){switch(t){case"focusin":return ma=Ti(ma,e,t,r,s,n),!0;case"dragenter":return fa=Ti(fa,e,t,r,s,n),!0;case"mouseover":return ga=Ti(ga,e,t,r,s,n),!0;case"pointerover":var i=n.pointerId;return Fo.set(i,Ti(Fo.get(i)||null,e,t,r,s,n)),!0;case"gotpointercapture":return i=n.pointerId,$o.set(i,Ti($o.get(i)||null,e,t,r,s,n)),!0}return!1}function a1(e){var t=Ka(e.target);if(t!==null){var r=yn(t);if(r!==null){if(t=r.tag,t===13){if(t=qv(r),t!==null){e.blockedOn=t,s1(e.priority,function(){t1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);df=s,r.target.dispatchEvent(s),df=null}else return t=xl(r),t!==null&&Hg(t),e.blockedOn=r,!1;t.shift()}return!0}function qp(e,t,r){bc(e)&&r.delete(t)}function n4(){gf=!1,ma!==null&&bc(ma)&&(ma=null),fa!==null&&bc(fa)&&(fa=null),ga!==null&&bc(ga)&&(ga=null),Fo.forEach(qp),$o.forEach(qp)}function Ii(e,t){e.blockedOn===t&&(e.blockedOn=null,gf||(gf=!0,cr.unstable_scheduleCallback(cr.unstable_NormalPriority,n4)))}function zo(e){function t(n){return Ii(n,e)}if(0<$l.length){Ii($l[0],e);for(var r=1;r<$l.length;r++){var s=$l[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ma!==null&&Ii(ma,e),fa!==null&&Ii(fa,e),ga!==null&&Ii(ga,e),Fo.forEach(t),$o.forEach(t),r=0;r<ta.length;r++)s=ta[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<ta.length&&(r=ta[0],r.blockedOn===null);)a1(r),r.blockedOn===null&&ta.shift()}var Hn=Ks.ReactCurrentBatchConfig,Cd=!0;function i4(e,t,r,s){var n=Te,i=Hn.transition;Hn.transition=null;try{Te=1,Wg(e,t,r,s)}finally{Te=n,Hn.transition=i}}function o4(e,t,r,s){var n=Te,i=Hn.transition;Hn.transition=null;try{Te=4,Wg(e,t,r,s)}finally{Te=n,Hn.transition=i}}function Wg(e,t,r,s){if(Cd){var n=pf(e,t,r,s);if(n===null)Wh(e,t,s,_d,r),Wp(e,s);else if(a4(n,e,t,r,s))s.stopPropagation();else if(Wp(e,s),t&4&&-1<s4.indexOf(e)){for(;n!==null;){var i=xl(n);if(i!==null&&e1(i),i=pf(e,t,r,s),i===null&&Wh(e,t,s,_d,r),i===n)break;n=i}n!==null&&s.stopPropagation()}else Wh(e,t,s,null,r)}}var _d=null;function pf(e,t,r,s){if(_d=null,e=Bg(s),e=Ka(e),e!==null)if(t=yn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=qv(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _d=e,null}function n1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G2()){case Ug:return 1;case Qv:return 4;case Nd:case Y2:return 16;case Xv:return 536870912;default:return 16}default:return 16}}var ia=null,qg=null,vc=null;function i1(){if(vc)return vc;var e,t=qg,r=t.length,s,n="value"in ia?ia.value:ia.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===n[i-s];s++);return vc=n.slice(e,1<s?1-s:void 0)}function wc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zl(){return!0}function Kp(){return!1}function mr(e){function t(r,s,n,i,o){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?zl:Kp,this.isPropagationStopped=Kp,this}return Ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),t}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kg=mr(pi),pl=Ye({},pi,{view:0,detail:0}),l4=mr(pl),Mh,Dh,Ri,wu=Ye({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ri&&(Ri&&e.type==="mousemove"?(Mh=e.screenX-Ri.screenX,Dh=e.screenY-Ri.screenY):Dh=Mh=0,Ri=e),Mh)},movementY:function(e){return"movementY"in e?e.movementY:Dh}}),Gp=mr(wu),c4=Ye({},wu,{dataTransfer:0}),d4=mr(c4),u4=Ye({},pl,{relatedTarget:0}),Fh=mr(u4),h4=Ye({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),m4=mr(h4),f4=Ye({},pi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),g4=mr(f4),p4=Ye({},pi,{data:0}),Yp=mr(p4),x4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=b4[e])?!!t[e]:!1}function Gg(){return v4}var w4=Ye({},pl,{key:function(e){if(e.key){var t=x4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?y4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gg,charCode:function(e){return e.type==="keypress"?wc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),j4=mr(w4),k4=Ye({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qp=mr(k4),N4=Ye({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gg}),S4=mr(N4),C4=Ye({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_4=mr(C4),E4=Ye({},wu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),P4=mr(E4),T4=[9,13,27,32],Yg=zs&&"CompositionEvent"in window,to=null;zs&&"documentMode"in document&&(to=document.documentMode);var I4=zs&&"TextEvent"in window&&!to,o1=zs&&(!Yg||to&&8<to&&11>=to),Xp=" ",Jp=!1;function l1(e,t){switch(e){case"keyup":return T4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var En=!1;function R4(e,t){switch(e){case"compositionend":return c1(t);case"keypress":return t.which!==32?null:(Jp=!0,Xp);case"textInput":return e=t.data,e===Xp&&Jp?null:e;default:return null}}function A4(e,t){if(En)return e==="compositionend"||!Yg&&l1(e,t)?(e=i1(),vc=qg=ia=null,En=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return o1&&t.locale!=="ko"?null:t.data;default:return null}}var O4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O4[e.type]:t==="textarea"}function d1(e,t,r,s){Bv(s),t=Ed(t,"onChange"),0<t.length&&(r=new Kg("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var ro=null,Bo=null;function L4(e){w1(e,0)}function ju(e){var t=In(e);if(Ov(t))return e}function M4(e,t){if(e==="change")return t}var u1=!1;if(zs){var $h;if(zs){var zh="oninput"in document;if(!zh){var ex=document.createElement("div");ex.setAttribute("oninput","return;"),zh=typeof ex.oninput=="function"}$h=zh}else $h=!1;u1=$h&&(!document.documentMode||9<document.documentMode)}function tx(){ro&&(ro.detachEvent("onpropertychange",h1),Bo=ro=null)}function h1(e){if(e.propertyName==="value"&&ju(Bo)){var t=[];d1(t,Bo,e,Bg(e)),Wv(L4,t)}}function D4(e,t,r){e==="focusin"?(tx(),ro=t,Bo=r,ro.attachEvent("onpropertychange",h1)):e==="focusout"&&tx()}function F4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ju(Bo)}function $4(e,t){if(e==="click")return ju(t)}function z4(e,t){if(e==="input"||e==="change")return ju(t)}function B4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qr=typeof Object.is=="function"?Object.is:B4;function Uo(e,t){if(qr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!Xm.call(t,n)||!qr(e[n],t[n]))return!1}return!0}function rx(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sx(e,t){var r=rx(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rx(r)}}function m1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?m1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function f1(){for(var e=window,t=wd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=wd(e.document)}return t}function Qg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function U4(e){var t=f1(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&m1(r.ownerDocument.documentElement,r)){if(s!==null&&Qg(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(s.start,n);s=s.end===void 0?i:Math.min(s.end,n),!e.extend&&i>s&&(n=s,s=i,i=n),n=sx(r,i);var o=sx(r,s);n&&o&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var V4=zs&&"documentMode"in document&&11>=document.documentMode,Pn=null,xf=null,so=null,yf=!1;function ax(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yf||Pn==null||Pn!==wd(s)||(s=Pn,"selectionStart"in s&&Qg(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),so&&Uo(so,s)||(so=s,s=Ed(xf,"onSelect"),0<s.length&&(t=new Kg("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Pn)))}function Bl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Tn={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionend:Bl("Transition","TransitionEnd")},Bh={},g1={};zs&&(g1=document.createElement("div").style,"AnimationEvent"in window||(delete Tn.animationend.animation,delete Tn.animationiteration.animation,delete Tn.animationstart.animation),"TransitionEvent"in window||delete Tn.transitionend.transition);function ku(e){if(Bh[e])return Bh[e];if(!Tn[e])return e;var t=Tn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in g1)return Bh[e]=t[r];return e}var p1=ku("animationend"),x1=ku("animationiteration"),y1=ku("animationstart"),b1=ku("transitionend"),v1=new Map,nx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(e,t){v1.set(e,t),xn(t,[e])}for(var Uh=0;Uh<nx.length;Uh++){var Vh=nx[Uh],H4=Vh.toLowerCase(),W4=Vh[0].toUpperCase()+Vh.slice(1);Ra(H4,"on"+W4)}Ra(p1,"onAnimationEnd");Ra(x1,"onAnimationIteration");Ra(y1,"onAnimationStart");Ra("dblclick","onDoubleClick");Ra("focusin","onFocus");Ra("focusout","onBlur");Ra(b1,"onTransitionEnd");ei("onMouseEnter",["mouseout","mouseover"]);ei("onMouseLeave",["mouseout","mouseover"]);ei("onPointerEnter",["pointerout","pointerover"]);ei("onPointerLeave",["pointerout","pointerover"]);xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),q4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function ix(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,H2(s,t,void 0,e),e.currentTarget=null}function w1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break e;ix(n,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break e;ix(n,l,d),i=c}}}if(kd)throw e=mf,kd=!1,mf=null,e}function $e(e,t){var r=t[kf];r===void 0&&(r=t[kf]=new Set);var s=e+"__bubble";r.has(s)||(j1(t,e,2,!1),r.add(s))}function Hh(e,t,r){var s=0;t&&(s|=4),j1(r,e,s,t)}var Ul="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[Ul]){e[Ul]=!0,Pv.forEach(function(r){r!=="selectionchange"&&(q4.has(r)||Hh(r,!1,e),Hh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ul]||(t[Ul]=!0,Hh("selectionchange",!1,t))}}function j1(e,t,r,s){switch(n1(t)){case 1:var n=i4;break;case 4:n=o4;break;default:n=Wg}r=n.bind(null,t,r,e),n=void 0,!hf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Wh(e,t,r,s,n){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;o=o.return}for(;l!==null;){if(o=Ka(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}Wv(function(){var d=i,u=Bg(r),h=[];e:{var m=v1.get(e);if(m!==void 0){var g=Kg,f=e;switch(e){case"keypress":if(wc(r)===0)break e;case"keydown":case"keyup":g=j4;break;case"focusin":f="focus",g=Fh;break;case"focusout":f="blur",g=Fh;break;case"beforeblur":case"afterblur":g=Fh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=d4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=S4;break;case p1:case x1:case y1:g=m4;break;case b1:g=_4;break;case"scroll":g=l4;break;case"wheel":g=P4;break;case"copy":case"cut":case"paste":g=g4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Qp}var x=(t&4)!==0,p=!x&&e==="scroll",b=x?m!==null?m+"Capture":null:m;x=[];for(var y=d,v;y!==null;){v=y;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,b!==null&&(w=Do(y,b),w!=null&&x.push(Ho(y,w,v)))),p)break;y=y.return}0<x.length&&(m=new g(m,f,null,r,u),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==df&&(f=r.relatedTarget||r.fromElement)&&(Ka(f)||f[Bs]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(f=r.relatedTarget||r.toElement,g=d,f=f?Ka(f):null,f!==null&&(p=yn(f),f!==p||f.tag!==5&&f.tag!==6)&&(f=null)):(g=null,f=d),g!==f)){if(x=Gp,w="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(x=Qp,w="onPointerLeave",b="onPointerEnter",y="pointer"),p=g==null?m:In(g),v=f==null?m:In(f),m=new x(w,y+"leave",g,r,u),m.target=p,m.relatedTarget=v,w=null,Ka(u)===d&&(x=new x(b,y+"enter",f,r,u),x.target=v,x.relatedTarget=p,w=x),p=w,g&&f)t:{for(x=g,b=f,y=0,v=x;v;v=vn(v))y++;for(v=0,w=b;w;w=vn(w))v++;for(;0<y-v;)x=vn(x),y--;for(;0<v-y;)b=vn(b),v--;for(;y--;){if(x===b||b!==null&&x===b.alternate)break t;x=vn(x),b=vn(b)}x=null}else x=null;g!==null&&ox(h,m,g,x,!1),f!==null&&p!==null&&ox(h,p,f,x,!0)}}e:{if(m=d?In(d):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var k=M4;else if(Zp(m))if(u1)k=z4;else{k=F4;var P=D4}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=$4);if(k&&(k=k(e,d))){d1(h,k,r,u);break e}P&&P(e,m,d),e==="focusout"&&(P=m._wrapperState)&&P.controlled&&m.type==="number"&&af(m,"number",m.value)}switch(P=d?In(d):window,e){case"focusin":(Zp(P)||P.contentEditable==="true")&&(Pn=P,xf=d,so=null);break;case"focusout":so=xf=Pn=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,ax(h,r,u);break;case"selectionchange":if(V4)break;case"keydown":case"keyup":ax(h,r,u)}var C;if(Yg)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else En?l1(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(o1&&r.locale!=="ko"&&(En||N!=="onCompositionStart"?N==="onCompositionEnd"&&En&&(C=i1()):(ia=u,qg="value"in ia?ia.value:ia.textContent,En=!0)),P=Ed(d,N),0<P.length&&(N=new Yp(N,e,null,r,u),h.push({event:N,listeners:P}),C?N.data=C:(C=c1(r),C!==null&&(N.data=C)))),(C=I4?R4(e,r):A4(e,r))&&(d=Ed(d,"onBeforeInput"),0<d.length&&(u=new Yp("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=C))}w1(h,t)})}function Ho(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ed(e,t){for(var r=t+"Capture",s=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Do(e,r),i!=null&&s.unshift(Ho(e,i,n)),i=Do(e,t),i!=null&&s.push(Ho(e,i,n))),e=e.return}return s}function vn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ox(e,t,r,s,n){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,n?(c=Do(r,i),c!=null&&o.unshift(Ho(r,c,l))):n||(c=Do(r,i),c!=null&&o.push(Ho(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var K4=/\r\n?/g,G4=/\u0000|\uFFFD/g;function lx(e){return(typeof e=="string"?e:""+e).replace(K4,`
`).replace(G4,"")}function Vl(e,t,r){if(t=lx(t),lx(e)!==t&&r)throw Error(X(425))}function Pd(){}var bf=null,vf=null;function wf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jf=typeof setTimeout=="function"?setTimeout:void 0,Y4=typeof clearTimeout=="function"?clearTimeout:void 0,cx=typeof Promise=="function"?Promise:void 0,Q4=typeof queueMicrotask=="function"?queueMicrotask:typeof cx<"u"?function(e){return cx.resolve(null).then(e).catch(X4)}:jf;function X4(e){setTimeout(function(){throw e})}function qh(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){e.removeChild(n),zo(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);zo(t)}function pa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),ss="__reactFiber$"+xi,Wo="__reactProps$"+xi,Bs="__reactContainer$"+xi,kf="__reactEvents$"+xi,J4="__reactListeners$"+xi,Z4="__reactHandles$"+xi;function Ka(e){var t=e[ss];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bs]||r[ss]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=dx(e);e!==null;){if(r=e[ss])return r;e=dx(e)}return t}e=r,r=e.parentNode}return null}function xl(e){return e=e[ss]||e[Bs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function In(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Nu(e){return e[Wo]||null}var Nf=[],Rn=-1;function Aa(e){return{current:e}}function Be(e){0>Rn||(e.current=Nf[Rn],Nf[Rn]=null,Rn--)}function De(e,t){Rn++,Nf[Rn]=e.current,e.current=t}var _a={},At=Aa(_a),Qt=Aa(!1),nn=_a;function ti(e,t){var r=e.type.contextTypes;if(!r)return _a;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Xt(e){return e=e.childContextTypes,e!=null}function Td(){Be(Qt),Be(At)}function ux(e,t,r){if(At.current!==_a)throw Error(X(168));De(At,t),De(Qt,r)}function k1(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(X(108,D2(e)||"Unknown",n));return Ye({},r,s)}function Id(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_a,nn=At.current,De(At,e),De(Qt,Qt.current),!0}function hx(e,t,r){var s=e.stateNode;if(!s)throw Error(X(169));r?(e=k1(e,t,nn),s.__reactInternalMemoizedMergedChildContext=e,Be(Qt),Be(At),De(At,e)):Be(Qt),De(Qt,r)}var Rs=null,Su=!1,Kh=!1;function N1(e){Rs===null?Rs=[e]:Rs.push(e)}function eS(e){Su=!0,N1(e)}function Oa(){if(!Kh&&Rs!==null){Kh=!0;var e=0,t=Te;try{var r=Rs;for(Te=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Rs=null,Su=!1}catch(n){throw Rs!==null&&(Rs=Rs.slice(e+1)),Yv(Ug,Oa),n}finally{Te=t,Kh=!1}}return null}var An=[],On=0,Rd=null,Ad=0,wr=[],jr=0,on=null,Ls=1,Ms="";function Ua(e,t){An[On++]=Ad,An[On++]=Rd,Rd=e,Ad=t}function S1(e,t,r){wr[jr++]=Ls,wr[jr++]=Ms,wr[jr++]=on,on=e;var s=Ls;e=Ms;var n=32-Hr(s)-1;s&=~(1<<n),r+=1;var i=32-Hr(t)+n;if(30<i){var o=n-n%5;i=(s&(1<<o)-1).toString(32),s>>=o,n-=o,Ls=1<<32-Hr(t)+n|r<<n|s,Ms=i+e}else Ls=1<<i|r<<n|s,Ms=e}function Xg(e){e.return!==null&&(Ua(e,1),S1(e,1,0))}function Jg(e){for(;e===Rd;)Rd=An[--On],An[On]=null,Ad=An[--On],An[On]=null;for(;e===on;)on=wr[--jr],wr[jr]=null,Ms=wr[--jr],wr[jr]=null,Ls=wr[--jr],wr[jr]=null}var ir=null,nr=null,qe=!1,$r=null;function C1(e,t){var r=Nr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function mx(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ir=e,nr=pa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ir=e,nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=on!==null?{id:Ls,overflow:Ms}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Nr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ir=e,nr=null,!0):!1;default:return!1}}function Sf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cf(e){if(qe){var t=nr;if(t){var r=t;if(!mx(e,t)){if(Sf(e))throw Error(X(418));t=pa(r.nextSibling);var s=ir;t&&mx(e,t)?C1(s,r):(e.flags=e.flags&-4097|2,qe=!1,ir=e)}}else{if(Sf(e))throw Error(X(418));e.flags=e.flags&-4097|2,qe=!1,ir=e}}}function fx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ir=e}function Hl(e){if(e!==ir)return!1;if(!qe)return fx(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wf(e.type,e.memoizedProps)),t&&(t=nr)){if(Sf(e))throw _1(),Error(X(418));for(;t;)C1(e,t),t=pa(t.nextSibling)}if(fx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){nr=pa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}nr=null}}else nr=ir?pa(e.stateNode.nextSibling):null;return!0}function _1(){for(var e=nr;e;)e=pa(e.nextSibling)}function ri(){nr=ir=null,qe=!1}function Zg(e){$r===null?$r=[e]:$r.push(e)}var tS=Ks.ReactCurrentBatchConfig;function Ai(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var s=r.stateNode}if(!s)throw Error(X(147,e));var n=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=n.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Wl(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gx(e){var t=e._init;return t(e._payload)}function E1(e){function t(b,y){if(e){var v=b.deletions;v===null?(b.deletions=[y],b.flags|=16):v.push(y)}}function r(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function s(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function n(b,y){return b=va(b,y),b.index=0,b.sibling=null,b}function i(b,y,v){return b.index=v,e?(v=b.alternate,v!==null?(v=v.index,v<y?(b.flags|=2,y):v):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function l(b,y,v,w){return y===null||y.tag!==6?(y=em(v,b.mode,w),y.return=b,y):(y=n(y,v),y.return=b,y)}function c(b,y,v,w){var k=v.type;return k===_n?u(b,y,v.props.children,w,v.key):y!==null&&(y.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zs&&gx(k)===y.type)?(w=n(y,v.props),w.ref=Ai(b,y,v),w.return=b,w):(w=Ec(v.type,v.key,v.props,null,b.mode,w),w.ref=Ai(b,y,v),w.return=b,w)}function d(b,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=tm(v,b.mode,w),y.return=b,y):(y=n(y,v.children||[]),y.return=b,y)}function u(b,y,v,w,k){return y===null||y.tag!==7?(y=tn(v,b.mode,w,k),y.return=b,y):(y=n(y,v),y.return=b,y)}function h(b,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=em(""+y,b.mode,v),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ol:return v=Ec(y.type,y.key,y.props,null,b.mode,v),v.ref=Ai(b,null,y),v.return=b,v;case Cn:return y=tm(y,b.mode,v),y.return=b,y;case Zs:var w=y._init;return h(b,w(y._payload),v)}if(Wi(y)||Ei(y))return y=tn(y,b.mode,v,null),y.return=b,y;Wl(b,y)}return null}function m(b,y,v,w){var k=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:l(b,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:return v.key===k?c(b,y,v,w):null;case Cn:return v.key===k?d(b,y,v,w):null;case Zs:return k=v._init,m(b,y,k(v._payload),w)}if(Wi(v)||Ei(v))return k!==null?null:u(b,y,v,w,null);Wl(b,v)}return null}function g(b,y,v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return b=b.get(v)||null,l(y,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ol:return b=b.get(w.key===null?v:w.key)||null,c(y,b,w,k);case Cn:return b=b.get(w.key===null?v:w.key)||null,d(y,b,w,k);case Zs:var P=w._init;return g(b,y,v,P(w._payload),k)}if(Wi(w)||Ei(w))return b=b.get(v)||null,u(y,b,w,k,null);Wl(y,w)}return null}function f(b,y,v,w){for(var k=null,P=null,C=y,N=y=0,S=null;C!==null&&N<v.length;N++){C.index>N?(S=C,C=null):S=C.sibling;var R=m(b,C,v[N],w);if(R===null){C===null&&(C=S);break}e&&C&&R.alternate===null&&t(b,C),y=i(R,y,N),P===null?k=R:P.sibling=R,P=R,C=S}if(N===v.length)return r(b,C),qe&&Ua(b,N),k;if(C===null){for(;N<v.length;N++)C=h(b,v[N],w),C!==null&&(y=i(C,y,N),P===null?k=C:P.sibling=C,P=C);return qe&&Ua(b,N),k}for(C=s(b,C);N<v.length;N++)S=g(C,b,N,v[N],w),S!==null&&(e&&S.alternate!==null&&C.delete(S.key===null?N:S.key),y=i(S,y,N),P===null?k=S:P.sibling=S,P=S);return e&&C.forEach(function(F){return t(b,F)}),qe&&Ua(b,N),k}function x(b,y,v,w){var k=Ei(v);if(typeof k!="function")throw Error(X(150));if(v=k.call(v),v==null)throw Error(X(151));for(var P=k=null,C=y,N=y=0,S=null,R=v.next();C!==null&&!R.done;N++,R=v.next()){C.index>N?(S=C,C=null):S=C.sibling;var F=m(b,C,R.value,w);if(F===null){C===null&&(C=S);break}e&&C&&F.alternate===null&&t(b,C),y=i(F,y,N),P===null?k=F:P.sibling=F,P=F,C=S}if(R.done)return r(b,C),qe&&Ua(b,N),k;if(C===null){for(;!R.done;N++,R=v.next())R=h(b,R.value,w),R!==null&&(y=i(R,y,N),P===null?k=R:P.sibling=R,P=R);return qe&&Ua(b,N),k}for(C=s(b,C);!R.done;N++,R=v.next())R=g(C,b,N,R.value,w),R!==null&&(e&&R.alternate!==null&&C.delete(R.key===null?N:R.key),y=i(R,y,N),P===null?k=R:P.sibling=R,P=R);return e&&C.forEach(function(I){return t(b,I)}),qe&&Ua(b,N),k}function p(b,y,v,w){if(typeof v=="object"&&v!==null&&v.type===_n&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:e:{for(var k=v.key,P=y;P!==null;){if(P.key===k){if(k=v.type,k===_n){if(P.tag===7){r(b,P.sibling),y=n(P,v.props.children),y.return=b,b=y;break e}}else if(P.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Zs&&gx(k)===P.type){r(b,P.sibling),y=n(P,v.props),y.ref=Ai(b,P,v),y.return=b,b=y;break e}r(b,P);break}else t(b,P);P=P.sibling}v.type===_n?(y=tn(v.props.children,b.mode,w,v.key),y.return=b,b=y):(w=Ec(v.type,v.key,v.props,null,b.mode,w),w.ref=Ai(b,y,v),w.return=b,b=w)}return o(b);case Cn:e:{for(P=v.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(b,y.sibling),y=n(y,v.children||[]),y.return=b,b=y;break e}else{r(b,y);break}else t(b,y);y=y.sibling}y=tm(v,b.mode,w),y.return=b,b=y}return o(b);case Zs:return P=v._init,p(b,y,P(v._payload),w)}if(Wi(v))return f(b,y,v,w);if(Ei(v))return x(b,y,v,w);Wl(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(b,y.sibling),y=n(y,v),y.return=b,b=y):(r(b,y),y=em(v,b.mode,w),y.return=b,b=y),o(b)):r(b,y)}return p}var si=E1(!0),P1=E1(!1),Od=Aa(null),Ld=null,Ln=null,e0=null;function t0(){e0=Ln=Ld=null}function r0(e){var t=Od.current;Be(Od),e._currentValue=t}function _f(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Wn(e,t){Ld=e,e0=Ln=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Gt=!0),e.firstContext=null)}function Er(e){var t=e._currentValue;if(e0!==e)if(e={context:e,memoizedValue:t,next:null},Ln===null){if(Ld===null)throw Error(X(308));Ln=e,Ld.dependencies={lanes:0,firstContext:e}}else Ln=Ln.next=e;return t}var Ga=null;function s0(e){Ga===null?Ga=[e]:Ga.push(e)}function T1(e,t,r,s){var n=t.interleaved;return n===null?(r.next=r,s0(t)):(r.next=n.next,n.next=r),t.interleaved=r,Us(e,s)}function Us(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ea=!1;function a0(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xa(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ke&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Us(e,r)}return n=s.interleaved,n===null?(t.next=t,s0(s)):(t.next=n.next,n.next=t),s.interleaved=t,Us(e,r)}function jc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vg(e,r)}}function px(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Md(e,t,r,s){var n=e.updateQueue;ea=!1;var i=n.firstBaseUpdate,o=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=n.baseState;o=0,u=d=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((s&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var f=e,x=l;switch(m=t,g=r,x.tag){case 1:if(f=x.payload,typeof f=="function"){h=f.call(g,h,m);break e}h=f;break e;case 3:f.flags=f.flags&-65537|128;case 0:if(f=x.payload,m=typeof f=="function"?f.call(g,h,m):f,m==null)break e;h=Ye({},h,m);break e;case 2:ea=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=n.effects,m===null?n.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=h):u=u.next=g,o|=m;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;m=l,l=m.next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}while(!0);if(u===null&&(c=h),n.baseState=c,n.firstBaseUpdate=d,n.lastBaseUpdate=u,t=n.shared.interleaved,t!==null){n=t;do o|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);cn|=o,e.lanes=o,e.memoizedState=h}}function xx(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(X(191,n));n.call(s)}}}var yl={},ds=Aa(yl),qo=Aa(yl),Ko=Aa(yl);function Ya(e){if(e===yl)throw Error(X(174));return e}function n0(e,t){switch(De(Ko,t),De(qo,e),De(ds,yl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:of(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=of(t,e)}Be(ds),De(ds,t)}function ai(){Be(ds),Be(qo),Be(Ko)}function R1(e){Ya(Ko.current);var t=Ya(ds.current),r=of(t,e.type);t!==r&&(De(qo,e),De(ds,r))}function i0(e){qo.current===e&&(Be(ds),Be(qo))}var Ke=Aa(0);function Dd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Gh=[];function o0(){for(var e=0;e<Gh.length;e++)Gh[e]._workInProgressVersionPrimary=null;Gh.length=0}var kc=Ks.ReactCurrentDispatcher,Yh=Ks.ReactCurrentBatchConfig,ln=0,Ge=null,ot=null,ht=null,Fd=!1,ao=!1,Go=0,rS=0;function Nt(){throw Error(X(321))}function l0(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qr(e[r],t[r]))return!1;return!0}function c0(e,t,r,s,n,i){if(ln=i,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kc.current=e===null||e.memoizedState===null?iS:oS,e=r(s,n),ao){i=0;do{if(ao=!1,Go=0,25<=i)throw Error(X(301));i+=1,ht=ot=null,t.updateQueue=null,kc.current=lS,e=r(s,n)}while(ao)}if(kc.current=$d,t=ot!==null&&ot.next!==null,ln=0,ht=ot=Ge=null,Fd=!1,t)throw Error(X(300));return e}function d0(){var e=Go!==0;return Go=0,e}function es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ge.memoizedState=ht=e:ht=ht.next=e,ht}function Pr(){if(ot===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=ot.next;var t=ht===null?Ge.memoizedState:ht.next;if(t!==null)ht=t,ot=e;else{if(e===null)throw Error(X(310));ot=e,e={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},ht===null?Ge.memoizedState=ht=e:ht=ht.next=e}return ht}function Yo(e,t){return typeof t=="function"?t(e):t}function Qh(e){var t=Pr(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var s=ot,n=s.baseQueue,i=r.pending;if(i!==null){if(n!==null){var o=n.next;n.next=i.next,i.next=o}s.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ln&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,Ge.lanes|=u,cn|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,qr(s,t.memoizedState)||(Gt=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){n=e;do i=n.lane,Ge.lanes|=i,cn|=i,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Xh(e){var t=Pr(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var o=n=n.next;do i=e(i,o.action),o=o.next;while(o!==n);qr(i,t.memoizedState)||(Gt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function A1(){}function O1(e,t){var r=Ge,s=Pr(),n=t(),i=!qr(s.memoizedState,n);if(i&&(s.memoizedState=n,Gt=!0),s=s.queue,u0(D1.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||ht!==null&&ht.memoizedState.tag&1){if(r.flags|=2048,Qo(9,M1.bind(null,r,s,n,t),void 0,null),ft===null)throw Error(X(349));ln&30||L1(r,t,n)}return n}function L1(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function M1(e,t,r,s){t.value=r,t.getSnapshot=s,F1(t)&&$1(e)}function D1(e,t,r){return r(function(){F1(t)&&$1(e)})}function F1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qr(e,r)}catch{return!0}}function $1(e){var t=Us(e,1);t!==null&&Wr(t,e,1,-1)}function yx(e){var t=es();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:e},t.queue=e,e=e.dispatch=nS.bind(null,Ge,e),[t.memoizedState,e]}function Qo(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function z1(){return Pr().memoizedState}function Nc(e,t,r,s){var n=es();Ge.flags|=e,n.memoizedState=Qo(1|t,r,void 0,s===void 0?null:s)}function Cu(e,t,r,s){var n=Pr();s=s===void 0?null:s;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,s!==null&&l0(s,o.deps)){n.memoizedState=Qo(t,r,i,s);return}}Ge.flags|=e,n.memoizedState=Qo(1|t,r,i,s)}function bx(e,t){return Nc(8390656,8,e,t)}function u0(e,t){return Cu(2048,8,e,t)}function B1(e,t){return Cu(4,2,e,t)}function U1(e,t){return Cu(4,4,e,t)}function V1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function H1(e,t,r){return r=r!=null?r.concat([e]):null,Cu(4,4,V1.bind(null,t,e),r)}function h0(){}function W1(e,t){var r=Pr();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&l0(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function q1(e,t){var r=Pr();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&l0(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function K1(e,t,r){return ln&21?(qr(r,t)||(r=Jv(),Ge.lanes|=r,cn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Gt=!0),e.memoizedState=r)}function sS(e,t){var r=Te;Te=r!==0&&4>r?r:4,e(!0);var s=Yh.transition;Yh.transition={};try{e(!1),t()}finally{Te=r,Yh.transition=s}}function G1(){return Pr().memoizedState}function aS(e,t,r){var s=ba(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Y1(e))Q1(t,r);else if(r=T1(e,t,r,s),r!==null){var n=Dt();Wr(r,e,s,n),X1(r,t,s)}}function nS(e,t,r){var s=ba(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Y1(e))Q1(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(n.hasEagerState=!0,n.eagerState=l,qr(l,o)){var c=t.interleaved;c===null?(n.next=n,s0(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=T1(e,t,n,s),r!==null&&(n=Dt(),Wr(r,e,s,n),X1(r,t,s))}}function Y1(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function Q1(e,t){ao=Fd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function X1(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vg(e,r)}}var $d={readContext:Er,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},iS={readContext:Er,useCallback:function(e,t){return es().memoizedState=[e,t===void 0?null:t],e},useContext:Er,useEffect:bx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Nc(4194308,4,V1.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Nc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Nc(4,2,e,t)},useMemo:function(e,t){var r=es();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=es();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=aS.bind(null,Ge,e),[s.memoizedState,e]},useRef:function(e){var t=es();return e={current:e},t.memoizedState=e},useState:yx,useDebugValue:h0,useDeferredValue:function(e){return es().memoizedState=e},useTransition:function(){var e=yx(!1),t=e[0];return e=sS.bind(null,e[1]),es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ge,n=es();if(qe){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),ft===null)throw Error(X(349));ln&30||L1(s,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,bx(D1.bind(null,s,i,e),[e]),s.flags|=2048,Qo(9,M1.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=es(),t=ft.identifierPrefix;if(qe){var r=Ms,s=Ls;r=(s&~(1<<32-Hr(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Go++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=rS++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oS={readContext:Er,useCallback:W1,useContext:Er,useEffect:u0,useImperativeHandle:H1,useInsertionEffect:B1,useLayoutEffect:U1,useMemo:q1,useReducer:Qh,useRef:z1,useState:function(){return Qh(Yo)},useDebugValue:h0,useDeferredValue:function(e){var t=Pr();return K1(t,ot.memoizedState,e)},useTransition:function(){var e=Qh(Yo)[0],t=Pr().memoizedState;return[e,t]},useMutableSource:A1,useSyncExternalStore:O1,useId:G1,unstable_isNewReconciler:!1},lS={readContext:Er,useCallback:W1,useContext:Er,useEffect:u0,useImperativeHandle:H1,useInsertionEffect:B1,useLayoutEffect:U1,useMemo:q1,useReducer:Xh,useRef:z1,useState:function(){return Xh(Yo)},useDebugValue:h0,useDeferredValue:function(e){var t=Pr();return ot===null?t.memoizedState=e:K1(t,ot.memoizedState,e)},useTransition:function(){var e=Xh(Yo)[0],t=Pr().memoizedState;return[e,t]},useMutableSource:A1,useSyncExternalStore:O1,useId:G1,unstable_isNewReconciler:!1};function Lr(e,t){if(e&&e.defaultProps){t=Ye({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ef(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Ye({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _u={isMounted:function(e){return(e=e._reactInternals)?yn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Dt(),n=ba(e),i=Ds(s,n);i.payload=t,r!=null&&(i.callback=r),t=xa(e,i,n),t!==null&&(Wr(t,e,n,s),jc(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Dt(),n=ba(e),i=Ds(s,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=xa(e,i,n),t!==null&&(Wr(t,e,n,s),jc(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Dt(),s=ba(e),n=Ds(r,s);n.tag=2,t!=null&&(n.callback=t),t=xa(e,n,s),t!==null&&(Wr(t,e,s,r),jc(t,e,s))}};function vx(e,t,r,s,n,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Uo(r,s)||!Uo(n,i):!0}function J1(e,t,r){var s=!1,n=_a,i=t.contextType;return typeof i=="object"&&i!==null?i=Er(i):(n=Xt(t)?nn:At.current,s=t.contextTypes,i=(s=s!=null)?ti(e,n):_a),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_u,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function wx(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&_u.enqueueReplaceState(t,t.state,null)}function Pf(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},a0(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=Er(i):(i=Xt(t)?nn:At.current,n.context=ti(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ef(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&_u.enqueueReplaceState(n,n.state,null),Md(e,r,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function ni(e,t){try{var r="",s=t;do r+=M2(s),s=s.return;while(s);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function Jh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Tf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var cS=typeof WeakMap=="function"?WeakMap:Map;function Z1(e,t,r){r=Ds(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Bd||(Bd=!0,zf=s),Tf(e,t)},r}function ew(e,t,r){r=Ds(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){Tf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Tf(e,t),typeof s!="function"&&(ya===null?ya=new Set([this]):ya.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function jx(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new cS;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=kS.bind(null,e,t,r),t.then(e,e))}function kx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nx(e,t,r,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ds(-1,1),t.tag=2,xa(r,t,1))),r.lanes|=1),e)}var dS=Ks.ReactCurrentOwner,Gt=!1;function Lt(e,t,r,s){t.child=e===null?P1(t,null,r,s):si(t,e.child,r,s)}function Sx(e,t,r,s,n){r=r.render;var i=t.ref;return Wn(t,n),s=c0(e,t,r,s,i,n),r=d0(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vs(e,t,n)):(qe&&r&&Xg(t),t.flags|=1,Lt(e,t,s,n),t.child)}function Cx(e,t,r,s,n){if(e===null){var i=r.type;return typeof i=="function"&&!v0(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,tw(e,t,i,s,n)):(e=Ec(r.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Uo,r(o,s)&&e.ref===t.ref)return Vs(e,t,n)}return t.flags|=1,e=va(i,s),e.ref=t.ref,e.return=t,t.child=e}function tw(e,t,r,s,n){if(e!==null){var i=e.memoizedProps;if(Uo(i,s)&&e.ref===t.ref)if(Gt=!1,t.pendingProps=s=i,(e.lanes&n)!==0)e.flags&131072&&(Gt=!0);else return t.lanes=e.lanes,Vs(e,t,n)}return If(e,t,r,s,n)}function rw(e,t,r){var s=t.pendingProps,n=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Dn,sr),sr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(Dn,sr),sr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,De(Dn,sr),sr|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,De(Dn,sr),sr|=s;return Lt(e,t,n,r),t.child}function sw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function If(e,t,r,s,n){var i=Xt(r)?nn:At.current;return i=ti(t,i),Wn(t,n),r=c0(e,t,r,s,i,n),s=d0(),e!==null&&!Gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Vs(e,t,n)):(qe&&s&&Xg(t),t.flags|=1,Lt(e,t,r,n),t.child)}function _x(e,t,r,s,n){if(Xt(r)){var i=!0;Id(t)}else i=!1;if(Wn(t,n),t.stateNode===null)Sc(e,t),J1(t,r,s),Pf(t,r,s,n),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Er(d):(d=Xt(r)?nn:At.current,d=ti(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&wx(t,o,s,d),ea=!1;var m=t.memoizedState;o.state=m,Md(t,s,o,n),c=t.memoizedState,l!==s||m!==c||Qt.current||ea?(typeof u=="function"&&(Ef(t,r,u,s),c=t.memoizedState),(l=ea||vx(t,r,l,s,m,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,I1(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Lr(t.type,l),o.props=d,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Er(c):(c=Xt(r)?nn:At.current,c=ti(t,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&wx(t,o,s,c),ea=!1,m=t.memoizedState,o.state=m,Md(t,s,o,n);var f=t.memoizedState;l!==h||m!==f||Qt.current||ea?(typeof g=="function"&&(Ef(t,r,g,s),f=t.memoizedState),(d=ea||vx(t,r,d,s,m,f,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,f,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,f,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),o.props=s,o.state=f,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),s=!1)}return Rf(e,t,r,s,i,n)}function Rf(e,t,r,s,n,i){sw(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return n&&hx(t,r,!1),Vs(e,t,i);s=t.stateNode,dS.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=si(t,e.child,null,i),t.child=si(t,null,l,i)):Lt(e,t,l,i),t.memoizedState=s.state,n&&hx(t,r,!0),t.child}function aw(e){var t=e.stateNode;t.pendingContext?ux(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ux(e,t.context,!1),n0(e,t.containerInfo)}function Ex(e,t,r,s,n){return ri(),Zg(n),t.flags|=256,Lt(e,t,r,s),t.child}var Af={dehydrated:null,treeContext:null,retryLane:0};function Of(e){return{baseLanes:e,cachePool:null,transitions:null}}function nw(e,t,r){var s=t.pendingProps,n=Ke.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),De(Ke,n&1),e===null)return Cf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tu(o,s,0,null),e=tn(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Of(r),t.memoizedState=Af,e):m0(t,o));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return uS(e,t,o,s,l,n,r);if(i){i=s.fallback,o=t.mode,n=e.child,l=n.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=va(n,c),s.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=va(l,i):(i=tn(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?Of(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Af,s}return i=e.child,e=i.sibling,s=va(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function m0(e,t){return t=Tu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ql(e,t,r,s){return s!==null&&Zg(s),si(t,e.child,null,r),e=m0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uS(e,t,r,s,n,i,o){if(r)return t.flags&256?(t.flags&=-257,s=Jh(Error(X(422))),ql(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,n=t.mode,s=Tu({mode:"visible",children:s.children},n,0,null),i=tn(i,n,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&si(t,e.child,null,o),t.child.memoizedState=Of(o),t.memoizedState=Af,i);if(!(t.mode&1))return ql(e,t,o,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(X(419)),s=Jh(i,s,void 0),ql(e,t,o,s)}if(l=(o&e.childLanes)!==0,Gt||l){if(s=ft,s!==null){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|o)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,Us(e,n),Wr(s,e,n,-1))}return b0(),s=Jh(Error(X(421))),ql(e,t,o,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=NS.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,nr=pa(n.nextSibling),ir=t,qe=!0,$r=null,e!==null&&(wr[jr++]=Ls,wr[jr++]=Ms,wr[jr++]=on,Ls=e.id,Ms=e.overflow,on=t),t=m0(t,s.children),t.flags|=4096,t)}function Px(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),_f(e.return,t,r)}function Zh(e,t,r,s,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=n)}function iw(e,t,r){var s=t.pendingProps,n=s.revealOrder,i=s.tail;if(Lt(e,t,s.children,r),s=Ke.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Px(e,r,t);else if(e.tag===19)Px(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(De(Ke,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Dd(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Zh(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Dd(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Zh(t,!0,r,null,i);break;case"together":Zh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),cn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=va(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=va(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function hS(e,t,r){switch(t.tag){case 3:aw(t),ri();break;case 5:R1(t);break;case 1:Xt(t.type)&&Id(t);break;case 4:n0(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;De(Od,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(De(Ke,Ke.current&1),t.flags|=128,null):r&t.child.childLanes?nw(e,t,r):(De(Ke,Ke.current&1),e=Vs(e,t,r),e!==null?e.sibling:null);De(Ke,Ke.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return iw(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),De(Ke,Ke.current),s)break;return null;case 22:case 23:return t.lanes=0,rw(e,t,r)}return Vs(e,t,r)}var ow,Lf,lw,cw;ow=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lf=function(){};lw=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,Ya(ds.current);var i=null;switch(r){case"input":n=rf(e,n),s=rf(e,s),i=[];break;case"select":n=Ye({},n,{value:void 0}),s=Ye({},s,{value:void 0}),i=[];break;case"textarea":n=nf(e,n),s=nf(e,s),i=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Pd)}lf(r,s);var o;r=null;for(d in n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&n[d]!=null)if(d==="style"){var l=n[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Lo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=n!=null?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&$e("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};cw=function(e,t,r,s){r!==s&&(t.flags|=4)};function Oi(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function mS(e,t,r){var s=t.pendingProps;switch(Jg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return Xt(t.type)&&Td(),St(t),null;case 3:return s=t.stateNode,ai(),Be(Qt),Be(At),o0(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Hl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$r!==null&&(Vf($r),$r=null))),Lf(e,t),St(t),null;case 5:i0(t);var n=Ya(Ko.current);if(r=t.type,e!==null&&t.stateNode!=null)lw(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(X(166));return St(t),null}if(e=Ya(ds.current),Hl(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[ss]=t,s[Wo]=i,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",s),$e("close",s);break;case"iframe":case"object":case"embed":$e("load",s);break;case"video":case"audio":for(n=0;n<Ki.length;n++)$e(Ki[n],s);break;case"source":$e("error",s);break;case"img":case"image":case"link":$e("error",s),$e("load",s);break;case"details":$e("toggle",s);break;case"input":Fp(s,i),$e("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},$e("invalid",s);break;case"textarea":zp(s,i),$e("invalid",s)}lf(r,i),n=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vl(s.textContent,l,e),n=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vl(s.textContent,l,e),n=["children",""+l]):Lo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$e("scroll",s)}switch(r){case"input":Ll(s),$p(s,i,!0);break;case"textarea":Ll(s),Bp(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Pd)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Dv(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[ss]=t,e[Wo]=s,ow(e,t,!1,!1),t.stateNode=e;e:{switch(o=cf(r,s),r){case"dialog":$e("cancel",e),$e("close",e),n=s;break;case"iframe":case"object":case"embed":$e("load",e),n=s;break;case"video":case"audio":for(n=0;n<Ki.length;n++)$e(Ki[n],e);n=s;break;case"source":$e("error",e),n=s;break;case"img":case"image":case"link":$e("error",e),$e("load",e),n=s;break;case"details":$e("toggle",e),n=s;break;case"input":Fp(e,s),n=rf(e,s),$e("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=Ye({},s,{value:void 0}),$e("invalid",e);break;case"textarea":zp(e,s),n=nf(e,s),$e("invalid",e);break;default:n=s}lf(r,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zv(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fv(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Mo(e,c):typeof c=="number"&&Mo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$e("scroll",e):c!=null&&Dg(e,i,c,o))}switch(r){case"input":Ll(e),$p(e,s,!1);break;case"textarea":Ll(e),Bp(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ca(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Bn(e,!!s.multiple,i,!1):s.defaultValue!=null&&Bn(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Pd)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return St(t),null;case 6:if(e&&t.stateNode!=null)cw(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(X(166));if(r=Ya(Ko.current),Ya(ds.current),Hl(t)){if(s=t.stateNode,r=t.memoizedProps,s[ss]=t,(i=s.nodeValue!==r)&&(e=ir,e!==null))switch(e.tag){case 3:Vl(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Vl(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ss]=t,t.stateNode=s}return St(t),null;case 13:if(Be(Ke),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&nr!==null&&t.mode&1&&!(t.flags&128))_1(),ri(),t.flags|=98560,i=!1;else if(i=Hl(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(X(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[ss]=t}else ri(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;St(t),i=!1}else $r!==null&&(Vf($r),$r=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Ke.current&1?dt===0&&(dt=3):b0())),t.updateQueue!==null&&(t.flags|=4),St(t),null);case 4:return ai(),Lf(e,t),e===null&&Vo(t.stateNode.containerInfo),St(t),null;case 10:return r0(t.type._context),St(t),null;case 17:return Xt(t.type)&&Td(),St(t),null;case 19:if(Be(Ke),i=t.memoizedState,i===null)return St(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Oi(i,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Dd(e),o!==null){for(t.flags|=128,Oi(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return De(Ke,Ke.current&1|2),t.child}e=e.sibling}i.tail!==null&&Xe()>ii&&(t.flags|=128,s=!0,Oi(i,!1),t.lanes=4194304)}else{if(!s)if(e=Dd(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qe)return St(t),null}else 2*Xe()-i.renderingStartTime>ii&&r!==1073741824&&(t.flags|=128,s=!0,Oi(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,r=Ke.current,De(Ke,s?r&1|2:r&1),t):(St(t),null);case 22:case 23:return y0(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?sr&1073741824&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function fS(e,t){switch(Jg(t),t.tag){case 1:return Xt(t.type)&&Td(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ai(),Be(Qt),Be(At),o0(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return i0(t),null;case 13:if(Be(Ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));ri()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(Ke),null;case 4:return ai(),null;case 10:return r0(t.type._context),null;case 22:case 23:return y0(),null;case 24:return null;default:return null}}var Kl=!1,Et=!1,gS=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Mn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Qe(e,t,s)}else r.current=null}function Mf(e,t,r){try{r()}catch(s){Qe(e,t,s)}}var Tx=!1;function pS(e,t){if(bf=Cd,e=f1(),Qg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var g;h!==r||n!==0&&h.nodeType!==3||(l=o+n),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===e)break t;if(m===r&&++d===n&&(l=o),m===i&&++u===s&&(c=o),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(vf={focusedElem:e,selectionRange:r},Cd=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var x=f.memoizedProps,p=f.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?x:Lr(t.type,x),p);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(w){Qe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return f=Tx,Tx=!1,f}function no(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&Mf(t,r,i)}n=n.next}while(n!==s)}}function Eu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Df(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function dw(e){var t=e.alternate;t!==null&&(e.alternate=null,dw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ss],delete t[Wo],delete t[kf],delete t[J4],delete t[Z4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uw(e){return e.tag===5||e.tag===3||e.tag===4}function Ix(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ff(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Pd));else if(s!==4&&(e=e.child,e!==null))for(Ff(e,t,r),e=e.sibling;e!==null;)Ff(e,t,r),e=e.sibling}function $f(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for($f(e,t,r),e=e.sibling;e!==null;)$f(e,t,r),e=e.sibling}var yt=null,Mr=!1;function Qs(e,t,r){for(r=r.child;r!==null;)hw(e,t,r),r=r.sibling}function hw(e,t,r){if(cs&&typeof cs.onCommitFiberUnmount=="function")try{cs.onCommitFiberUnmount(vu,r)}catch{}switch(r.tag){case 5:Et||Mn(r,t);case 6:var s=yt,n=Mr;yt=null,Qs(e,t,r),yt=s,Mr=n,yt!==null&&(Mr?(e=yt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):yt.removeChild(r.stateNode));break;case 18:yt!==null&&(Mr?(e=yt,r=r.stateNode,e.nodeType===8?qh(e.parentNode,r):e.nodeType===1&&qh(e,r),zo(e)):qh(yt,r.stateNode));break;case 4:s=yt,n=Mr,yt=r.stateNode.containerInfo,Mr=!0,Qs(e,t,r),yt=s,Mr=n;break;case 0:case 11:case 14:case 15:if(!Et&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var i=n,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Mf(r,t,o),n=n.next}while(n!==s)}Qs(e,t,r);break;case 1:if(!Et&&(Mn(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Qe(r,t,l)}Qs(e,t,r);break;case 21:Qs(e,t,r);break;case 22:r.mode&1?(Et=(s=Et)||r.memoizedState!==null,Qs(e,t,r),Et=s):Qs(e,t,r);break;default:Qs(e,t,r)}}function Rx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new gS),t.forEach(function(s){var n=SS.bind(null,e,s);r.has(s)||(r.add(s),s.then(n,n))})}}function Or(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:yt=l.stateNode,Mr=!1;break e;case 3:yt=l.stateNode.containerInfo,Mr=!0;break e;case 4:yt=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(yt===null)throw Error(X(160));hw(i,o,n),yt=null,Mr=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(d){Qe(n,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mw(t,e),t=t.sibling}function mw(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Or(t,e),Qr(e),s&4){try{no(3,e,e.return),Eu(3,e)}catch(x){Qe(e,e.return,x)}try{no(5,e,e.return)}catch(x){Qe(e,e.return,x)}}break;case 1:Or(t,e),Qr(e),s&512&&r!==null&&Mn(r,r.return);break;case 5:if(Or(t,e),Qr(e),s&512&&r!==null&&Mn(r,r.return),e.flags&32){var n=e.stateNode;try{Mo(n,"")}catch(x){Qe(e,e.return,x)}}if(s&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Lv(n,i),cf(l,o);var d=cf(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?zv(n,h):u==="dangerouslySetInnerHTML"?Fv(n,h):u==="children"?Mo(n,h):Dg(n,u,h,d)}switch(l){case"input":sf(n,i);break;case"textarea":Mv(n,i);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Bn(n,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Bn(n,!!i.multiple,i.defaultValue,!0):Bn(n,!!i.multiple,i.multiple?[]:"",!1))}n[Wo]=i}catch(x){Qe(e,e.return,x)}}break;case 6:if(Or(t,e),Qr(e),s&4){if(e.stateNode===null)throw Error(X(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){Qe(e,e.return,x)}}break;case 3:if(Or(t,e),Qr(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{zo(t.containerInfo)}catch(x){Qe(e,e.return,x)}break;case 4:Or(t,e),Qr(e);break;case 13:Or(t,e),Qr(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(p0=Xe())),s&4&&Rx(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Et=(d=Et)||u,Or(t,e),Et=d):Or(t,e),Qr(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ie=e,u=e.child;u!==null;){for(h=ie=u;ie!==null;){switch(m=ie,g=m.child,m.tag){case 0:case 11:case 14:case 15:no(4,m,m.return);break;case 1:Mn(m,m.return);var f=m.stateNode;if(typeof f.componentWillUnmount=="function"){s=m,r=m.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){Qe(s,r,x)}}break;case 5:Mn(m,m.return);break;case 22:if(m.memoizedState!==null){Ox(h);continue}}g!==null?(g.return=m,ie=g):Ox(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{n=h.stateNode,d?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=$v("display",o))}catch(x){Qe(e,e.return,x)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(x){Qe(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Or(t,e),Qr(e),s&4&&Rx(e);break;case 21:break;default:Or(t,e),Qr(e)}}function Qr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(uw(r)){var s=r;break e}r=r.return}throw Error(X(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&(Mo(n,""),s.flags&=-33);var i=Ix(e);$f(e,i,n);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Ix(e);Ff(e,l,o);break;default:throw Error(X(161))}}catch(c){Qe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xS(e,t,r){ie=e,fw(e)}function fw(e,t,r){for(var s=(e.mode&1)!==0;ie!==null;){var n=ie,i=n.child;if(n.tag===22&&s){var o=n.memoizedState!==null||Kl;if(!o){var l=n.alternate,c=l!==null&&l.memoizedState!==null||Et;l=Kl;var d=Et;if(Kl=o,(Et=c)&&!d)for(ie=n;ie!==null;)o=ie,c=o.child,o.tag===22&&o.memoizedState!==null?Lx(n):c!==null?(c.return=o,ie=c):Lx(n);for(;i!==null;)ie=i,fw(i),i=i.sibling;ie=n,Kl=l,Et=d}Ax(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,ie=i):Ax(e)}}function Ax(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Et||Eu(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Et)if(r===null)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:Lr(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&xx(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}xx(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&zo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Et||t.flags&512&&Df(t)}catch(m){Qe(t,t.return,m)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Ox(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Lx(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Eu(4,t)}catch(c){Qe(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(c){Qe(t,n,c)}}var i=t.return;try{Df(t)}catch(c){Qe(t,i,c)}break;case 5:var o=t.return;try{Df(t)}catch(c){Qe(t,o,c)}}}catch(c){Qe(t,t.return,c)}if(t===e){ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ie=l;break}ie=t.return}}var yS=Math.ceil,zd=Ks.ReactCurrentDispatcher,f0=Ks.ReactCurrentOwner,Cr=Ks.ReactCurrentBatchConfig,ke=0,ft=null,st=null,wt=0,sr=0,Dn=Aa(0),dt=0,Xo=null,cn=0,Pu=0,g0=0,io=null,qt=null,p0=0,ii=1/0,Is=null,Bd=!1,zf=null,ya=null,Gl=!1,oa=null,Ud=0,oo=0,Bf=null,Cc=-1,_c=0;function Dt(){return ke&6?Xe():Cc!==-1?Cc:Cc=Xe()}function ba(e){return e.mode&1?ke&2&&wt!==0?wt&-wt:tS.transition!==null?(_c===0&&(_c=Jv()),_c):(e=Te,e!==0||(e=window.event,e=e===void 0?16:n1(e.type)),e):1}function Wr(e,t,r,s){if(50<oo)throw oo=0,Bf=null,Error(X(185));gl(e,r,s),(!(ke&2)||e!==ft)&&(e===ft&&(!(ke&2)&&(Pu|=r),dt===4&&ra(e,wt)),Jt(e,s),r===1&&ke===0&&!(t.mode&1)&&(ii=Xe()+500,Su&&Oa()))}function Jt(e,t){var r=e.callbackNode;t4(e,t);var s=Sd(e,e===ft?wt:0);if(s===0)r!==null&&Hp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Hp(r),t===1)e.tag===0?eS(Mx.bind(null,e)):N1(Mx.bind(null,e)),Q4(function(){!(ke&6)&&Oa()}),r=null;else{switch(Zv(s)){case 1:r=Ug;break;case 4:r=Qv;break;case 16:r=Nd;break;case 536870912:r=Xv;break;default:r=Nd}r=jw(r,gw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function gw(e,t){if(Cc=-1,_c=0,ke&6)throw Error(X(327));var r=e.callbackNode;if(qn()&&e.callbackNode!==r)return null;var s=Sd(e,e===ft?wt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Vd(e,s);else{t=s;var n=ke;ke|=2;var i=xw();(ft!==e||wt!==t)&&(Is=null,ii=Xe()+500,en(e,t));do try{wS();break}catch(l){pw(e,l)}while(!0);t0(),zd.current=i,ke=n,st!==null?t=0:(ft=null,wt=0,t=dt)}if(t!==0){if(t===2&&(n=ff(e),n!==0&&(s=n,t=Uf(e,n))),t===1)throw r=Xo,en(e,0),ra(e,s),Jt(e,Xe()),r;if(t===6)ra(e,s);else{if(n=e.current.alternate,!(s&30)&&!bS(n)&&(t=Vd(e,s),t===2&&(i=ff(e),i!==0&&(s=i,t=Uf(e,i))),t===1))throw r=Xo,en(e,0),ra(e,s),Jt(e,Xe()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(X(345));case 2:Va(e,qt,Is);break;case 3:if(ra(e,s),(s&130023424)===s&&(t=p0+500-Xe(),10<t)){if(Sd(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){Dt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=jf(Va.bind(null,e,qt,Is),t);break}Va(e,qt,Is);break;case 4:if(ra(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var o=31-Hr(s);i=1<<o,o=t[o],o>n&&(n=o),s&=~i}if(s=n,s=Xe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*yS(s/1960))-s,10<s){e.timeoutHandle=jf(Va.bind(null,e,qt,Is),s);break}Va(e,qt,Is);break;case 5:Va(e,qt,Is);break;default:throw Error(X(329))}}}return Jt(e,Xe()),e.callbackNode===r?gw.bind(null,e):null}function Uf(e,t){var r=io;return e.current.memoizedState.isDehydrated&&(en(e,t).flags|=256),e=Vd(e,t),e!==2&&(t=qt,qt=r,t!==null&&Vf(t)),e}function Vf(e){qt===null?qt=e:qt.push.apply(qt,e)}function bS(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],i=n.getSnapshot;n=n.value;try{if(!qr(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ra(e,t){for(t&=~g0,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Hr(t),s=1<<r;e[r]=-1,t&=~s}}function Mx(e){if(ke&6)throw Error(X(327));qn();var t=Sd(e,0);if(!(t&1))return Jt(e,Xe()),null;var r=Vd(e,t);if(e.tag!==0&&r===2){var s=ff(e);s!==0&&(t=s,r=Uf(e,s))}if(r===1)throw r=Xo,en(e,0),ra(e,t),Jt(e,Xe()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Va(e,qt,Is),Jt(e,Xe()),null}function x0(e,t){var r=ke;ke|=1;try{return e(t)}finally{ke=r,ke===0&&(ii=Xe()+500,Su&&Oa())}}function dn(e){oa!==null&&oa.tag===0&&!(ke&6)&&qn();var t=ke;ke|=1;var r=Cr.transition,s=Te;try{if(Cr.transition=null,Te=1,e)return e()}finally{Te=s,Cr.transition=r,ke=t,!(ke&6)&&Oa()}}function y0(){sr=Dn.current,Be(Dn)}function en(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Y4(r)),st!==null)for(r=st.return;r!==null;){var s=r;switch(Jg(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Td();break;case 3:ai(),Be(Qt),Be(At),o0();break;case 5:i0(s);break;case 4:ai();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:r0(s.type._context);break;case 22:case 23:y0()}r=r.return}if(ft=e,st=e=va(e.current,null),wt=sr=t,dt=0,Xo=null,g0=Pu=cn=0,qt=io=null,Ga!==null){for(t=0;t<Ga.length;t++)if(r=Ga[t],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=n,s.next=o}r.pending=s}Ga=null}return e}function pw(e,t){do{var r=st;try{if(t0(),kc.current=$d,Fd){for(var s=Ge.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}Fd=!1}if(ln=0,ht=ot=Ge=null,ao=!1,Go=0,f0.current=null,r===null||r.return===null){dt=1,Xo=t,st=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=wt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=kx(o);if(g!==null){g.flags&=-257,Nx(g,o,l,i,t),g.mode&1&&jx(i,d,t),t=g,c=d;var f=t.updateQueue;if(f===null){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}else{if(!(t&1)){jx(i,d,t),b0();break e}c=Error(X(426))}}else if(qe&&l.mode&1){var p=kx(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),Nx(p,o,l,i,t),Zg(ni(c,l));break e}}i=c=ni(c,l),dt!==4&&(dt=2),io===null?io=[i]:io.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=Z1(i,c,t);px(i,b);break e;case 1:l=c;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ya===null||!ya.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=ew(i,l,t);px(i,w);break e}}i=i.return}while(i!==null)}bw(r)}catch(k){t=k,st===r&&r!==null&&(st=r=r.return);continue}break}while(!0)}function xw(){var e=zd.current;return zd.current=$d,e===null?$d:e}function b0(){(dt===0||dt===3||dt===2)&&(dt=4),ft===null||!(cn&268435455)&&!(Pu&268435455)||ra(ft,wt)}function Vd(e,t){var r=ke;ke|=2;var s=xw();(ft!==e||wt!==t)&&(Is=null,en(e,t));do try{vS();break}catch(n){pw(e,n)}while(!0);if(t0(),ke=r,zd.current=s,st!==null)throw Error(X(261));return ft=null,wt=0,dt}function vS(){for(;st!==null;)yw(st)}function wS(){for(;st!==null&&!q2();)yw(st)}function yw(e){var t=ww(e.alternate,e,sr);e.memoizedProps=e.pendingProps,t===null?bw(e):st=t,f0.current=null}function bw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=fS(r,t),r!==null){r.flags&=32767,st=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,st=null;return}}else if(r=mS(r,t,sr),r!==null){st=r;return}if(t=t.sibling,t!==null){st=t;return}st=t=e}while(t!==null);dt===0&&(dt=5)}function Va(e,t,r){var s=Te,n=Cr.transition;try{Cr.transition=null,Te=1,jS(e,t,r,s)}finally{Cr.transition=n,Te=s}return null}function jS(e,t,r,s){do qn();while(oa!==null);if(ke&6)throw Error(X(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(r4(e,i),e===ft&&(st=ft=null,wt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gl||(Gl=!0,jw(Nd,function(){return qn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Cr.transition,Cr.transition=null;var o=Te;Te=1;var l=ke;ke|=4,f0.current=null,pS(e,r),mw(r,e),U4(vf),Cd=!!bf,vf=bf=null,e.current=r,xS(r),K2(),ke=l,Te=o,Cr.transition=i}else e.current=r;if(Gl&&(Gl=!1,oa=e,Ud=n),i=e.pendingLanes,i===0&&(ya=null),Q2(r.stateNode),Jt(e,Xe()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(Bd)throw Bd=!1,e=zf,zf=null,e;return Ud&1&&e.tag!==0&&qn(),i=e.pendingLanes,i&1?e===Bf?oo++:(oo=0,Bf=e):oo=0,Oa(),null}function qn(){if(oa!==null){var e=Zv(Ud),t=Cr.transition,r=Te;try{if(Cr.transition=null,Te=16>e?16:e,oa===null)var s=!1;else{if(e=oa,oa=null,Ud=0,ke&6)throw Error(X(331));var n=ke;for(ke|=4,ie=e.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ie=d;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:no(8,u,i)}var h=u.child;if(h!==null)h.return=u,ie=h;else for(;ie!==null;){u=ie;var m=u.sibling,g=u.return;if(dw(u),u===d){ie=null;break}if(m!==null){m.return=g,ie=m;break}ie=g}}}var f=i.alternate;if(f!==null){var x=f.child;if(x!==null){f.child=null;do{var p=x.sibling;x.sibling=null,x=p}while(x!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:no(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,ie=b;break e}ie=i.return}}var y=e.current;for(ie=y;ie!==null;){o=ie;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ie=v;else e:for(o=y;ie!==null;){if(l=ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Eu(9,l)}}catch(k){Qe(l,l.return,k)}if(l===o){ie=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,ie=w;break e}ie=l.return}}if(ke=n,Oa(),cs&&typeof cs.onPostCommitFiberRoot=="function")try{cs.onPostCommitFiberRoot(vu,e)}catch{}s=!0}return s}finally{Te=r,Cr.transition=t}}return!1}function Dx(e,t,r){t=ni(r,t),t=Z1(e,t,1),e=xa(e,t,1),t=Dt(),e!==null&&(gl(e,1,t),Jt(e,t))}function Qe(e,t,r){if(e.tag===3)Dx(e,e,r);else for(;t!==null;){if(t.tag===3){Dx(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(ya===null||!ya.has(s))){e=ni(r,e),e=ew(t,e,1),t=xa(t,e,1),e=Dt(),t!==null&&(gl(t,1,e),Jt(t,e));break}}t=t.return}}function kS(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Dt(),e.pingedLanes|=e.suspendedLanes&r,ft===e&&(wt&r)===r&&(dt===4||dt===3&&(wt&130023424)===wt&&500>Xe()-p0?en(e,0):g0|=r),Jt(e,t)}function vw(e,t){t===0&&(e.mode&1?(t=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):t=1);var r=Dt();e=Us(e,t),e!==null&&(gl(e,t,r),Jt(e,r))}function NS(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vw(e,r)}function SS(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(X(314))}s!==null&&s.delete(t),vw(e,r)}var ww;ww=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qt.current)Gt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Gt=!1,hS(e,t,r);Gt=!!(e.flags&131072)}else Gt=!1,qe&&t.flags&1048576&&S1(t,Ad,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Sc(e,t),e=t.pendingProps;var n=ti(t,At.current);Wn(t,r),n=c0(null,t,s,e,n,r);var i=d0();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xt(s)?(i=!0,Id(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,a0(t),n.updater=_u,t.stateNode=n,n._reactInternals=t,Pf(t,s,e,r),t=Rf(null,t,s,!0,i,r)):(t.tag=0,qe&&i&&Xg(t),Lt(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Sc(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=_S(s),e=Lr(s,e),n){case 0:t=If(null,t,s,e,r);break e;case 1:t=_x(null,t,s,e,r);break e;case 11:t=Sx(null,t,s,e,r);break e;case 14:t=Cx(null,t,s,Lr(s.type,e),r);break e}throw Error(X(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Lr(s,n),If(e,t,s,n,r);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Lr(s,n),_x(e,t,s,n,r);case 3:e:{if(aw(t),e===null)throw Error(X(387));s=t.pendingProps,i=t.memoizedState,n=i.element,I1(e,t),Md(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=ni(Error(X(423)),t),t=Ex(e,t,s,r,n);break e}else if(s!==n){n=ni(Error(X(424)),t),t=Ex(e,t,s,r,n);break e}else for(nr=pa(t.stateNode.containerInfo.firstChild),ir=t,qe=!0,$r=null,r=P1(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ri(),s===n){t=Vs(e,t,r);break e}Lt(e,t,s,r)}t=t.child}return t;case 5:return R1(t),e===null&&Cf(t),s=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,o=n.children,wf(s,n)?o=null:i!==null&&wf(s,i)&&(t.flags|=32),sw(e,t),Lt(e,t,o,r),t.child;case 6:return e===null&&Cf(t),null;case 13:return nw(e,t,r);case 4:return n0(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=si(t,null,s,r):Lt(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Lr(s,n),Sx(e,t,s,n,r);case 7:return Lt(e,t,t.pendingProps,r),t.child;case 8:return Lt(e,t,t.pendingProps.children,r),t.child;case 12:return Lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,De(Od,s._currentValue),s._currentValue=o,i!==null)if(qr(i.value,o)){if(i.children===n.children&&!Qt.current){t=Vs(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Ds(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),_f(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),_f(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Lt(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Wn(t,r),n=Er(n),s=s(n),t.flags|=1,Lt(e,t,s,r),t.child;case 14:return s=t.type,n=Lr(s,t.pendingProps),n=Lr(s.type,n),Cx(e,t,s,n,r);case 15:return tw(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:Lr(s,n),Sc(e,t),t.tag=1,Xt(s)?(e=!0,Id(t)):e=!1,Wn(t,r),J1(t,s,n),Pf(t,s,n,r),Rf(null,t,s,!0,e,r);case 19:return iw(e,t,r);case 22:return rw(e,t,r)}throw Error(X(156,t.tag))};function jw(e,t){return Yv(e,t)}function CS(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(e,t,r,s){return new CS(e,t,r,s)}function v0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _S(e){if(typeof e=="function")return v0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$g)return 11;if(e===zg)return 14}return 2}function va(e,t){var r=e.alternate;return r===null?(r=Nr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ec(e,t,r,s,n,i){var o=2;if(s=e,typeof e=="function")v0(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _n:return tn(r.children,n,i,t);case Fg:o=8,n|=8;break;case Jm:return e=Nr(12,r,t,n|2),e.elementType=Jm,e.lanes=i,e;case Zm:return e=Nr(13,r,t,n),e.elementType=Zm,e.lanes=i,e;case ef:return e=Nr(19,r,t,n),e.elementType=ef,e.lanes=i,e;case Rv:return Tu(r,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Tv:o=10;break e;case Iv:o=9;break e;case $g:o=11;break e;case zg:o=14;break e;case Zs:o=16,s=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Nr(o,r,t,n),t.elementType=e,t.type=s,t.lanes=i,t}function tn(e,t,r,s){return e=Nr(7,e,s,t),e.lanes=r,e}function Tu(e,t,r,s){return e=Nr(22,e,s,t),e.elementType=Rv,e.lanes=r,e.stateNode={isHidden:!1},e}function em(e,t,r){return e=Nr(6,e,null,t),e.lanes=r,e}function tm(e,t,r){return t=Nr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ES(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lh(0),this.expirationTimes=Lh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lh(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function w0(e,t,r,s,n,i,o,l,c){return e=new ES(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Nr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},a0(i),e}function PS(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cn,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function kw(e){if(!e)return _a;e=e._reactInternals;e:{if(yn(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(Xt(r))return k1(e,r,t)}return t}function Nw(e,t,r,s,n,i,o,l,c){return e=w0(r,s,!0,e,n,i,o,l,c),e.context=kw(null),r=e.current,s=Dt(),n=ba(r),i=Ds(s,n),i.callback=t??null,xa(r,i,n),e.current.lanes=n,gl(e,n,s),Jt(e,s),e}function Iu(e,t,r,s){var n=t.current,i=Dt(),o=ba(n);return r=kw(r),t.context===null?t.context=r:t.pendingContext=r,t=Ds(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=xa(n,t,o),e!==null&&(Wr(e,n,o,i),jc(e,n,o)),o}function Hd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function j0(e,t){Fx(e,t),(e=e.alternate)&&Fx(e,t)}function TS(){return null}var Sw=typeof reportError=="function"?reportError:function(e){console.error(e)};function k0(e){this._internalRoot=e}Ru.prototype.render=k0.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Iu(e,t,null,null)};Ru.prototype.unmount=k0.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dn(function(){Iu(null,e,null,null)}),t[Bs]=null}};function Ru(e){this._internalRoot=e}Ru.prototype.unstable_scheduleHydration=function(e){if(e){var t=r1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ta.length&&t!==0&&t<ta[r].priority;r++);ta.splice(r,0,e),r===0&&a1(e)}};function N0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Au(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $x(){}function IS(e,t,r,s,n){if(n){if(typeof s=="function"){var i=s;s=function(){var d=Hd(o);i.call(d)}}var o=Nw(t,s,e,0,null,!1,!1,"",$x);return e._reactRootContainer=o,e[Bs]=o.current,Vo(e.nodeType===8?e.parentNode:e),dn(),o}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var l=s;s=function(){var d=Hd(c);l.call(d)}}var c=w0(e,0,!1,null,null,!1,!1,"",$x);return e._reactRootContainer=c,e[Bs]=c.current,Vo(e.nodeType===8?e.parentNode:e),dn(function(){Iu(t,c,r,s)}),c}function Ou(e,t,r,s,n){var i=r._reactRootContainer;if(i){var o=i;if(typeof n=="function"){var l=n;n=function(){var c=Hd(o);l.call(c)}}Iu(t,o,e,n)}else o=IS(r,t,e,n,s);return Hd(o)}e1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=qi(t.pendingLanes);r!==0&&(Vg(t,r|1),Jt(t,Xe()),!(ke&6)&&(ii=Xe()+500,Oa()))}break;case 13:dn(function(){var s=Us(e,1);if(s!==null){var n=Dt();Wr(s,e,1,n)}}),j0(e,1)}};Hg=function(e){if(e.tag===13){var t=Us(e,134217728);if(t!==null){var r=Dt();Wr(t,e,134217728,r)}j0(e,134217728)}};t1=function(e){if(e.tag===13){var t=ba(e),r=Us(e,t);if(r!==null){var s=Dt();Wr(r,e,t,s)}j0(e,t)}};r1=function(){return Te};s1=function(e,t){var r=Te;try{return Te=e,t()}finally{Te=r}};uf=function(e,t,r){switch(t){case"input":if(sf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=Nu(s);if(!n)throw Error(X(90));Ov(s),sf(s,n)}}}break;case"textarea":Mv(e,r);break;case"select":t=r.value,t!=null&&Bn(e,!!r.multiple,t,!1)}};Vv=x0;Hv=dn;var RS={usingClientEntryPoint:!1,Events:[xl,In,Nu,Bv,Uv,x0]},Li={findFiberByHostInstance:Ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AS={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kv(e),e===null?null:e.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||TS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{vu=Yl.inject(AS),cs=Yl}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RS;hr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N0(t))throw Error(X(200));return PS(e,t,null,r)};hr.createRoot=function(e,t){if(!N0(e))throw Error(X(299));var r=!1,s="",n=Sw;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=w0(e,1,!1,null,null,r,!1,s,n),e[Bs]=t.current,Vo(e.nodeType===8?e.parentNode:e),new k0(t)};hr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Kv(t),e=e===null?null:e.stateNode,e};hr.flushSync=function(e){return dn(e)};hr.hydrate=function(e,t,r){if(!Au(t))throw Error(X(200));return Ou(null,e,t,!0,r)};hr.hydrateRoot=function(e,t,r){if(!N0(e))throw Error(X(405));var s=r!=null&&r.hydratedSources||null,n=!1,i="",o=Sw;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=Nw(t,null,e,1,r??null,n,!1,i,o),e[Bs]=t.current,Vo(e),s)for(e=0;e<s.length;e++)r=s[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Ru(t)};hr.render=function(e,t,r){if(!Au(t))throw Error(X(200));return Ou(null,e,t,!1,r)};hr.unmountComponentAtNode=function(e){if(!Au(e))throw Error(X(40));return e._reactRootContainer?(dn(function(){Ou(null,null,e,!1,function(){e._reactRootContainer=null,e[Bs]=null})}),!0):!1};hr.unstable_batchedUpdates=x0;hr.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Au(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return Ou(e,t,r,!1,s)};hr.version="18.3.1-next-f1338f8080-20240426";function Cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cw)}catch(e){console.error(e)}}Cw(),Cv.exports=hr;var _w=Cv.exports,zx=_w;Qm.createRoot=zx.createRoot,Qm.hydrateRoot=zx.hydrateRoot;var Ew={exports:{}},Pw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oi=j;function OS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var LS=typeof Object.is=="function"?Object.is:OS,MS=oi.useState,DS=oi.useEffect,FS=oi.useLayoutEffect,$S=oi.useDebugValue;function zS(e,t){var r=t(),s=MS({inst:{value:r,getSnapshot:t}}),n=s[0].inst,i=s[1];return FS(function(){n.value=r,n.getSnapshot=t,rm(n)&&i({inst:n})},[e,r,t]),DS(function(){return rm(n)&&i({inst:n}),e(function(){rm(n)&&i({inst:n})})},[e]),$S(r),r}function rm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!LS(e,r)}catch{return!0}}function BS(e,t){return t()}var US=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BS:zS;Pw.useSyncExternalStore=oi.useSyncExternalStore!==void 0?oi.useSyncExternalStore:US;Ew.exports=Pw;var VS=Ew.exports,Tw={exports:{}},Iw={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu=j,HS=VS;function WS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qS=typeof Object.is=="function"?Object.is:WS,KS=HS.useSyncExternalStore,GS=Lu.useRef,YS=Lu.useEffect,QS=Lu.useMemo,XS=Lu.useDebugValue;Iw.useSyncExternalStoreWithSelector=function(e,t,r,s,n){var i=GS(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=QS(function(){function c(g){if(!d){if(d=!0,u=g,g=s(g),n!==void 0&&o.hasValue){var f=o.value;if(n(f,g))return h=f}return h=g}if(f=h,qS(u,g))return f;var x=s(g);return n!==void 0&&n(f,x)?(u=g,f):(u=g,h=x)}var d=!1,u,h,m=r===void 0?null:r;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,r,s,n]);var l=KS(e,i[0],i[1]);return YS(function(){o.hasValue=!0,o.value=l},[l]),XS(l),l};Tw.exports=Iw;var JS=Tw.exports;function ZS(e){e()}let Rw=ZS;const e6=e=>Rw=e,t6=()=>Rw,Bx=Symbol.for("react-redux-context"),Ux=typeof globalThis<"u"?globalThis:{};function r6(){var e;if(!j.createContext)return{};const t=(e=Ux[Bx])!=null?e:Ux[Bx]=new Map;let r=t.get(j.createContext);return r||(r=j.createContext(null),t.set(j.createContext,r)),r}const Ea=r6();function S0(e=Ea){return function(){return j.useContext(e)}}const Aw=S0(),s6=()=>{throw new Error("uSES not initialized!")};let Ow=s6;const a6=e=>{Ow=e},n6=(e,t)=>e===t;function i6(e=Ea){const t=e===Ea?Aw:S0(e);return function(s,n={}){const{equalityFn:i=n6,stabilityCheck:o=void 0,noopCheck:l=void 0}=typeof n=="function"?{equalityFn:n}:n,{store:c,subscription:d,getServerState:u,stabilityCheck:h,noopCheck:m}=t();j.useRef(!0);const g=j.useCallback({[s.name](x){return s(x)}}[s.name],[s,h,o]),f=Ow(d.addNestedSub,c.getState,u||c.getState,g,i);return j.useDebugValue(f),f}}const ne=i6();var Lw={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pt=typeof Symbol=="function"&&Symbol.for,C0=pt?Symbol.for("react.element"):60103,_0=pt?Symbol.for("react.portal"):60106,Mu=pt?Symbol.for("react.fragment"):60107,Du=pt?Symbol.for("react.strict_mode"):60108,Fu=pt?Symbol.for("react.profiler"):60114,$u=pt?Symbol.for("react.provider"):60109,zu=pt?Symbol.for("react.context"):60110,E0=pt?Symbol.for("react.async_mode"):60111,Bu=pt?Symbol.for("react.concurrent_mode"):60111,Uu=pt?Symbol.for("react.forward_ref"):60112,Vu=pt?Symbol.for("react.suspense"):60113,o6=pt?Symbol.for("react.suspense_list"):60120,Hu=pt?Symbol.for("react.memo"):60115,Wu=pt?Symbol.for("react.lazy"):60116,l6=pt?Symbol.for("react.block"):60121,c6=pt?Symbol.for("react.fundamental"):60117,d6=pt?Symbol.for("react.responder"):60118,u6=pt?Symbol.for("react.scope"):60119;function fr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case C0:switch(e=e.type,e){case E0:case Bu:case Mu:case Fu:case Du:case Vu:return e;default:switch(e=e&&e.$$typeof,e){case zu:case Uu:case Wu:case Hu:case $u:return e;default:return t}}case _0:return t}}}function Mw(e){return fr(e)===Bu}Ie.AsyncMode=E0;Ie.ConcurrentMode=Bu;Ie.ContextConsumer=zu;Ie.ContextProvider=$u;Ie.Element=C0;Ie.ForwardRef=Uu;Ie.Fragment=Mu;Ie.Lazy=Wu;Ie.Memo=Hu;Ie.Portal=_0;Ie.Profiler=Fu;Ie.StrictMode=Du;Ie.Suspense=Vu;Ie.isAsyncMode=function(e){return Mw(e)||fr(e)===E0};Ie.isConcurrentMode=Mw;Ie.isContextConsumer=function(e){return fr(e)===zu};Ie.isContextProvider=function(e){return fr(e)===$u};Ie.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===C0};Ie.isForwardRef=function(e){return fr(e)===Uu};Ie.isFragment=function(e){return fr(e)===Mu};Ie.isLazy=function(e){return fr(e)===Wu};Ie.isMemo=function(e){return fr(e)===Hu};Ie.isPortal=function(e){return fr(e)===_0};Ie.isProfiler=function(e){return fr(e)===Fu};Ie.isStrictMode=function(e){return fr(e)===Du};Ie.isSuspense=function(e){return fr(e)===Vu};Ie.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Mu||e===Bu||e===Fu||e===Du||e===Vu||e===o6||typeof e=="object"&&e!==null&&(e.$$typeof===Wu||e.$$typeof===Hu||e.$$typeof===$u||e.$$typeof===zu||e.$$typeof===Uu||e.$$typeof===c6||e.$$typeof===d6||e.$$typeof===u6||e.$$typeof===l6)};Ie.typeOf=fr;Lw.exports=Ie;var h6=Lw.exports,Dw=h6,m6={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f6={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Fw={};Fw[Dw.ForwardRef]=m6;Fw[Dw.Memo]=f6;var Oe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P0=Symbol.for("react.element"),T0=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),Yu=Symbol.for("react.provider"),Qu=Symbol.for("react.context"),g6=Symbol.for("react.server_context"),Xu=Symbol.for("react.forward_ref"),Ju=Symbol.for("react.suspense"),Zu=Symbol.for("react.suspense_list"),eh=Symbol.for("react.memo"),th=Symbol.for("react.lazy"),p6=Symbol.for("react.offscreen"),$w;$w=Symbol.for("react.module.reference");function Rr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case P0:switch(e=e.type,e){case qu:case Gu:case Ku:case Ju:case Zu:return e;default:switch(e=e&&e.$$typeof,e){case g6:case Qu:case Xu:case th:case eh:case Yu:return e;default:return t}}case T0:return t}}}Oe.ContextConsumer=Qu;Oe.ContextProvider=Yu;Oe.Element=P0;Oe.ForwardRef=Xu;Oe.Fragment=qu;Oe.Lazy=th;Oe.Memo=eh;Oe.Portal=T0;Oe.Profiler=Gu;Oe.StrictMode=Ku;Oe.Suspense=Ju;Oe.SuspenseList=Zu;Oe.isAsyncMode=function(){return!1};Oe.isConcurrentMode=function(){return!1};Oe.isContextConsumer=function(e){return Rr(e)===Qu};Oe.isContextProvider=function(e){return Rr(e)===Yu};Oe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===P0};Oe.isForwardRef=function(e){return Rr(e)===Xu};Oe.isFragment=function(e){return Rr(e)===qu};Oe.isLazy=function(e){return Rr(e)===th};Oe.isMemo=function(e){return Rr(e)===eh};Oe.isPortal=function(e){return Rr(e)===T0};Oe.isProfiler=function(e){return Rr(e)===Gu};Oe.isStrictMode=function(e){return Rr(e)===Ku};Oe.isSuspense=function(e){return Rr(e)===Ju};Oe.isSuspenseList=function(e){return Rr(e)===Zu};Oe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===qu||e===Gu||e===Ku||e===Ju||e===Zu||e===p6||typeof e=="object"&&e!==null&&(e.$$typeof===th||e.$$typeof===eh||e.$$typeof===Yu||e.$$typeof===Qu||e.$$typeof===Xu||e.$$typeof===$w||e.getModuleId!==void 0)};Oe.typeOf=Rr;function x6(){const e=t6();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){let s=[],n=t;for(;n;)s.push(n),n=n.next;return s},subscribe(s){let n=!0,i=r={callback:s,next:null,prev:r};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}const Vx={notify(){},get:()=>[]};function y6(e,t){let r,s=Vx,n=0,i=!1;function o(x){u();const p=s.subscribe(x);let b=!1;return()=>{b||(b=!0,p(),h())}}function l(){s.notify()}function c(){f.onStateChange&&f.onStateChange()}function d(){return i}function u(){n++,r||(r=e.subscribe(c),s=x6())}function h(){n--,r&&n===0&&(r(),r=void 0,s.clear(),s=Vx)}function m(){i||(i=!0,u())}function g(){i&&(i=!1,h())}const f={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:g,getListeners:()=>s};return f}const b6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v6=b6?j.useLayoutEffect:j.useEffect;function w6({store:e,context:t,children:r,serverState:s,stabilityCheck:n="once",noopCheck:i="once"}){const o=j.useMemo(()=>{const d=y6(e);return{store:e,subscription:d,getServerState:s?()=>s:void 0,stabilityCheck:n,noopCheck:i}},[e,s,n,i]),l=j.useMemo(()=>e.getState(),[e]);v6(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==e.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,l]);const c=t||Ea;return j.createElement(c.Provider,{value:o},r)}function zw(e=Ea){const t=e===Ea?Aw:S0(e);return function(){const{store:s}=t();return s}}const j6=zw();function k6(e=Ea){const t=e===Ea?j6:zw(e);return function(){return t().dispatch}}const Ue=k6();a6(JS.useSyncExternalStoreWithSelector);e6(_w.unstable_batchedUpdates);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Jo.apply(this,arguments)}var la;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(la||(la={}));const Hx="popstate";function N6(e){e===void 0&&(e={});function t(s,n){let{pathname:i,search:o,hash:l}=s.location;return Hf("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Wd(n)}return C6(t,r,null,e)}function Ze(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function S6(){return Math.random().toString(36).substr(2,8)}function Wx(e,t){return{usr:e.state,key:e.key,idx:t}}function Hf(e,t,r,s){return r===void 0&&(r=null),Jo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yi(t):t,{state:r,key:t&&t.key||s||S6()})}function Wd(e){let{pathname:t="/",search:r="",hash:s=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function yi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function C6(e,t,r,s){s===void 0&&(s={});let{window:n=document.defaultView,v5Compat:i=!1}=s,o=n.history,l=la.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(Jo({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=la.Pop;let p=u(),b=p==null?null:p-d;d=p,c&&c({action:l,location:x.location,delta:b})}function m(p,b){l=la.Push;let y=Hf(x.location,p,b);d=u()+1;let v=Wx(y,d),w=x.createHref(y);try{o.pushState(v,"",w)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;n.location.assign(w)}i&&c&&c({action:l,location:x.location,delta:1})}function g(p,b){l=la.Replace;let y=Hf(x.location,p,b);d=u();let v=Wx(y,d),w=x.createHref(y);o.replaceState(v,"",w),i&&c&&c({action:l,location:x.location,delta:0})}function f(p){let b=n.location.origin!=="null"?n.location.origin:n.location.href,y=typeof p=="string"?p:Wd(p);return y=y.replace(/ $/,"%20"),Ze(b,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,b)}let x={get action(){return l},get location(){return e(n,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Hx,h),c=p,()=>{n.removeEventListener(Hx,h),c=null}},createHref(p){return t(n,p)},createURL:f,encodeLocation(p){let b=f(p);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:g,go(p){return o.go(p)}};return x}var qx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(qx||(qx={}));function _6(e,t,r){return r===void 0&&(r="/"),E6(e,t,r)}function E6(e,t,r,s){let n=typeof t=="string"?yi(t):t,i=I0(n.pathname||"/",r);if(i==null)return null;let o=Uw(e);P6(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=B6(i);l=F6(o[c],d)}return l}function Uw(e,t,r,s){t===void 0&&(t=[]),r===void 0&&(r=[]),s===void 0&&(s="");let n=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ze(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=wa([s,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Uw(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:M6(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let c of Vw(i.path))n(i,o,c)}),t}function Vw(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let o=Vw(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),n&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function P6(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:D6(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}const T6=/^:[\w-]+$/,I6=3,R6=2,A6=1,O6=10,L6=-2,Kx=e=>e==="*";function M6(e,t){let r=e.split("/"),s=r.length;return r.some(Kx)&&(s+=L6),t&&(s+=R6),r.filter(n=>!Kx(n)).reduce((n,i)=>n+(T6.test(i)?I6:i===""?A6:O6),s)}function D6(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function F6(e,t,r){let{routesMeta:s}=e,n={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=$6({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h)return null;Object.assign(n,h.params),o.push({params:n,pathname:wa([i,h.pathname]),pathnameBase:W6(wa([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=wa([i,h.pathnameBase]))}return o}function $6(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=z6(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:s.reduce((d,u,h)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let x=l[h]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const f=l[h];return g&&!f?d[m]=void 0:d[m]=(f||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function z6(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Bw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function B6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function I0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}function U6(e,t){t===void 0&&(t="/");let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?yi(e):e;return{pathname:r?r.startsWith("/")?r:V6(r,t):t,search:q6(s),hash:K6(n)}}function V6(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function sm(e,t,r,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H6(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function R0(e,t){let r=H6(e);return t?r.map((s,n)=>n===r.length-1?s.pathname:s.pathnameBase):r.map(s=>s.pathnameBase)}function A0(e,t,r,s){s===void 0&&(s=!1);let n;typeof e=="string"?n=yi(e):(n=Jo({},e),Ze(!n.pathname||!n.pathname.includes("?"),sm("?","pathname","search",n)),Ze(!n.pathname||!n.pathname.includes("#"),sm("#","pathname","hash",n)),Ze(!n.search||!n.search.includes("#"),sm("#","search","hash",n)));let i=e===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!s&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;n.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=U6(n,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const wa=e=>e.join("/").replace(/\/\/+/g,"/"),W6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,K6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function G6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Hw=["post","put","patch","delete"];new Set(Hw);const Y6=["get",...Hw];new Set(Y6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zo(){return Zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Zo.apply(this,arguments)}const O0=j.createContext(null),Q6=j.createContext(null),La=j.createContext(null),rh=j.createContext(null),js=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Ww=j.createContext(null);function X6(e,t){let{relative:r}=t===void 0?{}:t;bi()||Ze(!1);let{basename:s,navigator:n}=j.useContext(La),{hash:i,pathname:o,search:l}=Gw(e,{relative:r}),c=o;return s!=="/"&&(c=o==="/"?s:wa([s,o])),n.createHref({pathname:c,search:l,hash:i})}function bi(){return j.useContext(rh)!=null}function tr(){return bi()||Ze(!1),j.useContext(rh).location}function qw(e){j.useContext(La).static||j.useLayoutEffect(e)}function gr(){let{isDataRoute:e}=j.useContext(js);return e?h3():J6()}function J6(){bi()||Ze(!1);let e=j.useContext(O0),{basename:t,future:r,navigator:s}=j.useContext(La),{matches:n}=j.useContext(js),{pathname:i}=tr(),o=JSON.stringify(R0(n,r.v7_relativeSplatPath)),l=j.useRef(!1);return qw(()=>{l.current=!0}),j.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let h=A0(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:wa([t,h.pathname])),(u.replace?s.replace:s.push)(h,u.state,u)},[t,s,o,i,e])}const Z6=j.createContext(null);function e3(e){let t=j.useContext(js).outlet;return t&&j.createElement(Z6.Provider,{value:e},t)}function Kw(){let{matches:e}=j.useContext(js),t=e[e.length-1];return t?t.params:{}}function Gw(e,t){let{relative:r}=t===void 0?{}:t,{future:s}=j.useContext(La),{matches:n}=j.useContext(js),{pathname:i}=tr(),o=JSON.stringify(R0(n,s.v7_relativeSplatPath));return j.useMemo(()=>A0(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function t3(e,t){return r3(e,t)}function r3(e,t,r,s){bi()||Ze(!1);let{navigator:n}=j.useContext(La),{matches:i}=j.useContext(js),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=tr(),u;if(t){var h;let p=typeof t=="string"?yi(t):t;c==="/"||(h=p.pathname)!=null&&h.startsWith(c)||Ze(!1),u=p}else u=d;let m=u.pathname||"/",g=m;if(c!=="/"){let p=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(p.length).join("/")}let f=_6(e,{pathname:g}),x=o3(f&&f.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:wa([c,n.encodeLocation?n.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:wa([c,n.encodeLocation?n.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,r,s);return t&&x?j.createElement(rh.Provider,{value:{location:Zo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:la.Pop}},x):x}function s3(){let e=u3(),t=G6(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),r?j.createElement("pre",{style:n},r):null,null)}const a3=j.createElement(s3,null);class n3 extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?j.createElement(js.Provider,{value:this.props.routeContext},j.createElement(Ww.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function i3(e){let{routeContext:t,match:r,children:s}=e,n=j.useContext(O0);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),j.createElement(js.Provider,{value:t},s)}function o3(e,t,r,s){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),s===void 0&&(s=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(n=r)==null?void 0:n.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||Ze(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&s&&s.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:m,errors:g}=r,f=h.route.loader&&m[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||f){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,m)=>{let g,f=!1,x=null,p=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,x=h.route.errorElement||a3,c&&(d<0&&m===0?(m3("route-fallback"),f=!0,p=null):d===m&&(f=!0,p=h.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,m+1)),y=()=>{let v;return g?v=x:f?v=p:h.route.Component?v=j.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=u,j.createElement(i3,{match:h,routeContext:{outlet:u,matches:b,isDataRoute:r!=null},children:v})};return r&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?j.createElement(n3,{location:r.location,revalidation:r.revalidation,component:x,error:g,children:y(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):y()},null)}var Yw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Yw||{}),Qw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Qw||{});function l3(e){let t=j.useContext(O0);return t||Ze(!1),t}function c3(e){let t=j.useContext(Q6);return t||Ze(!1),t}function d3(e){let t=j.useContext(js);return t||Ze(!1),t}function Xw(e){let t=d3(),r=t.matches[t.matches.length-1];return r.route.id||Ze(!1),r.route.id}function u3(){var e;let t=j.useContext(Ww),r=c3(),s=Xw();return t!==void 0?t:(e=r.errors)==null?void 0:e[s]}function h3(){let{router:e}=l3(Yw.UseNavigateStable),t=Xw(Qw.UseNavigateStable),r=j.useRef(!1);return qw(()=>{r.current=!0}),j.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,Zo({fromRouteId:t},i)))},[e,t])}const Gx={};function m3(e,t,r){Gx[e]||(Gx[e]=!0)}function f3(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function el(e){let{to:t,replace:r,state:s,relative:n}=e;bi()||Ze(!1);let{future:i,static:o}=j.useContext(La),{matches:l}=j.useContext(js),{pathname:c}=tr(),d=gr(),u=A0(t,R0(l,i.v7_relativeSplatPath),c,n==="path"),h=JSON.stringify(u);return j.useEffect(()=>d(JSON.parse(h),{replace:r,state:s,relative:n}),[d,h,n,r,s]),null}function g3(e){return e3(e.context)}function pe(e){Ze(!1)}function p3(e){let{basename:t="/",children:r=null,location:s,navigationType:n=la.Pop,navigator:i,static:o=!1,future:l}=e;bi()&&Ze(!1);let c=t.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:i,static:o,future:Zo({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=yi(s));let{pathname:u="/",search:h="",hash:m="",state:g=null,key:f="default"}=s,x=j.useMemo(()=>{let p=I0(u,c);return p==null?null:{location:{pathname:p,search:h,hash:m,state:g,key:f},navigationType:n}},[c,u,h,m,g,f,n]);return x==null?null:j.createElement(La.Provider,{value:d},j.createElement(rh.Provider,{children:r,value:x}))}function x3(e){let{children:t,location:r}=e;return t3(Wf(t),r)}new Promise(()=>{});function Wf(e,t){t===void 0&&(t=[]);let r=[];return j.Children.forEach(e,(s,n)=>{if(!j.isValidElement(s))return;let i=[...t,n];if(s.type===j.Fragment){r.push.apply(r,Wf(s.props.children,i));return}s.type!==pe&&Ze(!1),!s.props.index||!s.props.children||Ze(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Wf(s.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},qf.apply(this,arguments)}function y3(e,t){if(e==null)return{};var r={},s=Object.keys(e),n,i;for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&(r[n]=e[n]);return r}function b3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function v3(e,t){return e.button===0&&(!t||t==="_self")&&!b3(e)}function Kf(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function w3(e,t){let r=Kf(e);return t&&t.forEach((s,n)=>{r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)})}),r}const j3=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],k3="6";try{window.__reactRouterVersion=k3}catch{}const N3="startTransition",Yx=k2[N3];function S3(e){let{basename:t,children:r,future:s,window:n}=e,i=j.useRef();i.current==null&&(i.current=N6({window:n,v5Compat:!0}));let o=i.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},u=j.useCallback(h=>{d&&Yx?Yx(()=>c(h)):c(h)},[c,d]);return j.useLayoutEffect(()=>o.listen(u),[o,u]),j.useEffect(()=>f3(s),[s]),j.createElement(p3,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:s})}const C3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,he=j.forwardRef(function(t,r){let{onClick:s,relative:n,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h}=t,m=y3(t,j3),{basename:g}=j.useContext(La),f,x=!1;if(typeof d=="string"&&_3.test(d)&&(f=d,C3))try{let v=new URL(window.location.href),w=d.startsWith("//")?new URL(v.protocol+d):new URL(d),k=I0(w.pathname,g);w.origin===v.origin&&k!=null?d=k+w.search+w.hash:x=!0}catch{}let p=X6(d,{relative:n}),b=E3(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:h});function y(v){s&&s(v),v.defaultPrevented||b(v)}return j.createElement("a",qf({},m,{href:f||p,onClick:x||i?s:y,ref:r,target:c}))});var Qx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Qx||(Qx={}));var Xx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xx||(Xx={}));function E3(e,t){let{target:r,replace:s,state:n,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=gr(),d=tr(),u=Gw(e,{relative:o});return j.useCallback(h=>{if(v3(h,r)){h.preventDefault();let m=s!==void 0?s:Wd(d)===Wd(u);c(e,{replace:m,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,s,n,r,e,i,o,l])}function P3(e){let t=j.useRef(Kf(e)),r=j.useRef(!1),s=tr(),n=j.useMemo(()=>w3(s.search,r.current?null:t.current),[s.search]),i=gr(),o=j.useCallback((l,c)=>{const d=Kf(typeof l=="function"?l(n):l);r.current=!0,i("?"+d,c)},[i,n]);return[n,o]}let T3={data:""},I3=e=>{if(typeof window=="object"){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||T3},R3=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,A3=/\/\*[^]*?\*\/|  +/g,Jx=/\n+/g,sa=(e,t)=>{let r="",s="",n="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":s+=i[1]=="f"?sa(o,i):i+"{"+sa(o,i[1]=="k"?"":t)+"}":typeof o=="object"?s+=sa(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=sa.p?sa.p(i,o):i+":"+o+";")}return r+(t&&n?t+"{"+n+"}":n)+s},Ss={},Jw=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Jw(e[r]);return t}return e},O3=(e,t,r,s,n)=>{let i=Jw(e),o=Ss[i]||(Ss[i]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(i));if(!Ss[o]){let c=i!==e?e:(d=>{let u,h,m=[{}];for(;u=R3.exec(d.replace(A3,""));)u[4]?m.shift():u[3]?(h=u[3].replace(Jx," ").trim(),m.unshift(m[0][h]=m[0][h]||{})):m[0][u[1]]=u[2].replace(Jx," ").trim();return m[0]})(e);Ss[o]=sa(n?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Ss.g?Ss.g:null;return r&&(Ss.g=Ss[o]),((c,d,u,h)=>{h?d.data=d.data.replace(h,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Ss[o],t,s,l),o},L3=(e,t,r)=>e.reduce((s,n,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":sa(l,""):l===!1?"":l}return s+n+(o??"")},"");function sh(e){let t=this||{},r=e.call?e(t.p):e;return O3(r.unshift?r.raw?L3(r,[].slice.call(arguments,1),t.p):r.reduce((s,n)=>Object.assign(s,n&&n.call?n(t.p):n),{}):r,I3(t.target),t.g,t.o,t.k)}let Zw,Gf,Yf;sh.bind({g:1});let Hs=sh.bind({k:1});function M3(e,t,r,s){sa.p=t,Zw=e,Gf=r,Yf=s}function Ma(e,t){let r=this||{};return function(){let s=arguments;function n(i,o){let l=Object.assign({},i),c=l.className||n.className;r.p=Object.assign({theme:Gf&&Gf()},l),r.o=/ *go\d+/.test(c),l.className=sh.apply(r,s)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),Yf&&d[0]&&Yf(l),Zw(d,l)}return n}}var D3=e=>typeof e=="function",qd=(e,t)=>D3(e)?e(t):e,F3=(()=>{let e=0;return()=>(++e).toString()})(),ej=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),$3=20,L0="default",tj=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:s}=t;return tj(e,{type:e.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(o=>o.id===n||n===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Pc=[],rj={toasts:[],pausedAt:void 0,settings:{toastLimit:$3}},is={},sj=(e,t=L0)=>{is[t]=tj(is[t]||rj,e),Pc.forEach(([r,s])=>{r===t&&s(is[t])})},aj=e=>Object.keys(is).forEach(t=>sj(e,t)),z3=e=>Object.keys(is).find(t=>is[t].toasts.some(r=>r.id===e)),ah=(e=L0)=>t=>{sj(t,e)},B3={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},U3=(e={},t=L0)=>{let[r,s]=j.useState(is[t]||rj),n=j.useRef(is[t]);j.useEffect(()=>(n.current!==is[t]&&s(is[t]),Pc.push([t,s]),()=>{let o=Pc.findIndex(([l])=>l===t);o>-1&&Pc.splice(o,1)}),[t]);let i=r.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||B3[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...r,toasts:i}},V3=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||F3()}),bl=e=>(t,r)=>{let s=V3(t,e,r);return ah(s.toasterId||z3(s.id))({type:2,toast:s}),s.id},_e=(e,t)=>bl("blank")(e,t);_e.error=bl("error");_e.success=bl("success");_e.loading=bl("loading");_e.custom=bl("custom");_e.dismiss=(e,t)=>{let r={type:3,toastId:e};t?ah(t)(r):aj(r)};_e.dismissAll=e=>_e.dismiss(void 0,e);_e.remove=(e,t)=>{let r={type:4,toastId:e};t?ah(t)(r):aj(r)};_e.removeAll=e=>_e.remove(void 0,e);_e.promise=(e,t,r)=>{let s=_e.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(n=>{let i=t.success?qd(t.success,n):void 0;return i?_e.success(i,{id:s,...r,...r==null?void 0:r.success}):_e.dismiss(s),n}).catch(n=>{let i=t.error?qd(t.error,n):void 0;i?_e.error(i,{id:s,...r,...r==null?void 0:r.error}):_e.dismiss(s)}),e};var H3=1e3,W3=(e,t="default")=>{let{toasts:r,pausedAt:s}=U3(e,t),n=j.useRef(new Map).current,i=j.useCallback((h,m=H3)=>{if(n.has(h))return;let g=setTimeout(()=>{n.delete(h),o({type:4,toastId:h})},m);n.set(h,g)},[]);j.useEffect(()=>{if(s)return;let h=Date.now(),m=r.map(g=>{if(g.duration===1/0)return;let f=(g.duration||0)+g.pauseDuration-(h-g.createdAt);if(f<0){g.visible&&_e.dismiss(g.id);return}return setTimeout(()=>_e.dismiss(g.id,t),f)});return()=>{m.forEach(g=>g&&clearTimeout(g))}},[r,s,t]);let o=j.useCallback(ah(t),[t]),l=j.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=j.useCallback((h,m)=>{o({type:1,toast:{id:h,height:m}})},[o]),d=j.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),u=j.useCallback((h,m)=>{let{reverseOrder:g=!1,gutter:f=8,defaultPosition:x}=m||{},p=r.filter(v=>(v.position||x)===(h.position||x)&&v.height),b=p.findIndex(v=>v.id===h.id),y=p.filter((v,w)=>w<b&&v.visible).length;return p.filter(v=>v.visible).slice(...g?[y+1]:[0,y]).reduce((v,w)=>v+(w.height||0)+f,0)},[r]);return j.useEffect(()=>{r.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let m=n.get(h.id);m&&(clearTimeout(m),n.delete(h.id))}})},[r,i]),{toasts:r,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},q3=Hs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,K3=Hs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,G3=Hs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Y3=Ma("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${q3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${K3} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${G3} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Q3=Hs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,X3=Ma("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Q3} 1s linear infinite;
`,J3=Hs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Z3=Hs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,e5=Ma("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${J3} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Z3} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,t5=Ma("div")`
  position: absolute;
`,r5=Ma("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,s5=Hs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,a5=Ma("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${s5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,n5=({toast:e})=>{let{icon:t,type:r,iconTheme:s}=e;return t!==void 0?typeof t=="string"?j.createElement(a5,null,t):t:r==="blank"?null:j.createElement(r5,null,j.createElement(X3,{...s}),r!=="loading"&&j.createElement(t5,null,r==="error"?j.createElement(Y3,{...s}):j.createElement(e5,{...s})))},i5=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,o5=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,l5="0%{opacity:0;} 100%{opacity:1;}",c5="0%{opacity:1;} 100%{opacity:0;}",d5=Ma("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,u5=Ma("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,h5=(e,t)=>{let r=e.includes("top")?1:-1,[s,n]=ej()?[l5,c5]:[i5(r),o5(r)];return{animation:t?`${Hs(s)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Hs(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},m5=j.memo(({toast:e,position:t,style:r,children:s})=>{let n=e.height?h5(e.position||t||"top-center",e.visible):{opacity:0},i=j.createElement(n5,{toast:e}),o=j.createElement(u5,{...e.ariaProps},qd(e.message,e));return j.createElement(d5,{className:e.className,style:{...n,...r,...e.style}},typeof s=="function"?s({icon:i,message:o}):j.createElement(j.Fragment,null,i,o))});M3(j.createElement);var f5=({id:e,className:t,style:r,onHeightUpdate:s,children:n})=>{let i=j.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;s(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return j.createElement("div",{ref:i,className:t,style:r},n)},g5=(e,t)=>{let r=e.includes("top"),s=r?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:ej()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...s,...n}},p5=sh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Ql=16,x5=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:s,children:n,toasterId:i,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=W3(r,i);return j.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Ql,left:Ql,right:Ql,bottom:Ql,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let h=u.position||t,m=d.calculateOffset(u,{reverseOrder:e,gutter:s,defaultPosition:t}),g=g5(h,m);return j.createElement(f5,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?p5:"",style:g},u.type==="custom"?qd(u.message,u):n?n(u):j.createElement(m5,{toast:u,position:h}))}))},D=_e;const nj=j.createContext(void 0),ij=({children:e})=>{const[t]=j.useState("is"),[r,s]=j.useState({}),[n,i]=j.useState(!1),o=j.useCallback(u=>r[u]?r[u]:(console.error(`Translation not found for key: ${u}`),u),[r]),l=j.useCallback(async()=>{i(!0);try{const u=await fetch("/api/translations");if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const h=await u.json();if(h.success&&Array.isArray(h.data)){const m=h.data.reduce((g,f)=>(g[f.key]=f.value,g),{});s(m)}else console.error("Failed to load translations: Invalid response format",h)}catch(u){console.error("Error loading translations:",u)}finally{i(!1)}},[]);j.useEffect(()=>{l()},[l]);const c=j.useCallback(async()=>{await l()},[l]),d={currentLanguage:t,t:o,isLoading:n,refreshTranslations:c};return a.jsx(nj.Provider,{value:d,children:e})},Ut=()=>{const e=j.useContext(nj);if(e===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return e};function zr(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(n){return"'"+n+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Pa(e){return!!e&&!!e[He]}function Ws(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var s=Object.getPrototypeOf(r);if(s===null)return!0;var n=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===C5}(e)||Array.isArray(e)||!!e[ny]||!!(!((t=e.constructor)===null||t===void 0)&&t[ny])||M0(e)||D0(e))}function un(e,t,r){r===void 0&&(r=!1),vi(e)===0?(r?Object.keys:Gn)(e).forEach(function(s){r&&typeof s=="symbol"||t(s,e[s],e)}):e.forEach(function(s,n){return t(n,s,e)})}function vi(e){var t=e[He];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:M0(e)?2:D0(e)?3:0}function Kn(e,t){return vi(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function y5(e,t){return vi(e)===2?e.get(t):e[t]}function oj(e,t,r){var s=vi(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function lj(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function M0(e){return N5&&e instanceof Map}function D0(e){return S5&&e instanceof Set}function Ha(e){return e.o||e.t}function F0(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=dj(e);delete t[He];for(var r=Gn(t),s=0;s<r.length;s++){var n=r[s],i=t[n];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[n]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),t)}function $0(e,t){return t===void 0&&(t=!1),z0(e)||Pa(e)||!Ws(e)||(vi(e)>1&&(e.set=e.add=e.clear=e.delete=b5),Object.freeze(e),t&&un(e,function(r,s){return $0(s,!0)},!0)),e}function b5(){zr(2)}function z0(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function us(e){var t=Zf[e];return t||zr(18,e),t}function v5(e,t){Zf[e]||(Zf[e]=t)}function Qf(){return tl}function am(e,t){t&&(us("Patches"),e.u=[],e.s=[],e.v=t)}function Kd(e){Xf(e),e.p.forEach(w5),e.p=null}function Xf(e){e===tl&&(tl=e.l)}function Zx(e){return tl={p:[],l:tl,h:e,m:!0,_:0}}function w5(e){var t=e[He];t.i===0||t.i===1?t.j():t.g=!0}function nm(e,t){t._=t.p.length;var r=t.p[0],s=e!==void 0&&e!==r;return t.h.O||us("ES5").S(t,e,s),s?(r[He].P&&(Kd(t),zr(4)),Ws(e)&&(e=Gd(t,e),t.l||Yd(t,e)),t.u&&us("Patches").M(r[He].t,e,t.u,t.s)):e=Gd(t,r,[]),Kd(t),t.u&&t.v(t.u,t.s),e!==cj?e:void 0}function Gd(e,t,r){if(z0(t))return t;var s=t[He];if(!s)return un(t,function(l,c){return ey(e,s,t,l,c,r)},!0),t;if(s.A!==e)return t;if(!s.P)return Yd(e,s.t,!0),s.t;if(!s.I){s.I=!0,s.A._--;var n=s.i===4||s.i===5?s.o=F0(s.k):s.o,i=n,o=!1;s.i===3&&(i=new Set(n),n.clear(),o=!0),un(i,function(l,c){return ey(e,s,n,l,c,r,o)}),Yd(e,n,!1),r&&e.u&&us("Patches").N(s,r,e.u,e.s)}return s.o}function ey(e,t,r,s,n,i,o){if(Pa(n)){var l=Gd(e,n,i&&t&&t.i!==3&&!Kn(t.R,s)?i.concat(s):void 0);if(oj(r,s,l),!Pa(l))return;e.m=!1}else o&&r.add(n);if(Ws(n)&&!z0(n)){if(!e.h.D&&e._<1)return;Gd(e,n),t&&t.A.l||Yd(e,n)}}function Yd(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&$0(t,r)}function im(e,t){var r=e[He];return(r?Ha(r):e)[t]}function ty(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=Object.getPrototypeOf(r)}}function aa(e){e.P||(e.P=!0,e.l&&aa(e.l))}function om(e){e.o||(e.o=F0(e.t))}function Jf(e,t,r){var s=M0(t)?us("MapSet").F(t,r):D0(t)?us("MapSet").T(t,r):e.O?function(n,i){var o=Array.isArray(n),l={i:o?1:0,A:i?i.A:Qf(),P:!1,I:!1,R:{},l:i,t:n,k:null,o:null,j:null,C:!1},c=l,d=rl;o&&(c=[l],d=Gi);var u=Proxy.revocable(c,d),h=u.revoke,m=u.proxy;return l.k=m,l.j=h,m}(t,r):us("ES5").J(t,r);return(r?r.A:Qf()).p.push(s),s}function j5(e){return Pa(e)||zr(22,e),function t(r){if(!Ws(r))return r;var s,n=r[He],i=vi(r);if(n){if(!n.P&&(n.i<4||!us("ES5").K(n)))return n.t;n.I=!0,s=ry(r,i),n.I=!1}else s=ry(r,i);return un(s,function(o,l){n&&y5(n.t,o)===l||oj(s,o,t(l))}),i===3?new Set(s):s}(e)}function ry(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return F0(e)}function k5(){function e(i,o){var l=n[i];return l?l.enumerable=o:n[i]=l={configurable:!0,enumerable:o,get:function(){var c=this[He];return rl.get(c,i)},set:function(c){var d=this[He];rl.set(d,i,c)}},l}function t(i){for(var o=i.length-1;o>=0;o--){var l=i[o][He];if(!l.P)switch(l.i){case 5:s(l)&&aa(l);break;case 4:r(l)&&aa(l)}}}function r(i){for(var o=i.t,l=i.k,c=Gn(l),d=c.length-1;d>=0;d--){var u=c[d];if(u!==He){var h=o[u];if(h===void 0&&!Kn(o,u))return!0;var m=l[u],g=m&&m[He];if(g?g.t!==h:!lj(m,h))return!0}}var f=!!o[He];return c.length!==Gn(o).length+(f?0:1)}function s(i){var o=i.k;if(o.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(o,o.length-1);if(l&&!l.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var n={};v5("ES5",{J:function(i,o){var l=Array.isArray(i),c=function(u,h){if(u){for(var m=Array(h.length),g=0;g<h.length;g++)Object.defineProperty(m,""+g,e(g,!0));return m}var f=dj(h);delete f[He];for(var x=Gn(f),p=0;p<x.length;p++){var b=x[p];f[b]=e(b,u||!!f[b].enumerable)}return Object.create(Object.getPrototypeOf(h),f)}(l,i),d={i:l?5:4,A:o?o.A:Qf(),P:!1,I:!1,R:{},l:o,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,He,{value:d,writable:!0}),c},S:function(i,o,l){l?Pa(o)&&o[He].A===i&&t(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var u=d[He];if(u){var h=u.t,m=u.k,g=u.R,f=u.i;if(f===4)un(m,function(v){v!==He&&(h[v]!==void 0||Kn(h,v)?g[v]||c(m[v]):(g[v]=!0,aa(u)))}),un(h,function(v){m[v]!==void 0||Kn(m,v)||(g[v]=!1,aa(u))});else if(f===5){if(s(u)&&(aa(u),g.length=!0),m.length<h.length)for(var x=m.length;x<h.length;x++)g[x]=!1;else for(var p=h.length;p<m.length;p++)g[p]=!0;for(var b=Math.min(m.length,h.length),y=0;y<b;y++)m.hasOwnProperty(y)||(g[y]=!0),g[y]===void 0&&c(m[y])}}}}(i.p[0]),t(i.p))},K:function(i){return i.i===4?r(i):s(i)}})}var sy,tl,B0=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",N5=typeof Map<"u",S5=typeof Set<"u",ay=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",cj=B0?Symbol.for("immer-nothing"):((sy={})["immer-nothing"]=!0,sy),ny=B0?Symbol.for("immer-draftable"):"__$immer_draftable",He=B0?Symbol.for("immer-state"):"__$immer_state",C5=""+Object.prototype.constructor,Gn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,dj=Object.getOwnPropertyDescriptors||function(e){var t={};return Gn(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},Zf={},rl={get:function(e,t){if(t===He)return e;var r=Ha(e);if(!Kn(r,t))return function(n,i,o){var l,c=ty(i,o);return c?"value"in c?c.value:(l=c.get)===null||l===void 0?void 0:l.call(n.k):void 0}(e,r,t);var s=r[t];return e.I||!Ws(s)?s:s===im(e.t,t)?(om(e),e.o[t]=Jf(e.A.h,s,e)):s},has:function(e,t){return t in Ha(e)},ownKeys:function(e){return Reflect.ownKeys(Ha(e))},set:function(e,t,r){var s=ty(Ha(e),t);if(s!=null&&s.set)return s.set.call(e.k,r),!0;if(!e.P){var n=im(Ha(e),t),i=n==null?void 0:n[He];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(lj(r,n)&&(r!==void 0||Kn(e.t,t)))return!0;om(e),aa(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return im(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,om(e),aa(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Ha(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty:function(){zr(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){zr(12)}},Gi={};un(rl,function(e,t){Gi[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Gi.deleteProperty=function(e,t){return Gi.set.call(this,e,t,void 0)},Gi.set=function(e,t,r){return rl.set.call(this,e[0],t,r,e[0])};var _5=function(){function e(r){var s=this;this.O=ay,this.D=!0,this.produce=function(n,i,o){if(typeof n=="function"&&typeof i!="function"){var l=i;i=n;var c=s;return function(x){var p=this;x===void 0&&(x=l);for(var b=arguments.length,y=Array(b>1?b-1:0),v=1;v<b;v++)y[v-1]=arguments[v];return c.produce(x,function(w){var k;return(k=i).call.apply(k,[p,w].concat(y))})}}var d;if(typeof i!="function"&&zr(6),o!==void 0&&typeof o!="function"&&zr(7),Ws(n)){var u=Zx(s),h=Jf(s,n,void 0),m=!0;try{d=i(h),m=!1}finally{m?Kd(u):Xf(u)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(x){return am(u,o),nm(x,u)},function(x){throw Kd(u),x}):(am(u,o),nm(d,u))}if(!n||typeof n!="object"){if((d=i(n))===void 0&&(d=n),d===cj&&(d=void 0),s.D&&$0(d,!0),o){var g=[],f=[];us("Patches").M(n,d,g,f),o(g,f)}return d}zr(21,n)},this.produceWithPatches=function(n,i){if(typeof n=="function")return function(d){for(var u=arguments.length,h=Array(u>1?u-1:0),m=1;m<u;m++)h[m-1]=arguments[m];return s.produceWithPatches(d,function(g){return n.apply(void 0,[g].concat(h))})};var o,l,c=s.produce(n,i,function(d,u){o=d,l=u});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,o,l]}):[c,o,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Ws(r)||zr(8),Pa(r)&&(r=j5(r));var s=Zx(this),n=Jf(this,r,void 0);return n[He].C=!0,Xf(s),n},t.finishDraft=function(r,s){var n=r&&r[He],i=n.A;return am(i,s),nm(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!ay&&zr(20),this.O=r},t.applyPatches=function(r,s){var n;for(n=s.length-1;n>=0;n--){var i=s[n];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}n>-1&&(s=s.slice(n+1));var o=us("Patches").$;return Pa(r)?o(r,s):this.produce(r,function(l){return o(l,s)})},e}(),dr=new _5,uj=dr.produce;dr.produceWithPatches.bind(dr);dr.setAutoFreeze.bind(dr);dr.setUseProxies.bind(dr);dr.applyPatches.bind(dr);dr.createDraft.bind(dr);dr.finishDraft.bind(dr);function sl(e){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sl(e)}function E5(e,t){if(sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(sl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P5(e){var t=E5(e,"string");return sl(t)=="symbol"?t:t+""}function T5(e,t,r){return(t=P5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function oy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iy(Object(r),!0).forEach(function(s){T5(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iy(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Ct(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var ly=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),lm=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qd={INIT:"@@redux/INIT"+lm(),REPLACE:"@@redux/REPLACE"+lm(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+lm()}};function I5(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function hj(e,t,r){var s;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ct(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ct(1));return r(hj)(e,t)}if(typeof e!="function")throw new Error(Ct(2));var n=e,i=t,o=[],l=o,c=!1;function d(){l===o&&(l=o.slice())}function u(){if(c)throw new Error(Ct(3));return i}function h(x){if(typeof x!="function")throw new Error(Ct(4));if(c)throw new Error(Ct(5));var p=!0;return d(),l.push(x),function(){if(p){if(c)throw new Error(Ct(6));p=!1,d();var y=l.indexOf(x);l.splice(y,1),o=null}}}function m(x){if(!I5(x))throw new Error(Ct(7));if(typeof x.type>"u")throw new Error(Ct(8));if(c)throw new Error(Ct(9));try{c=!0,i=n(i,x)}finally{c=!1}for(var p=o=l,b=0;b<p.length;b++){var y=p[b];y()}return x}function g(x){if(typeof x!="function")throw new Error(Ct(10));n=x,m({type:Qd.REPLACE})}function f(){var x,p=h;return x={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(Ct(11));function v(){y.next&&y.next(u())}v();var w=p(v);return{unsubscribe:w}}},x[ly]=function(){return this},x}return m({type:Qd.INIT}),s={dispatch:m,subscribe:h,getState:u,replaceReducer:g},s[ly]=f,s}function R5(e){Object.keys(e).forEach(function(t){var r=e[t],s=r(void 0,{type:Qd.INIT});if(typeof s>"u")throw new Error(Ct(12));if(typeof r(void 0,{type:Qd.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ct(13))})}function A5(e){for(var t=Object.keys(e),r={},s=0;s<t.length;s++){var n=t[s];typeof e[n]=="function"&&(r[n]=e[n])}var i=Object.keys(r),o;try{R5(r)}catch(l){o=l}return function(c,d){if(c===void 0&&(c={}),o)throw o;for(var u=!1,h={},m=0;m<i.length;m++){var g=i[m],f=r[g],x=c[g],p=f(x,d);if(typeof p>"u")throw d&&d.type,new Error(Ct(14));h[g]=p,u=u||p!==x}return u=u||i.length!==Object.keys(c).length,u?h:c}}function Xd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(s){return s}:t.length===1?t[0]:t.reduce(function(s,n){return function(){return s(n.apply(void 0,arguments))}})}function O5(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return function(){var n=s.apply(void 0,arguments),i=function(){throw new Error(Ct(15))},o={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=t.map(function(c){return c(o)});return i=Xd.apply(void 0,l)(n.dispatch),oy(oy({},n),{},{dispatch:i})}}}function mj(e){var t=function(s){var n=s.dispatch,i=s.getState;return function(o){return function(l){return typeof l=="function"?l(n,i,e):o(l)}}};return t}var eg=mj();eg.withExtraArgument=mj;var fj=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function s(){this.constructor=t}t.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}(),L5=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(s)throw new TypeError("Generator is already executing.");for(;r;)try{if(s=1,n&&(i=d[0]&2?n.return:d[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,d[1])).done)return i;switch(n=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,n=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],n=0}finally{s=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},li=function(e,t){for(var r=0,s=t.length,n=e.length;r<s;r++,n++)e[n]=t[r];return e},M5=Object.defineProperty,D5=Object.defineProperties,F5=Object.getOwnPropertyDescriptors,cy=Object.getOwnPropertySymbols,$5=Object.prototype.hasOwnProperty,z5=Object.prototype.propertyIsEnumerable,dy=function(e,t,r){return t in e?M5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},ja=function(e,t){for(var r in t||(t={}))$5.call(t,r)&&dy(e,r,t[r]);if(cy)for(var s=0,n=cy(t);s<n.length;s++){var r=n[s];z5.call(t,r)&&dy(e,r,t[r])}return e},cm=function(e,t){return D5(e,F5(t))},B5=function(e,t,r){return new Promise(function(s,n){var i=function(c){try{l(r.next(c))}catch(d){n(d)}},o=function(c){try{l(r.throw(c))}catch(d){n(d)}},l=function(c){return c.done?s(c.value):Promise.resolve(c.value).then(i,o)};l((r=r.apply(e,t)).next())})},U5=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Xd:Xd.apply(null,arguments)};function V5(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}function ka(e,t){function r(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];if(t){var i=t.apply(void 0,s);if(!i)throw new Error("prepareAction did not return an object");return ja(ja({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:s[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(s){return s.type===e},r}var H5=function(e){fj(t,e);function t(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,li([void 0],r[0].concat(this)))):new(t.bind.apply(t,li([void 0],r.concat(this))))},t}(Array),W5=function(e){fj(t,e);function t(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var n=e.apply(this,r)||this;return Object.setPrototypeOf(n,t.prototype),n}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,li([void 0],r[0].concat(this)))):new(t.bind.apply(t,li([void 0],r.concat(this))))},t}(Array);function tg(e){return Ws(e)?uj(e,function(){}):e}function q5(e){return typeof e=="boolean"}function K5(){return function(t){return G5(t)}}function G5(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var s=new H5;return r&&(q5(r)?s.push(eg):s.push(eg.withExtraArgument(r.extraArgument))),s}function Y5(e){var t=K5(),r=e||{},s=r.reducer,n=s===void 0?void 0:s,i=r.middleware,o=i===void 0?t():i,l=r.devTools,c=l===void 0?!0:l,d=r.preloadedState,u=d===void 0?void 0:d,h=r.enhancers,m=h===void 0?void 0:h,g;if(typeof n=="function")g=n;else if(V5(n))g=A5(n);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var f=o;typeof f=="function"&&(f=f(t));var x=O5.apply(void 0,f),p=Xd;c&&(p=U5(ja({trace:!1},typeof c=="object"&&c)));var b=new W5(x),y=b;Array.isArray(m)?y=li([x],m):typeof m=="function"&&(y=m(b));var v=p.apply(void 0,y);return hj(g,u,v)}function gj(e){var t={},r=[],s,n={addCase:function(i,o){var l=typeof i=="string"?i:i.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[l]=o,n},addMatcher:function(i,o){return r.push({matcher:i,reducer:o}),n},addDefaultCase:function(i){return s=i,n}};return e(n),[t,r,s]}function Q5(e){return typeof e=="function"}function X5(e,t,r,s){r===void 0&&(r=[]);var n=typeof t=="function"?gj(t):[t,r,s],i=n[0],o=n[1],l=n[2],c;if(Q5(e))c=function(){return tg(e())};else{var d=tg(e);c=function(){return d}}function u(h,m){h===void 0&&(h=c());var g=li([i[m.type]],o.filter(function(f){var x=f.matcher;return x(m)}).map(function(f){var x=f.reducer;return x}));return g.filter(function(f){return!!f}).length===0&&(g=[l]),g.reduce(function(f,x){if(x)if(Pa(f)){var p=f,b=x(p,m);return b===void 0?f:b}else{if(Ws(f))return uj(f,function(y){return x(y,m)});var b=x(f,m);if(b===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return f},h)}return u.getInitialState=c,u}function J5(e,t){return e+"/"+t}function rr(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var r=typeof e.initialState=="function"?e.initialState:tg(e.initialState),s=e.reducers||{},n=Object.keys(s),i={},o={},l={};n.forEach(function(u){var h=s[u],m=J5(t,u),g,f;"reducer"in h?(g=h.reducer,f=h.prepare):g=h,i[u]=g,o[m]=g,l[u]=f?ka(m,f):ka(m)});function c(){var u=typeof e.extraReducers=="function"?gj(e.extraReducers):[e.extraReducers],h=u[0],m=h===void 0?{}:h,g=u[1],f=g===void 0?[]:g,x=u[2],p=x===void 0?void 0:x,b=ja(ja({},m),o);return X5(r,function(y){for(var v in b)y.addCase(v,b[v]);for(var w=0,k=f;w<k.length;w++){var P=k[w];y.addMatcher(P.matcher,P.reducer)}p&&y.addDefaultCase(p)})}var d;return{name:t,reducer:function(u,h){return d||(d=c()),d(u,h)},actions:l,caseReducers:i,getInitialState:function(){return d||(d=c()),d.getInitialState()}}}var Z5="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",eC=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=Z5[Math.random()*64|0];return t},tC=["name","message","stack","code"],dm=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),uy=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),rC=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,s=tC;r<s.length;r++){var n=s[r];typeof e[n]=="string"&&(t[n]=e[n])}return t}return{message:String(e)}},se=function(){function e(t,r,s){var n=ka(t+"/fulfilled",function(d,u,h,m){return{payload:d,meta:cm(ja({},m||{}),{arg:h,requestId:u,requestStatus:"fulfilled"})}}),i=ka(t+"/pending",function(d,u,h){return{payload:void 0,meta:cm(ja({},h||{}),{arg:u,requestId:d,requestStatus:"pending"})}}),o=ka(t+"/rejected",function(d,u,h,m,g){return{payload:m,error:(s&&s.serializeError||rC)(d||"Rejected"),meta:cm(ja({},g||{}),{arg:h,requestId:u,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function c(d){return function(u,h,m){var g=s!=null&&s.idGenerator?s.idGenerator(d):eC(),f=new l,x;function p(y){x=y,f.abort()}var b=function(){return B5(this,null,function(){var y,v,w,k,P,C,N;return L5(this,function(S){switch(S.label){case 0:return S.trys.push([0,4,,5]),k=(y=s==null?void 0:s.condition)==null?void 0:y.call(s,d,{getState:h,extra:m}),aC(k)?[4,k]:[3,2];case 1:k=S.sent(),S.label=2;case 2:if(k===!1||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return P=new Promise(function(R,F){return f.signal.addEventListener("abort",function(){return F({name:"AbortError",message:x||"Aborted"})})}),u(i(g,d,(v=s==null?void 0:s.getPendingMeta)==null?void 0:v.call(s,{requestId:g,arg:d},{getState:h,extra:m}))),[4,Promise.race([P,Promise.resolve(r(d,{dispatch:u,getState:h,extra:m,requestId:g,signal:f.signal,abort:p,rejectWithValue:function(R,F){return new dm(R,F)},fulfillWithValue:function(R,F){return new uy(R,F)}})).then(function(R){if(R instanceof dm)throw R;return R instanceof uy?n(R.payload,g,d,R.meta):n(R,g,d)})])];case 3:return w=S.sent(),[3,5];case 4:return C=S.sent(),w=C instanceof dm?o(null,g,d,C.payload,C.meta):o(C,g,d),[3,5];case 5:return N=s&&!s.dispatchConditionRejection&&o.match(w)&&w.meta.condition,N||u(w),[2,w]}})})}();return Object.assign(b,{abort:p,requestId:g,arg:d,unwrap:function(){return b.then(sC)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:n,typePrefix:t})}return e.withTypes=function(){return e},e}();function sC(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function aC(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var U0="listenerMiddleware";ka(U0+"/add");ka(U0+"/removeAll");ka(U0+"/remove");var hy;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);k5();function pj(e,t){return function(){return e.apply(t,arguments)}}const{toString:nC}=Object.prototype,{getPrototypeOf:V0}=Object,{iterator:nh,toStringTag:xj}=Symbol,ih=(e=>t=>{const r=nC.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Yr=e=>(e=e.toLowerCase(),t=>ih(t)===e),oh=e=>t=>typeof t===e,{isArray:wi}=Array,ci=oh("undefined");function vl(e){return e!==null&&!ci(e)&&e.constructor!==null&&!ci(e.constructor)&&Zt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const yj=Yr("ArrayBuffer");function iC(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&yj(e.buffer),t}const oC=oh("string"),Zt=oh("function"),bj=oh("number"),wl=e=>e!==null&&typeof e=="object",lC=e=>e===!0||e===!1,Tc=e=>{if(ih(e)!=="object")return!1;const t=V0(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(xj in e)&&!(nh in e)},cC=e=>{if(!wl(e)||vl(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},dC=Yr("Date"),uC=Yr("File"),hC=Yr("Blob"),mC=Yr("FileList"),fC=e=>wl(e)&&Zt(e.pipe),gC=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Zt(e.append)&&((t=ih(e))==="formdata"||t==="object"&&Zt(e.toString)&&e.toString()==="[object FormData]"))},pC=Yr("URLSearchParams"),[xC,yC,bC,vC]=["ReadableStream","Request","Response","Headers"].map(Yr),wC=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function jl(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,n;if(typeof e!="object"&&(e=[e]),wi(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{if(vl(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function vj(e,t){if(vl(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,n;for(;s-- >0;)if(n=r[s],t===n.toLowerCase())return n;return null}const Qa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,wj=e=>!ci(e)&&e!==Qa;function rg(){const{caseless:e,skipUndefined:t}=wj(this)&&this||{},r={},s=(n,i)=>{const o=e&&vj(r,i)||i;Tc(r[o])&&Tc(n)?r[o]=rg(r[o],n):Tc(n)?r[o]=rg({},n):wi(n)?r[o]=n.slice():(!t||!ci(n))&&(r[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&jl(arguments[n],s);return r}const jC=(e,t,r,{allOwnKeys:s}={})=>(jl(t,(n,i)=>{r&&Zt(n)?e[i]=pj(n,r):e[i]=n},{allOwnKeys:s}),e),kC=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),NC=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},SC=(e,t,r,s)=>{let n,i,o;const l={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)o=n[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&V0(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},CC=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},_C=e=>{if(!e)return null;if(wi(e))return e;let t=e.length;if(!bj(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},EC=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&V0(Uint8Array)),PC=(e,t)=>{const s=(e&&e[nh]).call(e);let n;for(;(n=s.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},TC=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},IC=Yr("HTMLFormElement"),RC=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),my=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),AC=Yr("RegExp"),jj=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};jl(r,(n,i)=>{let o;(o=t(n,i,e))!==!1&&(s[i]=o||n)}),Object.defineProperties(e,s)},OC=e=>{jj(e,(t,r)=>{if(Zt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(Zt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},LC=(e,t)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return wi(e)?s(e):s(String(e).split(t)),r},MC=()=>{},DC=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function FC(e){return!!(e&&Zt(e.append)&&e[xj]==="FormData"&&e[nh])}const $C=e=>{const t=new Array(10),r=(s,n)=>{if(wl(s)){if(t.indexOf(s)>=0)return;if(vl(s))return s;if(!("toJSON"in s)){t[n]=s;const i=wi(s)?[]:{};return jl(s,(o,l)=>{const c=r(o,n+1);!ci(c)&&(i[l]=c)}),t[n]=void 0,i}}return s};return r(e,0)},zC=Yr("AsyncFunction"),BC=e=>e&&(wl(e)||Zt(e))&&Zt(e.then)&&Zt(e.catch),kj=((e,t)=>e?setImmediate:t?((r,s)=>(Qa.addEventListener("message",({source:n,data:i})=>{n===Qa&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),Qa.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Zt(Qa.postMessage)),UC=typeof queueMicrotask<"u"?queueMicrotask.bind(Qa):typeof process<"u"&&process.nextTick||kj,VC=e=>e!=null&&Zt(e[nh]),B={isArray:wi,isArrayBuffer:yj,isBuffer:vl,isFormData:gC,isArrayBufferView:iC,isString:oC,isNumber:bj,isBoolean:lC,isObject:wl,isPlainObject:Tc,isEmptyObject:cC,isReadableStream:xC,isRequest:yC,isResponse:bC,isHeaders:vC,isUndefined:ci,isDate:dC,isFile:uC,isBlob:hC,isRegExp:AC,isFunction:Zt,isStream:fC,isURLSearchParams:pC,isTypedArray:EC,isFileList:mC,forEach:jl,merge:rg,extend:jC,trim:wC,stripBOM:kC,inherits:NC,toFlatObject:SC,kindOf:ih,kindOfTest:Yr,endsWith:CC,toArray:_C,forEachEntry:PC,matchAll:TC,isHTMLForm:IC,hasOwnProperty:my,hasOwnProp:my,reduceDescriptors:jj,freezeMethods:OC,toObjectSet:LC,toCamelCase:RC,noop:MC,toFiniteNumber:DC,findKey:vj,global:Qa,isContextDefined:wj,isSpecCompliantForm:FC,toJSONObject:$C,isAsyncFn:zC,isThenable:BC,setImmediate:kj,asap:UC,isIterable:VC};function ge(e,t,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}B.inherits(ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Nj=ge.prototype,Sj={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Sj[e]={value:e}});Object.defineProperties(ge,Sj);Object.defineProperty(Nj,"isAxiosError",{value:!0});ge.from=(e,t,r,s,n,i)=>{const o=Object.create(Nj);B.toFlatObject(e,o,function(u){return u!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return ge.call(o,l,c,r,s,n),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const HC=null;function sg(e){return B.isPlainObject(e)||B.isArray(e)}function Cj(e){return B.endsWith(e,"[]")?e.slice(0,-2):e}function fy(e,t,r){return e?e.concat(t).map(function(n,i){return n=Cj(n),!r&&i?"["+n+"]":n}).join(r?".":""):t}function WC(e){return B.isArray(e)&&!e.some(sg)}const qC=B.toFlatObject(B,{},null,function(t){return/^is[A-Z]/.test(t)});function lh(e,t,r){if(!B.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,p){return!B.isUndefined(p[x])});const s=r.metaTokens,n=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(t);if(!B.isFunction(n))throw new TypeError("visitor must be a function");function d(f){if(f===null)return"";if(B.isDate(f))return f.toISOString();if(B.isBoolean(f))return f.toString();if(!c&&B.isBlob(f))throw new ge("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(f)||B.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,x,p){let b=f;if(f&&!p&&typeof f=="object"){if(B.endsWith(x,"{}"))x=s?x:x.slice(0,-2),f=JSON.stringify(f);else if(B.isArray(f)&&WC(f)||(B.isFileList(f)||B.endsWith(x,"[]"))&&(b=B.toArray(f)))return x=Cj(x),b.forEach(function(v,w){!(B.isUndefined(v)||v===null)&&t.append(o===!0?fy([x],w,i):o===null?x:x+"[]",d(v))}),!1}return sg(f)?!0:(t.append(fy(p,x,i),d(f)),!1)}const h=[],m=Object.assign(qC,{defaultVisitor:u,convertValue:d,isVisitable:sg});function g(f,x){if(!B.isUndefined(f)){if(h.indexOf(f)!==-1)throw Error("Circular reference detected in "+x.join("."));h.push(f),B.forEach(f,function(b,y){(!(B.isUndefined(b)||b===null)&&n.call(t,b,B.isString(y)?y.trim():y,x,m))===!0&&g(b,x?x.concat(y):[y])}),h.pop()}}if(!B.isObject(e))throw new TypeError("data must be an object");return g(e),t}function gy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function H0(e,t){this._pairs=[],e&&lh(e,this,t)}const _j=H0.prototype;_j.append=function(t,r){this._pairs.push([t,r])};_j.toString=function(t){const r=t?function(s){return t.call(this,s,gy)}:gy;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function KC(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ej(e,t,r){if(!t)return e;const s=r&&r.encode||KC;B.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(t,r):i=B.isURLSearchParams(t)?t.toString():new H0(t,r).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class py{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){B.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Pj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},GC=typeof URLSearchParams<"u"?URLSearchParams:H0,YC=typeof FormData<"u"?FormData:null,QC=typeof Blob<"u"?Blob:null,XC={isBrowser:!0,classes:{URLSearchParams:GC,FormData:YC,Blob:QC},protocols:["http","https","file","blob","url","data"]},W0=typeof window<"u"&&typeof document<"u",ag=typeof navigator=="object"&&navigator||void 0,JC=W0&&(!ag||["ReactNative","NativeScript","NS"].indexOf(ag.product)<0),ZC=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",e_=W0&&window.location.href||"http://localhost",t_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:W0,hasStandardBrowserEnv:JC,hasStandardBrowserWebWorkerEnv:ZC,navigator:ag,origin:e_},Symbol.toStringTag,{value:"Module"})),Pt={...t_,...XC};function r_(e,t){return lh(e,new Pt.classes.URLSearchParams,{visitor:function(r,s,n,i){return Pt.isNode&&B.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function s_(e){return B.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function a_(e){const t={},r=Object.keys(e);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],t[i]=e[i];return t}function Tj(e){function t(r,s,n,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&B.isArray(n)?n.length:o,c?(B.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!l):((!n[o]||!B.isObject(n[o]))&&(n[o]=[]),t(r,s,n[o],i)&&B.isArray(n[o])&&(n[o]=a_(n[o])),!l)}if(B.isFormData(e)&&B.isFunction(e.entries)){const r={};return B.forEachEntry(e,(s,n)=>{t(s_(s),n,r,0)}),r}return null}function n_(e,t,r){if(B.isString(e))try{return(t||JSON.parse)(e),B.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const kl={transitional:Pj,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=B.isObject(t);if(i&&B.isHTMLForm(t)&&(t=new FormData(t)),B.isFormData(t))return n?JSON.stringify(Tj(t)):t;if(B.isArrayBuffer(t)||B.isBuffer(t)||B.isStream(t)||B.isFile(t)||B.isBlob(t)||B.isReadableStream(t))return t;if(B.isArrayBufferView(t))return t.buffer;if(B.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return r_(t,this.formSerializer).toString();if((l=B.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return lh(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),n_(t)):t}],transformResponse:[function(t){const r=this.transitional||kl.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(B.isResponse(t)||B.isReadableStream(t))return t;if(t&&B.isString(t)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?ge.from(l,ge.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pt.classes.FormData,Blob:Pt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],e=>{kl.headers[e]={}});const i_=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),o_=e=>{const t={};let r,s,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||t[r]&&i_[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},xy=Symbol("internals");function Mi(e){return e&&String(e).trim().toLowerCase()}function Ic(e){return e===!1||e==null?e:B.isArray(e)?e.map(Ic):String(e)}function l_(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const c_=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function um(e,t,r,s,n){if(B.isFunction(s))return s.call(this,t,r);if(n&&(t=r),!!B.isString(t)){if(B.isString(s))return t.indexOf(s)!==-1;if(B.isRegExp(s))return s.test(t)}}function d_(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function u_(e,t){const r=B.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(n,i,o){return this[s].call(this,t,n,i,o)},configurable:!0})})}let er=class{constructor(t){t&&this.set(t)}set(t,r,s){const n=this;function i(l,c,d){const u=Mi(c);if(!u)throw new Error("header name must be a non-empty string");const h=B.findKey(n,u);(!h||n[h]===void 0||d===!0||d===void 0&&n[h]!==!1)&&(n[h||c]=Ic(l))}const o=(l,c)=>B.forEach(l,(d,u)=>i(d,u,c));if(B.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(B.isString(t)&&(t=t.trim())&&!c_(t))o(o_(t),r);else if(B.isObject(t)&&B.isIterable(t)){let l={},c,d;for(const u of t){if(!B.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?B.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,s);return this}get(t,r){if(t=Mi(t),t){const s=B.findKey(this,t);if(s){const n=this[s];if(!r)return n;if(r===!0)return l_(n);if(B.isFunction(r))return r.call(this,n,s);if(B.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Mi(t),t){const s=B.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||um(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let n=!1;function i(o){if(o=Mi(o),o){const l=B.findKey(s,o);l&&(!r||um(s,s[l],l,r))&&(delete s[l],n=!0)}}return B.isArray(t)?t.forEach(i):i(t),n}clear(t){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!t||um(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const r=this,s={};return B.forEach(this,(n,i)=>{const o=B.findKey(s,i);if(o){r[o]=Ic(n),delete r[i];return}const l=t?d_(i):String(i).trim();l!==i&&delete r[i],r[l]=Ic(n),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return B.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=t&&B.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(n=>s.set(n)),s}static accessor(t){const s=(this[xy]=this[xy]={accessors:{}}).accessors,n=this.prototype;function i(o){const l=Mi(o);s[l]||(u_(n,o),s[l]=!0)}return B.isArray(t)?t.forEach(i):i(t),this}};er.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(er.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});B.freezeMethods(er);function hm(e,t){const r=this||kl,s=t||r,n=er.from(s.headers);let i=s.data;return B.forEach(e,function(l){i=l.call(r,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function Ij(e){return!!(e&&e.__CANCEL__)}function ji(e,t,r){ge.call(this,e??"canceled",ge.ERR_CANCELED,t,r),this.name="CanceledError"}B.inherits(ji,ge,{__CANCEL__:!0});function Rj(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new ge("Request failed with status code "+r.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function h_(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function m_(e,t){e=e||10;const r=new Array(e),s=new Array(e);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=s[i];o||(o=d),r[n]=c,s[n]=d;let h=i,m=0;for(;h!==n;)m+=r[h++],h=h%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),d-o<t)return;const g=u&&d-u;return g?Math.round(m*1e3/g):void 0}}function f_(e,t){let r=0,s=1e3/t,n,i;const o=(d,u=Date.now())=>{r=u,n=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=s?o(d,u):(n=d,i||(i=setTimeout(()=>{i=null,o(n)},s-h)))},()=>n&&o(n)]}const Jd=(e,t,r=3)=>{let s=0;const n=m_(50,250);return f_(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,d=n(c),u=o<=l;s=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},yy=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},by=e=>(...t)=>B.asap(()=>e(...t)),g_=Pt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Pt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Pt.origin),Pt.navigator&&/(msie|trident)/i.test(Pt.navigator.userAgent)):()=>!0,p_=Pt.hasStandardBrowserEnv?{write(e,t,r,s,n,i){const o=[e+"="+encodeURIComponent(t)];B.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),B.isString(s)&&o.push("path="+s),B.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x_(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function y_(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Aj(e,t,r){let s=!x_(t);return e&&(s||r==!1)?y_(e,t):t}const vy=e=>e instanceof er?{...e}:e;function hn(e,t){t=t||{};const r={};function s(d,u,h,m){return B.isPlainObject(d)&&B.isPlainObject(u)?B.merge.call({caseless:m},d,u):B.isPlainObject(u)?B.merge({},u):B.isArray(u)?u.slice():u}function n(d,u,h,m){if(B.isUndefined(u)){if(!B.isUndefined(d))return s(void 0,d,h,m)}else return s(d,u,h,m)}function i(d,u){if(!B.isUndefined(u))return s(void 0,u)}function o(d,u){if(B.isUndefined(u)){if(!B.isUndefined(d))return s(void 0,d)}else return s(void 0,u)}function l(d,u,h){if(h in t)return s(d,u);if(h in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>n(vy(d),vy(u),h,!0)};return B.forEach(Object.keys({...e,...t}),function(u){const h=c[u]||n,m=h(e[u],t[u],u);B.isUndefined(m)&&h!==l||(r[u]=m)}),r}const Oj=e=>{const t=hn({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=er.from(o),t.url=Ej(Aj(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),B.isFormData(r)){if(Pt.hasStandardBrowserEnv||Pt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(B.isFunction(r.getHeaders)){const c=r.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([u,h])=>{d.includes(u.toLowerCase())&&o.set(u,h)})}}if(Pt.hasStandardBrowserEnv&&(s&&B.isFunction(s)&&(s=s(t)),s||s!==!1&&g_(t.url))){const c=n&&i&&p_.read(i);c&&o.set(n,c)}return t},b_=typeof XMLHttpRequest<"u",v_=b_&&function(e){return new Promise(function(r,s){const n=Oj(e);let i=n.data;const o=er.from(n.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=n,u,h,m,g,f;function x(){g&&g(),f&&f(),n.cancelToken&&n.cancelToken.unsubscribe(u),n.signal&&n.signal.removeEventListener("abort",u)}let p=new XMLHttpRequest;p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout;function b(){if(!p)return;const v=er.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:v,config:e,request:p};Rj(function(C){r(C),x()},function(C){s(C),x()},k),p=null}"onloadend"in p?p.onloadend=b:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(b)},p.onabort=function(){p&&(s(new ge("Request aborted",ge.ECONNABORTED,e,p)),p=null)},p.onerror=function(w){const k=w&&w.message?w.message:"Network Error",P=new ge(k,ge.ERR_NETWORK,e,p);P.event=w||null,s(P),p=null},p.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const k=n.transitional||Pj;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),s(new ge(w,k.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,e,p)),p=null},i===void 0&&o.setContentType(null),"setRequestHeader"in p&&B.forEach(o.toJSON(),function(w,k){p.setRequestHeader(k,w)}),B.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),l&&l!=="json"&&(p.responseType=n.responseType),d&&([m,f]=Jd(d,!0),p.addEventListener("progress",m)),c&&p.upload&&([h,g]=Jd(c),p.upload.addEventListener("progress",h),p.upload.addEventListener("loadend",g)),(n.cancelToken||n.signal)&&(u=v=>{p&&(s(!v||v.type?new ji(null,e,p):v),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(u),n.signal&&(n.signal.aborted?u():n.signal.addEventListener("abort",u)));const y=h_(n.url);if(y&&Pt.protocols.indexOf(y)===-1){s(new ge("Unsupported protocol "+y+":",ge.ERR_BAD_REQUEST,e));return}p.send(i||null)})},w_=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,n;const i=function(d){if(!n){n=!0,l();const u=d instanceof Error?d:this.reason;s.abort(u instanceof ge?u:new ji(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new ge(`timeout ${t} of ms exceeded`,ge.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>B.asap(l),c}},j_=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,n;for(;s<r;)n=s+t,yield e.slice(s,n),s=n},k_=async function*(e,t){for await(const r of N_(e))yield*j_(r,t)},N_=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},wy=(e,t,r,s)=>{const n=k_(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await n.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let m=i+=h;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),n.return()}},{highWaterMark:2})},jy=64*1024,{isFunction:Xl}=B,S_=(({Request:e,Response:t})=>({Request:e,Response:t}))(B.global),{ReadableStream:ky,TextEncoder:Ny}=B.global,Sy=(e,...t)=>{try{return!!e(...t)}catch{return!1}},C_=e=>{e=B.merge.call({skipUndefined:!0},S_,e);const{fetch:t,Request:r,Response:s}=e,n=t?Xl(t):typeof fetch=="function",i=Xl(r),o=Xl(s);if(!n)return!1;const l=n&&Xl(ky),c=n&&(typeof Ny=="function"?(f=>x=>f.encode(x))(new Ny):async f=>new Uint8Array(await new r(f).arrayBuffer())),d=i&&l&&Sy(()=>{let f=!1;const x=new r(Pt.origin,{body:new ky,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!x}),u=o&&l&&Sy(()=>B.isReadableStream(new s("").body)),h={stream:u&&(f=>f.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!h[f]&&(h[f]=(x,p)=>{let b=x&&x[f];if(b)return b.call(x);throw new ge(`Response type '${f}' is not supported`,ge.ERR_NOT_SUPPORT,p)})});const m=async f=>{if(f==null)return 0;if(B.isBlob(f))return f.size;if(B.isSpecCompliantForm(f))return(await new r(Pt.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(B.isArrayBufferView(f)||B.isArrayBuffer(f))return f.byteLength;if(B.isURLSearchParams(f)&&(f=f+""),B.isString(f))return(await c(f)).byteLength},g=async(f,x)=>{const p=B.toFiniteNumber(f.getContentLength());return p??m(x)};return async f=>{let{url:x,method:p,data:b,signal:y,cancelToken:v,timeout:w,onDownloadProgress:k,onUploadProgress:P,responseType:C,headers:N,withCredentials:S="same-origin",fetchOptions:R}=Oj(f),F=t||fetch;C=C?(C+"").toLowerCase():"text";let I=w_([y,v&&v.toAbortSignal()],w),V=null;const G=I&&I.unsubscribe&&(()=>{I.unsubscribe()});let z;try{if(P&&d&&p!=="get"&&p!=="head"&&(z=await g(N,b))!==0){let ae=new r(x,{method:"POST",body:b,duplex:"half"}),U;if(B.isFormData(b)&&(U=ae.headers.get("content-type"))&&N.setContentType(U),ae.body){const[re,fe]=yy(z,Jd(by(P)));b=wy(ae.body,jy,re,fe)}}B.isString(S)||(S=S?"include":"omit");const M=i&&"credentials"in r.prototype,_={...R,signal:I,method:p.toUpperCase(),headers:N.normalize().toJSON(),body:b,duplex:"half",credentials:M?S:void 0};V=i&&new r(x,_);let E=await(i?F(V,R):F(x,_));const O=u&&(C==="stream"||C==="response");if(u&&(k||O&&G)){const ae={};["status","statusText","headers"].forEach(Ne=>{ae[Ne]=E[Ne]});const U=B.toFiniteNumber(E.headers.get("content-length")),[re,fe]=k&&yy(U,Jd(by(k),!0))||[];E=new s(wy(E.body,jy,re,()=>{fe&&fe(),G&&G()}),ae)}C=C||"text";let q=await h[B.findKey(h,C)||"text"](E,f);return!O&&G&&G(),await new Promise((ae,U)=>{Rj(ae,U,{data:q,headers:er.from(E.headers),status:E.status,statusText:E.statusText,config:f,request:V})})}catch(M){throw G&&G(),M&&M.name==="TypeError"&&/Load failed|fetch/i.test(M.message)?Object.assign(new ge("Network Error",ge.ERR_NETWORK,f,V),{cause:M.cause||M}):ge.from(M,M&&M.code,f,V)}}},__=new Map,Lj=e=>{let t=e?e.env:{};const{fetch:r,Request:s,Response:n}=t,i=[s,n,r];let o=i.length,l=o,c,d,u=__;for(;l--;)c=i[l],d=u.get(c),d===void 0&&u.set(c,d=l?new Map:C_(t)),u=d;return d};Lj();const ng={http:HC,xhr:v_,fetch:{get:Lj}};B.forEach(ng,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Cy=e=>`- ${e}`,E_=e=>B.isFunction(e)||e===null||e===!1,Mj={getAdapter:(e,t)=>{e=B.isArray(e)?e:[e];const{length:r}=e;let s,n;const i={};for(let o=0;o<r;o++){s=e[o];let l;if(n=s,!E_(s)&&(n=ng[(l=String(s)).toLowerCase()],n===void 0))throw new ge(`Unknown adapter '${l}'`);if(n&&(B.isFunction(n)||(n=n.get(t))))break;i[l||"#"+o]=n}if(!n){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(Cy).join(`
`):" "+Cy(o[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:ng};function mm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ji(null,e)}function _y(e){return mm(e),e.headers=er.from(e.headers),e.data=hm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Mj.getAdapter(e.adapter||kl.adapter,e)(e).then(function(s){return mm(e),s.data=hm.call(e,e.transformResponse,s),s.headers=er.from(s.headers),s},function(s){return Ij(s)||(mm(e),s&&s.response&&(s.response.data=hm.call(e,e.transformResponse,s.response),s.response.headers=er.from(s.response.headers))),Promise.reject(s)})}const Dj="1.12.2",ch={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ch[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Ey={};ch.transitional=function(t,r,s){function n(i,o){return"[Axios v"+Dj+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new ge(n(o," has been removed"+(r?" in "+r:"")),ge.ERR_DEPRECATED);return r&&!Ey[o]&&(Ey[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};ch.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function P_(e,t,r){if(typeof e!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const i=s[n],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new ge("option "+i+" must be "+c,ge.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ge("Unknown option "+i,ge.ERR_BAD_OPTION)}}const Rc={assertOptions:P_,validators:ch},Xr=Rc.validators;let rn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new py,response:new py}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=hn(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&Rc.assertOptions(s,{silentJSONParsing:Xr.transitional(Xr.boolean),forcedJSONParsing:Xr.transitional(Xr.boolean),clarifyTimeoutError:Xr.transitional(Xr.boolean)},!1),n!=null&&(B.isFunction(n)?r.paramsSerializer={serialize:n}:Rc.assertOptions(n,{encode:Xr.function,serialize:Xr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Rc.assertOptions(r,{baseUrl:Xr.spelling("baseURL"),withXsrfToken:Xr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&B.merge(i.common,i[r.method]);i&&B.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),r.headers=er.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(c=c&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const d=[];this.interceptors.response.forEach(function(x){d.push(x.fulfilled,x.rejected)});let u,h=0,m;if(!c){const f=[_y.bind(this),void 0];for(f.unshift(...l),f.push(...d),m=f.length,u=Promise.resolve(r);h<m;)u=u.then(f[h++],f[h++]);return u}m=l.length;let g=r;for(;h<m;){const f=l[h++],x=l[h++];try{g=f(g)}catch(p){x.call(this,p);break}}try{u=_y.call(this,g)}catch(f){return Promise.reject(f)}for(h=0,m=d.length;h<m;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=hn(this.defaults,t);const r=Aj(t.baseURL,t.url,t.allowAbsoluteUrls);return Ej(r,t.params,t.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(t){rn.prototype[t]=function(r,s){return this.request(hn(s||{},{method:t,url:r,data:(s||{}).data}))}});B.forEach(["post","put","patch"],function(t){function r(s){return function(i,o,l){return this.request(hn(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}rn.prototype[t]=r(),rn.prototype[t+"Form"]=r(!0)});let T_=class Fj{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new ji(i,o,l),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Fj(function(n){t=n}),cancel:t}}};function I_(e){return function(r){return e.apply(null,r)}}function R_(e){return B.isObject(e)&&e.isAxiosError===!0}const ig={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ig).forEach(([e,t])=>{ig[t]=e});function $j(e){const t=new rn(e),r=pj(rn.prototype.request,t);return B.extend(r,rn.prototype,t,{allOwnKeys:!0}),B.extend(r,t,null,{allOwnKeys:!0}),r.create=function(n){return $j(hn(e,n))},r}const et=$j(kl);et.Axios=rn;et.CanceledError=ji;et.CancelToken=T_;et.isCancel=Ij;et.VERSION=Dj;et.toFormData=lh;et.AxiosError=ge;et.Cancel=et.CanceledError;et.all=function(t){return Promise.all(t)};et.spread=I_;et.isAxiosError=R_;et.mergeConfig=hn;et.AxiosHeaders=er;et.formToJSON=e=>Tj(B.isHTMLForm(e)?new FormData(e):e);et.getAdapter=Mj.getAdapter;et.HttpStatusCode=ig;et.default=et;const{Axios:nL,AxiosError:iL,CanceledError:oL,isCancel:lL,CancelToken:cL,VERSION:dL,all:uL,Cancel:hL,isAxiosError:mL,spread:fL,toFormData:gL,AxiosHeaders:pL,HttpStatusCode:xL,formToJSON:yL,getAdapter:bL,mergeConfig:vL}=et,A_="http://localhost:5000/api",Z=et.create({baseURL:A_,headers:{"Content-Type":"application/json"}});Z.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Z.interceptors.response.use(e=>(e.data&&e.data.data,e.data),e=>{var r,s,n,i;const t=((s=(r=e.response)==null?void 0:r.data)==null?void 0:s.message)||"Something went wrong";return((n=e.response)==null?void 0:n.status)!==401&&((i=e.response)==null?void 0:i.status)!==404&&D.error(t),Promise.reject(e)});const ys=Object.create(null);ys.open="0";ys.close="1";ys.ping="2";ys.pong="3";ys.message="4";ys.upgrade="5";ys.noop="6";const Ac=Object.create(null);Object.keys(ys).forEach(e=>{Ac[ys[e]]=e});const og={type:"error",data:"parser error"},zj=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Bj=typeof ArrayBuffer=="function",Uj=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,q0=({type:e,data:t},r,s)=>zj&&t instanceof Blob?r?s(t):Py(t,s):Bj&&(t instanceof ArrayBuffer||Uj(t))?r?s(t):Py(new Blob([t]),s):s(ys[e]+(t||"")),Py=(e,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(e)};function Ty(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let fm;function O_(e,t){if(zj&&e.data instanceof Blob)return e.data.arrayBuffer().then(Ty).then(t);if(Bj&&(e.data instanceof ArrayBuffer||Uj(e.data)))return t(Ty(e.data));q0(e,!1,r=>{fm||(fm=new TextEncoder),t(fm.encode(r))})}const Iy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Iy.length;e++)Yi[Iy.charCodeAt(e)]=e;const L_=e=>{let t=e.length*.75,r=e.length,s,n=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(s=0;s<r;s+=4)i=Yi[e.charCodeAt(s)],o=Yi[e.charCodeAt(s+1)],l=Yi[e.charCodeAt(s+2)],c=Yi[e.charCodeAt(s+3)],u[n++]=i<<2|o>>4,u[n++]=(o&15)<<4|l>>2,u[n++]=(l&3)<<6|c&63;return d},M_=typeof ArrayBuffer=="function",K0=(e,t)=>{if(typeof e!="string")return{type:"message",data:Vj(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:D_(e.substring(1),t)}:Ac[r]?e.length>1?{type:Ac[r],data:e.substring(1)}:{type:Ac[r]}:og},D_=(e,t)=>{if(M_){const r=L_(e);return Vj(r,t)}else return{base64:!0,data:e}},Vj=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Hj="",F_=(e,t)=>{const r=e.length,s=new Array(r);let n=0;e.forEach((i,o)=>{q0(i,!1,l=>{s[o]=l,++n===r&&t(s.join(Hj))})})},$_=(e,t)=>{const r=e.split(Hj),s=[];for(let n=0;n<r.length;n++){const i=K0(r[n],t);if(s.push(i),i.type==="error")break}return s};function z_(){return new TransformStream({transform(e,t){O_(e,r=>{const s=r.length;let n;if(s<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,s);else if(s<65536){n=new Uint8Array(3);const i=new DataView(n.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{n=new Uint8Array(9);const i=new DataView(n.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let gm;function Jl(e){return e.reduce((t,r)=>t+r.length,0)}function Zl(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let s=0;for(let n=0;n<t;n++)r[n]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function B_(e,t){gm||(gm=new TextDecoder);const r=[];let s=0,n=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(s===0){if(Jl(r)<1)break;const c=Zl(r,1);i=(c[0]&128)===128,n=c[0]&127,n<126?s=3:n===126?s=1:s=2}else if(s===1){if(Jl(r)<2)break;const c=Zl(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(Jl(r)<8)break;const c=Zl(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(og);break}n=u*Math.pow(2,32)+d.getUint32(4),s=3}else{if(Jl(r)<n)break;const c=Zl(r,n);l.enqueue(K0(i?c:gm.decode(c),t)),s=0}if(n===0||n>e){l.enqueue(og);break}}}})}const Wj=4;function at(e){if(e)return U_(e)}function U_(e){for(var t in at.prototype)e[t]=at.prototype[t];return e}at.prototype.on=at.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};at.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};at.prototype.off=at.prototype.removeListener=at.prototype.removeAllListeners=at.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,n=0;n<r.length;n++)if(s=r[n],s===t||s.fn===t){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+e],this};at.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,n=r.length;s<n;++s)r[s].apply(this,t)}return this};at.prototype.emitReserved=at.prototype.emit;at.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};at.prototype.hasListeners=function(e){return!!this.listeners(e).length};const dh=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),kr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),V_="arraybuffer";function qj(e,...t){return t.reduce((r,s)=>(e.hasOwnProperty(s)&&(r[s]=e[s]),r),{})}const H_=kr.setTimeout,W_=kr.clearTimeout;function uh(e,t){t.useNativeTimers?(e.setTimeoutFn=H_.bind(kr),e.clearTimeoutFn=W_.bind(kr)):(e.setTimeoutFn=kr.setTimeout.bind(kr),e.clearTimeoutFn=kr.clearTimeout.bind(kr))}const q_=1.33;function K_(e){return typeof e=="string"?G_(e):Math.ceil((e.byteLength||e.size)*q_)}function G_(e){let t=0,r=0;for(let s=0,n=e.length;s<n;s++)t=e.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Kj(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Y_(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Q_(e){let t={},r=e.split("&");for(let s=0,n=r.length;s<n;s++){let i=r[s].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class X_ extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class G0 extends at{constructor(t){super(),this.writable=!1,uh(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new X_(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=K0(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Y_(t);return r.length?"?"+r:""}}class J_ extends G0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};$_(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,F_(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Kj()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Gj=!1;try{Gj=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Z_=Gj;function eE(){}class tE extends J_{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(n,i)=>{this.onError("xhr post error",n,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class hs extends at{constructor(t,r,s){super(),this.createRequest=t,uh(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=qj(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&s.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var n;s.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=hs.requestsCount++,hs.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=eE,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete hs.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}hs.requestsCount=0;hs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ry);else if(typeof addEventListener=="function"){const e="onpagehide"in kr?"pagehide":"unload";addEventListener(e,Ry,!1)}}function Ry(){for(let e in hs.requests)hs.requests.hasOwnProperty(e)&&hs.requests[e].abort()}const rE=function(){const e=Yj({xdomain:!1});return e&&e.responseType!==null}();class sE extends tE{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=rE&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new hs(Yj,this.uri(),t)}}function Yj(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Z_))return new XMLHttpRequest}catch{}if(!t)try{return new kr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Qj=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class aE extends G0{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=Qj?{}:qj(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],n=r===t.length-1;q0(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}n&&dh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Kj()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const pm=kr.WebSocket||kr.MozWebSocket;class nE extends aE{createSocket(t,r,s){return Qj?new pm(t,r,s):r?new pm(t,r):new pm(t)}doWrite(t,r){this.ws.send(r)}}class iE extends G0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=B_(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),n=z_();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const i=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],n=r===t.length-1;this._writer.write(s).then(()=>{n&&dh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const oE={websocket:nE,webtransport:iE,polling:sE},lE=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,cE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function lg(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let n=lE.exec(e||""),i={},o=14;for(;o--;)i[cE[o]]=n[o]||"";return r!=-1&&s!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=dE(i,i.path),i.queryKey=uE(i,i.query),i}function dE(e,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function uE(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,n,i){n&&(r[n]=i)}),r}const cg=typeof addEventListener=="function"&&typeof removeEventListener=="function",Oc=[];cg&&addEventListener("offline",()=>{Oc.forEach(e=>e())},!1);class Na extends at{constructor(t,r){if(super(),this.binaryType=V_,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=lg(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=lg(r.host).host);uh(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const n=s.prototype.name;this.transports.push(n),this._transportsByName[n]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Q_(this.opts.query)),cg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Oc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Wj,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Na.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Na.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const n=this.writeBuffer[s].data;if(n&&(r+=K_(n)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,dh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,n){if(typeof r=="function"&&(n=r,r=void 0),typeof s=="function"&&(n=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:t,data:r,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Na.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),cg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Oc.indexOf(this._offlineEventListener);s!==-1&&Oc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Na.protocol=Wj;class hE extends Na{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;Na.priorWebsocketSuccess=!1;const n=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Na.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const m=new Error("probe error");m.transport=r.name,this.emitReserved("upgradeError",m)}}))};function i(){s||(s=!0,u(),r.close(),r=null)}const o=h=>{const m=new Error("probe error: "+h);m.transport=r.name,i(),this.emitReserved("upgradeError",m)};function l(){o("transport closed")}function c(){o("socket closed")}function d(h){r&&h.name!==r.name&&i()}const u=()=>{r.removeListener("open",n),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};r.once("open",n),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let mE=class extends hE{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(n=>oE[n]).filter(n=>!!n)),super(t,s)}};function fE(e,t="",r){let s=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),s=lg(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+t,s.href=s.protocol+"://"+i+(r&&r.port===s.port?"":":"+s.port),s}const gE=typeof ArrayBuffer=="function",pE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Xj=Object.prototype.toString,xE=typeof Blob=="function"||typeof Blob<"u"&&Xj.call(Blob)==="[object BlobConstructor]",yE=typeof File=="function"||typeof File<"u"&&Xj.call(File)==="[object FileConstructor]";function Y0(e){return gE&&(e instanceof ArrayBuffer||pE(e))||xE&&e instanceof Blob||yE&&e instanceof File}function Lc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if(Lc(e[r]))return!0;return!1}if(Y0(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Lc(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Lc(e[r]))return!0;return!1}function bE(e){const t=[],r=e.data,s=e;return s.data=dg(r,t),s.attachments=t.length,{packet:s,buffers:t}}function dg(e,t){if(!e)return e;if(Y0(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=dg(e[s],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=dg(e[s],t));return r}return e}function vE(e,t){return e.data=ug(e.data,t),delete e.attachments,e}function ug(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=ug(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=ug(e[r],t));return e}const wE=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],jE=5;var ve;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ve||(ve={}));class kE{constructor(t){this.replacer=t}encode(t){return(t.type===ve.EVENT||t.type===ve.ACK)&&Lc(t)?this.encodeAsBinary({type:t.type===ve.EVENT?ve.BINARY_EVENT:ve.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===ve.BINARY_EVENT||t.type===ve.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=bE(t),s=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(s),n}}function Ay(e){return Object.prototype.toString.call(e)==="[object Object]"}class Q0 extends at{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===ve.BINARY_EVENT;s||r.type===ve.BINARY_ACK?(r.type=s?ve.EVENT:ve.ACK,this.reconstructor=new NE(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Y0(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(ve[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===ve.BINARY_EVENT||s.type===ve.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(i,r)}else s.nsp="/";const n=t.charAt(r+1);if(n!==""&&Number(n)==n){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}s.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Q0.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case ve.CONNECT:return Ay(r);case ve.DISCONNECT:return r===void 0;case ve.CONNECT_ERROR:return typeof r=="string"||Ay(r);case ve.EVENT:case ve.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&wE.indexOf(r[0])===-1);case ve.ACK:case ve.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class NE{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=vE(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const SE=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Q0,Encoder:kE,get PacketType(){return ve},protocol:jE},Symbol.toStringTag,{value:"Module"}));function Dr(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const CE=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Jj extends at{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Dr(t,"open",this.onopen.bind(this)),Dr(t,"packet",this.onpacket.bind(this)),Dr(t,"error",this.onerror.bind(this)),Dr(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,n,i;if(CE.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:ve.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,h=r.pop();this._registerAckCallback(u,h),o.id=u}const l=(n=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var s;const n=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(n===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},n),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((s,n)=>{const i=(o,l)=>o?n(o):s(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...i)=>s!==this._queue[0]?void 0:(n!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ve.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ve.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ve.EVENT:case ve.BINARY_EVENT:this.onevent(t);break;case ve.ACK:case ve.BINARY_ACK:this.onack(t);break;case ve.DISCONNECT:this.ondisconnect();break;case ve.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...n){s||(s=!0,r.packet({type:ve.ACK,id:t,data:n}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ve.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function ki(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ki.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};ki.prototype.reset=function(){this.attempts=0};ki.prototype.setMin=function(e){this.ms=e};ki.prototype.setMax=function(e){this.max=e};ki.prototype.setJitter=function(e){this.jitter=e};class hg extends at{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,uh(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ki({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const n=r.parser||SE;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new mE(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const n=Dr(r,"open",function(){s.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Dr(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{n(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Dr(t,"ping",this.onping.bind(this)),Dr(t,"data",this.ondata.bind(this)),Dr(t,"error",this.onerror.bind(this)),Dr(t,"close",this.onclose.bind(this)),Dr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){dh(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Jj(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Di={};function Mc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=fE(e,t.path||"/socket.io"),s=r.source,n=r.id,i=r.path,o=Di[n]&&i in Di[n].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new hg(s,t):(Di[n]||(Di[n]=new hg(s,t)),c=Di[n]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Mc,{Manager:hg,Socket:Jj,io:Mc,connect:Mc});class _E{constructor(){this.socket=null,this.isConnected=!1}connect(){if(!this.socket){const r="http://localhost:5000/api".replace("/api","");this.socket=Mc(r,{transports:["websocket"],timeout:2e4,forceNew:!0}),this.socket.on("connect",()=>{this.isConnected=!0,console.log("Connected to server")}),this.socket.on("disconnect",()=>{this.isConnected=!1,console.log("Disconnected from server")}),this.socket.on("connect_error",s=>{console.error("Connection error:",s),this.isConnected=!1}),this.socket.on("connect_timeout",()=>{console.error("Connection timeout"),this.isConnected=!1})}}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}joinUserRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-user-room",t)}joinAdminRoom(){this.socket&&this.isConnected&&this.socket.emit("join-admin-room")}joinDeliveryRoom(t){this.socket&&this.isConnected&&this.socket.emit("join-delivery-room",t)}onOrderStatusUpdate(t){this.socket&&this.socket.on("order-status-update",t)}onDeliveryLocationUpdate(t){this.socket&&this.socket.on("delivery-location-update",t)}updateLocation(t){this.socket&&this.isConnected&&this.socket.emit("location-update",t)}updateOrderStatus(t){this.socket&&this.isConnected&&this.socket.emit("order-status-update",t)}joinConversation(t){this.socket&&this.isConnected&&this.socket.emit("join-conversation",t)}leaveConversation(t){this.socket&&this.isConnected&&this.socket.emit("leave-conversation",t)}emitTypingStart(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-start",{conversationId:t,userId:r})}emitTypingStop(t,r){this.socket&&this.isConnected&&this.socket.emit("typing-stop",{conversationId:t,userId:r})}onNewMessage(t){this.socket&&this.socket.on("new-message",t)}onUserTyping(t){this.socket&&this.socket.on("user-typing",t)}onConversationUpdate(t){this.socket&&this.socket.on("conversation-updated",t)}on(t,r){this.socket&&this.socket.on(t,r)}onChatNotification(t){this.socket&&this.socket.on("chat-notification",t)}removeListener(t,r){this.socket&&this.socket.off(t,r)}off(t,r){this.removeListener(t,r)}emit(t,r){this.socket&&this.isConnected?this.socket.emit(t,r):console.warn(`Socket not connected. Cannot emit event: ${t}`)}isSocketConnected(){return this.socket&&this.isConnected}}const Le=new _E,lo=se("auth/login",async({username:e,password:t},{rejectWithValue:r})=>{var s,n,i,o;try{const l=await Z.post("/auth/login",{username:e,password:t});return localStorage.setItem("token",l.data.token),Le.connect(),Le.joinUserRoom(l.data.user.id),D.success("Skráðir inn"),l.data}catch(l){return D.error(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Innskráning mistókst"),r(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Login failed")}}),Dc=se("auth/kenniLogin",async({idToken:e},{rejectWithValue:t})=>{var r,s,n,i;try{const o=await Z.post("/auth/kenni/login",{idToken:e});return localStorage.setItem("token",o.data.token),Le.connect(),Le.joinUserRoom(o.data.user.id),D.success("Innskráður með Kenni"),o.data}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Kenni innskráning mistókst"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Kenni login failed")}}),Fc=se("auth/dummyLogin",async({phone:e},{rejectWithValue:t})=>{var r,s,n,i;try{const o=await Z.post("/auth/dummy/login",{phone:e});return localStorage.setItem("token",o.data.token),Le.connect(),Le.joinUserRoom(o.data.user.id),D.success("Innskráður með dummy login"),o.data}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Dummy innskráning mistókst"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Dummy login failed")}}),xm=se("auth/register",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{const o=await Z.post("/auth/register",e);return localStorage.setItem("token",o.data.token),Le.connect(),Le.joinUserRoom(o.data.user.id),D.success("Nýskráning tókst"),o.data}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Nýskráning mistókst"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Registration failed")}}),$c=se("auth/getProfile",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/auth/profile")).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to get profile")}}),zc=se("auth/updateProfile",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{const o=await Z.put("/auth/profile",e);return D.success("Prófíll uppfærður"),o.data}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að uppfæra prófíll"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to update profile")}}),EE={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!!localStorage.getItem("token"),error:null},Zj=rr({name:"auth",initialState:EE,reducers:{logout:e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),Le.disconnect(),D.success("Útskráður")},clearError:e=>{e.error=null},setCredentials:(e,t)=>{e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0}},extraReducers:e=>{e.addCase(lo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(lo.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(lo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Dc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Dc.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Dc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Fc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Fc.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(Fc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(xm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(xm.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload.user,t.token=r.payload.token,t.isAuthenticated=!0,t.error=null}).addCase(xm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase($c.pending,t=>{t.isLoading=!0}).addCase($c.fulfilled,(t,r)=>{t.isLoading=!1,t.user=r.payload,t.isAuthenticated=!0}).addCase($c.rejected,(t,r)=>{var s,n,i;t.isLoading=!1,t.error=r.payload,((s=r.payload)!=null&&s.includes("token")||(n=r.payload)!=null&&n.includes("401")||(i=r.payload)!=null&&i.includes("Invalid"))&&(t.user=null,t.token=null,t.isAuthenticated=!1,localStorage.removeItem("token"))}).addCase(zc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(zc.fulfilled,(t,r)=>{t.isLoading=!1,t.user={...t.user,...r.payload},t.error=null}).addCase(zc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{logout:X0,clearError:PE}=Zj.actions,TE=Zj.reducer,Yn=se("orders/fetchUserOrders",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await Z.get(`/orders/my-orders?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch orders")}}),Bc=se("orders/fetchOrder",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get(`/orders/${e}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch order")}}),Uc=se("orders/createOrder",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{const o=await Z.post("/orders",e);return D.success("Pöntun stofnuð"),o.data}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að stofna pöntun"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create order")}}),co=se("orders/updateOrderStatus",async({id:e,status:t,estimatedDelivery:r},{rejectWithValue:s})=>{var n,i,o,l;try{const c=await Z.put(`/orders/${e}/status`,{status:t,estimatedDelivery:r});return D.success("Pöntunarstaða uppfærð"),c.data}catch(c){return D.error(((i=(n=c.response)==null?void 0:n.data)==null?void 0:i.message)||"Mistókst að uppfæra pöntunarstaða"),s(((l=(o=c.response)==null?void 0:o.data)==null?void 0:l.message)||"Failed to update order status")}}),Vc=se("orders/assignDeliveryPerson",async({id:e,deliveryPersonId:t},{rejectWithValue:r})=>{var s,n,i,o;try{const l=await Z.put(`/orders/${e}/assign-delivery`,{deliveryPersonId:t});return D.success("Afhendingarmaður úthlutaður"),l.data}catch(l){return D.error(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Mistókst að úthluta afhendingarmanni"),r(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to assign delivery person")}}),uo=se("orders/fetchAllOrders",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await Z.get(`/orders?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch orders")}}),Hc=se("orders/sendReceiptEmail",async({orderId:e,email:t},{rejectWithValue:r})=>{var s,n;try{return(await Z.post(`/orders/${e}/receipt/email`,{email:t})).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to send receipt email")}}),IE={orders:[],currentOrder:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},ek=rr({name:"orders",initialState:IE,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentOrder:e=>{e.currentOrder=null},clearError:e=>{e.error=null},updateOrderStatusRealtime:(e,t)=>{const{orderId:r,status:s}=t.payload,n=e.orders.findIndex(i=>i.id===r);n!==-1&&(e.orders[n].status=s,e.orders[n].updatedAt=new Date().toISOString()),e.currentOrder&&e.currentOrder.id===r&&(e.currentOrder.status=s,e.currentOrder.updatedAt=new Date().toISOString())}},extraReducers:e=>{e.addCase(Yn.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Yn.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(Yn.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Bc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Bc.fulfilled,(t,r)=>{t.isLoading=!1,t.currentOrder=r.payload,t.error=null}).addCase(Bc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Uc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Uc.fulfilled,(t,r)=>{t.isLoading=!1,t.orders.unshift(r.payload),t.error=null}).addCase(Uc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(co.pending,t=>{t.isLoading=!0,t.error=null}).addCase(co.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.orders.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.orders[s]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase(co.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Vc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Vc.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.orders.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.orders[s]=r.payload),t.currentOrder&&t.currentOrder.id===r.payload.id&&(t.currentOrder=r.payload),t.error=null}).addCase(Vc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(uo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(uo.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload.orders,t.pagination=r.payload.pagination,t.error=null}).addCase(uo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Hc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Hc.fulfilled,(t,r)=>{t.isLoading=!1,t.error=null}).addCase(Hc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:RE,clearCurrentOrder:AE,updateOrderStatusRealtime:OE}=ek.actions,LE=ek.reducer,de=()=>{const{t:e,currentLanguage:t,isLoading:r,refreshTranslations:s}=Ut();return{t:e,currentLanguage:t,isLoading:r,refreshTranslations:s}},ME=()=>({});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ee=(e,t)=>{const r=j.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},u)=>j.createElement("svg",{ref:u,...DE,width:n,height:n,stroke:s,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${FE(e)}`,l].join(" "),...d},[...t.map(([h,m])=>j.createElement(h,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=ee("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=ee("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=ee("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=ee("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=ee("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=ee("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=ee("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=ee("Beer",[["path",{d:"M17 11h1a3 3 0 0 1 0 6h-1",key:"1yp76v"}],["path",{d:"M9 12v6",key:"1u1cab"}],["path",{d:"M13 12v6",key:"1sugkk"}],["path",{d:"M14 7.5c-1 0-1.44.5-3 .5s-2-.5-3-.5-1.72.5-2.5.5a2.5 2.5 0 0 1 0-5c.78 0 1.57.5 2.5.5S9.44 2 11 2s2 1.5 3 1.5 1.72-.5 2.5-.5a2.5 2.5 0 0 1 0 5c-.78 0-1.5-.5-2.5-.5Z",key:"1510fo"}],["path",{d:"M5 8v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8",key:"19jb7n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ee("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=ee("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=ee("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=ee("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=ee("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=ee("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=ee("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=ee("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=ee("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=ee("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ee("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fg=ee("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=ee("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ee("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=ee("FileImage",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["circle",{cx:"10",cy:"13",r:"2",key:"6v46hv"}],["path",{d:"m20 17-1.09-1.09a2 2 0 0 0-2.82 0L10 22",key:"17vly1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=ee("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=ee("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=ee("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=ee("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=ee("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=ee("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=ee("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=ee("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ee("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=ee("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ee("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=ee("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=ee("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=ee("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=ee("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=ee("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ee("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=ee("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=ee("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=ee("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=ee("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=ee("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=ee("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=ee("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=ee("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=ee("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=ee("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ak=ee("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=ee("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=ee("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=ee("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sP=ee("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=ee("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nk=ee("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=ee("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=ee("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=ee("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=ee("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ik=ee("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ee("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=ee("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=ee("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=ee("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=ee("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=ee("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nP=ee("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=ee("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=ee("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=ee("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=ee("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=ee("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ok=ee("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ee("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pg=ee("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=ee("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=ee("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=ee("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=ee("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=ee("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=ee("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=ee("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=ee("Wine",[["path",{d:"M8 22h8",key:"rmew8v"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M12 15v7",key:"t2xh3l"}],["path",{d:"M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z",key:"10ffi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=ee("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=ee("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gs=se("products/fetchProducts",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.category&&e.category.trim()!==""&&n.append("category",e.category),e.subcategory&&e.subcategory.trim()!==""&&n.append("subcategory",e.subcategory),e.search&&n.append("search",e.search),e.minPrice&&n.append("minPrice",e.minPrice),e.maxPrice&&n.append("maxPrice",e.maxPrice),e.minAlcoholVolume&&n.append("minAlcoholVolume",e.minAlcoholVolume),e.maxAlcoholVolume&&n.append("maxAlcoholVolume",e.maxAlcoholVolume),e.sortBy&&n.append("sortBy",e.sortBy),e.sortOrder&&n.append("sortOrder",e.sortOrder),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await Z.get(`/products?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch products")}}),qc=se("products/fetchProduct",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get(`/products/${e}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch product")}}),mo=se("products/fetchCategories",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/categories")).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch categories")}}),vm=se("products/fetchSubcategories",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get(`/products/subcategories?categoryId=${e}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch subcategories")}}),wm=se("products/fetchDiscountedProducts",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.limit&&n.append("limit",e.limit),(await Z.get(`/products/discounted?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch discounted products")}}),fo=se("products/createProduct",async(e,{rejectWithValue:t})=>{var r,s;try{const n=new FormData;return Object.keys(e).forEach(o=>{e[o]!==null&&e[o]!==void 0&&n.append(o,e[o])}),(await Z.post("/products",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to create product")}}),go=se("products/updateProduct",async({id:e,productData:t},{rejectWithValue:r})=>{var s,n;try{const i=new FormData;return Object.keys(t).forEach(l=>{t[l]!==null&&t[l]!==void 0&&i.append(l,t[l])}),(await Z.put(`/products/${e}`,i,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update product")}}),Kc=se("products/deleteProduct",async(e,{rejectWithValue:t})=>{var r,s;try{return await Z.delete(`/products/${e}`),e}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to delete product")}}),uP={products:[],discountedProducts:[],currentProduct:null,categories:[],subcategories:[],pagination:{page:1,limit:20,total:0,pages:0},filters:{category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"},isLoading:!1,error:null},ck=rr({name:"products",initialState:uP,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={category:"",subcategory:"",search:"",minPrice:"",maxPrice:"",minAlcoholVolume:"",maxAlcoholVolume:"",sortBy:"name",sortOrder:"asc"}},clearCurrentProduct:e=>{e.currentProduct=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(gs.pending,t=>{t.isLoading=!0,t.error=null}).addCase(gs.fulfilled,(t,r)=>{t.isLoading=!1,t.products=r.payload.data.products,t.pagination=r.payload.data.pagination,t.error=null}).addCase(gs.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(qc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(qc.fulfilled,(t,r)=>{t.isLoading=!1,t.currentProduct=r.payload,t.error=null}).addCase(qc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(mo.pending,t=>{t.isLoading=!0}).addCase(mo.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload}).addCase(mo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(vm.pending,t=>{t.isLoading=!0}).addCase(vm.fulfilled,(t,r)=>{t.isLoading=!1,t.subcategories=r.payload}).addCase(vm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(wm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(wm.fulfilled,(t,r)=>{t.isLoading=!1,t.discountedProducts=r.payload,t.error=null}).addCase(wm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(fo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(fo.fulfilled,(t,r)=>{t.isLoading=!1,t.products.unshift(r.payload),t.error=null}).addCase(fo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(go.pending,t=>{t.isLoading=!0,t.error=null}).addCase(go.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.products.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.products[s]=r.payload),t.currentProduct&&t.currentProduct.id===r.payload.id&&(t.currentProduct=r.payload),t.error=null}).addCase(go.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Kc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Kc.fulfilled,(t,r)=>{t.isLoading=!1,t.products=t.products.filter(s=>s.id!==r.payload),t.currentProduct&&t.currentProduct.id===r.payload&&(t.currentProduct=null),t.error=null}).addCase(Kc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setFilters:xr,clearCurrentProduct:hP}=ck.actions,mP=ck.reducer,fP=()=>{const[e,t]=j.useState(!1);j.useEffect(()=>{const s=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;(s==="dark"||!s&&n)&&(t(!0),document.documentElement.classList.add("dark"))},[]);const r=()=>{const s=!e;t(s),console.log("Toggling dark mode:",s),s?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),console.log("Added dark class to document")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),console.log("Removed dark class from document"))};return a.jsx("button",{onClick:r,className:"p-2 text-gray-700 hover:text-primary-600 transition-colors dark:text-gray-300 dark:hover:text-primary-400","aria-label":`Switch to ${e?"light":"dark"} mode`,children:e?a.jsx(lP,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(eP,{className:"w-5 h-5","aria-hidden":"true"})})},gP=()=>{var ue,K;const{t:e}=de(),{currentLanguage:t,toggleLanguage:r}=ME(),s=gr(),n=Ue(),{isAuthenticated:i,user:o}=ne(H=>H.auth),{cart:l}=ne(H=>H.cart),{categories:c}=ne(H=>H.products),[d,u]=j.useState(!1),[h,m]=j.useState(!1),[g,f]=j.useState(!1),[x,p]=j.useState(!1),[b,y]=j.useState(""),[v,w]=j.useState([]),[k,P]=j.useState(!1),[C,N]=j.useState(!1),[S,R]=j.useState(-1),F=j.useRef(null),I=j.useRef(null),V=j.useRef(null),G=j.useRef(null),z=j.useRef(null),M=((ue=l==null?void 0:l.items)==null?void 0:ue.length)||0;j.useEffect(()=>{n(mo())},[n]),j.useEffect(()=>{const H=te=>{z.current&&!z.current.contains(te.target)&&m(!1)};return h&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[h]);const _=()=>{n(X0()),s("/"),m(!1),u(!1)},E=()=>{r()},O=(o==null?void 0:o.role)==="ADMIN",q=(o==null?void 0:o.role)==="DELIVERY",ae=j.useCallback(async H=>{var te;if(!H.trim()){w([]),P(!1);return}N(!0);try{const Re=await Z.get(`/products?search=${encodeURIComponent(H)}&limit=5`);w(((te=Re.data.data)==null?void 0:te.products)||[]),P(!0)}catch(Re){console.error("Search error:",Re),w([])}finally{N(!1)}},[]),U=j.useCallback(H=>{V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{ae(H)},300)},[ae]),re=H=>{const te=H.target.value;y(te),R(-1),te.trim()?U(te):(w([]),P(!1))},fe=()=>{b.trim()&&(s(`/products?search=${encodeURIComponent(b)}`),P(!1),y(""),w([]))},Ne=H=>{s(`/products/${H.id}`),P(!1),y(""),w([])},A=H=>{var te;if(!k||v.length===0){H.key==="Enter"&&fe();return}switch(H.key){case"ArrowDown":H.preventDefault(),R(Re=>Re<v.length-1?Re+1:Re);break;case"ArrowUp":H.preventDefault(),R(Re=>Re>0?Re-1:-1);break;case"Enter":H.preventDefault(),S>=0&&S<v.length?Ne(v[S]):fe();break;case"Escape":P(!1),R(-1),(te=F.current)==null||te.blur();break}};return j.useEffect(()=>{const H=te=>{I.current&&!I.current.contains(te.target)&&F.current&&!F.current.contains(te.target)&&(P(!1),R(-1))};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[]),j.useEffect(()=>{const H=te=>{G.current&&!G.current.contains(te.target)&&!te.target.closest("[data-shop-menu-trigger]")&&p(!1)};return x&&document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[x]),j.useEffect(()=>()=>{V.current&&clearTimeout(V.current)},[]),a.jsx("nav",{className:"bg-white dark:bg-gray-800 shadow-lg border-b border-gray-200 dark:border-gray-700 fixed top-0 left-0 right-0 z-50",role:"navigation","aria-label":e("aria.mainNavigation"),children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx(he,{to:"/",className:"flex items-center","aria-label":e("aria.homepage"),children:a.jsx("img",{src:"/logo_black-web.webp",alt:e("aria.logo"),className:"h-12 w-auto dark:invert"})}),a.jsxs("div",{className:"hidden md:flex items-center space-x-6",children:[a.jsxs("div",{className:"relative",ref:I,children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:F,type:"text",value:b,onChange:re,onKeyDown:A,placeholder:e("search.placeholder"),className:"w-64 pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white transition-all duration-200",autoComplete:"off"}),a.jsx("button",{onClick:fe,className:"absolute right-2 top-2 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400 transition-colors","aria-label":"Search",children:a.jsx(nt,{className:"w-4 h-4"})})]}),k&&a.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 max-h-96 overflow-y-auto z-[70]",children:C?a.jsx("div",{className:"px-4 py-3 text-center text-gray-500 dark:text-gray-400",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),a.jsx("span",{children:e("search.searching")})]})}):v.length>0?a.jsxs("div",{children:[v.map((H,te)=>{var Re,Ar;return a.jsx("button",{onClick:()=>Ne(H),className:`w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-b-0 ${te===S?"bg-primary-50 dark:bg-primary-900/20":""}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:H.imageUrl?a.jsx("img",{src:`http://192.168.8.62:5000${H.imageUrl}`,alt:H.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(we,{className:"w-5 h-5 text-gray-400"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t==="is"&&H.nameIs||H.name}),a.jsxs("span",{className:"text-sm font-semibold text-primary-600 dark:text-primary-400 ml-2 flex-shrink-0",children:[H.price.toLocaleString()," ",e("common.currency")]})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:t==="is"&&H.descriptionIs||H.description}),a.jsxs("div",{className:"flex items-center mt-1 space-x-2",children:[a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300",children:t==="is"?((Re=H.category)==null?void 0:Re.nameIs)||"Flokkur":((Ar=H.category)==null?void 0:Ar.name)||"Category"}),H.alcoholContent&&a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[H.alcoholContent,"% ",e("product.abv")]})]})]})]})},H.id)}),a.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700",children:a.jsxs("button",{onClick:fe,className:"w-full px-4 py-3 text-center text-primary-600 dark:text-primary-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:[e("search.viewAllResults"),' "',b,'"']})})]}):b.trim()&&!C?a.jsxs("div",{className:"px-4 py-6 text-center",children:[a.jsx(we,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e("search.noResults"),' "',b,'"']})]}):null})]}),a.jsx(he,{to:"/products",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("productsPage.all")}),a.jsxs("div",{className:"relative",ref:G,children:[a.jsxs("button",{"data-shop-menu-trigger":!0,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors flex items-center",children:[e("navigation","shop"),a.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a.jsxs("div",{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),className:`absolute top-full left-1/2 transform -translate-x-1/2 mt-2 w-[1100px] max-w-[90vw] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[70] transition-all duration-300 overflow-hidden ${x?"opacity-100 visible":"opacity-0 invisible"}`,children:[a.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-primary-50 to-primary-100 dark:from-primary-900/20 dark:to-primary-800/20 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("navigation.shop")}),a.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:e("navigation.discoverCategories")})]}),a.jsx(he,{to:"/products",onClick:()=>p(!1),className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-lg transition-colors font-semibold text-base",children:e("navigation.viewAllProducts")})]})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"grid grid-cols-4 gap-4",children:c.filter(H=>H.isActive).map(H=>{var te;return a.jsxs(he,{to:`/products?category=${H.name}`,onClick:()=>p(!1),className:"group block p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-primary-50 dark:hover:bg-primary-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-primary-200 dark:hover:border-primary-700",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white dark:bg-gray-600 rounded-lg group-hover:scale-110 transition-transform duration-200 flex-shrink-0",children:H.imageUrl?a.jsx("img",{src:`http://192.168.8.62:5000${H.imageUrl}`,alt:H.name,className:"w-8 h-8 object-contain"}):a.jsxs("span",{className:"text-2xl",children:[H.name==="WINE"&&"🍷",H.name==="BEER"&&"🍺",H.name==="SPIRITS"&&"🥃",H.name==="VAPE"&&"💨",H.name==="NICOTINEPADS"&&"📱",!["WINE","BEER","SPIRITS","VAPE","NICOTINEPADS"].includes(H.name)&&"📦"]})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-bold text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-400 transition-colors text-base truncate",children:t==="is"?H.nameIs:H.name}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{children:[((te=H._count)==null?void 0:te.products)||0," ",e("common.itemsLabel")]}),H.subcategories&&H.subcategories.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"•"}),a.jsxs("span",{children:[H.subcategories.length," ",e("adminCategories.subcategories").toLowerCase()]})]})]})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3 leading-relaxed",children:t==="is"?H.descriptionIs||H.description:H.description||e("category.fallbackDescription")}),H.subcategories&&H.subcategories.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2",children:[H.subcategories.slice(0,4).map(Re=>a.jsx("span",{className:"inline-block px-3 py-1.5 text-sm bg-white dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-md font-medium",children:t==="is"&&Re.nameIs||Re.name},Re.id)),H.subcategories.length>4&&a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 px-3 py-1.5 font-medium",children:["+",H.subcategories.length-4]})]})]},H.id)})})}),a.jsx("div",{className:"px-8 py-4 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-base text-gray-600 dark:text-gray-400",children:[e("navigation.needHelp")," ",a.jsx("a",{href:"/contact",className:"text-primary-600 dark:text-primary-400 hover:underline font-semibold",children:e("navigation.contactUs")})]})})})]})]}),i&&a.jsx(a.Fragment,{children:q&&a.jsx(he,{to:"/delivery",className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation.delivery")})})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(fP,{}),i&&O&&a.jsxs("div",{className:"relative group",children:[a.jsx("button",{onClick:()=>{s("/admin"),f(!1)},className:"p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":e("navigation.admin"),"aria-expanded":g,"aria-haspopup":"true",children:a.jsx(fs,{className:"w-5 h-5"})}),a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-[850px] max-w-[90vw] bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 z-[70] opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 overflow-hidden lg:left-1/2 lg:transform lg:-translate-x-1/2 lg:right-auto",children:[a.jsx("div",{className:"px-8 py-4 bg-gradient-to-r from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-800/20 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e("navigation.admin")}),a.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400",children:e("adminDashboard.manageYourStore")})]}),a.jsx(he,{to:"/admin",className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-semibold text-base",onClick:()=>f(!1),children:e("adminDashboard.dashboard")})]})}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-base font-bold text-gray-900 dark:text-white mb-4 px-2",children:e("adminDashboard.coreManagement")}),a.jsxs(he,{to:"/admin/products",className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-blue-200 dark:hover:border-blue-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx(we,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white text-base",children:e("navigation.products")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageProducts")})]})]}),a.jsxs(he,{to:"/admin/orders",className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-blue-200 dark:hover:border-blue-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white text-base",children:e("navigation.orders")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageOrders")})]})]}),a.jsxs(he,{to:"/admin/customers",className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-blue-200 dark:hover:border-blue-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx(ur,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-semibold text-gray-900 dark:text-white text-base",children:e("navigation.customers")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageCustomers")})]})]}),a.jsxs(he,{to:"/admin/categories",className:"flex items-center space-x-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-blue-200 dark:hover:border-blue-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("navigation.categories")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageCategories")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 px-2",children:e("adminDashboard.analyticsReports")}),a.jsxs(he,{to:"/admin/analytics",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-green-200 dark:hover:border-green-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("admin.analytics")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.viewAnalytics")})]})]}),a.jsxs(he,{to:"/admin/reports",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-green-200 dark:hover:border-green-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("adminDashboard.reports")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.generateReports")})]})]}),a.jsxs(he,{to:"/admin/chat",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-green-200 dark:hover:border-green-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("chat.title")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageChat")})]})]}),a.jsxs(he,{to:"/admin/notifications",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-green-200 dark:hover:border-green-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12.828 7H4.828zM4.828 7H3a1 1 0 00-1 1v10a1 1 0 001 1h10a1 1 0 001-1v-1.828"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("adminDashboard.notifications")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageNotifications")})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 px-2",children:e("adminDashboard.settingsTools")}),a.jsxs(he,{to:"/admin/settings",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-purple-200 dark:hover:border-purple-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx(fs,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("navigation.settings")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.systemSettings")})]})]}),a.jsxs(he,{to:"/admin/translations",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-purple-200 dark:hover:border-purple-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx(Zd,{className:"w-4 h-4 text-purple-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("adminDashboard.translations")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageTranslations")})]})]}),a.jsxs(he,{to:"/admin/banners",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-purple-200 dark:hover:border-purple-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("adminDashboard.banners")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageBanners")})]})]}),a.jsxs(he,{to:"/admin/demo-data",className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/20 hover:shadow-md transition-all duration-200 border border-transparent hover:border-purple-200 dark:hover:border-purple-700",onClick:()=>f(!1),children:[a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-white dark:bg-gray-600 rounded-lg",children:a.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e("adminDashboard.demoData")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminDashboard.manageDemoData")})]})]})]})]})}),a.jsx("div",{className:"px-6 py-3 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e("adminDashboard.quickAccess")," ",a.jsx(he,{to:"/admin",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:e("adminDashboard.dashboard")})]})})})]})]}),a.jsxs("button",{onClick:E,className:"flex items-center space-x-1 text-gray-700 hover:text-primary-600 transition-colors dark:text-gray-300 dark:hover:text-primary-400","aria-label":e("aria.changeLanguage"),children:[a.jsx(Zd,{className:"w-4 h-4","aria-hidden":"true"}),a.jsx("span",{className:"text-sm",children:t==="en"?"EN":"IS"})]}),i&&a.jsxs(he,{to:"/cart",className:"relative p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":`Shopping cart with ${M} items`,children:[a.jsx(_r,{className:"w-5 h-5","aria-hidden":"true"}),M>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center","aria-label":`${M} items in cart`,children:M})]}),i?a.jsxs("div",{className:"relative",ref:z,children:[a.jsxs("button",{onClick:()=>m(!h),className:"flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.userMenu"),"aria-expanded":h,"aria-haspopup":"true",children:[a.jsx(ur,{className:"w-5 h-5","aria-hidden":"true"}),a.jsx("span",{className:"hidden sm:block text-gray-900 dark:text-white",children:((K=o==null?void 0:o.fullName)==null?void 0:K.split(" ")[0])||(o==null?void 0:o.username)})]}),h&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-[70] border border-gray-200 dark:border-gray-700",role:"menu","aria-label":e("aria.userMenu"),children:[a.jsx(he,{to:"/profile",onClick:()=>m(!1),className:"block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.profile")}),a.jsx("button",{onClick:_,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",role:"menuitem",children:e("navigation.logout")})]})]}):a.jsx(he,{to:"/login",className:"btn btn-outline",children:e("navigation.login")}),a.jsx("button",{onClick:()=>u(!d),className:"md:hidden p-2 text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors","aria-label":e("aria.toggleMobileMenu"),"aria-expanded":d,children:d?a.jsx(Fe,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(gg,{className:"w-5 h-5","aria-hidden":"true"})})]})]}),d&&a.jsxs("div",{className:"fixed inset-0 z-[60] md:hidden",children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>u(!1)}),a.jsx("div",{className:"fixed right-0 top-0 h-full w-80 bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("navigation.menu")}),a.jsx("button",{onClick:()=>u(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx(Fe,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto py-4",children:[a.jsx("div",{className:"px-4 mb-4",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:b,onChange:re,onKeyDown:H=>{H.key==="Enter"&&(fe(),u(!1))},placeholder:e("search.placeholder"),className:"w-full pl-4 pr-10 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-white",autoComplete:"off"}),a.jsx("button",{onClick:()=>{fe(),u(!1)},className:"absolute right-3 top-3 text-gray-500 hover:text-primary-600 dark:text-gray-400 dark:hover:text-primary-400",children:a.jsx(nt,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex flex-col space-y-2 px-4",children:[a.jsx(he,{to:"/products",onClick:()=>u(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("productsPage.all")}),c.map(H=>a.jsx(he,{to:`/products?category=${H.name}`,onClick:()=>u(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:t==="is"?H.nameIs:H.name},H.id)),i&&a.jsxs(a.Fragment,{children:[a.jsx(he,{to:"/profile",onClick:()=>u(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.profile")}),O&&a.jsx(he,{to:"/admin",onClick:()=>u(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.admin")}),q&&a.jsx(he,{to:"/delivery",onClick:()=>u(!1),className:"text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e("navigation.delivery")}),a.jsx("button",{onClick:_,className:"text-left text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 w-full",children:e("navigation.logout")})]})]})]})]})})]})]})})},pP=()=>{const{t:e}=de();return a.jsx("footer",{className:"bg-white dark:bg-gray-800 shadow-lg border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-1 md:col-span-2",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("img",{src:"/logo_black-web.webp",alt:"Ölföng Logo",className:"h-16 w-auto dark:invert"})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4 max-w-md",children:e("footer","description")}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"📞 +354 555 1234"}),a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"✉️ info@olfong.is"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:e("footer","quickLinks")}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(he,{to:"/products",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation","products")})}),a.jsx("li",{children:a.jsx(he,{to:"/products?category=WINE",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation","wine")})}),a.jsx("li",{children:a.jsx(he,{to:"/products?category=BEER",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation","beer")})}),a.jsx("li",{children:a.jsx(he,{to:"/products?category=SPIRITS",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation","spirits")})}),a.jsx("li",{children:a.jsx(he,{to:"/products?category=NON_ALCOHOLIC",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation","non_alcoholic")})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:e("footer","customerService")}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(he,{to:"/profile",className:"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors",children:e("navigation","orders")})}),a.jsx("li",{children:a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:e("footer","openingHoursLabel")})}),a.jsx("li",{className:"text-gray-600 dark:text-gray-300 text-sm whitespace-pre-line",children:e("footer","openingHoursValue")})]})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 mt-8 pt-8 text-center",children:[a.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:["© 2025 Ölföng. ",e("footer","rightsReserved")]}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:e("footer","ageLimitNotice")})]})]})})},xP=()=>{var o;const{t:e}=de(),t=tr(),{isAuthenticated:r}=ne(l=>l.auth),{cart:s}=ne(l=>l.cart),n=((o=s==null?void 0:s.items)==null?void 0:o.length)||0,i=[{to:"/",icon:qE,label:e("navigation","home"),active:t.pathname==="/"},{to:"/products",icon:we,label:e("navigation","products"),active:t.pathname==="/products"||t.pathname.startsWith("/products/")},...r?[{to:"/cart",icon:_r,label:e("navigation","cart"),active:t.pathname==="/cart",badge:n>0?n:null}]:[],...r?[{to:"/profile",icon:ur,label:e("navigation","profile"),active:t.pathname==="/profile"}]:[{to:"/login",icon:ur,label:e("navigation","login"),active:t.pathname==="/login"}]];return a.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40",children:a.jsx("div",{className:"flex justify-around items-center h-16",children:i.map(l=>{const c=l.icon;return a.jsxs(he,{to:l.to,className:`flex flex-col items-center justify-center flex-1 py-2 px-1 text-xs transition-colors min-h-[44px] ${l.active?"text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"}`,children:[a.jsxs("div",{className:"relative",children:[a.jsx(c,{className:"w-5 h-5 mb-1"}),l.badge&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-primary-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:l.badge})]}),a.jsx("span",{className:"text-center leading-tight",children:l.label})]},l.to)})})})};var dk={exports:{}},yP="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",bP=yP,vP=bP;function uk(){}function hk(){}hk.resetWarningCache=uk;var wP=function(){function e(s,n,i,o,l,c){if(c!==vP){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:hk,resetWarningCache:uk};return r.PropTypes=r,r};dk.exports=wP();var sp=dk.exports;const J=fv(sp),Ae=({size:e="medium",className:t=""})=>{const r={small:"w-4 h-4",medium:"w-6 h-6",large:"w-8 h-8"};return a.jsx("div",{className:`flex items-center justify-center ${t}`,children:a.jsx(Tt,{className:`${r[e]} animate-spin text-primary-600`})})};Ae.propTypes={size:J.oneOf(["small","medium","large"]),className:J.string};const jm=({children:e,requiredRole:t})=>{const{isAuthenticated:r,user:s,isLoading:n}=ne(o=>o.auth),i=tr();if(n)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})});if(!r){const o=t==="ADMIN"?"/admin-login":"/login";return a.jsx(el,{to:o,state:{from:i},replace:!0})}return t&&(s==null?void 0:s.role)!==t?a.jsx(el,{to:"/",replace:!0}):e||a.jsx(g3,{})},jP=()=>{const{t:e}=Ut(),t=tr(),r=gr(),{user:s,isAuthenticated:n}=ne(M=>M.auth),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[d,u]=j.useState(null),[h,m]=j.useState(!1),[g]=j.useState(null),[f,x]=j.useState([]),[p,b]=j.useState(""),[y,v]=j.useState(0),[w,k]=j.useState(!1),P=j.useRef(null),C=j.useRef(null),N=j.useRef(null),S=async()=>{if(n)try{k(!0);const M=await Z.get("/chat/conversations");M.data.length>0&&(u(M.data[0]),await R(M.data[0].id))}catch(M){console.error("Failed to initialize chat:",M)}finally{k(!1)}},R=async M=>{try{const _=await Z.get(`/chat/conversations/${M}/messages`);x(_.data),F()}catch(_){console.error("Failed to load messages:",_)}},F=()=>{P.current&&P.current.scrollIntoView({behavior:"smooth"})},I=async()=>{if(!p.trim()||!d)return;const M={conversationId:d.id,content:p.trim(),topic:g};try{const _=await Z.post("/chat/messages",M);x(E=>[...E,_.data]),b(""),F()}catch(_){console.error("Failed to send message:",_),_e.error("Failed to send message")}},V=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),I())},G=()=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{},1e3)};return j.useEffect(()=>{S()},[n]),j.useEffect(()=>{F()},[f]),j.useEffect(()=>{d&&R(d.id)},[d]),j.useEffect(()=>{if(!n)return;const M=E=>{E.conversationId===(d==null?void 0:d.id)&&x(O=>[...O,E]),v(O=>O+1)},_=E=>{E.conversationId===(d==null?void 0:d.id)&&m(E.isTyping)};return Le.on("newMessage",M),Le.on("typingStatus",_),()=>{Le.off("newMessage",M),Le.off("typingStatus",_)}},[n,d]),t.pathname.startsWith("/admin")?null:n?a.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:i?a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-80 h-96 flex flex-col",children:[a.jsxs("div",{className:"bg-blue-600 text-white p-3 rounded-t-lg flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:e("chat","title")}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>c(!l),className:"text-white hover:bg-blue-700 p-1 rounded",children:l?a.jsx(JE,{size:16}):a.jsx(ZE,{size:16})}),a.jsx("button",{onClick:()=>o(!1),className:"text-white hover:bg-blue-700 p-1 rounded",children:a.jsx(Fe,{size:16})})]})]}),!l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:[w?a.jsx("div",{className:"text-center text-gray-500",children:e("common","loading")}):f.map(M=>a.jsx("div",{className:`flex ${M.senderId===(s==null?void 0:s.id)?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs p-2 rounded-lg ${M.senderId===(s==null?void 0:s.id)?"bg-blue-600 text-white":"bg-gray-200 text-gray-800"}`,children:[a.jsx("p",{className:"text-sm",children:M.content}),a.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(M.createdAt).toLocaleTimeString()})]})},M.id)),h&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-gray-200 text-gray-800 p-2 rounded-lg",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),a.jsx("div",{ref:P})]}),a.jsx("div",{className:"p-3 border-t",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{ref:N,type:"text",value:p,onChange:M=>{b(M.target.value),G()},onKeyPress:V,placeholder:e("chat","typeMessage"),className:"flex-1 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("button",{onClick:I,disabled:!p.trim(),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(rp,{size:16})})]})})]})]}):a.jsxs("button",{onClick:()=>o(!0),className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors relative",children:[a.jsx(di,{size:24}),y>0&&a.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center",children:y})]})}):a.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:a.jsx("button",{onClick:()=>r("/login"),className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 transition-colors",children:a.jsx(di,{size:24})})})},kP=()=>{const{user:e,isAuthenticated:t}=ne(r=>r.auth);return t&&(e==null?void 0:e.role)==="ADMIN"},sn=se("categories/fetchCategories",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.includeInactive&&n.append("includeInactive","true"),(await Z.get(`/categories?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch categories")}}),km=se("categories/fetchCategory",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get(`/categories/${e}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch category")}}),Gc=se("categories/createCategory",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.post("/categories",e)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to create category")}}),Yc=se("categories/updateCategory",async({id:e,...t},{rejectWithValue:r})=>{var s,n;try{return(await Z.put(`/categories/${e}`,t)).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update category")}}),Qc=se("categories/deleteCategory",async(e,{rejectWithValue:t})=>{var r,s;try{return await Z.delete(`/categories/${e}`),e}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to delete category")}}),NP={categories:[],currentCategory:null,isLoading:!1,error:null},SP=rr({name:"categories",initialState:NP,reducers:{clearCurrentCategory:e=>{e.currentCategory=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(sn.pending,t=>{t.isLoading=!0,t.error=null}).addCase(sn.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=r.payload,t.error=null}).addCase(sn.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(km.pending,t=>{t.isLoading=!0,t.error=null}).addCase(km.fulfilled,(t,r)=>{t.isLoading=!1,t.currentCategory=r.payload,t.error=null}).addCase(km.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Gc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Gc.fulfilled,(t,r)=>{t.isLoading=!1,t.categories.push(r.payload),t.error=null}).addCase(Gc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Yc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Yc.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.categories.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.categories[s]=r.payload),t.currentCategory&&t.currentCategory.id===r.payload.id&&(t.currentCategory=r.payload),t.error=null}).addCase(Yc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Qc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Qc.fulfilled,(t,r)=>{t.isLoading=!1,t.categories=t.categories.filter(s=>s.id!==r.payload),t.currentCategory&&t.currentCategory.id===r.payload&&(t.currentCategory=null),t.error=null}).addCase(Qc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),CP=SP.reducer,po=se("banners/fetchBanners",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.includeInactive&&n.append("includeInactive","true"),(await Z.get(`/banners?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch banners")}}),Nm=se("banners/fetchBanner",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get(`/banners/${e}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch banner")}}),Xc=se("banners/createBanner",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.post("/banners",e)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to create banner")}}),Jc=se("banners/updateBanner",async({id:e,...t},{rejectWithValue:r})=>{var s,n;try{return(await Z.put(`/banners/${e}`,t)).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to update banner")}}),Zc=se("banners/deleteBanner",async(e,{rejectWithValue:t})=>{var r,s;try{return await Z.delete(`/banners/${e}`),e}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to delete banner")}}),ed=se("banners/toggleBannerStatus",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.patch(`/banners/${e}/toggle`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to toggle banner status")}}),xo=se("banners/fetchFeaturedBanners",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/banners/featured")).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch featured banners")}}),yo=se("banners/setFeaturedBanner",async({id:e,featuredOrder:t},{rejectWithValue:r})=>{var s,n;try{return(await Z.patch(`/banners/${e}/featured`,{featuredOrder:t})).data}catch(i){return r(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to set banner as featured")}}),bo=se("banners/removeFeaturedBanner",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.delete(`/banners/${e}/featured`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to remove banner from featured")}}),_P={banners:[],featuredBanners:[],currentBanner:null,isLoading:!1,error:null},EP=rr({name:"banners",initialState:_P,reducers:{clearCurrentBanner:e=>{e.currentBanner=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(po.pending,t=>{t.isLoading=!0,t.error=null}).addCase(po.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=r.payload,t.error=null}).addCase(po.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Nm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Nm.fulfilled,(t,r)=>{t.isLoading=!1,t.currentBanner=r.payload,t.error=null}).addCase(Nm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Xc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Xc.fulfilled,(t,r)=>{t.isLoading=!1,t.banners.push(r.payload),t.error=null}).addCase(Xc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Jc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Jc.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.banners.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.banners[s]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(Jc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Zc.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Zc.fulfilled,(t,r)=>{t.isLoading=!1,t.banners=t.banners.filter(s=>s.id!==r.payload),t.currentBanner&&t.currentBanner.id===r.payload&&(t.currentBanner=null),t.error=null}).addCase(Zc.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ed.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ed.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.banners.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.banners[s]=r.payload),t.currentBanner&&t.currentBanner.id===r.payload.id&&(t.currentBanner=r.payload),t.error=null}).addCase(ed.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(xo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(xo.fulfilled,(t,r)=>{t.isLoading=!1,t.featuredBanners=r.payload,t.error=null}).addCase(xo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(yo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(yo.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.banners.findIndex(n=>n.id===r.payload.id);if(s!==-1&&(t.banners[s]=r.payload),r.payload.isFeatured){const n=t.featuredBanners.findIndex(i=>i.id===r.payload.id);n!==-1?t.featuredBanners[n]=r.payload:(t.featuredBanners.push(r.payload),t.featuredBanners.sort((i,o)=>(i.featuredOrder||0)-(o.featuredOrder||0)))}t.error=null}).addCase(yo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(bo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(bo.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.banners.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.banners[s]=r.payload),t.featuredBanners=t.featuredBanners.filter(n=>n.id!==r.payload.id),t.error=null}).addCase(bo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),PP=EP.reducer,ap=(e,t,r)=>e==="is"?t||r||"":r||t||"",mk=(e,t,r)=>e==="is"?t&&t.length>0?t:r||[]:r&&r.length>0?r:t||[],gn=(e,t)=>ap(e,t.nameIs,t.name),xh=(e,t)=>ap(e,t.descriptionIs,t.description),TP=(e,t)=>ap(e,t.countryIs,t.country),Fn=(e,t)=>mk(e,t.foodPairingsIs,t.foodPairings),Oy=(e,t)=>mk(e,t.specialAttributesIs,t.specialAttributes),yh=({product:e,className:t="w-full h-64 object-cover",currentLanguage:r="is"})=>{var c;const[s,n]=j.useState(!1),i=d=>typeof d=="string"?d:d&&typeof d=="object"&&(d.name||d.slug)||"",o=d=>{const u=i(d);switch(u==null?void 0:u.toUpperCase()){case"WINE":return a.jsx(lk,{className:"w-16 h-16 text-primary-300"});case"BEER":return a.jsx(rk,{className:"w-16 h-16 text-primary-300"});case"NICOTINE":return a.jsx(we,{className:"w-16 h-16 text-primary-300"});default:return a.jsx(we,{className:"w-16 h-16 text-primary-300"})}},l=d=>{const u=i(d);switch(u==null?void 0:u.toUpperCase()){case"WINE":return"from-red-50 to-red-100";case"BEER":return"from-amber-50 to-amber-100";case"NICOTINE":return"from-gray-50 to-gray-100";default:return"from-gray-50 to-gray-100"}};return!e.imageUrl||s?a.jsx("div",{className:`bg-gradient-to-br ${l(e.category)} flex items-center justify-center relative ${t}`,children:a.jsxs("div",{className:"text-center",children:[o(e.category),a.jsx("div",{className:"mt-2",children:a.jsx("span",{className:"text-primary-400 text-sm font-medium",children:((c=i(e.category))==null?void 0:c.toLowerCase())||"Product"})})]})}):a.jsx("img",{src:`http://192.168.8.62:5000${e.imageUrl}`,alt:gn(r,e),className:t,onError:()=>n(!0),loading:"lazy"})};yh.propTypes={product:J.object.isRequired,className:J.string,currentLanguage:J.string};const IP=({category:e,limit:t=6})=>{const{t:r,currentLanguage:s}=de(),[n,i]=j.useState([]),[o,l]=j.useState(!0);j.useEffect(()=>{(async()=>{try{l(!0);const h=await Z.get("/products?category=${category","name}&limit=${limit}");i(h.data.products||[])}catch(h){console.error("Error fetching category products:",h),i([])}finally{l(!1)}})()},[e.name,t]);const c=u=>{u.scrollBy({left:-300,behavior:"smooth"})},d=u=>{u.scrollBy({left:300,behavior:"smooth"})};return o&&n.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name})}),a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(Ae,{size:"medium"})})]}):n.length===0?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.nameIs||e.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.length," ",r("common","itemsLabel")]})]}),a.jsx(he,{to:`/products?category=${e.name}`,className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:r("common","viewAll")})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.map(u=>a.jsx("div",{className:"flex-shrink-0 w-64",children:a.jsx("div",{className:"group h-full",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[a.jsx(he,{to:`/products/${u.id}`,className:"block flex-shrink-0",children:a.jsxs("div",{className:"relative overflow-hidden bg-gray-50 dark:bg-gray-900",children:[a.jsx(yh,{product:u,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105",currentLanguage:s}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${u.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:u.stock>0?r("products","inStock"):r("products","outOfStock")})})]})}),a.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[a.jsxs("div",{className:"mb-3 flex-1",children:[a.jsx("h4",{className:"font-bold text-lg mb-2 text-gray-900 dark:text-white line-clamp-2 leading-tight",children:gn(s,u)}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:xh(s,u)})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[u.price.toLocaleString()," ",r("common","currency")]})})]})]})})},u.id))}),a.jsx("button",{onClick:u=>c(u.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:a.jsx(Z0,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),a.jsx("button",{onClick:u=>d(u.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:a.jsx(ep,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},RP=({limit:e=6})=>{const{t,currentLanguage:r}=de(),{products:s,isLoading:n}=ne(c=>c.products),i=s.filter(c=>c.discountPercentage&&c.discountPercentage>0).slice(0,e),o=c=>{c.scrollBy({left:-300,behavior:"smooth"})},l=c=>{c.scrollBy({left:300,behavior:"smooth"})};return n&&i.length===0?a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted","title")})}),a.jsx("div",{className:"flex justify-center py-8",children:a.jsx(Ae,{size:"medium"})})]}):i.length===0?null:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:t("home.discounted","title")}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.length," ",t("common","itemsLabel")]})]}),a.jsx(he,{to:"/products?discounted=true",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 font-medium text-sm",children:t("common","viewAll")})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"flex gap-4 overflow-x-auto scrollbar-hide pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.map(c=>{var d;return a.jsx("div",{className:"flex-shrink-0 w-64",children:a.jsx("div",{className:"group h-full",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[a.jsx(he,{to:`/products/${c.id}`,className:"block flex-shrink-0",children:a.jsxs("div",{className:"relative overflow-hidden bg-gray-50 dark:bg-gray-900",children:[a.jsx(yh,{product:c,className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105",currentLanguage:r}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),a.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-2",children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium shadow-lg ${c.stock>0?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:c.stock>0?t("products","inStock"):t("products","outOfStock")}),a.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:["-",c.discountPercentage,"%"]})]})]})}),a.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[a.jsxs("div",{className:"mb-3 flex-1",children:[a.jsx("h4",{className:"font-bold text-lg mb-2 text-gray-900 dark:text-white line-clamp-2 leading-tight",children:gn(r,c)}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-2",children:xh(r,c)})]}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:[(d=c.discountedPrice)==null?void 0:d.toLocaleString()," ",t("common","currency")]}),a.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[c.price.toLocaleString()," ",t("common","currency")]})]})})]})]})})},c.id)})}),a.jsx("button",{onClick:c=>o(c.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:a.jsx(Z0,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),a.jsx("button",{onClick:c=>l(c.target.closest(".relative").querySelector(".overflow-x-auto")),className:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-4 bg-white dark:bg-gray-800 shadow-lg rounded-full p-3 hover:shadow-xl transition-shadow duration-200 opacity-0 group-hover:opacity-100 min-w-[44px] min-h-[44px] flex items-center justify-center",children:a.jsx(ep,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]})},AP=()=>{var p,b;const{t:e}=de(),t=Ue(),r=kP(),{categories:s,isLoading:n}=ne(y=>y.categories),{banners:i,featuredBanners:o}=ne(y=>y.banners),{products:l}=ne(y=>y.products);j.useEffect(()=>{t(sn()),t(xo()),r&&t(po({includeInactive:!0})),t(gs({limit:100}))},[t,r]);const c=j.useMemo(()=>[{imageUrl:"/898-1200-x-300-px-2.webp",alt:"Ölföng Banner 1",title:"Premium Wine Selection",description:"Discover our curated collection of fine wines"},{imageUrl:"/Allir-nikotin-pudar-a-890-768-x-300-px-4.webp",alt:"Ölföng Banner 2",title:"Quality Beer Collection",description:"Explore our wide range of craft and premium beers"},{imageUrl:"/Allir-nikotin-pudar-a-890-768-x-300-px-768-x-250-px-2.webp",alt:"Ölföng Banner 3",title:"Special Offers",description:"Don't miss out on our exclusive deals and discounts"},{imageUrl:"/Allir-nikotin-pudar-a-890-768-x-300-px-768-x-250-px.webp",alt:"Ölföng Banner 4",title:"Fast Delivery",description:"Quick and reliable delivery to your doorstep"}],[]),d=j.useMemo(()=>o.length>0?o.map(y=>({id:y.id,imageUrl:y.imageUrl,alt:y.alt||"Ölföng Banner",title:y.titleIs||y.title,description:y.descriptionIs||y.description,link:y.link,featuredOrder:y.featuredOrder})):c,[o]),u=l.some(y=>y.discountPercentage&&y.discountPercentage>0),[h,m]=j.useState([]);j.useEffect(()=>{if(d.length===0){m([]);return}const v=[...d].sort((w,k)=>(w.featuredOrder||0)-(k.featuredOrder||0)).slice(0,Math.min(3,d.length));m(v)},[d]);const g=y=>h[y]||null,f=async(y,v)=>{if(r)try{const w=h[y];w&&w.id&&await t(bo(w.id)),v&&await t(yo({id:v,featuredOrder:y+1})),t(xo())}catch(w){console.error("Error switching banner:",w)}},x=j.useMemo(()=>[{icon:a.jsx(lk,{className:"w-8 h-8 text-primary-600"}),title:e("navigation","wine"),description:e("home","features").wineDescription,link:"/products?category=WINE"},{icon:a.jsx(rk,{className:"w-8 h-8 text-primary-600"}),title:e("navigation","beer"),description:e("home","features").beerDescription,link:"/products?category=BEER"},{icon:a.jsx(lr,{className:"w-8 h-8 text-primary-600"}),title:e("delivery","title"),description:e("home","features").deliveryDescription,link:"/products"},{icon:a.jsx(nP,{className:"w-8 h-8 text-primary-600"}),title:e("home","features").ageVerificationTitle,description:e("home","features").ageVerificationDescription,link:"/products"}],[e]);return a.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900",children:[a.jsx("section",{className:"bg-gradient-to-r from-gray-700 to-gray-900 text-white",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("img",{src:"/logo_black-web.webp",alt:e("home","olfongLogoAlt"),className:"h-20 md:h-32 w-auto invert"})}),a.jsx("p",{className:"text-xl md:text-2xl mb-8 text-gray-200",children:e("home","hero").subtitle}),a.jsx("div",{className:"flex justify-center",children:a.jsx(he,{to:"/products",className:"btn bg-white text-gray-800 hover:bg-gray-100 px-8 py-3 text-lg",children:e("home","hero").startShopping})})]})})}),a.jsx("section",{className:"py-16 bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home","why").title}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home","why").subtitle})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:x.map((y,v)=>a.jsxs(he,{to:y.link,className:"card p-6 text-center hover:shadow-lg transition-shadow duration-200",children:[a.jsx("div",{className:"flex justify-center mb-4",children:y.icon}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:y.title}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:y.description})]},v))})]})})}),u&&a.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home","discounted").title}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home","discounted").subtitle})]}),a.jsx(RP,{limit:6})]})}),g(0)&&a.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[a.jsx("img",{src:g(0).imageUrl,alt:g(0).alt,className:"w-full h-64 md:h-80 object-cover"}),(g(0).title||g(0).description)&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:a.jsxs("div",{className:"p-6 text-white",children:[g(0).title&&a.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:g(0).title}),g(0).description&&a.jsx("p",{className:"text-lg opacity-90",children:g(0).description})]})}),r&&a.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((p=g(0))==null?void 0:p.id)||"",onChange:y=>f(0,y.target.value||null),children:[a.jsx("option",{value:"",children:"Select Banner"}),i.filter(y=>y.isActive).map(y=>a.jsx("option",{value:y.id,children:y.titleIs||y.title||`Banner ${y.id}`},y.id))]})})]})})}),!n&&s.length>0&&a.jsx("section",{className:"py-16 bg-white dark:bg-gray-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home","categories").title}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home","categories").subtitle})]}),a.jsx("div",{className:"space-y-8",children:s.map(y=>a.jsx(IP,{category:y,limit:6},y.id))})]})}),g(1)&&a.jsx("section",{className:"py-8 bg-gray-50 dark:bg-gray-900",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden group",children:[a.jsx("img",{src:g(1).imageUrl,alt:g(1).alt,className:"w-full h-64 md:h-80 object-cover"}),(g(1).title||g(1).description)&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent flex items-end",children:a.jsxs("div",{className:"p-6 text-white",children:[g(1).title&&a.jsx("h3",{className:"text-2xl md:text-3xl font-bold mb-2",children:g(1).title}),g(1).description&&a.jsx("p",{className:"text-lg opacity-90",children:g(1).description})]})}),r&&a.jsx("div",{className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:a.jsxs("select",{className:"bg-black/80 text-white text-sm px-3 py-1 rounded border border-white/20",value:((b=g(1))==null?void 0:b.id)||"",onChange:y=>f(1,y.target.value||null),children:[a.jsx("option",{value:"",children:"Select Banner"}),i.filter(y=>y.isActive).map(y=>a.jsx("option",{value:y.id,children:y.titleIs||y.title||`Banner ${y.id}`},y.id))]})})]})})}),a.jsx("section",{className:"py-16 bg-white dark:bg-gray-800 hidden md:block",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-4",children:e("home","testimonials").title}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:e("home","testimonials").subtitle})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("div",{className:"flex text-yellow-400",children:"★".repeat(5)})}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home","testimonials").review1,'"']}),a.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home","testimonials").review1Author}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home","testimonials").review1Location})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("div",{className:"flex text-yellow-400",children:"★".repeat(5)})}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home","testimonials").review2,'"']}),a.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home","testimonials").review2Author}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home","testimonials").review2Location})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[a.jsx("div",{className:"flex items-center mb-4",children:a.jsx("div",{className:"flex text-yellow-400",children:"★".repeat(5)})}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:['"',e("home","testimonials").review3,'"']}),a.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:e("home","testimonials").review3Author}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("home","testimonials").review3Location})]})]})]})})]})};var fk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ly=We.createContext&&We.createContext(fk),OP=["attr","size","title"];function LP(e,t){if(e==null)return{};var r=MP(e,t),s,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function MP(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function ru(){return ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ru.apply(this,arguments)}function My(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function su(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?My(Object(r),!0).forEach(function(s){DP(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):My(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function DP(e,t,r){return t=FP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FP(e){var t=$P(e,"string");return typeof t=="symbol"?t:t+""}function $P(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gk(e){return e&&e.map((t,r)=>We.createElement(t.tag,su({key:r},t.attr),gk(t.child)))}function Ns(e){return t=>We.createElement(zP,ru({attr:su({},e.attr)},t),gk(e.child))}function zP(e){var t=r=>{var{attr:s,size:n,title:i}=e,o=LP(e,OP),l=n||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),We.createElement("svg",ru({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,o,{className:c,style:su(su({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&We.createElement("title",null,i),e.children)};return Ly!==void 0?We.createElement(Ly.Consumer,null,r=>t(r)):t(fk)}function pk(e){return Ns({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 384c-28.02 0-31.26-32-74.5-32-43.43 0-46.825 32-74.75 32-27.695 0-31.454-32-74.75-32-42.842 0-47.218 32-74.5 32-28.148 0-31.202-32-74.75-32-43.547 0-46.653 32-74.75 32v-80c0-26.5 21.5-48 48-48h16V112h64v144h64V112h64v144h64V112h64v144h16c26.5 0 48 21.5 48 48v80zm0 128H0v-96c43.356 0 46.767-32 74.75-32 27.951 0 31.253 32 74.75 32 42.843 0 47.217-32 74.5-32 28.148 0 31.201 32 74.75 32 43.357 0 46.767-32 74.75-32 27.488 0 31.252 32 74.5 32v96zM96 96c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40zm128 0c-17.75 0-32-14.25-32-32 0-31 32-23 32-64 12 0 32 29.5 32 56s-14.25 40-32 40z"},child:[]}]})(e)}function xk(e){return Ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M298.2 156.6c-52.7-25.7-114.5-10.5-150.2 32.8l55.2 55.2c6.3 6.3 6.3 16.4 0 22.6-3.1 3.1-7.2 4.7-11.3 4.7s-8.2-1.6-11.3-4.7L130.4 217 2.3 479.7c-2.9 6-3.1 13.3 0 19.7 5.4 11.1 18.9 15.7 30 10.3l133.6-65.2-49.2-49.2c-6.3-6.2-6.3-16.4 0-22.6 6.3-6.2 16.4-6.2 22.6 0l57 57 102-49.8c24-11.7 44.5-31.3 57.1-57.1 30.1-61.7 4.5-136.1-57.2-166.2zm92.1-34.9C409.8 81 399.7 32.9 360 0c-50.3 41.7-52.5 107.5-7.9 151.9l8 8c44.4 44.6 110.3 42.4 151.9-7.9-32.9-39.7-81-49.8-121.7-30.3z"},child:[]}]})(e)}function yk(e){return Ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 288v160a32 32 0 0 0 32 32h448a32 32 0 0 0 32-32V288zM299.83 32a32 32 0 0 0-21.13 7L0 256h512c0-119.89-94-217.8-212.17-224z"},child:[]}]})(e)}function as(e){return Ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.8 49.57a169.44 169.44 0 0 0-239.5 0C187.82 85 160.13 128 160.13 192v85.83l-40.62 40.59c-9.7 9.69-24 11.07-36.78 6a60.33 60.33 0 0 0-65 98.72C33 438.39 54.24 442.7 73.85 438.21c-4.5 19.6-.18 40.83 15.1 56.1a60.35 60.35 0 0 0 98.8-65c-5.09-12.73-3.72-27 6-36.75L234.36 352h85.89a187.87 187.87 0 0 0 61.89-10c-39.64-43.89-39.83-110.23 1.05-151.07 34.38-34.36 86.76-39.46 128.74-16.8 1.3-44.96-14.81-90.28-49.13-124.56z"},child:[]}]})(e)}function au(e){return Ns({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M327.1 96c-89.97 0-168.54 54.77-212.27 101.63L27.5 131.58c-12.13-9.18-30.24.6-27.14 14.66L24.54 256 .35 365.77c-3.1 14.06 15.01 23.83 27.14 14.66l87.33-66.05C158.55 361.23 237.13 416 327.1 416 464.56 416 576 288 576 256S464.56 96 327.1 96zm87.43 184c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24 13.26 0 24 10.74 24 24 0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function bk(e){return Ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 256H48a48 48 0 0 0 0 96h416a48 48 0 0 0 0-96zm16 128H32a16 16 0 0 0-16 16v16a64 64 0 0 0 64 64h352a64 64 0 0 0 64-64v-16a16 16 0 0 0-16-16zM58.64 224h394.72c34.57 0 54.62-43.9 34.82-75.88C448 83.2 359.55 32.1 256 32c-103.54.1-192 51.2-232.18 116.11C4 180.09 24.07 224 58.64 224zM384 112a16 16 0 1 1-16 16 16 16 0 0 1 16-16zM256 80a16 16 0 1 1-16 16 16 16 0 0 1 16-16zm-128 32a16 16 0 1 1-16 16 16 16 0 0 1 16-16z"},child:[]}]})(e)}function vk(e){return Ns({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M546.2 9.7c-5.6-12.5-21.6-13-28.3-1.2C486.9 62.4 431.4 96 368 96h-80C182 96 96 182 96 288c0 7 .8 13.7 1.5 20.5C161.3 262.8 253.4 224 384 224c8.8 0 16 7.2 16 16s-7.2 16-16 16C132.6 256 26 410.1 2.4 468c-6.6 16.3 1.2 34.9 17.5 41.6 16.4 6.8 35-1.1 41.8-17.3 1.5-3.6 20.9-47.9 71.9-90.6 32.4 43.9 94 85.8 174.9 77.2C465.5 467.5 576 326.7 576 154.3c0-50.2-10.8-102.2-29.8-144.6z"},child:[]}]})(e)}function wk(e){return Ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M158.87.15c-16.16-1.52-31.2 8.42-35.33 24.12l-14.81 56.27c187.62 5.49 314.54 130.61 322.48 317l56.94-15.78c15.72-4.36 25.49-19.68 23.62-35.9C490.89 165.08 340.78 17.32 158.87.15zm-58.47 112L.55 491.64a16.21 16.21 0 0 0 20 19.75l379-105.1c-4.27-174.89-123.08-292.14-299.15-294.1zM128 416a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm48-152a32 32 0 1 1 32-32 32 32 0 0 1-32 32zm104 104a32 32 0 1 1 32-32 32 32 0 0 1-32 32z"},child:[]}]})(e)}function nu(e){return Ns({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(e)}function iu(e){return Ns({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M468.958 108.958c-27.507 2.08-48.997 7.94-71.375 22.572-5.333-2.214-12.62-17.738-16-16-11.82 6.08-14.892 19.555-4.916 32.817l-59.084 9.916c-24.776 3.341-49.567 4.838-74.187 5.334 1.326 3.832 2.96 7.636 4.812 10.05 5.219 6.802 20.323 6.21 21.07 14.75 1.935 22.098-24.876 47.415-47.056 47.057-15.401-.248-17.017-28.762-31.604-33.713-19.097-6.482-41.62 18.77-59.699 9.832-15.267-7.547-24.992-39.8-27.836-50.41-10.213-.127-20.327-.142-30.316.035-12.564.366-22.902 5.645-29.408 14.239-8.676 11.458-11.652 26.658-13.254 42.925-1.78 18.057 6.147 53.007 5.517 70.282-.504 13.85-7.493 11.87-11.912 18.888-13.52 21.47 8.894 20.83 17.014 5.56 12.482-23.473 4.253-63.11 7.195-92.974 1.855-35.76 10.597-23.937 15.664-24.588-4.2 13.065-6.21 30.962-7 51.334 6.895-2.342 36.498-11.6 42.73-.174 6.872 12.598-27.802 22.016-23.878 35.819 2.464 8.666 22.95 2.378 24.582 11.238 3.322 18.035-32.13 38.713-42.236 44.209.812 23.329 1.564 45.567 1.238 65.086H88.91c-4.234-16.543-12.038-49.944-4.06-55.084 21.425-18.091 29.836-37.484 42.732-56.428 8.755 2.556 16.92 4.787 24.782 6.672 3.553.972 7.244 1.771 10.984 2.44 24.859 4.967 61.553 5.678 90.783-.172 3.76 34.12 7.263 68.452 4.602 102.572h28.957c-12.375-26.902-4.263-65.044 13.892-86.27l44.934-33.462c24.881-16.384 42.93-37.996 55.982-63.38 30.402 3.413 57.086 3.29 77.192-.786l12.84-19.55c-24.257-17.857-43.3-36.585-62.948-58.13 10.063-14.533 25.027-22.765 39.375-32.506zm-39.375 54.572a8 8 0 1 1 0 16 8 8 0 0 1 0-16zM366.2 183.481c5.029 9.822-26.17 10.808-24.933 21.772.998 8.847 22.204 3.839 23.53 12.643 3.818 25.373-28.44 53.805-54.08 54.78-14.262.544-34.902-14.06-32.308-28.093 2.605-14.092 34.551-1.657 40.383-14.748 4.724-10.603-18.352-22.01-12.992-32.307 6.264-12.032 30.364-22.553 41.934-22.646 11.57-.093 15.606 3.347 18.466 8.6zm-26.585 126.346l-34.707 23.96 6.464 69.255h34.414c-11.783-22.454-15.58-55.506-6.171-93.215zm-204.561 1.41c-6.047 12.184-14.147 21.97-22.174 31.242 5.97 3.235 11.648 5.414 17.154 6.614 11.218 2.443 21.636.333 29.948-4.408 10.056-5.737 17.521-14.452 24.115-23.368-14.615-.869-32.96-2.962-49.043-10.08zm24.252 52c-8.737 2.585-17.452 3.7-25.566 2.96 5.167 12.624 10.45 24.152 15.824 36.845h28.306c-10.393-18.48-16.148-29.285-18.564-39.805z"},child:[]}]})(e)}const jk=({type:e="card",count:t=1,className:r=""})=>{const s=()=>{switch(e){case"card":return a.jsxs("div",{className:`card overflow-hidden ${r}`,children:[a.jsx("div",{className:"w-full h-64 bg-gray-200 animate-pulse"}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4 mb-4"}),a.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]})]});case"product":return a.jsx("div",{className:"group",children:a.jsxs("div",{className:`card overflow-hidden hover:shadow-xl transition-all duration-300 border-0 shadow-md ${r}`,children:[a.jsx("div",{className:"w-full h-64 bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse"}),a.jsxs("div",{className:"p-6 bg-white",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse mb-3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse mb-2"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-3/4"})]}),a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsx("div",{className:"h-8 bg-gray-200 rounded animate-pulse w-24"})}),a.jsx("div",{className:"h-10 bg-gray-200 rounded animate-pulse"})]})]})});case"text":return a.jsxs("div",{className:`space-y-2 ${r}`,children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-5/6"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-4/6"})]});case"button":return a.jsx("div",{className:`h-10 bg-gray-200 rounded animate-pulse ${r}`});case"image":return a.jsx("div",{className:`bg-gray-200 animate-pulse ${r}`});default:return a.jsx("div",{className:`bg-gray-200 animate-pulse rounded ${r}`})}};return t===1?s():a.jsx("div",{className:"space-y-4",children:Array.from({length:t},(n,i)=>a.jsx("div",{children:s()},i))})};jk.propTypes={type:J.oneOf(["card","product","text","button","image"]),count:J.number,className:J.string};const ec=({min:e=0,max:t=100,step:r=1,value:s=[e,t],onChange:n,className:i="",label:o="",formatValue:l=d=>d,disabled:c=!1})=>{const[d,u]=j.useState(null),h=j.useRef(null),[m,g]=j.useState(s);j.useEffect(()=>{g(s)},[s]);const f=k=>(k-e)/(t-e)*100,x=k=>e+k/100*(t-e),p=k=>P=>{c||(P.preventDefault(),u(k))},b=k=>{if(!d||!h.current||c)return;const P=h.current.getBoundingClientRect(),C=Math.max(0,Math.min(100,(k.clientX-P.left)/P.width*100)),N=x(C),S=Math.round(N/r)*r,R=Math.max(e,Math.min(t,S));let F=[...m];d==="min"?F[0]=Math.min(R,m[1]):F[1]=Math.max(R,m[0]),g(F),n&&n(F)},y=()=>{u(null)};j.useEffect(()=>{if(d)return document.addEventListener("mousemove",b),document.addEventListener("mouseup",y),()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",y)}},[d,m]);const v=f(m[0]),w=f(m[1]);return a.jsxs("div",{className:`dual-thumb-slider ${i}`,children:[o&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{ref:h,className:"relative h-2 bg-gray-200 dark:bg-gray-600 rounded-lg cursor-pointer",onMouseDown:p("min"),children:[a.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-600 rounded-lg"}),a.jsx("div",{className:"absolute h-2 bg-primary-500 rounded-lg",style:{left:`${v}%`,width:`${w-v}%`}}),a.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${c?"opacity-50 cursor-not-allowed":""}`,style:{left:`${v}%`},onMouseDown:p("min")}),a.jsx("div",{className:`absolute w-4 h-4 bg-white border-2 border-primary-500 rounded-full shadow-lg transform -translate-y-1 cursor-pointer hover:scale-110 transition-transform ${c?"opacity-50 cursor-not-allowed":""}`,style:{left:`${w}%`},onMouseDown:p("max")})]}),a.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-500 dark:text-gray-400",children:[a.jsx("span",{children:l(m[0])}),a.jsx("span",{children:l(m[1])})]})]})]})},BP=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?a.jsx(au,{className:"w-4 h-4 text-gray-500"}):t.includes("beef")||t.includes("nautakjöt")?a.jsx(iu,{className:"w-4 h-4 text-gray-500"}):t.includes("lamb")||t.includes("lambakjöt")?a.jsx(as,{className:"w-4 h-4 text-gray-500"}):t.includes("pork")||t.includes("svínakjöt")?a.jsx(bk,{className:"w-4 h-4 text-gray-500"}):t.includes("fowl")||t.includes("fuglakjöt")||t.includes("poultry")?a.jsx(as,{className:"w-4 h-4 text-gray-500"}):t.includes("cheese")||t.includes("ostur")?a.jsx(yk,{className:"w-4 h-4 text-gray-500"}):t.includes("vegetable")||t.includes("grænmeti")?a.jsx(xk,{className:"w-4 h-4 text-gray-500"}):t.includes("dessert")||t.includes("eftirréttur")?a.jsx(pk,{className:"w-4 h-4 text-gray-500"}):t.includes("seafood")||t.includes("sjávarfiskur")?a.jsx(au,{className:"w-4 h-4 text-gray-500"}):t.includes("pasta")||t.includes("pasta")?a.jsx(nu,{className:"w-4 h-4 text-gray-500"}):t.includes("pizza")||t.includes("pizza")?a.jsx(wk,{className:"w-4 h-4 text-gray-500"}):t.includes("salad")||t.includes("salat")?a.jsx(vk,{className:"w-4 h-4 text-gray-500"}):t.includes("meat")||t.includes("kjöt")?a.jsx(iu,{className:"w-4 h-4 text-gray-500"}):t.includes("chicken")||t.includes("kjúklingur")?a.jsx(as,{className:"w-4 h-4 text-gray-500"}):t.includes("duck")||t.includes("önd")?a.jsx(as,{className:"w-4 h-4 text-gray-500"}):t.includes("turkey")||t.includes("kalkúnn")?a.jsx(as,{className:"w-4 h-4 text-gray-500"}):a.jsx(nu,{className:"w-4 h-4 text-gray-500"})},UP=()=>{const{t:e,currentLanguage:t,isLoading:r}=de(),s=Ue(),n=gr(),[i]=P3(),{products:o,categories:l,filters:c,isLoading:d}=ne(w=>w.products),{isAuthenticated:u}=ne(w=>w.auth),[h,m]=j.useState(!1),[g,f]=j.useState(null);j.useEffect(()=>{s(mo())},[s]),j.useEffect(()=>{const w=i.get("category"),k=i.get("subcategory");if(w&&w!==c.category){s(xr({category:w,subcategory:k||""}));const P=l.find(C=>C.name===w);f(P||null)}else!w&&c.category&&(s(xr({category:"",subcategory:""})),f(null))},[i,s,c.category,l]),j.useEffect(()=>{s(gs(c))},[s,c]),j.useEffect(()=>{o.length===0&&!d&&s(gs(c))},[s,c,o.length,d]);const x=w=>{const k=typeof w=="string"?w:(w==null?void 0:w.name)||"";s(xr({category:k,subcategory:""})),m(!1);const P=new URLSearchParams(i);k&&k.trim()!==""?(P.set("category",k),P.delete("subcategory")):(P.delete("category"),P.delete("subcategory")),n(`/products?${P.toString()}`,{replace:!0})},p=w=>{s(xr({search:w}))},b=(w,k)=>{s(xr({sortBy:w,sortOrder:k}))},y=(w,k)=>{s(xr({minPrice:w,maxPrice:k}))},v=(w,k)=>{s(xr({minAlcoholVolume:w,maxAlcoholVolume:k}))};return r||d&&o.length===0?a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-6 w-48"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:Array.from({length:8},(w,k)=>a.jsx(jk,{type:"product"},k))})]})}):a.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:[a.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex gap-8",children:[a.jsx("aside",{className:"hidden lg:block w-64 flex-shrink-0",children:a.jsx("div",{className:"sticky top-24",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-6 flex items-center",children:[a.jsx(Qn,{className:"w-5 h-5 mr-2"}),e("productsPage","filters")]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common","search")}),a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsx("input",{type:"text",placeholder:e("common","search"),value:c.search,onChange:w=>p(w.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":e("aria","searchProducts")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage","category")}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>x(""),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c.category===""?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":c.category==="",children:e("productsPage","all")}),l.map(w=>a.jsxs("div",{children:[a.jsx("button",{onClick:()=>x(w),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c.category===w.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":c.category===w.name,children:t==="is"?w.nameIs:w.name}),c.category===w.name&&w.subcategories&&w.subcategories.length>0&&a.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[a.jsx("button",{onClick:()=>{s(xr({subcategory:""}));const k=new URLSearchParams(i);k.set("category",w.name),k.delete("subcategory"),n(`/products?${k.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!c.subcategory||c.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage","all")}),w.subcategories.map(k=>a.jsx("button",{onClick:()=>{s(xr({subcategory:k.name}));const P=new URLSearchParams(i);P.set("category",w.name),P.set("subcategory",k.name),n(`/products?${P.toString()}`,{replace:!0})},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${c.subcategory===k.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?k.nameIs:k.name},k.id))]})]},w.id))]})]}),a.jsx("div",{children:a.jsx(ec,{min:0,max:5e4,step:100,value:[c.minPrice||0,c.maxPrice||5e4],onChange:w=>y(w[0],w[1]),label:`${e("productsPage","priceRange")} (${c.minPrice||0} - ${c.maxPrice||5e4} kr)`,formatValue:w=>`${w} kr`})}),a.jsx("div",{children:a.jsx(ec,{min:0,max:50,step:.5,value:[c.minAlcoholVolume||0,c.maxAlcoholVolume||50],onChange:w=>v(w[0],w[1]),label:`${e("productsPage","alcoholVolume")} (${c.minAlcoholVolume||0} - ${c.maxAlcoholVolume||50}%)`,formatValue:w=>`${w}%`})})]})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("products","title")}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($E,{className:"w-4 h-4 text-gray-500"}),a.jsxs("select",{value:`${c.sortBy}-${c.sortOrder}`,onChange:w=>{const[k,P]=w.target.value.split("-");b(k,P)},className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"name-asc",children:e("productsPage","sortByNameAsc")}),a.jsx("option",{value:"name-desc",children:e("productsPage","sortByNameDesc")}),a.jsx("option",{value:"price-asc",children:e("productsPage","sortByPriceAsc")}),a.jsx("option",{value:"price-desc",children:e("productsPage","sortByPriceDesc")}),a.jsx("option",{value:"alcoholVolume-asc",children:e("productsPage","sortByAlcoholAsc")}),a.jsx("option",{value:"alcoholVolume-desc",children:e("productsPage","sortByAlcoholDesc")})]})]}),a.jsxs("button",{onClick:()=>m(!0),className:"lg:hidden btn btn-outline flex items-center gap-2",children:[a.jsx(Qn,{className:"w-4 h-4"}),e("productsPage","filters")]})]})]}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[o.length," ",e("productsPage","products")]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 custom-scrollbar",children:[a.jsx("button",{onClick:()=>{f(null),x("")},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${!g&&c.category===""?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:e("productsPage","all")}),l.map(w=>a.jsx("button",{onClick:()=>{f(w),x(w)},className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${(g==null?void 0:g.id)===w.id?"bg-primary-600 text-white shadow-sm":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:t==="is"?w.nameIs:w.name},w.id))]}),g&&g.subcategories&&g.subcategories.length>0&&a.jsxs("div",{className:"mt-3 flex items-center gap-2 overflow-x-auto pb-2 pl-4 border-l-2 border-primary-200 dark:border-primary-800 custom-scrollbar",children:[a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium flex-shrink-0",children:[e("productsPage","subcategories"),":"]}),a.jsx("button",{onClick:()=>x(g),className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${c.category===g.name&&!c.subcategory?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e("productsPage","all")}),g.subcategories.map(w=>a.jsx("button",{onClick:()=>{s(xr({category:g.name,subcategory:w.name})),m(!1);const k=new URLSearchParams(i);k.set("category",g.name),k.set("subcategory",w.name),n(`/products?${k.toString()}`,{replace:!0})},className:`flex-shrink-0 px-3 py-1 rounded-full text-xs font-medium transition-colors whitespace-nowrap ${c.subcategory===w.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"bg-gray-50 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:t==="is"?w.nameIs:w.name},w.id))]})]}),o.length===0?a.jsx("div",{className:"text-center py-20",children:a.jsxs("div",{className:"max-w-md mx-auto",children:[a.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-12 h-12 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("productsPage","noProductsFound")}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:e("productsPage","adjustSearch")}),a.jsx("button",{onClick:()=>p(""),className:"btn btn-outline",children:e("common","clearSearch")})]})}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:o.map(w=>a.jsx("div",{className:"group h-full",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700 h-full flex flex-col overflow-hidden",children:[a.jsx(he,{to:`/products/${w.id}`,className:"block flex-shrink-0",children:a.jsxs("div",{className:"relative overflow-hidden bg-gray-50 dark:bg-gray-900",children:[a.jsx(yh,{product:w,className:"w-full h-64 object-cover transition-transform duration-300 group-hover:scale-105",currentLanguage:t}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-300"}),w.stock===0&&a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium shadow-lg bg-red-500 text-white",children:e("products","outOfStock")})})]})}),a.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[a.jsxs("div",{className:"mb-4 flex-1",children:[a.jsx("h3",{className:"font-bold text-xl mb-3 text-gray-900 dark:text-white line-clamp-2 leading-tight",children:gn(t,w)}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm leading-relaxed line-clamp-3",children:xh(t,w)}),(w.volume||w.alcoholContent||w.country)&&a.jsxs("div",{className:"mt-3 space-y-1",children:[w.volume&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"font-medium",children:[e("products","volume"),":"]})," ",w.volume]}),w.alcoholContent&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"font-medium",children:[e("products","alcoholContent"),":"]})," ",w.alcoholContent,"%"]}),w.country&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.jsxs("span",{className:"font-medium",children:[e("products","country"),":"]})," ",TP(t,w)]})]})]}),a.jsx("div",{className:"flex items-center justify-between mb-6",children:a.jsxs("span",{className:"text-2xl font-bold text-primary-600 dark:text-primary-400",children:[w.price.toLocaleString()," ",e("common","currency")]})}),Fn(t,w).length>0&&a.jsx("div",{className:"mt-3 mb-4",children:a.jsxs("div",{className:"flex flex-wrap gap-2",children:[Fn(t,w).slice(0,4).map((k,P)=>a.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full",title:k,children:BP(k)},P)),Fn(t,w).length>4&&a.jsxs("div",{className:"flex items-center justify-center w-8 h-8 bg-gray-100 dark:bg-gray-700 rounded-full text-xs text-gray-500",children:["+",Fn(t,w).length-4]})]})}),a.jsxs("div",{className:"mt-auto",children:[u&&w.stock>0&&a.jsxs(he,{to:`/products/${w.id}`,className:"btn btn-primary w-full py-3 text-sm font-medium hover:shadow-lg transition-all duration-200 transform hover:scale-[1.02] flex items-center justify-center",children:[a.jsx("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"})}),e("products","addToCart")]}),!u&&a.jsxs(he,{to:`/products/${w.id}`,className:"btn btn-outline w-full py-3 text-sm font-medium hover:shadow-md transition-all duration-200 flex items-center justify-center",children:[a.jsxs("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e("common","view")]})]})]})]})},w.id))})]})]})}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>m(!1)}),a.jsxs("div",{className:"absolute inset-y-0 left-0 max-w-xs w-full bg-white dark:bg-gray-800 shadow-xl p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[a.jsx(Qn,{className:"w-5 h-5 mr-2"}),e("productsPage","filters")]}),a.jsx("button",{onClick:()=>m(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("common","search")}),a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 dark:text-gray-500"}),a.jsx("input",{type:"text",placeholder:e("common","search"),value:c.search,onChange:w=>p(w.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-transparent","aria-label":e("aria","searchProducts")})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:e("productsPage","category")}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>x(null),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${!c.category||c.category===""||c.category===null?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":!c.category||c.category===""||c.category===null,children:e("productsPage","all")}),l.map(w=>a.jsxs("div",{children:[a.jsx("button",{onClick:()=>x(w),className:`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${c.category===w.name?"bg-primary-600 text-white shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,"aria-pressed":c.category===w.name,children:t==="is"?w.nameIs:w.name}),c.category===w.name&&w.subcategories&&w.subcategories.length>0&&a.jsxs("div",{className:"ml-4 mt-2 space-y-1",children:[a.jsx("button",{onClick:()=>{s(xr({subcategory:""}));const k=new URLSearchParams(i);k.set("category",w.name),k.delete("subcategory"),n(`/products?${k.toString()}`,{replace:!0}),m(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${!c.subcategory||c.subcategory===""?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:e("productsPage","all")}),w.subcategories.map(k=>a.jsx("button",{onClick:()=>{s(xr({subcategory:k.name}));const P=new URLSearchParams(i);P.set("category",w.name),P.set("subcategory",k.name),n(`/products?${P.toString()}`,{replace:!0}),m(!1)},className:`w-full text-left px-3 py-1.5 rounded text-xs font-medium transition-colors ${c.subcategory===k.name?"bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:t==="is"?k.nameIs:k.name},k.id))]})]},w.id))]})]}),a.jsx("div",{className:"mb-6",children:a.jsx(ec,{min:0,max:5e4,step:100,value:[c.minPrice||0,c.maxPrice||5e4],onChange:w=>y(w[0],w[1]),label:`${e("productsPage","priceRange")} (${c.minPrice||0} - ${c.maxPrice||5e4} kr)`,formatValue:w=>`${w} kr`})}),a.jsx("div",{className:"mb-6",children:a.jsx(ec,{min:0,max:50,step:.5,value:[c.minAlcoholVolume||0,c.maxAlcoholVolume||50],onChange:w=>v(w[0],w[1]),label:`${e("productsPage","alcoholVolume")} (${c.minAlcoholVolume||0} - ${c.maxAlcoholVolume||50}%)`,formatValue:w=>`${w}%`})})]})]})]})};var Nl=e=>e.type==="checkbox",Xa=e=>e instanceof Date,Mt=e=>e==null;const kk=e=>typeof e=="object";var it=e=>!Mt(e)&&!Array.isArray(e)&&kk(e)&&!Xa(e),VP=e=>it(e)&&e.target?Nl(e.target)?e.target.checked:e.target.value:e,HP=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,WP=(e,t)=>e.has(HP(t)),qP=e=>{const t=e.constructor&&e.constructor.prototype;return it(t)&&t.hasOwnProperty("isPrototypeOf")},np=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ut(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(np&&(e instanceof Blob||s))&&(r||it(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!qP(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=ut(e[n]));else return e;return t}var bh=e=>/^\w*$/.test(e),rt=e=>e===void 0,ip=e=>Array.isArray(e)?e.filter(Boolean):[],op=e=>ip(e.replace(/["|']|\]/g,"").split(/\.|\[/)),ce=(e,t,r)=>{if(!t||!it(e))return r;const s=(bh(t)?[t]:op(t)).reduce((n,i)=>Mt(n)?n:n[i],e);return rt(s)||s===e?rt(e[t])?r:e[t]:s},rs=e=>typeof e=="boolean",Ve=(e,t,r)=>{let s=-1;const n=bh(t)?[t]:op(t),i=n.length,o=i-1;for(;++s<i;){const l=n[s];let c=r;if(s!==o){const d=e[l];c=it(d)||Array.isArray(d)?d:isNaN(+n[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Dy={BLUR:"blur",FOCUS_OUT:"focusout"},Br={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Cs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},KP=We.createContext(null);KP.displayName="HookFormContext";var GP=(e,t,r,s=!0)=>{const n={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(n,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Br.all&&(t._proxyFormState[o]=!s||Br.all),e[o]}});return n};const YP=typeof window<"u"?We.useLayoutEffect:We.useEffect;var ar=e=>typeof e=="string",QP=(e,t,r,s,n)=>ar(e)?(s&&t.watch.add(e),ce(r,e,n)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),ce(r,i))):(s&&(t.watchAll=!0),r),yg=e=>Mt(e)||!kk(e);function na(e,t,r=new WeakSet){if(yg(e)||yg(t))return e===t;if(Xa(e)&&Xa(t))return e.getTime()===t.getTime();const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of s){const o=e[i];if(!n.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Xa(o)&&Xa(l)||it(o)&&it(l)||Array.isArray(o)&&Array.isArray(l)?!na(o,l,r):o!==l)return!1}}return!0}var XP=(e,t,r,s,n)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:n||!0}}:{},vo=e=>Array.isArray(e)?e:[e],Fy=()=>{let e=[];return{get observers(){return e},next:n=>{for(const i of e)i.next&&i.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(i=>i!==n)}}),unsubscribe:()=>{e=[]}}};function Nk(e,t){const r={};for(const s in e)if(e.hasOwnProperty(s)){const n=e[s],i=t[s];if(n&&it(n)&&i){const o=Nk(n,i);it(o)&&(r[s]=o)}else e[s]&&(r[s]=i)}return r}var Wt=e=>it(e)&&!Object.keys(e).length,lp=e=>e.type==="file",Ur=e=>typeof e=="function",ou=e=>{if(!np)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Sk=e=>e.type==="select-multiple",cp=e=>e.type==="radio",JP=e=>cp(e)||Nl(e),Sm=e=>ou(e)&&e.isConnected;function ZP(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=rt(e)?s++:e[t[s++]];return e}function eT(e){for(const t in e)if(e.hasOwnProperty(t)&&!rt(e[t]))return!1;return!0}function tt(e,t){const r=Array.isArray(t)?t:bh(t)?[t]:op(t),s=r.length===1?e:ZP(e,r),n=r.length-1,i=r[n];return s&&delete s[i],n!==0&&(it(s)&&Wt(s)||Array.isArray(s)&&eT(s))&&tt(e,r.slice(0,-1)),e}var tT=e=>{for(const t in e)if(Ur(e[t]))return!0;return!1};function Ck(e){return Array.isArray(e)||it(e)&&!tT(e)}function bg(e,t={}){for(const r in e)Ck(e[r])?(t[r]=Array.isArray(e[r])?[]:{},bg(e[r],t[r])):Mt(e[r])||(t[r]=!0);return t}function Sn(e,t,r){r||(r=bg(t));for(const s in e)Ck(e[s])?rt(t)||yg(r[s])?r[s]=bg(e[s],Array.isArray(e[s])?[]:{}):Sn(e[s],Mt(t)?{}:t[s],r[s]):r[s]=!na(e[s],t[s]);return r}const $y={value:!1,isValid:!1},zy={value:!0,isValid:!0};var _k=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rt(e[0].attributes.value)?rt(e[0].value)||e[0].value===""?zy:{value:e[0].value,isValid:!0}:zy:$y}return $y},Ek=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>rt(e)?e:t?e===""?NaN:e&&+e:r&&ar(e)?new Date(e):s?s(e):e;const By={isValid:!1,value:null};var Pk=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,By):By;function Uy(e){const t=e.ref;return lp(t)?t.files:cp(t)?Pk(e.refs).value:Sk(t)?[...t.selectedOptions].map(({value:r})=>r):Nl(t)?_k(e.refs).value:Ek(rt(t.value)?e.ref.value:t.value,e)}var rT=(e,t,r,s)=>{const n={};for(const i of e){const o=ce(t,i);o&&Ve(n,i,o._f)}return{criteriaMode:r,names:[...e],fields:n,shouldUseNativeValidation:s}},lu=e=>e instanceof RegExp,Fi=e=>rt(e)?e:lu(e)?e.source:it(e)?lu(e.value)?e.value.source:e.value:e,Vy=e=>({isOnSubmit:!e||e===Br.onSubmit,isOnBlur:e===Br.onBlur,isOnChange:e===Br.onChange,isOnAll:e===Br.all,isOnTouch:e===Br.onTouched});const Hy="AsyncFunction";var sT=e=>!!e&&!!e.validate&&!!(Ur(e.validate)&&e.validate.constructor.name===Hy||it(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Hy)),aT=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Wy=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const wo=(e,t,r,s)=>{for(const n of r||Object.keys(e)){const i=ce(e,n);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],n)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(wo(l,t))break}else if(it(l)&&wo(l,t))break}}};function qy(e,t,r){const s=ce(e,r);if(s||bh(r))return{error:s,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),o=ce(t,i),l=ce(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};n.pop()}return{name:r}}var nT=(e,t,r,s)=>{r(e);const{name:n,...i}=e;return Wt(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!s||Br.all))},iT=(e,t,r)=>!e||!t||e===t||vo(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),oT=(e,t,r,s,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(t||e):(r?s.isOnBlur:n.isOnBlur)?!e:(r?s.isOnChange:n.isOnChange)?e:!0,lT=(e,t)=>!ip(ce(e,t)).length&&tt(e,t),cT=(e,t,r)=>{const s=vo(ce(e,r));return Ve(s,"root",t[r]),Ve(e,r,s),e};function Ky(e,t,r="validate"){if(ar(e)||Array.isArray(e)&&e.every(ar)||rs(e)&&!e)return{type:r,message:ar(e)?e:"",ref:t}}var wn=e=>it(e)&&!lu(e)?e:{value:e,message:""},Gy=async(e,t,r,s,n,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:h,max:m,pattern:g,validate:f,name:x,valueAsNumber:p,mount:b}=e._f,y=ce(r,x);if(!b||t.has(x))return{};const v=l?l[0]:o,w=I=>{n&&v.reportValidity&&(v.setCustomValidity(rs(I)?"":I||""),v.reportValidity())},k={},P=cp(o),C=Nl(o),N=P||C,S=(p||lp(o))&&rt(o.value)&&rt(y)||ou(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,R=XP.bind(null,x,s,k),F=(I,V,G,z=Cs.maxLength,M=Cs.minLength)=>{const _=I?V:G;k[x]={type:I?z:M,message:_,ref:o,...R(I?z:M,_)}};if(i?!Array.isArray(y)||!y.length:c&&(!N&&(S||Mt(y))||rs(y)&&!y||C&&!_k(l).isValid||P&&!Pk(l).isValid)){const{value:I,message:V}=ar(c)?{value:!!c,message:c}:wn(c);if(I&&(k[x]={type:Cs.required,message:V,ref:v,...R(Cs.required,V)},!s))return w(V),k}if(!S&&(!Mt(h)||!Mt(m))){let I,V;const G=wn(m),z=wn(h);if(!Mt(y)&&!isNaN(y)){const M=o.valueAsNumber||y&&+y;Mt(G.value)||(I=M>G.value),Mt(z.value)||(V=M<z.value)}else{const M=o.valueAsDate||new Date(y),_=q=>new Date(new Date().toDateString()+" "+q),E=o.type=="time",O=o.type=="week";ar(G.value)&&y&&(I=E?_(y)>_(G.value):O?y>G.value:M>new Date(G.value)),ar(z.value)&&y&&(V=E?_(y)<_(z.value):O?y<z.value:M<new Date(z.value))}if((I||V)&&(F(!!I,G.message,z.message,Cs.max,Cs.min),!s))return w(k[x].message),k}if((d||u)&&!S&&(ar(y)||i&&Array.isArray(y))){const I=wn(d),V=wn(u),G=!Mt(I.value)&&y.length>+I.value,z=!Mt(V.value)&&y.length<+V.value;if((G||z)&&(F(G,I.message,V.message),!s))return w(k[x].message),k}if(g&&!S&&ar(y)){const{value:I,message:V}=wn(g);if(lu(I)&&!y.match(I)&&(k[x]={type:Cs.pattern,message:V,ref:o,...R(Cs.pattern,V)},!s))return w(V),k}if(f){if(Ur(f)){const I=await f(y,r),V=Ky(I,v);if(V&&(k[x]={...V,...R(Cs.validate,V.message)},!s))return w(V.message),k}else if(it(f)){let I={};for(const V in f){if(!Wt(I)&&!s)break;const G=Ky(await f[V](y,r),v,V);G&&(I={...G,...R(V,G.message)},w(G.message),s&&(k[x]=I))}if(!Wt(I)&&(k[x]={ref:v,...I},!s))return k}}return w(!0),k};const dT={mode:Br.onSubmit,reValidateMode:Br.onChange,shouldFocusError:!0};function uT(e={}){let t={...dT,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ur(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},s={},n=it(t.defaultValues)||it(t.values)?ut(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:ut(n),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const m={array:Fy(),state:Fy()},g=t.criteriaMode===Br.all,f=T=>$=>{clearTimeout(d),d=setTimeout(T,$)},x=async T=>{if(!t.disabled&&(u.isValid||h.isValid||T)){const $=t.resolver?Wt((await C()).errors):await S(s,!0);$!==r.isValid&&m.state.next({isValid:$})}},p=(T,$)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((T||Array.from(l.mount)).forEach(W=>{W&&($?Ve(r.validatingFields,W,$):tt(r.validatingFields,W))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Wt(r.validatingFields)}))},b=(T,$=[],W,L,Y=!0,Q=!0)=>{if(L&&W&&!t.disabled){if(o.action=!0,Q&&Array.isArray(ce(s,T))){const le=W(ce(s,T),L.argA,L.argB);Y&&Ve(s,T,le)}if(Q&&Array.isArray(ce(r.errors,T))){const le=W(ce(r.errors,T),L.argA,L.argB);Y&&Ve(r.errors,T,le),lT(r.errors,T)}if((u.touchedFields||h.touchedFields)&&Q&&Array.isArray(ce(r.touchedFields,T))){const le=W(ce(r.touchedFields,T),L.argA,L.argB);Y&&Ve(r.touchedFields,T,le)}(u.dirtyFields||h.dirtyFields)&&(r.dirtyFields=Sn(n,i)),m.state.next({name:T,isDirty:F(T,$),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ve(i,T,$)},y=(T,$)=>{Ve(r.errors,T,$),m.state.next({errors:r.errors})},v=T=>{r.errors=T,m.state.next({errors:r.errors,isValid:!1})},w=(T,$,W,L)=>{const Y=ce(s,T);if(Y){const Q=ce(i,T,rt(W)?ce(n,T):W);rt(Q)||L&&L.defaultChecked||$?Ve(i,T,$?Q:Uy(Y._f)):G(T,Q),o.mount&&x()}},k=(T,$,W,L,Y)=>{let Q=!1,le=!1;const xe={name:T};if(!t.disabled){if(!W||L){(u.isDirty||h.isDirty)&&(le=r.isDirty,r.isDirty=xe.isDirty=F(),Q=le!==xe.isDirty);const je=na(ce(n,T),$);le=!!ce(r.dirtyFields,T),je?tt(r.dirtyFields,T):Ve(r.dirtyFields,T,!0),xe.dirtyFields=r.dirtyFields,Q=Q||(u.dirtyFields||h.dirtyFields)&&le!==!je}if(W){const je=ce(r.touchedFields,T);je||(Ve(r.touchedFields,T,W),xe.touchedFields=r.touchedFields,Q=Q||(u.touchedFields||h.touchedFields)&&je!==W)}Q&&Y&&m.state.next(xe)}return Q?xe:{}},P=(T,$,W,L)=>{const Y=ce(r.errors,T),Q=(u.isValid||h.isValid)&&rs($)&&r.isValid!==$;if(t.delayError&&W?(c=f(()=>y(T,W)),c(t.delayError)):(clearTimeout(d),c=null,W?Ve(r.errors,T,W):tt(r.errors,T)),(W?!na(Y,W):Y)||!Wt(L)||Q){const le={...L,...Q&&rs($)?{isValid:$}:{},errors:r.errors,name:T};r={...r,...le},m.state.next(le)}},C=async T=>{p(T,!0);const $=await t.resolver(i,t.context,rT(T||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return p(T),$},N=async T=>{const{errors:$}=await C(T);if(T)for(const W of T){const L=ce($,W);L?Ve(r.errors,W,L):tt(r.errors,W)}else r.errors=$;return $},S=async(T,$,W={valid:!0})=>{for(const L in T){const Y=T[L];if(Y){const{_f:Q,...le}=Y;if(Q){const xe=l.array.has(Q.name),je=Y._f&&sT(Y._f);je&&u.validatingFields&&p([Q.name],!0);const Ot=await Gy(Y,l.disabled,i,g,t.shouldUseNativeValidation&&!$,xe);if(je&&u.validatingFields&&p([Q.name]),Ot[Q.name]&&(W.valid=!1,$))break;!$&&(ce(Ot,Q.name)?xe?cT(r.errors,Ot,Q.name):Ve(r.errors,Q.name,Ot[Q.name]):tt(r.errors,Q.name))}!Wt(le)&&await S(le,$,W)}}return W.valid},R=()=>{for(const T of l.unMount){const $=ce(s,T);$&&($._f.refs?$._f.refs.every(W=>!Sm(W)):!Sm($._f.ref))&&ue(T)}l.unMount=new Set},F=(T,$)=>!t.disabled&&(T&&$&&Ve(i,T,$),!na(q(),n)),I=(T,$,W)=>QP(T,l,{...o.mount?i:rt($)?n:ar(T)?{[T]:$}:$},W,$),V=T=>ip(ce(o.mount?i:n,T,t.shouldUnregister?ce(n,T,[]):[])),G=(T,$,W={})=>{const L=ce(s,T);let Y=$;if(L){const Q=L._f;Q&&(!Q.disabled&&Ve(i,T,Ek($,Q)),Y=ou(Q.ref)&&Mt($)?"":$,Sk(Q.ref)?[...Q.ref.options].forEach(le=>le.selected=Y.includes(le.value)):Q.refs?Nl(Q.ref)?Q.refs.forEach(le=>{(!le.defaultChecked||!le.disabled)&&(Array.isArray(Y)?le.checked=!!Y.find(xe=>xe===le.value):le.checked=Y===le.value||!!Y)}):Q.refs.forEach(le=>le.checked=le.value===Y):lp(Q.ref)?Q.ref.value="":(Q.ref.value=Y,Q.ref.type||m.state.next({name:T,values:ut(i)})))}(W.shouldDirty||W.shouldTouch)&&k(T,Y,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&O(T)},z=(T,$,W)=>{for(const L in $){if(!$.hasOwnProperty(L))return;const Y=$[L],Q=T+"."+L,le=ce(s,Q);(l.array.has(T)||it(Y)||le&&!le._f)&&!Xa(Y)?z(Q,Y,W):G(Q,Y,W)}},M=(T,$,W={})=>{const L=ce(s,T),Y=l.array.has(T),Q=ut($);Ve(i,T,Q),Y?(m.array.next({name:T,values:ut(i)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&W.shouldDirty&&m.state.next({name:T,dirtyFields:Sn(n,i),isDirty:F(T,Q)})):L&&!L._f&&!Mt(Q)?z(T,Q,W):G(T,Q,W),Wy(T,l)&&m.state.next({...r,name:T}),m.state.next({name:o.mount?T:void 0,values:ut(i)})},_=async T=>{o.mount=!0;const $=T.target;let W=$.name,L=!0;const Y=ce(s,W),Q=je=>{L=Number.isNaN(je)||Xa(je)&&isNaN(je.getTime())||na(je,ce(i,W,je))},le=Vy(t.mode),xe=Vy(t.reValidateMode);if(Y){let je,Ot;const Rl=$.type?Uy(Y._f):VP(T),Ys=T.type===Dy.BLUR||T.type===Dy.FOCUS_OUT,r2=!aT(Y._f)&&!t.resolver&&!ce(r.errors,W)&&!Y._f.deps||oT(Ys,ce(r.touchedFields,W),r.isSubmitted,xe,le),Eh=Wy(W,l,Ys);Ve(i,W,Rl),Ys?(!$||!$.readOnly)&&(Y._f.onBlur&&Y._f.onBlur(T),c&&c(0)):Y._f.onChange&&Y._f.onChange(T);const Ph=k(W,Rl,Ys),s2=!Wt(Ph)||Eh;if(!Ys&&m.state.next({name:W,type:T.type,values:ut(i)}),r2)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?Ys&&x():Ys||x()),s2&&m.state.next({name:W,...Eh?{}:Ph});if(!Ys&&Eh&&m.state.next({...r}),t.resolver){const{errors:Tp}=await C([W]);if(Q(Rl),L){const a2=qy(r.errors,s,W),Ip=qy(Tp,s,a2.name||W);je=Ip.error,W=Ip.name,Ot=Wt(Tp)}}else p([W],!0),je=(await Gy(Y,l.disabled,i,g,t.shouldUseNativeValidation))[W],p([W]),Q(Rl),L&&(je?Ot=!1:(u.isValid||h.isValid)&&(Ot=await S(s,!0)));L&&(Y._f.deps&&(!Array.isArray(Y._f.deps)||Y._f.deps.length>0)&&O(Y._f.deps),P(W,Ot,je,Ph))}},E=(T,$)=>{if(ce(r.errors,$)&&T.focus)return T.focus(),1},O=async(T,$={})=>{let W,L;const Y=vo(T);if(t.resolver){const Q=await N(rt(T)?T:Y);W=Wt(Q),L=T?!Y.some(le=>ce(Q,le)):W}else T?(L=(await Promise.all(Y.map(async Q=>{const le=ce(s,Q);return await S(le&&le._f?{[Q]:le}:le)}))).every(Boolean),!(!L&&!r.isValid)&&x()):L=W=await S(s);return m.state.next({...!ar(T)||(u.isValid||h.isValid)&&W!==r.isValid?{}:{name:T},...t.resolver||!T?{isValid:W}:{},errors:r.errors}),$.shouldFocus&&!L&&wo(s,E,T?Y:l.mount),L},q=(T,$)=>{let W={...o.mount?i:n};return $&&(W=Nk($.dirtyFields?r.dirtyFields:r.touchedFields,W)),rt(T)?W:ar(T)?ce(W,T):T.map(L=>ce(W,L))},ae=(T,$)=>({invalid:!!ce(($||r).errors,T),isDirty:!!ce(($||r).dirtyFields,T),error:ce(($||r).errors,T),isValidating:!!ce(r.validatingFields,T),isTouched:!!ce(($||r).touchedFields,T)}),U=T=>{T&&vo(T).forEach($=>tt(r.errors,$)),m.state.next({errors:T?r.errors:{}})},re=(T,$,W)=>{const L=(ce(s,T,{_f:{}})._f||{}).ref,Y=ce(r.errors,T)||{},{ref:Q,message:le,type:xe,...je}=Y;Ve(r.errors,T,{...je,...$,ref:L}),m.state.next({name:T,errors:r.errors,isValid:!1}),W&&W.shouldFocus&&L&&L.focus&&L.focus()},fe=(T,$)=>Ur(T)?m.state.subscribe({next:W=>"values"in W&&T(I(void 0,$),W)}):I(T,$,!0),Ne=T=>m.state.subscribe({next:$=>{iT(T.name,$.name,T.exact)&&nT($,T.formState||u,Il,T.reRenderRoot)&&T.callback({values:{...i},...r,...$,defaultValues:n})}}).unsubscribe,A=T=>(o.mount=!0,h={...h,...T.formState},Ne({...T,formState:h})),ue=(T,$={})=>{for(const W of T?vo(T):l.mount)l.mount.delete(W),l.array.delete(W),$.keepValue||(tt(s,W),tt(i,W)),!$.keepError&&tt(r.errors,W),!$.keepDirty&&tt(r.dirtyFields,W),!$.keepTouched&&tt(r.touchedFields,W),!$.keepIsValidating&&tt(r.validatingFields,W),!t.shouldUnregister&&!$.keepDefaultValue&&tt(n,W);m.state.next({values:ut(i)}),m.state.next({...r,...$.keepDirty?{isDirty:F()}:{}}),!$.keepIsValid&&x()},K=({disabled:T,name:$})=>{(rs(T)&&o.mount||T||l.disabled.has($))&&(T?l.disabled.add($):l.disabled.delete($))},H=(T,$={})=>{let W=ce(s,T);const L=rs($.disabled)||rs(t.disabled);return Ve(s,T,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:T}},name:T,mount:!0,...$}}),l.mount.add(T),W?K({disabled:rs($.disabled)?$.disabled:t.disabled,name:T}):w(T,!0,$.value),{...L?{disabled:$.disabled||t.disabled}:{},...t.progressive?{required:!!$.required,min:Fi($.min),max:Fi($.max),minLength:Fi($.minLength),maxLength:Fi($.maxLength),pattern:Fi($.pattern)}:{},name:T,onChange:_,onBlur:_,ref:Y=>{if(Y){H(T,$),W=ce(s,T);const Q=rt(Y.value)&&Y.querySelectorAll&&Y.querySelectorAll("input,select,textarea")[0]||Y,le=JP(Q),xe=W._f.refs||[];if(le?xe.find(je=>je===Q):Q===W._f.ref)return;Ve(s,T,{_f:{...W._f,...le?{refs:[...xe.filter(Sm),Q,...Array.isArray(ce(n,T))?[{}]:[]],ref:{type:Q.type,name:T}}:{ref:Q}}}),w(T,!1,void 0,Q)}else W=ce(s,T,{}),W._f&&(W._f.mount=!1),(t.shouldUnregister||$.shouldUnregister)&&!(WP(l.array,T)&&o.action)&&l.unMount.add(T)}}},te=()=>t.shouldFocusError&&wo(s,E,l.mount),Re=T=>{rs(T)&&(m.state.next({disabled:T}),wo(s,($,W)=>{const L=ce(s,W);L&&($.disabled=L._f.disabled||T,Array.isArray(L._f.refs)&&L._f.refs.forEach(Y=>{Y.disabled=L._f.disabled||T}))},0,!1))},Ar=(T,$)=>async W=>{let L;W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let Y=ut(i);if(m.state.next({isSubmitting:!0}),t.resolver){const{errors:Q,values:le}=await C();r.errors=Q,Y=ut(le)}else await S(s);if(l.disabled.size)for(const Q of l.disabled)tt(Y,Q);if(tt(r.errors,"root"),Wt(r.errors)){m.state.next({errors:{}});try{await T(Y,W)}catch(Q){L=Q}}else $&&await $({...r.errors},W),te(),setTimeout(te);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Wt(r.errors)&&!L,submitCount:r.submitCount+1,errors:r.errors}),L)throw L},Pl=(T,$={})=>{ce(s,T)&&(rt($.defaultValue)?M(T,ut(ce(n,T))):(M(T,$.defaultValue),Ve(n,T,ut($.defaultValue))),$.keepTouched||tt(r.touchedFields,T),$.keepDirty||(tt(r.dirtyFields,T),r.isDirty=$.defaultValue?F(T,ut(ce(n,T))):F()),$.keepError||(tt(r.errors,T),u.isValid&&x()),m.state.next({...r}))},Si=(T,$={})=>{const W=T?ut(T):n,L=ut(W),Y=Wt(T),Q=Y?n:L;if($.keepDefaultValues||(n=W),!$.keepValues){if($.keepDirtyValues){const le=new Set([...l.mount,...Object.keys(Sn(n,i))]);for(const xe of Array.from(le))ce(r.dirtyFields,xe)?Ve(Q,xe,ce(i,xe)):M(xe,ce(Q,xe))}else{if(np&&rt(T))for(const le of l.mount){const xe=ce(s,le);if(xe&&xe._f){const je=Array.isArray(xe._f.refs)?xe._f.refs[0]:xe._f.ref;if(ou(je)){const Ot=je.closest("form");if(Ot){Ot.reset();break}}}}if($.keepFieldsRef)for(const le of l.mount)M(le,ce(Q,le));else s={}}i=t.shouldUnregister?$.keepDefaultValues?ut(n):{}:ut(Q),m.array.next({values:{...Q}}),m.state.next({values:{...Q}})}l={mount:$.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!$.keepIsValid||!!$.keepDirtyValues,o.watch=!!t.shouldUnregister,m.state.next({submitCount:$.keepSubmitCount?r.submitCount:0,isDirty:Y?!1:$.keepDirty?r.isDirty:!!($.keepDefaultValues&&!na(T,n)),isSubmitted:$.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Y?{}:$.keepDirtyValues?$.keepDefaultValues&&i?Sn(n,i):r.dirtyFields:$.keepDefaultValues&&T?Sn(n,T):$.keepDirty?r.dirtyFields:{},touchedFields:$.keepTouched?r.touchedFields:{},errors:$.keepErrors?r.errors:{},isSubmitSuccessful:$.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Ci=(T,$)=>Si(Ur(T)?T(i):T,$),Tl=(T,$={})=>{const W=ce(s,T),L=W&&W._f;if(L){const Y=L.refs?L.refs[0]:L.ref;Y.focus&&(Y.focus(),$.shouldSelect&&Ur(Y.select)&&Y.select())}},Il=T=>{r={...r,...T}},_i={control:{register:H,unregister:ue,getFieldState:ae,handleSubmit:Ar,setError:re,_subscribe:Ne,_runSchema:C,_focusError:te,_getWatch:I,_getDirty:F,_setValid:x,_setFieldArray:b,_setDisabledField:K,_setErrors:v,_getFieldArray:V,_reset:Si,_resetDefaultValues:()=>Ur(t.defaultValues)&&t.defaultValues().then(T=>{Ci(T,t.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Re,_subjects:m,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(T){o=T},get _defaultValues(){return n},get _names(){return l},set _names(T){l=T},get _formState(){return r},get _options(){return t},set _options(T){t={...t,...T}}},subscribe:A,trigger:O,register:H,handleSubmit:Ar,watch:fe,setValue:M,getValues:q,reset:Ci,resetField:Pl,clearErrors:U,unregister:ue,setError:re,setFocus:Tl,getFieldState:ae};return{..._i,formControl:_i}}function ui(e={}){const t=We.useRef(void 0),r=We.useRef(void 0),[s,n]=We.useState({isDirty:!1,isValidating:!1,isLoading:Ur(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ur(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:s},e.defaultValues&&!Ur(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=uT(e);t.current={...l,formState:s}}const i=t.current.control;return i._options=e,YP(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),We.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),We.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),We.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),We.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),We.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==s.isDirty&&i._subjects.state.next({isDirty:o})}},[i,s.isDirty]),We.useEffect(()=>{e.values&&!na(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,n(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),We.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=GP(s,i),t.current}const td=se("cart/fetchCart",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/cart")).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch cart")}}),rd=se("cart/addToCart",async({productId:e,quantity:t=1},{rejectWithValue:r})=>{var s,n,i,o;try{const l=await Z.post("/cart/items",{productId:e,quantity:t});return D.success("Vara bætt við körfu"),l.data}catch(l){return D.error(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Mistókst að bæta við körfu"),r(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to add to cart")}}),sd=se("cart/updateCartItem",async({itemId:e,quantity:t},{rejectWithValue:r})=>{var s,n,i,o;try{return(await Z.put(`/cart/items/${e}`,{quantity:t})).data}catch(l){return D.error(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Mistókst að uppfæra körfu"),r(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update cart item")}}),jo=se("cart/removeFromCart",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{return await Z.delete(`/cart/items/${e}`),D.success("Vara fjarlægð úr körfu"),e}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að fjarlægja úr körfu"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to remove from cart")}}),ad=se("cart/clearCart",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{return await Z.delete("/cart"),D.success("Körfa tæmd"),!0}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að tæma körfu"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to clear cart")}}),hT={cart:null,isLoading:!1,error:null},mT=rr({name:"cart",initialState:hT,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(td.pending,t=>{t.isLoading=!0,t.error=null}).addCase(td.fulfilled,(t,r)=>{t.isLoading=!1,t.cart=r.payload,t.error=null}).addCase(td.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(rd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(rd.fulfilled,(t,r)=>{t.isLoading=!1,t.error=null}).addCase(rd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(sd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(sd.fulfilled,(t,r)=>{if(t.isLoading=!1,t.cart&&t.cart.items){const s=t.cart.items.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.cart.items[s]=r.payload)}t.error=null}).addCase(sd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(jo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(jo.fulfilled,(t,r)=>{t.isLoading=!1,t.cart&&t.cart.items&&(t.cart.items=t.cart.items.filter(s=>s.id!==r.payload)),t.error=null}).addCase(jo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ad.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ad.fulfilled,t=>{t.isLoading=!1,t.cart&&(t.cart.items=[]),t.error=null}).addCase(ad.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),fT=mT.reducer,gT=e=>{const t=e.toLowerCase();return t.includes("fish")||t.includes("fiskur")?a.jsx(au,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("beef")||t.includes("nautakjöt")?a.jsx(iu,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("lamb")||t.includes("lambakjöt")?a.jsx(as,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pork")||t.includes("svínakjöt")?a.jsx(bk,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("fowl")||t.includes("fuglakjöt")||t.includes("poultry")?a.jsx(as,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("cheese")||t.includes("ostur")?a.jsx(yk,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("vegetable")||t.includes("grænmeti")?a.jsx(xk,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("dessert")||t.includes("eftirréttur")?a.jsx(pk,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("seafood")||t.includes("sjávarfiskur")?a.jsx(au,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pasta")||t.includes("pasta")?a.jsx(nu,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("pizza")||t.includes("pizza")?a.jsx(wk,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("salad")||t.includes("salat")?a.jsx(vk,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("meat")||t.includes("kjöt")?a.jsx(iu,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("chicken")||t.includes("kjúklingur")?a.jsx(as,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("duck")||t.includes("önd")?a.jsx(as,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):t.includes("turkey")||t.includes("kalkúnn")?a.jsx(as,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"}):a.jsx(nu,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})},pT=()=>{const{t:e,currentLanguage:t}=Ut(),{id:r}=Kw(),s=gr(),n=Ue(),{currentProduct:i,isLoading:o,error:l}=ne(A=>A.products),{user:c,isAuthenticated:d}=ne(A=>A.auth),{isLoading:u}=ne(A=>A.cart),[h,m]=j.useState(1),[g,f]=j.useState(!1),[x,p]=j.useState(!1),[b,y]=j.useState(!1),[v,w]=j.useState(!1),[k,P]=j.useState([]),[C,N]=j.useState([]),[S,R]=j.useState({intervalType:"WEEKLY",intervalValue:1,preferredDay:"",preferredTime:"15:00",quantity:1}),F="olfong_age_verified",I=()=>{try{const A=localStorage.getItem(F);if(!A)return!1;const{confirmed:ue}=JSON.parse(A);return ue}catch(A){return console.error("Error checking age verification:",A),!1}},V=A=>{try{const ue={confirmed:A};localStorage.setItem(F,JSON.stringify(ue))}catch(ue){console.error("Error storing age verification:",ue)}},{register:G,handleSubmit:z,formState:{errors:M},reset:_,setValue:E}=ui({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:"",volume:"",volumeIs:"",alcoholContent:"",country:"",countryIs:"",region:"",regionIs:"",origin:"",originIs:"",producer:"",producerIs:"",distributor:"",distributorIs:"",packaging:"",packagingIs:"",packagingWeight:"",packagingWeightIs:"",carbonFootprint:"",carbonFootprintIs:"",vintage:"",grapeVariety:"",grapeVarietyIs:"",wineStyle:"",wineStyleIs:"",pricePerLiter:"",pricePerLiterIs:"",foodPairings:[],foodPairingsIs:[],specialAttributes:[],specialAttributesIs:[],certifications:[],certificationsIs:[],availability:"available",availabilityIs:"Til ráðstöfunar",atvrProductId:"",atvrUrl:"",atvrImageUrl:""}});j.useEffect(()=>(r&&n(qc(r)),()=>{n(hP())}),[n,r]),j.useEffect(()=>{i&&i.category.name==="NICOTINE"&&c&&c.age<18&&(I()?p(!0):f(!0))},[i,c]),j.useEffect(()=>{i&&v&&(E("name",i.name),E("nameIs",i.nameIs||""),E("description",i.description||""),E("descriptionIs",i.descriptionIs||""),E("price",i.price),E("stock",i.stock),E("category",i.category.name),E("subcategory",i.subcategory||""),E("isAgeRestricted",i.ageRestriction>18),E("imageUrl",i.imageUrl||""),E("hasDiscount",i.hasDiscount||!1),E("originalPrice",i.originalPrice||0),E("discountPercentage",i.discountPercentage||0),E("discountStartDate",i.discountStartDate?i.discountStartDate.split("T")[0]:""),E("discountEndDate",i.discountEndDate?i.discountEndDate.split("T")[0]:""),E("discountReason",i.discountReason||""),E("discountReasonIs",i.discountReasonIs||""),E("volume",i.volume||""),E("volumeIs",i.volumeIs||""),E("alcoholContent",i.alcoholContent||""),E("country",i.country||""),E("countryIs",i.countryIs||""),E("region",i.region||""),E("regionIs",i.regionIs||""),E("origin",i.origin||""),E("originIs",i.originIs||""),E("producer",i.producer||""),E("producerIs",i.producerIs||""),E("distributor",i.distributor||""),E("distributorIs",i.distributorIs||""),E("packaging",i.packaging||""),E("packagingIs",i.packagingIs||""),E("packagingWeight",i.packagingWeight||""),E("packagingWeightIs",i.packagingWeightIs||""),E("carbonFootprint",i.carbonFootprint||""),E("carbonFootprintIs",i.carbonFootprintIs||""),E("vintage",i.vintage||""),E("grapeVariety",i.grapeVariety||""),E("grapeVarietyIs",i.grapeVarietyIs||""),E("wineStyle",i.wineStyle||""),E("wineStyleIs",i.wineStyleIs||""),E("pricePerLiter",i.pricePerLiter||""),E("pricePerLiterIs",i.pricePerLiterIs||""),E("foodPairings",i.foodPairings||[]),E("foodPairingsIs",i.foodPairingsIs||[]),E("specialAttributes",i.specialAttributes||[]),E("specialAttributesIs",i.specialAttributesIs||[]),E("certifications",i.certifications||[]),E("certificationsIs",i.certificationsIs||[]),E("availability",i.availability||"available"),E("availabilityIs",i.availabilityIs||"Til ráðstöfunar"),E("atvrProductId",i.atvrProductId||""),E("atvrUrl",i.atvrUrl||""),E("atvrImageUrl",i.atvrImageUrl||""),P([]),N([]))},[i,v,E]);const O=A=>{const ue=Array.from(A.target.files),K=[...k,...ue];P(K);const H=ue.map(te=>URL.createObjectURL(te));N(te=>[...te,...H])},q=A=>{const ue=k.filter((H,te)=>te!==A),K=C.filter((H,te)=>te!==A);P(ue),N(K)},ae=async A=>{try{const{category:ue,...K}=A,H=new FormData;Object.keys(K).forEach(te=>{te==="foodPairings"||te==="foodPairingsIs"||te==="specialAttributes"||te==="specialAttributesIs"||te==="certifications"||te==="certificationsIs"||te==="subcategories"?H.append(te,JSON.stringify(K[te]||[])):H.append(te,K[te]||"")}),H.append("categoryId",i.categoryId),H.append("ageRestriction",A.isAgeRestricted?20:18),k.forEach(te=>{H.append("images",te)}),await n(go({id:i.id,productData:H})).unwrap(),D.success(e("common","success")),w(!1),_(),P([]),N([])}catch(ue){console.error("Error updating product:",ue),D.error(ue.message||e("common","error"))}},U=async()=>{if(!d){D.error(e("auth","loginRequired")),s("/login");return}if(i.category.name==="NICOTINE"&&c.age<18&&!x){f(!0);return}try{await n(rd({productId:i.id,quantity:h})).unwrap(),s("/cart")}catch(A){console.error("Failed to add to cart:",A)}},re=()=>{i&&h<i.stock&&m(h+1)},fe=()=>{h>1&&m(h-1)},Ne=()=>{p(!0),f(!1),V(!0)};return o?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})}):l||!i?a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:[e("products","title")," ",e("orderDetailPage","orderNotFound")]}),a.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage","orderNotFoundDesc")}),a.jsx(he,{to:"/products",className:"btn btn-primary",children:e("common","back")})]})})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("button",{onClick:()=>s(-1),className:"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white mb-6 transition-colors duration-200",children:[a.jsx(Gs,{className:"w-5 h-5 mr-2"}),e("productDetailPage","back")]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[a.jsx("div",{className:"space-y-4",children:i.imageUrl?a.jsx("img",{src:`http://192.168.8.62:5000${i.imageUrl}`,alt:gn(t,i),className:"w-full h-96 object-cover rounded-lg shadow-lg"}):a.jsx("div",{className:"w-full h-96 bg-gray-200 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-lg",children:e("cartPage","noImage")})})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:gn(t,i)}),(c==null?void 0:c.role)==="ADMIN"&&a.jsxs("button",{onClick:()=>w(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(ws,{className:"w-4 h-4 mr-2"}),e("common","edit")]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsxs("span",{className:"text-3xl font-bold text-primary-600",children:[i.price.toLocaleString()," ",e("common","currency")]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i.stock>0?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:i.stock>0?`${i.stock} ${e("products","unitsAvailable")}`:e("products","outOfStock")}),a.jsx("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm font-medium",children:e("navigation",i.category.name.toLowerCase())})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("productDetailPage","description")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:xh(t,i)||e("productDetailPage","noDescription")})]}),Fn(t,i).length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products","foodPairings")}),a.jsx("div",{className:"flex flex-wrap gap-3",children:Fn(t,i).map((A,ue)=>a.jsxs("div",{className:"flex flex-col items-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[a.jsx("div",{className:"text-gray-600 dark:text-gray-400 mb-2",children:gT(A)}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200 text-center font-medium",children:A})]},ue))})]}),Oy(t,i).length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:e("products","specialAttributes")}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Oy(t,i).map((A,ue)=>a.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:A},ue))})]}),i.availability&&i.availability!=="available"&&a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fs,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mr-2"}),a.jsxs("div",{children:[a.jsxs("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:[e("products","availability"),": ",e("products",i.availability)]}),a.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[i.availability==="special-order"&&e("productDetailPage","specialOrderDesc"),i.availability==="coming-soon"&&e("productDetailPage","comingSoonDesc"),i.availability==="discontinued"&&e("productDetailPage","discontinuedDesc")]})]})]})}),i.category.name==="NICOTINE"&&a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Fs,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400 mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:e("productDetailPage","ageRestriction")}),a.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:e("productDetailPage","ageRestrictionDesc")})]})]})}),i.stock>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[e("productDetailPage","quantity"),":"]}),a.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg",children:[a.jsx("button",{onClick:fe,disabled:h<=1,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:a.jsx(eu,{className:"w-4 h-4"})}),a.jsx("span",{className:"px-4 py-2 text-center min-w-[60px] text-gray-900 dark:text-white",children:h}),a.jsx("button",{onClick:re,disabled:h>=i.stock,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed text-gray-700 dark:text-gray-300",children:a.jsx(Ft,{className:"w-4 h-4"})})]}),a.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.stock," ",e("productDetailPage","available")]})]}),a.jsxs("button",{onClick:U,disabled:u||!d,className:"btn btn-primary w-full flex items-center justify-center space-x-2 py-3",children:[a.jsx(_r,{className:"w-5 h-5"}),a.jsx("span",{children:d?u?e("common","loading"):e("products","addToCart"):e("common","loginRequired")})]}),!d&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center",children:[e("productDetailPage","loginToAdd"),a.jsx(he,{to:"/login",className:"text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300 ml-1",children:e("productDetailPage","loginHere")})]}),d&&i.stock>0&&a.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline w-full flex items-center justify-center space-x-2 py-3 mt-3",children:[a.jsx(al,{className:"w-5 h-5"}),a.jsx("span",{children:e("productDetailPage","subscribe")})]})]})]})]})})]}),g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Fs,{className:"w-12 h-12 text-yellow-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e("ageVerification","title")}),a.jsx("p",{className:"text-gray-600 mb-6",children:e("ageVerification.message",{age:18})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{f(!1),p(!1),V(!1)},className:"btn btn-outline flex-1",children:e("common","no")}),a.jsx("button",{onClick:Ne,className:"btn btn-primary flex-1",children:e("common","yes")})]})]})})}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("productDetailPage","createSubscription")}),a.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300",children:"✕"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:i.nameIs||i.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i.price.toLocaleString()," ",e("common","currency")," ",e("cartPage","each")]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage","quantity")}),a.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg w-32",children:[a.jsx("button",{onClick:()=>R({...S,quantity:Math.max(1,S.quantity-1)}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:a.jsx(eu,{className:"w-4 h-4"})}),a.jsx("span",{className:"px-4 py-2 text-center flex-1 text-gray-900 dark:text-white",children:S.quantity}),a.jsx("button",{onClick:()=>R({...S,quantity:S.quantity+1}),className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300",children:a.jsx(Ft,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage","deliveryFrequency")}),a.jsxs("select",{value:S.intervalType,onChange:A=>R({...S,intervalType:A.target.value}),className:"input w-full",children:[a.jsx("option",{value:"WEEKLY",children:e("subscription","weekly")}),a.jsx("option",{value:"BIWEEKLY",children:e("subscription","biweekly")}),a.jsx("option",{value:"MONTHLY",children:e("subscription","monthly")})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[a.jsx(al,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage","preferredDayOptional")]}),a.jsxs("select",{value:S.preferredDay,onChange:A=>R({...S,preferredDay:A.target.value}),className:"input w-full",children:[a.jsx("option",{value:"",children:e("subscription","noSpecificDay")}),a.jsx("option",{value:"MONDAY",children:e("subscription","monday")}),a.jsx("option",{value:"TUESDAY",children:e("subscription","tuesday")}),a.jsx("option",{value:"WEDNESDAY",children:e("subscription","wednesday")}),a.jsx("option",{value:"THURSDAY",children:e("subscription","thursday")}),a.jsx("option",{value:"FRIDAY",children:e("subscription","friday")}),a.jsx("option",{value:"SATURDAY",children:e("subscription","saturday")}),a.jsx("option",{value:"SUNDAY",children:e("subscription","sunday")})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[a.jsx(ks,{className:"w-4 h-4 inline mr-1"}),e("productDetailPage","preferredTimeOptional")]}),a.jsx("input",{type:"time",value:S.preferredTime,onChange:A=>R({...S,preferredTime:A.target.value}),className:"input w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage","notesOptional")}),a.jsx("textarea",{rows:3,placeholder:e("subscription","specialNotesPlaceholder"),className:"input w-full"})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{onClick:()=>y(!1),className:"btn btn-outline flex-1",children:e("subscription","cancel")}),a.jsx("button",{onClick:()=>{D.success(e("productDetailPage","subscriptionCreated")),y(!1)},className:"btn btn-primary flex-1",children:e("subscription","createSubscription")})]})]})]})}),v&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("adminProductsPage","editProduct")}),a.jsx("button",{onClick:()=>{w(!1),_()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(Fe,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:z(ae),className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminProductsPage","nameEn")," *"]}),a.jsx("input",{...G("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products","title")}),M.name&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage","nameRequired")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","nameIs")}),a.jsx("input",{...G("nameIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage","nameIs")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("common","price")," * (",e("common","currency"),")"]}),a.jsx("input",{type:"number",step:"0.01",min:"0",...G("price",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),M.price&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage","priceRequired")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("products","stock")," *"]}),a.jsx("input",{type:"number",min:"0",...G("stock",{required:!0,min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),M.stock&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage","stockRequired")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("products","description")}),a.jsx("textarea",{...G("description"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products","description")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","descriptionIs")}),a.jsx("textarea",{...G("descriptionIs"),rows:3,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage","descriptionIs")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","productImages")}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:O,className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),C.length>0&&a.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-2",children:C.map((A,ue)=>a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:A,alt:`Preview ${ue+1}`,className:"w-full h-20 object-cover rounded border"}),a.jsx("button",{type:"button",onClick:()=>q(ue),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs",children:"×"})]},ue))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","imageUrl")}),a.jsx("input",{...G("imageUrl"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://example.com/image.jpg"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",...G("isAgeRestricted"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage","ageRestricted")})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[a.jsx("button",{type:"button",onClick:()=>{w(!1),_()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common","cancel")}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:e("common","save")})]})]})]})})]})},ko=se("addresses/fetchAddresses",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/addresses")).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch addresses")}}),No=se("addresses/createAddress",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{const o=await Z.post("/addresses",e);return D.success("Heimilisfang bætt við"),o.data}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að bæta við heimilisfangi"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create address")}}),nd=se("addresses/updateAddress",async({id:e,addressData:t},{rejectWithValue:r})=>{var s,n,i,o;try{const l=await Z.put(`/addresses/${e}`,t);return D.success("Heimilisfang uppfært"),l.data}catch(l){return D.error(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Mistókst að uppfæra heimilisfang"),r(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update address")}}),id=se("addresses/deleteAddress",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{return await Z.delete(`/addresses/${e}`),D.success("Heimilisfang eytt"),e}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að eyða heimilisfangi"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to delete address")}}),xT={addresses:[],isLoading:!1,error:null},yT=rr({name:"addresses",initialState:xT,reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(ko.pending,t=>{t.isLoading=!0,t.error=null}).addCase(ko.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=r.payload,t.error=null}).addCase(ko.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(No.pending,t=>{t.isLoading=!0,t.error=null}).addCase(No.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses.push(r.payload),t.error=null}).addCase(No.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(nd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(nd.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.addresses.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.addresses[s]=r.payload),t.error=null}).addCase(nd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(id.pending,t=>{t.isLoading=!0,t.error=null}).addCase(id.fulfilled,(t,r)=>{t.isLoading=!1,t.addresses=t.addresses.filter(s=>s.id!==r.payload),t.error=null}).addCase(id.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),bT=yT.reducer,vT=()=>{var Pl,Si,Ci,Tl,Il,_h,_i,T,$,W;const{t:e,currentLanguage:t}=de(),r=Ue(),s=gr(),{register:n,handleSubmit:i,formState:{errors:o},setValue:l}=ui(),{cart:c,isLoading:d}=ne(L=>L.cart),{addresses:u,isLoading:h}=ne(L=>L.addresses),{isLoading:m}=ne(L=>L.orders),{isAuthenticated:g}=ne(L=>L.auth),[f,x]=j.useState(""),[p,b]=j.useState(!1),[y,v]=j.useState("valitor"),[w,k]=j.useState(""),[P,C]=j.useState(""),[N,S]=j.useState([]),[R,F]=j.useState(!0),[I,V]=j.useState([]),[G,z]=j.useState(!0);j.useEffect(()=>{g&&(r(td()),r(ko()),M(),_())},[r,g]);const M=async()=>{try{F(!0);const L=await fetch("/api/payment-gateways/config",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(L.ok){const Y=await L.json();S(Y.data.gateways||[])}}catch(L){console.error("Failed to fetch payment gateways:",L)}finally{F(!1)}},_=async()=>{try{z(!0);const L=await fetch("/api/shipping/active",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(L.ok){const Y=await L.json();V(Y.data.shippingOptions||[]),Y.data.shippingOptions&&Y.data.shippingOptions.length>0&&k(Y.data.shippingOptions[0].id)}}catch(L){console.error("Failed to fetch shipping options:",L)}finally{z(!1)}},E=()=>{const L=[],Y=new Date,Q=Y.getHours(),le=Y.getMinutes();for(let xe=15;xe<24;xe++)for(let je=0;je<60;je+=30){const Ot=`${xe.toString().padStart(2,"0")}:${je.toString().padStart(2,"0")}`;(xe>Q||xe===Q&&je>le+30)&&L.push({value:Ot,label:Ot,display:xe>=12?`${xe===12?12:xe-12}:${je.toString().padStart(2,"0")} PM`:`${xe}:${je.toString().padStart(2,"0")} AM`})}return L},O=L=>N.some(Y=>Y.provider===L),q=()=>I.find(L=>L.id===w),ae=()=>O("valitor"),U=()=>{const L=q();return O("cash_on_delivery")&&(L==null?void 0:L.type)==="delivery"},re=()=>{const L=q();return O("pay_on_pickup")&&(L==null?void 0:L.type)==="pickup"},fe=async L=>{try{if(!w){D.error(e("checkoutPage","selectShippingOption"));return}const Y=q(),Q={shippingOptionId:w,paymentMethod:y,notes:L.notes||""};if(Y.type==="delivery"){if(!f){D.error(e("checkoutPage","selectDeliveryAddress"));return}Q.deliveryAddressId=f}else if(Y.type==="pickup"){if(!P){D.error(e("checkoutPage","selectPickupTime"));return}Q.pickupTime=P}const le=await r(Uc(Q)).unwrap();s(y==="valitor"?`/orders/${le.id}`:y==="cash_on_delivery"?`/orders/${le.id}`:y==="pay_on_pickup"?`/orders/${le.id}`:`/orders/${le.id}`)}catch(Y){console.error("Failed to create order:",Y)}},Ne=async L=>{try{const Y=await r(No(L)).unwrap();x(Y.id),b(!1),l("addressId",Y.id)}catch(Y){console.error("Failed to create address:",Y)}},A=async(L,Y)=>{if(Y<=0){await r(jo(L));return}try{await r(sd({itemId:L,quantity:Y})).unwrap()}catch{D.error(e("common","error"))}},ue=async L=>{try{await r(jo(L)).unwrap()}catch{D.error(e("common","error"))}},K=async()=>{if(window.confirm(e("cartPage","clearCart")+"?"))try{await r(ad()).unwrap()}catch{D.error(e("cart","failedToClearCart"))}};if(!g)return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:e("cart","title")}),a.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[a.jsx(ho,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage","loginToViewCart")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage","mustLoginToViewCart")}),a.jsx(he,{to:"/login",className:"btn btn-primary w-full",children:e("cartPage","login")})]})]})})});if(d||h)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})});if(!c||!c.items||c.items.length===0)return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-8",children:e("cart","title")}),a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"card p-8 max-w-md mx-auto",children:[a.jsx(ho,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("cartPage","emptyCart")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("cartPage","addItemsToStart")}),a.jsx(he,{to:"/products",className:"btn btn-primary w-full",children:e("home.hero","startShopping")})]})})]})});const H=c.items.reduce((L,Y)=>L+Y.product.price*Y.quantity,0),te=((Pl=q())==null?void 0:Pl.fee)||0,Re=H+te,Ar=c.items.reduce((L,Y)=>L+Y.quantity,0);return a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0 mb-4 sm:mb-0",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("cart","title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("cartPage","cartDescription")})]}),c.items.length>0&&a.jsxs("button",{onClick:K,className:"inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 whitespace-nowrap flex-shrink-0",children:[a.jsx($t,{className:"w-4 h-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:e("cartPage","clearCart")})]})]})})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center",children:[a.jsx(ho,{className:"w-5 h-5 mr-2 text-gray-500 dark:text-gray-400"}),e("cartPage","cartItems")]}),a.jsx("div",{className:"space-y-4",children:c.items.map(L=>a.jsx("div",{className:"card p-6 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:L.product.imageUrl?a.jsx("img",{src:`http://192.168.8.62:5000${L.product.imageUrl}`,alt:L.product.name,className:"w-20 h-20 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}):a.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center border border-gray-200 dark:border-gray-600",children:a.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:e("cartPage","noImage")})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate",children:gn(t,L.product)}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mb-2",children:L.product.descriptionIs||L.product.description}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[L.product.category&&a.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-300 rounded text-xs font-medium",children:e("navigation",L.product.category.name.toLowerCase())}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${L.product.stock>0?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-300":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-300"}`,children:L.product.stock>0?e("products","inStock"):e("products","outOfStock")})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700",children:[a.jsx("button",{onClick:()=>A(L.id,L.quantity-1),disabled:L.quantity<=1,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-300",children:a.jsx(eu,{className:"w-4 h-4"})}),a.jsx("span",{className:"px-4 py-2 text-center min-w-[60px] font-medium text-gray-900 dark:text-white",children:L.quantity}),a.jsx("button",{onClick:()=>A(L.id,L.quantity+1),disabled:L.quantity>=L.product.stock,className:"p-2 hover:bg-gray-50 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed text-gray-600 dark:text-gray-300",children:a.jsx(Ft,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:()=>ue(L.id),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors duration-200",title:e("common","remove"),children:a.jsx($t,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"text-left sm:text-right",children:[a.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[(L.product.price*L.quantity).toLocaleString()," ",e("common","currency")]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[L.product.price.toLocaleString()," ",e("common","currency")," ",e("cartPage","each")]})]})]})]})},L.id))})]})}),a.jsx("div",{className:"space-y-6",children:a.jsxs("form",{onSubmit:i(fe),className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(qs,{className:"w-5 h-5 mr-2 text-primary-600 dark:text-primary-400"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:e("checkoutPage","checkout")})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(lr,{className:"w-4 h-4 mr-2"}),e("checkoutPage","shippingOptions")]}),G?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(Ae,{size:"small"}),a.jsx("span",{className:"ml-2 text-gray-600",children:e("common","loading")})]}):I.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500",children:a.jsx("p",{children:e("checkoutPage","noShippingOptions")})}):a.jsx("div",{className:"space-y-3",children:I.map(L=>a.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:border-primary-300 transition-colors",children:[a.jsx("input",{type:"radio",value:L.id,checked:w===L.id,onChange:Y=>k(Y.target.value),className:"mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:L.nameEn}),a.jsx("div",{className:"text-sm font-semibold text-primary-600",children:L.fee===0?e("common","free"):`${L.fee.toLocaleString()} ${e("common","currency")}`})]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:L.descriptionEn}),L.estimatedDays&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:[e("checkoutPage","estimatedDelivery"),": ",L.estimatedDays," ",e("checkoutPage","days")]})]})]},L.id))})]}),((Si=q())==null?void 0:Si.type)==="delivery"&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(vs,{className:"w-4 h-4 mr-2"}),e("checkoutPage","deliveryAddress")]}),u.length>0&&a.jsx("div",{className:"space-y-3 mb-4",children:u.map(L=>a.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",...n("addressId",{required:!0}),value:L.id,className:"mt-1",onChange:Y=>x(Y.target.value)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[L.street,", ",L.city]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[L.postalCode,", ",L.country]}),L.notes&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:L.notes})]})]},L.id))}),o.addressId&&a.jsx("p",{className:"text-red-600 text-sm mb-4",children:e("checkoutPage","selectDeliveryAddress")}),a.jsxs("button",{type:"button",onClick:()=>b(!0),className:"btn btn-outline text-sm",children:["+ ",e("addresses","add")]}),p&&a.jsxs("div",{className:"mt-4 p-4 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-4",children:e("checkoutPage","newAddress")}),a.jsxs("form",{onSubmit:i(Ne),className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses","street")}),a.jsx("input",{type:"text",...n("street",{required:!0}),className:"input w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses","city")}),a.jsx("input",{type:"text",...n("city",{required:!0}),className:"input w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses","postalCode")}),a.jsx("input",{type:"text",...n("postalCode",{required:!0}),className:"input w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("addresses","country")}),a.jsx("input",{type:"text",...n("country",{required:!0}),defaultValue:"Iceland",className:"input w-full"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("productDetailPage","notesOptional")}),a.jsx("textarea",{...n("notes"),rows:3,className:"input w-full"})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"submit",className:"btn btn-primary",children:e("checkoutPage","saveAddress")}),a.jsx("button",{type:"button",onClick:()=>b(!1),className:"btn btn-outline",children:e("common","cancel")})]})]})]})]}),((Ci=q())==null?void 0:Ci.type)==="pickup"&&a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(vs,{className:"w-4 h-4 mr-2"}),e("checkoutPage","pickupTime")]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e("checkoutPage","selectPickupTimeHelp")}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:E().map(L=>a.jsx("button",{type:"button",onClick:()=>C(L.value),className:`p-2 text-sm rounded-lg border transition-colors ${P===L.value?"bg-primary-600 text-white border-primary-600":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:border-primary-300"}`,children:L.display},L.value))}),E().length===0&&a.jsx("p",{className:"text-red-600 text-sm",children:e("checkoutPage","noPickupTimes")})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:e("checkoutPage","storeLocation")}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("checkoutPage","storeLocationValue")})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(qs,{className:"w-4 h-4 mr-2"}),e("checkoutPage","paymentMethod")]}),a.jsx("div",{className:"space-y-3",children:R?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(Ae,{size:"small"}),a.jsx("span",{className:"ml-2 text-gray-600",children:e("common","loading")})]}):a.jsxs(a.Fragment,{children:[ae()&&a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",value:"valitor",checked:y==="valitor",onChange:L=>v(L.target.value),className:"mt-1"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage","valitorPayment")}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage","valitorDesc")})]})]}),U()&&a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",value:"cash_on_delivery",checked:y==="cash_on_delivery",onChange:L=>v(L.target.value),className:"mt-1"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage","cashOnDelivery")}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage","cashOnDeliveryDesc")})]})]}),re()&&a.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[a.jsx("input",{type:"radio",value:"pay_on_pickup",checked:y==="pay_on_pickup",onChange:L=>v(L.target.value),className:"mt-1"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:e("checkoutPage","payOnPickup")}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("checkoutPage","payOnPickupDesc")})]})]}),!ae()&&!U()&&!re()&&a.jsxs("div",{className:"text-center py-4 text-gray-500",children:[a.jsx("p",{children:e("checkoutPage","noPaymentMethodsAvailable")}),a.jsx("p",{className:"text-sm mt-1",children:e("checkoutPage","contactAdmin")})]})]})})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("checkoutPage","orderNotes")}),a.jsx("textarea",{...n("notes"),rows:3,placeholder:e("checkoutPage","orderNotes"),className:"input w-full"})]}),a.jsxs("div",{className:"border-t pt-4 space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e("checkoutPage","subtotal")," (",Ar," ",e("checkoutPage","items"),")"]}),a.jsxs("span",{className:"font-medium",children:[H.toLocaleString()," ",e("common","currency")]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:q()?q().nameEn:e("checkoutPage","shipping")}),a.jsx("span",{className:"font-medium",children:((Tl=q())==null?void 0:Tl.fee)===0?a.jsx("span",{className:"text-green-600",children:e("common","free")}):`${((_h=(Il=q())==null?void 0:Il.fee)==null?void 0:_h.toLocaleString())||0} ${e("common","currency")}`})]}),a.jsx("div",{className:"border-t pt-3",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("common","total")}),a.jsxs("span",{className:"text-lg font-bold text-primary-600",children:[Re.toLocaleString()," ",e("common","currency")]})]})})]}),a.jsx("button",{type:"submit",disabled:m||!w||((_i=q())==null?void 0:_i.type)==="delivery"&&!f||((T=q())==null?void 0:T.type)==="pickup"&&!P,className:"btn btn-primary w-full py-3 text-lg mt-6",children:m?e("checkoutPage","creatingOrder"):e("checkoutPage","placeOrder")}),!w&&a.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage","selectShippingOption")}),(($=q())==null?void 0:$.type)==="delivery"&&!f&&a.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage","selectDeliveryAddress")}),((W=q())==null?void 0:W.type)==="pickup"&&!P&&a.jsx("p",{className:"text-red-600 text-sm mt-2",children:e("checkoutPage","selectPickupTime")})]})})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsx(he,{to:"/products",className:"btn btn-outline w-full py-3 text-center block",children:e("cartPage","continueShopping")})})]})]})})},wT=()=>{const{t:e}=de(),{id:t}=Kw(),r=gr(),s=Ue(),{currentOrder:n,isLoading:i,error:o}=ne(f=>f.orders),{isAuthenticated:l}=ne(f=>f.auth),[c,d]=j.useState(null);j.useEffect(()=>(t&&s(Bc(t)),()=>{s(AE())}),[s,t]),j.useEffect(()=>{l||r("/login")},[l,r]),j.useEffect(()=>{if(n&&n.status==="OUT_FOR_DELIVERY"){const f=setInterval(()=>{d({lat:64.1466+(Math.random()-.5)*.01,lng:-21.9426+(Math.random()-.5)*.01,timestamp:new Date().toISOString()})},5e3);return()=>clearInterval(f)}},[n]);const u=f=>{switch(f){case"PENDING":return a.jsx(ks,{className:"w-6 h-6 text-yellow-600"});case"CONFIRMED":return a.jsx(we,{className:"w-6 h-6 text-blue-600"});case"PREPARING":return a.jsx(we,{className:"w-6 h-6 text-purple-600"});case"OUT_FOR_DELIVERY":return a.jsx(lr,{className:"w-6 h-6 text-orange-600"});case"DELIVERED":return a.jsx(gt,{className:"w-6 h-6 text-green-600"});case"CANCELLED":return a.jsx(ph,{className:"w-6 h-6 text-red-600"});default:return a.jsx(we,{className:"w-6 h-6 text-gray-600"})}},h=f=>e("orders.statuses",f),m=f=>{switch(f){case"PENDING":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"CONFIRMED":return"bg-blue-100 text-blue-800 border-blue-200";case"PREPARING":return"bg-purple-100 text-purple-800 border-purple-200";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800 border-orange-200";case"DELIVERED":return"bg-green-100 text-green-800 border-green-200";case"CANCELLED":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=f=>new Date(f).toLocaleString();return i?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})}):o||!n?a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:e("orderDetailPage","orderNotFound")}),a.jsx("p",{className:"text-gray-600 mb-8",children:e("orderDetailPage","orderNotFoundDesc")}),a.jsx("button",{onClick:()=>r("/orders"),className:"btn btn-primary",children:e("orderDetailPage","backToOrders")})]})})}):a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("button",{onClick:()=>r("/orders"),className:"flex items-center text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-6",children:[a.jsx(Gs,{className:"w-5 h-5 mr-2"}),e("orderDetailPage","backToOrders")]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[e("orderDetailPage","order")," #",n.orderNumber]}),a.jsxs("p",{className:"text-gray-600",children:[e("orderDetailPage","created"),": ",g(n.createdAt)]})]}),a.jsxs("div",{className:`px-4 py-2 rounded-lg border flex items-center space-x-2 ${m(n.status)}`,children:[u(n.status),a.jsx("span",{className:"font-medium",children:h(n.status)})]})]})}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("orderDetailPage","orderItems")}),a.jsx("div",{className:"space-y-4",children:n.items.map((f,x)=>a.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg",children:[f.product.imageUrl?a.jsx("img",{src:`http://192.168.8.62:5000${f.product.imageUrl}`,alt:f.product.name,className:"w-16 h-16 object-cover rounded-lg"}):a.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center",children:a.jsx(we,{className:"w-8 h-8 text-gray-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-gray-900",children:f.product.nameIs||f.product.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:[e("orderDetailPage","quantity"),": ",f.quantity]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium text-gray-900",children:[(f.price*f.quantity).toLocaleString()," ",e("common","currency")]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[f.price.toLocaleString()," ",e("common","currency")," ",e("orderDetailPage","each")]})]})]},x))})]}),a.jsxs("div",{className:"card p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(vs,{className:"w-5 h-5 mr-2"}),e("orderDetailPage","deliveryInfo")]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:e("orderDetailPage","deliveryMethod")}),a.jsx("p",{className:"text-gray-600",children:n.deliveryMethod==="PICKUP"?e("orderDetailPage","storePickup"):e("orderDetailPage","homeDelivery")}),n.pickupTime&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e("navigation","language")==="is"?"Tími:":"Time:"," ",n.pickupTime]})]}),n.deliveryMethod==="DELIVERY"&&n.address&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:e("orderDetailPage","deliveryAddress")}),a.jsxs("p",{className:"text-gray-600",children:[n.address.street,a.jsx("br",{}),n.address.city,", ",n.address.postalCode,a.jsx("br",{}),n.address.country]})]}),n.deliveryPerson&&a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[a.jsx(ur,{className:"w-4 h-4 mr-1"}),e("orderDetailPage","deliveryPerson")]}),a.jsx("p",{className:"text-gray-600",children:n.deliveryPerson.fullName}),n.deliveryPerson.phone&&a.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[a.jsx(mn,{className:"w-3 h-3 mr-1"}),n.deliveryPerson.phone]})]}),n.estimatedDelivery&&a.jsxs("div",{children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-2 flex items-center",children:[a.jsx(al,{className:"w-4 h-4 mr-1"}),e("orderDetailPage","estimatedDelivery")]}),a.jsx("p",{className:"text-gray-600",children:g(n.estimatedDelivery)})]}),n.deliveredAt&&a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:e("orderDetailPage","deliveredAt")}),a.jsx("p",{className:"text-gray-600",children:g(n.deliveredAt)})]})]})]}),n.transaction&&a.jsxs("div",{className:"card p-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(qs,{className:"w-5 h-5 mr-2"}),e("orderDetailPage","paymentInfo")]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:e("orderDetailPage","paymentMethod")}),a.jsx("p",{className:"text-gray-600",children:n.transaction.paymentMethod})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-gray-900",children:e("orderDetailPage","status")}),a.jsx("p",{className:"text-gray-600",children:n.transaction.paymentStatus})]})]})]}),n.notes&&a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("orderDetailPage","notes")}),a.jsx("p",{className:"text-gray-600",children:n.notes})]})]}),a.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("orders","title")}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:e("orders","reorder")}),a.jsxs("span",{className:"font-medium",children:[(n.totalAmount-n.deliveryFee).toLocaleString()," ",e("common","currency")]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:n.deliveryMethod==="PICKUP"?e("ordersPage","pickup"):e("ordersPage","delivery")}),a.jsx("span",{className:"font-medium",children:n.deliveryFee===0?e("navigation","language")==="is"?"Ókeypis":"Free":`${n.deliveryFee.toLocaleString()} ${e("common","currency")}`})]}),a.jsx("div",{className:"border-t pt-3",children:a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:e("common","total")}),a.jsxs("span",{className:"text-lg font-bold text-primary-600",children:[n.totalAmount.toLocaleString()," ",e("common","currency")]})]})})]})]}),n.status==="OUT_FOR_DELIVERY"&&n.deliveryMethod==="DELIVERY"&&a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("orderDetailPage","deliveryTracking")}),c?a.jsxs("div",{children:[a.jsx("div",{className:"bg-gray-200 rounded-lg h-64 mb-4 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(vs,{className:"w-12 h-12 text-primary-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:e("orderDetailPage","onTheWay")}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[e("orderDetailPage","lastUpdated"),": ",new Date(c.timestamp).toLocaleTimeString()]})]})}),a.jsx("div",{className:"text-sm text-gray-600",children:a.jsxs("p",{children:[e("navigation","language")==="is"?"Áætluð afhending:":"Estimated delivery",": ",n.estimatedDelivery?g(n.estimatedDelivery):"TBD"]})})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(lr,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:e("orderDetailPage","notStarted")})]})]}),a.jsxs("div",{className:"card p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("navigation","language")==="is"?"Hafa samband":"Contact"}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:e("navigation","language")==="is"?"Netfang:":"Email:"}),a.jsx("br",{}),a.jsx("a",{href:"mailto:info@olfong.is",className:"text-primary-600 hover:text-primary-700",children:"info@olfong.is"})]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:e("navigation","language")==="is"?"Sími:":"Phone:"}),a.jsx("br",{}),a.jsx("a",{href:"tel:+3541234567",className:"text-primary-600 hover:text-primary-700",children:"+354 123 4567"})]})]})]})]})]})]})})},jT=()=>{const{t:e}=de(),t=Ue(),{user:r,isAuthenticated:s}=ne(_=>_.auth),{orders:n,pagination:i,filters:o,isLoading:l}=ne(_=>_.orders),{addresses:c,isLoading:d}=ne(_=>_.addresses),[u,h]=j.useState(!1),[m,g]=j.useState(null),[f,x]=j.useState(!1),{register:p,handleSubmit:b,formState:{errors:y},reset:v}=ui({defaultValues:{fullName:"",email:"",phone:""}}),{register:w,handleSubmit:k,formState:{errors:P},reset:C}=ui({defaultValues:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1}});j.useEffect(()=>{s&&t(ko())},[t,s]),j.useEffect(()=>{s&&t(Yn(o))},[t,s,o]),j.useEffect(()=>{r&&v({fullName:r.fullName||"",email:r.email||"",phone:r.phone||""})},[r,v]),j.useEffect(()=>{C(m?{street:m.street||"",city:m.city||"",postalCode:m.postalCode||"",country:m.country||"Iceland",isDefault:m.isDefault||!1}:{street:"",city:"",postalCode:"",country:"Iceland",isDefault:!1})},[m,C]);const N=async _=>{try{await t(zc(_)).unwrap(),D.success(e("profile","updateSuccess")),x(!1)}catch(E){D.error(E.message||e("profile","updateError"))}},S=async _=>{try{m?(await t(nd({id:m.id,..._})).unwrap(),D.success(e("addresses","edit"))):(await t(No(_)).unwrap(),D.success(e("addresses","add"))),h(!1),g(null)}catch(E){D.error(E.message||e("common","error"))}},R=_=>{g(_),h(!0)},F=async _=>{if(window.confirm(e("addresses","delete")+"?"))try{await t(id(_)).unwrap(),D.success(e("common","success"))}catch(E){D.error(E.message||e("common","error"))}},I=()=>{t(X0()),D.success(e("auth","logout"))},V=_=>{switch(_){case"PENDING":return a.jsx(ks,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return a.jsx(we,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return a.jsx(we,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return a.jsx(lr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return a.jsx(gt,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return a.jsx(ph,{className:"w-5 h-5 text-red-600"});default:return a.jsx(we,{className:"w-5 h-5 text-gray-600"})}},G=_=>e("orders.statuses",_),z=_=>{switch(_){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},M=_=>{t(RE({status:_===o.status?"":_}))};return s?d||l?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("profile","title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("profilePage","manageInfo")})]}),a.jsx("button",{onClick:I,className:"inline-flex items-center px-4 py-2 border border-red-300 dark:border-red-600 rounded-md shadow-sm text-sm font-medium text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/20 hover:bg-red-100 dark:hover:bg-red-900/30 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 mt-4 sm:mt-0 whitespace-nowrap flex-shrink-0",children:e("profilePage","logout")})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:[a.jsx("div",{className:"space-y-6 lg:col-span-1",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[a.jsx(ur,{className:"w-5 h-5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e("profilePage","personalInformation")})]}),a.jsx("button",{onClick:()=>x(!f),className:"btn btn-outline btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:f?a.jsxs(a.Fragment,{children:[a.jsx(Fe,{className:"w-4 h-4 mr-1 flex-shrink-0"}),a.jsx("span",{children:e("common","cancel")})]}):a.jsxs(a.Fragment,{children:[a.jsx(ws,{className:"w-4 h-4 mr-1 flex-shrink-0"}),a.jsx("span",{children:e("common","edit")})]})})]}),f?a.jsxs("form",{onSubmit:b(N),className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage","fullName")}),a.jsx("input",{...p("fullName"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage","fullName")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage","email")}),a.jsx("input",{type:"email",...p("email",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage","email")}),y.email&&a.jsxs("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:[e("profilePage","email")," ",e("common","error")]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("profilePage","phone")}),a.jsx("input",{type:"tel",...p("phone"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage","phone")})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:a.jsx("span",{children:e("common","cancel")})}),a.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[a.jsx(Kr,{className:"w-4 h-4 mr-1 flex-shrink-0"}),a.jsx("span",{children:e("common","save")})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ur,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage","name")}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.fullName)||e("profilePage","notSpecified")})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ms,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage","email")}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.email)||e("profilePage","notSpecified")}),!(r!=null&&r.email)&&a.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-1",children:["⚠️ ",e("profilePage","emailMissingWarning")]})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(mn,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("profilePage","phone")}),a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(r==null?void 0:r.phone)||e("profilePage","notSpecified")})]})]})]})]})}),a.jsx("div",{className:"space-y-6 lg:col-span-1",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center min-w-0 flex-1",children:[a.jsx(vs,{className:"w-5 h-5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e("profilePage","addresses")})]}),a.jsxs("button",{onClick:()=>{g(null),h(!0)},className:"btn btn-primary btn-sm whitespace-nowrap ml-2 flex-shrink-0 flex items-center",children:[a.jsx(Ft,{className:"w-4 h-4 mr-1 flex-shrink-0"}),a.jsx("span",{children:e("profilePage","newAddress")})]})]}),c.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(vs,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("profilePage","noAddresses")})]}):a.jsx("div",{className:"space-y-4",children:c.map(_=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate",children:_.street}),_.isDefault&&a.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400 text-xs rounded-full whitespace-nowrap flex-shrink-0",children:e("profilePage","default")})]}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 break-words",children:[_.city,", ",_.postalCode,a.jsx("br",{}),_.country]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>R(_),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors duration-200",children:a.jsx(ws,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>F(_.id),className:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 transition-colors duration-200",children:a.jsx($t,{className:"w-4 h-4"})})]})]})},_.id))}),c.length===0&&a.jsx("div",{className:"mt-4 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:a.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:["⚠️ ",e("profilePage","addressMissingWarning")]})})]})}),a.jsx("div",{className:"space-y-6 lg:col-span-1",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(we,{className:"w-5 h-5 mr-2"}),e("orders","title")]}),a.jsxs("select",{value:o.status,onChange:_=>M(_.target.value),className:"input w-auto min-w-[150px] dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[a.jsx("option",{value:"",children:e("ordersPage","allOrders")}),a.jsx("option",{value:"PENDING",children:e("ordersPage","pending")}),a.jsx("option",{value:"CONFIRMED",children:e("ordersPage","confirmed")}),a.jsx("option",{value:"OUT_FOR_DELIVERY",children:e("ordersPage","outForDelivery")}),a.jsx("option",{value:"DELIVERED",children:e("ordersPage","delivered")})]})]}),n.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(we,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("ordersPage","noOrders")})]}):a.jsx("div",{className:"space-y-4",children:n.map(_=>a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-900 dark:text-white",children:[e("orderDetailPage","order")," #",_.orderNumber]}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${z(_.status)}`,children:[V(_.status),a.jsx("span",{children:G(_.status)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 text-sm text-gray-600 dark:text-gray-400 mb-2",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("span",{className:"font-medium block",children:e("ordersPage","date")}),a.jsx("span",{className:"truncate block",children:new Date(_.createdAt).toLocaleDateString()})]}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("span",{className:"font-medium block",children:e("ordersPage","total")}),a.jsxs("span",{className:"truncate block",children:[_.totalAmount.toLocaleString()," ",e("common","currency")]})]}),a.jsxs("div",{className:"min-w-0 sm:col-span-2 xl:col-span-1",children:[a.jsx("span",{className:"font-medium block",children:e("ordersPage","delivery")}),a.jsx("span",{className:"truncate block",children:_.deliveryMethod==="PICKUP"?e("ordersPage","pickup"):e("ordersPage","homeDelivery")})]})]})]})})},_.id))}),i.pages>1&&a.jsx("div",{className:"mt-6 flex justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>t(Yn({...o,page:i.page-1})),disabled:i.page===1,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage","previous")}),a.jsxs("span",{className:"px-3 py-1 text-xs text-gray-600 dark:text-gray-400 whitespace-nowrap",children:[e("ordersPage","page")," ",i.page," ",e("ordersPage","of")," ",i.pages]}),a.jsx("button",{onClick:()=>t(Yn({...o,page:i.page+1})),disabled:i.page===i.pages,className:"btn btn-outline btn-sm whitespace-nowrap",children:e("ordersPage","next")})]})})]})})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 sm:p-6 max-w-md w-full max-h-[90vh] overflow-y-auto shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:m?e("profilePage","editAddress"):e("profilePage","newAddressTitle")}),a.jsx("button",{onClick:()=>{h(!1),g(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(Fe,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:k(S),className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage","street")," *"]}),a.jsx("input",{...w("street",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage","street")}),P.street&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage","streetRequired")})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage","city")," *"]}),a.jsx("input",{...w("city",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage","city")}),P.city&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage","cityRequired")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage","postalCode")," *"]}),a.jsx("input",{...w("postalCode",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage","postalCode")}),P.postalCode&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("profilePage","postalCodeRequired")})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("profilePage","country")," *"]}),a.jsx("input",{...w("country",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("profilePage","country")}),P.country&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("navigation","language")==="is"?"Land er nauðsynlegt":"Country is required"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",...w("isDefault"),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("profilePage","setAsDefaultAddress")})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{h(!1),g(null)},className:"btn btn-outline flex-1 whitespace-nowrap flex items-center",children:a.jsx("span",{children:e("common","cancel")})}),a.jsxs("button",{type:"submit",className:"btn btn-primary flex-1 whitespace-nowrap flex items-center",children:[a.jsx(Kr,{className:"w-4 h-4 mr-1 flex-shrink-0"}),a.jsx("span",{children:m?e("adminProductsPage","update"):e("adminProductsPage","create")})]})]})]})]})})]})}):a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("profile","title")}),a.jsxs("div",{className:"card p-8",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("navigation","language")==="is"?"Skráðu þig inn":"Please log in"}),a.jsx("p",{className:"text-gray-600 mb-6",children:e("navigation","language")==="is"?"Þú verður að skrá þig inn til að skoða prófílinn þinn.":"You must be logged in to view your profile."})]})]})})})};function kT(){throw new Error("Kenni OIDC not configured")}function NT(e){const t=e.startsWith("#")?e.substring(1):e,r=new URLSearchParams(t),s=r.get("id_token"),n=r.get("state"),i=r.get("error"),o=r.get("error_description");return{idToken:s,state:n,error:i,errorDescription:o}}const ST=()=>{var k,P;const{t:e}=de(),t=gr(),r=tr(),s=Ue(),{isAuthenticated:n,isLoading:i}=ne(C=>C.auth),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(""),[m,g]=j.useState({email:"",password:""}),f=((P=(k=r.state)==null?void 0:k.from)==null?void 0:P.pathname)||"/";j.useEffect(()=>{s(PE())},[s]),j.useEffect(()=>{n&&!i&&t(f,{replace:!0})},[n,i,t,f]);const x=C=>{C.preventDefault();try{const N=kT();window.location.href=N}catch(N){console.error(N)}},p=C=>{C.preventDefault(),l(!o)},b=async C=>{if(C.preventDefault(),!!u.trim())try{await s(Fc({phone:u})).unwrap(),t(f,{replace:!0})}catch(N){console.error("Dummy login failed:",N)}},y=C=>{C.preventDefault(),d(!c)},v=async C=>{if(C.preventDefault(),!(!m.email.trim()||!m.password.trim()))try{await s(lo({username:"test_customer",password:m.password})).unwrap(),t(f,{replace:!0})}catch(N){console.error("Test login failed:",N)}},w=C=>{g({...m,[C.target.name]:C.target.value})};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:"/logo_black-web.webp",alt:"Ölföng Logo",className:"h-16 w-auto dark:invert"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth","login")}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-300",children:e("authExtra","loginWithElectronicIdDescription")})]}),a.jsxs("div",{className:"mt-6 space-y-4",children:[a.jsxs("button",{onClick:x,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-primary-600 text-base font-semibold rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[a.jsx("span",{children:e("auth","login")}),a.jsx("span",{className:"text-sm opacity-90",children:e("authExtra","loginWithElectronicId")})]}),a.jsxs("button",{onClick:p,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-orange-600 text-base font-semibold rounded-lg text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[a.jsx("span",{children:"Test Login"}),a.jsx("span",{className:"text-sm opacity-90",children:"Dummy Electronic ID (Testing)"})]}),a.jsxs("button",{onClick:y,className:"group relative w-full flex flex-col items-center justify-center py-3 px-4 border border-green-600 text-base font-semibold rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:[a.jsx("span",{children:"Automated Test Login"}),a.jsx("span",{className:"text-sm opacity-90",children:"Email/Password (For Tests)"})]}),o&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Insert your phone number"}),a.jsx("input",{id:"phone",type:"tel",value:u,onChange:C=>h(C.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter phone number"})]}),a.jsx("button",{onClick:b,disabled:!u.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Logging in...":"Login with Phone"})]}),c&&a.jsxs("form",{onSubmit:v,className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),a.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:m.email,onChange:w,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter email address"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Password"}),a.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:m.password,onChange:w,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter password"})]}),a.jsx("button",{type:"submit",disabled:!m.email.trim()||!m.password.trim()||i,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Logging in...":"Login with Email"})]})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx(he,{to:"/admin-login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("authExtra","adminDeliveryLogin")})})]})})},CT=()=>{const e=Ue(),t=gr(),r=tr();return j.useEffect(()=>{const{idToken:s,state:n,error:i}=NT(r.hash),o=sessionStorage.getItem("kenni_oidc_state");if(sessionStorage.removeItem("kenni_oidc_state"),i){t("/login");return}if(!s||!n||n!==o){t("/login");return}e(Dc({idToken:s})).unwrap().then(()=>t("/")).catch(()=>t("/login"))},[e,t,r.hash]),a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})},_T=()=>{var g,f;const{t:e}=de(),t=Ue(),r=gr(),s=tr(),{isLoading:n,error:i}=ne(x=>x.auth),[o,l]=j.useState({username:"",password:""}),[c,d]=j.useState(!1),u=((f=(g=s.state)==null?void 0:g.from)==null?void 0:f.pathname)||"/admin",h=x=>{l({...o,[x.target.name]:x.target.value})},m=async x=>{x.preventDefault();const p=await t(lo(o));if(p.type==="auth/login/fulfilled"){const y=p.payload.user.role==="ADMIN"?"/admin":u;r(y,{replace:!0})}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8",children:[a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:"/logo_black-web.webp",alt:"Ölföng Logo",className:"h-16 w-auto dark:invert"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:e("auth","loginStaff")})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"username",className:"label",children:e("auth","username")}),a.jsx("input",{id:"username",name:"username",type:"text",required:!0,value:o.username,onChange:h,className:"input",placeholder:e("auth","username"),"data-testid":"admin-username"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"label",children:e("auth","password")}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:c?"text":"password",required:!0,value:o.password,onChange:h,className:"input pr-10",placeholder:e("auth","password"),"data-testid":"admin-password"}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>d(!c),children:c?a.jsx(os,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"}):a.jsx(Yt,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})})]})]})]}),i&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded-lg",children:i}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:n,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200","data-testid":"admin-login-button",children:e("auth","login")})}),a.jsx("div",{className:"text-center mt-4",children:a.jsx(he,{to:"/login",className:"text-sm text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:e("common","back")})})]})]})})},So=se("dashboard/fetchStats",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/dashboard/stats")).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch dashboard statistics")}}),ET={stats:{totalRevenue:0,totalOrders:0,totalProducts:0,totalCustomers:0,revenueGrowth:0,orderGrowth:0,productGrowth:0,customerGrowth:0},recentOrders:[],orderStatusCounts:{pending:0,confirmed:0,preparing:0,out_for_delivery:0,delivered:0,cancelled:0},topProducts:[],isLoading:!1,error:null},PT=rr({name:"dashboard",initialState:ET,reducers:{clearError:e=>{e.error=null},updateOrderStatus:(e,t)=>{const{orderId:r,status:s}=t.payload,n=e.recentOrders.find(i=>i.id===r);n&&(n.status=s),s==="delivered"?(e.orderStatusCounts.delivered+=1,e.orderStatusCounts.pending-=1):s==="cancelled"&&(e.orderStatusCounts.cancelled+=1,e.orderStatusCounts.pending-=1)}},extraReducers:e=>{e.addCase(So.pending,t=>{t.isLoading=!0,t.error=null}).addCase(So.fulfilled,(t,r)=>{t.isLoading=!1,t.stats=r.payload.stats,t.recentOrders=r.payload.recentOrders,t.orderStatusCounts=r.payload.orderStatusCounts,t.topProducts=r.payload.topProducts}).addCase(So.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),TT=PT.reducer,IT=()=>{const[e,t]=j.useState(0),[r,s]=j.useState(!1),{user:n}=ne(o=>o.auth),i=j.useCallback(async()=>{if(!(!n||n.role!=="ADMIN"))try{s(!0);const o=await Z.get("/chat/unread-count");t(o.data.unreadCount||0)}catch(o){console.error("Error fetching unread count:",o),t(0)}finally{s(!1)}},[n]);return j.useEffect(()=>{i();const o=setInterval(i,3e4);return()=>clearInterval(o)},[n,i]),{unreadCount:e,isLoading:r,refetch:i}},vg=({isMobile:e=!1,onCollapseChange:t})=>{const{t:r}=Ut(),[s,n]=j.useState(()=>{const m=localStorage.getItem("adminSidebarCollapsed");return m?JSON.parse(m):!1}),i=tr(),o=Ue(),{unreadCount:l}=IT();j.useEffect(()=>{t&&t(s)},[s,t]);const c=()=>{n(m=>{const g=!m;return localStorage.setItem("adminSidebarCollapsed",JSON.stringify(g)),t&&t(g),g})},d=[{title:r("adminSidebar","overview"),items:[{name:r("adminNavigation","dashboard"),href:"/admin",icon:YE}]},{title:r("adminSidebar","productManagement"),items:[{name:r("adminNavigation","products"),href:"/admin/products",icon:we},{name:r("adminNavigation","categories"),href:"/admin/categories",icon:Wc}]},{title:r("adminSidebar","orderManagement"),items:[{name:r("adminNavigation","orders"),href:"/admin/orders",icon:_r},{name:r("adminNavigation","pos"),href:"/admin/pos",icon:BE},{name:r("adminNavigation","customers"),href:"/admin/customers",icon:fn}]},{title:r("adminSidebar","communication"),items:[{name:r("adminNavigation","chat"),href:"/admin/chat",icon:di,unreadCount:l}]},{title:r("adminSidebar","analyticsReports"),items:[{name:r("adminNavigation","analytics"),href:"/admin/analytics",icon:tk},{name:r("adminNavigation","reports"),href:"/admin/reports",icon:sk}]},{title:r("adminSidebar","system"),items:[{name:r("adminNavigation","media"),href:"/admin/media",icon:VE},{name:r("adminNavigation","banners"),href:"/admin/banners",icon:or},{name:r("adminNavigation","demoData"),href:"/admin/demo-data",icon:tu},{name:r("adminNavigation","notifications"),href:"/admin/notifications",icon:Nn},{name:r("adminNavigation","translations"),href:"/admin/translations",icon:GE},{name:r("adminSettings","general"),href:"/admin/settings/general",icon:fs},{name:r("adminSettings","business"),href:"/admin/settings/business",icon:J0},{name:r("adminSettings","shipping"),href:"/admin/settings/shipping",icon:lr},{name:r("adminSettings","apiKeys"),href:"/admin/settings/api-keys",icon:fh},{name:r("adminSettings","paymentGateways"),href:"/admin/settings/payment-gateways",icon:qs},{name:r("adminSettings","receipts"),href:"/admin/settings/receipts",icon:ik},{name:r("adminSettings","smtp"),href:"/admin/settings/smtp",icon:ms}]}],u=()=>{o(X0())},h=m=>m==="/admin"?i.pathname===m||i.pathname==="/admin/":i.pathname===m||i.pathname.startsWith(m+"/");return a.jsxs("div",{className:`bg-white dark:bg-gray-800 text-gray-900 dark:text-white ${e?"w-full h-full":"rounded-r-lg shadow-sm border border-gray-200 dark:border-gray-700"} transition-all duration-300 ease-in-out ${e?"w-full h-full":s?"w-16":"w-56"} h-full flex flex-col overflow-hidden`,children:[!e&&a.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 p-3",children:a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:c,className:"p-1.5 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition-all duration-200 hover:scale-110 active:scale-95",children:a.jsx("div",{className:"transition-transform duration-300 ease-in-out",children:s?a.jsx(ep,{className:"h-4 w-4"}):a.jsx(Z0,{className:"h-4 w-4"})})})})}),a.jsx("nav",{className:"flex-1 px-2 py-2 space-y-2",children:d.map((m,g)=>a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("div",{className:`px-2 py-1 transition-all duration-300 ease-in-out ${s&&!e?"opacity-0 h-0 py-0 overflow-hidden":"opacity-100 h-auto"}`,children:a.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider transition-colors duration-200",children:m.title})}),a.jsx("div",{className:"space-y-0",children:m.items.map(f=>{const x=f.icon,p=h(f.href);return a.jsxs(he,{to:f.href,className:`relative flex items-center px-2 py-1.5 rounded-lg text-sm font-medium transition-all duration-300 ease-in-out group ${p?"bg-blue-600 text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-white"}`,title:s?f.name:void 0,children:[a.jsx(x,{className:`h-4 w-4 transition-transform duration-200 group-hover:scale-110 ${s&&!e?"absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2":"flex-shrink-0"}`}),a.jsxs("div",{className:`flex items-center justify-between flex-1 transition-all duration-300 ease-in-out ${s&&!e?"opacity-0 w-0 overflow-hidden":"opacity-100 w-auto ml-2.5"}`,children:[a.jsx("span",{className:"text-sm whitespace-nowrap transition-all duration-200",children:f.name}),f.unreadCount>0&&a.jsx("span",{className:`ml-2 px-2 py-0.5 text-xs rounded-full transition-all duration-200 ${p?"bg-blue-500 text-white":"bg-red-500 text-white"}`,children:f.unreadCount})]}),s&&!e&&f.unreadCount>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center transition-all duration-200 animate-pulse",children:f.unreadCount})]},f.name)})}),g<d.length-1&&a.jsx("div",{className:"px-2",children:a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"})})]},m.title))}),a.jsxs("div",{className:`border-b border-gray-200 dark:border-gray-700 flex-shrink-0 space-y-1.5 transition-all duration-300 ease-in-out ${e?"p-3":"px-3 pt-3 pb-3"}`,children:[a.jsxs("div",{className:"flex items-center p-1.5 rounded-lg bg-gray-50 dark:bg-gray-700/50 transition-all duration-300 ease-in-out",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 transition-transform duration-200 hover:scale-105",children:a.jsx("span",{className:"text-white text-sm font-medium transition-colors duration-200",children:"A"})}),a.jsxs("div",{className:`min-w-0 flex-1 transition-all duration-300 ease-in-out ${s&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate transition-colors duration-200",children:r("adminNavigation","adminUser")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate transition-colors duration-200",children:r("adminSidebar","adminEmail")})]})]}),a.jsxs("button",{onClick:u,className:`flex items-center w-full px-3 py-1.5 rounded-lg text-sm font-medium text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-700 dark:hover:text-red-300 transition-all duration-300 ease-in-out hover:scale-[1.02] active:scale-[0.98] ${s&&!e?"justify-center px-2":""}`,title:s&&!e?r("adminNavigation","logout"):void 0,children:[a.jsx(XE,{className:"h-4 w-4 flex-shrink-0 transition-transform duration-200 group-hover:scale-110"}),a.jsx("span",{className:`transition-all duration-300 ease-in-out ${s&&!e?"opacity-0 w-0 overflow-hidden ml-0":"opacity-100 w-auto ml-3"}`,children:r("adminNavigation","logout")})]})]})]})};vg.propTypes={isMobile:J.bool,onCollapseChange:J.func};const oe=({children:e,showSidebar:t=!0})=>{const{t:r}=Ut(),[s,n]=j.useState(!1),[i,o]=j.useState(()=>{const c=localStorage.getItem("adminSidebarCollapsed");return c?JSON.parse(c):!1}),l=c=>{o(c)};return t?a.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s&&a.jsx("div",{className:"fixed inset-0 z-40 lg:hidden",children:a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)})}),s&&a.jsx("div",{className:"fixed right-0 top-0 h-full w-80 bg-white dark:bg-gray-800 shadow-xl transform transition-transform duration-300 ease-in-out z-50 lg:hidden",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r("navigation","menu")}),a.jsx("button",{onClick:()=>n(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx(gg,{className:"w-6 h-6 rotate-45"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:a.jsx(vg,{isMobile:!0})})]})}),a.jsxs("div",{className:"hidden lg:flex lg:flex-1",children:[a.jsx("div",{className:"fixed top-16 bottom-0 left-0 z-50 flex-shrink-0",children:a.jsx("div",{className:"m-4 lg:m-0 lg:mt-0 lg:mb-0 lg:pt-6",style:{height:"calc(100vh - 4rem)"},children:a.jsx(vg,{onCollapseChange:l})})}),a.jsx("div",{className:`flex-1 flex flex-col min-w-0 transition-all duration-300 ease-in-out ${i?"lg:ml-16":"lg:ml-56"}`,children:a.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})})]}),a.jsxs("div",{className:"lg:hidden flex-1 flex flex-col min-w-0",children:[a.jsx("div",{className:"lg:hidden sticky top-0 z-40 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mx-4 mt-4 mb-2 px-4 py-3",children:a.jsxs("button",{type:"button",className:"text-gray-700 dark:text-gray-300",onClick:()=>n(!0),children:[a.jsx("span",{className:"sr-only",children:r("adminLayout","openSidebar")}),a.jsx(gg,{className:"h-6 w-6","aria-hidden":"true"})]})}),a.jsx("main",{className:"flex-1 p-4 lg:p-6",children:e})]})]}):a.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:a.jsx("main",{className:"p-4 lg:p-6",children:e})})};oe.propTypes={children:J.node.isRequired,showSidebar:J.bool};const Tk=({user:e})=>{const{t}=de(),r=gr(),s=[{icon:we,label:t("adminDashboard","addProduct"),onClick:()=>r("/admin/products"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:fn,label:t("adminDashboard","manageUsers"),onClick:()=>r("/admin/customers"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Os,label:t("adminDashboard","viewAnalytics"),onClick:()=>r("/admin/analytics"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Qn,label:t("adminDashboard","reports"),onClick:()=>r("/admin/reports"),className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:bs,label:t("adminDashboard","export"),onClick:()=>{alert(t("adminDashboard","export")+" - Coming soon")},className:"flex flex-col items-center justify-center p-4 bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 group"},{icon:Ft,label:t("adminDashboard","newOrder"),onClick:()=>r("/admin/orders"),className:"flex flex-col items-center justify-center p-4 bg-blue-600 hover:bg-blue-700 rounded-xl border border-blue-600 hover:border-blue-700 shadow-sm hover:shadow-lg transition-all duration-300 group"}];return a.jsxs("div",{className:"py-4 sm:py-6",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:t("adminDashboard","dashboardOverview")}),a.jsxs("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400 mt-1 sm:mt-2",children:[t("adminDashboard","welcomeBack")," ",(e==null?void 0:e.fullName)||(e==null?void 0:e.username)]})]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3 sm:gap-4",children:s.map((n,i)=>a.jsxs("button",{onClick:n.onClick,className:n.className,children:[a.jsx(n.icon,{className:"h-6 w-6 text-gray-600 dark:text-gray-400 mb-2 group-hover:text-blue-500 transition-colors"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 text-center",children:n.label})]},i))})]})};Tk.propTypes={user:J.shape({fullName:J.string,username:J.string})};const Ik=({title:e,value:t,growth:r,icon:s,color:n="blue"})=>{const{t:i}=de();return a.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-1 sm:p-1.5 lg:p-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 dark:text-gray-400 truncate",children:e}),a.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white mt-1 sm:mt-2 truncate",children:t}),a.jsxs("div",{className:"flex items-center mt-2 sm:mt-3",children:[a.jsx(Os,{className:"h-3 w-3 sm:h-4 sm:w-4 text-green-500 mr-1 flex-shrink-0"}),a.jsxs("span",{className:"text-xs sm:text-sm text-green-600 dark:text-green-400 font-medium",children:["+",r,"%"]}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 ml-1 hidden sm:inline",children:i("adminDashboard","vsLastMonth")}),a.jsx("span",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 ml-1 sm:hidden",children:i("adminDashboard","vsLastMonthShort")})]})]}),a.jsx("div",{className:`p-1 sm:p-1.5 lg:p-2 rounded-lg bg-${n}-100 dark:bg-${n}-900/20 ml-2 sm:ml-3 flex-shrink-0`,children:a.jsx(s,{className:`h-3 w-3 sm:h-4 sm:w-4 lg:h-5 lg:w-5 text-${n}-600 dark:text-${n}-400`})})]})})};Ik.propTypes={title:J.string.isRequired,value:J.oneOfType([J.string,J.number]).isRequired,growth:J.number.isRequired,icon:J.elementType.isRequired,color:J.string};const Rk=({stats:e,formatCurrency:t})=>{const{t:r}=de(),s=[{title:r("adminDashboard","totalRevenue"),value:t(e.totalRevenue),growth:e.revenueGrowth,icon:hh,color:"green"},{title:r("adminDashboard","totalOrders"),value:e.totalOrders.toLocaleString(),growth:e.orderGrowth,icon:_r,color:"blue"},{title:r("adminDashboard","totalProducts"),value:e.totalProducts,growth:e.productGrowth,icon:we,color:"purple"},{title:r("adminDashboard","totalCustomers"),value:e.totalCustomers,growth:e.customerGrowth,icon:fn,color:"indigo"}];return a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8 mb-6 sm:mb-8",children:s.map((n,i)=>a.jsx(Ik,{title:n.title,value:n.value,growth:n.growth,icon:n.icon,color:n.color},i))})};Rk.propTypes={stats:J.shape({totalRevenue:J.number.isRequired,revenueGrowth:J.number.isRequired,totalOrders:J.number.isRequired,orderGrowth:J.number.isRequired,totalProducts:J.number.isRequired,productGrowth:J.number.isRequired,totalCustomers:J.number.isRequired,customerGrowth:J.number.isRequired}).isRequired,formatCurrency:J.func.isRequired};const wg=e=>new Intl.NumberFormat("is-IS").format(e),RT=e=>new Date(e).toLocaleDateString("is-IS"),AT=e=>({pending:"bg-yellow-100 text-yellow-800",confirmed:"bg-blue-100 text-blue-800",shipped:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",Ak=e=>({pending:"Clock",confirmed:"CheckCircle",shipped:"Package",delivered:"CheckCircle",cancelled:"AlertCircle"})[e]||"Clock",Ok=({recentOrders:e,formatCurrency:t,formatDate:r})=>{const{t:s}=de();return a.jsx("div",{className:"mb-6 sm:mb-8",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:s("adminDashboard","recentOrders")}),a.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[a.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(lt,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),a.jsx("button",{className:"p-1.5 sm:p-2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(ak,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]})}),a.jsx("div",{className:"overflow-x-auto -mx-4 sm:-mx-6 md:mx-0",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s("adminDashboard","orderId")}),a.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s("adminDashboard","customer")}),a.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s("adminDashboard","amount")}),a.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s("adminDashboard","status")}),a.jsx("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:s("adminDashboard","date")})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(n=>{const i=Ak(n.status);return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[a.jsxs("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",n.id]}),a.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:n.customer}),a.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:t(n.amount)}),a.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${AT(n.status)}`,children:[a.jsx(i,{className:"h-3 w-3 mr-1"}),s("orders","statuses")[n.status.toUpperCase()]]})}),a.jsx("td",{className:"px-3 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:r(n.date)})]},n.id)})})]})})]})})};Ok.propTypes={recentOrders:J.arrayOf(J.shape({id:J.oneOfType([J.string,J.number]).isRequired,customer:J.string.isRequired,amount:J.number.isRequired,status:J.string.isRequired,date:J.string.isRequired})).isRequired,formatCurrency:J.func.isRequired,formatDate:J.func.isRequired};const Lk=({orderStatusCounts:e})=>{const{t}=de();return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard","orderStatus")})}),a.jsx("div",{className:"p-4 sm:p-6",children:a.jsx("div",{className:"space-y-4",children:Object.entries(e).map(([r,s])=>{const n=Ak(r),i=Object.values(e).reduce((l,c)=>l+c,0),o=i>0?s/i*100:0;return a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(n,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-3"}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 capitalize",children:t("orders","statuses")[r.toUpperCase()]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-600 rounded-full h-2 mr-3",children:a.jsx("div",{className:"bg-blue-600 dark:bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${o}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-8 text-right",children:s})]})]},r)})})})]})};Lk.propTypes={orderStatusCounts:J.objectOf(J.number).isRequired};const Mk=({topProducts:e})=>{const{t}=de();return a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 dark:text-white",children:t("adminDashboard","topProducts")})}),a.jsx("div",{className:"p-4 sm:p-6",children:a.jsx("div",{className:"space-y-4",children:e.map((r,s)=>a.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:s+1})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:r.name}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.sales," ",t("adminDashboard","sales")]})]})]}),a.jsx("div",{className:"text-right",children:a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:wg(r.revenue)})})]},r.id))})})]})};Mk.propTypes={topProducts:J.arrayOf(J.shape({id:J.oneOfType([J.string,J.number]).isRequired,name:J.string.isRequired,sales:J.number.isRequired,revenue:J.number.isRequired})).isRequired};const OT=()=>{const{t:e}=de();return a.jsx(oe,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("common","loading")})]})})})},Dk=({error:e,onRetry:t})=>{const{t:r}=de();return a.jsx(oe,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-red-600 dark:text-red-400 mb-4",children:a.jsx(mt,{className:"h-12 w-12 mx-auto"})}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e}),a.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:r("common","retry")})]})})})};Dk.propTypes={error:J.string.isRequired,onRetry:J.func.isRequired};const LT=()=>{const e=Ue(),{user:t}=ne(c=>c.auth),{stats:r,recentOrders:s,topProducts:n,orderStatusCounts:i,isLoading:o,error:l}=ne(c=>c.dashboard);return j.useEffect(()=>{e(So())},[e]),o?a.jsx(OT,{}):l?a.jsx(Dk,{error:l,onRetry:()=>e(So())}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16",children:a.jsx(Tk,{user:t})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-3 sm:px-4 md:px-6 lg:px-8 xl:px-12 2xl:px-16 py-4 sm:py-6",children:[a.jsx(Rk,{stats:r,formatCurrency:wg}),a.jsx(Ok,{recentOrders:s,formatCurrency:wg,formatDate:RT}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 lg:gap-8",children:[a.jsx(Lk,{orderStatusCounts:i}),a.jsx(Mk,{topProducts:n})]})]})})]})})},MT=({onImportProduct:e,onClose:t})=>{const{t:r}=Ut(),[s,n]=j.useState(""),[i,o]=j.useState([]),[l,c]=j.useState(!1),[d,u]=j.useState([]),[h,m]=j.useState(!1),g={C:{is:"Fiskur",en:"Fish"},D:{is:"Alifuglar",en:"Fowl"},E:{is:"Nautakjöt",en:"Beef"},F:{is:"Lambakjöt",en:"Lamb"},G:{is:"Svínakjöt",en:"Pork"},H:{is:"Villibráð",en:"Game"},I:{is:"Grænmetisréttir",en:"Vegetables"},J:{is:"Grillmat",en:"Barbeque food"},M:{is:"Pasta",en:"Pasta"},R:{is:"Reykt kjöt",en:"Smoked meat"},S:{is:"Pottréttir",en:"Casserole"},2:{is:"Pylsur",en:"Hot dogs"},4:{is:"Sushi",en:"Sushi"},B:{is:"Skelfisk",en:"Shellfish"},Æ:{is:"Hægt að panta",en:"Can be reserved"}},f={beer:{is:"Bjór",en:"Beer"},"red-wine":{is:"Rauðvín",en:"Red wine"},"white-wine":{is:"Hvítvín",en:"White wine"},strong:{is:"Sterkt áfengi",en:"Spirits"},cider:{is:"Síder",en:"Cider"},liqueur:{is:"Líkjör",en:"Liqueur"},"rose-wine":{is:"Rósavín",en:"Rose wine"},"sparkling-wine":{is:"Freyðivín",en:"Sparkling wine"},"dessert-wine":{is:"Eftirréttavín",en:"Dessert wine"},packaging:{is:"Umbúðir",en:"Packaging"}},x=async k=>{var P;if(k.trim()){c(!0);try{const C=await fetch("http://192.168.8.62:5000/api/atvr/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({searchTerm:k})});if(!C.ok)throw new Error(r("atvrImport","failedToImport"));const N=await C.json();o(((P=N.data)==null?void 0:P.products)||[])}catch(C){console.error("Error searching ATVR products:",C),D.error(r("atvrImport","failedToImport"))}finally{c(!1)}}},p=k=>{k.preventDefault(),x(s)},b=k=>{u(P=>P.some(N=>N.id===k.id)?P.filter(N=>N.id!==k.id):[...P,k])},y=k=>{var R;const P=k.foodPairings||[],C=k.foodPairingsIs||[],N=P.map(F=>{var I;return{code:F,name:((I=g[F])==null?void 0:I.en)||F}}),S=C.map(F=>{var I;return{code:F,name:((I=g[F])==null?void 0:I.is)||F}});return{name:k.name,nameIs:k.nameIs||k.name,description:k.description||"",descriptionIs:k.descriptionIs||k.description||"",price:parseFloat(k.price.replace(/[^\d.,]/g,"").replace(",",".")),category:((R=f[k.category])==null?void 0:R.en)||k.category,image:k.image,alcoholContent:k.alcoholContent,volume:k.volume,volumeIs:k.volumeIs,country:k.country,countryIs:k.countryIs,producer:k.producer,producerIs:k.producerIs,distributor:k.distributor,distributorIs:k.distributorIs,packaging:k.packaging,packagingIs:k.packagingIs,foodPairings:N,foodPairingsIs:S,specialAttributes:k.specialAttributes||[],specialAttributesIs:k.specialAttributesIs||[],availability:k.availability||"available",availabilityIs:k.availabilityIs,atvrProductId:k.id,atvrUrl:k.url}},v=async()=>{if(d.length===0){D.error(r("atvrImport","pleaseSelectOne"));return}try{const k=d.map(y);for(const P of k)await e(P);D.success(`${r("atvrImport","successfullyImported")} ${k.length} ${r("atvrImport","productsImported")}`),u([]),o([]),n("")}catch(k){console.error("Error importing products:",k),D.error(r("atvrImport","failedToImport"))}},w=()=>{m(!0)};return a.jsxs(a.Fragment,{children:[h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[r("atvrImport","previewImportTitle")," (",d.length," ",r("atvrImport","products"),")"]}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:a.jsx("div",{className:"space-y-6",children:d.map((k,P)=>{const C=y(k);return a.jsx("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-700",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:C.name}),C.nameIs&&C.nameIs!==C.name&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[a.jsx("strong",{children:r("atvrImport","icelandicLabel")})," ",C.nameIs]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:C.description}),C.descriptionIs&&C.descriptionIs!==C.description&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:[a.jsx("strong",{children:r("atvrImport","icelandicLabel")})," ",C.descriptionIs]}),a.jsxs("p",{className:"text-lg font-bold text-primary-600",children:[C.price," kr"]})]}),a.jsxs("div",{className:"space-y-2",children:[C.volume&&a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:r("atvrImport","volume")})," ",C.volume,C.volumeIs&&C.volumeIs!==C.volume&&a.jsxs("span",{className:"text-gray-600",children:[" / ",C.volumeIs]})]}),C.country&&a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:r("atvrImport","country")})," ",C.country,C.countryIs&&C.countryIs!==C.country&&a.jsxs("span",{className:"text-gray-600",children:[" / ",C.countryIs]})]}),C.producer&&a.jsxs("p",{className:"text-sm",children:[a.jsx("strong",{children:r("atvrImport","producer")})," ",C.producer,C.producerIs&&C.producerIs!==C.producer&&a.jsxs("span",{className:"text-gray-600",children:[" / ",C.producerIs]})]}),C.foodPairings&&C.foodPairings.length>0&&a.jsxs("div",{children:[a.jsx("strong",{className:"text-sm",children:r("atvrImport","foodPairings")}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:C.foodPairings.map((N,S)=>a.jsx("span",{className:"text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 px-2 py-1 rounded",children:N.name},S))})]})]})]})},P)})})}),a.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:r("atvrImport","cancel")}),a.jsx("button",{onClick:()=>{m(!1),v()},className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:r("atvrImport","importProductsButton")})]})]})}),a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r("atvrImport","title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:r("atvrImport","subtitle")})]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"h-6 w-6"})})]}),a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("form",{onSubmit:p,className:"flex space-x-4",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",value:s,onChange:k=>n(k.target.value),placeholder:r("atvrImport","searchPlaceholderIs"),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent dark:bg-gray-700 dark:text-white"})}),a.jsxs("button",{type:"submit",disabled:l||!s.trim(),className:"px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[l?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(nt,{className:"h-4 w-4"}),a.jsx("span",{children:r("atvrImport","search")})]})]})}),a.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.length>0?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r("atvrImport","searchResults")," (",i.length,")"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[d.length," ",r("atvrImport","selected")]}),a.jsx("button",{onClick:()=>u([]),className:"text-sm text-primary-600 hover:text-primary-700",children:r("atvrImport","clearAll")})]})]}),a.jsx("div",{className:"grid gap-4",children:i.map(k=>a.jsx("div",{className:`border rounded-lg p-4 cursor-pointer transition-colors ${d.some(P=>P.id===k.id)?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>b(k),children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:k.image?a.jsx("img",{src:k.image,alt:k.name,className:"w-16 h-16 object-cover rounded"}):a.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-700 rounded flex items-center justify-center",children:a.jsx("span",{className:"text-gray-400 text-xs",children:r("atvrImport","noImage")})})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white truncate",children:k.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[k.category," • ",k.country]}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[k.volume," • ",k.alcoholContent,"%"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:[k.price," kr."]}),k.foodPairings&&k.foodPairings.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[k.foodPairings.slice(0,3).map((P,C)=>a.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:P},C)),k.foodPairings.length>3&&a.jsxs("span",{className:"text-xs text-gray-500",children:["+",k.foodPairings.length-3," ",r("atvrImport","more")]})]})]})]})}),a.jsx("div",{className:"flex-shrink-0",children:d.some(P=>P.id===k.id)?a.jsx(gt,{className:"h-5 w-5 text-primary-600"}):a.jsx("div",{className:"h-5 w-5 border-2 border-gray-300 dark:border-gray-600 rounded-full"})})]})},k.id))})]}):s&&!l?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(mt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:r("atvrImport","noProductsFound")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r("atvrImport","tryDifferentTerms")})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(nt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:r("atvrImport","searchATVRProducts")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r("atvrImport","enterSearchTerm")})]})}),d.length>0&&a.jsxs("div",{className:"w-80 border-l border-gray-200 dark:border-gray-700 p-6 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[r("atvrImport","selected")," (",d.length,")"]}),a.jsx("button",{onClick:()=>u([]),className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:r("atvrImport","clearAll")})]}),a.jsx("div",{className:"space-y-3 mb-6",children:d.map(k=>a.jsx("div",{className:"border rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white text-sm truncate",children:k.name}),a.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:[k.price," kr."]})]}),a.jsx("button",{onClick:()=>b(k),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"h-4 w-4"})})]})},k.id))}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:w,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center justify-center space-x-2",children:[a.jsx(Yt,{className:"h-4 w-4"}),a.jsx("span",{children:r("atvrImport","previewImport")})]}),a.jsxs("button",{onClick:v,className:"w-full px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center justify-center space-x-2",children:[a.jsx(bs,{className:"h-4 w-4"}),a.jsx("span",{children:r("atvrImport","importProducts")})]})]})]})]})]})})]})};class DT{constructor(){this.sources={unsplash:{name:"Unsplash",apiKey:null,baseUrl:"https://api.unsplash.com",enabled:!1},pexels:{name:"Pexels",apiKey:null,baseUrl:"https://api.pexels.com/v1",enabled:!1},pixabay:{name:"Pixabay",apiKey:null,baseUrl:"https://pixabay.com/api",enabled:!1},google:{name:"Google Custom Search",apiKey:null,searchEngineId:null,baseUrl:"https://www.googleapis.com/customsearch/v1",enabled:!1}},this.apiKeysLoaded=!1}async loadApiKeys(){if(!this.apiKeysLoaded)try{const t=await fetch("/api/settings/public");if(t.ok){const s=(await t.json()).data.settings;this.sources.unsplash.apiKey=s.UNSPLASH_ACCESS_KEY||"",this.sources.pexels.apiKey=s.PEXELS_API_KEY||"",this.sources.pixabay.apiKey=s.PIXABAY_API_KEY||"",this.sources.google.apiKey=s.GOOGLE_API_KEY||"",this.sources.google.searchEngineId=s.GOOGLE_SEARCH_ENGINE_ID||"",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}catch(t){console.warn("Failed to load API keys from settings:",t),this.sources.unsplash.apiKey="",this.sources.pexels.apiKey="",this.sources.pixabay.apiKey="",this.sources.google.apiKey="",this.sources.google.searchEngineId="",this.sources.unsplash.enabled=!!this.sources.unsplash.apiKey,this.sources.pexels.enabled=!!this.sources.pexels.apiKey,this.sources.pixabay.enabled=!!this.sources.pixabay.apiKey,this.sources.google.enabled=!!(this.sources.google.apiKey&&this.sources.google.searchEngineId),this.apiKeysLoaded=!0}}async searchImages(t,r={}){await this.loadApiKeys();const{perPage:s=20,orientation:n="all",color:i="all",sources:o=Object.keys(this.sources).filter(h=>this.sources[h].enabled)}=r;if(o.length===0)return{images:[],errors:[{source:"All Sources",error:"No API keys configured. Please configure API keys in admin settings."}],total:0,sources:[]};const l=o.map(h=>this.searchFromSource(h,t,{perPage:s,orientation:n,color:i}).catch(m=>(console.warn(`Failed to search ${h}:`,m),[]))),d=(await Promise.all(l)).flat(),u=this.removeDuplicates(d);return this.shuffleArray(u).slice(0,s)}async searchFromSource(t,r,s){switch(t){case"unsplash":return this.searchUnsplash(r,s);case"pexels":return this.searchPexels(r,s);case"pixabay":return this.searchPixabay(r,s);case"google":return this.searchGoogle(r,s);default:throw new Error(`Unknown source: ${t}`)}}async searchUnsplash(t,r){const{perPage:s,orientation:n,color:i}=r,o=this.sources.unsplash;if(!o.enabled)return[];const l=new URLSearchParams({query:t,per_page:Math.min(s,30),orientation:n==="all"?void 0:n,color:i==="all"?void 0:i}),c=await fetch(`${o.baseUrl}/search/photos?${l}`,{headers:{Authorization:`Client-ID ${o.apiKey}`}});if(!c.ok)throw new Error(`Unsplash API error: ${c.status}`);return(await c.json()).results.map(u=>{var h;return{id:u.id,url:u.urls.regular,thumbnail:u.urls.thumb,fullSize:u.urls.full,alt:u.alt_description||u.description||t,source:"unsplash",sourceName:"Unsplash",photographer:u.user.name,photographerUrl:u.user.links.html,downloadUrl:u.links.download,width:u.width,height:u.height,color:u.color,tags:((h=u.tags)==null?void 0:h.map(m=>m.title))||[]}})}async searchPexels(t,r){const{perPage:s,orientation:n,color:i}=r,o=this.sources.pexels;if(!o.enabled)return[];const l=new URLSearchParams({query:t,per_page:Math.min(s,80),orientation:n==="all"?void 0:n,color:i==="all"?void 0:i}),c=await fetch(`${o.baseUrl}/search?${l}`,{headers:{Authorization:o.apiKey}});if(!c.ok)throw new Error(`Pexels API error: ${c.status}`);return(await c.json()).photos.map(u=>({id:u.id,url:u.src.medium,thumbnail:u.src.small,fullSize:u.src.large2x,alt:u.alt||t,source:"pexels",sourceName:"Pexels",photographer:u.photographer,photographerUrl:u.photographer_url,downloadUrl:u.src.original,width:u.width,height:u.height,color:u.avg_color,tags:[]}))}async searchPixabay(t,r){const{perPage:s,orientation:n,color:i}=r,o=this.sources.pixabay;if(!o.enabled)return[];const l=new URLSearchParams({key:o.apiKey,q:t,per_page:Math.min(s,200),image_type:"photo",orientation:n==="all"?"all":n,colors:i==="all"?void 0:i,safesearch:"true"}),c=await fetch(`${o.baseUrl}/?${l}`);if(!c.ok)throw new Error(`Pixabay API error: ${c.status}`);return(await c.json()).hits.map(u=>({id:u.id,url:u.webformatURL,thumbnail:u.previewURL,fullSize:u.largeImageURL,alt:u.tags||t,source:"pixabay",sourceName:"Pixabay",photographer:u.user,photographerUrl:`https://pixabay.com/users/${u.user}-${u.user_id}/`,downloadUrl:u.largeImageURL,width:u.imageWidth,height:u.imageHeight,color:u.color,tags:u.tags.split(", ").map(h=>h.trim())}))}async searchGoogle(t,r){const{perPage:s}=r,n=this.sources.google;if(!n.enabled)return[];const i=new URLSearchParams({key:n.apiKey,cx:n.searchEngineId,q:t,searchType:"image",num:Math.min(s,10),safe:"active",imgSize:"medium",imgType:"photo"}),o=await fetch(`${n.baseUrl}?${i}`);if(!o.ok)throw new Error(`Google Custom Search API error: ${o.status}`);return((await o.json()).items||[]).map(c=>{var d,u,h,m;return{id:c.link,url:c.link,thumbnail:((d=c.image)==null?void 0:d.thumbnailLink)||c.link,fullSize:c.link,alt:c.title||t,source:"google",sourceName:"Google Images",photographer:c.displayLink,photographerUrl:((u=c.image)==null?void 0:u.contextLink)||c.link,downloadUrl:c.link,width:((h=c.image)==null?void 0:h.width)||0,height:((m=c.image)==null?void 0:m.height)||0,color:null,tags:[]}})}removeDuplicates(t){const r=new Set;return t.filter(s=>r.has(s.url)?!1:(r.add(s.url),!0))}shuffleArray(t){const r=[...t];for(let s=r.length-1;s>0;s--){const n=Math.floor(Math.random()*(s+1));[r[s],r[n]]=[r[n],r[s]]}return r}getAvailableSources(){return Object.entries(this.sources).filter(([,t])=>t.enabled).map(([t,r])=>({key:t,name:r.name}))}getSearchSuggestions(t,r){const s=[t];return r&&typeof r=="string"&&(s.push(`${t} ${r.toLowerCase()}`),s.push(`${r.toLowerCase()} ${t}`)),["product photo","professional","white background","isolated","high quality","commercial"].forEach(i=>{s.push(`${t} ${i}`)}),[...new Set(s)]}}const Cm=new DT,FT=({isOpen:e,onClose:t,onSelectImage:r,productName:s="",category:n="",initialQuery:i=""})=>{const{t:o}=Ut(),[l,c]=j.useState(i||s),[d,u]=j.useState([]),[h,m]=j.useState(!1),[g,f]=j.useState(null),[x,p]=j.useState(null),[b,y]=j.useState("grid"),[v,w]=j.useState({orientation:"all",color:"all",sources:Cm.getAvailableSources().map(U=>U.key)}),[k,P]=j.useState([]),[C,N]=j.useState(!1),[S,R]=j.useState([]),[F,I]=j.useState([]),V=j.useRef(null),G=j.useRef(null);j.useEffect(()=>{const U=localStorage.getItem("imageSearchFavorites"),re=localStorage.getItem("imageSearchRecent");U&&R(JSON.parse(U)),re&&I(JSON.parse(re))},[]),j.useEffect(()=>{if(s||n){const U=Cm.getSearchSuggestions(s,n);P(U)}},[s,n]),j.useEffect(()=>{e&&V.current&&V.current.focus()},[e]);const z=async(U=l)=>{if(U.trim()){m(!0),f(null),p(null);try{const re=await Cm.searchImages(U,{perPage:24,...v});u(re);const fe=[U,...F.filter(Ne=>Ne!==U)].slice(0,10);I(fe),localStorage.setItem("imageSearchRecent",JSON.stringify(fe))}catch(re){f(re.message),D.error(`Search failed: ${re.message}`)}finally{m(!1)}}},M=U=>{c(U.target.value),N(!0)},_=U=>{c(U),N(!1),z(U)},E=U=>{p(U)},O=async U=>{try{m(!0);const re=await fetch("/api/images/download",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:U.url,source:U.source,photographer:U.photographer,photographerUrl:U.photographerUrl})});if(!re.ok)throw new Error("Failed to download image");const{imageUrl:fe}=await re.json();r(fe,{originalUrl:U.url,source:U.source,photographer:U.photographer,photographerUrl:U.photographerUrl}),D.success("Image downloaded and selected successfully"),t()}catch(re){D.error(`Failed to download image: ${re.message}`)}finally{m(!1)}},q=U=>{const re=S.some(Ne=>Ne.id===U.id);let fe;re?fe=S.filter(Ne=>Ne.id!==U.id):fe=[...S,U],R(fe),localStorage.setItem("imageSearchFavorites",JSON.stringify(fe))},ae=U=>{U.key==="Enter"?(N(!1),z()):U.key==="Escape"&&N(!1)};return j.useEffect(()=>{const U=re=>{G.current&&!G.current.contains(re.target)&&N(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]),e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-6xl mx-4 max-h-[90vh] flex flex-col shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Search for Product Images"}),a.jsxs("div",{className:"relative",ref:G,children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{ref:V,type:"text",value:l,onChange:M,onKeyPress:ae,placeholder:o("adminPlaceholders","searchForImages"),className:"input pl-10 pr-4 w-full"}),h&&a.jsx(Tt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 animate-spin"})]}),C&&(k.length>0||F.length>0)&&a.jsxs("div",{className:"absolute top-full left-0 right-0 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-10 mt-1",children:[k.length>0&&a.jsxs("div",{className:"p-2",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal","suggestions")}),k.slice(0,5).map((U,re)=>a.jsx("button",{onClick:()=>_(U),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:U},re))]}),F.length>0&&a.jsxs("div",{className:"p-2 border-t border-gray-200 dark:border-gray-600",children:[a.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:o("imageSearchModal","recentSearches")}),F.slice(0,5).map((U,re)=>a.jsx("button",{onClick:()=>_(U),className:"w-full text-left px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-600 rounded",children:U},re))]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[a.jsx("button",{onClick:()=>y(b==="grid"?"list":"grid"),className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:b==="grid"?a.jsx(gh,{className:"w-4 h-4"}):a.jsx(mh,{className:"w-4 h-4"})}),a.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600",children:a.jsx(Fe,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Qn,{className:"w-4 h-4 text-gray-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filters:"})]}),a.jsxs("select",{value:v.orientation,onChange:U=>w({...v,orientation:U.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[a.jsx("option",{value:"all",children:o("imageSearchModal","allOrientations")}),a.jsx("option",{value:"landscape",children:o("imageSearchModal","landscape")}),a.jsx("option",{value:"portrait",children:o("imageSearchModal","portrait")}),a.jsx("option",{value:"squarish",children:o("imageSearchModal","square")})]}),a.jsxs("select",{value:v.color,onChange:U=>w({...v,color:U.target.value}),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-800",children:[a.jsx("option",{value:"all",children:o("imageSearchModal","allColors")}),a.jsx("option",{value:"black_and_white",children:"Black & White"}),a.jsx("option",{value:"black",children:o("imageSearchModal","black")}),a.jsx("option",{value:"white",children:o("imageSearchModal","white")}),a.jsx("option",{value:"yellow",children:o("imageSearchModal","yellow")}),a.jsx("option",{value:"orange",children:o("imageSearchModal","orange")}),a.jsx("option",{value:"red",children:o("imageSearchModal","red")}),a.jsx("option",{value:"purple",children:o("imageSearchModal","purple")}),a.jsx("option",{value:"magenta",children:o("imageSearchModal","magenta")}),a.jsx("option",{value:"green",children:o("imageSearchModal","green")}),a.jsx("option",{value:"teal",children:o("imageSearchModal","teal")}),a.jsx("option",{value:"blue",children:o("imageSearchModal","blue")})]}),a.jsxs("button",{onClick:()=>z(),className:"btn btn-primary btn-sm",disabled:h,children:[h?a.jsx(Tt,{className:"w-4 h-4 animate-spin"}):a.jsx(nt,{className:"w-4 h-4"}),"Search"]})]})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[g&&a.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border-l-4 border-red-400",children:a.jsxs("div",{className:"flex",children:[a.jsx(mt,{className:"w-5 h-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:g})})]})}),h&&d.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Tt,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Searching for images..."})]})}):d.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(nt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No images found"}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500",children:"Try a different search term or adjust your filters"})]})}):a.jsx("div",{className:"p-4 overflow-y-auto",children:b==="grid"?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:d.map(U=>a.jsxs("div",{className:`relative group cursor-pointer rounded-lg overflow-hidden border-2 transition-all ${(x==null?void 0:x.id)===U.id&&(x==null?void 0:x.source)===U.source?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>E(U),children:[a.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700",children:a.jsx("img",{src:U.thumbnail,alt:U.alt,className:"w-full h-full object-cover",loading:"lazy"})}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center",children:a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex space-x-2",children:[a.jsx("button",{onClick:re=>{re.stopPropagation(),O(U)},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels","selectImage"),children:a.jsx(mg,{className:"w-4 h-4 text-green-600"})}),a.jsx("button",{onClick:re=>{re.stopPropagation(),window.open(U.url,"_blank")},className:"p-2 bg-white rounded-full shadow-lg hover:bg-gray-100",title:o("adminLabels","viewOriginal"),children:a.jsx(fg,{className:"w-4 h-4 text-blue-600"})}),a.jsx("button",{onClick:re=>{re.stopPropagation(),q(U)},className:`p-2 rounded-full shadow-lg ${S.some(re=>re.id===U.id&&re.source===U.source)?"bg-red-500 text-white":"bg-white hover:bg-gray-100"}`,title:o("adminLabels","addToFavorites"),children:a.jsx(WE,{className:"w-4 h-4"})})]})}),a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-black bg-opacity-75 text-white rounded",children:U.sourceName})}),U.photographer&&a.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:a.jsxs("p",{className:"text-xs text-white bg-black bg-opacity-75 px-2 py-1 rounded truncate",children:["by ",U.photographer]})})]},`${U.source}-${U.id}`))}):a.jsx("div",{className:"space-y-4",children:d.map(U=>a.jsxs("div",{className:`flex items-center space-x-4 p-4 rounded-lg border-2 transition-all cursor-pointer ${(x==null?void 0:x.id)===U.id&&(x==null?void 0:x.source)===U.source?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>E(U),children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:a.jsx("img",{src:U.thumbnail,alt:U.alt,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:U.alt}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:U.sourceName})]}),U.photographer&&a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["by ",U.photographer]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:[U.width," × ",U.height]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("button",{onClick:re=>{re.stopPropagation(),O(U)},className:"btn btn-primary btn-sm",children:[a.jsx(bs,{className:"w-4 h-4 mr-1"}),"Select"]}),a.jsx("button",{onClick:re=>{re.stopPropagation(),window.open(U.url,"_blank")},className:"btn btn-outline btn-sm",children:a.jsx(fg,{className:"w-4 h-4"})})]})]},`${U.source}-${U.id}`))})})]}),x&&a.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-600 rounded-lg overflow-hidden",children:a.jsx("img",{src:x.thumbnail,alt:x.alt,className:"w-full h-full object-cover"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:x.alt}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[x.sourceName," • ",x.width," × ",x.height]})]})]}),a.jsxs("button",{onClick:()=>O(x),className:"btn btn-primary",disabled:h,children:[h?a.jsx(Tt,{className:"w-4 h-4 animate-spin mr-2"}):a.jsx(bs,{className:"w-4 h-4 mr-2"}),"Download & Select"]})]})})]})}):null},Fk=({isOpen:e,onClose:t,onSelect:r,collection:s="PRODUCTS",selectedMedia:n=null,multiple:i=!1})=>{const{t:o}=Ut(),[l,c]=j.useState([]),[d,u]=j.useState(!1),[h,m]=j.useState(""),[g,f]=j.useState(s),[x,p]=j.useState(i?n||[]:n?[n]:[]),[b,y]=j.useState("grid"),[v,w]=j.useState({page:1,limit:20,total:0,pages:0}),k=[{id:"PRODUCTS",name:o("adminMedia","products"),icon:"🛍️"},{id:"CATEGORIES",name:o("adminMedia","categories"),icon:"📁"},{id:"BANNERS",name:o("adminMedia","banners"),icon:"📢"},{id:"PROFILE",name:o("adminMedia","profile"),icon:"👤"},{id:"DOCUMENTS",name:o("adminMedia","documents"),icon:"📄"},{id:"VIDEOS",name:o("adminMedia","videos"),icon:"🎥"}];j.useEffect(()=>{e&&P()},[e,g,v.page,h]),j.useEffect(()=>{e&&(f(s),p(i?n||[]:n?[n]:[]))},[e,s,n,i]);const P=async()=>{u(!0);try{const I=new URLSearchParams({collection:g,page:v.page,limit:v.limit,...h&&{search:h}}),V=await fetch(`/api/media?${I}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(V.ok){const G=await V.json();c(G.data.media),w(G.data.pagination)}else throw new Error("Failed to load media")}catch(I){console.error("Load media error:",I),D.error("Failed to load media")}finally{u(!1)}},C=I=>{if(i){const V=x.some(G=>G.id===I.id);p(V?G=>G.filter(z=>z.id!==I.id):G=>[...G,I])}else p([I])},N=()=>{r(i?x:x[0]||null),t()},S=()=>{window.open(`/admin/media/upload?collection=${g}`,"_blank")},R=I=>x.some(V=>V.id===I.id),F=I=>{if(I===0)return"0 Bytes";const V=1024,G=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(I)/Math.log(V));return parseFloat((I/Math.pow(V,z)).toFixed(2))+" "+G[z]};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o("adminMedia","selectMedia")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:i?o("adminMedia","selectMultipleMedia"):o("adminMedia","selectSingleMedia")})]}),a.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(Fe,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:k.map(I=>a.jsxs("button",{onClick:()=>{f(I.id),w(V=>({...V,page:1}))},className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${g===I.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a.jsx("span",{className:"mr-2",children:I.icon}),I.name]},I.id))})}),a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:o("adminMedia","searchMedia"),value:h,onChange:I=>m(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>y("grid"),className:`p-2 rounded-md ${b==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:a.jsx(mh,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>y("list"),className:`p-2 rounded-md ${b==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:a.jsx(gh,{className:"h-4 w-4"})}),a.jsxs("button",{onClick:S,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[a.jsx(Ta,{className:"h-4 w-4 mr-2"}),o("adminMedia","upload")]})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(nl,{className:"h-8 w-8 animate-spin text-blue-500"})}):l.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(or,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:o("adminMedia","noMediaFound")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:o("adminMedia","noMediaInCollection")}),a.jsxs("button",{onClick:S,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Ta,{className:"h-4 w-4 mr-2"}),o("adminMedia","uploadFirstMedia")]})]}):a.jsxs(a.Fragment,{children:[b==="grid"?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:l.map(I=>a.jsxs("div",{onClick:()=>C(I),className:`relative group cursor-pointer rounded-lg border-2 overflow-hidden transition-all ${R(I)?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[a.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:I.mimeType.startsWith("image/")?a.jsx("img",{src:I.thumbnailUrl||I.url,alt:I.alt||I.originalName,className:"w-full h-full object-cover",loading:"lazy"}):a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(or,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("span",{className:"text-xs",children:I.mimeType.split("/")[1].toUpperCase()})]})}),R(I)&&a.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 text-white rounded-full p-1",children:a.jsx(mg,{className:"h-3 w-3"})}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-opacity flex items-center justify-center",children:a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity text-white text-center",children:[a.jsx("p",{className:"text-sm font-medium truncate px-2",children:I.originalName}),a.jsx("p",{className:"text-xs",children:F(I.size)})]})})]},I.id))}):a.jsx("div",{className:"space-y-2",children:l.map(I=>a.jsxs("div",{onClick:()=>C(I),className:`flex items-center p-3 rounded-lg border cursor-pointer transition-all ${R(I)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[a.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center flex-shrink-0 mr-4",children:I.mimeType.startsWith("image/")?a.jsx("img",{src:I.thumbnailUrl||I.url,alt:I.alt||I.originalName,className:"w-full h-full object-cover rounded"}):a.jsx(or,{className:"w-6 h-6 text-gray-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:I.originalName}),a.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[F(I.size)," • ",I.mimeType]})]}),R(I)&&a.jsx("div",{className:"ml-4",children:a.jsx(mg,{className:"h-5 w-5 text-blue-500"})})]},I.id))}),v.pages>1&&a.jsxs("div",{className:"flex items-center justify-center mt-6 gap-2",children:[a.jsx("button",{onClick:()=>w(I=>({...I,page:I.page-1})),disabled:v.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia","previous")}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[v.page," / ",v.pages]}),a.jsx("button",{onClick:()=>w(I=>({...I,page:I.page+1})),disabled:v.page===v.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:o("adminMedia","next")})]})]})}),a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:x.length>0&&a.jsx("span",{children:i?`${x.length} ${o("adminMedia","itemsSelected")}`:`${x.length} ${o("adminMedia","itemSelected")}`})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:o("adminMedia","cancel")}),a.jsx("button",{onClick:N,disabled:x.length===0,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?o("adminMedia","selectItems"):o("adminMedia","selectItem")})]})]})]})}):null},$T=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(A=>A.auth),{products:s,isLoading:n,error:i}=ne(A=>A.products),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[m,g]=j.useState(!1),[f,x]=j.useState(null),[p,b]=j.useState(""),[y,v]=j.useState(""),[w,k]=j.useState(!1),[P,C]=j.useState(null),[N,S]=j.useState("grid"),{register:R,handleSubmit:F,formState:{errors:I},reset:V,setValue:G,watch:z}=ui({defaultValues:{name:"",nameIs:"",description:"",descriptionIs:"",price:0,stock:0,category:"WINE",subcategory:"",isAgeRestricted:!1,imageUrl:"",hasDiscount:!1,originalPrice:0,discountPercentage:0,discountStartDate:"",discountEndDate:"",discountReason:"",discountReasonIs:""}});j.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(gs({limit:100}))},[t,r]),j.useEffect(()=>{f?(G("name",f.name),G("nameIs",f.nameIs||""),G("description",f.description),G("descriptionIs",f.descriptionIs||""),G("price",f.price),G("stock",f.stock),G("category",f.category),G("subcategory",f.subcategory||""),G("isAgeRestricted",f.isAgeRestricted),G("imageUrl",f.imageUrl||""),G("hasDiscount",f.hasDiscount||!1),G("originalPrice",f.originalPrice||0),G("discountPercentage",f.discountPercentage||0),G("discountStartDate",f.discountStartDate?f.discountStartDate.split("T")[0]:""),G("discountEndDate",f.discountEndDate?f.discountEndDate.split("T")[0]:""),G("discountReason",f.discountReason||""),G("discountReasonIs",f.discountReasonIs||""),C(f.imageUrl||null)):(V(),C(null))},[f,G,V]);const M=async A=>{try{const ue={...A,price:parseFloat(A.price),stock:parseInt(A.stock),imageUrl:P||A.imageUrl};f?(await t(go({id:f.id,...ue})).unwrap(),D.success(e("common","success"))):(await t(fo(ue)).unwrap(),D.success(e("common","success"))),l(!1),x(null),V(),C(null)}catch(ue){D.error(ue.message||e("common","error"))}},_=async A=>{try{const ue=te=>{if(!te)return 0;if(typeof te=="number")return te;if(typeof te=="string"){const Re=te.match(/(\d+(?:\.\d+)?)/);return Re?parseFloat(Re[1]):0}return 0},K=te=>({Síder:"BEER",Bjór:"BEER",Beer:"BEER",Rauðvín:"WINE",Hvítvín:"WINE",Rósavín:"WINE",Freyðivín:"WINE","Red wine":"WINE","White wine":"WINE","Rose wine":"WINE","Sparkling wine":"WINE","Sterkt áfengi":"SPIRITS",Spirits:"SPIRITS",Líkjör:"SPIRITS",Liqueur:"SPIRITS",Cider:"BEER",Unknown:"WINE"})[te]||"WINE",H={name:A.name,nameIs:A.nameIs||A.name,description:A.description||"",descriptionIs:A.descriptionIs||A.description||"",price:ue(A.price),stock:100,category:K(A.category),ageRestriction:20,imageUrl:A.image||"",alcoholContent:A.alcoholContent,volume:A.volume,volumeIs:A.volumeIs,country:A.country,countryIs:A.countryIs,region:A.region,regionIs:A.regionIs,origin:A.origin,originIs:A.originIs,producer:A.producer,producerIs:A.producerIs,distributor:A.distributor,distributorIs:A.distributorIs,packaging:A.packaging,packagingIs:A.packagingIs,packagingWeight:A.packagingWeight,packagingWeightIs:A.packagingWeightIs,carbonFootprint:A.carbonFootprint,carbonFootprintIs:A.carbonFootprintIs,vintage:A.vintage,grapeVariety:A.grapeVariety,grapeVarietyIs:A.grapeVarietyIs,wineStyle:A.wineStyle,wineStyleIs:A.wineStyleIs,pricePerLiter:A.pricePerLiter,pricePerLiterIs:A.pricePerLiterIs,subcategories:A.subcategories||[],foodPairings:JSON.stringify(A.foodPairings||[]),foodPairingsIs:JSON.stringify(A.foodPairingsIs||[]),specialAttributes:JSON.stringify(A.specialAttributes||[]),specialAttributesIs:JSON.stringify(A.specialAttributesIs||[]),certifications:JSON.stringify(A.certifications||[]),certificationsIs:JSON.stringify(A.certificationsIs||[]),storeAvailability:A.storeAvailability?JSON.stringify(A.storeAvailability):null,atvrProductId:A.atvrProductId,atvrUrl:A.atvrUrl,atvrImageUrl:A.atvrImageUrl,availability:A.availability||"available",availabilityIs:A.availabilityIs};await t(fo(H)).unwrap(),D.success(`Product "${A.name}" imported successfully`)}catch(ue){console.error("Error importing product:",ue),D.error(`Failed to import product: ${ue.message||"Unknown error"}`)}},E=A=>{x(A),l(!0)},O=async A=>{if(window.confirm(e("common","delete")+"?"))try{await t(Kc(A)).unwrap(),D.success(e("common","success"))}catch(ue){D.error(ue.message||e("common","error"))}},q=A=>{const ue=A.target.files[0];if(ue){const K=new FileReader;K.onload=H=>{C(H.target.result)},K.readAsDataURL(ue)}},ae=A=>{C(A)},U=A=>{A&&A.url&&(C(A.url),G("imageUrl",A.url)),g(!1)},re=s.filter(A=>{const ue=A.name.toLowerCase().includes(p.toLowerCase())||A.nameIs&&A.nameIs.toLowerCase().includes(p.toLowerCase()),K=!y||A.category===y,H=!w||A.isAgeRestricted;return ue&&K&&H}),fe=[{value:"WINE",label:e("categories","WINE")},{value:"BEER",label:e("categories","BEER")},{value:"BEERS",label:e("categories","BEERS")},{value:"CIDER_RTD",label:e("categories","CIDER_RTD")},{value:"SPIRITS",label:e("categories","SPIRITS")},{value:"NICOTINE",label:e("categories","NICOTINE")},{value:"NON_ALCOHOLIC",label:e("categories","NON_ALCOHOLIC")},{value:"OFFERS",label:e("categories","OFFERS")}],Ne=[{value:"WHITE_WINE",label:e("subcategories","WHITE_WINE"),category:"WINE"},{value:"RED_WINE",label:e("subcategories","RED_WINE"),category:"WINE"},{value:"SPARKLING_WINE",label:e("subcategories","SPARKLING_WINE"),category:"WINE"},{value:"CHAMPAGNE",label:e("subcategories","CHAMPAGNE"),category:"WINE"},{value:"YELLOW_WINE",label:e("subcategories","YELLOW_WINE"),category:"WINE"},{value:"ROSE_WINE",label:e("subcategories","ROSE_WINE"),category:"WINE"},{value:"GIN",label:e("subcategories","GIN"),category:"SPIRITS"},{value:"COGNAC",label:e("subcategories","COGNAC"),category:"SPIRITS"},{value:"RUM",label:e("subcategories","RUM"),category:"SPIRITS"},{value:"LIQUEURS_SHOTS",label:e("subcategories","LIQUEURS_SHOTS"),category:"SPIRITS"},{value:"TEQUILA",label:e("subcategories","TEQUILA"),category:"SPIRITS"},{value:"VODKA",label:e("subcategories","VODKA"),category:"SPIRITS"},{value:"WHISKEY",label:e("subcategories","WHISKEY"),category:"SPIRITS"},{value:"VAPE",label:e("subcategories","VAPE"),category:"NICOTINE"},{value:"NICOTINE_PADS",label:e("subcategories","NICOTINE_PADS"),category:"NICOTINE"},{value:"SODA",label:e("subcategories","SODA"),category:"NON_ALCOHOLIC"},{value:"SOFT_DRINKS",label:e("subcategories","SOFT_DRINKS"),category:"NON_ALCOHOLIC"},{value:"ENERGY_DRINKS",label:e("subcategories","ENERGY_DRINKS"),category:"NON_ALCOHOLIC"}];return(r==null?void 0:r.role)!=="ADMIN"?a.jsxs(oe,{children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage","accessDenied")})})}),a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage","accessDenied")}),a.jsx("p",{className:"text-gray-600",children:e("adminPage","noPermission")})]})})})]}):n?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):i?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(mt,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:e("common","error")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:i}),a.jsx("button",{onClick:()=>t(gs({limit:100})),className:"btn btn-primary",children:e("common","retry")})]})})}):a.jsxs(oe,{children:[a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminProductsPage","productManagement")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminProductsPage","manageProducts")})]}),a.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[a.jsxs("button",{onClick:()=>{x(null),l(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(Ft,{className:"w-4 h-4 mr-2"}),e("adminProductsPage","newProduct")]}),a.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(we,{className:"w-4 h-4 mr-2"}),e("adminProducts","importFromATVR")]})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminLabels","filters")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>S("grid"),className:`p-2 rounded-lg transition-colors ${N==="grid"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels","gridView"),children:a.jsx(mh,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg transition-colors ${N==="list"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,title:e("adminLabels","listView"),children:a.jsx(gh,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:e("adminProductsPage","searchProducts"),value:p,onChange:A=>b(A.target.value),className:"input pl-10 w-full"})]}),a.jsxs("select",{value:y,onChange:A=>v(A.target.value),className:"input w-full",children:[a.jsx("option",{value:"",children:e("adminProductsPage","allCategories")}),fe.map(A=>a.jsx("option",{value:A.value,children:A.label},A.value))]}),a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:w,onChange:A=>k(A.target.checked),className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage","showOnlyAgeRestricted")})]})]})]}),N==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:re.map(A=>a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:[a.jsx("div",{className:"aspect-square bg-gray-200 dark:bg-gray-700 rounded-lg mb-4 overflow-hidden",children:A.imageUrl?a.jsx("img",{src:`http://192.168.8.62:5000${A.imageUrl}`,alt:A.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(we,{className:"w-12 h-12 text-gray-400 dark:text-gray-500"})})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("h3",{className:"font-medium text-gray-900 dark:text-white line-clamp-2",children:A.nameIs||A.name}),A.isAgeRestricted&&a.jsx(mt,{className:"w-4 h-4 text-red-500 flex-shrink-0 ml-2"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:A.descriptionIs||A.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:[A.price.toLocaleString()," ",e("common","currency")]}),a.jsxs("span",{className:`text-sm px-2 py-1 rounded ${A.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":A.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[A.stock," ",e("adminProductsPage","inStock")]})]}),a.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[a.jsxs("button",{onClick:()=>E(A),className:"btn btn-outline btn-sm flex-1 flex items-center justify-center space-x-1",children:[a.jsx(ws,{className:"w-3 h-3"}),a.jsx("span",{children:e("common","edit")})]}),a.jsx("button",{onClick:()=>O(A.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",children:a.jsx($t,{className:"w-3 h-3"})})]})]})]},A.id))}):a.jsx("div",{className:"space-y-4",children:re.map(A=>{var ue;return a.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-200 dark:bg-gray-700 rounded-lg overflow-hidden flex-shrink-0",children:A.imageUrl?a.jsx("img",{src:`http://192.168.8.62:5000${A.imageUrl}`,alt:A.name,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(we,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:A.nameIs||A.name}),A.isAgeRestricted&&a.jsx(mt,{className:"w-4 h-4 text-red-500 flex-shrink-0"})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:A.descriptionIs||A.description}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:((ue=A.category)==null?void 0:ue.name)||"Unknown"}),a.jsxs("span",{className:`text-xs px-2 py-1 rounded ${A.stock>10?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":A.stock>0?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[A.stock," ",e("adminProductsPage","inStock")]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400 text-lg whitespace-nowrap",children:[A.price.toLocaleString()," ",e("common","currency")]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>E(A),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[a.jsx(ws,{className:"w-3 h-3"}),a.jsx("span",{children:e("common","edit")})]}),a.jsx("button",{onClick:()=>O(A.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",children:a.jsx($t,{className:"w-3 h-3"})})]})]})]})})]})},A.id)})}),re.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(we,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminProductsPage","noProductsFound")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminProductsPage","adjustSearchOrAdd")})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:f?e("adminProductsPage","editProduct"):e("adminProductsPage","newProductTitle")}),a.jsx("button",{onClick:()=>{l(!1),x(null),V(),C(null)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(Fe,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:F(M),className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminProductsPage","nameEn")," *"]}),a.jsx("input",{...R("name",{required:!0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("products","title")}),I.name&&a.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm mt-1",children:e("adminProductsPage","nameRequired")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","nameIs")}),a.jsx("input",{...R("nameIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage","nameIs")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("common","price")," * (",e("common","currency"),")"]}),a.jsx("input",{type:"number",step:"0.01",min:"0",...R("price",{required:!0,min:0}),className:"input w-full"}),I.price&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:e("adminProductsPage","priceRequired")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("products","stock")," *"]}),a.jsx("input",{type:"number",min:"0",...R("stock",{required:!0,min:0}),className:"input w-full"}),I.stock&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:e("adminProductsPage","stockRequired")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[e("products","category")," *"]}),a.jsx("select",{...R("category",{required:!0}),className:"input w-full",children:fe.map(A=>a.jsx("option",{value:A.value,children:A.label},A.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminProductsPage","subcategory")}),a.jsxs("select",{...R("subcategory"),className:"input w-full",children:[a.jsx("option",{value:"",children:e("adminProductsPage","selectSubcategory")}),Ne.filter(A=>A.category===z("category")).map(A=>a.jsx("option",{value:A.value,children:A.label},A.value))]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",...R("isAgeRestricted"),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700",children:e("adminProductsPage","ageRestricted")})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminProductsPage","descEn")}),a.jsx("textarea",{...R("description"),rows:3,className:"input w-full",placeholder:e("products","description")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminProductsPage","descIs")}),a.jsx("textarea",{...R("descriptionIs"),rows:3,className:"input w-full",placeholder:e("adminProductsPage","descIs")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminProductsPage","image")}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:q,className:"input flex-1"}),a.jsxs("button",{type:"button",onClick:()=>h(!0),className:"btn btn-outline flex items-center space-x-2",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:e("adminLabels","searchOnline")})]}),a.jsxs("button",{type:"button",onClick:()=>g(!0),className:"btn btn-outline flex items-center space-x-2",children:[a.jsx(Ta,{className:"w-4 h-4"}),a.jsx("span",{children:e("adminMedia","selectFromMedia")})]})]}),P&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:P,alt:e("adminLabels","preview"),className:"w-32 h-32 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>C(null),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:a.jsx(Fe,{className:"w-3 h-3"})})]})]})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminProductsPage","discountSettings")}),a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("input",{type:"checkbox",...R("hasDiscount"),className:"rounded"}),a.jsx("label",{className:"text-sm text-gray-700 dark:text-gray-300",children:e("adminProductsPage","enableDiscount")})]}),z("hasDiscount")&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminProductsPage","originalPrice")," *"]}),a.jsx("input",{type:"number",step:"0.01",min:"0",...R("originalPrice",{min:0}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminProductsPage","discountPercentage")," * (%)"]}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",...R("discountPercentage",{min:0,max:100}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","discountStartDate")}),a.jsx("input",{type:"date",...R("discountStartDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","discountEndDate")}),a.jsx("input",{type:"date",...R("discountEndDate"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","discountReason")}),a.jsx("input",{...R("discountReason"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage","discountReasonPlaceholder")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminProductsPage","discountReasonIs")}),a.jsx("input",{...R("discountReasonIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminProductsPage","discountReasonPlaceholder")})]})]})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{l(!1),x(null),V(),C(null)},className:"btn btn-outline flex-1",children:e("adminProductsPage","cancel")}),a.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:f?e("adminProductsPage","update"):e("adminProductsPage","create")})]})]})]})})]})})]}),c&&a.jsx(MT,{onImportProduct:_,onClose:()=>d(!1)}),u&&a.jsx(FT,{isOpen:u,onClose:()=>h(!1),onSelectImage:ae,productName:(f==null?void 0:f.name)||"",category:(f==null?void 0:f.category)||"",initialQuery:(f==null?void 0:f.name)||""}),a.jsx(Fk,{isOpen:m,onClose:()=>g(!1),onSelect:U,collection:"PRODUCTS",multiple:!1})]})},zT=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(v=>v.auth),{categories:s,isLoading:n}=ne(v=>v.categories),[i,o]=j.useState(!1),[l,c]=j.useState(null),{register:d,handleSubmit:u,formState:{errors:h},reset:m,setValue:g}=ui({defaultValues:{name:"",nameIs:"",slug:"",description:"",descriptionIs:"",icon:"",sortOrder:0,isActive:!0}});j.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(sn({includeInactive:!0}))},[t,r]),j.useEffect(()=>{l?(g("name",l.name),g("nameIs",l.nameIs||""),g("slug",l.slug||""),g("description",l.description||""),g("descriptionIs",l.descriptionIs||""),g("icon",l.icon||""),g("sortOrder",l.sortOrder||0),g("isActive",l.isActive)):m()},[l,g,m]);const f=async v=>{try{const w={...v,sortOrder:parseInt(v.sortOrder)};l?(await t(Yc({id:l.id,...w})).unwrap(),D.success(e("common","success"))):(await t(Gc(w)).unwrap(),D.success(e("common","success"))),o(!1),c(null),m()}catch(w){D.error(w.message||e("common","error"))}},x=v=>{c(v),o(!0)},p=async v=>{if(window.confirm(e("adminCategories","confirmDelete")))try{await t(Qc(v)).unwrap(),D.success(e("common","success"))}catch(w){D.error(w||e("common","error"))}},b=()=>{D.info("Subcategory editing will be implemented in a future update")},y=async()=>{D.info("Subcategory deletion will be implemented in a future update")};return(r==null?void 0:r.role)!=="ADMIN"?a.jsxs(oe,{children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminPage","accessDenied")})})}),a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-8",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:e("adminPage","accessDenied")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage","noPermission")})]})})})]}):n&&s.length===0?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsxs(oe,{children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminCategories","title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminCategories","manageCategories")})]}),a.jsxs("button",{onClick:()=>{c(null),o(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200 mt-4 sm:mt-0",children:[a.jsx(Ft,{className:"w-4 h-4 mr-2"}),e("adminCategories","newCategory")]})]})})}),a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[s.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Wc,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminCategories","noCategories")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminCategories","createFirstCategory")})]}):a.jsx("div",{className:"space-y-6",children:s.map(v=>{var w,k,P,C;return a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center flex-shrink-0",children:v.icon?a.jsx("span",{className:"text-2xl text-white",children:v.icon}):a.jsx(Wc,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:v.nameIs||v.name}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:v.slug}),!v.isActive&&a.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20 px-2 py-1 rounded",children:e("adminCategories","inactive")})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:v.descriptionIs||v.description||e("adminCategories","noDescription")}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("adminCategories","productCount"),": ",((w=v._count)==null?void 0:w.products)||0]}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("adminCategories","subcategories"),": ",((k=v.subcategories)==null?void 0:k.length)||0]}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("adminCategories","sortOrder"),": ",v.sortOrder]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsxs("button",{onClick:()=>x(v),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[a.jsx(ws,{className:"w-3 h-3"}),a.jsx("span",{children:e("common","edit")})]}),a.jsx("button",{onClick:()=>p(v.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((P=v._count)==null?void 0:P.products)>0,title:((C=v._count)==null?void 0:C.products)>0?e("adminCategories","cannotDeleteWithProducts"):"",children:a.jsx($t,{className:"w-3 h-3"})})]})]})}),v.subcategories&&v.subcategories.length>0&&a.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50",children:[a.jsx("div",{className:"px-6 py-3 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminCategories","subcategories")})}),a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:v.subcategories.map(N=>{var S,R,F;return a.jsx("div",{className:"px-6 py-4 pl-16",children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center flex-shrink-0",children:N.icon?a.jsx("span",{className:"text-lg text-white",children:N.icon}):a.jsx(Wc,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:N.nameIs||N.name}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:N.slug}),!N.isActive&&a.jsx("span",{className:"text-xs text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20 px-2 py-1 rounded",children:e("adminCategories","inactive")})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:N.descriptionIs||N.description||e("adminCategories","noDescription")}),a.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("adminCategories","productCount"),": ",((S=N._count)==null?void 0:S.products)||0]}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("adminCategories","sortOrder"),": ",N.sortOrder]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsxs("button",{onClick:()=>b(),className:"btn btn-outline btn-sm flex items-center space-x-1",children:[a.jsx(ws,{className:"w-3 h-3"}),a.jsx("span",{children:e("common","edit")})]}),a.jsx("button",{onClick:()=>y(N.id),className:"btn btn-outline btn-sm text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900",disabled:((R=N._count)==null?void 0:R.products)>0,title:((F=N._count)==null?void 0:F.products)>0?e("adminCategories","cannotDeleteWithProducts"):"",children:a.jsx($t,{className:"w-3 h-3"})})]})]})},N.id)})})]})]},v.id)})}),i&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:l?e("adminCategories","editCategory"):e("adminCategories","newCategory")}),a.jsx("button",{onClick:()=>{o(!1),c(null),m()},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(Fe,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:u(f),className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminCategories","nameEn")," *"]}),a.jsx("input",{type:"text",...d("name",{required:e("adminCategories","nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminPlaceholders","enterSlug")}),h.name&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.name.message})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminCategories","nameIs")," *"]}),a.jsx("input",{type:"text",...d("nameIs",{required:e("adminCategories","nameRequired")}),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminPlaceholders","enterSlugIs")}),h.nameIs&&a.jsx("p",{className:"text-red-600 text-sm mt-1",children:h.nameIs.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminCategories","slug")}),a.jsx("input",{type:"text",...d("slug"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminPlaceholders","enterSlugEn")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminCategories","slugHelp")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminCategories","descEn")}),a.jsx("textarea",{...d("description"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"2",placeholder:e("adminPlaceholders","enterDescriptionEn")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminCategories","descIs")}),a.jsx("textarea",{...d("descriptionIs"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:"2",placeholder:e("adminPlaceholders","enterDescriptionIs")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminCategories","icon")}),a.jsx("input",{type:"text",...d("icon"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminPlaceholders","enterIcon")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminCategories","iconHelp")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminCategories","sortOrder")}),a.jsx("input",{type:"number",...d("sortOrder"),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:e("adminPlaceholders","enterSortOrder")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminCategories","sortOrderHelp")})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",...d("isActive"),className:"rounded"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminCategories","active")})]})}),a.jsxs("div",{className:"flex items-center space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{o(!1),c(null),m()},className:"btn btn-outline flex-1",children:e("common","cancel")}),a.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:l?e("common","save"):e("common","add")})]})]})]})})]})]})},Co=se("receiptSettings/fetchReceiptSettings",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/receipt-settings")).data.settings}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch receipt settings")}}),od=se("receiptSettings/updateReceiptSettings",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.put("/receipt-settings",e)).data.settings}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to update receipt settings")}}),ld=se("receiptSettings/uploadReceiptLogo",async(e,{rejectWithValue:t})=>{var r,s;try{const n=new FormData;return n.append("logo",e),(await Z.post("/receipt-settings/logo",n,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to upload logo")}}),cd=se("receiptSettings/deleteReceiptLogo",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.delete("/receipt-settings/logo")).data.settings}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to delete logo")}}),BT={settings:null,isLoading:!1,error:null,uploadProgress:0},$k=rr({name:"receiptSettings",initialState:BT,reducers:{clearError:e=>{e.error=null},setUploadProgress:(e,t)=>{e.uploadProgress=t.payload},updateSettingsField:(e,t)=>{const{field:r,value:s}=t.payload;e.settings&&(e.settings[r]=s)}},extraReducers:e=>{e.addCase(Co.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Co.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(Co.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(od.pending,t=>{t.isLoading=!0,t.error=null}).addCase(od.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(od.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(ld.pending,t=>{t.uploadProgress=0,t.error=null}).addCase(ld.fulfilled,(t,r)=>{t.uploadProgress=100,t.settings=r.payload.settings,t.error=null}).addCase(ld.rejected,(t,r)=>{t.uploadProgress=0,t.error=r.payload}).addCase(cd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(cd.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(cd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{updateSettingsField:UT}=$k.actions,VT=$k.reducer;var vh={},zk={L:1,M:0,Q:3,H:2},Bk={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},HT=Bk;function Uk(e){this.mode=HT.MODE_8BIT_BYTE,this.data=e}Uk.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var WT=Uk,tc=zk;function ns(e,t){this.totalCount=e,this.dataCount=t}ns.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];ns.getRSBlocks=function(e,t){var r=ns.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var s=r.length/3,n=new Array,i=0;i<s;i++)for(var o=r[i*3+0],l=r[i*3+1],c=r[i*3+2],d=0;d<o;d++)n.push(new ns(l,c));return n};ns.getRsBlockTable=function(e,t){switch(t){case tc.L:return ns.RS_BLOCK_TABLE[(e-1)*4+0];case tc.M:return ns.RS_BLOCK_TABLE[(e-1)*4+1];case tc.Q:return ns.RS_BLOCK_TABLE[(e-1)*4+2];case tc.H:return ns.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var qT=ns;function Vk(){this.buffer=new Array,this.length=0}Vk.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var KT=Vk,Vr={glog:function(e){if(e<1)throw new Error("glog("+e+")");return Vr.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return Vr.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var bt=0;bt<8;bt++)Vr.EXP_TABLE[bt]=1<<bt;for(var bt=8;bt<256;bt++)Vr.EXP_TABLE[bt]=Vr.EXP_TABLE[bt-4]^Vr.EXP_TABLE[bt-5]^Vr.EXP_TABLE[bt-6]^Vr.EXP_TABLE[bt-8];for(var bt=0;bt<255;bt++)Vr.LOG_TABLE[Vr.EXP_TABLE[bt]]=bt;var Hk=Vr,Fa=Hk;function dd(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var s=0;s<e.length-r;s++)this.num[s]=e[s+r]}dd.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var s=0;s<e.getLength();s++)t[r+s]^=Fa.gexp(Fa.glog(this.get(r))+Fa.glog(e.get(s)));return new dd(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Fa.glog(this.get(0))-Fa.glog(e.get(0)),r=new Array(this.getLength()),s=0;s<this.getLength();s++)r[s]=this.get(s);for(var s=0;s<e.getLength();s++)r[s]^=Fa.gexp(Fa.glog(e.get(s))+t);return new dd(r,0).mod(e)}};var Wk=dd,yr=Bk,Yy=Wk,GT=Hk,Xs={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},xt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;xt.getBCHDigit(t)-xt.getBCHDigit(xt.G15)>=0;)t^=xt.G15<<xt.getBCHDigit(t)-xt.getBCHDigit(xt.G15);return(e<<10|t)^xt.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;xt.getBCHDigit(t)-xt.getBCHDigit(xt.G18)>=0;)t^=xt.G18<<xt.getBCHDigit(t)-xt.getBCHDigit(xt.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return xt.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case Xs.PATTERN000:return(t+r)%2==0;case Xs.PATTERN001:return t%2==0;case Xs.PATTERN010:return r%3==0;case Xs.PATTERN011:return(t+r)%3==0;case Xs.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case Xs.PATTERN101:return t*r%2+t*r%3==0;case Xs.PATTERN110:return(t*r%2+t*r%3)%2==0;case Xs.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Yy([1],0),r=0;r<e;r++)t=t.multiply(new Yy([1,GT.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case yr.MODE_NUMBER:return 10;case yr.MODE_ALPHA_NUM:return 9;case yr.MODE_8BIT_BYTE:return 8;case yr.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case yr.MODE_NUMBER:return 12;case yr.MODE_ALPHA_NUM:return 11;case yr.MODE_8BIT_BYTE:return 16;case yr.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case yr.MODE_NUMBER:return 14;case yr.MODE_ALPHA_NUM:return 13;case yr.MODE_8BIT_BYTE:return 16;case yr.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,s=0;s<t;s++)for(var n=0;n<t;n++){for(var i=0,o=e.isDark(s,n),l=-1;l<=1;l++)if(!(s+l<0||t<=s+l))for(var c=-1;c<=1;c++)n+c<0||t<=n+c||l==0&&c==0||o==e.isDark(s+l,n+c)&&i++;i>5&&(r+=3+i-5)}for(var s=0;s<t-1;s++)for(var n=0;n<t-1;n++){var d=0;e.isDark(s,n)&&d++,e.isDark(s+1,n)&&d++,e.isDark(s,n+1)&&d++,e.isDark(s+1,n+1)&&d++,(d==0||d==4)&&(r+=3)}for(var s=0;s<t;s++)for(var n=0;n<t-6;n++)e.isDark(s,n)&&!e.isDark(s,n+1)&&e.isDark(s,n+2)&&e.isDark(s,n+3)&&e.isDark(s,n+4)&&!e.isDark(s,n+5)&&e.isDark(s,n+6)&&(r+=40);for(var n=0;n<t;n++)for(var s=0;s<t-6;s++)e.isDark(s,n)&&!e.isDark(s+1,n)&&e.isDark(s+2,n)&&e.isDark(s+3,n)&&e.isDark(s+4,n)&&!e.isDark(s+5,n)&&e.isDark(s+6,n)&&(r+=40);for(var u=0,n=0;n<t;n++)for(var s=0;s<t;s++)e.isDark(s,n)&&u++;var h=Math.abs(100*u/t/t-50)/5;return r+=h*10,r}},YT=xt,QT=WT,qk=qT,Kk=KT,Da=YT,XT=Wk;function ls(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var pr=ls.prototype;pr.addData=function(e){var t=new QT(e);this.dataList.push(t),this.dataCache=null};pr.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};pr.getModuleCount=function(){return this.moduleCount};pr.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=qk.getRSBlocks(e,this.errorCorrectLevel),r=new Kk,s=0,n=0;n<t.length;n++)s+=t[n].dataCount;for(var n=0;n<this.dataList.length;n++){var i=this.dataList[n];r.put(i.mode,4),r.put(i.getLength(),Da.getLengthInBits(i.mode,e)),i.write(r)}if(r.getLengthInBits()<=s*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};pr.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++)this.modules[r][s]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=ls.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};pr.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var s=-1;s<=7;s++)t+s<=-1||this.moduleCount<=t+s||(0<=r&&r<=6&&(s==0||s==6)||0<=s&&s<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=s&&s<=4?this.modules[e+r][t+s]=!0:this.modules[e+r][t+s]=!1)};pr.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var s=Da.getLostPoint(this);(r==0||e>s)&&(e=s,t=r)}return t};pr.createMovieClip=function(e,t,r){var s=e.createEmptyMovieClip(t,r),n=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*n,l=0;l<this.modules[i].length;l++){var c=l*n,d=this.modules[i][l];d&&(s.beginFill(0,100),s.moveTo(c,o),s.lineTo(c+n,o),s.lineTo(c+n,o+n),s.lineTo(c,o+n),s.endFill())}return s};pr.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};pr.setupPositionAdjustPattern=function(){for(var e=Da.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var s=e[t],n=e[r];if(this.modules[s][n]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[s+i][n+o]=!0:this.modules[s+i][n+o]=!1}};pr.setupTypeNumber=function(e){for(var t=Da.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=s}for(var r=0;r<18;r++){var s=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=s}};pr.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,s=Da.getBCHTypeInfo(r),n=0;n<15;n++){var i=!e&&(s>>n&1)==1;n<6?this.modules[n][8]=i:n<8?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(var n=0;n<15;n++){var i=!e&&(s>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=i:n<9?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!e};pr.mapData=function(e,t){for(var r=-1,s=this.moduleCount-1,n=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var l=0;l<2;l++)if(this.modules[s][o-l]==null){var c=!1;i<e.length&&(c=(e[i]>>>n&1)==1);var d=Da.getMask(t,s,o-l);d&&(c=!c),this.modules[s][o-l]=c,n--,n==-1&&(i++,n=7)}if(s+=r,s<0||this.moduleCount<=s){s-=r,r=-r;break}}};ls.PAD0=236;ls.PAD1=17;ls.createData=function(e,t,r){for(var s=qk.getRSBlocks(e,t),n=new Kk,i=0;i<r.length;i++){var o=r[i];n.put(o.mode,4),n.put(o.getLength(),Da.getLengthInBits(o.mode,e)),o.write(n)}for(var l=0,i=0;i<s.length;i++)l+=s[i].dataCount;if(n.getLengthInBits()>l*8)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+l*8+")");for(n.getLengthInBits()+4<=l*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=l*8||(n.put(ls.PAD0,8),n.getLengthInBits()>=l*8));)n.put(ls.PAD1,8);return ls.createBytes(n,s)};ls.createBytes=function(e,t){for(var r=0,s=0,n=0,i=new Array(t.length),o=new Array(t.length),l=0;l<t.length;l++){var c=t[l].dataCount,d=t[l].totalCount-c;s=Math.max(s,c),n=Math.max(n,d),i[l]=new Array(c);for(var u=0;u<i[l].length;u++)i[l][u]=255&e.buffer[u+r];r+=c;var h=Da.getErrorCorrectPolynomial(d),m=new XT(i[l],h.getLength()-1),g=m.mod(h);o[l]=new Array(h.getLength()-1);for(var u=0;u<o[l].length;u++){var f=u+g.getLength()-o[l].length;o[l][u]=f>=0?g.get(f):0}}for(var x=0,u=0;u<t.length;u++)x+=t[u].totalCount;for(var p=new Array(x),b=0,u=0;u<s;u++)for(var l=0;l<t.length;l++)u<i[l].length&&(p[b++]=i[l][u]);for(var u=0;u<n;u++)for(var l=0;l<t.length;l++)u<o[l].length&&(p[b++]=o[l][u]);return p};var JT=ls,dp={};Object.defineProperty(dp,"__esModule",{value:!0});var ZT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},e7=sp,br=Yk(e7),Gk=j,rc=Yk(Gk);function Yk(e){return e&&e.__esModule?e:{default:e}}function t7(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var r7={bgColor:br.default.oneOfType([br.default.object,br.default.string]).isRequired,bgD:br.default.string.isRequired,fgColor:br.default.oneOfType([br.default.object,br.default.string]).isRequired,fgD:br.default.string.isRequired,size:br.default.number.isRequired,title:br.default.string,viewBoxSize:br.default.number.isRequired,xmlns:br.default.string},up=(0,Gk.forwardRef)(function(e,t){var r=e.bgColor,s=e.bgD,n=e.fgD,i=e.fgColor,o=e.size,l=e.title,c=e.viewBoxSize,d=e.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,h=t7(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return rc.default.createElement("svg",ZT({},h,{height:o,ref:t,viewBox:"0 0 "+c+" "+c,width:o,xmlns:u}),l?rc.default.createElement("title",null,l):null,rc.default.createElement("path",{d:s,fill:r}),rc.default.createElement("path",{d:n,fill:i}))});up.displayName="QRCodeSvg";up.propTypes=r7;dp.default=up;Object.defineProperty(vh,"__esModule",{value:!0});vh.QRCode=void 0;var s7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},a7=sp,_s=Sl(a7),n7=zk,i7=Sl(n7),o7=JT,l7=Sl(o7),Qk=j,c7=Sl(Qk),d7=dp,u7=Sl(d7);function Sl(e){return e&&e.__esModule?e:{default:e}}function h7(e,t){var r={};for(var s in e)t.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s]);return r}var m7={bgColor:_s.default.oneOfType([_s.default.object,_s.default.string]),fgColor:_s.default.oneOfType([_s.default.object,_s.default.string]),level:_s.default.string,size:_s.default.number,value:_s.default.string.isRequired},wh=(0,Qk.forwardRef)(function(e,t){var r=e.bgColor,s=r===void 0?"#FFFFFF":r,n=e.fgColor,i=n===void 0?"#000000":n,o=e.level,l=o===void 0?"L":o,c=e.size,d=c===void 0?256:c,u=e.value,h=h7(e,["bgColor","fgColor","level","size","value"]),m=new l7.default(-1,i7.default[l]);m.addData(u),m.make();var g=m.modules;return c7.default.createElement(u7.default,s7({},h,{bgColor:s,bgD:g.map(function(f,x){return f.map(function(p,b){return p?"":"M "+b+" "+x+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:g.map(function(f,x){return f.map(function(p,b){return p?"M "+b+" "+x+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:g.length}))});vh.QRCode=wh;wh.displayName="QRCode";wh.propTypes=m7;var f7=vh.default=wh;const g7=({order:e,settings:t,template:r="modern",paperSize:s="80mm",showBarcode:n=!0,showQrCode:i=!0,className:o=""})=>{var x;const{i18n:l}=de(),c=l.language==="is";if(!e||!t)return a.jsx("div",{className:"p-4 text-center text-gray-500",children:"Loading receipt..."});const d=p=>new Intl.NumberFormat(c?"is-IS":"en-US",{style:"currency",currency:"ISK"}).format(p),u=p=>new Intl.DateTimeFormat(c?"is-IS":"en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(p)),h=()=>c?t.companyNameIs:t.companyName,m=()=>c?t.companyAddressIs:t.companyAddress,g=()=>c?t.footerTextIs:t.footerText,f=()=>c?t.fromNameIs:t.fromName;return a.jsxs("div",{className:`receipt receipt-${r} receipt-${s} ${o}`,children:[a.jsxs("div",{className:"header",style:{backgroundColor:t.headerColor,color:"white"},children:[t.logoUrl&&a.jsx("div",{className:"mb-2",children:a.jsx("img",{src:t.logoUrl,alt:h(),className:"h-12 mx-auto",style:{maxHeight:"48px"}})}),a.jsx("div",{className:"company-name",style:{color:"white"},children:h()}),m()&&a.jsx("div",{className:"company-details",children:m()}),t.companyPhone&&a.jsx("div",{className:"company-details",children:t.companyPhone}),t.companyEmail&&a.jsx("div",{className:"company-details",children:t.companyEmail}),t.companyWebsite&&a.jsx("div",{className:"company-details",children:t.companyWebsite}),t.taxId&&a.jsxs("div",{className:"company-details",children:[c?"VSK nr.":"VAT ID",": ",t.taxId]})]}),a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"order-info",children:[a.jsxs("div",{className:"order-number",children:[c?"Pöntun":"Order",": #",e.orderNumber]}),a.jsxs("div",{className:"order-details",children:[c?"Dagsetning":"Date",": ",u(e.createdAt)]}),e.customer&&a.jsxs("div",{className:"order-details",children:[c?"Viðskiptavinur":"Customer",": ",e.customer.name]}),e.deliveryAddress&&a.jsxs("div",{className:"order-details",children:[c?"Afhending":"Delivery",": ",e.deliveryAddress.address]}),e.paymentMethod&&a.jsxs("div",{className:"order-details",children:[c?"Greiðsla":"Payment",": ",e.paymentMethod]})]}),a.jsx("div",{className:"items",children:(x=e.orderItems)==null?void 0:x.map((p,b)=>{var y,v;return a.jsxs("div",{className:"item",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"item-name",children:(y=p.product)==null?void 0:y.name}),p.quantity>1&&a.jsxs("div",{className:"item-details",children:[p.quantity," x ",d(((v=p.product)==null?void 0:v.price)||0)]}),p.notes&&a.jsxs("div",{className:"item-details",children:[c?"Athugasemd":"Note",": ",p.notes]})]}),a.jsx("div",{className:"item-price",children:d(p.totalPrice||0)})]},b)})}),a.jsxs("div",{className:"totals",children:[a.jsxs("div",{className:"total-line",children:[a.jsxs("span",{children:[c?"Undanþeginn VSK":"Subtotal",":"]}),a.jsx("span",{children:d(e.subtotal||0)})]}),e.shippingCost>0&&a.jsxs("div",{className:"total-line",children:[a.jsxs("span",{children:[c?"Sendingarkostnaður":"Shipping",":"]}),a.jsx("span",{children:d(e.shippingCost)})]}),e.taxAmount>0&&a.jsxs("div",{className:"total-line",children:[a.jsxs("span",{children:[c?"VSK":"VAT",":"]}),a.jsx("span",{children:d(e.taxAmount)})]}),a.jsxs("div",{className:"total-line final",children:[a.jsxs("span",{children:[c?"Samtals":"Total",":"]}),a.jsx("span",{children:d(e.totalAmount||0)})]})]}),(n||i)&&a.jsxs("div",{className:"codes",children:[i&&a.jsxs("div",{className:"qr-code",children:[a.jsx("div",{className:"text-xs mb-1",children:c?"QR kóði":"QR Code"}),a.jsx("div",{className:"w-20 h-20 mx-auto flex items-center justify-center",children:a.jsx(f7,{value:`${window.location.origin}/orders/${e.id}`,size:80,style:{height:"auto",maxWidth:"100%",width:"100%"}})})]}),n&&a.jsxs("div",{className:"barcode",children:[a.jsx("div",{className:"text-xs mb-1",children:c?"Strikamerki":"Barcode"}),a.jsx("div",{className:"h-8 bg-gray-200 mx-auto flex items-center justify-center text-xs",children:"||||||||||||||||||||"})]})]}),a.jsxs("div",{className:"footer",children:[g()&&a.jsx("div",{className:"footer-text",children:g()}),a.jsxs("div",{className:"company-info",children:[f()," - ",m()]}),a.jsxs("div",{className:"company-info",children:[t.companyPhone," - ",t.companyEmail]})]})]})]})},p7=({isOpen:e,onClose:t,order:r,onEmailSent:s})=>{var w;const{t:n}=de(),i=Ue(),[o,l]=j.useState(!1),[c,d]=j.useState(!1),[u,h]=j.useState(null),[m,g]=j.useState("screen"),{receiptSettings:f,loading:x}=ne(k=>k.receiptSettings),{user:p}=ne(k=>k.auth);j.useEffect(()=>{e&&!f&&i(Co())},[e,f,i]);const b=()=>{g("print"),setTimeout(()=>{window.print(),g("screen")},100)},y=async()=>{if(r!=null&&r.id){l(!0);try{const k=await fetch(`/api/orders/${r.id}/receipt/pdf`,{headers:{Authorization:`Bearer ${p==null?void 0:p.token}`}});if(k.ok){const P=await k.blob(),C=window.URL.createObjectURL(P),N=document.createElement("a");N.href=C,N.download=`receipt-${r.orderNumber}.pdf`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(C),document.body.removeChild(N)}else throw new Error("Failed to generate PDF")}catch(k){console.error("Error downloading PDF:",k),alert(n("receipts","pdfDownloadError"))}finally{l(!1)}}},v=async()=>{var k;if(!(r!=null&&r.id)||!((k=r==null?void 0:r.customer)!=null&&k.email)){alert(n("receipts","noEmailAddress"));return}l(!0),h(null);try{const P=await i(Hc({orderId:r.id,email:r.customer.email})).unwrap();d(!0),s&&s(P)}catch(P){console.error("Error sending email:",P),h(P.message||n("receipts","emailSendError"))}finally{l(!1)}};return!e||!r?null:a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),a.jsxs("div",{className:"inline-block w-full max-w-4xl px-4 pt-5 pb-4 overflow-hidden text-left align-bottom transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:align-middle sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[n("receipts","receiptForOrder")," #",r.orderNumber]}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Fe,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsxs("button",{onClick:b,className:"btn btn-outline flex items-center gap-2",children:[a.jsx(tp,{className:"w-4 h-4"}),n("receipts","print")]}),a.jsxs("button",{onClick:y,disabled:o,className:"btn btn-outline flex items-center gap-2",children:[a.jsx(bs,{className:"w-4 h-4"}),o?n("common","loading"):n("receipts","downloadPdf")]}),((w=r.customer)==null?void 0:w.email)&&a.jsxs("button",{onClick:v,disabled:o||c,className:`btn flex items-center gap-2 ${c?"btn-secondary":"btn-primary"}`,children:[a.jsx(ms,{className:"w-4 h-4"}),o?n("common","sending"):c?n("receipts","emailSent"):n("receipts","emailReceipt")]})]}),u&&a.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),c&&a.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:n("receipts","emailSentSuccess")}),a.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:x?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:n("common","loading")})}):f?a.jsx("div",{className:"max-w-md mx-auto",children:a.jsx(g7,{order:r,settings:f,template:f.template,paperSize:f.paperSize,showBarcode:f.showBarcode,showQrCode:f.showQrCode,className:m==="print"?"receipt-print":""})}):a.jsx("div",{className:"text-center text-gray-500",children:n("receipts","settingsNotFound")})}),a.jsx("div",{className:"mt-4 flex justify-end gap-2",children:a.jsx("button",{onClick:t,className:"btn btn-secondary",children:n("common","close")})})]})]})})},x7=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(z=>z.auth),{orders:s,isLoading:n}=ne(z=>z.orders),[i,o]=j.useState(""),[l,c]=j.useState(""),[d,u]=j.useState(""),[h,m]=j.useState(null),[g,f]=j.useState(!1),[x,p]=j.useState(!1),[b,y]=j.useState(!1),[v,w]=j.useState(""),[k,P]=j.useState("");j.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(uo({limit:100}))},[t,r]);const C=z=>{switch(z){case"PENDING":return a.jsx(ks,{className:"w-5 h-5 text-yellow-600"});case"CONFIRMED":return a.jsx(we,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return a.jsx(we,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return a.jsx(lr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return a.jsx(gt,{className:"w-5 h-5 text-green-600"});case"CANCELLED":return a.jsx(ph,{className:"w-5 h-5 text-red-600"});default:return a.jsx(we,{className:"w-5 h-5 text-gray-600"})}},N=z=>e("orders","statuses")[z],S=z=>{switch(z){case"PENDING":return"bg-yellow-100 text-yellow-800";case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},R=s.filter(z=>{var O,q;const M=z.orderNumber.toLowerCase().includes(i.toLowerCase())||((O=z.user)==null?void 0:O.fullName)&&z.user.fullName.toLowerCase().includes(i.toLowerCase())||((q=z.user)==null?void 0:q.username)&&z.user.username.toLowerCase().includes(i.toLowerCase()),_=!l||z.status===l,E=!d||z.deliveryMethod===d;return M&&_&&E}),F=async()=>{try{await t(co({orderId:h.id,status:v})).unwrap(),D.success(e("adminPage","statusUpdated")),f(!1),m(null),w("")}catch(z){D.error(z.message||e("adminPage","errorOccurred"))}},I=async()=>{try{await t(Vc({id:h.id,deliveryPersonId:k})).unwrap(),D.success(e("adminPage","deliveryAssigned")),p(!1),m(null),P("")}catch(z){D.error(z.message||e("adminPage","errorOccurred"))}},V=[{value:"PENDING",label:e("orders.statuses","PENDING")},{value:"CONFIRMED",label:e("orders.statuses","CONFIRMED")},{value:"PREPARING",label:e("orders.statuses","PREPARING")},{value:"OUT_FOR_DELIVERY",label:e("orders.statuses","OUT_FOR_DELIVERY")},{value:"DELIVERED",label:e("orders.statuses","DELIVERED")},{value:"CANCELLED",label:e("orders.statuses","CANCELLED")}],G=[{id:1,name:"Jón Jónsson",phone:"+354 123 4567"},{id:2,name:"Anna Sigurðardóttir",phone:"+354 765 4321"},{id:3,name:"Magnús Magnússon",phone:"+354 987 6543"}];return(r==null?void 0:r.role)!=="ADMIN"?a.jsxs(oe,{children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage","accessDenied")})})}),a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage","accessDenied")}),a.jsx("p",{className:"text-gray-600",children:e("adminPage","noPermission")})]})})})]}):n?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminPage","orderManagement")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminPage","manageOrders")})]})})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:e("adminPage","searchOrders"),value:i,onChange:z=>o(z.target.value),className:"input pl-10 w-full"})]}),a.jsxs("select",{value:l,onChange:z=>c(z.target.value),className:"input w-full",children:[a.jsx("option",{value:"",children:e("adminPage","allStatuses")}),V.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value))]}),a.jsxs("select",{value:d,onChange:z=>u(z.target.value),className:"input w-full",children:[a.jsx("option",{value:"",children:e("adminPage","allDeliveryMethods")}),a.jsx("option",{value:"DELIVERY",children:e("adminPage","homeDelivery")}),a.jsx("option",{value:"PICKUP",children:e("adminPage","storePickup")})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(Qn,{className:"w-4 h-4 mr-2"}),R.length," ",e("adminPage","results")]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage","order")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage","customer")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage","status")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage","delivery")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage","amount")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage","date")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminPage","actions")})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:R.map(z=>{var M,_,E;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(we,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["#",z.orderNumber]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[z.items.length," ",e("cart","items")]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((M=z.user)==null?void 0:M.fullName)||((_=z.user)==null?void 0:_.username)||e("common","unknown")}),((E=z.user)==null?void 0:E.email)&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:z.user.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 w-fit ${S(z.status)}`,children:[C(z.status),a.jsx("span",{children:N(z.status)})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"w-4 h-4 text-gray-400 dark:text-gray-500 mr-2"}),a.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:z.deliveryMethod==="PICKUP"?e("ordersPage","pickup"):e("ordersPage","homeDelivery")})]}),z.deliveryPerson&&a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e("adminPage","deliveryPerson"),": ",z.deliveryPerson.fullName]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[z.totalAmount.toLocaleString()," ",e("common","currency")]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(z.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{onClick:()=>{m(z),y(!0)},className:"text-purple-600 dark:text-purple-400 hover:text-purple-900 dark:hover:text-purple-300 transition-colors duration-200 flex items-center space-x-1",title:e("receipts","viewReceipt"),children:[a.jsx(ik,{className:"w-4 h-4"}),a.jsx("span",{children:e("receipts","receipt")})]}),a.jsx("button",{onClick:()=>{m(z),f(!0),w(z.status)},className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors duration-200",children:e("adminPage","update")}),z.deliveryMethod==="DELIVERY"&&!z.deliveryPerson&&z.status==="CONFIRMED"&&a.jsx("button",{onClick:()=>{m(z),p(!0)},className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 transition-colors duration-200",children:e("adminPage","assign")})]})})]},z.id)})})]})})}),R.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(we,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminPage","noOrdersFound")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminPage","adjustSearchCriteria")})]}),g&&h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage","updateOrder")," #",h.orderNumber]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage","newStatus")}),a.jsx("select",{value:v,onChange:z=>w(z.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:V.map(z=>a.jsx("option",{value:z.value,children:z.label},z.value))})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{f(!1),m(null),w("")},className:"btn btn-outline flex-1",children:e("common","cancel")}),a.jsx("button",{onClick:F,className:"btn btn-primary flex-1",children:e("adminPage","update")})]})]})}),x&&h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminPage","assignDeliveryPerson")," #",h.orderNumber]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminPage","deliveryPerson")}),a.jsxs("select",{value:k,onChange:z=>P(z.target.value),className:"input w-full dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[a.jsx("option",{value:"",children:e("adminPage","selectDeliveryPerson")}),G.map(z=>a.jsxs("option",{value:z.id,children:[z.name," (",z.phone,")"]},z.id))]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{p(!1),m(null),P("")},className:"btn btn-outline flex-1",children:e("common","cancel")}),a.jsx("button",{onClick:I,disabled:!k,className:"btn btn-primary flex-1",children:e("adminPage","assign")})]})]})}),a.jsx(p7,{isOpen:b,onClose:()=>y(!1),order:h,onEmailSent:()=>{D.success(e("receipts","emailSentSuccess"))}})]})})]})})},y7=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(K=>K.auth),{products:s,categories:n}=ne(K=>K.products),[i,o]=j.useState([]),[l,c]=j.useState(null),[d,u]=j.useState({name:"",email:"",phone:""}),[h,m]=j.useState(""),[g,f]=j.useState(""),[x,p]=j.useState("cash"),[b]=j.useState("COMPLETED"),[y,v]=j.useState(""),[w,k]=j.useState(""),[P,C]=j.useState([]),[N,S]=j.useState(!1),[R,F]=j.useState(!1),[I,V]=j.useState(null);j.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(gs({limit:100})),t(sn()),G())},[t,r]);const G=async()=>{try{const K=await Z.get("/shipping");C(K.data),K.data.length>0&&k(K.data[0].id)}catch(K){console.error("Error fetching shipping options:",K)}},z=s.filter(K=>{const H=K.name.toLowerCase().includes(h.toLowerCase())||K.nameIs.toLowerCase().includes(h.toLowerCase()),te=!g||K.categoryId===parseInt(g);return H&&te&&K.isActive}),M=K=>{const H=i.find(te=>te.productId===K.id);o(H?i.map(te=>te.productId===K.id?{...te,quantity:te.quantity+1}:te):[...i,{productId:K.id,product:K,quantity:1,price:K.price}])},_=(K,H)=>{H<=0?o(i.filter(te=>te.productId!==K)):o(i.map(te=>te.productId===K?{...te,quantity:H}:te))},E=K=>{o(i.filter(H=>H.productId!==K))},O=i.reduce((K,H)=>K+H.price*H.quantity,0),q=P.find(K=>K.id===parseInt(w)),ae=q?q.fee:0,U=O+ae,re=async K=>{if(!(K.length<2))try{return(await Z.get(`/customers?search=${K}&limit=10`)).data.customers||[]}catch(H){return console.error("Error searching customers:",H),[]}},fe=async()=>{var K,H;if(i.length===0){D.error("Cart is empty");return}if(!l&&!d.email){D.error("Please select a customer or enter guest information");return}if(!w){D.error("Please select a shipping option");return}S(!0);try{const te={items:i.map(Ar=>({productId:Ar.productId,quantity:Ar.quantity,price:Ar.price})),shippingOptionId:parseInt(w),paymentMethod:x,paymentStatus:b,notes:y,...l?{customerId:l.id}:{guestInfo:d}},Re=await Z.post("/orders/pos",te);V(Re.data.order),F(!0),o([]),c(null),u({name:"",email:"",phone:""}),v(""),D.success("Order processed successfully!")}catch(te){console.error("Error processing order:",te),D.error(((H=(K=te.response)==null?void 0:K.data)==null?void 0:H.message)||"Failed to process order")}finally{S(!1)}},Ne=()=>{window.print()},A=async K=>{if(I)try{await Z.post(`/orders/${I.id}/receipt/email`,{email:K}),D.success("Receipt sent successfully!")}catch(H){console.error("Error sending receipt:",H),D.error("Failed to send receipt")}},ue=async()=>{if(I)try{const K=await Z.get(`/orders/${I.id}/receipt/pdf`,{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([K.data])),te=document.createElement("a");te.href=H,te.setAttribute("download",`receipt-${I.orderNumber}.pdf`),document.body.appendChild(te),te.click(),te.remove(),window.URL.revokeObjectURL(H)}catch(K){console.error("Error downloading PDF:",K),D.error("Failed to download PDF")}};return(r==null?void 0:r.role)!=="ADMIN"?a.jsx(oe,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:"You don't have permission to access the POS system."})]})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsxs("div",{className:"px-6 py-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("pos.title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("pos.description")})]})}),a.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[a.jsxs("div",{className:"col-span-8",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("pos.customer")}),l?a.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{className:"w-5 h-5 text-blue-600 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:l.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:l.email})]})]}),a.jsx("button",{onClick:()=>c(null),className:"text-red-600 hover:text-red-800",children:a.jsx(Fe,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:e("pos.searchCustomers"),className:"input pl-10 w-full",onChange:async K=>{const H=K.target.value;H.length>=2&&await re(H)}})]}),a.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:e("pos.or")}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("input",{type:"text",placeholder:e("pos.guestName"),value:d.name,onChange:K=>u({...d,name:K.target.value}),className:"input"}),a.jsx("input",{type:"email",placeholder:e("pos.guestEmail"),value:d.email,onChange:K=>u({...d,email:K.target.value}),className:"input"}),a.jsx("input",{type:"tel",placeholder:e("pos.guestPhone"),value:d.phone,onChange:K=>u({...d,phone:K.target.value}),className:"input"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:e("pos.searchProducts"),value:h,onChange:K=>m(K.target.value),className:"input pl-10 w-full"})]}),a.jsxs("select",{value:g,onChange:K=>f(K.target.value),className:"input w-full md:w-48",children:[a.jsx("option",{value:"",children:e("pos.allCategories")}),n.map(K=>a.jsx("option",{value:K.id,children:K.name},K.id))]})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:z.map(K=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>M(K),children:[a.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 rounded-lg mb-3 flex items-center justify-center",children:K.imageUrl?a.jsx("img",{src:K.imageUrl,alt:K.name,className:"w-full h-full object-cover rounded-lg"}):a.jsx(we,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"font-medium text-sm text-gray-900 dark:text-white mb-1 line-clamp-2",children:K.name}),a.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:[K.price.toLocaleString()," ISK"]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e("pos.stock"),": ",K.stock]})]},K.id))})]})]}),a.jsx("div",{className:"col-span-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(_r,{className:"w-5 h-5 mr-2"}),e("pos.cartTitle")," (",i.length," ",e("pos.cartItems"),")"]}),a.jsx("div",{className:"space-y-3 mb-6 max-h-64 overflow-y-auto",children:i.map(K=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white",children:K.product.name}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[K.price.toLocaleString()," ISK each"]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>_(K.productId,K.quantity-1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:a.jsx(eu,{className:"w-4 h-4"})}),a.jsx("span",{className:"w-8 text-center text-sm font-medium",children:K.quantity}),a.jsx("button",{onClick:()=>_(K.productId,K.quantity+1),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-600",children:a.jsx(Ft,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>E(K.productId),className:"p-1 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/20 rounded-full",children:a.jsx(Fe,{className:"w-4 h-4"})})]})]},K.productId))}),a.jsxs("div",{className:"space-y-2 mb-6",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[e("pos.subtotal"),":"]}),a.jsxs("span",{children:[O.toLocaleString()," ISK"]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[e("pos.shipping"),":"]}),a.jsxs("span",{children:[ae.toLocaleString()," ISK"]})]}),a.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-200 dark:border-gray-700 pt-2",children:[a.jsxs("span",{children:[e("pos.total"),":"]}),a.jsxs("span",{children:[U.toLocaleString()," ISK"]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.paymentMethod")}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("button",{onClick:()=>p("cash"),className:`p-2 rounded-lg border text-sm font-medium ${x==="cash"?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:[a.jsx(zE,{className:"w-4 h-4 mx-auto mb-1"}),e("pos.cash")]}),a.jsxs("button",{onClick:()=>p("card"),className:`p-2 rounded-lg border text-sm font-medium ${x==="card"?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:[a.jsx(qs,{className:"w-4 h-4 mx-auto mb-1"}),e("pos.card")]}),a.jsxs("button",{onClick:()=>p("pay_later"),className:`p-2 rounded-lg border text-sm font-medium ${x==="pay_later"?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:[a.jsx(ks,{className:"w-4 h-4 mx-auto mb-1"}),e("pos.payLater")]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.shippingOption")}),a.jsx("select",{value:w,onChange:K=>k(K.target.value),className:"input w-full",children:P.map(K=>a.jsxs("option",{value:K.id,children:[K.name," - ",K.fee.toLocaleString()," ISK"]},K.id))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("pos.notes")}),a.jsx("textarea",{value:y,onChange:K=>v(K.target.value),className:"input w-full h-20 resize-none",placeholder:e("pos.orderNotes")})]}),a.jsx("button",{onClick:fe,disabled:i.length===0||N,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-3 px-4 rounded-lg transition-colors flex items-center justify-center",children:N?a.jsxs(a.Fragment,{children:[a.jsx(Tt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(gt,{className:"w-4 h-4 mr-2"}),e("pos.processOrder")]})})]})})]}),R&&I&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Order Receipt - ",I.orderNumber]}),a.jsx("button",{onClick:()=>F(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(Fe,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Order Date:"}),a.jsx("p",{children:new Date(I.createdAt).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:"Status:"}),a.jsx("p",{className:"capitalize",children:I.status})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium mb-2",children:"Items:"}),a.jsx("div",{className:"space-y-2",children:I.items.map(K=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[K.product.name," x ",K.quantity]}),a.jsxs("span",{children:[(K.price*K.quantity).toLocaleString()," ISK"]})]},K.id))})]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:a.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[a.jsxs("span",{children:[e("pos.total"),":"]}),a.jsxs("span",{children:[I.totalAmount.toLocaleString()," ISK"]})]})})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:Ne,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[a.jsx(tp,{className:"w-4 h-4 mr-2"}),"Print"]}),a.jsxs("button",{onClick:()=>{const K=prompt("Enter email address:");K&&A(K)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[a.jsx(rp,{className:"w-4 h-4 mr-2"}),"Email"]}),a.jsxs("button",{onClick:ue,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center",children:[a.jsx(bs,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]})})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Cl(e){return e+.5|0}const ca=(e,t,r)=>Math.max(Math.min(e,r),t);function Qi(e){return ca(Cl(e*2.55),0,255)}function Sa(e){return ca(Cl(e*255),0,255)}function As(e){return ca(Cl(e/2.55)/100,0,1)}function Qy(e){return ca(Cl(e*100),0,100)}const vr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},jg=[..."0123456789ABCDEF"],b7=e=>jg[e&15],v7=e=>jg[(e&240)>>4]+jg[e&15],sc=e=>(e&240)>>4===(e&15),w7=e=>sc(e.r)&&sc(e.g)&&sc(e.b)&&sc(e.a);function j7(e){var t=e.length,r;return e[0]==="#"&&(t===4||t===5?r={r:255&vr[e[1]]*17,g:255&vr[e[2]]*17,b:255&vr[e[3]]*17,a:t===5?vr[e[4]]*17:255}:(t===7||t===9)&&(r={r:vr[e[1]]<<4|vr[e[2]],g:vr[e[3]]<<4|vr[e[4]],b:vr[e[5]]<<4|vr[e[6]],a:t===9?vr[e[7]]<<4|vr[e[8]]:255})),r}const k7=(e,t)=>e<255?t(e):"";function N7(e){var t=w7(e)?b7:v7;return e?"#"+t(e.r)+t(e.g)+t(e.b)+k7(e.a,t):void 0}const S7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xk(e,t,r){const s=t*Math.min(r,1-r),n=(i,o=(i+e/30)%12)=>r-s*Math.max(Math.min(o-3,9-o,1),-1);return[n(0),n(8),n(4)]}function C7(e,t,r){const s=(n,i=(n+e/60)%6)=>r-r*t*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function _7(e,t,r){const s=Xk(e,1,.5);let n;for(t+r>1&&(n=1/(t+r),t*=n,r*=n),n=0;n<3;n++)s[n]*=1-t-r,s[n]+=t;return s}function E7(e,t,r,s,n){return e===n?(t-r)/s+(t<r?6:0):t===n?(r-e)/s+2:(e-t)/s+4}function hp(e){const r=e.r/255,s=e.g/255,n=e.b/255,i=Math.max(r,s,n),o=Math.min(r,s,n),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=E7(r,s,n,u,i),c=c*60+.5),[c|0,d||0,l]}function mp(e,t,r,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,r,s)).map(Sa)}function fp(e,t,r){return mp(Xk,e,t,r)}function P7(e,t,r){return mp(_7,e,t,r)}function T7(e,t,r){return mp(C7,e,t,r)}function Jk(e){return(e%360+360)%360}function I7(e){const t=S7.exec(e);let r=255,s;if(!t)return;t[5]!==s&&(r=t[6]?Qi(+t[5]):Sa(+t[5]));const n=Jk(+t[2]),i=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=P7(n,i,o):t[1]==="hsv"?s=T7(n,i,o):s=fp(n,i,o),{r:s[0],g:s[1],b:s[2],a:r}}function R7(e,t){var r=hp(e);r[0]=Jk(r[0]+t),r=fp(r),e.r=r[0],e.g=r[1],e.b=r[2]}function A7(e){if(!e)return;const t=hp(e),r=t[0],s=Qy(t[1]),n=Qy(t[2]);return e.a<255?`hsla(${r}, ${s}%, ${n}%, ${As(e.a)})`:`hsl(${r}, ${s}%, ${n}%)`}const Xy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Jy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function O7(){const e={},t=Object.keys(Jy),r=Object.keys(Xy);let s,n,i,o,l;for(s=0;s<t.length;s++){for(o=l=t[s],n=0;n<r.length;n++)i=r[n],l=l.replace(i,Xy[i]);i=parseInt(Jy[o],16),e[l]=[i>>16&255,i>>8&255,i&255]}return e}let ac;function L7(e){ac||(ac=O7(),ac.transparent=[0,0,0,0]);const t=ac[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const M7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function D7(e){const t=M7.exec(e);let r=255,s,n,i;if(t){if(t[7]!==s){const o=+t[7];r=t[8]?Qi(o):ca(o*255,0,255)}return s=+t[1],n=+t[3],i=+t[5],s=255&(t[2]?Qi(s):ca(s,0,255)),n=255&(t[4]?Qi(n):ca(n,0,255)),i=255&(t[6]?Qi(i):ca(i,0,255)),{r:s,g:n,b:i,a:r}}}function F7(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${As(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const _m=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,jn=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function $7(e,t,r){const s=jn(As(e.r)),n=jn(As(e.g)),i=jn(As(e.b));return{r:Sa(_m(s+r*(jn(As(t.r))-s))),g:Sa(_m(n+r*(jn(As(t.g))-n))),b:Sa(_m(i+r*(jn(As(t.b))-i))),a:e.a+r*(t.a-e.a)}}function nc(e,t,r){if(e){let s=hp(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*r,t===0?360:1)),s=fp(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function Zk(e,t){return e&&Object.assign(t||{},e)}function Zy(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Sa(e[3]))):(t=Zk(e,{r:0,g:0,b:0,a:1}),t.a=Sa(t.a)),t}function z7(e){return e.charAt(0)==="r"?D7(e):I7(e)}class il{constructor(t){if(t instanceof il)return t;const r=typeof t;let s;r==="object"?s=Zy(t):r==="string"&&(s=j7(t)||L7(t)||z7(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=Zk(this._rgb);return t&&(t.a=As(t.a)),t}set rgb(t){this._rgb=Zy(t)}rgbString(){return this._valid?F7(this._rgb):void 0}hexString(){return this._valid?N7(this._rgb):void 0}hslString(){return this._valid?A7(this._rgb):void 0}mix(t,r){if(t){const s=this.rgb,n=t.rgb;let i;const o=r===i?.5:r,l=2*o-1,c=s.a-n.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,s.r=255&d*s.r+i*n.r+.5,s.g=255&d*s.g+i*n.g+.5,s.b=255&d*s.b+i*n.b+.5,s.a=o*s.a+(1-o)*n.a,this.rgb=s}return this}interpolate(t,r){return t&&(this._rgb=$7(this._rgb,t._rgb,r)),this}clone(){return new il(this.rgb)}alpha(t){return this._rgb.a=Sa(t),this}clearer(t){const r=this._rgb;return r.a*=1-t,this}greyscale(){const t=this._rgb,r=Cl(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=r,this}opaquer(t){const r=this._rgb;return r.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return nc(this._rgb,2,t),this}darken(t){return nc(this._rgb,2,-t),this}saturate(t){return nc(this._rgb,1,t),this}desaturate(t){return nc(this._rgb,1,-t),this}rotate(t){return R7(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Es(){}const B7=(()=>{let e=0;return()=>e++})();function Ee(e){return e==null}function ct(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Se(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Tr(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Jr(e,t){return Tr(e)?e:t}function ye(e,t){return typeof e>"u"?t:e}const U7=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function ze(e,t,r){if(e&&typeof e.call=="function")return e.apply(r,t)}function Pe(e,t,r,s){let n,i,o;if(ct(e))for(i=e.length,n=0;n<i;n++)t.call(r,e[n],n);else if(Se(e))for(o=Object.keys(e),i=o.length,n=0;n<i;n++)t.call(r,e[o[n]],o[n])}function cu(e,t){let r,s,n,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,s=e.length;r<s;++r)if(n=e[r],i=t[r],n.datasetIndex!==i.datasetIndex||n.index!==i.index)return!1;return!0}function du(e){if(ct(e))return e.map(du);if(Se(e)){const t=Object.create(null),r=Object.keys(e),s=r.length;let n=0;for(;n<s;++n)t[r[n]]=du(e[r[n]]);return t}return e}function eN(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function V7(e,t,r,s){if(!eN(e))return;const n=t[e],i=r[e];Se(n)&&Se(i)?ol(n,i,s):t[e]=du(i)}function ol(e,t,r){const s=ct(t)?t:[t],n=s.length;if(!Se(e))return e;r=r||{};const i=r.merger||V7;let o;for(let l=0;l<n;++l){if(o=s[l],!Se(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],e,o,r)}return e}function _o(e,t){return ol(e,t,{merger:H7})}function H7(e,t,r){if(!eN(e))return;const s=t[e],n=r[e];Se(s)&&Se(n)?_o(s,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=du(n))}const eb={"":e=>e,x:e=>e.x,y:e=>e.y};function W7(e){const t=e.split("."),r=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(r.push(s),s="");return r}function q7(e){const t=W7(e);return r=>{for(const s of t){if(s==="")break;r=r&&r[s]}return r}}function hi(e,t){return(eb[t]||(eb[t]=q7(t)))(e)}function gp(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ll=e=>typeof e<"u",Ia=e=>typeof e=="function",tb=(e,t)=>{if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0};function K7(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Me=Math.PI,jt=2*Me,G7=jt+Me,uu=Number.POSITIVE_INFINITY,Y7=Me/180,vt=Me/2,$a=Me/4,rb=Me*2/3,tN=Math.log10,ps=Math.sign;function Eo(e,t,r){return Math.abs(e-t)<r}function sb(e){const t=Math.round(e);e=Eo(e,t,e/1e3)?t:e;const r=Math.pow(10,Math.floor(tN(e))),s=e/r;return(s<=1?1:s<=2?2:s<=5?5:10)*r}function Q7(e){const t=[],r=Math.sqrt(e);let s;for(s=1;s<r;s++)e%s===0&&(t.push(s),t.push(e/s));return r===(r|0)&&t.push(r),t.sort((n,i)=>n-i).pop(),t}function X7(e){return typeof e=="symbol"||typeof e=="object"&&e!==null&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}function cl(e){return!X7(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function J7(e,t){const r=Math.round(e);return r-t<=e&&r+t>=e}function Z7(e,t,r){let s,n,i;for(s=0,n=e.length;s<n;s++)i=e[s][r],isNaN(i)||(t.min=Math.min(t.min,i),t.max=Math.max(t.max,i))}function Ja(e){return e*(Me/180)}function eI(e){return e*(180/Me)}function ab(e){if(!Tr(e))return;let t=1,r=0;for(;Math.round(e*t)/t!==e;)t*=10,r++;return r}function rN(e,t){const r=t.x-e.x,s=t.y-e.y,n=Math.sqrt(r*r+s*s);let i=Math.atan2(s,r);return i<-.5*Me&&(i+=jt),{angle:i,distance:n}}function kg(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function tI(e,t){return(e-t+G7)%jt-Me}function Fr(e){return(e%jt+jt)%jt}function pp(e,t,r,s){const n=Fr(e),i=Fr(t),o=Fr(r),l=Fr(i-n),c=Fr(o-n),d=Fr(n-i),u=Fr(n-o);return n===i||n===o||s&&i===o||l>c&&d<u}function It(e,t,r){return Math.max(t,Math.min(r,e))}function rI(e){return It(e,-32768,32767)}function da(e,t,r,s=1e-6){return e>=Math.min(t,r)-s&&e<=Math.max(t,r)+s}function xp(e,t,r){r=r||(o=>e[o]<t);let s=e.length-1,n=0,i;for(;s-n>1;)i=n+s>>1,r(i)?n=i:s=i;return{lo:n,hi:s}}const Za=(e,t,r,s)=>xp(e,r,s?n=>{const i=e[n][t];return i<r||i===r&&e[n+1][t]===r}:n=>e[n][t]<r),sI=(e,t,r)=>xp(e,r,s=>e[s][t]>=r);function aI(e,t,r){let s=0,n=e.length;for(;s<n&&e[s]<t;)s++;for(;n>s&&e[n-1]>r;)n--;return s>0||n<e.length?e.slice(s,n):e}const sN=["push","pop","shift","splice","unshift"];function nI(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),sN.forEach(r=>{const s="_onData"+gp(r),n=e[r];Object.defineProperty(e,r,{configurable:!0,enumerable:!1,value(...i){const o=n.apply(this,i);return e._chartjs.listeners.forEach(l=>{typeof l[s]=="function"&&l[s](...i)}),o}})})}function nb(e,t){const r=e._chartjs;if(!r)return;const s=r.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(sN.forEach(i=>{delete e[i]}),delete e._chartjs)}function aN(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const nN=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function iN(e,t){let r=[],s=!1;return function(...n){r=n,s||(s=!0,nN.call(window,()=>{s=!1,e.apply(t,r)}))}}function iI(e,t){let r;return function(...s){return t?(clearTimeout(r),r=setTimeout(e,t,s)):e.apply(this,s),t}}const yp=e=>e==="start"?"left":e==="end"?"right":"center",_t=(e,t,r)=>e==="start"?t:e==="end"?r:(t+r)/2,oI=(e,t,r,s)=>e===(s?"left":"right")?r:e==="center"?(t+r)/2:t;function lI(e,t,r){const s=t.length;let n=0,i=s;if(e._sorted){const{iScale:o,vScale:l,_parsed:c}=e,d=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:h,max:m,minDefined:g,maxDefined:f}=o.getUserBounds();if(g){if(n=Math.min(Za(c,u,h).lo,r?s:Za(t,u,o.getPixelForValue(h)).lo),d){const x=c.slice(0,n+1).reverse().findIndex(p=>!Ee(p[l.axis]));n-=Math.max(0,x)}n=It(n,0,s-1)}if(f){let x=Math.max(Za(c,o.axis,m,!0).hi+1,r?0:Za(t,u,o.getPixelForValue(m),!0).hi+1);if(d){const p=c.slice(x-1).findIndex(b=>!Ee(b[l.axis]));x+=Math.max(0,p)}i=It(x,n,s)-n}else i=s-n}return{start:n,count:i}}function cI(e){const{xScale:t,yScale:r,_scaleRanges:s}=e,n={xmin:t.min,xmax:t.max,ymin:r.min,ymax:r.max};if(!s)return e._scaleRanges=n,!0;const i=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==r.min||s.ymax!==r.max;return Object.assign(s,n),i}const ic=e=>e===0||e===1,ib=(e,t,r)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*jt/r)),ob=(e,t,r)=>Math.pow(2,-10*e)*Math.sin((e-t)*jt/r)+1,Po={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*vt)+1,easeOutSine:e=>Math.sin(e*vt),easeInOutSine:e=>-.5*(Math.cos(Me*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>ic(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ic(e)?e:ib(e,.075,.3),easeOutElastic:e=>ic(e)?e:ob(e,.075,.3),easeInOutElastic(e){return ic(e)?e:e<.5?.5*ib(e*2,.1125,.45):.5+.5*ob(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Po.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Po.easeInBounce(e*2)*.5:Po.easeOutBounce(e*2-1)*.5+.5};function bp(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function lb(e){return bp(e)?e:new il(e)}function Em(e){return bp(e)?e:new il(e).saturate(.5).darken(.1).hexString()}const dI=["x","y","borderWidth","radius","tension"],uI=["color","borderColor","backgroundColor"];function hI(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:uI},numbers:{type:"number",properties:dI}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function mI(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const cb=new Map;function fI(e,t){t=t||{};const r=e+JSON.stringify(t);let s=cb.get(r);return s||(s=new Intl.NumberFormat(e,t),cb.set(r,s)),s}function oN(e,t,r){return fI(t,r).format(e)}const gI={values(e){return ct(e)?e:""+e},numeric(e,t,r){if(e===0)return"0";const s=this.chart.options.locale;let n,i=e;if(r.length>1){const d=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(d<1e-4||d>1e15)&&(n="scientific"),i=pI(e,r)}const o=tN(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),oN(e,s,c)}};function pI(e,t){let r=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(r)>=1&&e!==Math.floor(e)&&(r=e-Math.floor(e)),r}var lN={formatters:gI};function xI(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,r)=>r.lineWidth,tickColor:(t,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lN.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const pn=Object.create(null),Ng=Object.create(null);function To(e,t){if(!t)return e;const r=t.split(".");for(let s=0,n=r.length;s<n;++s){const i=r[s];e=e[i]||(e[i]=Object.create(null))}return e}function Pm(e,t,r){return typeof t=="string"?ol(To(e,t),r):ol(To(e,""),t)}class yI{constructor(t,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>Em(n.backgroundColor),this.hoverBorderColor=(s,n)=>Em(n.borderColor),this.hoverColor=(s,n)=>Em(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(r)}set(t,r){return Pm(this,t,r)}get(t){return To(this,t)}describe(t,r){return Pm(Ng,t,r)}override(t,r){return Pm(pn,t,r)}route(t,r,s,n){const i=To(this,t),o=To(this,s),l="_"+r;Object.defineProperties(i,{[l]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const c=this[l],d=o[n];return Se(c)?Object.assign({},d,c):ye(c,d)},set(c){this[l]=c}}})}apply(t){t.forEach(r=>r(this))}}var Je=new yI({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hI,mI,xI]);function bI(e){return!e||Ee(e.size)||Ee(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function db(e,t,r,s,n){let i=t[n];return i||(i=t[n]=e.measureText(n).width,r.push(n)),i>s&&(s=i),s}function za(e,t,r){const s=e.currentDevicePixelRatio,n=r!==0?Math.max(r/2,.5):0;return Math.round((t-n)*s)/s+n}function ub(e,t){!t&&!e||(t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Sg(e,t,r,s){cN(e,t,r,s,null)}function cN(e,t,r,s,n){let i,o,l,c,d,u,h,m;const g=t.pointStyle,f=t.rotation,x=t.radius;let p=(f||0)*Y7;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){e.save(),e.translate(r,s),e.rotate(p),e.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),e.restore();return}if(!(isNaN(x)||x<=0)){switch(e.beginPath(),g){default:n?e.ellipse(r,s,n/2,x,0,0,jt):e.arc(r,s,x,0,jt),e.closePath();break;case"triangle":u=n?n/2:x,e.moveTo(r+Math.sin(p)*u,s-Math.cos(p)*x),p+=rb,e.lineTo(r+Math.sin(p)*u,s-Math.cos(p)*x),p+=rb,e.lineTo(r+Math.sin(p)*u,s-Math.cos(p)*x),e.closePath();break;case"rectRounded":d=x*.516,c=x-d,o=Math.cos(p+$a)*c,h=Math.cos(p+$a)*(n?n/2-d:c),l=Math.sin(p+$a)*c,m=Math.sin(p+$a)*(n?n/2-d:c),e.arc(r-h,s-l,d,p-Me,p-vt),e.arc(r+m,s-o,d,p-vt,p),e.arc(r+h,s+l,d,p,p+vt),e.arc(r-m,s+o,d,p+vt,p+Me),e.closePath();break;case"rect":if(!f){c=Math.SQRT1_2*x,u=n?n/2:c,e.rect(r-u,s-c,2*u,2*c);break}p+=$a;case"rectRot":h=Math.cos(p)*(n?n/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,m=Math.sin(p)*(n?n/2:x),e.moveTo(r-h,s-l),e.lineTo(r+m,s-o),e.lineTo(r+h,s+l),e.lineTo(r-m,s+o),e.closePath();break;case"crossRot":p+=$a;case"cross":h=Math.cos(p)*(n?n/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,m=Math.sin(p)*(n?n/2:x),e.moveTo(r-h,s-l),e.lineTo(r+h,s+l),e.moveTo(r+m,s-o),e.lineTo(r-m,s+o);break;case"star":h=Math.cos(p)*(n?n/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,m=Math.sin(p)*(n?n/2:x),e.moveTo(r-h,s-l),e.lineTo(r+h,s+l),e.moveTo(r+m,s-o),e.lineTo(r-m,s+o),p+=$a,h=Math.cos(p)*(n?n/2:x),o=Math.cos(p)*x,l=Math.sin(p)*x,m=Math.sin(p)*(n?n/2:x),e.moveTo(r-h,s-l),e.lineTo(r+h,s+l),e.moveTo(r+m,s-o),e.lineTo(r-m,s+o);break;case"line":o=n?n/2:Math.cos(p)*x,l=Math.sin(p)*x,e.moveTo(r-o,s-l),e.lineTo(r+o,s+l);break;case"dash":e.moveTo(r,s),e.lineTo(r+Math.cos(p)*(n?n/2:x),s+Math.sin(p)*x);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function dl(e,t,r){return r=r||.5,!t||e&&e.x>t.left-r&&e.x<t.right+r&&e.y>t.top-r&&e.y<t.bottom+r}function vp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function wp(e){e.restore()}function vI(e,t,r,s,n){if(!t)return e.lineTo(r.x,r.y);if(n==="middle"){const i=(t.x+r.x)/2;e.lineTo(i,t.y),e.lineTo(i,r.y)}else n==="after"!=!!s?e.lineTo(t.x,r.y):e.lineTo(r.x,t.y);e.lineTo(r.x,r.y)}function wI(e,t,r,s){if(!t)return e.lineTo(r.x,r.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?r.cp2x:r.cp1x,s?r.cp2y:r.cp1y,r.x,r.y)}function jI(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Ee(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function kI(e,t,r,s,n){if(n.strikethrough||n.underline){const i=e.measureText(s),o=t-i.actualBoundingBoxLeft,l=t+i.actualBoundingBoxRight,c=r-i.actualBoundingBoxAscent,d=r+i.actualBoundingBoxDescent,u=n.strikethrough?(c+d)/2:d;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(o,u),e.lineTo(l,u),e.stroke()}}function NI(e,t){const r=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=r}function ul(e,t,r,s,n,i={}){const o=ct(t)?t:[t],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(e.save(),e.font=n.string,jI(e,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&NI(e,i.backdrop),l&&(i.strokeColor&&(e.strokeStyle=i.strokeColor),Ee(i.strokeWidth)||(e.lineWidth=i.strokeWidth),e.strokeText(d,r,s,i.maxWidth)),e.fillText(d,r,s,i.maxWidth),kI(e,r,s,d,i),s+=Number(n.lineHeight);e.restore()}function hu(e,t){const{x:r,y:s,w:n,h:i,radius:o}=t;e.arc(r+o.topLeft,s+o.topLeft,o.topLeft,1.5*Me,Me,!0),e.lineTo(r,s+i-o.bottomLeft),e.arc(r+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,Me,vt,!0),e.lineTo(r+n-o.bottomRight,s+i),e.arc(r+n-o.bottomRight,s+i-o.bottomRight,o.bottomRight,vt,0,!0),e.lineTo(r+n,s+o.topRight),e.arc(r+n-o.topRight,s+o.topRight,o.topRight,0,-vt,!0),e.lineTo(r+o.topLeft,s)}const SI=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,CI=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _I(e,t){const r=(""+e).match(SI);if(!r||r[1]==="normal")return t*1.2;switch(e=+r[2],r[3]){case"px":return e;case"%":e/=100;break}return t*e}const EI=e=>+e||0;function jp(e,t){const r={},s=Se(t),n=s?Object.keys(t):t,i=Se(e)?s?o=>ye(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of n)r[o]=EI(i(o));return r}function dN(e){return jp(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Xn(e){return jp(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ir(e){const t=dN(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Rt(e,t){e=e||{},t=t||Je.font;let r=ye(e.size,t.size);typeof r=="string"&&(r=parseInt(r,10));let s=ye(e.style,t.style);s&&!(""+s).match(CI)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:ye(e.family,t.family),lineHeight:_I(ye(e.lineHeight,t.lineHeight),r),size:r,style:s,weight:ye(e.weight,t.weight),string:""};return n.string=bI(n),n}function oc(e,t,r,s){let n,i,o;for(n=0,i=e.length;n<i;++n)if(o=e[n],o!==void 0&&o!==void 0)return o}function PI(e,t,r){const{min:s,max:n}=e,i=U7(t,(n-s)/2),o=(l,c)=>r&&l===0?0:l+c;return{min:o(s,-Math.abs(i)),max:o(n,i)}}function bn(e,t){return Object.assign(Object.create(e),t)}function kp(e,t=[""],r,s,n=()=>e[0]){const i=r||e;typeof s>"u"&&(s=fN("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:s,_getTarget:n,override:l=>kp([l,...e],t,i,s)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete e[0][c],!0},get(l,c){return hN(l,c,()=>DI(c,t,e,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(l,c){return mb(l).includes(c)},ownKeys(l){return mb(l)},set(l,c,d){const u=l._storage||(l._storage=n());return l[c]=u[c]=d,delete l._keys,!0}})}function mi(e,t,r,s){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:r,_stack:new Set,_descriptors:uN(e,s),setContext:i=>mi(e,i,r,s),override:i=>mi(e.override(i),t,r,s)};return new Proxy(n,{deleteProperty(i,o){return delete i[o],delete e[o],!0},get(i,o,l){return hN(i,o,()=>II(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(i,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(i,o,l){return e[o]=l,delete i[o],!0}})}function uN(e,t={scriptable:!0,indexable:!0}){const{_scriptable:r=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:r,indexable:s,isScriptable:Ia(r)?r:()=>r,isIndexable:Ia(s)?s:()=>s}}const TI=(e,t)=>e?e+gp(t):t,Np=(e,t)=>Se(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function hN(e,t,r){if(Object.prototype.hasOwnProperty.call(e,t)||t==="constructor")return e[t];const s=r();return e[t]=s,s}function II(e,t,r){const{_proxy:s,_context:n,_subProxy:i,_descriptors:o}=e;let l=s[t];return Ia(l)&&o.isScriptable(t)&&(l=RI(t,l,e,r)),ct(l)&&l.length&&(l=AI(t,l,e,o.isIndexable)),Np(t,l)&&(l=mi(l,n,i&&i[t],o)),l}function RI(e,t,r,s){const{_proxy:n,_context:i,_subProxy:o,_stack:l}=r;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let c=t(i,o||s);return l.delete(e),Np(e,c)&&(c=Sp(n._scopes,n,e,c)),c}function AI(e,t,r,s){const{_proxy:n,_context:i,_subProxy:o,_descriptors:l}=r;if(typeof i.index<"u"&&s(e))return t[i.index%t.length];if(Se(t[0])){const c=t,d=n._scopes.filter(u=>u!==c);t=[];for(const u of c){const h=Sp(d,n,e,u);t.push(mi(h,i,o&&o[e],l))}}return t}function mN(e,t,r){return Ia(e)?e(t,r):e}const OI=(e,t)=>e===!0?t:typeof e=="string"?hi(t,e):void 0;function LI(e,t,r,s,n){for(const i of t){const o=OI(r,i);if(o){e.add(o);const l=mN(o._fallback,r,n);if(typeof l<"u"&&l!==r&&l!==s)return l}else if(o===!1&&typeof s<"u"&&r!==s)return null}return!1}function Sp(e,t,r,s){const n=t._rootScopes,i=mN(t._fallback,r,s),o=[...e,...n],l=new Set;l.add(s);let c=hb(l,o,r,i||r,s);return c===null||typeof i<"u"&&i!==r&&(c=hb(l,o,i,c,s),c===null)?!1:kp(Array.from(l),[""],n,i,()=>MI(t,r,s))}function hb(e,t,r,s,n){for(;r;)r=LI(e,t,r,s,n);return r}function MI(e,t,r){const s=e._getTarget();t in s||(s[t]={});const n=s[t];return ct(n)&&Se(r)?r:n||{}}function DI(e,t,r,s){let n;for(const i of t)if(n=fN(TI(i,e),r),typeof n<"u")return Np(e,n)?Sp(r,s,e,n):n}function fN(e,t){for(const r of t){if(!r)continue;const s=r[e];if(typeof s<"u")return s}}function mb(e){let t=e._keys;return t||(t=e._keys=FI(e._scopes)),t}function FI(e){const t=new Set;for(const r of e)for(const s of Object.keys(r).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}const $I=Number.EPSILON||1e-14,fi=(e,t)=>t<e.length&&!e[t].skip&&e[t],gN=e=>e==="x"?"y":"x";function zI(e,t,r,s){const n=e.skip?t:e,i=t,o=r.skip?t:r,l=kg(i,n),c=kg(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=s*d,m=s*u;return{previous:{x:i.x-h*(o.x-n.x),y:i.y-h*(o.y-n.y)},next:{x:i.x+m*(o.x-n.x),y:i.y+m*(o.y-n.y)}}}function BI(e,t,r){const s=e.length;let n,i,o,l,c,d=fi(e,0);for(let u=0;u<s-1;++u)if(c=d,d=fi(e,u+1),!(!c||!d)){if(Eo(t[u],0,$I)){r[u]=r[u+1]=0;continue}n=r[u]/t[u],i=r[u+1]/t[u],l=Math.pow(n,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),r[u]=n*o*t[u],r[u+1]=i*o*t[u])}}function UI(e,t,r="x"){const s=gN(r),n=e.length;let i,o,l,c=fi(e,0);for(let d=0;d<n;++d){if(o=l,l=c,c=fi(e,d+1),!l)continue;const u=l[r],h=l[s];o&&(i=(u-o[r])/3,l[`cp1${r}`]=u-i,l[`cp1${s}`]=h-i*t[d]),c&&(i=(c[r]-u)/3,l[`cp2${r}`]=u+i,l[`cp2${s}`]=h+i*t[d])}}function VI(e,t="x"){const r=gN(t),s=e.length,n=Array(s).fill(0),i=Array(s);let o,l,c,d=fi(e,0);for(o=0;o<s;++o)if(l=c,c=d,d=fi(e,o+1),!!c){if(d){const u=d[t]-c[t];n[o]=u!==0?(d[r]-c[r])/u:0}i[o]=l?d?ps(n[o-1])!==ps(n[o])?0:(n[o-1]+n[o])/2:n[o-1]:n[o]}BI(e,n,i),UI(e,i,t)}function lc(e,t,r){return Math.max(Math.min(e,r),t)}function HI(e,t){let r,s,n,i,o,l=dl(e[0],t);for(r=0,s=e.length;r<s;++r)o=i,i=l,l=r<s-1&&dl(e[r+1],t),i&&(n=e[r],o&&(n.cp1x=lc(n.cp1x,t.left,t.right),n.cp1y=lc(n.cp1y,t.top,t.bottom)),l&&(n.cp2x=lc(n.cp2x,t.left,t.right),n.cp2y=lc(n.cp2y,t.top,t.bottom)))}function WI(e,t,r,s,n){let i,o,l,c;if(t.spanGaps&&(e=e.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")VI(e,n);else{let d=s?e[e.length-1]:e[0];for(i=0,o=e.length;i<o;++i)l=e[i],c=zI(d,l,e[Math.min(i+1,o-(s?0:1))%o],t.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}t.capBezierPoints&&HI(e,r)}function Cp(){return typeof window<"u"&&typeof document<"u"}function _p(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function mu(e,t,r){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[r])):s=e,s}const jh=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function qI(e,t){return jh(e).getPropertyValue(t)}const KI=["top","right","bottom","left"];function an(e,t,r){const s={};r=r?"-"+r:"";for(let n=0;n<4;n++){const i=KI[n];s[i]=parseFloat(e[t+"-"+i+r])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const GI=(e,t,r)=>(e>0||t>0)&&(!r||!r.shadowRoot);function YI(e,t){const r=e.touches,s=r&&r.length?r[0]:e,{offsetX:n,offsetY:i}=s;let o=!1,l,c;if(GI(n,i,e.target))l=n,c=i;else{const d=t.getBoundingClientRect();l=s.clientX-d.left,c=s.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function Wa(e,t){if("native"in e)return e;const{canvas:r,currentDevicePixelRatio:s}=t,n=jh(r),i=n.boxSizing==="border-box",o=an(n,"padding"),l=an(n,"border","width"),{x:c,y:d,box:u}=YI(e,r),h=o.left+(u&&l.left),m=o.top+(u&&l.top);let{width:g,height:f}=t;return i&&(g-=o.width+l.width,f-=o.height+l.height),{x:Math.round((c-h)/g*r.width/s),y:Math.round((d-m)/f*r.height/s)}}function QI(e,t,r){let s,n;if(t===void 0||r===void 0){const i=e&&_p(e);if(!i)t=e.clientWidth,r=e.clientHeight;else{const o=i.getBoundingClientRect(),l=jh(i),c=an(l,"border","width"),d=an(l,"padding");t=o.width-d.width-c.width,r=o.height-d.height-c.height,s=mu(l.maxWidth,i,"clientWidth"),n=mu(l.maxHeight,i,"clientHeight")}}return{width:t,height:r,maxWidth:s||uu,maxHeight:n||uu}}const ua=e=>Math.round(e*10)/10;function XI(e,t,r,s){const n=jh(e),i=an(n,"margin"),o=mu(n.maxWidth,e,"clientWidth")||uu,l=mu(n.maxHeight,e,"clientHeight")||uu,c=QI(e,t,r);let{width:d,height:u}=c;if(n.boxSizing==="content-box"){const m=an(n,"border","width"),g=an(n,"padding");d-=g.width+m.width,u-=g.height+m.height}return d=Math.max(0,d-i.width),u=Math.max(0,s?d/s:u-i.height),d=ua(Math.min(d,o,c.maxWidth)),u=ua(Math.min(u,l,c.maxHeight)),d&&!u&&(u=ua(d/2)),(t!==void 0||r!==void 0)&&s&&c.height&&u>c.height&&(u=c.height,d=ua(Math.floor(u*s))),{width:d,height:u}}function fb(e,t,r){const s=t||1,n=ua(e.height*s),i=ua(e.width*s);e.height=ua(e.height),e.width=ua(e.width);const o=e.canvas;return o.style&&(r||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==n||o.width!==i?(e.currentDevicePixelRatio=s,o.height=n,o.width=i,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const JI=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Cp()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function gb(e,t){const r=qI(e,t),s=r&&r.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function qa(e,t,r,s){return{x:e.x+r*(t.x-e.x),y:e.y+r*(t.y-e.y)}}function ZI(e,t,r,s){return{x:e.x+r*(t.x-e.x),y:s==="middle"?r<.5?e.y:t.y:s==="after"?r<1?e.y:t.y:r>0?t.y:e.y}}function eR(e,t,r,s){const n={x:e.cp2x,y:e.cp2y},i={x:t.cp1x,y:t.cp1y},o=qa(e,n,r),l=qa(n,i,r),c=qa(i,t,r),d=qa(o,l,r),u=qa(l,c,r);return qa(d,u,r)}const tR=function(e,t){return{x(r){return e+e+t-r},setWidth(r){t=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,s){return r-s},leftForLtr(r,s){return r-s}}},rR=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Jn(e,t,r){return e?tR(t,r):rR()}function pN(e,t){let r,s;(t==="ltr"||t==="rtl")&&(r=e.canvas.style,s=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",t,"important"),e.prevTextDirection=s)}function xN(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function yN(e){return e==="angle"?{between:pp,compare:tI,normalize:Fr}:{between:da,compare:(t,r)=>t-r,normalize:t=>t}}function pb({start:e,end:t,count:r,loop:s,style:n}){return{start:e%r,end:t%r,loop:s&&(t-e+1)%r===0,style:n}}function sR(e,t,r){const{property:s,start:n,end:i}=r,{between:o,normalize:l}=yN(s),c=t.length;let{start:d,end:u,loop:h}=e,m,g;if(h){for(d+=c,u+=c,m=0,g=c;m<g&&o(l(t[d%c][s]),n,i);++m)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:e.style}}function aR(e,t,r){if(!r)return[e];const{property:s,start:n,end:i}=r,o=t.length,{compare:l,between:c,normalize:d}=yN(s),{start:u,end:h,loop:m,style:g}=sR(e,t,r),f=[];let x=!1,p=null,b,y,v;const w=()=>c(n,v,b)&&l(n,v)!==0,k=()=>l(i,b)===0||c(i,v,b),P=()=>x||w(),C=()=>!x||k();for(let N=u,S=u;N<=h;++N)y=t[N%o],!y.skip&&(b=d(y[s]),b!==v&&(x=c(b,n,i),p===null&&P()&&(p=l(b,n)===0?N:S),p!==null&&C()&&(f.push(pb({start:p,end:N,loop:m,count:o,style:g})),p=null),S=N,v=b));return p!==null&&f.push(pb({start:p,end:h,loop:m,count:o,style:g})),f}function nR(e,t){const r=[],s=e.segments;for(let n=0;n<s.length;n++){const i=aR(s[n],e.points,t);i.length&&r.push(...i)}return r}function iR(e,t,r,s){let n=0,i=t-1;if(r&&!s)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,r&&(i+=n);i>n&&e[i%t].skip;)i--;return i%=t,{start:n,end:i}}function oR(e,t,r,s){const n=e.length,i=[];let o=t,l=e[t],c;for(c=t+1;c<=r;++c){const d=e[c%n];d.skip||d.stop?l.skip||(s=!1,i.push({start:t%n,end:(c-1)%n,loop:s}),t=o=d.stop?c:null):(o=c,l.skip&&(t=c)),l=d}return o!==null&&i.push({start:t%n,end:o%n,loop:s}),i}function lR(e,t){const r=e.points,s=e.options.spanGaps,n=r.length;if(!n)return[];const i=!!e._loop,{start:o,end:l}=iR(r,n,i,s);if(s===!0)return xb(e,[{start:o,end:l,loop:i}],r,t);const c=l<o?l+n:l,d=!!e._fullLoop&&o===0&&l===n-1;return xb(e,oR(r,o,c,d),r,t)}function xb(e,t,r,s){return!s||!s.setContext||!r?t:cR(e,t,r,s)}function cR(e,t,r,s){const n=e._chart.getContext(),i=yb(e.options),{_datasetIndex:o,options:{spanGaps:l}}=e,c=r.length,d=[];let u=i,h=t[0].start,m=h;function g(f,x,p,b){const y=l?-1:1;if(f!==x){for(f+=c;r[f%c].skip;)f-=y;for(;r[x%c].skip;)x+=y;f%c!==x%c&&(d.push({start:f%c,end:x%c,loop:p,style:b}),u=b,h=x%c)}}for(const f of t){h=l?h:f.start;let x=r[h%c],p;for(m=h+1;m<=f.end;m++){const b=r[m%c];p=yb(s.setContext(bn(n,{type:"segment",p0:x,p1:b,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:o}))),dR(p,u)&&g(h,m-1,f.loop,u),x=b,u=p}h<m-1&&g(h,m-1,f.loop,u)}return d}function yb(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function dR(e,t){if(!t)return!1;const r=[],s=function(n,i){return bp(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function cc(e,t,r){return e.options.clip?e[r]:t[r]}function uR(e,t){const{xScale:r,yScale:s}=e;return r&&s?{left:cc(r,t,"left"),right:cc(r,t,"right"),top:cc(s,t,"top"),bottom:cc(s,t,"bottom")}:t}function hR(e,t){const r=t._clip;if(r.disabled)return!1;const s=uR(t,e.chartArea);return{left:r.left===!1?0:s.left-(r.left===!0?0:r.left),right:r.right===!1?e.width:s.right+(r.right===!0?0:r.right),top:r.top===!1?0:s.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?e.height:s.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class mR{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,r,s,n){const i=r.listeners[n],o=r.duration;i.forEach(l=>l({chart:t,initial:r.initial,numSteps:o,currentStep:Math.min(s-r.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=nN.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let r=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),l=!0):(i[o]=i[i.length-1],i.pop());l&&(n.draw(),this._notify(n,s,t,"progress")),i.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),r+=i.length}),this._lastDate=t,r===0&&(this._running=!1)}_getAnims(t){const r=this._charts;let s=r.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(t,s)),s}listen(t,r,s){this._getAnims(t).listeners[r].push(s)}add(t,r){!r||!r.length||this._getAnims(t).items.push(...r)}has(t){return this._getAnims(t).items.length>0}start(t){const r=this._charts.get(t);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const r=this._charts.get(t);return!(!r||!r.running||!r.items.length)}stop(t){const r=this._charts.get(t);if(!r||!r.items.length)return;const s=r.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();r.items=[],this._notify(t,r,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ps=new mR;const bb="transparent",fR={boolean(e,t,r){return r>.5?t:e},color(e,t,r){const s=lb(e||bb),n=s.valid&&lb(t||bb);return n&&n.valid?n.mix(s,r).hexString():t},number(e,t,r){return e+(t-e)*r}};class gR{constructor(t,r,s,n){const i=r[s];n=oc([t.to,n,i,t.from]);const o=oc([t.from,i,n]);this._active=!0,this._fn=t.fn||fR[t.type||typeof o],this._easing=Po[t.easing]||Po.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=r,this._prop=s,this._from=o,this._to=n,this._promises=void 0}active(){return this._active}update(t,r,s){if(this._active){this._notify(!1);const n=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=oc([t.to,r,n,t.from]),this._from=oc([t.from,n,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const r=t-this._start,s=this._duration,n=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||r<s),!this._active){this._target[n]=l,this._notify(!0);return}if(r<0){this._target[n]=i;return}c=r/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(i,l,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((r,s)=>{t.push({res:r,rej:s})})}_notify(t){const r=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][r]()}}class bN{constructor(t,r){this._chart=t,this._properties=new Map,this.configure(r)}configure(t){if(!Se(t))return;const r=Object.keys(Je.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const i=t[n];if(!Se(i))return;const o={};for(const l of r)o[l]=i[l];(ct(i.properties)&&i.properties||[n]).forEach(l=>{(l===n||!s.has(l))&&s.set(l,o)})})}_animateOptions(t,r){const s=r.options,n=xR(t,s);if(!n)return[];const i=this._createAnimations(n,s);return s.$shared&&pR(t.options.$animations,s).then(()=>{t.options=s},()=>{}),i}_createAnimations(t,r){const s=this._properties,n=[],i=t.$animations||(t.$animations={}),o=Object.keys(r),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){n.push(...this._animateOptions(t,r));continue}const u=r[d];let h=i[d];const m=s.get(d);if(h)if(m&&h.active()){h.update(m,u,l);continue}else h.cancel();if(!m||!m.duration){t[d]=u;continue}i[d]=h=new gR(m,t,d,u),n.push(h)}return n}update(t,r){if(this._properties.size===0){Object.assign(t,r);return}const s=this._createAnimations(t,r);if(s.length)return Ps.add(this._chart,s),!0}}function pR(e,t){const r=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const i=e[s[n]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function xR(e,t){if(!t)return;let r=e.options;if(!r){e.options=t;return}return r.$shared&&(e.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function vb(e,t){const r=e&&e.options||{},s=r.reverse,n=r.min===void 0?t:0,i=r.max===void 0?t:0;return{start:s?i:n,end:s?n:i}}function yR(e,t,r){if(r===!1)return!1;const s=vb(e,r),n=vb(t,r);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function bR(e){let t,r,s,n;return Se(e)?(t=e.top,r=e.right,s=e.bottom,n=e.left):t=r=s=n=e,{top:t,right:r,bottom:s,left:n,disabled:e===!1}}function vN(e,t){const r=[],s=e._getSortedDatasetMetas(t);let n,i;for(n=0,i=s.length;n<i;++n)r.push(s[n].index);return r}function wb(e,t,r,s={}){const n=e.keys,i=s.mode==="single";let o,l,c,d;if(t===null)return;let u=!1;for(o=0,l=n.length;o<l;++o){if(c=+n[o],c===r){if(u=!0,s.all)continue;break}d=e.values[c],Tr(d)&&(i||t===0||ps(t)===ps(d))&&(t+=d)}return!u&&!s.all?0:t}function vR(e,t){const{iScale:r,vScale:s}=t,n=r.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(e),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[n]:u,[i]:e[u]};return l}function Tm(e,t){const r=e&&e.options.stacked;return r||r===void 0&&t.stack!==void 0}function wR(e,t,r){return`${e.id}.${t.id}.${r.stack||r.type}`}function jR(e){const{min:t,max:r,minDefined:s,maxDefined:n}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?r:Number.POSITIVE_INFINITY}}function kR(e,t,r){const s=e[t]||(e[t]={});return s[r]||(s[r]={})}function jb(e,t,r,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const i=e[n.index];if(r&&i>0||!r&&i<0)return n.index}return null}function kb(e,t){const{chart:r,_cachedMeta:s}=e,n=r._stacks||(r._stacks={}),{iScale:i,vScale:o,index:l}=s,c=i.axis,d=o.axis,u=wR(i,o,s),h=t.length;let m;for(let g=0;g<h;++g){const f=t[g],{[c]:x,[d]:p}=f,b=f._stacks||(f._stacks={});m=b[d]=kR(n,u,x),m[l]=p,m._top=jb(m,o,!0,s.type),m._bottom=jb(m,o,!1,s.type);const y=m._visualValues||(m._visualValues={});y[l]=p}}function Im(e,t){const r=e.scales;return Object.keys(r).filter(s=>r[s].axis===t).shift()}function NR(e,t){return bn(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function SR(e,t,r){return bn(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:r,index:t,mode:"default",type:"data"})}function $i(e,t){const r=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const n of t){const i=n._stacks;if(!i||i[s]===void 0||i[s][r]===void 0)return;delete i[s][r],i[s]._visualValues!==void 0&&i[s]._visualValues[r]!==void 0&&delete i[s]._visualValues[r]}}}const Rm=e=>e==="reset"||e==="none",Nb=(e,t)=>t?e:Object.assign({},e),CR=(e,t,r)=>e&&!t.hidden&&t._stacked&&{keys:vN(r,!0),values:null};class Zn{constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Tm(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&$i(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,r=this._cachedMeta,s=this.getDataset(),n=(h,m,g,f)=>h==="x"?m:h==="r"?f:g,i=r.xAxisID=ye(s.xAxisID,Im(t,"x")),o=r.yAxisID=ye(s.yAxisID,Im(t,"y")),l=r.rAxisID=ye(s.rAxisID,Im(t,"r")),c=r.indexAxis,d=r.iAxisID=n(c,i,o,l),u=r.vAxisID=n(c,o,i,l);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(o),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(d),r.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&nb(this._data,this),t._stacked&&$i(t)}_dataCheck(){const t=this.getDataset(),r=t.data||(t.data=[]),s=this._data;if(Se(r)){const n=this._cachedMeta;this._data=vR(r,n)}else if(s!==r){if(s){nb(s,this);const n=this._cachedMeta;$i(n),n._parsed=[]}r&&Object.isExtensible(r)&&nI(r,this),this._syncList=[],this._data=r}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const r=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const i=r._stacked;r._stacked=Tm(r.vScale,r),r.stack!==s.stack&&(n=!0,$i(r),r.stack=s.stack),this._resyncElements(t),(n||i!==r._stacked)&&(kb(this,r._parsed),r._stacked=Tm(r.vScale,r))}configure(){const t=this.chart.config,r=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){const{_cachedMeta:s,_data:n}=this,{iScale:i,_stacked:o}=s,l=i.axis;let c=t===0&&r===n.length?!0:s._sorted,d=t>0&&s._parsed[t-1],u,h,m;if(this._parsing===!1)s._parsed=n,s._sorted=!0,m=n;else{ct(n[t])?m=this.parseArrayData(s,n,t,r):Se(n[t])?m=this.parseObjectData(s,n,t,r):m=this.parsePrimitiveData(s,n,t,r);const g=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<r;++u)s._parsed[u+t]=h=m[u],c&&(g()&&(c=!1),d=h);s._sorted=c}o&&kb(this,m)}parsePrimitiveData(t,r,s,n){const{iScale:i,vScale:o}=t,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(n);let m,g,f;for(m=0,g=n;m<g;++m)f=m+s,h[m]={[l]:u||i.parse(d[f],f),[c]:o.parse(r[f],f)};return h}parseArrayData(t,r,s,n){const{xScale:i,yScale:o}=t,l=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+s,h=r[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(t,r,s,n){const{xScale:i,yScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(n);let u,h,m,g;for(u=0,h=n;u<h;++u)m=u+s,g=r[m],d[u]={x:i.parse(hi(g,l),m),y:o.parse(hi(g,c),m)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,s){const n=this.chart,i=this._cachedMeta,o=r[t.axis],l={keys:vN(n,!0),values:r._stacks[t.axis]._visualValues};return wb(l,o,i.index,{mode:s})}updateRangeFromParsed(t,r,s,n){const i=s[r.axis];let o=i===null?NaN:i;const l=n&&s._stacks[r.axis];n&&l&&(n.values=l,o=wb(n,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,r){const s=this._cachedMeta,n=s._parsed,i=s._sorted&&t===s.iScale,o=n.length,l=this._getOtherScale(t),c=CR(r,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=jR(l);let m,g;function f(){g=n[m];const x=g[l.axis];return!Tr(g[t.axis])||u>x||h<x}for(m=0;m<o&&!(!f()&&(this.updateRangeFromParsed(d,t,g,c),i));++m);if(i){for(m=o-1;m>=0;--m)if(!f()){this.updateRangeFromParsed(d,t,g,c);break}}return d}getAllParsedValues(t){const r=this._cachedMeta._parsed,s=[];let n,i,o;for(n=0,i=r.length;n<i;++n)o=r[n][t.axis],Tr(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const r=this._cachedMeta,s=r.iScale,n=r.vScale,i=this.getParsed(t);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:n?""+n.getLabelForValue(i[n.axis]):""}}_update(t){const r=this._cachedMeta;this.update(t||"default"),r._clip=bR(ye(this.options.clip,yR(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,r=this.chart,s=this._cachedMeta,n=s.data||[],i=r.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||n.length-l,d=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(t,i,l,c),u=l;u<l+c;++u){const h=n[u];h.hidden||(h.active&&d?o.push(h):h.draw(t,i))}for(u=0;u<o.length;++u)o[u].draw(t,i)}getStyle(t,r){const s=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,r,s){const n=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];i=o.$context||(o.$context=SR(this.getContext(),t,o)),i.parsed=this.getParsed(t),i.raw=n.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=NR(this.chart.getContext(),this.index)),i.dataset=n,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=s,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",s){const n=r==="active",i=this._cachedDataOpts,o=t+"-"+r,l=i[o],c=this.enableOptionSharing&&ll(s);if(l)return Nb(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,t),h=n?[`${t}Hover`,"hover",t,""]:[t,""],m=d.getOptionScopes(this.getDataset(),u),g=Object.keys(Je.elements[t]),f=()=>this.getContext(s,n,r),x=d.resolveNamedOptions(m,g,f,h);return x.$shared&&(x.$shared=c,i[o]=Object.freeze(Nb(x,c))),x}_resolveAnimations(t,r,s){const n=this.chart,i=this._cachedDataOpts,o=`animation-${r}`,l=i[o];if(l)return l;let c;if(n.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,r),m=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(m,this.getContext(t,s,r))}const d=new bN(n,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||Rm(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){const s=this.resolveDataElementOptions(t,r),n=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(r,i)||i!==n;return this.updateSharedOptions(i,r,s),{sharedOptions:i,includeOptions:o}}updateElement(t,r,s,n){Rm(n)?Object.assign(t,s):this._resolveAnimations(r,n).update(t,s)}updateSharedOptions(t,r,s){t&&!Rm(r)&&this._resolveAnimations(void 0,r).update(t,s)}_setStyle(t,r,s,n){t.active=n;const i=this.getStyle(r,n);this._resolveAnimations(r,s,n).update(t,{options:!n&&this.getSharedOptions(i)||i})}removeHoverStyle(t,r,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,r,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const r=this._data,s=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const n=s.length,i=r.length,o=Math.min(i,n);o&&this.parse(0,o),i>n?this._insertElements(n,i-n,t):i<n&&this._removeElements(i,n-i)}_insertElements(t,r,s=!0){const n=this._cachedMeta,i=n.data,o=t+r;let l;const c=d=>{for(d.length+=r,l=d.length-1;l>=o;l--)d[l]=d[l-r]};for(c(i),l=t;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(t,r),s&&this.updateElements(i,t,r,"reset")}updateElements(t,r,s,n){}_removeElements(t,r){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,r);s._stacked&&$i(s,n)}s.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[r,s,n]=t;this[r](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}me(Zn,"defaults",{}),me(Zn,"datasetElementType",null),me(Zn,"dataElementType",null);function _R(e,t){if(!e._cache.$bar){const r=e.getMatchingVisibleMetas(t);let s=[];for(let n=0,i=r.length;n<i;n++)s=s.concat(r[n].controller.getAllParsedValues(e));e._cache.$bar=aN(s.sort((n,i)=>n-i))}return e._cache.$bar}function ER(e){const t=e.iScale,r=_R(t,e.type);let s=t._length,n,i,o,l;const c=()=>{o===32767||o===-32768||(ll(l)&&(s=Math.min(s,Math.abs(o-l)||s)),l=o)};for(n=0,i=r.length;n<i;++n)o=t.getPixelForValue(r[n]),c();for(l=void 0,n=0,i=t.ticks.length;n<i;++n)o=t.getPixelForTick(n),c();return s}function PR(e,t,r,s){const n=r.barThickness;let i,o;return Ee(n)?(i=t.min*r.categoryPercentage,o=r.barPercentage):(i=n*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}function TR(e,t,r,s){const n=t.pixels,i=n[e];let o=e>0?n[e-1]:null,l=e<n.length-1?n[e+1]:null;const c=r.categoryPercentage;o===null&&(o=i-(l===null?t.end-t.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/s,ratio:r.barPercentage,start:d}}function IR(e,t,r,s){const n=r.parse(e[0],s),i=r.parse(e[1],s),o=Math.min(n,i),l=Math.max(n,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),t[r.axis]=d,t._custom={barStart:c,barEnd:d,start:n,end:i,min:o,max:l}}function wN(e,t,r,s){return ct(e)?IR(e,t,r,s):t[r.axis]=r.parse(e,s),t}function Sb(e,t,r,s){const n=e.iScale,i=e.vScale,o=n.getLabels(),l=n===i,c=[];let d,u,h,m;for(d=r,u=r+s;d<u;++d)m=t[d],h={},h[n.axis]=l||n.parse(o[d],d),c.push(wN(m,h,i,d));return c}function Am(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function RR(e,t,r){return e!==0?ps(e):(t.isHorizontal()?1:-1)*(t.min>=r?1:-1)}function AR(e){let t,r,s,n,i;return e.horizontal?(t=e.base>e.x,r="left",s="right"):(t=e.base<e.y,r="bottom",s="top"),t?(n="end",i="start"):(n="start",i="end"),{start:r,end:s,reverse:t,top:n,bottom:i}}function OR(e,t,r,s){let n=t.borderSkipped;const i={};if(!n){e.borderSkipped=i;return}if(n===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=AR(e);n==="middle"&&r&&(e.enableBorderRadius=!0,(r._top||0)===s?n=d:(r._bottom||0)===s?n=u:(i[Cb(u,o,l,c)]=!0,n=d)),i[Cb(n,o,l,c)]=!0,e.borderSkipped=i}function Cb(e,t,r,s){return s?(e=LR(e,t,r),e=_b(e,r,t)):e=_b(e,t,r),e}function LR(e,t,r){return e===t?r:e===r?t:e}function _b(e,t,r){return e==="start"?t:e==="end"?r:e}function MR(e,{inflateAmount:t},r){e.inflateAmount=t==="auto"?r===1?.33:0:t}class ud extends Zn{parsePrimitiveData(t,r,s,n){return Sb(t,r,s,n)}parseArrayData(t,r,s,n){return Sb(t,r,s,n)}parseObjectData(t,r,s,n){const{iScale:i,vScale:o}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let m,g,f,x;for(m=s,g=s+n;m<g;++m)x=r[m],f={},f[i.axis]=i.parse(hi(x,d),m),h.push(wN(hi(x,u),f,o,m));return h}updateRangeFromParsed(t,r,s,n){super.updateRangeFromParsed(t,r,s,n);const i=s._custom;i&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const r=this._cachedMeta,{iScale:s,vScale:n}=r,i=this.getParsed(t),o=i._custom,l=Am(o)?"["+o.start+", "+o.end+"]":""+n.getLabelForValue(i[n.axis]);return{label:""+s.getLabelForValue(i[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,s,n){const i=n==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(r,n);for(let g=r;g<r+s;g++){const f=this.getParsed(g),x=i||Ee(f[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),p=this._calculateBarIndexPixels(g,u),b=(f._stacks||{})[l.axis],y={horizontal:d,base:x.base,enableBorderRadius:!b||Am(f._custom)||o===b._top||o===b._bottom,x:d?x.head:p.center,y:d?p.center:x.head,height:d?p.size:Math.abs(x.size),width:d?Math.abs(x.size):p.size};m&&(y.options=h||this.resolveDataElementOptions(g,t[g].active?"active":n));const v=y.options||t[g].options;OR(y,v,b,o),MR(y,v,u.ratio),this.updateElement(t[g],g,y,n)}}_getStacks(t,r){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=s.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(r),c=l&&l[s.axis],d=u=>{const h=u._parsed.find(g=>g[s.axis]===c),m=h&&h[u.vScale.axis];if(Ee(m)||isNaN(m))return!0};for(const u of n)if(!(r!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===r).shift()}_getAxis(){const t={},r=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[ye(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,r)]=!0;return Object.keys(t)}_getStackIndex(t,r,s){const n=this._getStacks(t,s),i=r!==void 0?n.indexOf(r):-1;return i===-1?n.length-1:i}_getRuler(){const t=this.options,r=this._cachedMeta,s=r.iScale,n=[];let i,o;for(i=0,o=r.data.length;i<o;++i)n.push(s.getPixelForValue(this.getParsed(i)[s.axis],i));const l=t.barThickness;return{min:l||ER(r),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:r,_stacked:s,index:n},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(t),d=c._custom,u=Am(d);let h=c[r.axis],m=0,g=s?this.applyStack(r,c,s):h,f,x;g!==h&&(m=g-h,g=h),u&&(h=d.barStart,g=d.barEnd-d.barStart,h!==0&&ps(h)!==ps(d.barEnd)&&(m=0),m+=h);const p=!Ee(i)&&!u?i:m;let b=r.getPixelForValue(p);if(this.chart.getDataVisibility(t)?f=r.getPixelForValue(m+g):f=b,x=f-b,Math.abs(x)<o){x=RR(x,r,l)*o,h===l&&(b-=x/2);const y=r.getPixelForDecimal(0),v=r.getPixelForDecimal(1),w=Math.min(y,v),k=Math.max(y,v);b=Math.max(Math.min(b,k),w),f=b+x,s&&!u&&(c._stacks[r.axis]._visualValues[n]=r.getValueForPixel(f)-r.getValueForPixel(b))}if(b===r.getPixelForValue(l)){const y=ps(x)*r.getLineWidthForValue(l)/2;b+=y,x-=y}return{size:x,base:b,head:f,center:f+x/2}}_calculateBarIndexPixels(t,r){const s=r.scale,n=this.options,i=n.skipNull,o=ye(n.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(r.grouped){const u=i?this._getStackCount(t):r.stackCount,h=n.barThickness==="flex"?TR(t,r,n,u*d):PR(t,r,n,u*d),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,g=this._getAxis().indexOf(ye(m,this.getFirstScaleIdForIndexAxis())),f=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+g;l=h.start+h.chunk*f+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,r.min*r.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const t=this._cachedMeta,r=t.vScale,s=t.data,n=s.length;let i=0;for(;i<n;++i)this.getParsed(i)[r.axis]!==null&&!s[i].hidden&&s[i].draw(this._ctx)}}me(ud,"id","bar"),me(ud,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),me(ud,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class hd extends Zn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const r=this._cachedMeta,{dataset:s,data:n=[],_dataset:i}=r,o=this.chart._animationsDisabled;let{start:l,count:c}=lI(r,n,o);this._drawStart=l,this._drawCount=c,cI(r)&&(l=0,c=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=n;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:d},t),this.updateElements(n,l,c,t)}updateElements(t,r,s,n){const i=n==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(r,n),m=o.axis,g=l.axis,{spanGaps:f,segment:x}=this.options,p=cl(f)?f:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||n==="none",y=r+s,v=t.length;let w=r>0&&this.getParsed(r-1);for(let k=0;k<v;++k){const P=t[k],C=b?P:{};if(k<r||k>=y){C.skip=!0;continue}const N=this.getParsed(k),S=Ee(N[g]),R=C[m]=o.getPixelForValue(N[m],k),F=C[g]=i||S?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[g],k);C.skip=isNaN(R)||isNaN(F)||S,C.stop=k>0&&Math.abs(N[m]-w[m])>p,x&&(C.parsed=N,C.raw=d.data[k]),h&&(C.options=u||this.resolveDataElementOptions(k,P.active?"active":n)),b||this.updateElement(P,k,C,n),w=N}}getMaxOverflow(){const t=this._cachedMeta,r=t.dataset,s=r.options&&r.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const i=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}me(hd,"id","line"),me(hd,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),me(hd,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ba(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ep{constructor(t){me(this,"options");this.options=t||{}}static override(t){Object.assign(Ep.prototype,t)}init(){}formats(){return Ba()}parse(){return Ba()}format(){return Ba()}add(){return Ba()}diff(){return Ba()}startOf(){return Ba()}endOf(){return Ba()}}var DR={_date:Ep};function FR(e,t,r,s){const{controller:n,data:i,_sorted:o}=e,l=n._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&t!=="r"&&o&&i.length){const d=l._reversePixels?sI:Za;if(s){if(n._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(t);if(h){const m=d(i,t,r-h),g=d(i,t,r+h);return{lo:m.lo,hi:g.hi}}}}else{const u=d(i,t,r);if(c){const{vScale:h}=n._cachedMeta,{_parsed:m}=e,g=m.slice(0,u.lo+1).reverse().findIndex(x=>!Ee(x[h.axis]));u.lo-=Math.max(0,g);const f=m.slice(u.hi).findIndex(x=>!Ee(x[h.axis]));u.hi+=Math.max(0,f)}return u}}return{lo:0,hi:i.length-1}}function kh(e,t,r,s,n){const i=e.getSortedVisibleDatasetMetas(),o=r[t];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:m}=FR(i[l],t,o,n);for(let g=h;g<=m;++g){const f=u[g];f.skip||s(f,d,g)}}}function $R(e){const t=e.indexOf("x")!==-1,r=e.indexOf("y")!==-1;return function(s,n){const i=t?Math.abs(s.x-n.x):0,o=r?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function Om(e,t,r,s,n){const i=[];return!n&&!e.isPointInArea(t)||kh(e,r,t,function(l,c,d){!n&&!dl(l,e.chartArea,0)||l.inRange(t.x,t.y,s)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function zR(e,t,r,s){let n=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:h}=rN(o,{x:t.x,y:t.y});pp(h,d,u)&&n.push({element:o,datasetIndex:l,index:c})}return kh(e,r,t,i),n}function BR(e,t,r,s,n,i){let o=[];const l=$R(r);let c=Number.POSITIVE_INFINITY;function d(u,h,m){const g=u.inRange(t.x,t.y,n);if(s&&!g)return;const f=u.getCenterPoint(n);if(!(!!i||e.isPointInArea(f))&&!g)return;const p=l(t,f);p<c?(o=[{element:u,datasetIndex:h,index:m}],c=p):p===c&&o.push({element:u,datasetIndex:h,index:m})}return kh(e,r,t,d),o}function Lm(e,t,r,s,n,i){return!i&&!e.isPointInArea(t)?[]:r==="r"&&!s?zR(e,t,r,n):BR(e,t,r,s,n,i)}function Eb(e,t,r,s,n){const i=[],o=r==="x"?"inXRange":"inYRange";let l=!1;return kh(e,r,t,(c,d,u)=>{c[o]&&c[o](t[r],n)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(t.x,t.y,n))}),s&&!l?[]:i}var UR={modes:{index(e,t,r,s){const n=Wa(t,e),i=r.axis||"x",o=r.includeInvisible||!1,l=r.intersect?Om(e,n,i,s,o):Lm(e,n,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(e,t,r,s){const n=Wa(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;let l=r.intersect?Om(e,n,i,s,o):Lm(e,n,i,!1,s,o);if(l.length>0){const c=l[0].datasetIndex,d=e.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(e,t,r,s){const n=Wa(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Om(e,n,i,s,o)},nearest(e,t,r,s){const n=Wa(t,e),i=r.axis||"xy",o=r.includeInvisible||!1;return Lm(e,n,i,r.intersect,s,o)},x(e,t,r,s){const n=Wa(t,e);return Eb(e,n,"x",r.intersect,s)},y(e,t,r,s){const n=Wa(t,e);return Eb(e,n,"y",r.intersect,s)}}};const jN=["left","top","right","bottom"];function zi(e,t){return e.filter(r=>r.pos===t)}function Pb(e,t){return e.filter(r=>jN.indexOf(r.pos)===-1&&r.box.axis===t)}function Bi(e,t){return e.sort((r,s)=>{const n=t?s:r,i=t?r:s;return n.weight===i.weight?n.index-i.index:n.weight-i.weight})}function VR(e){const t=[];let r,s,n,i,o,l;for(r=0,s=(e||[]).length;r<s;++r)n=e[r],{position:i,options:{stack:o,stackWeight:l=1}}=n,t.push({index:r,box:n,pos:i,horizontal:n.isHorizontal(),weight:n.weight,stack:o&&i+o,stackWeight:l});return t}function HR(e){const t={};for(const r of e){const{stack:s,pos:n,stackWeight:i}=r;if(!s||!jN.includes(n))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return t}function WR(e,t){const r=HR(e),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let i,o,l;for(i=0,o=e.length;i<o;++i){l=e[i];const{fullSize:c}=l.box,d=r[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*s:c&&t.availableWidth,l.height=n):(l.width=s,l.height=u?u*n:c&&t.availableHeight)}return r}function qR(e){const t=VR(e),r=Bi(t.filter(d=>d.box.fullSize),!0),s=Bi(zi(t,"left"),!0),n=Bi(zi(t,"right")),i=Bi(zi(t,"top"),!0),o=Bi(zi(t,"bottom")),l=Pb(t,"x"),c=Pb(t,"y");return{fullSize:r,leftAndTop:s.concat(i),rightAndBottom:n.concat(c).concat(o).concat(l),chartArea:zi(t,"chartArea"),vertical:s.concat(n).concat(c),horizontal:i.concat(o).concat(l)}}function Tb(e,t,r,s){return Math.max(e[r],t[r])+Math.max(e[s],t[s])}function kN(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function KR(e,t,r,s){const{pos:n,box:i}=r,o=e.maxPadding;if(!Se(n)){r.size&&(e[n]-=r.size);const h=s[r.stack]||{size:0,count:1};h.size=Math.max(h.size,r.horizontal?i.height:i.width),r.size=h.size/h.count,e[n]+=r.size}i.getPadding&&kN(o,i.getPadding());const l=Math.max(0,t.outerWidth-Tb(o,e,"left","right")),c=Math.max(0,t.outerHeight-Tb(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,r.horizontal?{same:d,other:u}:{same:u,other:d}}function GR(e){const t=e.maxPadding;function r(s){const n=Math.max(t[s]-e[s],0);return e[s]+=n,n}e.y+=r("top"),e.x+=r("left"),r("right"),r("bottom")}function YR(e,t){const r=t.maxPadding;function s(n){const i={left:0,top:0,right:0,bottom:0};return n.forEach(o=>{i[o]=Math.max(t[o],r[o])}),i}return s(e?["left","right"]:["top","bottom"])}function Xi(e,t,r,s){const n=[];let i,o,l,c,d,u;for(i=0,o=e.length,d=0;i<o;++i){l=e[i],c=l.box,c.update(l.width||t.w,l.height||t.h,YR(l.horizontal,t));const{same:h,other:m}=KR(t,r,l,s);d|=h&&n.length,u=u||m,c.fullSize||n.push(l)}return d&&Xi(n,t,r,s)||u}function dc(e,t,r,s,n){e.top=r,e.left=t,e.right=t+s,e.bottom=r+n,e.width=s,e.height=n}function Ib(e,t,r,s){const n=r.padding;let{x:i,y:o}=t;for(const l of e){const c=l.box,d=s[l.stack]||{placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=t.w*u,m=d.size||c.height;ll(d.start)&&(o=d.start),c.fullSize?dc(c,n.left,o,r.outerWidth-n.right-n.left,m):dc(c,t.left+d.placed,o,h,m),d.start=o,d.placed+=h,o=c.bottom}else{const h=t.h*u,m=d.size||c.width;ll(d.start)&&(i=d.start),c.fullSize?dc(c,i,n.top,m,r.outerHeight-n.bottom-n.top):dc(c,i,t.top+d.placed,m,h),d.start=i,d.placed+=h,i=c.right}}t.x=i,t.y=o}var Sr={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(r){t.draw(r)}}]},e.boxes.push(t)},removeBox(e,t){const r=e.boxes?e.boxes.indexOf(t):-1;r!==-1&&e.boxes.splice(r,1)},configure(e,t,r){t.fullSize=r.fullSize,t.position=r.position,t.weight=r.weight},update(e,t,r,s){if(!e)return;const n=Ir(e.options.layout.padding),i=Math.max(t-n.width,0),o=Math.max(r-n.height,0),l=qR(e.boxes),c=l.vertical,d=l.horizontal;Pe(e.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const u=c.reduce((x,p)=>p.box.options&&p.box.options.display===!1?x:x+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:r,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},n);kN(m,Ir(s));const g=Object.assign({maxPadding:m,w:i,h:o,x:n.left,y:n.top},n),f=WR(c.concat(d),h);Xi(l.fullSize,g,h,f),Xi(c,g,h,f),Xi(d,g,h,f)&&Xi(c,g,h,f),GR(g),Ib(l.leftAndTop,g,h,f),g.x+=g.w,g.y+=g.h,Ib(l.rightAndBottom,g,h,f),e.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},Pe(l.chartArea,x=>{const p=x.box;Object.assign(p,e.chartArea),p.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class NN{acquireContext(t,r){}releaseContext(t){return!1}addEventListener(t,r,s){}removeEventListener(t,r,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,r,s,n){return r=Math.max(0,r||t.width),s=s||t.height,{width:r,height:Math.max(0,n?Math.floor(r/n):s)}}isAttached(t){return!0}updateConfig(t){}}class QR extends NN{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const md="$chartjs",XR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Rb=e=>e===null||e==="";function JR(e,t){const r=e.style,s=e.getAttribute("height"),n=e.getAttribute("width");if(e[md]={initial:{height:s,width:n,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Rb(n)){const i=gb(e,"width");i!==void 0&&(e.width=i)}if(Rb(s))if(e.style.height==="")e.height=e.width/(t||2);else{const i=gb(e,"height");i!==void 0&&(e.height=i)}return e}const SN=JI?{passive:!0}:!1;function ZR(e,t,r){e&&e.addEventListener(t,r,SN)}function e8(e,t,r){e&&e.canvas&&e.canvas.removeEventListener(t,r,SN)}function t8(e,t){const r=XR[e.type]||e.type,{x:s,y:n}=Wa(e,t);return{type:r,chart:t,native:e,x:s!==void 0?s:null,y:n!==void 0?n:null}}function fu(e,t){for(const r of e)if(r===t||r.contains(t))return!0}function r8(e,t,r){const s=e.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||fu(l.addedNodes,s),o=o&&!fu(l.removedNodes,s);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}function s8(e,t,r){const s=e.canvas,n=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||fu(l.removedNodes,s),o=o&&!fu(l.addedNodes,s);o&&r()});return n.observe(document,{childList:!0,subtree:!0}),n}const hl=new Map;let Ab=0;function CN(){const e=window.devicePixelRatio;e!==Ab&&(Ab=e,hl.forEach((t,r)=>{r.currentDevicePixelRatio!==e&&t()}))}function a8(e,t){hl.size||window.addEventListener("resize",CN),hl.set(e,t)}function n8(e){hl.delete(e),hl.size||window.removeEventListener("resize",CN)}function i8(e,t,r){const s=e.canvas,n=s&&_p(s);if(!n)return;const i=iN((l,c)=>{const d=n.clientWidth;r(l,c),d<n.clientWidth&&r()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(n),a8(e,i),o}function Mm(e,t,r){r&&r.disconnect(),t==="resize"&&n8(e)}function o8(e,t,r){const s=e.canvas,n=iN(i=>{e.ctx!==null&&r(t8(i,e))},e);return ZR(s,t,n),n}class l8 extends NN{acquireContext(t,r){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(JR(t,r),s):null}releaseContext(t){const r=t.canvas;if(!r[md])return!1;const s=r[md].initial;["height","width"].forEach(i=>{const o=s[i];Ee(o)?r.removeAttribute(i):r.setAttribute(i,o)});const n=s.style||{};return Object.keys(n).forEach(i=>{r.style[i]=n[i]}),r.width=r.width,delete r[md],!0}addEventListener(t,r,s){this.removeEventListener(t,r);const n=t.$proxies||(t.$proxies={}),o={attach:r8,detach:s8,resize:i8}[r]||o8;n[r]=o(t,r,s)}removeEventListener(t,r){const s=t.$proxies||(t.$proxies={}),n=s[r];if(!n)return;({attach:Mm,detach:Mm,resize:Mm}[r]||e8)(t,r,n),s[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,r,s,n){return XI(t,r,s,n)}isAttached(t){const r=t&&_p(t);return!!(r&&r.isConnected)}}function c8(e){return!Cp()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?QR:l8}class Gr{constructor(){me(this,"x");me(this,"y");me(this,"active",!1);me(this,"options");me(this,"$animations")}tooltipPosition(t){const{x:r,y:s}=this.getProps(["x","y"],t);return{x:r,y:s}}hasValue(){return cl(this.x)&&cl(this.y)}getProps(t,r){const s=this.$animations;if(!r||!s)return this;const n={};return t.forEach(i=>{n[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),n}}me(Gr,"defaults",{}),me(Gr,"defaultRoutes");function d8(e,t){const r=e.options.ticks,s=u8(e),n=Math.min(r.maxTicksLimit||s,s),i=r.major.enabled?m8(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>n)return f8(t,d,i,o/n),d;const u=h8(i,t,n);if(o>0){let h,m;const g=o>1?Math.round((c-l)/(o-1)):null;for(uc(t,d,u,Ee(g)?0:l-g,l),h=0,m=o-1;h<m;h++)uc(t,d,u,i[h],i[h+1]);return uc(t,d,u,c,Ee(g)?t.length:c+g),d}return uc(t,d,u),d}function u8(e){const t=e.options.offset,r=e._tickSize(),s=e._length/r+(t?0:1),n=e._maxLength/r;return Math.floor(Math.min(s,n))}function h8(e,t,r){const s=g8(e),n=t.length/r;if(!s)return Math.max(n,1);const i=Q7(s);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>n)return c}return Math.max(n,1)}function m8(e){const t=[];let r,s;for(r=0,s=e.length;r<s;r++)e[r].major&&t.push(r);return t}function f8(e,t,r,s){let n=0,i=r[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===i&&(t.push(e[o]),n++,i=r[n*s])}function uc(e,t,r,s,n){const i=ye(s,0),o=Math.min(ye(n,e.length),e.length);let l=0,c,d,u;for(r=Math.ceil(r),n&&(c=n-s,r=c/Math.floor(c/r)),u=i;u<0;)l++,u=Math.round(i+l*r);for(d=Math.max(i,0);d<o;d++)d===u&&(t.push(e[d]),l++,u=Math.round(i+l*r))}function g8(e){const t=e.length;let r,s;if(t<2)return!1;for(s=e[0],r=1;r<t;++r)if(e[r]-e[r-1]!==s)return!1;return s}const p8=e=>e==="left"?"right":e==="right"?"left":e,Ob=(e,t,r)=>t==="top"||t==="left"?e[t]+r:e[t]-r,Lb=(e,t)=>Math.min(t||e,e);function Mb(e,t){const r=[],s=e.length/t,n=e.length;let i=0;for(;i<n;i+=s)r.push(e[Math.floor(i)]);return r}function x8(e,t,r){const s=e.ticks.length,n=Math.min(t,s-1),i=e._startPixel,o=e._endPixel,l=1e-6;let c=e.getPixelForTick(n),d;if(!(r&&(s===1?d=Math.max(c-i,o-c):t===0?d=(e.getPixelForTick(1)-c)/2:d=(c-e.getPixelForTick(n-1))/2,c+=n<t?d:-d,c<i-l||c>o+l)))return c}function y8(e,t){Pe(e,r=>{const s=r.gc,n=s.length/2;let i;if(n>t){for(i=0;i<n;++i)delete r.data[s[i]];s.splice(0,n)}})}function Ui(e){return e.drawTicks?e.tickLength:0}function Db(e,t){if(!e.display)return 0;const r=Rt(e.font,t),s=Ir(e.padding);return(ct(e.text)?e.text.length:1)*r.lineHeight+s.height}function b8(e,t){return bn(e,{scale:t,type:"scale"})}function v8(e,t,r){return bn(e,{tick:r,index:t,type:"tick"})}function w8(e,t,r){let s=yp(e);return(r&&t!=="right"||!r&&t==="right")&&(s=p8(s)),s}function j8(e,t,r,s){const{top:n,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let h=0,m,g,f;const x=o-n,p=l-i;if(e.isHorizontal()){if(g=_t(s,i,l),Se(r)){const b=Object.keys(r)[0],y=r[b];f=u[b].getPixelForValue(y)+x-t}else r==="center"?f=(d.bottom+d.top)/2+x-t:f=Ob(e,r,t);m=l-i}else{if(Se(r)){const b=Object.keys(r)[0],y=r[b];g=u[b].getPixelForValue(y)-p+t}else r==="center"?g=(d.left+d.right)/2-p+t:g=Ob(e,r,t);f=_t(s,o,n),h=r==="left"?-vt:vt}return{titleX:g,titleY:f,maxWidth:m,rotation:h}}class Ni extends Gr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,r){return t}getUserBounds(){let{_userMin:t,_userMax:r,_suggestedMin:s,_suggestedMax:n}=this;return t=Jr(t,Number.POSITIVE_INFINITY),r=Jr(r,Number.NEGATIVE_INFINITY),s=Jr(s,Number.POSITIVE_INFINITY),n=Jr(n,Number.NEGATIVE_INFINITY),{min:Jr(t,s),max:Jr(r,n),minDefined:Tr(t),maxDefined:Tr(r)}}getMinMax(t){let{min:r,max:s,minDefined:n,maxDefined:i}=this.getUserBounds(),o;if(n&&i)return{min:r,max:s};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,t),n||(r=Math.min(r,o.min)),i||(s=Math.max(s,o.max));return r=i&&r>s?s:r,s=n&&r>s?r:s,{min:Jr(r,Jr(s,r)),max:Jr(s,Jr(r,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ze(this.options.beforeUpdate,[this])}update(t,r,s){const{beginAtZero:n,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=r,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=PI(this,i,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Mb(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=d8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,r,s;this.isHorizontal()?(r=this.left,s=this.right):(r=this.top,s=this.bottom,t=!t),this._startPixel=r,this._endPixel=s,this._reversePixels=t,this._length=s-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ze(this.options.afterUpdate,[this])}beforeSetDimensions(){ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ze(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ze(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const r=this.options.ticks;let s,n,i;for(s=0,n=t.length;s<n;s++)i=t[s],i.label=ze(r.callback,[i.value,s,t],this)}afterTickToLabelConversion(){ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,r=t.ticks,s=Lb(this.ticks.length,t.ticks.maxTicksLimit),n=r.minRotation||0,i=r.maxRotation;let o=n,l,c,d;if(!this._isVisible()||!r.display||n>=i||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),h=u.widest.width,m=u.highest.height,g=It(this.chart.width-h,0,this.maxWidth);l=t.offset?this.maxWidth/s:g/(s-1),h+6>l&&(l=g/(s-(t.offset?.5:1)),c=this.maxHeight-Ui(t.grid)-r.padding-Db(t.title,this.chart.options.font),d=Math.sqrt(h*h+m*m),o=eI(Math.min(Math.asin(It((u.highest.height+6)/l,-1,1)),Math.asin(It(c/d,-1,1))-Math.asin(It(m/d,-1,1)))),o=Math.max(n,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ze(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:r,options:{ticks:s,title:n,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Db(n,r.options.font);if(l?(t.width=this.maxWidth,t.height=Ui(i)+c):(t.height=this.maxHeight,t.width=Ui(i)+c),s.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:m}=this._getLabelSizes(),g=s.padding*2,f=Ja(this.labelRotation),x=Math.cos(f),p=Math.sin(f);if(l){const b=s.mirror?0:p*h.width+x*m.height;t.height=Math.min(this.maxHeight,t.height+b+g)}else{const b=s.mirror?0:x*h.width+p*m.height;t.width=Math.min(this.maxWidth,t.width+b+g)}this._calculatePadding(d,u,p,x)}}this._handleMargins(),l?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,r,s,n){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,g=0;c?d?(m=n*t.width,g=s*r.height):(m=s*t.height,g=n*r.width):i==="start"?g=r.width:i==="end"?m=t.width:i!=="inner"&&(m=t.width/2,g=r.width/2),this.paddingLeft=Math.max((m-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let u=r.height/2,h=t.height/2;i==="start"?(u=0,h=t.height):i==="end"&&(u=r.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ze(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:r}=this.options;return r==="top"||r==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let r,s;for(r=0,s=t.length;r<s;r++)Ee(t[r].label)&&(t.splice(r,1),s--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const r=this.options.ticks.sampleSize;let s=this.ticks;r<s.length&&(s=Mb(s,r)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,r,s){const{ctx:n,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(r/Lb(r,s));let d=0,u=0,h,m,g,f,x,p,b,y,v,w,k;for(h=0;h<r;h+=c){if(f=t[h].label,x=this._resolveTickFontOptions(h),n.font=p=x.string,b=i[p]=i[p]||{data:{},gc:[]},y=x.lineHeight,v=w=0,!Ee(f)&&!ct(f))v=db(n,b.data,b.gc,v,f),w=y;else if(ct(f))for(m=0,g=f.length;m<g;++m)k=f[m],!Ee(k)&&!ct(k)&&(v=db(n,b.data,b.gc,v,k),w+=y);o.push(v),l.push(w),d=Math.max(v,d),u=Math.max(w,u)}y8(i,r);const P=o.indexOf(d),C=l.indexOf(u),N=S=>({width:o[S]||0,height:l[S]||0});return{first:N(0),last:N(r-1),widest:N(P),highest:N(C),widths:o,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,r){return NaN}getValueForPixel(t){}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const r=this._startPixel+t*this._length;return rI(this._alignToPixels?za(this.chart,r,0):r)}getDecimalForPixel(t){const r=(t-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:r}=this;return t<0&&r<0?r:t>0&&r>0?t:0}getContext(t){const r=this.ticks||[];if(t>=0&&t<r.length){const s=r[t];return s.$context||(s.$context=v8(this.getContext(),t,s))}return this.$context||(this.$context=b8(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,r=Ja(this.labelRotation),s=Math.abs(Math.cos(r)),n=Math.abs(Math.sin(r)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*s>l*n?l/s:c/n:c*n<l*s?c/s:l/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const r=this.axis,s=this.chart,n=this.options,{grid:i,position:o,border:l}=n,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),m=Ui(i),g=[],f=l.setContext(this.getContext()),x=f.display?f.width:0,p=x/2,b=function(M){return za(s,M,x)};let y,v,w,k,P,C,N,S,R,F,I,V;if(o==="top")y=b(this.bottom),C=this.bottom-m,S=y-p,F=b(t.top)+p,V=t.bottom;else if(o==="bottom")y=b(this.top),F=t.top,V=b(t.bottom)-p,C=y+p,S=this.top+m;else if(o==="left")y=b(this.right),P=this.right-m,N=y-p,R=b(t.left)+p,I=t.right;else if(o==="right")y=b(this.left),R=t.left,I=b(t.right)-p,P=y+p,N=this.left+m;else if(r==="x"){if(o==="center")y=b((t.top+t.bottom)/2+.5);else if(Se(o)){const M=Object.keys(o)[0],_=o[M];y=b(this.chart.scales[M].getPixelForValue(_))}F=t.top,V=t.bottom,C=y+p,S=C+m}else if(r==="y"){if(o==="center")y=b((t.left+t.right)/2);else if(Se(o)){const M=Object.keys(o)[0],_=o[M];y=b(this.chart.scales[M].getPixelForValue(_))}P=y-p,N=P-m,R=t.left,I=t.right}const G=ye(n.ticks.maxTicksLimit,h),z=Math.max(1,Math.ceil(h/G));for(v=0;v<h;v+=z){const M=this.getContext(v),_=i.setContext(M),E=l.setContext(M),O=_.lineWidth,q=_.color,ae=E.dash||[],U=E.dashOffset,re=_.tickWidth,fe=_.tickColor,Ne=_.tickBorderDash||[],A=_.tickBorderDashOffset;w=x8(this,v,c),w!==void 0&&(k=za(s,w,O),d?P=N=R=I=k:C=S=F=V=k,g.push({tx1:P,ty1:C,tx2:N,ty2:S,x1:R,y1:F,x2:I,y2:V,width:O,color:q,borderDash:ae,borderDashOffset:U,tickWidth:re,tickColor:fe,tickBorderDash:Ne,tickBorderDashOffset:A}))}return this._ticksLength=h,this._borderValue=y,g}_computeLabelItems(t){const r=this.axis,s=this.options,{position:n,ticks:i}=s,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,m=Ui(s.grid),g=m+u,f=h?-u:g,x=-Ja(this.labelRotation),p=[];let b,y,v,w,k,P,C,N,S,R,F,I,V="middle";if(n==="top")P=this.bottom-f,C=this._getXAxisLabelAlignment();else if(n==="bottom")P=this.top+f,C=this._getXAxisLabelAlignment();else if(n==="left"){const z=this._getYAxisLabelAlignment(m);C=z.textAlign,k=z.x}else if(n==="right"){const z=this._getYAxisLabelAlignment(m);C=z.textAlign,k=z.x}else if(r==="x"){if(n==="center")P=(t.top+t.bottom)/2+g;else if(Se(n)){const z=Object.keys(n)[0],M=n[z];P=this.chart.scales[z].getPixelForValue(M)+g}C=this._getXAxisLabelAlignment()}else if(r==="y"){if(n==="center")k=(t.left+t.right)/2-g;else if(Se(n)){const z=Object.keys(n)[0],M=n[z];k=this.chart.scales[z].getPixelForValue(M)}C=this._getYAxisLabelAlignment(m).textAlign}r==="y"&&(c==="start"?V="top":c==="end"&&(V="bottom"));const G=this._getLabelSizes();for(b=0,y=l.length;b<y;++b){v=l[b],w=v.label;const z=i.setContext(this.getContext(b));N=this.getPixelForTick(b)+i.labelOffset,S=this._resolveTickFontOptions(b),R=S.lineHeight,F=ct(w)?w.length:1;const M=F/2,_=z.color,E=z.textStrokeColor,O=z.textStrokeWidth;let q=C;o?(k=N,C==="inner"&&(b===y-1?q=this.options.reverse?"left":"right":b===0?q=this.options.reverse?"right":"left":q="center"),n==="top"?d==="near"||x!==0?I=-F*R+R/2:d==="center"?I=-G.highest.height/2-M*R+R:I=-G.highest.height+R/2:d==="near"||x!==0?I=R/2:d==="center"?I=G.highest.height/2-M*R:I=G.highest.height-F*R,h&&(I*=-1),x!==0&&!z.showLabelBackdrop&&(k+=R/2*Math.sin(x))):(P=N,I=(1-F)*R/2);let ae;if(z.showLabelBackdrop){const U=Ir(z.backdropPadding),re=G.heights[b],fe=G.widths[b];let Ne=I-U.top,A=0-U.left;switch(V){case"middle":Ne-=re/2;break;case"bottom":Ne-=re;break}switch(C){case"center":A-=fe/2;break;case"right":A-=fe;break;case"inner":b===y-1?A-=fe:b>0&&(A-=fe/2);break}ae={left:A,top:Ne,width:fe+U.width,height:re+U.height,color:z.backdropColor}}p.push({label:w,font:S,textOffset:I,options:{rotation:x,color:_,strokeColor:E,strokeWidth:O,textAlign:q,textBaseline:V,translation:[k,P],backdrop:ae}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:r}=this.options;if(-Ja(this.labelRotation))return t==="top"?"left":"right";let n="center";return r.align==="start"?n="left":r.align==="end"?n="right":r.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:r,ticks:{crossAlign:s,mirror:n,padding:i}}=this.options,o=this._getLabelSizes(),l=t+i,c=o.widest.width;let d,u;return r==="left"?n?(u=this.right+i,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u=this.left)):r==="right"?n?(u=this.left+i,s==="near"?d="right":s==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,s==="near"?d="left":s==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:r},left:s,top:n,width:i,height:o}=this;r&&(t.save(),t.fillStyle=r,t.fillRect(s,n,i,o),t.restore())}getLineWidthForValue(t){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const n=this.ticks.findIndex(i=>i.value===t);return n>=0?r.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const r=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(d.x,d.y),s.stroke(),s.restore())};if(r.display)for(i=0,o=n.length;i<o;++i){const c=n[i];r.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),r.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:r,options:{border:s,grid:n}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,m;this.isHorizontal()?(d=za(t,this.left,o)-o/2,u=za(t,this.right,l)+l/2,h=m=c):(h=za(t,this.top,o)-o/2,m=za(t,this.bottom,l)+l/2,d=u=c),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(d,h),r.lineTo(u,m),r.stroke(),r.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&vp(s,n);const i=this.getLabelItems(t);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;ul(s,d,0,u,c,l)}n&&wp(s)}drawTitle(){const{ctx:t,options:{position:r,title:s,reverse:n}}=this;if(!s.display)return;const i=Rt(s.font),o=Ir(s.padding),l=s.align;let c=i.lineHeight/2;r==="bottom"||r==="center"||Se(r)?(c+=o.bottom,ct(s.text)&&(c+=i.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:m}=j8(this,c,r,l);ul(t,s.text,0,0,i,{color:s.color,maxWidth:h,rotation:m,textAlign:w8(l,r,n),textBaseline:"middle",translation:[d,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,r=t.ticks&&t.ticks.z||0,s=ye(t.grid&&t.grid.z,-1),n=ye(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Ni.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(t){const r=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let i,o;for(i=0,o=r.length;i<o;++i){const l=r[i];l[s]===this.id&&(!t||l.type===t)&&n.push(l)}return n}_resolveTickFontOptions(t){const r=this.options.ticks.setContext(this.getContext(t));return Rt(r.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class hc{constructor(t,r,s){this.type=t,this.scope=r,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const r=Object.getPrototypeOf(t);let s;S8(r)&&(s=this.register(r));const n=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in n||(n[i]=t,k8(t,o,s),this.override&&Je.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const r=this.items,s=t.id,n=this.scope;s in r&&delete r[s],n&&s in Je[n]&&(delete Je[n][s],this.override&&delete pn[s])}}function k8(e,t,r){const s=ol(Object.create(null),[r?Je.get(r):{},Je.get(t),e.defaults]);Je.set(t,s),e.defaultRoutes&&N8(t,e.defaultRoutes),e.descriptors&&Je.describe(t,e.descriptors)}function N8(e,t){Object.keys(t).forEach(r=>{const s=r.split("."),n=s.pop(),i=[e].concat(s).join("."),o=t[r].split("."),l=o.pop(),c=o.join(".");Je.route(i,n,c,l)})}function S8(e){return"id"in e&&"defaults"in e}class C8{constructor(){this.controllers=new hc(Zn,"datasets",!0),this.elements=new hc(Gr,"elements"),this.plugins=new hc(Object,"plugins"),this.scales=new hc(Ni,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,r,s){[...r].forEach(n=>{const i=s||this._getRegistryForType(n);s||i.isForType(n)||i===this.plugins&&n.id?this._exec(t,i,n):Pe(n,o=>{const l=s||this._getRegistryForType(o);this._exec(t,l,o)})})}_exec(t,r,s){const n=gp(t);ze(s["before"+n],[],s),r[t](s),ze(s["after"+n],[],s)}_getRegistryForType(t){for(let r=0;r<this._typedRegistries.length;r++){const s=this._typedRegistries[r];if(s.isForType(t))return s}return this.plugins}_get(t,r,s){const n=r.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var ts=new C8;class _8{constructor(){this._init=void 0}notify(t,r,s,n){if(r==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const i=n?this._descriptors(t).filter(n):this._descriptors(t),o=this._notify(i,t,r,s);return r==="afterDestroy"&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,r,s,n){n=n||{};for(const i of t){const o=i.plugin,l=o[s],c=[r,n,i.options];if(ze(l,c,o)===!1&&n.cancelable)return!1}return!0}invalidate(){Ee(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),r}_createDescriptors(t,r){const s=t&&t.config,n=ye(s.options&&s.options.plugins,{}),i=E8(s);return n===!1&&!r?[]:T8(t,i,n,r)}_notifyStateChanges(t){const r=this._oldCache||[],s=this._cache,n=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(n(r,s),t,"stop"),this._notify(n(s,r),t,"start")}}function E8(e){const t={},r=[],s=Object.keys(ts.plugins.items);for(let i=0;i<s.length;i++)r.push(ts.getPlugin(s[i]));const n=e.plugins||[];for(let i=0;i<n.length;i++){const o=n[i];r.indexOf(o)===-1&&(r.push(o),t[o.id]=!0)}return{plugins:r,localIds:t}}function P8(e,t){return!t&&e===!1?null:e===!0?{}:e}function T8(e,{plugins:t,localIds:r},s,n){const i=[],o=e.getContext();for(const l of t){const c=l.id,d=P8(s[c],n);d!==null&&i.push({plugin:l,options:I8(e.config,{plugin:l,local:r[c]},d,o)})}return i}function I8(e,{plugin:t,local:r},s,n){const i=e.pluginScopeKeys(t),o=e.getOptionScopes(s,i);return r&&t.defaults&&o.push(t.defaults),e.createResolver(o,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Cg(e,t){const r=Je.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||r.indexAxis||"x"}function R8(e,t){let r=e;return e==="_index_"?r=t:e==="_value_"&&(r=t==="x"?"y":"x"),r}function A8(e,t){return e===t?"_index_":"_value_"}function Fb(e){if(e==="x"||e==="y"||e==="r")return e}function O8(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function _g(e,...t){if(Fb(e))return e;for(const r of t){const s=r.axis||O8(r.position)||e.length>1&&Fb(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function $b(e,t,r){if(r[t+"AxisID"]===e)return{axis:t}}function L8(e,t){if(t.data&&t.data.datasets){const r=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(r.length)return $b(e,"x",r[0])||$b(e,"y",r[0])}return{}}function M8(e,t){const r=pn[e.type]||{scales:{}},s=t.scales||{},n=Cg(e.type,t),i=Object.create(null);return Object.keys(s).forEach(o=>{const l=s[o];if(!Se(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=_g(o,l,L8(o,e),Je.scales[l.type]),d=A8(c,n),u=r.scales||{};i[o]=_o(Object.create(null),[{axis:c},l,u[c],u[d]])}),e.data.datasets.forEach(o=>{const l=o.type||e.type,c=o.indexAxis||Cg(l,t),u=(pn[l]||{}).scales||{};Object.keys(u).forEach(h=>{const m=R8(h,c),g=o[m+"AxisID"]||m;i[g]=i[g]||Object.create(null),_o(i[g],[{axis:m},s[g],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];_o(l,[Je.scales[l.type],Je.scale])}),i}function _N(e){const t=e.options||(e.options={});t.plugins=ye(t.plugins,{}),t.scales=M8(e,t)}function EN(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function D8(e){return e=e||{},e.data=EN(e.data),_N(e),e}const zb=new Map,PN=new Set;function mc(e,t){let r=zb.get(e);return r||(r=t(),zb.set(e,r),PN.add(r)),r}const Vi=(e,t,r)=>{const s=hi(t,r);s!==void 0&&e.add(s)};class F8{constructor(t){this._config=D8(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=EN(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),_N(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return mc(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,r){return mc(`${t}.transition.${r}`,()=>[[`datasets.${t}.transitions.${r}`,`transitions.${r}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,r){return mc(`${t}-${r}`,()=>[[`datasets.${t}.elements.${r}`,`datasets.${t}`,`elements.${r}`,""]])}pluginScopeKeys(t){const r=t.id,s=this.type;return mc(`${s}-plugin-${r}`,()=>[[`plugins.${r}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,r){const s=this._scopeCache;let n=s.get(t);return(!n||r)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,r,s){const{options:n,type:i}=this,o=this._cachedScopes(t,s),l=o.get(r);if(l)return l;const c=new Set;r.forEach(u=>{t&&(c.add(t),u.forEach(h=>Vi(c,t,h))),u.forEach(h=>Vi(c,n,h)),u.forEach(h=>Vi(c,pn[i]||{},h)),u.forEach(h=>Vi(c,Je,h)),u.forEach(h=>Vi(c,Ng,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),PN.has(r)&&o.set(r,d),d}chartOptionScopes(){const{options:t,type:r}=this;return[t,pn[r]||{},Je.datasets[r]||{},{type:r},Je,Ng]}resolveNamedOptions(t,r,s,n=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=Bb(this._resolverCache,t,n);let c=o;if(z8(o,r)){i.$shared=!1,s=Ia(s)?s():s;const d=this.createResolver(t,s,l);c=mi(o,s,d)}for(const d of r)i[d]=c[d];return i}createResolver(t,r,s=[""],n){const{resolver:i}=Bb(this._resolverCache,t,s);return Se(r)?mi(i,r,void 0,n):i}}function Bb(e,t,r){let s=e.get(t);s||(s=new Map,e.set(t,s));const n=r.join();let i=s.get(n);return i||(i={resolver:kp(t,r),subPrefixes:r.filter(l=>!l.toLowerCase().includes("hover"))},s.set(n,i)),i}const $8=e=>Se(e)&&Object.getOwnPropertyNames(e).some(t=>Ia(e[t]));function z8(e,t){const{isScriptable:r,isIndexable:s}=uN(e);for(const n of t){const i=r(n),o=s(n),l=(o||i)&&e[n];if(i&&(Ia(l)||$8(l))||o&&ct(l))return!0}return!1}var B8="4.5.1";const U8=["top","bottom","left","right","chartArea"];function Ub(e,t){return e==="top"||e==="bottom"||U8.indexOf(e)===-1&&t==="x"}function Vb(e,t){return function(r,s){return r[e]===s[e]?r[t]-s[t]:r[e]-s[e]}}function Hb(e){const t=e.chart,r=t.options.animation;t.notifyPlugins("afterRender"),ze(r&&r.onComplete,[e],t)}function V8(e){const t=e.chart,r=t.options.animation;ze(r&&r.onProgress,[e],t)}function TN(e){return Cp()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const fd={},Wb=e=>{const t=TN(e);return Object.values(fd).filter(r=>r.canvas===t).pop()};function H8(e,t,r){const s=Object.keys(e);for(const n of s){const i=+n;if(i>=t){const o=e[n];delete e[n],(r>0||i>t)&&(e[i+r]=o)}}}function W8(e,t,r,s){return!r||e.type==="mouseout"?null:s?t:e}var Js;let _l=(Js=class{static register(...t){ts.add(...t),qb()}static unregister(...t){ts.remove(...t),qb()}constructor(t,r){const s=this.config=new F8(r),n=TN(t),i=Wb(n);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||c8(n)),this.platform.updateConfig(s);const l=this.platform.acquireContext(n,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=B7(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=iI(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],fd[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ps.listen(this,"complete",Hb),Ps.listen(this,"progress",V8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:r},width:s,height:n,_aspectRatio:i}=this;return Ee(t)?r&&i?i:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return ts}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ub(this.canvas,this.ctx),this}stop(){return Ps.stop(this),this}resize(t,r){Ps.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){const s=this.options,n=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(n,t,r,i),l=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,fb(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ze(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};Pe(r,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,r=t.scales,s=this.scales,n=Object.keys(s).reduce((o,l)=>(o[l]=!1,o),{});let i=[];r&&(i=i.concat(Object.keys(r).map(o=>{const l=r[o],c=_g(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Pe(i,o=>{const l=o.options,c=l.id,d=_g(c,l),u=ye(l.type,o.dtype);(l.position===void 0||Ub(l.position,d)!==Ub(o.dposition))&&(l.position=o.dposition),n[c]=!0;let h=null;if(c in s&&s[c].type===u)h=s[c];else{const m=ts.getScale(u);h=new m({id:c,type:u,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(l,t)}),Pe(n,(o,l)=>{o||delete s[l]}),Pe(s,o=>{Sr.configure(this,o,o.options),Sr.addBox(this,o)})}_updateMetasets(){const t=this._metasets,r=this.data.datasets.length,s=t.length;if(t.sort((n,i)=>n.index-i.index),s>r){for(let n=r;n<s;++n)this._destroyDatasetMeta(n);t.splice(r,s-r)}this._sortedMetasets=t.slice(0).sort(Vb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((s,n)=>{r.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],r=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=r.length;s<n;s++){const i=r[s];let o=this.getDatasetMeta(s);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=l,o.indexAxis=i.indexAxis||Cg(l,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=ts.getController(l),{datasetElementType:d,dataElementType:u}=Je.datasets[l];Object.assign(c,{dataElementType:ts.getElement(u),datasetElementType:d&&ts.getElement(d)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){Pe(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const r=this.config;r.update();const s=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),m=!n&&i.indexOf(h)===-1;h.buildOrUpdateElements(m),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),n||Pe(i,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Vb("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Pe(this.scales,t=>{Sr.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,r=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!tb(r,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:i}of r){const o=s==="_removeElements"?-i:i;H8(t,n,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const r=this.data.datasets.length,s=i=>new Set(t.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),n=s(0);for(let i=1;i<r;i++)if(!tb(n,s(i)))return;return Array.from(n).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Sr.update(this,this.width,this.height,t);const r=this.chartArea,s=r.width<=0||r.height<=0;this._layers=[],Pe(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,i)=>{n._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,s=this.data.datasets.length;r<s;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,s=this.data.datasets.length;r<s;++r)this._updateDataset(r,Ia(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(r),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ps.has(this)?this.attached&&!Ps.running(this)&&Ps.start(this):(this.draw(),Hb({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const r=this._sortedMetasets,s=[];let n,i;for(n=0,i=r.length;n<i;++n){const o=r[n];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const r=this.ctx,s={meta:t,index:t.index,cancelable:!0},n=hR(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&vp(r,n),t.controller.draw(),n&&wp(r),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return dl(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,s,n){const i=UR.modes[r];return typeof i=="function"?i(this,t,s,n):[]}getDatasetMeta(t){const r=this.data.datasets[t],s=this._metasets;let n=s.filter(i=>i&&i._dataset===r).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=bn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const r=this.data.datasets[t];if(!r)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!r.hidden}setDatasetVisibility(t,r){const s=this.getDatasetMeta(t);s.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,s){const n=s?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,n);ll(r)?(i.data[r].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(i,{visible:s}),this.update(l=>l.datasetIndex===t?n:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){const r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),Ps.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ub(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete fd[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,r=this.platform,s=(i,o)=>{r.addEventListener(this,i,o),t[i]=o},n=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Pe(this.options.events,i=>s(i,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,r=this.platform,s=(c,d)=>{r.addEventListener(this,c,d),t[c]=d},n=(c,d)=>{t[c]&&(r.removeEventListener(this,c,d),delete t[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{n("attach",l),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,n("resize",i),this._stop(),this._resize(0,0),s("attach",l)},r.isAttached(this.canvas)?l():o()}unbindEvents(){Pe(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},Pe(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,s){const n=s?"set":"remove";let i,o,l,c;for(r==="dataset"&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){o=t[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[n+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const r=this._active||[],s=t.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!cu(s,r)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,r))}notifyPlugins(t,r,s){return this._plugins.notify(this,t,r,s)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,s){const n=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(r,t),l=s?t:i(t,r);o.length&&this.updateHoverStyle(o,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(t,r){const s={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},n=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const i=this._handleEvent(t,r,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(i||s.changed)&&this.render(),this}_handleEvent(t,r,s){const{_active:n=[],options:i}=this,o=r,l=this._getActiveElements(t,n,s,o),c=K7(t),d=W8(t,this._lastEvent,s,c);s&&(this._lastEvent=null,ze(i.onHover,[t,l,this],this),c&&ze(i.onClick,[t,l,this],this));const u=!cu(l,n);return(u||r)&&(this._active=l,this._updateHoverStyles(l,n,r)),this._lastEvent=d,u}_getActiveElements(t,r,s,n){if(t.type==="mouseout")return[];if(!s)return r;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,n)}},me(Js,"defaults",Je),me(Js,"instances",fd),me(Js,"overrides",pn),me(Js,"registry",ts),me(Js,"version",B8),me(Js,"getChart",Wb),Js);function qb(){return Pe(_l.instances,e=>e._plugins.invalidate())}function q8(e,t,r){const{startAngle:s,x:n,y:i,outerRadius:o,innerRadius:l,options:c}=t,{borderWidth:d,borderJoinStyle:u}=c,h=Math.min(d/o,Fr(s-r));if(e.beginPath(),e.arc(n,i,o-d/2,s+h/2,r-h/2),l>0){const m=Math.min(d/l,Fr(s-r));e.arc(n,i,l+d/2,r-m/2,s+m/2,!0)}else{const m=Math.min(d/2,o*Fr(s-r));if(u==="round")e.arc(n,i,m,r-Me/2,s+Me/2,!0);else if(u==="bevel"){const g=2*m*m,f=-g*Math.cos(r+Me/2)+n,x=-g*Math.sin(r+Me/2)+i,p=g*Math.cos(s+Me/2)+n,b=g*Math.sin(s+Me/2)+i;e.lineTo(f,x),e.lineTo(p,b)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}function K8(e,t,r){const{startAngle:s,pixelMargin:n,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=n/l;e.beginPath(),e.arc(i,o,l,s-d,r+d),c>n?(d=n/c,e.arc(i,o,c,r+d,s-d,!0)):e.arc(i,o,n,r+vt,s-vt),e.closePath(),e.clip()}function G8(e){return jp(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Y8(e,t,r,s){const n=G8(e.options.borderRadius),i=(r-t)/2,o=Math.min(i,s*t/2),l=c=>{const d=(r-Math.min(i,c))*s/2;return It(c,0,Math.min(i,d))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:It(n.innerStart,0,o),innerEnd:It(n.innerEnd,0,o)}}function kn(e,t,r,s){return{x:r+e*Math.cos(t),y:s+e*Math.sin(t)}}function gu(e,t,r,s,n,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,h=Math.max(t.outerRadius+s+r-d,0),m=u>0?u+s+r+d:0;let g=0;const f=n-c;if(s){const z=u>0?u-s:0,M=h>0?h-s:0,_=(z+M)/2,E=_!==0?f*_/(_+s):f;g=(f-E)/2}const x=Math.max(.001,f*h-r/Me)/h,p=(f-x)/2,b=c+p+g,y=n-p-g,{outerStart:v,outerEnd:w,innerStart:k,innerEnd:P}=Y8(t,m,h,y-b),C=h-v,N=h-w,S=b+v/C,R=y-w/N,F=m+k,I=m+P,V=b+k/F,G=y-P/I;if(e.beginPath(),i){const z=(S+R)/2;if(e.arc(o,l,h,S,z),e.arc(o,l,h,z,R),w>0){const O=kn(N,R,o,l);e.arc(O.x,O.y,w,R,y+vt)}const M=kn(I,y,o,l);if(e.lineTo(M.x,M.y),P>0){const O=kn(I,G,o,l);e.arc(O.x,O.y,P,y+vt,G+Math.PI)}const _=(y-P/m+(b+k/m))/2;if(e.arc(o,l,m,y-P/m,_,!0),e.arc(o,l,m,_,b+k/m,!0),k>0){const O=kn(F,V,o,l);e.arc(O.x,O.y,k,V+Math.PI,b-vt)}const E=kn(C,b,o,l);if(e.lineTo(E.x,E.y),v>0){const O=kn(C,S,o,l);e.arc(O.x,O.y,v,b-vt,S)}}else{e.moveTo(o,l);const z=Math.cos(S)*h+o,M=Math.sin(S)*h+l;e.lineTo(z,M);const _=Math.cos(R)*h+o,E=Math.sin(R)*h+l;e.lineTo(_,E)}e.closePath()}function Q8(e,t,r,s,n){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){gu(e,t,r,s,c,n);for(let d=0;d<i;++d)e.fill();isNaN(l)||(c=o+(l%jt||jt))}return gu(e,t,r,s,c,n),e.fill(),c}function X8(e,t,r,s,n){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:m,borderRadius:g}=c,f=c.borderAlign==="inner";if(!d)return;e.setLineDash(h||[]),e.lineDashOffset=m,f?(e.lineWidth=d*2,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let x=t.endAngle;if(i){gu(e,t,r,s,x,n);for(let p=0;p<i;++p)e.stroke();isNaN(l)||(x=o+(l%jt||jt))}f&&K8(e,t,x),c.selfJoin&&x-o>=Me&&g===0&&u!=="miter"&&q8(e,t,x),i||(gu(e,t,r,s,x,n),e.stroke())}class $n extends Gr{constructor(r){super();me(this,"circumference");me(this,"endAngle");me(this,"fullCircles");me(this,"innerRadius");me(this,"outerRadius");me(this,"pixelMargin");me(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.getProps(["x","y"],n),{angle:o,distance:l}=rN(i,{x:r,y:s}),{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),g=(this.options.spacing+this.options.borderWidth)/2,f=ye(m,d-c),x=pp(o,c,d)&&c!==d,p=f>=jt||x,b=da(l,u+g,h+g);return p&&b}getCenterPoint(r){const{x:s,y:n,startAngle:i,endAngle:o,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:d,spacing:u}=this.options,h=(i+o)/2,m=(l+c+u+d)/2;return{x:s+Math.cos(h)*m,y:n+Math.sin(h)*m}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:s,circumference:n}=this,i=(s.offset||0)/4,o=(s.spacing||0)/2,l=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>jt?Math.floor(n/jt):0,n===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const c=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(c)*i,Math.sin(c)*i);const d=1-Math.sin(Math.min(Me,n||0)),u=i*d;r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,Q8(r,this,u,o,l),X8(r,this,u,o,l),r.restore()}}me($n,"id","arc"),me($n,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),me($n,"defaultRoutes",{backgroundColor:"backgroundColor"}),me($n,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function IN(e,t,r=t){e.lineCap=ye(r.borderCapStyle,t.borderCapStyle),e.setLineDash(ye(r.borderDash,t.borderDash)),e.lineDashOffset=ye(r.borderDashOffset,t.borderDashOffset),e.lineJoin=ye(r.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ye(r.borderWidth,t.borderWidth),e.strokeStyle=ye(r.borderColor,t.borderColor)}function J8(e,t,r){e.lineTo(r.x,r.y)}function Z8(e){return e.stepped?vI:e.tension||e.cubicInterpolationMode==="monotone"?wI:J8}function RN(e,t,r={}){const s=e.length,{start:n=0,end:i=s-1}=r,{start:o,end:l}=t,c=Math.max(n,o),d=Math.min(i,l),u=n<o&&i<o||n>l&&i>l;return{count:s,start:c,loop:t.loop,ilen:d<c&&!u?s+d-c:d-c}}function eA(e,t,r,s){const{points:n,options:i}=t,{count:o,start:l,loop:c,ilen:d}=RN(n,r,s),u=Z8(i);let{move:h=!0,reverse:m}=s||{},g,f,x;for(g=0;g<=d;++g)f=n[(l+(m?d-g:g))%o],!f.skip&&(h?(e.moveTo(f.x,f.y),h=!1):u(e,x,f,m,i.stepped),x=f);return c&&(f=n[(l+(m?d:0))%o],u(e,x,f,m,i.stepped)),!!c}function tA(e,t,r,s){const n=t.points,{count:i,start:o,ilen:l}=RN(n,r,s),{move:c=!0,reverse:d}=s||{};let u=0,h=0,m,g,f,x,p,b;const y=w=>(o+(d?l-w:w))%i,v=()=>{x!==p&&(e.lineTo(u,p),e.lineTo(u,x),e.lineTo(u,b))};for(c&&(g=n[y(0)],e.moveTo(g.x,g.y)),m=0;m<=l;++m){if(g=n[y(m)],g.skip)continue;const w=g.x,k=g.y,P=w|0;P===f?(k<x?x=k:k>p&&(p=k),u=(h*u+w)/++h):(v(),e.lineTo(w,k),f=P,h=0,x=p=k),b=k}v()}function Eg(e){const t=e.options,r=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!r?tA:eA}function rA(e){return e.stepped?ZI:e.tension||e.cubicInterpolationMode==="monotone"?eR:qa}function sA(e,t,r,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,r,s)&&n.closePath()),IN(e,t.options),e.stroke(n)}function aA(e,t,r,s){const{segments:n,options:i}=t,o=Eg(t);for(const l of n)IN(e,i,l.style),e.beginPath(),o(e,t,l,{start:r,end:r+s-1})&&e.closePath(),e.stroke()}const nA=typeof Path2D=="function";function iA(e,t,r,s){nA&&!t.options.segment?sA(e,t,r,s):aA(e,t,r,s)}class zn extends Gr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;WI(this._points,s,t,n,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lR(this,this.options.segment))}first(){const t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){const t=this.segments,r=this.points,s=t.length;return s&&r[t[s-1].end]}interpolate(t,r){const s=this.options,n=t[r],i=this.points,o=nR(this,{property:r,start:n,end:n});if(!o.length)return;const l=[],c=rA(s);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:m}=o[d],g=i[h],f=i[m];if(g===f){l.push(g);continue}const x=Math.abs((n-g[r])/(f[r]-g[r])),p=c(g,f,x,s.stepped);p[r]=t[r],l.push(p)}return l.length===1?l[0]:l}pathSegment(t,r,s){return Eg(this)(t,this,r,s)}path(t,r,s){const n=this.segments,i=Eg(this);let o=this._loop;r=r||0,s=s||this.points.length-r;for(const l of n)o&=i(t,this,l,{start:r,end:r+s-1});return!!o}draw(t,r,s,n){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),iA(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}me(zn,"id","line"),me(zn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),me(zn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),me(zn,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Kb(e,t,r,s){const n=e.options,{[r]:i}=e.getProps([r],s);return Math.abs(t-i)<n.radius+n.hitRadius}class Io extends Gr{constructor(r){super();me(this,"parsed");me(this,"skip");me(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,s,n){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],n);return Math.pow(r-o,2)+Math.pow(s-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,s){return Kb(this,r,"x",s)}inYRange(r,s){return Kb(this,r,"y",s)}getCenterPoint(r){const{x:s,y:n}=this.getProps(["x","y"],r);return{x:s,y:n}}size(r){r=r||this.options||{};let s=r.radius||0;s=Math.max(s,s&&r.hoverRadius||0);const n=s&&r.borderWidth||0;return(s+n)*2}draw(r,s){const n=this.options;this.skip||n.radius<.1||!dl(this,s,this.size(n)/2)||(r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.fillStyle=n.backgroundColor,Sg(r,n,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}me(Io,"id","point"),me(Io,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),me(Io,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function AN(e,t){const{x:r,y:s,base:n,width:i,height:o}=e.getProps(["x","y","base","width","height"],t);let l,c,d,u,h;return e.horizontal?(h=o/2,l=Math.min(r,n),c=Math.max(r,n),d=s-h,u=s+h):(h=i/2,l=r-h,c=r+h,d=Math.min(s,n),u=Math.max(s,n)),{left:l,top:d,right:c,bottom:u}}function ha(e,t,r,s){return e?0:It(t,r,s)}function oA(e,t,r){const s=e.options.borderWidth,n=e.borderSkipped,i=dN(s);return{t:ha(n.top,i.top,0,r),r:ha(n.right,i.right,0,t),b:ha(n.bottom,i.bottom,0,r),l:ha(n.left,i.left,0,t)}}function lA(e,t,r){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,i=Xn(n),o=Math.min(t,r),l=e.borderSkipped,c=s||Se(n);return{topLeft:ha(!c||l.top||l.left,i.topLeft,0,o),topRight:ha(!c||l.top||l.right,i.topRight,0,o),bottomLeft:ha(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:ha(!c||l.bottom||l.right,i.bottomRight,0,o)}}function cA(e){const t=AN(e),r=t.right-t.left,s=t.bottom-t.top,n=oA(e,r/2,s/2),i=lA(e,r/2,s/2);return{outer:{x:t.left,y:t.top,w:r,h:s,radius:i},inner:{x:t.left+n.l,y:t.top+n.t,w:r-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Dm(e,t,r,s){const n=t===null,i=r===null,l=e&&!(n&&i)&&AN(e,s);return l&&(n||da(t,l.left,l.right))&&(i||da(r,l.top,l.bottom))}function dA(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function uA(e,t){e.rect(t.x,t.y,t.w,t.h)}function Fm(e,t,r={}){const s=e.x!==r.x?-t:0,n=e.y!==r.y?-t:0,i=(e.x+e.w!==r.x+r.w?t:0)-s,o=(e.y+e.h!==r.y+r.h?t:0)-n;return{x:e.x+s,y:e.y+n,w:e.w+i,h:e.h+o,radius:e.radius}}class Ro extends Gr{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:r,options:{borderColor:s,backgroundColor:n}}=this,{inner:i,outer:o}=cA(this),l=dA(o.radius)?hu:uA;t.save(),(o.w!==i.w||o.h!==i.h)&&(t.beginPath(),l(t,Fm(o,r,i)),t.clip(),l(t,Fm(i,-r,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),l(t,Fm(i,r)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,r,s){return Dm(this,t,r,s)}inXRange(t,r){return Dm(this,t,null,r)}inYRange(t,r){return Dm(this,null,t,r)}getCenterPoint(t){const{x:r,y:s,base:n,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(r+n)/2:r,y:i?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}me(Ro,"id","bar"),me(Ro,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),me(Ro,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Gb=(e,t)=>{let{boxHeight:r=t,boxWidth:s=t}=e;return e.usePointStyle&&(r=Math.min(r,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:r,itemHeight:Math.max(t,r)}},hA=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class Yb extends Gr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r,s){this.maxWidth=t,this.maxHeight=r,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let r=ze(t.generateLabels,[this.chart],this)||[];t.filter&&(r=r.filter(s=>t.filter(s,this.chart.data))),t.sort&&(r=r.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:t,ctx:r}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=Rt(s.font),i=n.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Gb(s,i);let d,u;r.font=n.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,n,l,c)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,r,s,n){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=n+l;let h=t;i.textAlign="left",i.textBaseline="middle";let m=-1,g=-u;return this.legendItems.forEach((f,x)=>{const p=s+r/2+i.measureText(f.text).width;(x===0||d[d.length-1]+p+2*l>o)&&(h+=u,d[d.length-(x>0?0:1)]=0,g+=u,m++),c[x]={left:0,top:g,row:m,width:p,height:n},d[d.length-1]+=p+l}),h}_fitCols(t,r,s,n){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-t;let h=l,m=0,g=0,f=0,x=0;return this.legendItems.forEach((p,b)=>{const{itemWidth:y,itemHeight:v}=mA(s,r,i,p,n);b>0&&g+v+2*l>u&&(h+=m+l,d.push({width:m,height:g}),f+=m+l,x++,m=g=0),c[b]={left:f,top:g,col:x,width:y,height:v},m=Math.max(m,y),g+=v+l}),h+=m,d.push({width:m,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:s,labels:{padding:n},rtl:i}}=this,o=Jn(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=_t(s,this.left+n,this.right-this.lineWidths[l]);for(const d of r)l!==d.row&&(l=d.row,c=_t(s,this.left+n,this.right-this.lineWidths[l])),d.top+=this.top+t+n,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+n}else{let l=0,c=_t(s,this.top+t+n,this.bottom-this.columnSizes[l].height);for(const d of r)d.col!==l&&(l=d.col,c=_t(s,this.top+t+n,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+n,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;vp(t,this),this._draw(),wp(t)}}_draw(){const{options:t,columnSizes:r,lineWidths:s,ctx:n}=this,{align:i,labels:o}=t,l=Je.color,c=Jn(t.rtl,this.left,this.width),d=Rt(o.font),{padding:u}=o,h=d.size,m=h/2;let g;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=d.string;const{boxWidth:f,boxHeight:x,itemHeight:p}=Gb(o,h),b=function(P,C,N){if(isNaN(f)||f<=0||isNaN(x)||x<0)return;n.save();const S=ye(N.lineWidth,1);if(n.fillStyle=ye(N.fillStyle,l),n.lineCap=ye(N.lineCap,"butt"),n.lineDashOffset=ye(N.lineDashOffset,0),n.lineJoin=ye(N.lineJoin,"miter"),n.lineWidth=S,n.strokeStyle=ye(N.strokeStyle,l),n.setLineDash(ye(N.lineDash,[])),o.usePointStyle){const R={radius:x*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:S},F=c.xPlus(P,f/2),I=C+m;cN(n,R,F,I,o.pointStyleWidth&&f)}else{const R=C+Math.max((h-x)/2,0),F=c.leftForLtr(P,f),I=Xn(N.borderRadius);n.beginPath(),Object.values(I).some(V=>V!==0)?hu(n,{x:F,y:R,w:f,h:x,radius:I}):n.rect(F,R,f,x),n.fill(),S!==0&&n.stroke()}n.restore()},y=function(P,C,N){ul(n,N.text,P,C+p/2,d,{strikethrough:N.hidden,textAlign:c.textAlign(N.textAlign)})},v=this.isHorizontal(),w=this._computeTitleHeight();v?g={x:_t(i,this.left+u,this.right-s[0]),y:this.top+u+w,line:0}:g={x:this.left+u,y:_t(i,this.top+w+u,this.bottom-r[0].height),line:0},pN(this.ctx,t.textDirection);const k=p+u;this.legendItems.forEach((P,C)=>{n.strokeStyle=P.fontColor,n.fillStyle=P.fontColor;const N=n.measureText(P.text).width,S=c.textAlign(P.textAlign||(P.textAlign=o.textAlign)),R=f+m+N;let F=g.x,I=g.y;c.setWidth(this.width),v?C>0&&F+R+u>this.right&&(I=g.y+=k,g.line++,F=g.x=_t(i,this.left+u,this.right-s[g.line])):C>0&&I+k>this.bottom&&(F=g.x=F+r[g.line].width+u,g.line++,I=g.y=_t(i,this.top+w+u,this.bottom-r[g.line].height));const V=c.x(F);if(b(V,I,P),F=oI(S,F+f+m,v?F+R:this.right,t.rtl),y(c.x(F),I,P),v)g.x+=R+u;else if(typeof P.text!="string"){const G=d.lineHeight;g.y+=ON(P,G)+u}else g.y+=k}),xN(this.ctx,t.textDirection)}drawTitle(){const t=this.options,r=t.title,s=Rt(r.font),n=Ir(r.padding);if(!r.display)return;const i=Jn(t.rtl,this.left,this.width),o=this.ctx,l=r.position,c=s.size/2,d=n.top+c;let u,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),u=this.top+d,h=_t(t.align,h,this.right-m);else{const f=this.columnSizes.reduce((x,p)=>Math.max(x,p.height),0);u=d+_t(t.align,this.top,this.bottom-f-t.labels.padding-this._computeTitleHeight())}const g=_t(l,h,h+m);o.textAlign=i.textAlign(yp(l)),o.textBaseline="middle",o.strokeStyle=r.color,o.fillStyle=r.color,o.font=s.string,ul(o,r.text,g,u,s)}_computeTitleHeight(){const t=this.options.title,r=Rt(t.font),s=Ir(t.padding);return t.display?r.lineHeight+s.height:0}_getLegendItemAt(t,r){let s,n,i;if(da(t,this.left,this.right)&&da(r,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(n=i[s],da(t,n.left,n.left+n.width)&&da(r,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const r=this.options;if(!pA(t.type,r))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,i=hA(n,s);n&&!i&&ze(r.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!i&&ze(r.onHover,[t,s,this],this)}else s&&ze(r.onClick,[t,s,this],this)}}function mA(e,t,r,s,n){const i=fA(s,e,t,r),o=gA(n,s,t.lineHeight);return{itemWidth:i,itemHeight:o}}function fA(e,t,r,s){let n=e.text;return n&&typeof n!="string"&&(n=n.reduce((i,o)=>i.length>o.length?i:o)),t+r.size/2+s.measureText(n).width}function gA(e,t,r){let s=e;return typeof t.text!="string"&&(s=ON(t,r)),s}function ON(e,t){const r=e.text?e.text.length:0;return t*r}function pA(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var LN={id:"legend",_element:Yb,start(e,t,r){const s=e.legend=new Yb({ctx:e.ctx,options:r,chart:e});Sr.configure(e,s,r),Sr.addBox(e,s)},stop(e){Sr.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,r){const s=e.legend;Sr.configure(e,s,r),s.options=r},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,r){const s=t.datasetIndex,n=r.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:r,pointStyle:s,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(r?0:void 0),u=Ir(d.borderWidth);return{text:t[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:s||d.pointStyle,rotation:d.rotation,textAlign:n||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class MN extends Gr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,r){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=r;const n=ct(s.text)?s.text.length:1;this._padding=Ir(s.padding);const i=n*Rt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:r,left:s,bottom:n,right:i,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=_t(l,s,i),h=r+t,d=i-s):(o.position==="left"?(u=s+t,h=_t(l,n,r),c=Me*-.5):(u=i-t,h=_t(l,r,n),c=Me*.5),d=n-r),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const t=this.ctx,r=this.options;if(!r.display)return;const s=Rt(r.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);ul(t,r.text,0,0,s,{color:r.color,maxWidth:c,rotation:d,textAlign:yp(r.align),textBaseline:"middle",translation:[o,l]})}}function xA(e,t){const r=new MN({ctx:e.ctx,options:t,chart:e});Sr.configure(e,r,t),Sr.addBox(e,r),e.titleBlock=r}var DN={id:"title",_element:MN,start(e,t,r){xA(e,r)},stop(e){const t=e.titleBlock;Sr.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,r){const s=e.titleBlock;Sr.configure(e,s,r),s.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ji={average(e){if(!e.length)return!1;let t,r,s=new Set,n=0,i=0;for(t=0,r=e.length;t<r;++t){const l=e[t].element;if(l&&l.hasValue()){const c=l.tooltipPosition();s.add(c.x),n+=c.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((l,c)=>l+c)/s.size,y:n/i}},nearest(e,t){if(!e.length)return!1;let r=t.x,s=t.y,n=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=e.length;i<o;++i){const c=e[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=kg(t,d);u<n&&(n=u,l=c)}}if(l){const c=l.tooltipPosition();r=c.x,s=c.y}return{x:r,y:s}}};function Zr(e,t){return t&&(ct(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ts(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function yA(e,t){const{element:r,datasetIndex:s,index:n}=t,i=e.getDatasetMeta(s).controller,{label:o,value:l}=i.getLabelAndValue(n);return{chart:e,label:o,parsed:i.getParsed(n),raw:e.data.datasets[s].data[n],formattedValue:l,dataset:i.getDataset(),dataIndex:n,datasetIndex:s,element:r}}function Qb(e,t){const r=e.chart.ctx,{body:s,footer:n,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=Rt(t.bodyFont),d=Rt(t.titleFont),u=Rt(t.footerFont),h=i.length,m=n.length,g=s.length,f=Ir(t.padding);let x=f.height,p=0,b=s.reduce((w,k)=>w+k.before.length+k.lines.length+k.after.length,0);if(b+=e.beforeBody.length+e.afterBody.length,h&&(x+=h*d.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){const w=t.displayColors?Math.max(l,c.lineHeight):c.lineHeight;x+=g*w+(b-g)*c.lineHeight+(b-1)*t.bodySpacing}m&&(x+=t.footerMarginTop+m*u.lineHeight+(m-1)*t.footerSpacing);let y=0;const v=function(w){p=Math.max(p,r.measureText(w).width+y)};return r.save(),r.font=d.string,Pe(e.title,v),r.font=c.string,Pe(e.beforeBody.concat(e.afterBody),v),y=t.displayColors?o+2+t.boxPadding:0,Pe(s,w=>{Pe(w.before,v),Pe(w.lines,v),Pe(w.after,v)}),y=0,r.font=u.string,Pe(e.footer,v),r.restore(),p+=f.width,{width:p,height:x}}function bA(e,t){const{y:r,height:s}=t;return r<s/2?"top":r>e.height-s/2?"bottom":"center"}function vA(e,t,r,s){const{x:n,width:i}=s,o=r.caretSize+r.caretPadding;if(e==="left"&&n+i+o>t.width||e==="right"&&n-i-o<0)return!0}function wA(e,t,r,s){const{x:n,width:i}=r,{width:o,chartArea:{left:l,right:c}}=e;let d="center";return s==="center"?d=n<=(l+c)/2?"left":"right":n<=i/2?d="left":n>=o-i/2&&(d="right"),vA(d,e,t,r)&&(d="center"),d}function Xb(e,t,r){const s=r.yAlign||t.yAlign||bA(e,r);return{xAlign:r.xAlign||t.xAlign||wA(e,t,r,s),yAlign:s}}function jA(e,t){let{x:r,width:s}=e;return t==="right"?r-=s:t==="center"&&(r-=s/2),r}function kA(e,t,r){let{y:s,height:n}=e;return t==="top"?s+=r:t==="bottom"?s-=n+r:s-=n/2,s}function Jb(e,t,r,s){const{caretSize:n,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=r,d=n+i,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:g}=Xn(o);let f=jA(t,l);const x=kA(t,c,d);return c==="center"?l==="left"?f+=d:l==="right"&&(f-=d):l==="left"?f-=Math.max(u,m)+n:l==="right"&&(f+=Math.max(h,g)+n),{x:It(f,0,s.width-t.width),y:It(x,0,s.height-t.height)}}function fc(e,t,r){const s=Ir(r.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function Zb(e){return Zr([],Ts(e))}function NA(e,t,r){return bn(e,{tooltip:t,tooltipItems:r,type:"tooltip"})}function ev(e,t){const r=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return r?e.override(r):e}const FN={beforeTitle:Es,title(e){if(e.length>0){const t=e[0],r=t.chart.data.labels,s=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return r[t.dataIndex]}return""},afterTitle:Es,beforeBody:Es,beforeLabel:Es,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const r=e.formattedValue;return Ee(r)||(t+=r),t},labelColor(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const r=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Es,afterBody:Es,beforeFooter:Es,footer:Es,afterFooter:Es};function Vt(e,t,r,s){const n=e[t].call(r,s);return typeof n>"u"?FN[t].call(r,s):n}class Pg extends Gr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const r=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&r.options.animation&&s.animations,i=new bN(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=NA(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){const{callbacks:s}=r,n=Vt(s,"beforeTitle",this,t),i=Vt(s,"title",this,t),o=Vt(s,"afterTitle",this,t);let l=[];return l=Zr(l,Ts(n)),l=Zr(l,Ts(i)),l=Zr(l,Ts(o)),l}getBeforeBody(t,r){return Zb(Vt(r.callbacks,"beforeBody",this,t))}getBody(t,r){const{callbacks:s}=r,n=[];return Pe(t,i=>{const o={before:[],lines:[],after:[]},l=ev(s,i);Zr(o.before,Ts(Vt(l,"beforeLabel",this,i))),Zr(o.lines,Vt(l,"label",this,i)),Zr(o.after,Ts(Vt(l,"afterLabel",this,i))),n.push(o)}),n}getAfterBody(t,r){return Zb(Vt(r.callbacks,"afterBody",this,t))}getFooter(t,r){const{callbacks:s}=r,n=Vt(s,"beforeFooter",this,t),i=Vt(s,"footer",this,t),o=Vt(s,"afterFooter",this,t);let l=[];return l=Zr(l,Ts(n)),l=Zr(l,Ts(i)),l=Zr(l,Ts(o)),l}_createItems(t){const r=this._active,s=this.chart.data,n=[],i=[],o=[];let l=[],c,d;for(c=0,d=r.length;c<d;++c)l.push(yA(this.chart,r[c]));return t.filter&&(l=l.filter((u,h,m)=>t.filter(u,h,m,s))),t.itemSort&&(l=l.sort((u,h)=>t.itemSort(u,h,s))),Pe(l,u=>{const h=ev(t.callbacks,u);n.push(Vt(h,"labelColor",this,u)),i.push(Vt(h,"labelPointStyle",this,u)),o.push(Vt(h,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,r){const s=this.options.setContext(this.getContext()),n=this._active;let i,o=[];if(!n.length)this.opacity!==0&&(i={opacity:0});else{const l=Ji[s.position].call(this,n,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=Qb(this,s),d=Object.assign({},l,c),u=Xb(this.chart,s,d),h=Jb(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,s,n){const i=this.getCaretPosition(t,s,n);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(t,r,s){const{xAlign:n,yAlign:i}=this,{caretSize:o,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=Xn(l),{x:m,y:g}=t,{width:f,height:x}=r;let p,b,y,v,w,k;return i==="center"?(w=g+x/2,n==="left"?(p=m,b=p-o,v=w+o,k=w-o):(p=m+f,b=p+o,v=w-o,k=w+o),y=p):(n==="left"?b=m+Math.max(c,u)+o:n==="right"?b=m+f-Math.max(d,h)-o:b=this.caretX,i==="top"?(v=g,w=v-o,p=b-o,y=b+o):(v=g+x,w=v+o,p=b+o,y=b-o),k=v),{x1:p,x2:b,x3:y,y1:v,y2:w,y3:k}}drawTitle(t,r,s){const n=this.title,i=n.length;let o,l,c;if(i){const d=Jn(s.rtl,this.x,this.width);for(t.x=fc(this,s.titleAlign,s),r.textAlign=d.textAlign(s.titleAlign),r.textBaseline="middle",o=Rt(s.titleFont),l=s.titleSpacing,r.fillStyle=s.titleColor,r.font=o.string,c=0;c<i;++c)r.fillText(n[c],d.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+l,c+1===i&&(t.y+=s.titleMarginBottom-l)}}_drawColorBox(t,r,s,n,i){const o=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=i,u=Rt(i.bodyFont),h=fc(this,"left",i),m=n.x(h),g=c<u.lineHeight?(u.lineHeight-c)/2:0,f=r.y+g;if(i.usePointStyle){const x={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},p=n.leftForLtr(m,d)+d/2,b=f+c/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,Sg(t,x,p,b),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Sg(t,x,p,b)}else{t.lineWidth=Se(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const x=n.leftForLtr(m,d),p=n.leftForLtr(n.xPlus(m,1),d-2),b=Xn(o.borderRadius);Object.values(b).some(y=>y!==0)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,hu(t,{x,y:f,w:d,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),hu(t,{x:p,y:f+1,w:d-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(x,f,d,c),t.strokeRect(x,f,d,c),t.fillStyle=o.backgroundColor,t.fillRect(p,f+1,d-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,r,s){const{body:n}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=Rt(s.bodyFont);let m=h.lineHeight,g=0;const f=Jn(s.rtl,this.x,this.width),x=function(N){r.fillText(N,f.x(t.x+g),t.y+m/2),t.y+=m+i},p=f.textAlign(o);let b,y,v,w,k,P,C;for(r.textAlign=o,r.textBaseline="middle",r.font=h.string,t.x=fc(this,p,s),r.fillStyle=s.bodyColor,Pe(this.beforeBody,x),g=l&&p!=="right"?o==="center"?d/2+u:d+2+u:0,w=0,P=n.length;w<P;++w){for(b=n[w],y=this.labelTextColors[w],r.fillStyle=y,Pe(b.before,x),v=b.lines,l&&v.length&&(this._drawColorBox(r,t,w,f,s),m=Math.max(h.lineHeight,c)),k=0,C=v.length;k<C;++k)x(v[k]),m=h.lineHeight;Pe(b.after,x)}g=0,m=h.lineHeight,Pe(this.afterBody,x),t.y-=i}drawFooter(t,r,s){const n=this.footer,i=n.length;let o,l;if(i){const c=Jn(s.rtl,this.x,this.width);for(t.x=fc(this,s.footerAlign,s),t.y+=s.footerMarginTop,r.textAlign=c.textAlign(s.footerAlign),r.textBaseline="middle",o=Rt(s.footerFont),r.fillStyle=s.footerColor,r.font=o.string,l=0;l<i;++l)r.fillText(n[l],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,r,s,n){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=t,{width:d,height:u}=s,{topLeft:h,topRight:m,bottomLeft:g,bottomRight:f}=Xn(n.cornerRadius);r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,r.lineWidth=n.borderWidth,r.beginPath(),r.moveTo(l+h,c),o==="top"&&this.drawCaret(t,r,s,n),r.lineTo(l+d-m,c),r.quadraticCurveTo(l+d,c,l+d,c+m),o==="center"&&i==="right"&&this.drawCaret(t,r,s,n),r.lineTo(l+d,c+u-f),r.quadraticCurveTo(l+d,c+u,l+d-f,c+u),o==="bottom"&&this.drawCaret(t,r,s,n),r.lineTo(l+g,c+u),r.quadraticCurveTo(l,c+u,l,c+u-g),o==="center"&&i==="left"&&this.drawCaret(t,r,s,n),r.lineTo(l,c+h),r.quadraticCurveTo(l,c,l+h,c),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){const r=this.chart,s=this.$animations,n=s&&s.x,i=s&&s.y;if(n||i){const o=Ji[t.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Qb(this,t),c=Object.assign({},o,this._size),d=Xb(r,t,c),u=Jb(t,c,d,r);(n._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){const r=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(r);const n={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Ir(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(t.save(),t.globalAlpha=s,this.drawBackground(i,t,n,r),pN(t,r.textDirection),i.y+=o.top,this.drawTitle(i,t,r),this.drawBody(i,t,r),this.drawFooter(i,t,r),xN(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){const s=this._active,n=t.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!cu(s,n),o=this._positionChanged(n,r);(i||o)&&(this._active=n,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,s=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,i=this._active||[],o=this._getActiveElements(t,i,r,s),l=this._positionChanged(o,t),c=r||!cu(o,i)||l;return c&&(this._active=o,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),c}_getActiveElements(t,r,s,n){const i=this.options;if(t.type==="mouseout")return[];if(!n)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(t,r){const{caretX:s,caretY:n,options:i}=this,o=Ji[i.position].call(this,t,r);return o!==!1&&(s!==o.x||n!==o.y)}}me(Pg,"positioners",Ji);var $N={id:"tooltip",_element:Pg,positioners:Ji,afterInit(e,t,r){r&&(e.tooltip=new Pg({chart:e,options:r}))},beforeUpdate(e,t,r){e.tooltip&&e.tooltip.initialize(r)},reset(e,t,r){e.tooltip&&e.tooltip.initialize(r)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const r={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",r)}},afterEvent(e,t){if(e.tooltip){const r=t.replay;e.tooltip.handleEvent(t.event,r,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:FN},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const SA=(e,t,r,s)=>(typeof t=="string"?(r=e.push(t)-1,s.unshift({index:r,label:t})):isNaN(t)&&(r=null),r);function CA(e,t,r,s){const n=e.indexOf(t);if(n===-1)return SA(e,t,r,s);const i=e.lastIndexOf(t);return n!==i?r:n}const _A=(e,t)=>e===null?null:It(Math.round(e),0,t);function tv(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class pu extends Ni{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const r=this._addedLabels;if(r.length){const s=this.getLabels();for(const{index:n,label:i}of r)s[n]===i&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Ee(t))return null;const s=this.getLabels();return r=isFinite(r)&&s[r]===t?r:CA(s,t,ye(r,t),this._addedLabels),_A(r,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),r||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,r=this.max,s=this.options.offset,n=[];let i=this.getLabels();i=t===0&&r===i.length-1?i:i.slice(t,r+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=r;o++)n.push({value:o});return n}getLabelForValue(t){return tv.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}me(pu,"id","category"),me(pu,"defaults",{ticks:{callback:tv}});function EA(e,t){const r=[],{bounds:n,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:m}=e,g=i||1,f=u-1,{min:x,max:p}=t,b=!Ee(o),y=!Ee(l),v=!Ee(d),w=(p-x)/(h+1);let k=sb((p-x)/f/g)*g,P,C,N,S;if(k<1e-14&&!b&&!y)return[{value:x},{value:p}];S=Math.ceil(p/k)-Math.floor(x/k),S>f&&(k=sb(S*k/f/g)*g),Ee(c)||(P=Math.pow(10,c),k=Math.ceil(k*P)/P),n==="ticks"?(C=Math.floor(x/k)*k,N=Math.ceil(p/k)*k):(C=x,N=p),b&&y&&i&&J7((l-o)/i,k/1e3)?(S=Math.round(Math.min((l-o)/k,u)),k=(l-o)/S,C=o,N=l):v?(C=b?o:C,N=y?l:N,S=d-1,k=(N-C)/S):(S=(N-C)/k,Eo(S,Math.round(S),k/1e3)?S=Math.round(S):S=Math.ceil(S));const R=Math.max(ab(k),ab(C));P=Math.pow(10,Ee(c)?R:c),C=Math.round(C*P)/P,N=Math.round(N*P)/P;let F=0;for(b&&(m&&C!==o?(r.push({value:o}),C<o&&F++,Eo(Math.round((C+F*k)*P)/P,o,rv(o,w,e))&&F++):C<o&&F++);F<S;++F){const I=Math.round((C+F*k)*P)/P;if(y&&I>l)break;r.push({value:I})}return y&&m&&N!==l?r.length&&Eo(r[r.length-1].value,l,rv(l,w,e))?r[r.length-1].value=l:r.push({value:l}):(!y||N===l)&&r.push({value:N}),r}function rv(e,t,{horizontal:r,minRotation:s}){const n=Ja(s),i=(r?Math.sin(n):Math.cos(n))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}class PA extends Ni{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,r){return Ee(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:r,maxDefined:s}=this.getUserBounds();let{min:n,max:i}=this;const o=c=>n=r?n:c,l=c=>i=s?i:c;if(t){const c=ps(n),d=ps(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(n===i){let c=i===0?1:Math.abs(i*.05);l(i+c),t||o(n-c)}this.min=n,this.max=i}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:r,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),r=r||11),r&&(n=Math.min(r,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,r=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,o=EA(n,i);return t.bounds==="ticks"&&Z7(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let r=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-r)/Math.max(t.length-1,1)/2;r-=n,s+=n}this._startValue=r,this._endValue=s,this._valueRange=s-r}getLabelForValue(t){return oN(t,this.chart.options.locale,this.options.ticks.format)}}class xu extends PA{determineDataLimits(){const{min:t,max:r}=this.getMinMax(!0);this.min=Tr(t)?t:0,this.max=Tr(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),r=t?this.width:this.height,s=Ja(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}me(xu,"id","linear"),me(xu,"defaults",{ticks:{callback:lN.formatters.numeric}});const Nh={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kt=Object.keys(Nh);function sv(e,t){return e-t}function av(e,t){if(Ee(t))return null;const r=e._adapter,{parser:s,round:n,isoWeekday:i}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Tr(o)||(o=typeof s=="string"?r.parse(o,s):r.parse(o)),o===null?null:(n&&(o=n==="week"&&(cl(i)||i===!0)?r.startOf(o,"isoWeek",i):r.startOf(o,n)),+o)}function nv(e,t,r,s){const n=Kt.length;for(let i=Kt.indexOf(e);i<n-1;++i){const o=Nh[Kt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((r-t)/(l*o.size))<=s)return Kt[i]}return Kt[n-1]}function TA(e,t,r,s,n){for(let i=Kt.length-1;i>=Kt.indexOf(r);i--){const o=Kt[i];if(Nh[o].common&&e._adapter.diff(n,s,o)>=t-1)return o}return Kt[r?Kt.indexOf(r):0]}function IA(e){for(let t=Kt.indexOf(e)+1,r=Kt.length;t<r;++t)if(Nh[Kt[t]].common)return Kt[t]}function iv(e,t,r){if(!r)e[t]=!0;else if(r.length){const{lo:s,hi:n}=xp(r,t),i=r[s]>=t?r[s]:r[n];e[i]=!0}}function RA(e,t,r,s){const n=e._adapter,i=+n.startOf(t[0].value,s),o=t[t.length-1].value;let l,c;for(l=i;l<=o;l=+n.add(l,1,s))c=r[l],c>=0&&(t[c].major=!0);return t}function ov(e,t,r){const s=[],n={},i=t.length;let o,l;for(o=0;o<i;++o)l=t[o],n[l]=o,s.push({value:l,major:!1});return i===0||!r?s:RA(e,s,n,r)}class yu extends Ni{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){const s=t.time||(t.time={}),n=this._adapter=new DR._date(t.adapters.date);n.init(r),_o(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:av(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,r=this._adapter,s=t.time.unit||"day";let{min:n,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(n=Math.min(n,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=Tr(n)&&!isNaN(n)?n:+r.startOf(Date.now(),s),i=Tr(i)&&!isNaN(i)?i:+r.endOf(Date.now(),s)+1,this.min=Math.min(n,i-1),this.max=Math.max(n+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],s=t[t.length-1]),{min:r,max:s}}buildTicks(){const t=this.options,r=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const i=this.min,o=this.max,l=aI(n,i,o);return this._unit=r.unit||(s.autoSkip?nv(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):TA(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:IA(this._unit),this.initOffsets(n),t.reverse&&l.reverse(),ov(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,s=0,n,i;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?r=1-n:r=(this.getDecimalForValue(t[1])-n)/2,i=this.getDecimalForValue(t[t.length-1]),t.length===1?s=i:s=(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=It(r,0,o),s=It(s,0,o),this._offsets={start:r,end:s,factor:1/(r+1+s)}}_generate(){const t=this._adapter,r=this.min,s=this.max,n=this.options,i=n.time,o=i.unit||nv(i.minUnit,r,s,this._getLabelCapacity(r)),l=ye(n.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=cl(c)||c===!0,u={};let h=r,m,g;if(d&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,d?"day":o),t.diff(s,r,o)>1e5*l)throw new Error(r+" and "+s+" are too far apart with stepSize of "+l+" "+o);const f=n.ticks.source==="data"&&this.getDataTimestamps();for(m=h,g=0;m<s;m=+t.add(m,l,o),g++)iv(u,m,f);return(m===s||n.bounds==="ticks"||g===1)&&iv(u,m,f),Object.keys(u).sort(sv).map(x=>+x)}getLabelForValue(t){const r=this._adapter,s=this.options.time;return s.tooltipFormat?r.format(t,s.tooltipFormat):r.format(t,s.displayFormats.datetime)}format(t,r){const n=this.options.time.displayFormats,i=this._unit,o=r||n[i];return this._adapter.format(t,o)}_tickFormatFunction(t,r,s,n){const i=this.options,o=i.ticks.callback;if(o)return ze(o,[t,r,s],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],m=s[r],g=d&&h&&m&&m.major;return this._adapter.format(t,n||(g?h:u))}generateTickLabels(t){let r,s,n;for(r=0,s=t.length;r<s;++r)n=t[r],n.label=this._tickFormatFunction(n.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const r=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+s)*r.factor)}getValueForPixel(t){const r=this._offsets,s=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const r=this.options.ticks,s=this.ctx.measureText(t).width,n=Ja(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(n),o=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:s*i+l*o,h:s*o+l*i}}_getLabelCapacity(t){const r=this.options.time,s=r.displayFormats,n=s[r.unit]||s.millisecond,i=this._tickFormatFunction(t,0,ov(this,[t],this._majorUnit),n),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],r,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(r=0,s=n.length;r<s;++r)t=t.concat(n[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let r,s;if(t.length)return t;const n=this.getLabels();for(r=0,s=n.length;r<s;++r)t.push(av(this,n[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return aN(t.sort(sv))}}me(yu,"id","time"),me(yu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function gc(e,t,r){let s=0,n=e.length-1,i,o,l,c;r?(t>=e[s].pos&&t<=e[n].pos&&({lo:s,hi:n}=Za(e,"pos",t)),{pos:i,time:l}=e[s],{pos:o,time:c}=e[n]):(t>=e[s].time&&t<=e[n].time&&({lo:s,hi:n}=Za(e,"time",t)),{time:i,pos:l}=e[s],{time:o,pos:c}=e[n]);const d=o-i;return d?l+(c-l)*(t-i)/d:l}class lv extends yu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(t);this._minPos=gc(r,this.min),this._tableRange=gc(r,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:r,max:s}=this,n=[],i=[];let o,l,c,d,u;for(o=0,l=t.length;o<l;++o)d=t[o],d>=r&&d<=s&&n.push(d);if(n.length<2)return[{time:r,pos:0},{time:s,pos:1}];for(o=0,l=n.length;o<l;++o)u=n[o+1],c=n[o-1],d=n[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const t=this.min,r=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(r)||s.length===1)&&s.push(r),s.sort((n,i)=>n-i)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const r=this.getDataTimestamps(),s=this.getLabelTimestamps();return r.length&&s.length?t=this.normalize(r.concat(s)):t=r.length?r:s,t=this._cache.all=t,t}getDecimalForValue(t){return(gc(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const r=this._offsets,s=this.getDecimalForPixel(t)/r.factor-r.end;return gc(this._table,s*this._tableRange+this._minPos,!0)}}me(lv,"id","timeseries"),me(lv,"defaults",yu.defaults);const zN="label";function cv(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function AA(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function BN(e,t){e.labels=t}function UN(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zN;const s=[];e.datasets=t.map(n=>{const i=e.datasets.find(o=>o[r]===n[r]);return!i||!n.data||s.includes(i)?{...n}:(s.push(i),Object.assign(i,n),i)})}function OA(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zN;const r={labels:[],datasets:[]};return BN(r,e.labels),UN(r,e.datasets,t),r}function LA(e,t){const{height:r=150,width:s=300,redraw:n=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...m}=e,g=j.useRef(null),f=j.useRef(null),x=()=>{g.current&&(f.current=new _l(g.current,{type:o,data:OA(l,i),options:c&&{...c},plugins:d}),cv(t,f.current))},p=()=>{cv(t,null),f.current&&(f.current.destroy(),f.current=null)};return j.useEffect(()=>{!n&&f.current&&c&&AA(f.current,c)},[n,c]),j.useEffect(()=>{!n&&f.current&&BN(f.current.config.data,l.labels)},[n,l.labels]),j.useEffect(()=>{!n&&f.current&&l.datasets&&UN(f.current.config.data,l.datasets,i)},[n,l.datasets]),j.useEffect(()=>{f.current&&(n?(p(),setTimeout(x)):f.current.update(h))},[n,c,l.labels,l.datasets,h]),j.useEffect(()=>{f.current&&(p(),setTimeout(x))},[o]),j.useEffect(()=>(x(),()=>p()),[]),We.createElement("canvas",{ref:g,role:"img",height:r,width:s,...m},u)}const MA=j.forwardRef(LA);function VN(e,t){return _l.register(t),j.forwardRef((r,s)=>We.createElement(MA,{...r,ref:s,type:e}))}const HN=VN("line",hd),DA=VN("bar",ud),Ao=se("analytics/fetchAnalytics",async(e="30d",{rejectWithValue:t})=>{var r,s,n;try{const i=await Z.get(`/analytics?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch analytics data")}}),Oo=se("analytics/fetchRevenueTrend",async(e="30d",{rejectWithValue:t})=>{var r,s,n;try{const i=await Z.get(`/analytics/revenue-trend?timeRange=${e}`);return((r=i.data)==null?void 0:r.data)||i.data}catch(i){return t(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch revenue trend data")}}),FA={metrics:{revenue:{current:0,previous:0,growth:0},orders:{current:0,previous:0,growth:0},customers:{current:0,previous:0,growth:0},products:{current:0,previous:0,growth:0}},orderStatusDistribution:[],topProducts:[],revenueTrend:[],timeRange:"30d",period:{current:{start:null,end:null},previous:{start:null,end:null}},isLoading:!1,error:null},$A=rr({name:"analytics",initialState:FA,reducers:{clearError:e=>{e.error=null},setTimeRange:(e,t)=>{e.timeRange=t.payload}},extraReducers:e=>{e.addCase(Ao.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ao.fulfilled,(t,r)=>{t.isLoading=!1,t.metrics=r.payload.metrics,t.orderStatusDistribution=r.payload.orderStatusDistribution,t.topProducts=r.payload.topProducts,t.timeRange=r.payload.timeRange,t.period=r.payload.period}).addCase(Ao.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Oo.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Oo.fulfilled,(t,r)=>{t.isLoading=!1,t.revenueTrend=r.payload}).addCase(Oo.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),zA=$A.reducer;_l.register(pu,xu,Io,zn,Ro,DN,$N,LN,$n);const BA=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(p=>p.auth),{metrics:s,orderStatusDistribution:n,topProducts:i,revenueTrend:o,isLoading:l}=ne(p=>p.analytics),[c,d]=j.useState("30d");j.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&(t(Ao(c)),t(Oo(c)))},[t,r,c]);const u=p=>{d(p),t(Ao(p)),t(Oo(p))},h=p=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(p),m=p=>p>=0?"text-green-600":"text-red-600",g=p=>p>=0?Os:pg,f=({title:p,value:b,growth:y,icon:v,color:w="blue"})=>{const k=g(y),P=m(y);return a.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:p}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:b}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsx(k,{className:`h-4 w-4 mr-1 ${P}`}),a.jsxs("span",{className:`text-sm font-medium ${P}`,children:[y>=0?"+":"",y.toFixed(1),"%"]}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminAnalytics","vsPreviousPeriod")})]})]}),a.jsx("div",{className:`p-3 rounded-lg bg-${w}-100 dark:bg-${w}-900/20`,children:a.jsx(v,{className:`h-6 w-6 text-${w}-600 dark:text-${w}-400`})})]})})},x=[{value:"7d",label:e("adminAnalytics","last7Days")},{value:"30d",label:e("adminAnalytics","last30Days")},{value:"90d",label:e("adminAnalytics","last90Days")},{value:"1y",label:e("adminAnalytics","lastYear")}];return(r==null?void 0:r.role)!=="ADMIN"?a.jsxs(oe,{children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage","accessDenied")})})}),a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage","accessDenied")}),a.jsx("p",{className:"text-gray-600",children:e("adminPage","noPermission")})]})})})]}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminAnalytics","analyticsDashboard")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminAnalytics","businessInsights")})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[a.jsx("select",{value:c,onChange:p=>u(p.target.value),className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:x.map(p=>a.jsx("option",{value:p.value,children:p.label},p.value))}),a.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(bs,{className:"h-4 w-4 mr-2"}),e("adminAnalytics","export")]})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 mb-10",children:l?a.jsxs("div",{className:"col-span-full flex items-center justify-center py-12",children:[a.jsx(Tt,{className:"h-8 w-8 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics","loading")})]}):a.jsxs(a.Fragment,{children:[a.jsx(f,{title:e("adminAnalytics","totalRevenue"),value:h(s.revenue.current),previous:s.revenue.previous,growth:s.revenue.growth,icon:hh,color:"green"}),a.jsx(f,{title:e("adminAnalytics","totalOrders"),value:s.orders.current.toLocaleString(),previous:s.orders.previous,growth:s.orders.growth,icon:_r,color:"blue"}),a.jsx(f,{title:e("adminAnalytics","totalCustomers"),value:s.customers.current.toLocaleString(),previous:s.customers.previous,growth:s.customers.growth,icon:fn,color:"purple"}),a.jsx(f,{title:e("adminAnalytics","totalProducts"),value:s.products.current,previous:s.products.previous,growth:s.products.growth,icon:we,color:"indigo"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics","revenueTrend")})}),a.jsx("div",{className:"p-6",children:l?a.jsx("div",{className:"h-80 flex items-center justify-center",children:a.jsx(Tt,{className:"h-8 w-8 animate-spin text-blue-600"})}):o!=null&&o.dailyRevenue&&o.dailyRevenue.length>0?a.jsx("div",{className:"h-80",children:a.jsx(HN,{data:{labels:o.dailyRevenue.map(p=>new Date(p.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminAnalytics","revenue"),data:o.dailyRevenue.map(p=>parseFloat(p.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:p=>h(p.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:p=>h(p)}}}}})}):a.jsx("div",{className:"h-80 flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-lg",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Os,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("adminAnalytics","noRevenueData")})]})})})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics","orderStatusDistribution")})}),a.jsx("div",{className:"p-6",children:l?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(Tt,{className:"h-6 w-6 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics","loading")})]}):n&&n.length>0?a.jsx("div",{className:"h-80",children:a.jsx(DA,{data:{labels:n.map(p=>({DELIVERED:e("adminAnalytics","delivered"),SHIPPED:e("adminAnalytics","shipped"),PROCESSING:e("adminAnalytics","processing"),PENDING:e("adminAnalytics","pending"),CANCELLED:e("adminAnalytics","cancelled")})[p.status]||p.status),datasets:[{label:e("adminAnalytics","orders"),data:n.map(p=>p.count||0),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(245, 158, 11, 0.8)","rgba(156, 163, 175, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(59, 130, 246)","rgb(245, 158, 11)","rgb(156, 163, 175)","rgb(239, 68, 68)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:p=>`${p.parsed.y} ${e("adminAnalytics","orders").toLowerCase()}`}}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}}})}):a.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:e("adminAnalytics","noData")})})]})]}),a.jsx("div",{className:"mt-8",children:a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminAnalytics","topPerformingProducts")})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics","product")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics","category")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics","sales")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics","revenue")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminAnalytics","growth")})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l?a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Tt,{className:"h-6 w-6 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:e("adminAnalytics","loading")})]})})}):i.length>0?i.map((p,b)=>{var y,v,w,k,P;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:((y=p.product)==null?void 0:y.name)||e("adminAnalytics","unknownProduct")}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:((w=(v=p.product)==null?void 0:v.category)==null?void 0:w.name)||e("adminAnalytics","unknownCategory")}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:((k=p._sum)==null?void 0:k.quantity)||0}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:h(((P=p._sum)==null?void 0:P.price)||0)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:e("adminAnalytics","topPerformer")})})]},p.productId||b)}):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500 dark:text-gray-400",children:e("adminAnalytics","noProducts")})})})]})})})]})})]})})]})})},UA=()=>{const{t:e}=de(),{user:t}=ne(w=>w.auth),[r,s]=j.useState([]),[n,i]=j.useState(!0),[o,l]=j.useState(""),[c,d]=j.useState(""),[u,h]=j.useState(null),[m,g]=j.useState({page:1,limit:20,total:0,pages:0}),f=async(w=1,k="",P="")=>{var C,N,S;try{i(!0);const R=new URLSearchParams({page:w.toString(),limit:"20"});k&&R.append("search",k),P&&R.append("status",P);const F=await Z.get("/customers?${params","toString()}");console.log("Customers API response:",F),console.log("Response data:",F.data),console.log("Customers array:",((C=F.data)==null?void 0:C.customers)||F.customers),s(((N=F.data)==null?void 0:N.customers)||F.customers||[]),g(((S=F.data)==null?void 0:S.pagination)||F.pagination||{page:1,limit:20,total:0,pages:0})}catch(R){console.error("Error fetching customers:",R),s([]),g({page:1,limit:20,total:0,pages:0})}finally{i(!1)}};j.useEffect(()=>{(t==null?void 0:t.role)==="ADMIN"&&f()},[t]),j.useEffect(()=>{if((t==null?void 0:t.role)==="ADMIN"){const w=setTimeout(()=>{f(1,o,c)},300);return()=>clearTimeout(w)}},[o,c,t]);const x=w=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(w),p=w=>new Date(w).toLocaleDateString("is-IS"),b=w=>({active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",vip:"bg-purple-100 text-purple-800",new:"bg-blue-100 text-blue-800"})[w]||"bg-gray-100 text-gray-800",y=w=>{l(w.target.value)},v=w=>{d(w.target.value)};return(t==null?void 0:t.role)!=="ADMIN"?a.jsxs(oe,{children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:e("adminPage","accessDenied")})})}),a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("adminPage","accessDenied")}),a.jsx("p",{className:"text-gray-600",children:e("adminPage","noPermission")})]})})})]}):a.jsxs(oe,{children:[a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminCustomers","customerManagement")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminCustomers","manageCustomerInfo")})]}),a.jsx("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:a.jsxs("button",{className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(bs,{className:"h-4 w-4 mr-2"}),e("adminCustomers","export")]})})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:e("adminCustomers","searchCustomers"),value:o,onChange:y,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),a.jsxs("select",{value:c,onChange:v,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[a.jsx("option",{value:"",children:e("adminCustomers","allStatus")}),a.jsx("option",{value:"active",children:e("adminCustomers","active")}),a.jsx("option",{value:"inactive",children:e("adminCustomers","inactive")}),a.jsx("option",{value:"vip",children:e("adminCustomers","vip")}),a.jsx("option",{value:"new",children:e("adminCustomers","new")})]}),a.jsxs("div",{className:"flex items-center justify-center bg-gray-50 dark:bg-gray-700 rounded-md px-4 py-2",children:[a.jsx(fn,{className:"h-5 w-5 text-gray-400 dark:text-gray-500 mr-2"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("adminCustomers.customersCount",{filtered:r.length,total:m.total})})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminCustomers","customerList")})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers","customer")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers","contact")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers","orders")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers","totalSpent")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers","status")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers","lastOrder")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e("adminCustomers","actions")})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Tt,{className:"h-6 w-6 animate-spin text-gray-400 mr-2"}),a.jsx("span",{className:"text-gray-500",children:e("common","loading")})]})})}):r.map(w=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:w.name.split(" ").map(k=>k[0]).join("")})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:w.name}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",w.id]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ms,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),w.email]}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx(mn,{className:"h-4 w-4 text-gray-400 dark:text-gray-500 mr-2"}),w.phone]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:w.totalOrders}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:x(w.totalSpent)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${b(w.status)}`,children:w.status.toUpperCase()})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:p(w.lastOrder)}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx("button",{onClick:()=>h(w),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 mr-3 transition-colors duration-200",children:a.jsx(Yt,{className:"h-4 w-4"})}),a.jsx("button",{className:"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300 transition-colors duration-200",children:a.jsx(ak,{className:"h-4 w-4"})})]})]},w.id))})]})})]}),!n&&r.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(fn,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminCustomers","noCustomersFound")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("adminCustomers","adjustSearchCriteria")})]})]})})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e("adminCustomers","customerDetails")}),a.jsxs("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-gray-600",children:[a.jsx("span",{className:"sr-only",children:"Close"}),a.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"h-16 w-16 rounded-full bg-gray-300 flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-medium text-gray-700",children:u.name.split(" ").map(w=>w[0]).join("")})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:u.name}),a.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers.customerSince",{date:p(u.joinDate)})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers","contactInformation")}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ms,{className:"h-4 w-4 text-gray-400 mr-3"}),a.jsx("span",{className:"text-sm text-gray-900",children:u.email})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(mn,{className:"h-4 w-4 text-gray-400 mr-3"}),a.jsx("span",{className:"text-sm text-gray-900",children:u.phone})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-4 w-4 text-gray-400 mr-3"}),a.jsx("span",{className:"text-sm text-gray-900",children:u.address})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers","orderStatistics")}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers","totalOrders")}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.totalOrders})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:e("adminCustomers","totalSpent")}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x(u.totalSpent)})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:e("adminCustomers","status")}),a.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${b(u.status)}`,children:u.status.toUpperCase()})]})]})]})})]})},gd=se("reports/fetchReports",async({reportType:e,timeRange:t,startDate:r,endDate:s},{rejectWithValue:n})=>{var i,o,l,c,d,u;try{const h=new URLSearchParams({timeRange:t,...r&&{startDate:r},...s&&{endDate:s}});let m;switch(e){case"sales":return m=await Z.get(`/reports/sales?${h}`),{sales:((i=m.data)==null?void 0:i.data)||m.data};case"products":return m=await Z.get(`/reports/inventory?${h}`),{products:((o=m.data)==null?void 0:o.data)||m.data};case"customers":return m=await Z.get(`/reports/customers?${h}`),{customers:((l=m.data)==null?void 0:l.data)||m.data};case"orders":return m=await Z.get(`/analytics?timeRange=${t}`),{orders:((c=m.data)==null?void 0:c.data)||m.data};default:return{}}}catch(h){return n(((u=(d=h.response)==null?void 0:d.data)==null?void 0:u.message)||"Failed to fetch reports data")}}),$m=se("reports/fetchSalesReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:s})=>{var n,i,o;try{const l=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await Z.get(`/reports/sales?${l}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(l){return s(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch sales report")}}),zm=se("reports/fetchProductsReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:s})=>{var n,i,o;try{const l=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await Z.get(`/reports/products?${l}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(l){return s(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch products report")}}),Bm=se("reports/fetchCustomersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:s})=>{var n,i,o;try{const l=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await Z.get(`/reports/customers?${l}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(l){return s(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch customers report")}}),Um=se("reports/fetchOrdersReport",async({timeRange:e,startDate:t,endDate:r},{rejectWithValue:s})=>{var n,i,o;try{const l=new URLSearchParams({timeRange:e,...t&&{startDate:t},...r&&{endDate:r}}),c=await Z.get(`/reports/orders?${l}`);return((n=c.data)==null?void 0:n.data)||c.data}catch(l){return s(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to fetch orders report")}}),VA={sales:{totalRevenue:0,totalOrders:0,averageOrderValue:0,growthRate:0,dailySales:[]},products:{totalProducts:0,activeProducts:0,outOfStock:0,topSelling:[],categoryBreakdown:[]},customers:{totalCustomers:0,newCustomers:0,returningCustomers:0,averageOrderFrequency:0,customerSegments:[],topCustomers:[]},orders:{totalOrders:0,completedOrders:0,pendingOrders:0,cancelledOrders:0,averageProcessingTime:0,deliveryMethods:[],orderStatusTrend:[]},currentReport:"sales",timeRange:"last30days",dateRange:{start:null,end:null},isLoading:!1,error:null},WN=rr({name:"reports",initialState:VA,reducers:{clearError:e=>{e.error=null},setCurrentReport:(e,t)=>{e.currentReport=t.payload},setTimeRange:(e,t)=>{e.timeRange=t.payload},setDateRange:(e,t)=>{e.dateRange=t.payload}},extraReducers:e=>{e.addCase(gd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(gd.fulfilled,(t,r)=>{t.isLoading=!1;const{sales:s,products:n,customers:i,orders:o}=r.payload;s&&(t.sales=s),n&&(t.products=n),i&&(t.customers=i),o&&(t.orders=o)}).addCase(gd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase($m.pending,t=>{t.isLoading=!0,t.error=null}).addCase($m.fulfilled,(t,r)=>{t.isLoading=!1,t.sales=r.payload}).addCase($m.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(zm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(zm.fulfilled,(t,r)=>{t.isLoading=!1,t.products=r.payload}).addCase(zm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Bm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Bm.fulfilled,(t,r)=>{t.isLoading=!1,t.customers=r.payload}).addCase(Bm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Um.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Um.fulfilled,(t,r)=>{t.isLoading=!1,t.orders=r.payload}).addCase(Um.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),{setCurrentReport:HA,setTimeRange:WA,setDateRange:dv}=WN.actions,qA=WN.reducer;_l.register(pu,xu,Io,zn,Ro,DN,$N,LN,$n);const KA=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(N=>N.auth),[s,n]=j.useState(!1),{sales:i,products:o,customers:l,orders:c,currentReport:d,timeRange:u,dateRange:h,isLoading:m}=ne(N=>N.reports);j.useEffect(()=>{(r==null?void 0:r.role)==="ADMIN"&&t(gd({reportType:d,timeRange:u,startDate:h.start,endDate:h.end}))},[t,r,d,u,h]);const g=N=>new Intl.NumberFormat("is-IS",{style:"currency",currency:"ISK"}).format(N),f=N=>new Date(N).toLocaleDateString("is-IS"),x=N=>N>=0?a.jsx(Os,{className:"h-4 w-4 text-green-500"}):a.jsx(pg,{className:"h-4 w-4 text-red-500"}),p=N=>N>=0?"text-green-600":"text-red-600",b=N=>{console.log(`Exporting ${d} report as ${N}`);const S={sales:i,products:o,customers:l,orders:c}[d],R=JSON.stringify(S,null,2),F="data:application/json;charset=utf-8,"+encodeURIComponent(R),I=`${d}_report_${new Date().toISOString().split("T")[0]}.${N}`,V=document.createElement("a");V.setAttribute("href",F),V.setAttribute("download",I),V.click()},y=({title:N,value:S,subtitle:R,icon:F,growth:I,color:V="blue"})=>a.jsx("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:N}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-1",children:S}),R&&a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:R}),I!==void 0&&a.jsxs("div",{className:"flex items-center mt-2",children:[x(I),a.jsxs("span",{className:`text-sm font-medium ml-1 ${p(I)}`,children:[I>=0?"+":"",I,"%"]}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-1",children:e("adminReports","vsPreviousPeriod")})]})]}),a.jsx("div",{className:`p-3 rounded-lg bg-${V}-100 dark:bg-${V}-900/20`,children:a.jsx(F,{className:`h-6 w-6 text-${V}-600 dark:text-${V}-400`})})]})}),v=({title:N,children:S,actions:R})=>a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-600",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:N}),R&&a.jsx("div",{className:"flex items-center space-x-2",children:R})]})}),a.jsx("div",{className:"p-8",children:S})]}),w=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(y,{title:e("adminReports","totalRevenue"),value:g(i.totalRevenue||0),icon:hh,growth:i.growthRate,color:"green"}),a.jsx(y,{title:e("adminReports","totalOrders"),value:(i.totalOrders||0).toLocaleString(),icon:_r,growth:8.3,color:"blue"}),a.jsx(y,{title:e("adminReports","averageOrderValue"),value:g(i.averageOrderValue||0),icon:Os,growth:5.2,color:"purple"}),a.jsx(y,{title:e("adminReports","growthRate"),value:`${i.growthRate||0}%`,icon:tk,growth:i.growthRate,color:"indigo"})]}),a.jsx(v,{title:e("adminReports","dailySalesTrend"),actions:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:a.jsx(Yt,{className:"h-4 w-4"})}),a.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600",children:a.jsx(bs,{className:"h-4 w-4"})})]}),children:i.dailySales&&i.dailySales.length>0?a.jsx("div",{className:"h-80",children:a.jsx(HN,{data:{labels:i.dailySales.map(N=>new Date(N.date).toLocaleDateString("is-IS",{month:"short",day:"numeric"})),datasets:[{label:e("adminReports","revenue"),data:i.dailySales.map(N=>parseFloat(N.revenue)||0),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:N=>g(N.parsed.y)}}},scales:{y:{beginAtZero:!0,ticks:{callback:N=>g(N)}}}}})}):a.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500",children:e("adminReports","noData")})})]}),k=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(y,{title:e("adminReports","totalProducts"),value:o.totalProducts,icon:we,growth:15.2,color:"blue"}),a.jsx(y,{title:e("adminReports","activeProducts"),value:o.activeProducts,subtitle:`${Math.round(o.activeProducts/o.totalProducts*100)}% ${e("adminReports","ofTotal")}`,icon:gt,color:"green"}),a.jsx(y,{title:e("adminReports","outOfStock"),value:o.outOfStock,subtitle:`${Math.round(o.outOfStock/o.totalProducts*100)}% ${e("adminReports","ofTotal")}`,icon:mt,color:"red"})]}),a.jsx(v,{title:e("adminReports","topSellingProducts"),children:a.jsx("div",{className:"space-y-4",children:o.topSelling.length>0?o.topSelling.map((N,S)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-blue-600",children:S+1})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[N.sales," sales"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:g(N.revenue)}),a.jsxs("div",{className:"flex items-center",children:[x(N.growth),a.jsxs("span",{className:`text-xs ml-1 ${p(N.growth)}`,children:["+",N.growth,"%"]})]})]})]},N.name)):a.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports","noData")})})}),a.jsx(v,{title:e("adminReports","revenueByCategory"),children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.categoryBreakdown.length>0?o.categoryBreakdown.map(N=>a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:N.category}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:N.count}),a.jsx("p",{className:"text-xs text-gray-500",children:e("adminReports","products")}),a.jsx("p",{className:"text-sm font-medium text-blue-600 mt-1",children:g(N.revenue)})]},N.category)):a.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports","noData")})})})]}),P=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(y,{title:e("adminReports","totalCustomers"),value:l.totalCustomers,icon:fn,growth:6.7,color:"blue"}),a.jsx(y,{title:e("adminReports","newCustomers"),value:l.newCustomers,subtitle:e("adminReports","thisPeriod"),icon:Os,growth:12.3,color:"green"}),a.jsx(y,{title:e("adminReports","avgOrderFrequency"),value:l.averageOrderFrequency,subtitle:e("adminReports","ordersPerCustomer"),icon:_r,growth:-2.1,color:"purple"})]}),a.jsx(v,{title:e("adminReports","customerSegmentation"),children:a.jsx("div",{className:"space-y-4",children:l.customerSegments.length>0?l.customerSegments.map(N=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full mr-3"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.segment})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${N.percentage}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:N.count}),a.jsxs("span",{className:"text-sm text-gray-500 w-12",children:[N.percentage,"%"]})]})]},N.segment)):a.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports","noData")})})}),a.jsx(v,{title:e("adminReports","topCustomersByRevenue"),children:a.jsx("div",{className:"space-y-4",children:l.topCustomers.length>0?l.topCustomers.map((N,S)=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-sm font-medium text-green-600",children:S+1})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[N.orders," ",e("adminReports","orders")]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:g(N.totalSpent)}),a.jsxs("p",{className:"text-xs text-gray-500",children:[e("adminReports","last"),": ",f(N.lastOrder)]})]})]},N.name)):a.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports","noData")})})})]}),C=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(y,{title:e("adminReports","totalOrders"),value:c.totalOrders,icon:_r,growth:8.3,color:"blue"}),a.jsx(y,{title:e("adminReports","completedOrders"),value:c.completedOrders,subtitle:`${Math.round(c.completedOrders/c.totalOrders*100)}% ${e("adminReports","completionRate")}`,icon:gt,growth:12.1,color:"green"}),a.jsx(y,{title:e("adminReports","pendingOrders"),value:c.pendingOrders,icon:ks,growth:-15.2,color:"yellow"}),a.jsx(y,{title:e("adminReports","avgProcessingTime"),value:`${c.averageProcessingTime} ${e("adminReports","days")}`,icon:Os,growth:-5.3,color:"purple"})]}),a.jsx(v,{title:e("adminReports","orderDistributionByDeliveryMethod"),children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:c.deliveryMethods.length>0?c.deliveryMethods.map(N=>a.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:N.method==="HOME_DELIVERY"?e("adminPage","homeDelivery"):e("ordersPage","pickup")}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:N.count}),a.jsxs("p",{className:"text-sm text-gray-500",children:[N.percentage,"% ",e("adminReports","ofTotalOrders")]})]},N.method)):a.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:e("adminReports","noData")})})}),a.jsx(v,{title:e("adminReports","orderStatusDistribution"),children:a.jsx("div",{className:"space-y-4",children:c.orderStatusTrend.length>0?c.orderStatusTrend.map(N=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-4 h-4 rounded-full mr-3 ${N.status==="delivered"?"bg-green-500":N.status==="shipped"?"bg-blue-500":N.status==="confirmed"?"bg-yellow-500":N.status==="pending"?"bg-orange-500":"bg-red-500"}`}),a.jsx("span",{className:"text-sm font-medium text-gray-900 capitalize",children:N.status})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-3",children:a.jsx("div",{className:`h-2 rounded-full ${N.status==="delivered"?"bg-green-500":N.status==="shipped"?"bg-blue-500":N.status==="confirmed"?"bg-yellow-500":N.status==="pending"?"bg-orange-500":"bg-red-500"}`,style:{width:`${N.count/c.totalOrders*100}%`}})}),a.jsx("span",{className:"text-sm text-gray-500 w-12",children:N.count}),a.jsx("div",{className:"flex items-center ml-2",children:N.trend==="up"?a.jsx(Os,{className:"h-4 w-4 text-green-500"}):N.trend==="down"?a.jsx(pg,{className:"h-4 w-4 text-red-500"}):a.jsx("div",{className:"h-4 w-4 bg-gray-400 rounded-full"})})]})]},N.status)):a.jsx("div",{className:"text-center py-8 text-gray-500",children:e("adminReports","noData")})})})]});return(r==null?void 0:r.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):m?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSidebar","reportsAnalytics")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSidebar","comprehensiveInsights")})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[a.jsxs("button",{onClick:()=>b("pdf"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(sk,{className:"h-4 w-4 mr-2"}),e("adminReports","exportPDF")]}),a.jsxs("button",{onClick:()=>b("csv"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(bs,{className:"h-4 w-4 mr-2"}),e("adminReports","exportCSV")]})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports","reportType")}),a.jsxs("select",{value:d,onChange:N=>t(HA(N.target.value)),className:"input w-full",children:[a.jsx("option",{value:"sales",children:e("adminReports","salesReport")}),a.jsx("option",{value:"products",children:e("adminReports","productsReport")}),a.jsx("option",{value:"customers",children:e("adminReports","customersReport")}),a.jsx("option",{value:"orders",children:e("adminReports","ordersReport")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports","timePeriod")}),a.jsxs("select",{value:u,onChange:N=>t(WA(N.target.value)),className:"input w-full",children:[a.jsx("option",{value:"last7days",children:e("adminReports","last7Days")}),a.jsx("option",{value:"last30days",children:e("adminReports","last30Days")}),a.jsx("option",{value:"last90days",children:e("adminReports","last90Days")}),a.jsx("option",{value:"lastyear",children:e("adminReports","lastYear")}),a.jsx("option",{value:"custom",children:e("adminReports","customRange")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports","startDate")}),a.jsx("input",{type:"date",value:h.start||"",onChange:N=>t(dv({...h,start:N.target.value})),className:"input w-full"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e("adminReports","endDate")}),a.jsx("input",{type:"date",value:h.end||"",onChange:N=>t(dv({...h,end:N.target.value})),className:"input w-full"})]})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4",children:[a.jsxs("button",{onClick:()=>{n(!0),setTimeout(()=>n(!1),1e3)},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[a.jsx(lt,{className:"h-4 w-4 mr-2"}),e("adminReports","refreshData")]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[a.jsx(al,{className:"h-4 w-4"}),a.jsxs("span",{children:["Last updated: ",new Date().toLocaleString("is-IS")]})]})]})]}),a.jsxs("div",{className:"space-y-8",children:[d==="sales"&&a.jsx(w,{}),d==="products"&&a.jsx(k,{}),d==="customers"&&a.jsx(P,{}),d==="orders"&&a.jsx(C,{})]})]})})]})})},GA=()=>{const{t:e}=de(),{user:t}=ne(_=>_.auth),[r,s]=j.useState(!0),[n,i]=j.useState([]),[o,l]=j.useState([]),[c,d]=j.useState(""),[u,h]=j.useState(""),[m,g]=j.useState(""),[f,x]=j.useState([]),[p,b]=j.useState(!1),[y,v]=j.useState({email:!0,push:!0,sms:!1,orderUpdates:!0,systemAlerts:!0,marketing:!1,securityAlerts:!0}),w=[{id:1,type:"order",priority:"high",title:"New Order Received",message:"Order #1234 has been placed by Jón Jónsson for ISK 4,500",timestamp:"2025-01-13T14:30:00Z",isRead:!1,isArchived:!1,actions:["view","process","archive"],metadata:{orderId:1234,customerName:"Jón Jónsson",amount:4500}},{id:2,type:"system",priority:"medium",title:"Low Stock Alert",message:"Vínflaska - Rauðvín is running low (5 items remaining)",timestamp:"2025-01-13T13:15:00Z",isRead:!0,isArchived:!1,actions:["view","restock","archive"],metadata:{productId:1,productName:"Vínflaska - Rauðvín",stockLevel:5}},{id:3,type:"payment",priority:"high",title:"Payment Failed",message:"Payment for Order #1231 failed. Customer needs to update payment method.",timestamp:"2025-01-13T12:45:00Z",isRead:!1,isArchived:!1,actions:["view","contact","archive"],metadata:{orderId:1231,customerName:"Anna Pétursdóttir",paymentMethod:"Credit Card"}},{id:4,type:"delivery",priority:"medium",title:"Delivery Completed",message:"Order #1228 has been successfully delivered to Magnús Guðmundsson",timestamp:"2025-01-13T11:20:00Z",isRead:!0,isArchived:!1,actions:["view","archive"],metadata:{orderId:1228,customerName:"Magnús Guðmundsson",deliveryTime:"11:20"}},{id:5,type:"security",priority:"high",title:"Suspicious Login Attempt",message:"Multiple failed login attempts detected for admin account",timestamp:"2025-01-13T10:30:00Z",isRead:!1,isArchived:!1,actions:["view","investigate","archive"],metadata:{ipAddress:"192.168.1.100",attempts:5,account:"admin"}},{id:6,type:"marketing",priority:"low",title:"New Customer Registration",message:"Sigrún Ólafsdóttir has registered for a new account",timestamp:"2025-01-13T09:15:00Z",isRead:!0,isArchived:!0,actions:["view","archive"],metadata:{customerId:456,customerName:"Sigrún Ólafsdóttir",registrationDate:"2025-01-13"}},{id:7,type:"system",priority:"medium",title:"Server Maintenance Scheduled",message:"Scheduled maintenance will occur tonight from 2:00 AM to 4:00 AM",timestamp:"2025-01-13T08:00:00Z",isRead:!0,isArchived:!1,actions:["view","archive"],metadata:{startTime:"2025-01-14T02:00:00Z",endTime:"2025-01-14T04:00:00Z",type:"scheduled"}},{id:8,type:"order",priority:"medium",title:"Order Cancelled",message:"Order #1225 has been cancelled by Einar Björnsson",timestamp:"2025-01-12T16:45:00Z",isRead:!0,isArchived:!1,actions:["view","refund","archive"],metadata:{orderId:1225,customerName:"Einar Björnsson",reason:"Customer requested"}}];j.useEffect(()=>{s(!0),setTimeout(()=>{i(w),l(w),s(!1)},1e3)},[]),j.useEffect(()=>{let _=n;c&&(_=_.filter(E=>E.title.toLowerCase().includes(c.toLowerCase())||E.message.toLowerCase().includes(c.toLowerCase()))),u&&(u==="unread"?_=_.filter(E=>!E.isRead):u==="read"?_=_.filter(E=>E.isRead):u==="archived"&&(_=_.filter(E=>E.isArchived))),m&&(_=_.filter(E=>E.type===m)),l(_)},[n,c,u,m,w]);const k=(_,E)=>{const O=`h-5 w-5 ${E==="high"?"text-red-500":E==="medium"?"text-yellow-500":"text-blue-500"}`;switch(_){case"order":return a.jsx(_r,{className:O});case"payment":return a.jsx(qs,{className:O});case"delivery":return a.jsx(we,{className:O});case"system":return a.jsx(fs,{className:O});case"security":return a.jsx(Fs,{className:O});case"marketing":return a.jsx(ms,{className:O});default:return a.jsx(Nn,{className:O})}},P=_=>{switch(_){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-blue-500 bg-blue-50";default:return"border-l-gray-500 bg-gray-50"}},C=_=>{const E=new Date(_),q=Math.floor((new Date-E)/(1e3*60));return q<1?"Just now":q<60?`${q}m ago`:q<1440?`${Math.floor(q/60)}h ago`:E.toLocaleDateString("is-IS")},N=_=>{i(E=>E.map(O=>O.id===_?{...O,isRead:!0}:O)),D.success(e("adminNotifications","notificationMarkedRead"))},S=_=>{i(E=>E.map(O=>O.id===_?{...O,isRead:!1}:O)),D.success(e("adminNotifications","notificationMarkedUnread"))},R=_=>{i(E=>E.map(O=>O.id===_?{...O,isArchived:!0}:O)),D.success(e("adminNotifications","notificationArchived"))},F=_=>{i(E=>E.map(O=>O.id===_?{...O,isArchived:!1}:O)),D.success(e("adminNotifications","notificationUnarchived"))},I=_=>{i(E=>E.filter(O=>O.id!==_)),D.success(e("adminNotifications","notificationDeleted"))},V=_=>{if(f.length===0){D.error(e("adminNotifications","selectNotificationsFirst"));return}switch(_){case"mark-read":i(E=>E.map(O=>f.includes(O.id)?{...O,isRead:!0}:O)),D.success(e("adminNotifications.bulkMarkedRead",{count:f.length}));break;case"mark-unread":i(E=>E.map(O=>f.includes(O.id)?{...O,isRead:!1}:O)),D.success(e("adminNotifications.bulkMarkedUnread",{count:f.length}));break;case"archive":i(E=>E.map(O=>f.includes(O.id)?{...O,isArchived:!0}:O)),D.success(e("adminNotifications.bulkArchived",{count:f.length}));break;case"delete":i(E=>E.filter(O=>!f.includes(O.id))),D.success(e("adminNotifications.bulkDeleted",{count:f.length}));break}x([])},G=()=>{f.length===o.length?x([]):x(o.map(_=>_.id))},z=n.filter(_=>!_.isRead&&!_.isArchived).length,M=n.filter(_=>_.isArchived).length;return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):r?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsxs(oe,{children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Nn,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mr-3"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminNotifications","title")}),a.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[e("adminNotifications.unreadCount",{count:z})," • ",e("adminNotifications.archivedCount",{count:M})," • ",e("adminNotifications.totalCount",{count:n.length})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[a.jsxs("button",{onClick:()=>b(!0),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(fs,{className:"h-4 w-4 mr-2"}),e("adminNotifications","settings")]}),a.jsxs("button",{onClick:()=>V("mark-read"),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(gt,{className:"h-4 w-4 mr-2"}),e("adminNotifications","markAllRead")]})]})]})})}),a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:e("adminNotifications","searchNotifications"),value:c,onChange:_=>d(_.target.value),className:"input pl-10 w-full"})]}),a.jsxs("select",{value:u,onChange:_=>h(_.target.value),className:"input w-full",children:[a.jsx("option",{value:"",children:e("adminNotifications","allStatus")}),a.jsx("option",{value:"unread",children:e("adminNotifications","unread")}),a.jsx("option",{value:"read",children:e("adminNotifications","read")}),a.jsx("option",{value:"archived",children:e("adminNotifications","archived")})]}),a.jsxs("select",{value:m,onChange:_=>g(_.target.value),className:"input w-full",children:[a.jsx("option",{value:"",children:e("adminNotifications","allTypes")}),a.jsx("option",{value:"order",children:e("adminNotifications","orders")}),a.jsx("option",{value:"payment",children:e("adminNotifications","payments")}),a.jsx("option",{value:"delivery",children:e("adminNotifications","delivery")}),a.jsx("option",{value:"system",children:e("adminNotifications","system")}),a.jsx("option",{value:"security",children:e("adminNotifications","security")}),a.jsx("option",{value:"marketing",children:e("adminNotifications","marketing")})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:f.length===o.length&&o.length>0,onChange:G,className:"rounded"}),a.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications","selectAll")})]})]}),f.length>0&&a.jsxs("div",{className:"flex items-center space-x-4 mt-4 pt-4 border-t border-gray-200",children:[a.jsx("span",{className:"text-sm text-gray-700",children:e("adminNotifications.selected",{count:f.length})}),a.jsxs("button",{onClick:()=>V("mark-read"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[a.jsx(gt,{className:"h-4 w-4 mr-1"}),e("adminNotifications","markRead")]}),a.jsxs("button",{onClick:()=>V("mark-unread"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[a.jsx(os,{className:"h-4 w-4 mr-1"}),e("adminNotifications","markUnread")]}),a.jsxs("button",{onClick:()=>V("archive"),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 bg-white hover:bg-gray-50",children:[a.jsx(ym,{className:"h-4 w-4 mr-1"}),e("adminNotifications","archive")]}),a.jsxs("button",{onClick:()=>V("delete"),className:"inline-flex items-center px-3 py-1 border border-red-300 rounded-md text-sm text-red-700 bg-red-50 hover:bg-red-100",children:[a.jsx($t,{className:"h-4 w-4 mr-1"}),e("adminNotifications","delete")]})]})]}),a.jsx("div",{className:"space-y-4",children:o.map(_=>a.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 border-l-4 ${P(_.priority)} ${_.isRead?"":"ring-2 ring-blue-100 dark:ring-blue-900/20"}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("input",{type:"checkbox",checked:f.includes(_.id),onChange:E=>{E.target.checked?x(O=>[...O,_.id]):x(O=>O.filter(q=>q!==_.id))},className:"mt-1 rounded"}),a.jsx("div",{className:"flex-shrink-0",children:k(_.type,_.priority)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("h3",{className:`text-lg font-semibold ${_.isRead?"text-gray-700 dark:text-gray-300":"text-gray-900 dark:text-white"}`,children:_.title}),!_.isRead&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.priority==="high"?"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400":_.priority==="medium"?"bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-400":"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400"}`,children:_.priority}),_.isArchived&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:"Archived"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:_.message}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ks,{className:"h-4 w-4 mr-1"}),C(_.timestamp)]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Nn,{className:"h-4 w-4 mr-1"}),_.type]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[_.isRead?a.jsx("button",{onClick:()=>S(_.id),className:"p-2 text-gray-400 hover:text-gray-600",title:e("tooltips","markAsUnread"),children:a.jsx(os,{className:"h-4 w-4"})}):a.jsx("button",{onClick:()=>N(_.id),className:"p-2 text-gray-400 hover:text-blue-600",title:e("tooltips","markAsRead"),children:a.jsx(Yt,{className:"h-4 w-4"})}),_.isArchived?a.jsx("button",{onClick:()=>F(_.id),className:"p-2 text-gray-400 hover:text-green-600",title:e("tooltips","unarchive"),children:a.jsx(ym,{className:"h-4 w-4"})}):a.jsx("button",{onClick:()=>R(_.id),className:"p-2 text-gray-400 hover:text-yellow-600",title:e("tooltips","archive"),children:a.jsx(ym,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>I(_.id),className:"p-2 text-gray-400 hover:text-red-600",title:e("tooltips","delete"),children:a.jsx($t,{className:"h-4 w-4"})})]})]})})},_.id))}),o.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nn,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No notifications found"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:c||u||m?"Try adjusting your search criteria or filters.":"You're all caught up! No new notifications."})]})]}),p&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Notification Settings"}),a.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:a.jsx(Fe,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Delivery Methods"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.email,onChange:_=>v(E=>({...E,email:_.target.checked})),className:"rounded mr-3"}),a.jsx(ms,{className:"h-4 w-4 mr-2"}),"Email Notifications"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.push,onChange:_=>v(E=>({...E,push:_.target.checked})),className:"rounded mr-3"}),a.jsx(Nn,{className:"h-4 w-4 mr-2"}),"Push Notifications"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.sms,onChange:_=>v(E=>({...E,sms:_.target.checked})),className:"rounded mr-3"}),a.jsx(mn,{className:"h-4 w-4 mr-2"}),"SMS Notifications"]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Notification Types"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.orderUpdates,onChange:_=>v(E=>({...E,orderUpdates:_.target.checked})),className:"rounded mr-3"}),a.jsx(_r,{className:"h-4 w-4 mr-2"}),"Order Updates"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.systemAlerts,onChange:_=>v(E=>({...E,systemAlerts:_.target.checked})),className:"rounded mr-3"}),a.jsx(fs,{className:"h-4 w-4 mr-2"}),"System Alerts"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.marketing,onChange:_=>v(E=>({...E,marketing:_.target.checked})),className:"rounded mr-3"}),a.jsx(ms,{className:"h-4 w-4 mr-2"}),"Marketing"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.securityAlerts,onChange:_=>v(E=>({...E,securityAlerts:_.target.checked})),className:"rounded mr-3"}),a.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Security Alerts"]})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{onClick:()=>b(!1),className:"btn btn-outline",children:"Cancel"}),a.jsx("button",{onClick:()=>{D.success("Notification settings saved!"),b(!1)},className:"btn btn-primary",children:"Save Settings"})]})]})})]})},YA=()=>{const{t:e}=de(),{user:t}=ne(s=>s.auth);if((t==null?void 0:t.role)==="ADMIN")return a.jsx(el,{to:"/admin/settings/general",replace:!0});if((t==null?void 0:t.role)!=="ADMIN")return a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx(lt,{className:"w-16 h-16 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})});const r=[{title:e("adminSettings","storeSettings"),description:e("adminSettings","storeSettingsDescription"),icon:fs,color:"blue",items:[{name:e("adminSettings","general"),description:e("adminSettings","generalDescription"),href:"/admin/settings/general",icon:fs},{name:e("adminSettings","business"),description:e("adminSettings","businessDescription"),href:"/admin/settings/business",icon:J0},{name:e("adminSettings","shipping"),description:e("adminSettings","shippingDescription"),href:"/admin/settings/shipping",icon:lr},{name:e("adminSettings","vat"),description:e("adminSettings","vatDescription"),href:"/admin/settings/vat",icon:nk}]},{title:e("adminSettings","integrations"),description:e("adminSettings","integrationsDescription"),icon:xg,color:"green",items:[{name:e("adminSettings","apiKeys"),description:e("adminSettings","apiKeysDescription"),href:"/admin/settings/api-keys",icon:fh},{name:e("adminSettings","paymentGateways"),description:e("adminSettings","paymentGatewayDescription"),href:"/admin/settings/payment-gateways",icon:qs},{name:e("adminSettings","integrations"),description:e("adminSettings","integrationsDescription"),href:"/admin/settings/integrations",icon:xg}]}];return a.jsx(oe,{children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings","settings")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSettings","manageSystemSettings")})]}),a.jsx("div",{className:"space-y-8",children:r.map(s=>a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 bg-${s.color}-100 dark:bg-${s.color}-900/20 rounded-lg flex items-center justify-center`,children:a.jsx(s.icon,{className:`w-4 h-4 text-${s.color}-600 dark:text-${s.color}-400`})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s.title}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.description})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.items.map(n=>a.jsx(he,{to:n.href,className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 group",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:bg-blue-100 dark:group-hover:bg-blue-900/20 transition-colors",children:a.jsx(n.icon,{className:"w-5 h-5 text-gray-600 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:n.name}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:n.description})]})]})},n.name))})]},s.title))})]})})},QA=()=>{const{t:e}=de(),{user:t}=ne(p=>p.auth),[r,s]=j.useState(!0),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState({storeName:"Ölföng",storeDescription:"Icelandic wine and beer shop with home delivery",storeEmail:"info@olfong.is",storePhone:"+354 555 1234",storeAddress:"Laugavegur 123, 101 Reykjavík, Iceland",currency:"ISK",language:"is",dateFormat:"DD/MM/YYYY",timeFormat:"24h"}),[u,h]=j.useState({});j.useEffect(()=>{m()},[]);const m=async()=>{var p;s(!0);try{const b=await fetch("/api/settings?category=GENERAL",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const y=await b.json(),v={};(p=y.data.settings.GENERAL)==null||p.forEach(w=>{v[w.key]=w.value||""}),d(w=>({...w,...v}))}}catch(b){console.error("Error loading settings:",b),D.error("Failed to load settings")}finally{s(!1)}},g=()=>{const p={};return c.storeName.trim()||(p.storeName="Store name is required"),c.storeEmail.trim()?/\S+@\S+\.\S+/.test(c.storeEmail)||(p.storeEmail="Please enter a valid email address"):p.storeEmail="Store email is required",c.storePhone.trim()||(p.storePhone="Phone number is required"),c.storeAddress.trim()||(p.storeAddress="Store address is required"),h(p),Object.keys(p).length===0},f=async()=>{if(!g()){D.error("Please fix the validation errors before saving");return}l(!0);try{const p=[{key:"storeName",value:c.storeName,category:"GENERAL",description:"Store name"},{key:"storeDescription",value:c.storeDescription,category:"GENERAL",description:"Store description"},{key:"storeEmail",value:c.storeEmail,category:"GENERAL",description:"Store email"},{key:"storePhone",value:c.storePhone,category:"GENERAL",description:"Store phone number"},{key:"storeAddress",value:c.storeAddress,category:"GENERAL",description:"Store address"},{key:"currency",value:c.currency,category:"GENERAL",description:"Store currency"},{key:"language",value:c.language,category:"GENERAL",description:"Default language"},{key:"dateFormat",value:c.dateFormat,category:"GENERAL",description:"Date format"},{key:"timeFormat",value:c.timeFormat,category:"GENERAL",description:"Time format"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:p})})).ok)throw new Error("Failed to save settings");D.success(e("adminSettings","settingsSaved")),i(!1),h({})}catch(p){console.error("Error saving settings:",p),D.error("Failed to save settings")}finally{l(!1)}},x=(p,b)=>{d(y=>({...y,[p]:b})),i(!0),u[p]&&h(y=>({...y,[p]:""}))};return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"text-center p-8 bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx(lt,{className:"w-16 h-16 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"You do not have permission to view this page."})]})})}):r?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-2 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(he,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200",children:a.jsx(Gs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl xl:text-4xl 2xl:text-5xl font-bold text-gray-900 dark:text-white flex items-center",children:[a.jsx(fs,{className:"w-8 h-8 xl:w-10 xl:h-10 2xl:w-12 2xl:h-12 text-blue-600 dark:text-blue-400 mr-3"}),e("adminSettings","generalSettings")]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminSettings","generalDescription")})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[n?a.jsxs("div",{className:"flex items-center text-amber-600 dark:text-amber-400",children:[a.jsx(mt,{className:"w-5 h-5 mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:"Unsaved Changes"})]}):a.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400",children:[a.jsx(gt,{className:"w-5 h-5 mr-2"}),a.jsx("span",{className:"text-sm font-medium",children:"All Saved"})]}),a.jsxs("button",{onClick:f,disabled:o||!n,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?a.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Kr,{className:"w-4 h-4 mr-2"}),o?e("common","loading"):e("adminSettings","saveChanges")]})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-2 sm:px-4 lg:px-6 xl:px-8 2xl:px-10 py-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(oP,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),a.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:"Store Information"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Basic information about your store"})]}),a.jsxs("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings","storeName")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:c.storeName,onChange:p=>x("storeName",p.target.value),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${u.storeName?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store name"}),u.storeName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.storeName})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings","storeEmail")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ms,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"email",value:c.storeEmail,onChange:p=>x("storeEmail",p.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${u.storeEmail?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"info@yourstore.com"})]}),u.storeEmail&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.storeEmail})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings","phoneNumber")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(mn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"tel",value:c.storePhone,onChange:p=>x("storePhone",p.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${u.storePhone?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"+354 555 1234"})]}),u.storePhone&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.storePhone})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("adminSettings","storeAddress")," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(vs,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),a.jsx("textarea",{value:c.storeAddress,onChange:p=>x("storeAddress",p.target.value),rows:3,className:`w-full pl-10 pr-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white ${u.storeAddress?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter your store address"})]}),u.storeAddress&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:u.storeAddress})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings","storeDescription")}),a.jsx("textarea",{value:c.storeDescription,onChange:p=>x("storeDescription",p.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",placeholder:"Describe your store and what makes it special"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zd,{className:"w-6 h-6 text-green-600 dark:text-green-400 mr-3"}),a.jsx("h3",{className:"text-lg xl:text-xl 2xl:text-2xl font-semibold text-gray-900 dark:text-white",children:"Preferences"})]}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:"Configure general preferences and settings"})]}),a.jsx("div",{className:"p-4 xl:p-6 2xl:p-8 space-y-4 xl:space-y-6 2xl:space-y-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 2xl:grid-cols-4 gap-4 xl:gap-6 2xl:gap-8",children:[a.jsxs("div",{className:"2xl:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings","currency")}),a.jsxs("div",{className:"relative",children:[a.jsx(hh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:c.currency,onChange:p=>x("currency",p.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"ISK",children:e("adminSettings","currencyISK")}),a.jsx("option",{value:"USD",children:e("adminSettings","currencyUSD")}),a.jsx("option",{value:"EUR",children:e("adminSettings","currencyEUR")})]})]})]}),a.jsxs("div",{className:"2xl:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings","language")}),a.jsxs("div",{className:"relative",children:[a.jsx(Zd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:c.language,onChange:p=>x("language",p.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"is",children:e("adminSettings","languageIcelandic")}),a.jsx("option",{value:"en",children:e("adminSettings","languageEnglish")})]})]})]}),a.jsxs("div",{className:"2xl:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings","dateFormat")}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:c.dateFormat,onChange:p=>x("dateFormat",p.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"DD/MM/YYYY",children:e("adminSettings","dateFormatDDMMYYYY")}),a.jsx("option",{value:"MM/DD/YYYY",children:e("adminSettings","dateFormatMMDDYYYY")}),a.jsx("option",{value:"YYYY-MM-DD",children:e("adminSettings","dateFormatYYYYMMDD")})]})]})]}),a.jsxs("div",{className:"2xl:col-span-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("adminSettings","timeFormat")}),a.jsxs("div",{className:"relative",children:[a.jsx(ks,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsxs("select",{value:c.timeFormat,onChange:p=>x("timeFormat",p.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"24h",children:e("adminSettings","timeFormat24h")}),a.jsx("option",{value:"12h",children:e("adminSettings","timeFormat12h")})]})]})]})]})})]})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4 xl:p-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(KE,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm xl:text-base font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-3",children:"These settings control how your store appears to customers and how the system behaves."}),a.jsxs("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[a.jsx("li",{children:"• Store name appears in emails and receipts"}),a.jsx("li",{children:"• Currency affects all pricing displays"}),a.jsx("li",{children:"• Language sets the default for new users"}),a.jsx("li",{children:"• Date/time formats affect order displays"})]})]})]})})]})})]})})},XA=()=>{const{t:e}=de(),{user:t}=ne(m=>m.auth),[r,s]=j.useState(!0),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState({openingHours:{monday:{open:"10:00",close:"22:00",closed:!1},tuesday:{open:"10:00",close:"22:00",closed:!1},wednesday:{open:"10:00",close:"22:00",closed:!1},thursday:{open:"10:00",close:"22:00",closed:!1},friday:{open:"10:00",close:"22:00",closed:!1},saturday:{open:"12:00",close:"24:00",closed:!1},sunday:{open:"12:00",close:"24:00",closed:!1}},ageRestriction:{enabled:!0,nicotineAge:18,alcoholNicotineAge:20,generalProducts:0}});j.useEffect(()=>{u()},[]);const u=async()=>{var m;s(!0);try{const g=await fetch("/api/settings?category=BUSINESS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(g.ok){const f=await g.json(),x={};(m=f.data.settings.BUSINESS)==null||m.forEach(p=>{p.key==="openingHours"?x.openingHours=JSON.parse(p.value):p.key==="ageRestrictionEnabled"?x.ageRestriction={...x.ageRestriction,enabled:p.value==="true"}:p.key==="nicotineAge"?x.ageRestriction={...x.ageRestriction,nicotineAge:parseInt(p.value)}:p.key==="alcoholNicotineAge"?x.ageRestriction={...x.ageRestriction,alcoholNicotineAge:parseInt(p.value)}:p.key==="generalProductsAge"&&(x.ageRestriction={...x.ageRestriction,generalProducts:parseInt(p.value)})}),d(p=>({...p,...x}))}}catch(g){console.error("Error loading settings:",g),D.error("Failed to load settings")}finally{s(!1)}},h=async()=>{l(!0);try{const m=[{key:"openingHours",value:JSON.stringify(c.openingHours),category:"BUSINESS",description:"Store opening hours"},{key:"ageRestrictionEnabled",value:c.ageRestriction.enabled.toString(),category:"BUSINESS",description:"Age restriction enabled"},{key:"nicotineAge",value:c.ageRestriction.nicotineAge.toString(),category:"BUSINESS",description:"Minimum age for nicotine products"},{key:"alcoholNicotineAge",value:c.ageRestriction.alcoholNicotineAge.toString(),category:"BUSINESS",description:"Minimum age for alcohol and nicotine products"},{key:"generalProductsAge",value:c.ageRestriction.generalProducts.toString(),category:"BUSINESS",description:"Minimum age for general products"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:m})})).ok)throw new Error("Failed to save settings");D.success(e("adminSettings","settingsSaved")),i(!1)}catch(m){console.error("Error saving settings:",m),D.error("Failed to save settings")}finally{l(!1)}};return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx(lt,{className:"w-16 h-16 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):r?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(he,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(Gs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings","businessSettings")}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings","businessDescription")})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(J0,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings","businessSettings")})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings","openingHours")}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(c.openingHours).map(([m,g])=>a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 capitalize",children:e("adminSettings","${day}")}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"time",value:g.open,onChange:f=>{d(x=>({...x,openingHours:{...x.openingHours,[m]:{...g,open:f.target.value}}})),i(!0)},disabled:g.closed,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:e("adminSettings","to")}),a.jsx("input",{type:"time",value:g.close,onChange:f=>{d(x=>({...x,openingHours:{...x.openingHours,[m]:{...g,close:f.target.value}}})),i(!0)},disabled:g.closed,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:g.closed,onChange:f=>{d(x=>({...x,openingHours:{...x.openingHours,[m]:{...g,closed:f.target.checked}}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:e("adminSettings","closed")})]})]})]},m))})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings","ageRestriction")}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"enableAgeRestriction",checked:c.ageRestriction.enabled,onChange:m=>{d(g=>({...g,ageRestriction:{...g.ageRestriction,enabled:m.target.checked}})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),a.jsx("label",{htmlFor:"enableAgeRestriction",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings","enableAgeRestriction")})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings","nicotineProducts")," (",e("adminSettings","years"),")"]}),a.jsx("input",{type:"number",value:c.ageRestriction.nicotineAge,onChange:m=>{d(g=>({...g,ageRestriction:{...g.ageRestriction,nicotineAge:parseInt(m.target.value)||18}})),i(!0)},disabled:!c.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings","nicotineAgeDescription")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings","alcoholNicotineProducts")," (",e("adminSettings","years"),")"]}),a.jsx("input",{type:"number",value:c.ageRestriction.alcoholNicotineAge,onChange:m=>{d(g=>({...g,ageRestriction:{...g.ageRestriction,alcoholNicotineAge:parseInt(m.target.value)||20}})),i(!0)},disabled:!c.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings","alcoholNicotineAgeDescription")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings","generalProducts")," (",e("adminSettings","years"),")"]}),a.jsx("input",{type:"number",value:c.ageRestriction.generalProducts,onChange:m=>{d(g=>({...g,ageRestriction:{...g.ageRestriction,generalProducts:parseInt(m.target.value)||0}})),i(!0)},disabled:!c.ageRestriction.enabled,min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("adminSettings","generalProductsDescription")})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[a.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings","ageRestrictionNotice")}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings","ageRestrictionDescription")})]})]})]})]})})}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:a.jsxs("button",{onClick:h,disabled:o||!n,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?a.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Kr,{className:"w-4 h-4 mr-2"}),o?e("common","loading"):e("adminSettings","saveChanges")]})})})]})})},JA=()=>{const{t:e,currentLanguage:t}=de(),{user:r}=ne(b=>b.auth),[s,n]=j.useState(!0),[i,o]=j.useState([]),[l,c]=j.useState(!1),[d,u]=j.useState({});j.useEffect(()=>{h()},[]);const h=async()=>{n(!0);try{const b=await fetch("/api/shipping/active",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok){const y=await b.json();o(y.data||[])}}catch(b){console.error("Error loading shipping options:",b),D.error("Failed to load shipping options")}finally{n(!1)}},m=async(b,y)=>{try{if((await fetch(`/api/shipping/${b}/toggle`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:y})})).ok)o(w=>w.map(k=>k.id===b?{...k,isEnabled:y}:k)),D.success(`Shipping option ${y?"enabled":"disabled"} successfully`);else throw new Error("Failed to toggle shipping option")}catch(v){console.error("Error toggling shipping option:",v),D.error("Failed to toggle shipping option")}},g=async b=>{if(window.confirm(e("adminSettings","confirmDeleteShipping")))try{if((await fetch(`/api/shipping/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)o(v=>v.filter(w=>w.id!==b)),D.success("Shipping option deleted successfully");else throw new Error("Failed to delete shipping option")}catch(y){console.error("Error deleting shipping option:",y),D.error("Failed to delete shipping option")}},f=async b=>{try{const y=await fetch("/api/shipping",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(b)});if(y.ok){const v=await y.json();o(w=>[...w,v.data]),c(!1),u({}),D.success("Shipping option created successfully")}else throw new Error("Failed to create shipping option")}catch(y){console.error("Error creating shipping option:",y),D.error("Failed to create shipping option")}},x=async(b,y)=>{try{const v=await fetch(`/api/shipping/${b}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(y)});if(v.ok){const w=await v.json();o(k=>k.map(P=>P.id===b?w.data:P)),c(!1),u({}),D.success("Shipping option updated successfully")}else throw new Error("Failed to update shipping option")}catch(v){console.error("Error updating shipping option:",v),D.error("Failed to update shipping option")}};if((r==null?void 0:r.role)!=="ADMIN")return a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx(lt,{className:"w-16 h-16 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})});if(s)return a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})});const p=()=>l?a.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:a.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white dark:bg-gray-800",children:a.jsxs("div",{className:"mt-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.id?e("adminSettings","editShippingOption"):e("adminSettings","addShippingOption")}),a.jsx("button",{onClick:()=>{c(!1),u({})},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:b=>{b.preventDefault();const y=new FormData(b.target),v=Object.fromEntries(y.entries());v.fee=parseFloat(v.fee)||0,v.estimatedDays=parseInt(v.estimatedDays)||1,v.sortOrder=parseInt(v.sortOrder)||0,d.id?x(d.id,v):f(v)},children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","nameEnglish")}),a.jsx("input",{type:"text",name:"name",defaultValue:d.name||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","nameIcelandic")}),a.jsx("input",{type:"text",name:"nameIs",defaultValue:d.nameIs||"",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","type")}),a.jsxs("select",{name:"type",defaultValue:d.type||"DELIVERY",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"DELIVERY",children:e("adminSettings","delivery")}),a.jsx("option",{value:"PICKUP",children:e("adminSettings","pickup")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings","price")," (ISK)"]}),a.jsx("input",{type:"number",name:"fee",defaultValue:d.fee||0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","estimatedDays")}),a.jsx("input",{type:"number",name:"estimatedDays",defaultValue:d.estimatedDays||1,min:"1",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","sortOrder")}),a.jsx("input",{type:"number",name:"sortOrder",defaultValue:d.sortOrder||0,min:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","descriptionEnglish")}),a.jsx("textarea",{name:"description",defaultValue:d.description||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","descriptionIcelandic")}),a.jsx("textarea",{name:"descriptionIs",defaultValue:d.descriptionIs||"",rows:2,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[a.jsx("button",{type:"button",onClick:()=>{c(!1),u({})},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 border border-gray-300 dark:border-gray-500 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500",children:e("adminSettings","cancel")}),a.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:d.id?e("adminSettings","update"):e("adminSettings","create")})]})]})]})})}):null;return a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(he,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(Gs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings","shipping")}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings","shippingDescription")})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5",children:"ℹ️"}),a.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("p",{className:"font-medium mb-1",children:e("adminSettings","shippingConfiguration")}),a.jsx("p",{children:e("adminSettings","shippingDescription")})]})]})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{}),a.jsxs("button",{onClick:()=>{u({}),c(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(Ft,{className:"h-4 w-4 mr-2"}),e("adminSettings","addShippingOption")]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:i.map(b=>a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(lr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t==="is"?b.nameIs:b.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t==="is"?b.name:b.nameIs})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>g(b.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",title:e("adminSettings","delete"),children:a.jsx($t,{className:"h-4 w-4"})}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b.isEnabled,onChange:y=>m(b.id,y.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:t==="is"?b.descriptionIs:b.description}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mb-4 leading-relaxed italic",children:t==="is"?b.description:b.descriptionIs}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${b.isEnabled?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:b.isEnabled?e("adminSettings","enabled"):e("adminSettings","disabled")})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[b.fee," ISK"]}),a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:b.type})]})]}),a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:()=>{u(b),c(!0)},className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:e("adminSettings","edit")})})]},b.id))}),i.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(lr,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminSettings","noShippingOptions")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminSettings","noShippingOptionsDescription")}),a.jsxs("button",{onClick:()=>{u({}),c(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(Ft,{className:"h-4 w-4 mr-2"}),e("adminSettings","addFirstShippingOption")]})]}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mr-3 mt-0.5",children:"⚠️"}),a.jsxs("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[a.jsx("p",{className:"font-medium mb-1",children:e("adminSettings","shippingNotes")}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:e("adminSettings","shippingNote1")}),a.jsx("li",{children:e("adminSettings","shippingNote2")}),a.jsx("li",{children:e("adminSettings","shippingNote3")})]})]})]})})]})}),p()]})})},ZA=()=>{const{t:e}=de(),{user:t}=ne(m=>m.auth),[r,s]=j.useState(!0),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState({enabled:!0,rate:24,country:"IS",displayInAdmin:!0,includeInCustomerPrice:!0,showVatBreakdown:!1});j.useEffect(()=>{u()},[]);const u=async()=>{var m;s(!0);try{const g=await fetch("/api/settings?category=VAT",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(g.ok){const f=await g.json(),x={};(m=f.data.settings.VAT)==null||m.forEach(p=>{p.key==="vatEnabled"?x.enabled=p.value==="true":p.key==="vatRate"?x.rate=parseFloat(p.value):p.key==="vatCountry"?x.country=p.value:p.key==="vatDisplayInAdmin"?x.displayInAdmin=p.value==="true":p.key==="vatIncludeInCustomerPrice"?x.includeInCustomerPrice=p.value==="true":p.key==="vatShowBreakdown"&&(x.showVatBreakdown=p.value==="true")}),d(p=>({...p,...x}))}}catch(g){console.error("Error loading settings:",g),D.error("Failed to load settings")}finally{s(!1)}},h=async()=>{l(!0);try{const m=[{key:"vatEnabled",value:c.enabled.toString(),category:"VAT",description:"VAT enabled"},{key:"vatRate",value:c.rate.toString(),category:"VAT",description:"VAT rate"},{key:"vatCountry",value:c.country,category:"VAT",description:"VAT country"},{key:"vatDisplayInAdmin",value:c.displayInAdmin.toString(),category:"VAT",description:"Show VAT in admin"},{key:"vatIncludeInCustomerPrice",value:c.includeInCustomerPrice.toString(),category:"VAT",description:"Include VAT in customer price"},{key:"vatShowBreakdown",value:c.showVatBreakdown.toString(),category:"VAT",description:"Show VAT breakdown"}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:m})})).ok)throw new Error("Failed to save settings");D.success(e("adminSettings","settingsSaved")),i(!1)}catch(m){console.error("Error saving settings:",m),D.error("Failed to save settings")}finally{l(!1)}};return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx(lt,{className:"w-16 h-16 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):r?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(he,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(Gs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings","vatSettings")}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings","vatDescription")})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(nk,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings","vatSettings")})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings","vatConfiguration")}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"vatEnabled",checked:c.enabled,onChange:m=>{d(g=>({...g,enabled:m.target.checked})),i(!0)},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600"}),a.jsx("label",{htmlFor:"vatEnabled",className:"ml-2 text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings","vatEnabled")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[e("adminSettings","vatRate")," (%)"]}),a.jsx("input",{type:"number",value:c.rate,onChange:m=>{d(g=>({...g,rate:parseFloat(m.target.value)||0})),i(!0)},disabled:!c.enabled,min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",placeholder:"24.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminSettings","country")}),a.jsxs("select",{name:"country",value:c.country,onChange:m=>{d(g=>({...g,country:m.target.value})),i(!0)},disabled:!c.enabled,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white disabled:opacity-50",children:[a.jsx("option",{value:"IS",children:e("adminSettings","iceland")}),a.jsx("option",{value:"EU",children:e("adminSettings","euCountries")}),a.jsx("option",{value:"OTHER",children:e("adminSettings","otherCountries")})]})]})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md",children:[a.jsx("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings","vatInformation")}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings","vatInformationDescription")})]})})]})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2 mb-4",children:e("adminSettings","vatDisplaySettings")}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"showVatInAdmin",checked:c.displayInAdmin,onChange:m=>{d(g=>({...g,displayInAdmin:m.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("label",{htmlFor:"showVatInAdmin",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings","showVatInAdmin")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings","showVatInAdminDescription")})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"includeVatInCustomerPrice",checked:c.includeInCustomerPrice,onChange:m=>{d(g=>({...g,includeInCustomerPrice:m.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("label",{htmlFor:"includeVatInCustomerPrice",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings","includeVatInCustomerPrice")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings","includeVatInCustomerPriceDescription")})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"showVatBreakdown",checked:c.showVatBreakdown,onChange:m=>{d(g=>({...g,showVatBreakdown:m.target.checked})),i(!0)},disabled:!c.enabled,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500 dark:bg-gray-700 dark:border-gray-600 disabled:opacity-50"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("label",{htmlFor:"showVatBreakdown",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("adminSettings","showVatBreakdown")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings","showVatBreakdownDescription")})]})]})]})]})]})}),a.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mt-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 flex justify-end",children:a.jsxs("button",{onClick:h,disabled:o||!n,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[o?a.jsx(lt,{className:"w-4 h-4 mr-2 animate-spin"}):a.jsx(Kr,{className:"w-4 h-4 mr-2"}),o?e("common","loading"):e("adminSettings","saveChanges")]})})})]})})},eO=()=>{const{t:e}=de(),{user:t}=ne(x=>x.auth),[r,s]=j.useState(!0),[n,i]=j.useState(!1),[o,l]=j.useState(!1),[c,d]=j.useState({}),[u,h]=j.useState({});j.useEffect(()=>{m()},[]);const m=async()=>{var x;s(!0);try{const p=await fetch("/api/settings?category=API_KEYS",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(p.ok){const b=await p.json(),y={};(x=b.data.settings.API_KEYS)==null||x.forEach(v=>{y[v.key]=v.value||""}),d(y)}}catch(p){console.error("Error loading settings:",p),D.error("Failed to load settings")}finally{s(!1)}},g=async(x,p)=>{l(!0);try{const b=[{key:x,value:p,category:"API_KEYS",description:`${x} API key`}];if(!(await fetch("/api/settings",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({settings:b})})).ok)throw new Error("Failed to save API key");D.success(e("adminSettings","settingsSaved")),i(!1)}catch(b){console.error("Error saving API key:",b),D.error("Failed to save API key")}finally{l(!1)}},f=x=>{h(p=>({...p,[x]:!p[x]}))};return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx(lt,{className:"w-16 h-16 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:"Access Denied"}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):r?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(he,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(Gs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings","apiKeys")}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings","apiKeysDescription")})]})]})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(fh,{className:"w-6 h-6 text-primary-600 dark:text-primary-400 mr-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e("adminSettings","apiKeys")})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-md mb-6",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:e("adminSettings","apiKeysConfiguration")}),a.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:e("adminSettings","apiKeysDescription")})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-pink-100 dark:bg-pink-900/20 rounded-lg flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-pink-600 dark:text-pink-400 font-semibold text-sm",children:"U"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings","unsplashApiKey")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings","unsplashDevelopers")})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-xs text-green-600 dark:text-green-400 mr-2",children:"●"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("input",{type:u.unsplash?"text":"password",placeholder:e("adminSettings","enterUnsplashApiKey"),value:c.unsplash||"",onChange:x=>{d(p=>({...p,unsplash:x.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("button",{type:"button",onClick:()=>f("unsplash"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u.unsplash?a.jsx(os,{className:"h-4 w-4 text-gray-400"}):a.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),a.jsx("button",{onClick:()=>g("unsplash",c.unsplash||""),disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?a.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings","save")})]})]}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold text-sm",children:"P"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings","pexelsApiKey")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings","pexelsApi")})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-xs text-gray-400 mr-2",children:"●"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("input",{type:u.pexels?"text":"password",placeholder:e("adminSettings","enterPexelsApiKey"),value:c.pexels||"",onChange:x=>{d(p=>({...p,pexels:x.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("button",{type:"button",onClick:()=>f("pexels"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u.pexels?a.jsx(os,{className:"h-4 w-4 text-gray-400"}):a.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),a.jsx("button",{onClick:()=>g("pexels",c.pexels||""),disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?a.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings","save")})]})]}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-green-600 dark:text-green-400 font-semibold text-sm",children:"PX"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings","pixabayApiKey")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings","pixabayApi")})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-xs text-gray-400 mr-2",children:"●"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("input",{type:u.pixabay?"text":"password",placeholder:e("adminSettings","enterPixabayApiKey"),value:c.pixabay||"",onChange:x=>{d(p=>({...p,pixabay:x.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("button",{type:"button",onClick:()=>f("pixabay"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u.pixabay?a.jsx(os,{className:"h-4 w-4 text-gray-400"}):a.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),a.jsx("button",{onClick:()=>g("pixabay",c.pixabay||""),disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?a.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings","save")})]})]}),a.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-red-600 dark:text-red-400 font-semibold text-sm",children:"G"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e("adminSettings","googleApiKey")}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("adminSettings","googleCloudConsole")})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-xs text-gray-400 mr-2",children:"●"}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Inactive"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx("input",{type:u.google?"text":"password",placeholder:e("adminSettings","enterGoogleApiKey"),value:c.google||"",onChange:x=>{d(p=>({...p,google:x.target.value})),i(!0)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("button",{type:"button",onClick:()=>f("google"),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:u.google?a.jsx(os,{className:"h-4 w-4 text-gray-400"}):a.jsx(Yt,{className:"h-4 w-4 text-gray-400"})})]}),a.jsx("button",{onClick:()=>g("google",c.google||""),disabled:o,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50",children:o?a.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings","save")})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("input",{type:"text",placeholder:e("adminSettings","enterGoogleSearchEngineId"),value:c.googleSearchEngineId||"",onChange:x=>{d(p=>({...p,googleSearchEngineId:x.target.value})),i(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("button",{onClick:()=>g("googleSearchEngineId",c.googleSearchEngineId||""),disabled:o,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50",children:o?a.jsx(lt,{className:"w-4 h-4 animate-spin"}):e("adminSettings","test")})]})]})]})]}),a.jsxs("div",{className:"mt-8 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-md",children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-3",children:e("adminSettings","importantNotes")}),a.jsxs("ul",{className:"text-sm text-yellow-700 dark:text-yellow-300 space-y-1",children:[a.jsxs("li",{children:["• ",e("adminSettings","apiKeysImportantNote1")]}),a.jsxs("li",{children:["• ",e("adminSettings","apiKeysImportantNote2")]}),a.jsxs("li",{children:["• ",e("adminSettings","apiKeysImportantNote3")]}),a.jsxs("li",{children:["• ",e("adminSettings","apiKeysImportantNote4")]})]})]})]})})]})})},tO=()=>{const{t:e}=de();return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(he,{to:"/admin/settings",className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(Gs,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminSettings","paymentGateways")}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400",children:e("adminSettings","paymentGatewayDescription")})]})]})})})},qN=({gateway:e,onToggle:t,onTest:r,onEdit:s})=>{var i,o;const{t:n}=de();return a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:a.jsx(qs,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:e.displayName}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.provider})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-gray-400 hover:text-green-600 dark:hover:text-green-400 transition-colors rounded-lg hover:bg-green-50 dark:hover:bg-green-900/20",title:n("adminSettings","testConnection"),children:a.jsx(xg,{className:"h-4 w-4"})}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.isEnabled,onChange:l=>t(e.id,l.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]})]}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 leading-relaxed",children:e.description}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${e.isEnabled?"bg-green-500":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.isEnabled?n("adminSettings","enabled"):n("adminSettings","disabled")})]}),a.jsx("div",{className:"text-right",children:a.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:e.environment})})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex flex-wrap gap-1",children:[(i=e.supportedMethods)==null?void 0:i.slice(0,4).map(l=>a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:l},l)),((o=e.supportedMethods)==null?void 0:o.length)>4&&a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-200",children:["+",e.supportedMethods.length-4]})]})}),a.jsx("div",{className:"flex space-x-3",children:a.jsx("button",{onClick:()=>s(e),className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-lg transition-colors duration-200",children:n("adminSettings","edit")})})]})};qN.propTypes={gateway:J.shape({id:J.string.isRequired,displayName:J.string.isRequired,provider:J.string.isRequired,description:J.string,isEnabled:J.bool.isRequired,environment:J.string.isRequired,supportedMethods:J.arrayOf(J.string)}).isRequired,onToggle:J.func.isRequired,onTest:J.func.isRequired,onEdit:J.func.isRequired};const rO=({onAddGateway:e})=>{const{t}=de();return a.jsxs("div",{className:"text-center py-12",children:[a.jsx(qs,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t("adminSettings","noPaymentGateways")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:t("adminSettings","noPaymentGatewaysDescription")}),a.jsxs("button",{onClick:e,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(Ft,{className:"h-4 w-4 mr-2"}),t("adminSettings","addFirstPaymentGateway")]})]})},sO=()=>{const{t:e}=de();return a.jsx(a.Fragment,{children:a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5",children:"ℹ️"}),a.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("p",{className:"font-medium mb-1",children:e("adminSettings","paymentGatewayConfiguration")}),a.jsx("p",{children:e("adminSettings","paymentGatewayDescription")})]})]})})})},KN=({isOpen:e,onClose:t,gatewayData:r,onSave:s})=>{const{t:n}=de(),[i,o]=j.useState({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}}),[l,c]=j.useState({}),[d,u]=j.useState(!1);j.useEffect(()=>{r&&e?o({displayName:r.displayName||"",provider:r.provider||"",description:r.description||"",environment:r.environment||"sandbox",isEnabled:r.isEnabled||!1,supportedMethods:r.supportedMethods||[],merchantId:r.merchantId||"",apiKey:r.apiKey||"",secretKey:r.secretKey||"",webhookSecret:r.webhookSecret||"",accessKey:r.accessKey||"",publishableKey:r.publishableKey||"",clientId:r.clientId||"",clientSecret:r.clientSecret||"",applicationId:r.applicationId||"",paymentGatewayId:r.paymentGatewayId||"",privateKey:r.privateKey||"",publicKey:r.publicKey||"",config:r.config||{}}):e&&o({displayName:"",provider:"",description:"",environment:"sandbox",isEnabled:!1,supportedMethods:[],merchantId:"",apiKey:"",secretKey:"",webhookSecret:"",accessKey:"",publishableKey:"",clientId:"",clientSecret:"",applicationId:"",paymentGatewayId:"",privateKey:"",publicKey:"",config:{}})},[r,e]);const h=async p=>{p.preventDefault();try{await s(i),t()}catch(b){console.error("Error saving payment gateway:",b),D.error(n("adminSettings","errorSavingPaymentGateway"))}},m=p=>{const{name:b,value:y,type:v,checked:w}=p.target;o(k=>({...k,[b]:v==="checkbox"?w:y}))},g=p=>{c(b=>({...b,[p]:!b[p]}))},f=async()=>{if(!i.provider){D.error(n("adminSettings","pleaseSelectProvider"));return}u(!0);try{const p=await fetch("/api/payment-gateways/test",{method:"POST",headers:{"Content-Type":n("adminSettings","contentType"),Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({provider:i.provider,environment:i.environment,...i})}),b=await p.json();p.ok?D.success(n("adminSettings","connectionTestSuccessful")):D.error(b.message||n("adminSettings","connectionTestFailed"))}catch(p){console.error("Connection test error:",p),D.error(n("adminSettings","connectionTestFailed"))}finally{u(!1)}},x=()=>{switch(i.provider){case"valitor":return[{name:"merchantId",label:n("adminSettings","merchantId"),type:"text",required:!0,placeholder:n("adminSettings","enterMerchantId")},{name:"apiKey",label:n("adminSettings","apiKey"),type:"password",required:!0,placeholder:n("adminSettings","enterApiKey")},{name:"secretKey",label:n("adminSettings","secretKey"),type:"password",required:!0,placeholder:n("adminSettings","enterSecretKey")},{name:"webhookSecret",label:n("adminSettings","webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings","enterWebhookSecret")}];case"rapyd":return[{name:"accessKey",label:n("adminSettings","accessKey"),type:"password",required:!0,placeholder:n("adminSettings","enterAccessKey")},{name:"secretKey",label:n("adminSettings","secretKey"),type:"password",required:!0,placeholder:n("adminSettings","enterSecretKey")},{name:"webhookSecret",label:n("adminSettings","webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings","enterWebhookSecret")}];case"stripe":return[{name:"publishableKey",label:n("adminSettings","publishableKey"),type:"password",required:!0,placeholder:n("adminSettings","enterPublishableKey")},{name:"secretKey",label:n("adminSettings","secretKey"),type:"password",required:!0,placeholder:n("adminSettings","enterSecretKey")},{name:"webhookSecret",label:n("adminSettings","webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings","enterWebhookSecret")}];case"paypal":return[{name:"clientId",label:n("adminSettings","clientId"),type:"password",required:!0,placeholder:n("adminSettings","enterClientId")},{name:"clientSecret",label:n("adminSettings","clientSecret"),type:"password",required:!0,placeholder:n("adminSettings","enterClientSecret")},{name:"webhookSecret",label:n("adminSettings","webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings","enterWebhookSecret")}];case"netgiro":return[{name:"applicationId",label:n("adminSettings","applicationId"),type:"text",required:!0,placeholder:n("adminSettings","enterApplicationId")},{name:"secretKey",label:n("adminSettings","secretKey"),type:"password",required:!0,placeholder:n("adminSettings","enterSecretKey")},{name:"webhookSecret",label:n("adminSettings","webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings","enterWebhookSecret")}];case"teya":return[{name:"merchantId",label:n("adminSettings","merchantId"),type:"text",required:!0,placeholder:n("adminSettings","enterMerchantId")},{name:"paymentGatewayId",label:n("adminSettings","paymentGatewayId"),type:"text",required:!0,placeholder:n("adminSettings","enterPaymentGatewayId")},{name:"secretKey",label:n("adminSettings","secretKey"),type:"password",required:!0,placeholder:n("adminSettings","enterSecretKey")},{name:"privateKey",label:n("adminSettings","privateKey"),type:"password",required:!1,placeholder:n("adminSettings","enterPrivateKey")},{name:"publicKey",label:n("adminSettings","publicKey"),type:"password",required:!1,placeholder:n("adminSettings","enterPublicKey")},{name:"webhookSecret",label:n("adminSettings","webhookSecret"),type:"password",required:!1,placeholder:n("adminSettings","enterWebhookSecret")}];default:return[]}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r!=null&&r.id?n("adminSettings","editPaymentGateway"):n("adminSettings","addPaymentGateway")}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings","displayName")}),a.jsx("input",{type:"text",name:"displayName",value:i.displayName,onChange:m,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings","provider")}),a.jsxs("select",{name:"provider",value:i.provider,onChange:m,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:!0,children:[a.jsx("option",{value:"",children:n("adminSettings","selectPaymentProvider")}),a.jsx("option",{value:"valitor",children:n("adminSettings","valitor")}),a.jsx("option",{value:"rapyd",children:n("adminSettings","rapyd")}),a.jsx("option",{value:"stripe",children:n("adminSettings","stripe")}),a.jsx("option",{value:"paypal",children:n("adminSettings","paypal")}),a.jsx("option",{value:"netgiro",children:n("adminSettings","netgiro")}),a.jsx("option",{value:"teya",children:n("adminSettings","teya")})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings","description")}),a.jsx("textarea",{name:"description",value:i.description,onChange:m,rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings","environment")}),a.jsxs("select",{name:"environment",value:i.environment,onChange:m,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",children:[a.jsx("option",{value:"sandbox",children:n("adminSettings","sandbox")}),a.jsx("option",{value:"production",children:n("adminSettings","production")})]})]}),i.provider&&a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[n("adminSettings.${formData","provider}")," ",n("adminSettings","configuration")]}),a.jsxs("button",{type:"button",onClick:f,disabled:d,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[a.jsx(ok,{className:"h-4 w-4 mr-2"}),d?n("adminSettings","testing"):n("adminSettings","testConnection")]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x().map(p=>a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[p.label,p.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:p.type==="password"&&!l[p.name]?"password":"text",name:p.name,value:i[p.name]||"",onChange:m,className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",required:p.required,placeholder:n("adminSettings.enterFieldLabel",{fieldLabel:p.label.toLowerCase()})}),p.type==="password"&&a.jsx("button",{type:"button",onClick:()=>g(p.name),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:l[p.name]?a.jsx(os,{className:"h-4 w-4"}):a.jsx(Yt,{className:"h-4 w-4"})})]})]},p.name))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:n("adminSettings","supportedPaymentMethods")}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["card","visa","mastercard","amex","diners","jcb","paypal","apple_pay","google_pay","bank_transfer","sepa","ideal","sofort","giropay","eps","bancontact"].map(p=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:i.supportedMethods.includes(p),onChange:b=>{b.target.checked?o(y=>({...y,supportedMethods:[...y.supportedMethods,p]})):o(y=>({...y,supportedMethods:y.supportedMethods.filter(v=>v!==p)}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300 capitalize",children:p.replace("_"," ")})]},p))})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",name:"isEnabled",checked:i.isEnabled,onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:n("adminSettings","enabled")})]}),a.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:i.provider&&a.jsxs("p",{children:[a.jsx("strong",{children:"Provider:"})," ",i.provider.charAt(0).toUpperCase()+i.provider.slice(1)," |",a.jsx("strong",{children:" Environment:"})," ",i.environment]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 hover:bg-gray-200 dark:hover:bg-gray-500 rounded-md transition-colors",children:n("adminSettings","cancel")}),a.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),r!=null&&r.id?n("adminSettings","updateGateway"):n("adminSettings","createGateway")]})]})]})]})]})}):null};KN.propTypes={isOpen:J.bool.isRequired,onClose:J.func.isRequired,gatewayData:J.shape({id:J.string,displayName:J.string,provider:J.string,description:J.string,environment:J.string,isEnabled:J.bool,supportedMethods:J.arrayOf(J.string),merchantId:J.string,apiKey:J.string,secretKey:J.string,webhookSecret:J.string,accessKey:J.string,publishableKey:J.string,clientId:J.string,clientSecret:J.string,applicationId:J.string,paymentGatewayId:J.string,privateKey:J.string,publicKey:J.string,config:J.object}),onSave:J.func.isRequired};const aO=()=>{const{t:e}=de(),{user:t}=ne(p=>p.auth),[r,s]=j.useState(!0),[n,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState({});j.useEffect(()=>{u()},[u]);const u=j.useCallback(async()=>{s(!0);try{const p=await fetch("/api/payment-gateways",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(p.ok){const b=await p.json();i(b.data.gateways||[])}}catch(p){console.error("Error loading payment gateways:",p),D.error(e("adminSettings","errorLoadingPaymentGateways"))}finally{s(!1)}},[e]),h=async(p,b)=>{try{if((await fetch(`/api/payment-gateways/${p}/toggle`,{method:"PATCH",headers:{"Content-Type":e("adminSettings","contentType"),Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({isEnabled:b})})).ok)i(v=>v.map(w=>w.id===p?{...w,isEnabled:b}:w)),D.success(`Payment gateway ${b?"enabled":"disabled"} successfully`);else throw new Error(e("adminSettings","errorTogglingPaymentGateway"))}catch(y){console.error("Error toggling payment gateway:",y),D.error(e("adminSettings","errorTogglingPaymentGateway"))}},m=async p=>{try{const b=await fetch(`/api/payment-gateways/${p}/test`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(b.ok)D.success(e("adminSettings","paymentGatewayTestSuccessful"));else{const y=await b.json();D.error(e("adminSettings.paymentGatewayTestFailed",{message:y.message||"Unknown error"}))}}catch(b){console.error("Error testing payment gateway:",b),D.error(e("adminSettings","errorTestingPaymentGateway"))}},g=p=>{d(p),l(!0)},f=async p=>{try{if((await fetch(`/api/payment-gateways/${p.id}`,{method:"PUT",headers:{"Content-Type":e("adminSettings","contentType"),Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(p)})).ok)await u(),D.success(e("adminSettings","paymentGatewayUpdatedSuccessfully"));else throw new Error(e("adminSettings","errorUpdatingPaymentGateway"))}catch(b){throw console.error("Error updating payment gateway:",b),D.error(e("adminSettings","errorUpdatingPaymentGateway")),b}},x=()=>{l(!1),d({})};return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx("div",{className:"text-red-400 mb-4",children:a.jsx(lt,{className:"w-16 h-16 mx-auto"})}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminSettings","accessDenied")}),a.jsx("p",{className:"text-gray-700",children:e("adminSettings","noPermissionMessage")})]})})}):r?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx(tO,{}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6 space-y-6",children:[a.jsx(sO,{}),n.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:n.map(p=>a.jsx(qN,{gateway:p,onToggle:h,onTest:m,onEdit:g},p.id))}):a.jsx(rO,{})]})}),a.jsx(KN,{isOpen:o,onClose:x,gatewayData:c,onSave:f})]})})},nO=()=>{de();const e=Ue(),{settings:t,isLoading:r,uploadProgress:s}=ne(x=>x.receiptSettings),[n,i]=j.useState({companyName:"",companyNameIs:"",companyAddress:"",companyAddressIs:"",companyPhone:"",companyEmail:"",companyWebsite:"",taxId:"",headerColor:"#1e40af",accentColor:"#3b82f6",fontFamily:"Inter, system-ui, sans-serif",fontSize:"14px",footerText:"",footerTextIs:"",showBarcode:!0,showQrCode:!0,template:"modern",paperSize:"80mm"}),[o,l]=j.useState(!0),[c,d]=j.useState(!1);j.useEffect(()=>{e(Co())},[e]),j.useEffect(()=>{t&&i({companyName:t.companyName||"",companyNameIs:t.companyNameIs||"",companyAddress:t.companyAddress||"",companyAddressIs:t.companyAddressIs||"",companyPhone:t.companyPhone||"",companyEmail:t.companyEmail||"",companyWebsite:t.companyWebsite||"",taxId:t.taxId||"",headerColor:t.headerColor||"#1e40af",accentColor:t.accentColor||"#3b82f6",fontFamily:t.fontFamily||"Inter, system-ui, sans-serif",fontSize:t.fontSize||"14px",footerText:t.footerText||"",footerTextIs:t.footerTextIs||"",showBarcode:t.showBarcode!==void 0?t.showBarcode:!0,showQrCode:t.showQrCode!==void 0?t.showQrCode:!0,template:t.template||"modern",paperSize:t.paperSize||"80mm"})},[t]);const u=(x,p)=>{i(b=>({...b,[x]:p})),e(UT({field:x,value:p}))},h=x=>{const p=x.target.files[0];if(p){if(p.size>5*1024*1024){D.error("File size must be less than 5MB");return}e(ld(p))}},m=async()=>{d(!0);try{await e(od(n)).unwrap(),D.success("Receipt settings saved successfully!")}catch(x){D.error(x||"Failed to save settings")}finally{d(!1)}},g=()=>{window.confirm("Are you sure you want to delete the logo?")&&e(cd())},f=()=>`
      <div class="receipt receipt-${n.template}" style="max-width: ${n.paperSize==="80mm"?"300px":"100%"}; margin: 0 auto; font-family: ${n.fontFamily}; font-size: ${n.fontSize}; background: white; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">
        <div class="header" style="background: ${n.headerColor}; color: white; text-align: center; padding: 15px;">
          <h1 style="font-size: 18px; font-weight: bold; margin: 0 0 5px 0;">${n.companyNameIs||n.companyName}</h1>
          ${n.companyAddress?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${n.companyAddressIs||n.companyAddress}</div>`:""}
          ${n.companyPhone?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${n.companyPhone}</div>`:""}
          ${n.companyEmail?`<div style="font-size: 12px; opacity: 0.9; margin: 2px 0;">${n.companyEmail}</div>`:""}
        </div>
        
        <div class="content" style="padding: 15px;">
          <div class="order-info" style="margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px solid #e5e7eb;">
            <div style="font-weight: bold; font-size: 16px; color: ${n.accentColor}; margin-bottom: 5px;">Pöntun: #12345</div>
            <div style="display: flex; justify-content: space-between; font-size: 12px; color: #6b7280;">
              <span>Dagsetning: ${new Date().toLocaleDateString()}</span>
              <span>Staða: CONFIRMED</span>
            </div>
          </div>

          <div class="items" style="margin-bottom: 15px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Vín - Rauðvín</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 2 × 2,500 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">5,000 ISK</div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; padding: 8px 0; border-bottom: 1px dotted #d1d5db;">
              <div style="flex: 1; margin-right: 10px;">
                <div style="font-weight: 500; font-size: 13px; margin-bottom: 2px;">Bjór - Pilsner</div>
                <div style="font-size: 11px; color: #6b7280;">Magn: 1 × 800 ISK</div>
              </div>
              <div style="font-weight: bold; font-size: 13px; text-align: right; min-width: 60px;">800 ISK</div>
            </div>
          </div>

          <div class="totals" style="border-top: 2px solid ${n.accentColor}; padding-top: 10px; margin-top: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Vörur:</span>
              <span>5,800 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 13px;">
              <span>Sending:</span>
              <span>500 ISK</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 16px; color: ${n.headerColor}; border-top: 1px solid #e5e7eb; padding-top: 8px; margin-top: 8px;">
              <span>Heildarupphæð:</span>
              <span>6,300 ISK</span>
            </div>
          </div>
        </div>

        <div class="footer" style="text-align: center; padding: 15px; background: #f9fafb; font-size: 11px; color: #6b7280;">
          ${n.footerTextIs||n.footerText||"Takk fyrir viðskiptin!"}
        </div>
      </div>
    `;return r&&!t?a.jsx(oe,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Tt,{className:"w-8 h-8 animate-spin text-blue-600"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsxs("div",{className:"px-6 py-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Receipt Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Customize your receipt appearance and branding"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(fs,{className:"w-5 h-5 mr-2"}),"Company Information"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name (English)"}),a.jsx("input",{type:"text",value:n.companyName,onChange:x=>u("companyName",x.target.value),className:"input w-full",placeholder:"Ölföng"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Company Name (Icelandic)"}),a.jsx("input",{type:"text",value:n.companyNameIs,onChange:x=>u("companyNameIs",x.target.value),className:"input w-full",placeholder:"Ölföng"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address (English)"}),a.jsx("input",{type:"text",value:n.companyAddress,onChange:x=>u("companyAddress",x.target.value),className:"input w-full",placeholder:"Reykjavík, Iceland"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Address (Icelandic)"}),a.jsx("input",{type:"text",value:n.companyAddressIs,onChange:x=>u("companyAddressIs",x.target.value),className:"input w-full",placeholder:"Reykjavík, Ísland"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone"}),a.jsx("input",{type:"tel",value:n.companyPhone,onChange:x=>u("companyPhone",x.target.value),className:"input w-full",placeholder:"+354 555 1234"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:n.companyEmail,onChange:x=>u("companyEmail",x.target.value),className:"input w-full",placeholder:"info@olfong.is"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),a.jsx("input",{type:"url",value:n.companyWebsite,onChange:x=>u("companyWebsite",x.target.value),className:"input w-full",placeholder:"www.olfong.is"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tax ID (Kennitala)"}),a.jsx("input",{type:"text",value:n.taxId,onChange:x=>u("taxId",x.target.value),className:"input w-full",placeholder:"1234567890"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(or,{className:"w-5 h-5 mr-2"}),"Logo"]}),a.jsxs("div",{className:"space-y-4",children:[t!=null&&t.logoUrl?a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("img",{src:t.logoUrl,alt:"Company Logo",className:"w-20 h-20 object-contain border border-gray-200 rounded-lg"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current logo"}),a.jsxs("button",{onClick:g,className:"text-red-600 hover:text-red-800 text-sm flex items-center mt-1",children:[a.jsx($t,{className:"w-4 h-4 mr-1"}),"Remove"]})]})]}):a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx(or,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-2",children:"No logo uploaded"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Upload a logo to appear on receipts"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Logo"}),a.jsx("input",{type:"file",accept:"image/*",onChange:h,className:"input w-full"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]}),s>0&&s<100&&a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s}%`}})})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(tP,{className:"w-5 h-5 mr-2"}),"Design & Colors"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Header Color"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"color",value:n.headerColor,onChange:x=>u("headerColor",x.target.value),className:"w-12 h-10 rounded border border-gray-300"}),a.jsx("input",{type:"text",value:n.headerColor,onChange:x=>u("headerColor",x.target.value),className:"input flex-1"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Accent Color"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"color",value:n.accentColor,onChange:x=>u("accentColor",x.target.value),className:"w-12 h-10 rounded border border-gray-300"}),a.jsx("input",{type:"text",value:n.accentColor,onChange:x=>u("accentColor",x.target.value),className:"input flex-1"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Font Family"}),a.jsxs("select",{value:n.fontFamily,onChange:x=>u("fontFamily",x.target.value),className:"input w-full",children:[a.jsx("option",{value:"Inter, system-ui, sans-serif",children:"Inter"}),a.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),a.jsx("option",{value:"Helvetica, sans-serif",children:"Helvetica"}),a.jsx("option",{value:"Georgia, serif",children:"Georgia"}),a.jsx("option",{value:"Times New Roman, serif",children:"Times New Roman"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Font Size"}),a.jsxs("select",{value:n.fontSize,onChange:x=>u("fontSize",x.target.value),className:"input w-full",children:[a.jsx("option",{value:"12px",children:"12px"}),a.jsx("option",{value:"14px",children:"14px"}),a.jsx("option",{value:"16px",children:"16px"}),a.jsx("option",{value:"18px",children:"18px"})]})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(cP,{className:"w-5 h-5 mr-2"}),"Template & Layout"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Template Style"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["modern","classic","minimal"].map(x=>a.jsx("button",{onClick:()=>u("template",x),className:`p-3 rounded-lg border text-sm font-medium capitalize ${n.template===x?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-300":"border-gray-300 text-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:x},x))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Paper Size"}),a.jsxs("select",{value:n.paperSize,onChange:x=>u("paperSize",x.target.value),className:"input w-full",children:[a.jsx("option",{value:"80mm",children:"80mm (Thermal)"}),a.jsx("option",{value:"A4",children:"A4"}),a.jsx("option",{value:"letter",children:"Letter"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"showBarcode",checked:n.showBarcode,onChange:x=>u("showBarcode",x.target.checked),className:"mr-3"}),a.jsx("label",{htmlFor:"showBarcode",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show Barcode"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"showQrCode",checked:n.showQrCode,onChange:x=>u("showQrCode",x.target.checked),className:"mr-3"}),a.jsx("label",{htmlFor:"showQrCode",className:"text-sm text-gray-700 dark:text-gray-300",children:"Show QR Code"})]})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Footer Messages"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Footer Text (English)"}),a.jsx("textarea",{value:n.footerText,onChange:x=>u("footerText",x.target.value),className:"input w-full h-20 resize-none",placeholder:"Thank you for your business!"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Footer Text (Icelandic)"}),a.jsx("textarea",{value:n.footerTextIs,onChange:x=>u("footerTextIs",x.target.value),className:"input w-full h-20 resize-none",placeholder:"Takk fyrir viðskiptin!"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:m,disabled:c,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:c?a.jsxs(a.Fragment,{children:[a.jsx(Tt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]}),a.jsx("div",{className:"lg:sticky lg:top-6",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[a.jsx(Yt,{className:"w-5 h-5 mr-2"}),"Live Preview"]}),a.jsxs("button",{onClick:()=>l(!o),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[a.jsx(tp,{className:"w-4 h-4 mr-1"}),o?"Screen View":"Print View"]})]}),a.jsx("div",{className:`border rounded-lg p-4 ${o?"bg-gray-50":"bg-white"}`,children:a.jsx("div",{dangerouslySetInnerHTML:{__html:f()},className:o?"transform scale-75 origin-top-left":""})})]})})]})]})})},pd=se("smtpSettings/fetchSMTPSettings",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get("/smtp-settings")).data.settings}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch SMTP settings")}}),xd=se("smtpSettings/updateSMTPSettings",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.put("/smtp-settings",e)).data.settings}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to update SMTP settings")}}),yd=se("smtpSettings/testSMTPConnection",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.post("/smtp-settings/test",e)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"SMTP test failed")}}),iO={settings:null,isLoading:!1,error:null,testResult:null,isTesting:!1},GN=rr({name:"smtpSettings",initialState:iO,reducers:{clearError:e=>{e.error=null},clearTestResult:e=>{e.testResult=null},updateSettingsField:(e,t)=>{const{field:r,value:s}=t.payload;e.settings&&(e.settings[r]=s)}},extraReducers:e=>{e.addCase(pd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(pd.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(pd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(xd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(xd.fulfilled,(t,r)=>{t.isLoading=!1,t.settings=r.payload,t.error=null}).addCase(xd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(yd.pending,t=>{t.isTesting=!0,t.error=null,t.testResult=null}).addCase(yd.fulfilled,(t,r)=>{t.isTesting=!1,t.testResult={success:!0,message:r.payload.message,details:r.payload.details},t.error=null}).addCase(yd.rejected,(t,r)=>{t.isTesting=!1,t.testResult={success:!1,message:r.payload},t.error=r.payload})}}),{updateSettingsField:oO}=GN.actions,lO=GN.reducer,cO=()=>{de();const e=Ue(),{settings:t,isLoading:r,testResult:s,isTesting:n}=ne(f=>f.smtpSettings),[i,o]=j.useState({host:"",port:587,secure:!1,username:"",password:"",fromEmail:"",fromName:"Ölföng",fromNameIs:"Ölföng",isEnabled:!1}),[l,c]=j.useState(!1),[d,u]=j.useState(!1);j.useEffect(()=>{e(pd())},[e]),j.useEffect(()=>{t&&o({host:t.host||"",port:t.port||587,secure:t.secure||!1,username:t.username||"",password:"",fromEmail:t.fromEmail||"",fromName:t.fromName||"Ölföng",fromNameIs:t.fromNameIs||"Ölföng",isEnabled:t.isEnabled||!1})},[t]);const h=(f,x)=>{o(p=>({...p,[f]:x})),e(oO({field:f,value:x}))},m=async()=>{u(!0);try{await e(xd(i)).unwrap(),D.success("SMTP settings saved successfully!")}catch(f){D.error(f||"Failed to save settings")}finally{u(!1)}},g=async()=>{if(!i.host||!i.username||!i.password||!i.fromEmail){D.error("Please fill in all required fields before testing");return}try{await e(yd(i)).unwrap(),s!=null&&s.success&&D.success("SMTP test successful!")}catch(f){D.error(f||"SMTP test failed")}};return r&&!t?a.jsx(oe,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Tt,{className:"w-8 h-8 animate-spin text-blue-600"})})}):a.jsx(oe,{children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsxs("div",{className:"px-6 py-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Email Settings"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure SMTP settings for sending receipt emails"})]})}),s&&a.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center ${s.success?"bg-green-50 border border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300":"bg-red-50 border border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300"}`,children:[s.success?a.jsx(gt,{className:"w-5 h-5 mr-3 flex-shrink-0"}):a.jsx(mt,{className:"w-5 h-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:s.message}),s.details&&a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Host:"})," ",s.details.host]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Port:"})," ",s.details.port]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Secure:"})," ",s.details.secure?"Yes":"No"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Username:"})," ",s.details.username]}),a.jsxs("p",{children:[a.jsx("strong",{children:"From Email:"})," ",s.details.fromEmail]})]})]})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(aP,{className:"w-5 h-5 mr-2"}),"SMTP Configuration"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"SMTP Host *"}),a.jsx("input",{type:"text",value:i.host,onChange:f=>h("host",f.target.value),className:"input w-full",placeholder:"smtp.gmail.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Port *"}),a.jsx("input",{type:"number",value:i.port,onChange:f=>h("port",parseInt(f.target.value)),className:"input w-full",placeholder:"587",min:"1",max:"65535",required:!0})]})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"secure",checked:i.secure,onChange:f=>h("secure",f.target.checked),className:"mr-3"}),a.jsx("label",{htmlFor:"secure",className:"text-sm text-gray-700 dark:text-gray-300",children:"Use TLS/SSL (recommended for port 587/465)"})]})})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(fh,{className:"w-5 h-5 mr-2"}),"Authentication"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Username *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ur,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",value:i.username,onChange:f=>h("username",f.target.value),className:"input pl-10 w-full",placeholder:"your-email@gmail.com",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx(QE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:l?"text":"password",value:i.password,onChange:f=>h("password",f.target.value),className:"input pl-10 pr-10 w-full",placeholder:"Your app password",required:!0}),a.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?a.jsx(os,{className:"w-4 h-4"}):a.jsx(Yt,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For Gmail, use an App Password instead of your regular password"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(ms,{className:"w-5 h-5 mr-2"}),"Sender Information"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Email Address *"}),a.jsx("input",{type:"email",value:i.fromEmail,onChange:f=>h("fromEmail",f.target.value),className:"input w-full",placeholder:"noreply@olfong.is",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (English)"}),a.jsx("input",{type:"text",value:i.fromName,onChange:f=>h("fromName",f.target.value),className:"input w-full",placeholder:"Ölföng"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"From Name (Icelandic)"}),a.jsx("input",{type:"text",value:i.fromNameIs,onChange:f=>h("fromNameIs",f.target.value),className:"input w-full",placeholder:"Ölföng"})]})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"isEnabled",checked:i.isEnabled,onChange:f=>h("isEnabled",f.target.checked),className:"mr-3"}),a.jsx("label",{htmlFor:"isEnabled",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Enable email sending"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When enabled, receipt emails will be sent to customers"})]}),a.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{onClick:g,disabled:n||!i.host||!i.username||!i.password||!i.fromEmail,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Tt,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(ok,{className:"w-4 h-4 mr-2"}),"Test Connection"]})}),a.jsx("button",{onClick:m,disabled:d,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-6 rounded-lg transition-colors flex items-center",children:d?a.jsxs(a.Fragment,{children:[a.jsx(Tt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})]})]})}),a.jsxs("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-300 mb-3",children:"Common SMTP Settings"}),a.jsxs("div",{className:"space-y-3 text-sm text-blue-800 dark:text-blue-200",children:[a.jsxs("div",{children:[a.jsx("strong",{children:"Gmail:"}),a.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[a.jsx("li",{children:"• Host: smtp.gmail.com"}),a.jsx("li",{children:"• Port: 587 (TLS) or 465 (SSL)"}),a.jsx("li",{children:"• Username: your-email@gmail.com"}),a.jsx("li",{children:"• Password: Use App Password (not your regular password)"})]})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Outlook/Hotmail:"}),a.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[a.jsx("li",{children:"• Host: smtp-mail.outlook.com"}),a.jsx("li",{children:"• Port: 587"}),a.jsx("li",{children:"• Username: your-email@outlook.com"}),a.jsx("li",{children:"• Password: Your regular password"})]})]}),a.jsxs("div",{children:[a.jsx("strong",{children:"Yahoo:"}),a.jsxs("ul",{className:"ml-4 mt-1 space-y-1",children:[a.jsx("li",{children:"• Host: smtp.mail.yahoo.com"}),a.jsx("li",{children:"• Port: 587 or 465"}),a.jsx("li",{children:"• Username: your-email@yahoo.com"}),a.jsx("li",{children:"• Password: Use App Password"})]})]})]})]})]})})},dO=()=>{const{t:e,isLoading:t}=de(),r=Ue(),{banners:s,isLoading:n,error:i}=ne(S=>S.banners),{categories:o}=ne(S=>S.categories),{products:l}=ne(S=>S.products),[c,d]=j.useState(!1),[u,h]=j.useState(!1),[m,g]=j.useState(null),[f,x]=j.useState(!1),[p,b]=j.useState({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null});j.useEffect(()=>{r(po({includeInactive:!0})),r(sn()),r(gs())},[r]),j.useEffect(()=>{const S=R=>{f&&!R.target.closest(".link-dropdown-container")&&x(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[f]);const y=async S=>{S.preventDefault();try{m?await r(Jc({id:m.id,...p})):await r(Xc(p)),d(!1),g(null),b({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0})}catch(R){console.error("Error saving banner:",R)}},v=S=>{g(S),b({title:S.title||"",titleIs:S.titleIs||"",description:S.description||"",descriptionIs:S.descriptionIs||"",imageUrl:S.imageUrl||"",alt:S.alt||"",link:S.link||"",sortOrder:S.sortOrder||0,isFeatured:S.isFeatured||!1,featuredOrder:S.featuredOrder||null}),d(!0)},w=async S=>{window.confirm(e("admin.banners","confirmDelete"))&&await r(Zc(S))},k=async S=>{await r(ed(S))},P=async S=>{if(S.isFeatured)await r(bo(S.id));else{const F=s.filter(V=>V.isFeatured).map(V=>V.featuredOrder).filter(Boolean);let I=1;for(;F.includes(I);)I++;await r(yo({id:S.id,featuredOrder:I}))}},C=S=>{S&&S.url&&b({...p,imageUrl:S.url}),h(!1)},N=()=>{d(!1),g(null),b({title:"",titleIs:"",description:"",descriptionIs:"",imageUrl:"",alt:"",link:"",sortOrder:0,isFeatured:!1,featuredOrder:null})};return n||t?a.jsx(oe,{children:a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(Ae,{size:"large"})})}):a.jsxs(oe,{children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("admin.banners","title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("admin.banners","subtitle")})]}),a.jsxs("button",{onClick:()=>d(!0),className:"btn btn-primary flex items-center gap-2",children:[a.jsx(Ft,{className:"w-4 h-4"}),e("admin.banners","addBanner")]})]}),i&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsx("p",{className:"text-red-600 dark:text-red-400",children:i})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(S=>a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden",children:[a.jsxs("div",{className:"relative h-48 bg-gray-100 dark:bg-gray-700",children:[S.imageUrl?a.jsx("img",{src:S.imageUrl,alt:S.alt||"Banner",className:"w-full h-full object-cover"}):a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx(or,{className:"w-12 h-12 text-gray-400"})}),a.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[S.isFeatured&&a.jsxs("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",children:[e("admin.banners","featured")," #",S.featuredOrder]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-400"}`,children:S.isActive?e("common","active"):e("common","inactive")})]})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:S.titleIs||S.title||e("admin.banners","untitled")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:S.descriptionIs||S.description||e("admin.banners","noDescription")}),S.link&&a.jsxs("div",{className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 mb-3",children:[a.jsx(fg,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate",children:S.link})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>v(S),className:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",title:e("common","edit"),children:a.jsx(ws,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>P(S),className:`p-2 transition-colors ${S.isFeatured?"text-blue-600 dark:text-blue-400":"text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"}`,title:S.isFeatured?e("admin.banners","removeFromFeatured"):e("admin.banners","addToFeatured"),children:a.jsx(Yt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>k(S.id),className:`p-2 transition-colors ${S.isActive?"text-gray-400 hover:text-orange-600 dark:hover:text-orange-400":"text-gray-400 hover:text-green-600 dark:hover:text-green-400"}`,title:S.isActive?e("admin.banners","deactivate"):e("admin.banners","activate"),children:S.isActive?a.jsx(os,{className:"w-4 h-4"}):a.jsx(Yt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>w(S.id),className:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:e("common","delete"),children:a.jsx($t,{className:"w-4 h-4"})})]}),a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["#",S.sortOrder]})]})]})]},S.id))}),s.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(or,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("admin.banners","noBanners")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:e("admin.banners","noBannersDescription")}),a.jsx("button",{onClick:()=>d(!0),className:"btn btn-primary",children:e("admin.banners","addFirstBanner")})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:m?e("admin.banners","editBanner"):e("admin.banners","addBanner")}),a.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","titleEn")}),a.jsx("input",{type:"text",value:p.title,onChange:S=>b({...p,title:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners","titlePlaceholder")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","titleIs")}),a.jsx("input",{type:"text",value:p.titleIs,onChange:S=>b({...p,titleIs:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners","titlePlaceholderIs")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","descriptionEn")}),a.jsx("textarea",{value:p.description,onChange:S=>b({...p,description:S.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners","descriptionPlaceholder")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","descriptionIs")}),a.jsx("textarea",{value:p.descriptionIs,onChange:S=>b({...p,descriptionIs:S.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners","descriptionPlaceholderIs")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e("admin.banners","imageUrl")," *"]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:e("admin.banners","imageHelpText")}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"url",value:p.imageUrl,onChange:S=>b({...p,imageUrl:S.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders","enterImageUrl"),required:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>h(!0),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx(Ta,{className:"w-4 h-4"}),a.jsx("span",{children:e("adminMedia","select")})]}),a.jsxs("button",{type:"button",onClick:()=>window.open("/admin/media?collection=BANNERS","_blank"),className:"px-3 py-2 border border-blue-300 dark:border-blue-600 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors duration-200 flex items-center space-x-2",children:[a.jsx(or,{className:"w-4 h-4"}),a.jsx("span",{children:e("admin.banners","manageImages")})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","altText")}),a.jsx("input",{type:"text",value:p.alt,onChange:S=>b({...p,alt:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("admin.banners","altPlaceholder")})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"link-dropdown-container",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","link")}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"url",value:p.link,onChange:S=>b({...p,link:S.target.value}),className:"w-full px-3 py-2 pr-10 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:e("adminPlaceholders","enterWebsiteUrl")}),a.jsx("button",{type:"button",onClick:()=>x(!f),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",title:e("admin.banners","selectLink"),children:a.jsx(UE,{className:"w-4 h-4"})})]}),f&&a.jsxs("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[o.map(S=>a.jsxs("div",{children:[a.jsx("button",{type:"button",onClick:()=>{b({...p,link:`/products?category=${S.name.toUpperCase()}`}),x(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bm,{className:"w-4 h-4"}),a.jsxs("span",{children:[S.nameIs||S.name," (",e("admin.banners","category"),")"]})]})}),S.subcategories&&S.subcategories.map(R=>a.jsx("button",{type:"button",onClick:()=>{b({...p,link:`/products?category=${S.name.toUpperCase()}&subcategory=${R.name.toUpperCase()}`}),x(!1)},className:"w-full px-6 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bm,{className:"w-3 h-3"}),a.jsxs("span",{children:[R.nameIs||R.name," (",e("admin.banners","subcategory"),")"]})]})},R.id))]},S.id)),l.slice(0,20).map(S=>a.jsx("button",{type:"button",onClick:()=>{b({...p,link:`/products/${S.id}`}),x(!1)},className:"w-full px-3 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-600 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-600 last:border-b-0",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(bm,{className:"w-4 h-4"}),a.jsxs("span",{children:[S.nameIs||S.name," (",e("admin.banners","product"),")"]})]})},S.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","sortOrder")}),a.jsx("input",{type:"number",value:p.sortOrder,onChange:S=>b({...p,sortOrder:parseInt(S.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",min:"0"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",checked:p.isFeatured,onChange:S=>b({...p,isFeatured:S.target.checked}),className:"rounded border-gray-300 dark:border-gray-600 text-primary-600 focus:ring-primary-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e("admin.banners","featuredBanner")})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("admin.banners","featuredBannerHelp")})]}),p.isFeatured&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("admin.banners","featuredOrder")}),a.jsxs("select",{value:p.featuredOrder||"",onChange:S=>b({...p,featuredOrder:S.target.value?parseInt(S.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:e("admin.banners","selectPosition")}),a.jsxs("option",{value:"1",children:[e("admin.banners","position")," 1"]}),a.jsxs("option",{value:"2",children:[e("admin.banners","position")," 2"]}),a.jsxs("option",{value:"3",children:[e("admin.banners","position")," 3"]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:N,className:"btn btn-outline",children:e("common","cancel")}),a.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",children:[a.jsx(Kr,{className:"w-4 h-4"}),m?e("common","update"):e("common","create")]})]})]})]})})}),a.jsx(Fk,{isOpen:u,onClose:()=>h(!1),onSelect:C,collection:"BANNERS",multiple:!1})]})},bd=se("chat/fetchConversations",async(e={})=>{var r;const t=await Z.get("/chat/conversations",{params:e});return((r=t.data)==null?void 0:r.data)||t.data}),Vm=se("chat/fetchMessages",async e=>{var r;const t=await Z.get(`/chat/conversations/${e}/messages`);return((r=t.data)==null?void 0:r.data)||t.data}),vd=se("chat/sendMessage",async({conversationId:e,content:t,messageType:r="TEXT",metadata:s})=>(await Z.post(`/chat/conversations/${e}/messages`,{content:t,messageType:r,metadata:s})).data.data),uO=se("chat/createConversation",async e=>(await Z.post("/chat/conversations",e)).data.data),hO=se("chat/joinConversation",async e=>(await Z.post(`/chat/conversations/${e}/join`)).data.data),YN=se("chat/updateConversationStatus",async({conversationId:e,status:t,priority:r})=>(await Z.patch(`/chat/conversations/${e}`,{status:t,priority:r})).data.data),mO=se("chat/fetchUnreadCount",async()=>(await Z.get("/chat/unread-count")).data.unreadCount),QN=se("chat/markMessagesAsRead",async e=>(await Z.post(`/chat/conversations/${e}/messages/read`)).data),XN=rr({name:"chat",initialState:{conversations:[],currentConversation:null,messages:[],unreadCount:0,isLoading:!1,isTyping:!1,otherUserTyping:!1,error:null,isWidgetOpen:!1,isWidgetMinimized:!1,filters:{status:"ACTIVE",type:"",priority:""},pagination:{page:1,limit:20,total:0,pages:0}},reducers:{toggleWidget:e=>{e.isWidgetOpen=!e.isWidgetOpen,e.isWidgetOpen&&(e.isWidgetMinimized=!1)},minimizeWidget:e=>{e.isWidgetMinimized=!e.isWidgetMinimized},closeWidget:e=>{e.isWidgetOpen=!1,e.isWidgetMinimized=!1},setCurrentConversation:(e,t)=>{e.currentConversation=t.payload,e.messages=[]},addMessage:(e,t)=>{e.messages.push(t.payload)},updateMessage:(e,t)=>{const{messageId:r,updates:s}=t.payload,n=e.messages.findIndex(i=>i.id===r);n!==-1&&(e.messages[n]={...e.messages[n],...s})},markMessageAsRead:(e,t)=>{const r=t.payload,s=e.messages.find(n=>n.id===r);s&&(s.isRead=!0,s.readAt=new Date().toISOString())},markAllMessagesAsRead:(e,t)=>{const r=t.payload;e.messages.forEach(s=>{s.conversationId===r&&(s.isRead=!0,s.readAt=new Date().toISOString())})},setTyping:(e,t)=>{e.isTyping=t.payload},setOtherUserTyping:(e,t)=>{e.otherUserTyping=t.payload},handleNewMessage:(e,t)=>{var i;const{message:r,conversationId:s}=t.payload;((i=e.currentConversation)==null?void 0:i.id)===s&&e.messages.push(r);const n=e.conversations.findIndex(o=>o.id===s);n!==-1&&(e.conversations[n].lastMessageAt=r.createdAt,e.conversations[n].messages=[r]),r.senderId!==t.payload.currentUserId&&(e.unreadCount+=1)},handleConversationUpdate:(e,t)=>{var n;const r=t.payload,s=e.conversations.findIndex(i=>i.id===r.id);s!==-1&&(e.conversations[s]=r),((n=e.currentConversation)==null?void 0:n.id)===r.id&&(e.currentConversation=r)},handleUserTyping:(e,t)=>{const{userId:r,isTyping:s,currentUserId:n}=t.payload;r!==n&&(e.otherUserTyping=s)},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload},e.pagination.page=1},clearFilters:e=>{e.filters={status:"ACTIVE",type:"",priority:""},e.pagination.page=1},setPage:(e,t)=>{e.pagination.page=t.payload},clearError:e=>{e.error=null},resetChat:e=>{e.conversations=[],e.currentConversation=null,e.messages=[],e.unreadCount=0,e.isWidgetOpen=!1,e.isWidgetMinimized=!1,e.error=null}},extraReducers:e=>{e.addCase(bd.pending,t=>{t.isLoading=!0,t.error=null}).addCase(bd.fulfilled,(t,r)=>{t.isLoading=!1,t.conversations=r.payload.conversations,t.pagination=r.payload.pagination}).addCase(bd.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(Vm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Vm.fulfilled,(t,r)=>{t.isLoading=!1,t.messages=r.payload.messages}).addCase(Vm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.error.message}).addCase(vd.pending,t=>{t.error=null}).addCase(vd.fulfilled,(t,r)=>{t.messages.push(r.payload)}).addCase(vd.rejected,(t,r)=>{t.error=r.error.message}).addCase(uO.fulfilled,(t,r)=>{t.conversations.unshift(r.payload),t.currentConversation=r.payload,t.messages=[]}).addCase(hO.fulfilled,(t,r)=>{const s=r.payload,n=t.conversations.findIndex(i=>i.id===s.id);n!==-1&&(t.conversations[n]=s)}).addCase(YN.fulfilled,(t,r)=>{var i;const s=r.payload,n=t.conversations.findIndex(o=>o.id===s.id);n!==-1&&(t.conversations[n]=s),((i=t.currentConversation)==null?void 0:i.id)===s.id&&(t.currentConversation=s)}).addCase(mO.fulfilled,(t,r)=>{t.unreadCount=r.payload}).addCase(QN.fulfilled,(t,r)=>{t.unreadCount=Math.max(0,t.unreadCount-t.messages.filter(s=>!s.isRead).length)})}}),{setCurrentConversation:fO,handleNewMessage:uv}=XN.actions,gO=XN.reducer,pO=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:s})=>{const{t:n}=de();return a.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:n("adminChat","searchConversations"),value:e,onChange:i=>t(i.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsxs("select",{value:r,onChange:i=>s(i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"",children:n("adminChat","allStatuses")}),a.jsx("option",{value:"ACTIVE",children:n("adminChat","active")}),a.jsx("option",{value:"ARCHIVED",children:n("adminChat","archived")}),a.jsx("option",{value:"RESOLVED",children:n("adminChat","resolved")})]})})]})})},xO=({conversation:e,isSelected:t,onSelect:r})=>{var c,d,u;const s=h=>{switch(h){case"ACTIVE":return a.jsx(gt,{className:"h-4 w-4 text-green-500"});case"ARCHIVED":return a.jsx(mt,{className:"h-4 w-4 text-gray-500"});case"RESOLVED":return a.jsx(gt,{className:"h-4 w-4 text-blue-500"});default:return a.jsx(ks,{className:"h-4 w-4 text-gray-400"})}},n=(c=e.participants.find(h=>h.user.role==="CUSTOMER"))==null?void 0:c.user,i=(d=e.messages)==null?void 0:d[0],o=((u=e._count)==null?void 0:u.messages)||0,l=h=>{const m=new Date(h),f=(new Date-m)/(1e3*60*60);return f<1?"Just now":f<24?`${Math.floor(f)}h ago`:f<48?"Yesterday":m.toLocaleDateString()};return a.jsx("div",{onClick:r,className:`p-4 cursor-pointer border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${t?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700":""}`,children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:a.jsx(ur,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:(n==null?void 0:n.fullName)||(n==null?void 0:n.username)||"Unknown Customer"}),a.jsxs("div",{className:"flex items-center space-x-1",children:[s(e.status),o>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:o})]})]}),i&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate mt-1",children:i.content}),a.jsx("div",{className:"flex items-center justify-between mt-2",children:a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:l(i?i.createdAt:e.createdAt)})})]})]})})},yO=({isLoading:e,selectedConversation:t,onSelectConversation:r,filteredConversations:s})=>{const{t:n}=de();return e?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Ae,{size:"small"})}):s.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(di,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:n("adminChat","noConversations")})]}):a.jsx("div",{className:"space-y-1",children:s.map(i=>a.jsx(xO,{conversation:i,isSelected:(t==null?void 0:t.id)===i.id,onSelect:()=>r(i)},i.id))})},bO=({searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:s,conversations:n,isLoading:i,selectedConversation:o,onSelectConversation:l,filteredConversations:c})=>a.jsxs("div",{className:"w-full sm:w-1/3 lg:w-1/4 border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex flex-col h-full",children:[a.jsx(pO,{searchTerm:e,setSearchTerm:t,statusFilter:r,setStatusFilter:s}),a.jsx(yO,{conversations:n,isLoading:i,selectedConversation:o,onSelectConversation:l,filteredConversations:c})]}),vO=({conversation:e,otherUserTyping:t,onUpdateStatus:r})=>{var i,o;const{t:s}=de(),n=(i=e.participants.find(l=>l.user.role==="CUSTOMER"))==null?void 0:i.user;return a.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 rounded-t-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>window.history.back(),className:"sm:hidden p-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:a.jsx(Gs,{className:"h-5 w-5"})}),a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:a.jsx(ur,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:(n==null?void 0:n.fullName)||(n==null?void 0:n.username)||s("adminChat","unknownCustomer")}),((o=e.metadata)==null?void 0:o.orderNumber)&&a.jsx("div",{className:"mt-1",children:a.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:[a.jsx(ho,{className:"h-3 w-3 mr-1"}),s("order","orderNumber"),": ",e.metadata.orderNumber]})}),t&&a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:s("adminChat","customerTyping")})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsxs("select",{value:e.status,onChange:l=>r(e.id,l.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[a.jsx("option",{value:"ACTIVE",children:s("adminChat","active")}),a.jsx("option",{value:"ARCHIVED",children:s("adminChat","archived")}),a.jsx("option",{value:"RESOLVED",children:s("adminChat","resolved")})]})})]})})},wO=({message:e})=>{de();const{user:t}=ne(n=>n.auth),r=t&&e.senderId===t.id,s=n=>new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return a.jsx("div",{className:`flex ${r?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${r?"bg-blue-600 text-white":"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600"}`,children:[a.jsx("p",{className:"text-sm",children:e.content}),a.jsx("p",{className:`text-xs mt-1 ${r?"text-blue-100":"text-gray-500 dark:text-gray-400"}`,children:s(e.createdAt)})]})})},jO=({messages:e,isLoading:t})=>{const{t:r}=de(),s=j.useRef(null),n=()=>{var i;(i=s.current)==null||i.scrollIntoView({behavior:"smooth"})};return j.useEffect(()=>{n()},[e]),t?a.jsx("div",{className:"flex items-center justify-center h-32",children:a.jsx(Ae,{size:"small"})}):e.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(di,{className:"h-12 w-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r("adminChat","noMessages")})]}):a.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900",children:a.jsxs("div",{className:"space-y-4",children:[e.map(i=>a.jsx(wO,{message:i},i.id)),a.jsx("div",{ref:s})]})})},kO=({newMessage:e,onSendMessage:t,onTyping:r,onKeyPress:s,isLoading:n,currentConversation:i})=>{const{t:o}=de();return a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4 bg-white dark:bg-gray-800",children:a.jsxs("div",{className:"flex items-end space-x-2",children:[a.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:a.jsx(rP,{className:"h-5 w-5"})}),a.jsx("div",{className:"flex-1",children:a.jsx("textarea",{value:e,onChange:r,onKeyPress:s,placeholder:i?o("chat","typeMessage"):o("chat","initializing"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",rows:1,disabled:n})}),a.jsx("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:a.jsx(iP,{className:"h-5 w-5"})}),a.jsx("button",{onClick:t,disabled:!e.trim()||!i||n,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:a.jsx(rp,{className:"h-5 w-5"})})]})})},NO=({conversation:e})=>{var r;const{t}=de();return(r=e.metadata)!=null&&r.orderId?a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-blue-50 dark:bg-blue-900/20 p-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(ho,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),a.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t("adminChat","orderDetails")})]}),a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("p",{children:[a.jsxs("strong",{children:[t("order","orderNumber"),":"]})," ",e.metadata.orderNumber]}),a.jsxs("p",{children:[a.jsxs("strong",{children:[t("chat.topics","topic"),":"]})," ",e.metadata.topic]}),e.metadata.customTopic&&a.jsxs("p",{children:[a.jsxs("strong",{children:[t("chat","customTopic"),":"]})," ",e.metadata.customTopic]})]})]}):null},SO=()=>{const{t:e}=de();return a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(di,{className:"h-16 w-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:e("adminChat","selectConversation")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat","selectConversationMessage")})]})})},CO=({currentConversation:e,messages:t,newMessage:r,setNewMessage:s,isLoading:n,otherUserTyping:i,onSendMessage:o,onTyping:l,onKeyPress:c,onUpdateStatus:d})=>(de(),e?a.jsxs("div",{className:"flex-1 flex flex-col bg-white dark:bg-gray-800 h-full rounded-r-lg",children:[a.jsx(vO,{conversation:e,otherUserTyping:i,onUpdateStatus:d}),a.jsx(NO,{conversation:e}),a.jsx(jO,{messages:t,isLoading:n}),a.jsx(kO,{newMessage:r,setNewMessage:s,onSendMessage:o,onTyping:l,onKeyPress:c,isLoading:n,currentConversation:e})]}):a.jsx(SO,{})),hv=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(C=>C.auth),{conversations:s,currentConversation:n,messages:i,isLoading:o,otherUserTyping:l}=ne(C=>C.chat),[c,d]=j.useState(""),[u,h]=j.useState("ACTIVE"),[m,g]=j.useState(""),[f,x]=j.useState(null),p=j.useRef(null);j.useEffect(()=>{if(r&&!["ADMIN","DELIVERY"].includes(r.role)){_e.error(e("adminChat","accessDeniedMessage"));return}},[r,e]),j.useEffect(()=>{r&&["ADMIN","DELIVERY"].includes(r.role)&&t(bd())},[t,r]),j.useEffect(()=>{if(!r)return;const C=S=>{t(uv({message:S,currentUserId:r.id}))},N=S=>{t(uv({message:{...S,isRead:!0,readAt:S.readAt},currentUserId:r.id}))};return Le.on("new-message",C),Le.on("message-read",N),()=>{Le.removeListener("new-message",C),Le.removeListener("message-read",N)}},[t,r]);const b=s.filter(C=>{var R;const N=!c||C.participants.some(F=>{var I,V;return((I=F.user.fullName)==null?void 0:I.toLowerCase().includes(c.toLowerCase()))||((V=F.user.username)==null?void 0:V.toLowerCase().includes(c.toLowerCase()))})||((R=C.messages)==null?void 0:R.some(F=>F.content.toLowerCase().includes(c.toLowerCase()))),S=!u||C.status===u;return N&&S}),y=async C=>{x(C),await t(fO(C)).unwrap();try{await t(QN(C.id)).unwrap()}catch(N){console.warn("Failed to mark messages as read:",N)}},v=async()=>{if(!(!m.trim()||!n))try{await t(vd({conversationId:n.id,content:m.trim(),messageType:"TEXT"})).unwrap(),g(""),n&&Le.emitTypingStop(n.id,r.id)}catch{_e.error(e("adminChat","sendMessageError"))}},w=C=>{g(C.target.value),n&&Le.emitTypingStart(n.id,r.id),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{n&&Le.emitTypingStop(n.id,r.id)},1e3)},k=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),v())},P=async(C,N)=>{try{await t(YN({conversationId:C,status:N})).unwrap(),_e.success(e("adminChat","statusUpdated"))}catch{_e.error(e("adminChat","updateStatusError"))}};return!r||!["ADMIN","DELIVERY"].includes(r.role)?a.jsx(oe,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:e("adminChat","accessDenied")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminChat","accessDeniedMessage")})]})})}):a.jsx(oe,{children:a.jsxs("div",{className:"h-[calc(100vh-2rem)] flex flex-col mt-0",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-sm border border-gray-200 dark:border-gray-700 rounded-t-lg",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-4",children:a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminChat","title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:e("adminChat","subtitle")})]})})})}),a.jsx("div",{className:"flex-1 flex flex-col h-[calc(100vh-2rem)] bg-white dark:bg-gray-800 border-l border-r border-b border-gray-200 dark:border-gray-700 rounded-b-lg",children:a.jsxs("div",{className:"flex flex-1 overflow-hidden h-full",children:[a.jsx(bO,{searchTerm:c,setSearchTerm:d,statusFilter:u,setStatusFilter:h,conversations:s,isLoading:o,selectedConversation:f,onSelectConversation:y,filteredConversations:b}),a.jsx(CO,{currentConversation:n,messages:i,newMessage:m,setNewMessage:g,isLoading:o,otherUserTyping:l,onSendMessage:v,onTyping:w,onKeyPress:k,onUpdateStatus:P})]})})]})})},_O=()=>{const{t:e}=de(),[t,r]=j.useState(!1),[s,n]=j.useState(null),i=async()=>{r(!0),n("insert");try{const d=await(await fetch("/api/admin/demo-data/insert",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d.success?_e.success(e("demoData","insertSuccess")):_e.error(d.message||e("demoData","insertError"))}catch(c){console.error("Error inserting demo data:",c),_e.error(e("demoData","insertError"))}finally{r(!1),n(null)}},o=async()=>{r(!0),n("remove");try{const d=await(await fetch("/api/admin/demo-data/remove",{method:"DELETE",headers:{"Content-Type":"application/json"}})).json();d.success?_e.success(e("demoData","removeSuccess")):_e.error(d.message||e("demoData","removeError"))}catch(c){console.error("Error removing demo data:",c),_e.error(e("demoData","removeError"))}finally{r(!1),n(null)}},l=[{type:"customers",count:5,description:e("demoData","customersDescription"),details:["Anna Johnson (anna.johnson@example.com)","Björn Andersson (bjorn.andersson@example.com)","Kristín Petersen (kristin.petersen@example.com)","Magnús Þorsteinsson (magnus.thorsteinsson@example.com)","Sara Guðmundsdóttir (sara.gudmundsdottir@example.com)"]},{type:"addresses",count:5,description:e("demoData","addressesDescription"),details:["Reykjavík addresses for each customer","Default shipping addresses","Various locations around Reykjavík"]},{type:"orders",count:8,description:e("demoData","ordersDescription"),details:["Various order statuses (PENDING, CONFIRMED, PREPARING, etc.)","Different shipping methods (delivery & pickup)","Mixed product types (wine, beer, nicotine, food)","Realistic order amounts and dates"]},{type:"orderItems",count:15,description:e("demoData","orderItemsDescription"),details:["Multiple items per order","Various quantities and prices","Links orders to products correctly"]}];return a.jsx(oe,{children:a.jsxs("div",{className:"max-w-none",children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 mb-6",children:a.jsx("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("demoData","title")}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 mt-2",children:e("demoData","description")})]})})})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData","overview")}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:l.map(c=>a.jsxs("div",{className:"bg-white dark:bg-gray-700 rounded-xl border border-gray-200 dark:border-gray-600 shadow-sm hover:shadow-lg transition-all duration-300 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize",children:e("demoData.${item","type}")}),a.jsx("span",{className:"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-base font-medium px-3 py-1 rounded-lg",children:c.count})]}),a.jsx("p",{className:"text-base text-gray-600 dark:text-gray-400 mb-4",children:c.description}),a.jsx("ul",{className:"text-sm text-gray-500 dark:text-gray-500 space-y-2",children:c.details.map((d,u)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-blue-500 mt-1",children:"•"}),d]},u))})]},c.type))})]})}),a.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Fs,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-yellow-800 dark:text-yellow-200",children:e("demoData","warningTitle")}),a.jsx("p",{className:"text-base text-yellow-700 dark:text-yellow-300 mt-2",children:e("demoData","warningMessage")})]})]})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16 py-6",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-6",children:e("demoData","actions")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[a.jsxs("button",{onClick:i,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&s==="insert"?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):a.jsx(tu,{className:"h-5 w-5"}),e("demoData","insertButton")]}),a.jsxs("button",{onClick:o,disabled:t,className:"flex-1 flex items-center justify-center gap-3 px-6 py-4 bg-red-600 hover:bg-red-700 disabled:bg-red-400 text-white rounded-xl transition-colors text-lg font-medium",children:[t&&s==="remove"?a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):a.jsx($t,{className:"h-5 w-5"}),e("demoData","removeButton")]})]}),a.jsxs("div",{className:"mt-6 text-base text-gray-600 dark:text-gray-400",children:[a.jsxs("p",{className:"flex items-center gap-3 mb-3",children:[a.jsx(gt,{className:"h-5 w-5 text-green-500"}),e("demoData","insertNote")]}),a.jsxs("p",{className:"flex items-center gap-3",children:[a.jsx(ph,{className:"h-5 w-5 text-red-500"}),e("demoData","removeNote")]})]})]})})]})})};function EO(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}EO(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Pp=e=>typeof e=="number"&&!isNaN(e),ml=e=>typeof e=="string",JN=e=>typeof e=="function",PO=e=>ml(e)||Pp(e),TO=e=>j.isValidElement(e)||ml(e)||JN(e)||Pp(e),IO=1,ZN=()=>`${IO++}`,xs=new Map,Tg=[],mv=new Set,e2=()=>xs.size>0,RO=(e,{containerId:t})=>{var r;return(r=xs.get(t||1))==null?void 0:r.toasts.get(e)};function AO(e,t){var r;if(t)return!!((r=xs.get(t))!=null&&r.isToastActive(e));let s=!1;return xs.forEach(n=>{n.isToastActive(e)&&(s=!0)}),s}function OO(e){if(!e2()){Tg=Tg.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||PO(e))xs.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=xs.get(e.containerId);t?t.removeToast(e.id):xs.forEach(r=>{r.removeToast(e.id)})}}var LO=(e={})=>{xs.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function MO(e,t){TO(e)&&(e2()||Tg.push({content:e,options:t}),xs.forEach(r=>{r.buildToast(e,t)}))}function t2(e,t){xs.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function DO(e){return mv.add(e),()=>{mv.delete(e)}}function FO(e){return e&&(ml(e.toastId)||Pp(e.toastId))?e.toastId:ZN()}function El(e,t){return MO(e,t),t.toastId}function Sh(e,t){return{...t,type:t&&t.type||e,toastId:FO(t)}}function Ch(e){return(t,r)=>El(t,Sh(e,r))}function Ce(e,t){return El(e,Sh("default",t))}Ce.loading=(e,t)=>El(e,Sh("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function $O(e,{pending:t,error:r,success:s},n){let i;t&&(i=ml(t)?Ce.loading(t,n):Ce.loading(t.render,{...n,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(d,u,h)=>{if(u==null){Ce.dismiss(i);return}let m={type:d,...o,...n,data:h},g=ml(u)?{render:u}:u;return i?Ce.update(i,{...m,...g}):Ce(g.render,{...m,...g}),h},c=JN(e)?e():e;return c.then(d=>l("success",s,d)).catch(d=>l("error",r,d)),c}Ce.promise=$O;Ce.success=Ch("success");Ce.info=Ch("info");Ce.error=Ch("error");Ce.warning=Ch("warning");Ce.warn=Ce.warning;Ce.dark=(e,t)=>El(e,Sh("default",{theme:"dark",...t}));function zO(e){OO(e)}Ce.dismiss=zO;Ce.clearWaitingQueue=LO;Ce.isActive=AO;Ce.update=(e,t={})=>{let r=RO(e,t);if(r){let{props:s,content:n}=r,i={delay:100,...s,...t,toastId:t.toastId||e,updateId:ZN()};i.toastId!==e&&(i.staleId=e);let o=i.render||n;delete i.render,El(o,i)}};Ce.done=e=>{Ce.update(e,{progress:1})};Ce.onChange=DO;Ce.play=e=>t2(!0,e);Ce.pause=e=>t2(!1,e);const Ht="http://localhost:5000/api";class BO{getAuthHeaders(){const t=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:t?`Bearer ${t}`:""}}async getAllTranslations(t=null,r=null){var s;try{if(console.log("TranslationService: getAllTranslations called with language:",t),t){const c=`${Ht}/translations/language/${t}`;console.log("TranslationService: Making request to:",c);const d=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("TranslationService: Response status:",d.status),console.log("TranslationService: Response ok:",d.ok),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);const u=await d.json();return console.log("TranslationService: Response data received, success:",u.success),console.log("TranslationService: Response data length:",(s=u.data)==null?void 0:s.length),u}const n=new URLSearchParams;r&&n.append("format",r);const i=`${Ht}/translations${n.toString()?`?${n.toString()}`:""}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(n){throw console.error("Error fetching translations:",n),n}}async getTranslationsBySection(t=null){try{const r=new URLSearchParams;t&&r.append("language",t),r.append("format","grouped");const s=`${Ht}/translations?${r.toString()}`,n=await fetch(s,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(r){throw console.error("Error fetching translations by section:",r),r}}async searchTranslations(t,r=null,s=null){try{const n=new URLSearchParams;r&&n.append("language",r),s&&n.append("section",s);const i=`${Ht}/translations/search/${encodeURIComponent(t)}?${n.toString()}`,o=await fetch(i,{method:"GET",headers:this.getAuthHeaders()});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);return await o.json()}catch(n){throw console.error("Error searching translations:",n),n}}async getTranslationStats(){try{const t=`${Ht}/translations/stats`,r=await fetch(t,{method:"GET",headers:this.getAuthHeaders()});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(t){throw console.error("Error fetching translation stats:",t),t}}async getRecentChanges(t=10){try{const r=`${Ht}/translations/recent?limit=${t}`,s=await fetch(r,{method:"GET",headers:this.getAuthHeaders()});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(r){throw console.error("Error fetching recent changes:",r),r}}async getTranslation(t,r){try{const s=`${Ht}/translations/${encodeURIComponent(t)}/${r}`,n=await fetch(s,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok){if(n.status===404)return null;throw new Error(`HTTP error! status: ${n.status}`)}return await n.json()}catch(s){throw console.error("Error fetching translation:",s),s}}async createTranslation(t){try{const r=`${Ht}/translations`,s=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(r){throw console.error("Error creating translation:",r),r}}async updateTranslation(t,r){try{const s=`${Ht}/translations/${t}`,n=await fetch(s,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(r)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(s){throw console.error("Error updating translation:",s),s}}async deleteTranslation(t){try{const r=`${Ht}/translations/${t}`,s=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders()});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(r){throw console.error("Error deleting translation:",r),r}}async bulkUpdateTranslations(t){try{const r=`${Ht}/translations/bulk-update`,s=await fetch(r,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({updates:t})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(r){throw console.error("Error bulk updating translations:",r),r}}async bulkDeleteTranslations(t){try{const r=`${Ht}/translations/bulk-delete`,s=await fetch(r,{method:"DELETE",headers:this.getAuthHeaders(),body:JSON.stringify({ids:t})});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return await s.json()}catch(r){throw console.error("Error bulk deleting translations:",r),r}}async exportTranslations(t="json",r=null){try{const s=new URLSearchParams;s.append("format",t),r&&s.append("language",r);const n=`${Ht}/translations/export?${s.toString()}`,i=await fetch(n,{method:"GET",headers:this.getAuthHeaders()});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const o=await i.blob(),l=window.URL.createObjectURL(o),c=document.createElement("a");return c.href=l,c.download=`translations_${r||"all"}_${new Date().toISOString().split("T")[0]}.${t}`,document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l),{success:!0,message:"Export completed successfully"}}catch(s){throw console.error("Error exporting translations:",s),s}}async importTranslations(t,r="json"){try{const s=`${Ht}/translations/import`,n=await fetch(s,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({data:t,format:r})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(s){throw console.error("Error importing translations:",s),s}}async loadTranslationsForI18next(t){try{const r=await this.getAllTranslations(t);if(r.success&&r.data){const s=this.transformToNestedObject(r.data);return localStorage.setItem(`translations_${t}`,JSON.stringify(s)),localStorage.setItem(`translations_${t}_timestamp`,Date.now().toString()),s}return console.warn("No translations found in API response"),{}}catch(r){return console.error("Failed to load translations from API:",r),{}}}transformToNestedObject(t){const r={};return t.forEach(s=>{const n=s.key.split(".");let i=r;for(let o=0;o<n.length-1;o++)(!i[n[o]]||typeof i[n[o]]!="object")&&(i[n[o]]={}),i=i[n[o]];i[n[n.length-1]]=s.value}),r}isCacheValid(t,r=24*60*60*1e3){try{const s=localStorage.getItem(`translations_${t}_timestamp`);return s?Date.now()-parseInt(s)<r:!1}catch{return!1}}getCachedTranslations(t){try{const r=localStorage.getItem(`translations_${t}`);return r?JSON.parse(r):null}catch(r){return console.error("Error getting cached translations:",r),null}}clearCache(t=null){try{t?(localStorage.removeItem(`translations_${t}`),localStorage.removeItem(`translations_${t}_timestamp`)):Object.keys(localStorage).forEach(r=>{r.startsWith("translations_")&&localStorage.removeItem(r)})}catch(r){console.error("Error clearing cache:",r)}}async refreshTranslations(t,r){try{this.clearCache(t);const s=await this.loadTranslationsForI18next(t);return r&&s&&(r.addResourceBundle(t,"translation",s,!0,!0),r.reloadResources(t)),s}catch(s){throw console.error("Error refreshing translations:",s),s}}}const pc=new BO,UO=({translation:e,onClose:t,onSave:r})=>{const{t:s}=Ut(),[n,i]=j.useState({key:"",value:""}),[o,l]=j.useState(!1),[c,d]=j.useState({});j.useEffect(()=>{i(e?{key:e.key||"",value:e.value||""}:{key:"",value:""})},[e]);const u=()=>{const g={};return n.key.trim()||(g.key=s("adminTranslations.validation.keyRequired")),n.value.trim()||(g.value=s("adminTranslations.validation.valueRequired")),d(g),Object.keys(g).length===0},h=async g=>{if(g.preventDefault(),!!u()){l(!0);try{await r(n),t()}catch(f){console.error("Error saving translation:",f),Ce.error(f.message||s("adminTranslations.errorSaving"))}finally{l(!1)}}},m=(g,f)=>{i(x=>({...x,[g]:f})),c[g]&&d(x=>({...x,[g]:""}))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:s(e?"adminTranslations.editTranslation":"adminTranslations.addTranslation")}),a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(Fe,{className:"h-6 w-6"})})]}),a.jsxs("form",{onSubmit:h,className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s("adminTranslations.key")," *"]}),a.jsx("input",{type:"text",value:n.key,onChange:g=>m("key",g.target.value),disabled:!!e,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white ${c.key?"border-red-500":"border-gray-300 dark:border-gray-600"} ${e?"bg-gray-100 dark:bg-gray-600":""}`,placeholder:"e.g., common.loading"}),c.key&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.key})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[s("adminTranslations.value")," *"]}),a.jsx("textarea",{value:n.value,onChange:g=>m("value",g.target.value),rows:4,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white ${c.value?"border-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter the translation text..."}),c.value&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:c.value})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:s("adminTranslations.cancel")}),a.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),a.jsx("span",{children:s("common.saving")})]}):a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"h-4 w-4"}),a.jsx("span",{children:s("adminTranslations.save")})]})})]})]})]})})},VO=()=>{const{t:e}=Ut(),[t,r]=j.useState([]),[s,n]=j.useState(!0),[i,o]=j.useState(null),[l,c]=j.useState(!1),[d,u]=j.useState(null),[h,m]=j.useState(""),[g,f]=j.useState(1),x=10,p=j.useCallback(async()=>{n(!0),o(null);try{const N=await pc.getAllTranslations();N.success?r(N.data):(o(N.error),Ce.error(e("adminTranslations.errorFetching")))}catch(N){o(N.message),Ce.error(e("adminTranslations.errorFetching"))}finally{n(!1)}},[e]);j.useEffect(()=>{p()},[p]);const b=j.useMemo(()=>{let N=t;return h&&(N=N.filter(S=>S.key.toLowerCase().includes(h.toLowerCase())||S.value.toLowerCase().includes(h.toLowerCase()))),N},[t,h]),y=j.useMemo(()=>{const N=(g-1)*x;return b.slice(N,N+x)},[b,g,x]),v=Math.ceil(b.length/x),w=()=>{u(null),c(!0)},k=N=>{u(N),c(!0)},P=async N=>{if(window.confirm(e("adminTranslations.confirmDelete")))try{await pc.deleteTranslation(N),Ce.success(e("adminTranslations.translationDeleted")),p()}catch{Ce.error(e("adminTranslations.errorDeleting"))}},C=async N=>{try{d?(await pc.updateTranslation(d.id,N.value),Ce.success(e("adminTranslations.translationUpdated"))):(await pc.createTranslation(N.key,N.value),Ce.success(e("adminTranslations.translationAdded"))),c(!1),p()}catch(S){Ce.error(S.message||e("adminTranslations.errorSaving"))}};return s?a.jsx(oe,{children:a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx(lt,{className:"w-8 h-8 animate-spin text-blue-500"}),a.jsx("span",{className:"ml-3 text-lg",children:e("adminTranslations.loading")})]})}):i?a.jsx(oe,{children:a.jsxs("div",{className:"text-center p-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-600",children:e("adminTranslations.error")}),a.jsx("p",{className:"text-gray-600",children:i}),a.jsx("button",{onClick:p,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:e("adminTranslations.retry")})]})}):a.jsxs(oe,{children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("adminTranslations.title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("adminTranslations.subtitle")})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:e("adminTranslations.refresh")})]}),a.jsxs("button",{onClick:w,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[a.jsx(Ft,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:e("adminTranslations.addTranslation")})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg p-6 mb-6",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 space-y-3 md:space-y-0",children:a.jsxs("div",{className:"relative w-full md:w-1/3",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:e("adminTranslations.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",value:h,onChange:N=>m(N.target.value)})]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:e("adminTranslations.key")}),a.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:[e("adminTranslations.value")," (is)"]}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:e("adminTranslations.actions")})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:y.length>0?y.map(N=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:N.key}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:N.value}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[a.jsx("button",{onClick:()=>k(N),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-3",children:e("common.edit")}),a.jsx("button",{onClick:()=>P(N.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:e("common.delete")})]})]},N.id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:e("adminTranslations.noTranslationsFound")})})})]})}),v>1&&a.jsxs("nav",{className:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-gray-700 sm:px-6","aria-label":"Pagination",children:[a.jsx("div",{className:"hidden sm:block",children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-400",children:[e("common.showing")," ",a.jsx("span",{className:"font-medium",children:(g-1)*x+1})," ",e("common.to")," ",a.jsx("span",{className:"font-medium",children:Math.min(g*x,b.length)})," ",e("common.of")," ",a.jsx("span",{className:"font-medium",children:b.length})," ",e("common.results")]})}),a.jsxs("div",{className:"flex-1 flex justify-between sm:justify-end",children:[a.jsx("button",{onClick:()=>f(N=>Math.max(N-1,1)),disabled:g===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:e("common.previous")}),a.jsx("button",{onClick:()=>f(N=>Math.min(N+1,v)),disabled:g===v,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:e("common.next")})]})]})]}),l&&a.jsx(UO,{isOpen:l,onClose:()=>c(!1),onSave:C,translation:d})]})},HO=({media:e,selectedItems:t,onSelectItem:r,onEdit:s,onDelete:n,formatFileSize:i,formatDate:o})=>{const{t:l}=Ut(),[c,d]=j.useState(new Set),u=m=>t.includes(m.id),h=m=>{d(g=>{const f=new Set(g);return f.delete(m),f})};return a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(m=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-lg transition-shadow",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-700 flex items-center justify-center relative",children:m.mimeType.startsWith("image/")?a.jsxs(a.Fragment,{children:[c.has(m.id)&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200 dark:bg-gray-600",children:a.jsx(nl,{className:"w-6 h-6 animate-spin text-gray-400"})}),a.jsx("img",{src:m.thumbnailUrl||m.url,alt:m.alt||m.originalName,className:`w-full h-full object-cover transition-opacity duration-300 ${c.has(m.id)?"opacity-0":"opacity-100"}`,loading:"lazy",onLoad:()=>h(m.id),onError:()=>h(m.id)})]}):a.jsxs("div",{className:"text-center text-gray-400",children:[a.jsx(or,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("span",{className:"text-xs",children:m.mimeType.split("/")[1].toUpperCase()})]})}),a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("input",{type:"checkbox",checked:u(m),onChange:g=>{g.target.checked?r(m.id,!0):r(m.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),a.jsxs("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[a.jsx("button",{onClick:()=>s(m),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-gray-50 dark:hover:bg-gray-600",title:l("adminMedia","edit"),children:a.jsx(ws,{className:"h-3 w-3"})}),a.jsx("button",{onClick:()=>n(m.id),className:"p-1 bg-white dark:bg-gray-700 rounded shadow hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600",title:l("adminMedia","delete"),children:a.jsx($t,{className:"h-3 w-3"})})]})]}),a.jsxs("div",{className:"p-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white truncate mb-1",children:m.originalName}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(m.size)}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o(m.createdAt)})]})]},m.id))})},WO=({media:e,selectedItems:t,onSelectItem:r,onEdit:s,onDelete:n,formatFileSize:i,formatDate:o})=>{const{t:l}=Ut(),c=d=>t.includes(d.id);return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a.jsx("input",{type:"checkbox",checked:t.length===e.length&&e.length>0,onChange:d=>{d.target.checked?r(e.map(u=>u.id),!0):r([],!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:l("adminMedia","preview")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:l("adminMedia","name")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:l("adminMedia","type")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:l("adminMedia","size")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:l("adminMedia","uploaded")}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:l("adminMedia","actions")})]})}),a.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(d=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("input",{type:"checkbox",checked:c(d),onChange:u=>{u.target.checked?r(d.id,!0):r(d.id,!1)},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded flex items-center justify-center",children:d.mimeType.startsWith("image/")?a.jsx("img",{src:d.thumbnailUrl||d.url,alt:d.alt||d.originalName,className:"w-full h-full object-cover rounded",loading:"lazy"}):a.jsx(or,{className:"w-6 h-6 text-gray-400"})})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d.originalName}),d.alt&&a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.alt})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.mimeType}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:i(d.size)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:o(d.createdAt)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>s(d),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:a.jsx(ws,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>n(d.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:a.jsx($t,{className:"h-4 w-4"})})]})})]},d.id))})]})})})},qO=({searchQuery:e,onSearchChange:t,viewMode:r,onViewModeChange:s,selectedItems:n,onBulkDelete:i,collections:o,selectedCollection:l,onCollectionChange:c,onUploadClick:d})=>{const{t:u}=Ut();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(h=>a.jsxs("button",{onClick:()=>c(h.id),className:`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors ${l===h.id?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[a.jsx("span",{className:"mr-2",children:h.icon}),h.name]},h.id))})}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[a.jsx("div",{className:"flex-1 max-w-md",children:a.jsxs("div",{className:"relative",children:[a.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:u("adminMedia","searchMedia"),value:e,onChange:h=>t(h.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>s("grid"),className:`p-2 rounded-md ${r==="grid"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:a.jsx(mh,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>s("list"),className:`p-2 rounded-md ${r==="list"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"}`,children:a.jsx(gh,{className:"h-4 w-4"})}),n.length>0&&a.jsxs("button",{onClick:i,className:"inline-flex items-center px-3 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[a.jsx("span",{className:"mr-2",children:"🗑️"}),u("adminMedia","deleteSelected")," (",n.length,")"]}),a.jsxs("button",{onClick:d,className:"inline-flex items-center px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[a.jsx(Ta,{className:"h-4 w-4 mr-2"}),u("adminMedia","upload")]})]})]})})]})},KO=({isOpen:e,onClose:t,media:r,onSave:s})=>{const{t:n}=Ut(),[i,o]=j.useState({alt:"",caption:"",description:""}),[l,c]=j.useState(!1);j.useEffect(()=>{r&&e&&o({alt:r.alt||"",caption:r.caption||"",description:r.description||""})},[r,e]);const d=async h=>{if(h.preventDefault(),!!r){c(!0);try{const m=await fetch(`/api/media/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(i)});if(m.ok){const g=await m.json();s(g.data.media),t(),D.success("Media updated successfully")}else throw new Error("Failed to update media")}catch(m){console.error("Update media error:",m),D.error("Failed to update media")}finally{c(!1)}}},u=(h,m)=>{o(g=>({...g,[h]:m}))};return!e||!r?null:a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n("adminMedia","editMedia")}),a.jsx("button",{type:"button",onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(Fe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:r.mimeType.startsWith("image/")?a.jsx("img",{src:r.thumbnailUrl||r.url,alt:r.alt||r.originalName,className:"w-full h-full object-cover rounded-lg"}):a.jsx("div",{className:"text-center text-gray-400",children:a.jsx("span",{className:"text-sm",children:r.mimeType.split("/")[1].toUpperCase()})})})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r.originalName}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[r.mimeType," • ",GO(r.size)]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n("adminMedia","altText")}),a.jsx("input",{type:"text",value:i.alt,onChange:h=>u("alt",h.target.value),placeholder:n("adminMedia","altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n("adminMedia","altTextDescription")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n("adminMedia","caption")}),a.jsx("input",{type:"text",value:i.caption,onChange:h=>u("caption",h.target.value),placeholder:n("adminMedia","captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n("adminMedia","captionDescription")})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:n("adminMedia","description")}),a.jsx("textarea",{value:i.description,onChange:h=>u("description",h.target.value),placeholder:n("adminMedia","descriptionPlaceholder"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:n("adminMedia","descriptionDescription")})]})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700",children:n("adminMedia","cancel")}),a.jsx("button",{type:"submit",disabled:l,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?a.jsxs(a.Fragment,{children:[a.jsx(nl,{className:"h-4 w-4 mr-2 animate-spin"}),n("adminMedia","saving")]}):a.jsxs(a.Fragment,{children:[a.jsx(Kr,{className:"h-4 w-4 mr-2"}),n("adminMedia","save")]})})]})]})})})},GO=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+r[s]},YO=()=>{const{t:e}=de(),{user:t}=ne(_=>_.auth),[r,s]=j.useState(!0),[n,i]=j.useState([]),[o,l]=j.useState("PRODUCTS"),[c,d]=j.useState("grid"),[u,h]=j.useState(""),[m,g]=j.useState([]),[,f]=j.useState(!1),[x,p]=j.useState(!1),[b,y]=j.useState(null),v=(_,E)=>{Array.isArray(_)?g(_):g(E?O=>[...O,_]:O=>O.filter(q=>q!==_))},w=_=>{l(_),S(E=>({...E,page:1})),g([])},k=_=>{h(_)},P=_=>{d(_)},C=()=>{window.open("/admin/media/upload","_blank")},[N,S]=j.useState({page:1,limit:20,total:0,pages:0}),R=[{id:"PRODUCTS",name:e("adminMedia","products"),icon:"🛍️"},{id:"CATEGORIES",name:e("adminMedia","categories"),icon:"📁"},{id:"BANNERS",name:e("adminMedia","banners"),icon:"📢"},{id:"PROFILE",name:e("adminMedia","profile"),icon:"👤"},{id:"DOCUMENTS",name:e("adminMedia","documents"),icon:"📄"},{id:"VIDEOS",name:e("adminMedia","videos"),icon:"🎥"}];j.useEffect(()=>{F()},[F]);const F=j.useCallback(async()=>{s(!0);try{const _=new URLSearchParams({collection:o,page:N.page,limit:N.limit,...u&&{search:u}}),E=await fetch(`/api/media?${_}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(E.ok){const O=await E.json();i(O.data.media),S(O.data.pagination)}else throw new Error("Failed to load media")}catch(_){console.error("Load media error:",_),D.error("Failed to load media")}finally{s(!1)}},[o,N.page,N.limit,u]),I=async _=>{if(window.confirm(e("adminMedia","confirmDelete")))try{if((await fetch(`/api/media/${_}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)i(O=>O.filter(q=>q.id!==_)),D.success("Media deleted successfully");else throw new Error("Failed to delete media")}catch(E){console.error("Delete media error:",E),D.error("Failed to delete media")}},V=async()=>{if(m.length!==0&&window.confirm(e("adminMedia","confirmBulkDelete",{count:m.length})))try{const _=await fetch("/api/media/bulk-delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({ids:m})});if(_.ok){const E=await _.json();D.success(`Deleted ${E.data.deletedCount} of ${m.length} items`),g([]),F()}else throw new Error("Failed to bulk delete media")}catch(_){console.error("Bulk delete error:",_),D.error("Failed to bulk delete media")}},G=_=>{y(_),p(!0)},z=_=>{if(_===0)return"0 Bytes";const E=1024,O=["Bytes","KB","MB","GB"],q=Math.floor(Math.log(_)/Math.log(E));return parseFloat((_/Math.pow(E,q)).toFixed(2))+" "+O[q]},M=_=>new Date(_).toLocaleDateString();return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx(Fs,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels","accessDenied")}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):a.jsx(oe,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminNavigation","media")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminMedia","manageMediaDescription")})]}),a.jsx("div",{className:"flex gap-2",children:a.jsxs("button",{onClick:()=>window.open("/admin/media/upload","_blank"),className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:[a.jsx(Ta,{className:"h-4 w-4 mr-2"}),e("adminMedia","uploadMedia")]})})]}),a.jsx(qO,{searchQuery:u,onSearchChange:k,viewMode:c,onViewModeChange:P,selectedItems:m,onBulkDelete:V,collections:R.map(_=>({..._,name:_.name,...o===_.id&&{count:N.total}})),selectedCollection:o,onCollectionChange:w,onUploadClick:C}),r?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(Ae,{size:"large"})}):n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(or,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia","noMediaFound")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia","noMediaDescription")}),a.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(Ft,{className:"h-4 w-4 mr-2"}),e("adminMedia","uploadFirstMedia")]})]}):a.jsxs(a.Fragment,{children:[c==="grid"?a.jsx(HO,{media:n,selectedItems:m,onSelectItem:v,onEdit:G,onDelete:I,formatFileSize:z,formatDate:M}):a.jsx(WO,{media:n,selectedItems:m,onSelectItem:v,onEdit:G,onDelete:I,formatFileSize:z,formatDate:M}),N.pages>1&&a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e("adminMedia","showing")," ",(N.page-1)*N.limit+1," ",e("adminMedia","to")," ",Math.min(N.page*N.limit,N.total)," ",e("adminMedia","of")," ",N.total," ",e("adminMedia","results")]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>S(_=>({..._,page:_.page-1})),disabled:N.page===1,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia","previous")}),a.jsxs("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:[N.page," / ",N.pages]}),a.jsx("button",{onClick:()=>S(_=>({..._,page:_.page+1})),disabled:N.page===N.pages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:border-gray-600 dark:hover:bg-gray-700",children:e("adminMedia","next")})]})]})]}),a.jsx(KO,{isOpen:x,onClose:()=>{p(!1),y(null)},media:b,onSave:_=>{i(E=>E.map(O=>O.id===_.id?_:O)),p(!1),y(null)}})]})})},QO=()=>{const{t:e}=de(),{user:t}=ne(M=>M.auth),[r,s]=j.useState("PRODUCTS"),[n,i]=j.useState([]),[o,l]=j.useState(!1),[c,d]=j.useState({}),[u,h]=j.useState({}),[m,g]=j.useState({}),[f,x]=j.useState({}),[p,b]=j.useState({}),y=[{id:"PRODUCTS",name:e("adminMedia","products"),icon:"🛍️",accept:"image/*"},{id:"CATEGORIES",name:e("adminMedia","categories"),icon:"📁",accept:"image/*"},{id:"BANNERS",name:e("adminMedia","banners"),icon:"📢",accept:"image/*"},{id:"PROFILE",name:e("adminMedia","profile"),icon:"👤",accept:"image/*"},{id:"DOCUMENTS",name:e("adminMedia","documents"),icon:"📄",accept:".pdf,.doc,.docx"},{id:"VIDEOS",name:e("adminMedia","videos"),icon:"🎥",accept:"video/*"}],v=y.find(M=>M.id===r),w=j.useCallback(M=>{const _=Array.from(M.target.files),E=[],O=[];_.forEach(q=>{const ae=I(r);if(q.size>ae){O.push(`${q.name}: File too large (max ${G(ae)})`);return}if(!V(q,r)){O.push(`${q.name}: Invalid file type`);return}E.push(q)}),O.length>0&&D.error(O.join(`
`)),E.length>0&&(i(q=>[...q,...E]),E.forEach(q=>{if(q.type.startsWith("image/")){const ae=new FileReader;ae.onload=U=>{b(re=>({...re,[q.name+q.size]:U.target.result}))},ae.readAsDataURL(q)}}))},[r]),k=j.useCallback(M=>{M.preventDefault();const _=Array.from(M.dataTransfer.files);w({target:{files:_}})},[w]),P=j.useCallback(M=>{M.preventDefault()},[]),C=M=>{const _=n[M],E=_.name+_.size;i(O=>O.filter((q,ae)=>ae!==M)),b(O=>{const q={...O};return delete q[E],q}),h(O=>{const q={...O};return delete q[M],q}),g(O=>{const q={...O};return delete q[M],q}),x(O=>{const q={...O};return delete q[M],q})},N=(M,_)=>{h(E=>({...E,[M]:_}))},S=(M,_)=>{g(E=>({...E,[M]:_}))},R=(M,_)=>{x(E=>({...E,[M]:_}))},F=async()=>{if(n.length===0){D.error("Please select files to upload");return}l(!0);const M=[];for(let O=0;O<n.length;O++){const q=n[O],ae=new FormData;ae.append("file",q),ae.append("collection",r),u[O]&&ae.append("alt",u[O]),m[O]&&ae.append("caption",m[O]),f[O]&&ae.append("description",f[O]);try{d(re=>({...re,[O]:0}));const U=await fetch("/api/media/upload",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},body:ae});if(U.ok){const re=await U.json();M.push({success:!0,data:re.data}),d(fe=>({...fe,[O]:100}))}else{const re=await U.json();M.push({success:!1,error:re.message||"Upload failed"})}}catch(U){console.error("Upload error:",U),M.push({success:!1,error:U.message})}}l(!1),d({});const _=M.filter(O=>O.success).length,E=M.filter(O=>!O.success).length;_>0&&(D.success(`Successfully uploaded ${_} file(s)`),i([]),h({}),g({}),x({})),E>0&&D.error(`Failed to upload ${E} file(s)`)},I=M=>({PRODUCTS:5242880,CATEGORIES:2097152,BANNERS:10485760,PROFILE:2097152,DOCUMENTS:10485760,VIDEOS:52428800})[M]||5*1024*1024,V=(M,_)=>{var O;return((O={PRODUCTS:["image/jpeg","image/png","image/webp","image/gif"],CATEGORIES:["image/jpeg","image/png","image/webp"],BANNERS:["image/jpeg","image/png","image/webp"],PROFILE:["image/jpeg","image/png","image/webp"],DOCUMENTS:["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],VIDEOS:["video/mp4","video/webm","video/avi"]}[_])==null?void 0:O.includes(M.type))||!1},G=M=>{if(M===0)return"0 Bytes";const _=1024,E=["Bytes","KB","MB","GB"],O=Math.floor(Math.log(M)/Math.log(_));return parseFloat((M/Math.pow(_,O)).toFixed(2))+" "+E[O]},z=M=>{if(M.type.startsWith("image/")){const _=M.name+M.size;return p[_]?a.jsx("img",{src:p[_],alt:M.name,className:"w-16 h-16 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}):a.jsx(or,{className:"w-8 h-8 text-blue-500"})}return M.type.startsWith("video/")?a.jsx(dP,{className:"w-8 h-8 text-red-500"}):a.jsx(HE,{className:"w-8 h-8 text-gray-500"})};return(t==null?void 0:t.role)!=="ADMIN"?a.jsx(oe,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-8 bg-white shadow-lg rounded-lg border border-gray-200",children:[a.jsx(Fs,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-red-600 mb-4",children:e("adminLabels","accessDenied")}),a.jsx("p",{className:"text-gray-700",children:"You do not have permission to view this page."})]})})}):a.jsx(oe,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("adminMedia","uploadMedia")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("adminMedia","uploadMediaDescription")})]})}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:e("adminMedia","selectCollection")}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:y.map(M=>a.jsxs("button",{onClick:()=>s(M.id),className:`p-4 rounded-lg border-2 transition-colors ${r===M.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[a.jsx("div",{className:"text-2xl mb-2",children:M.icon}),a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.name}),a.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Max: ",G(I(M.id))]})]},M.id))})]}),a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:a.jsxs("div",{onDrop:k,onDragOver:P,className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center hover:border-blue-400 dark:hover:border-blue-500 transition-colors",children:[a.jsx(Ta,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:e("adminMedia","dragDropFiles")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:e("adminMedia","orClickToSelect")}),a.jsx("input",{type:"file",multiple:!0,accept:v==null?void 0:v.accept,onChange:w,className:"hidden",id:"file-upload"}),a.jsxs("label",{htmlFor:"file-upload",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer",children:[a.jsx(Ft,{className:"h-4 w-4 mr-2"}),e("adminMedia","selectFiles")]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e("adminMedia","supportedFormats"),": ",v==null?void 0:v.accept]})]})}),n.length>0&&a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:[e("adminMedia","selectedFiles")," (",n.length,")"]}),a.jsx("div",{className:"space-y-4",children:n.map((M,_)=>a.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[z(M),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white",children:M.name}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:G(M.size)}),c[_]!==void 0&&a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[c[_]<100?a.jsx(nl,{className:"w-4 h-4 animate-spin text-blue-500"}):a.jsx(gt,{className:"w-4 h-4 text-green-500"}),a.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[c[_],"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c[_]}%`}})})]})]})]}),a.jsx("button",{onClick:()=>C(_),className:"text-gray-400 hover:text-red-600 dark:hover:text-red-400",disabled:o,children:a.jsx(Fe,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia","altText")}),a.jsx("input",{type:"text",value:u[_]||"",onChange:E=>N(_,E.target.value),placeholder:e("adminMedia","altTextPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia","caption")}),a.jsx("input",{type:"text",value:m[_]||"",onChange:E=>S(_,E.target.value),placeholder:e("adminMedia","captionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("adminMedia","description")}),a.jsx("input",{type:"text",value:f[_]||"",onChange:E=>R(_,E.target.value),placeholder:e("adminMedia","descriptionPlaceholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:o})]})]})]},_))}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("button",{onClick:F,disabled:o||n.length===0,className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?a.jsxs(a.Fragment,{children:[a.jsx(nl,{className:"h-4 w-4 mr-2 animate-spin"}),e("adminMedia","uploading")]}):a.jsxs(a.Fragment,{children:[a.jsx(Ta,{className:"h-4 w-4 mr-2"}),e("adminMedia","uploadFiles")," (",n.length,")"]})})})]}),a.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Fs,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[a.jsx("p",{className:"font-medium mb-1",children:e("adminMedia","uploadGuidelines")}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsxs("li",{children:[e("adminMedia","maxFileSize"),": ",G(I(r))]}),a.jsxs("li",{children:[e("adminMedia","supportedFormats"),": ",v==null?void 0:v.accept]}),a.jsx("li",{children:e("adminMedia","automaticOptimization")}),a.jsx("li",{children:e("adminMedia","altTextRecommendation")})]})]})]})})]})})},XO=()=>{const{t:e}=de(),t=Ue(),{user:r}=ne(S=>S.auth),{orders:s,isLoading:n}=ne(S=>S.orders),[i,o]=j.useState([]),[l,c]=j.useState(!1),[d,u]=j.useState(null),[h,m]=j.useState(null),[g,f]=j.useState(!1),[x,p]=j.useState("");j.useEffect(()=>{(r==null?void 0:r.role)==="DELIVERY"&&t(uo({deliveryPersonId:r.id}))},[t,r]),j.useEffect(()=>{if(s){const S=s.filter(R=>{var F;return((F=R.deliveryPerson)==null?void 0:F.id)===(r==null?void 0:r.id)&&["CONFIRMED","PREPARING","OUT_FOR_DELIVERY"].includes(R.status)});o(S)}},[s,r]),j.useEffect(()=>{let S;return l&&navigator.geolocation&&(S=navigator.geolocation.watchPosition(R=>{const F={lat:R.coords.latitude,lng:R.coords.longitude,timestamp:new Date().toISOString()};u(F)},R=>{console.error("Error getting location:",R),D.error(e("navigation","language")==="is"?"Villa við að fá staðsetningu":"Error getting location")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e4})),()=>{S&&navigator.geolocation.clearWatch(S)}},[l,t,r,e]);const b=S=>{switch(S){case"CONFIRMED":return a.jsx(we,{className:"w-5 h-5 text-blue-600"});case"PREPARING":return a.jsx(we,{className:"w-5 h-5 text-purple-600"});case"OUT_FOR_DELIVERY":return a.jsx(lr,{className:"w-5 h-5 text-orange-600"});case"DELIVERED":return a.jsx(gt,{className:"w-5 h-5 text-green-600"});default:return a.jsx(we,{className:"w-5 h-5 text-gray-600"})}},y=S=>e("orders.statuses","${status}"),v=S=>{switch(S){case"CONFIRMED":return"bg-blue-100 text-blue-800";case"PREPARING":return"bg-purple-100 text-purple-800";case"OUT_FOR_DELIVERY":return"bg-orange-100 text-orange-800";case"DELIVERED":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},w=async()=>{try{await t(co({orderId:h.id,status:x})).unwrap(),D.success(e("navigation","language")==="is"?"Staða uppfært!":"Status updated!"),f(!1),m(null),p("")}catch(S){D.error(S.message||(e("navigation","language")==="is"?"Villa kom upp":"An error occurred"))}},k=()=>{c(!l),l?D.info(e("navigation","language")==="is"?"Staðsetning stöðvuð":"Location tracking stopped"):D.success(e("navigation","language")==="is"?"Staðsetning byrjað":"Location tracking started")},P=S=>{m(S),p("OUT_FOR_DELIVERY"),f(!0)},C=S=>{m(S),p("DELIVERED"),f(!0)},N=[{value:"CONFIRMED",label:e("navigation","language")==="is"?"Staðfest":"Confirmed"},{value:"PREPARING",label:e("navigation","language")==="is"?"Undirbúningur":"Preparing"},{value:"OUT_FOR_DELIVERY",label:e("navigation","language")==="is"?"Í afhendingu":"Out for Delivery"},{value:"DELIVERED",label:e("navigation","language")==="is"?"Afhent":"Delivered"}];return(r==null?void 0:r.role)!=="DELIVERY"?a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:e("delivery","title")}),a.jsxs("div",{className:"card p-8",children:[a.jsx(mt,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:e("navigation","language")==="is"?"Aðgangur bannaður":"Access Denied"}),a.jsx("p",{className:"text-gray-600",children:e("navigation","language")==="is"?"Þú hefur ekki leyfi til að skoða þessa síðu.":"You do not have permission to view this page."})]})]})})}):n?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})}):a.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 py-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:e("delivery","title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:e("navigation","language")==="is"?"Velkomin, "+((r==null?void 0:r.fullName)||(r==null?void 0:r.username))+". Stjórnaðu afhendingum þínum.":"Welcome, "+((r==null?void 0:r.fullName)||(r==null?void 0:r.username))+". Manage your deliveries."})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${l?"bg-green-500 animate-pulse":"bg-gray-400"}`}),a.jsx("span",{className:"text-sm text-gray-600",children:l?e("navigation","language")==="is"?"Staðsetning virk":"Location active":e("navigation","language")==="is"?"Staðsetning óvirk":"Location inactive"})]}),a.jsxs("button",{onClick:k,className:`btn ${l?"btn-outline":"btn-primary"} flex items-center space-x-2`,children:[l?a.jsx(sP,{className:"w-4 h-4"}):a.jsx(tu,{className:"w-4 h-4"}),a.jsx("span",{children:l?e("navigation","language")==="is"?"Stöðva":"Stop":e("navigation","language")==="is"?"Byrja":"Start"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(we,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:e("navigation","language")==="is"?"Úthlutaðar pantanir":"Assigned Orders"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:a.jsx(lr,{className:"w-6 h-6 text-orange-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:e("navigation","language")==="is"?"Í afhendingu":"In Delivery"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(S=>S.status==="OUT_FOR_DELIVERY").length})]})]})}),a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(gt,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:e("navigation","language")==="is"?"Afhent í dag":"Delivered Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(S=>S.status==="DELIVERED"&&new Date(S.updatedAt).toDateString()===new Date().toDateString()).length})]})]})}),a.jsx("div",{className:"card p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:a.jsx(ks,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:e("navigation","language")==="is"?"Bíður afhendingar":"Pending Delivery"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.filter(S=>["CONFIRMED","PREPARING"].includes(S.status)).length})]})]})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e("navigation","language")==="is"?"Úthlutaðar pantanir":"Assigned Orders"}),i.length===0?a.jsxs("div",{className:"card p-8 text-center",children:[a.jsx(lr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e("navigation","language")==="is"?"Engar pantanir úthlutaðar":"No orders assigned"}),a.jsx("p",{className:"text-gray-600",children:e("navigation","language")==="is"?"Engar pantanir hafa verið úthlutaðar þér ennþá.":"No orders have been assigned to you yet."})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(S=>{var R,F,I;return a.jsxs("div",{className:"card p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[e("navigation","language")==="is"?"Pöntun":"Order"," #",S.orderNumber]}),a.jsx("p",{className:"text-sm text-gray-600",children:new Date(S.createdAt).toLocaleDateString()})]}),a.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ${v(S.status)}`,children:[b(S.status),a.jsx("span",{children:y(S.status)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx(ur,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"font-medium text-gray-900",children:((R=S.user)==null?void 0:R.fullName)||((F=S.user)==null?void 0:F.username)})]}),((I=S.user)==null?void 0:I.phone)&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(mn,{className:"w-4 h-4 text-gray-400"}),a.jsx("a",{href:`tel:${S.user.phone}`,className:"text-primary-600 hover:text-primary-700",children:S.user.phone})]})]}),S.deliveryMethod==="DELIVERY"&&S.address&&a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-start space-x-2",children:[a.jsx(vs,{className:"w-4 h-4 text-gray-400 mt-1"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Afhendingarstaður"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[S.address.street,a.jsx("br",{}),S.address.city,", ",S.address.postalCode]})]})]})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e("navigation","language")==="is"?"Vörur:":"Items:"}),a.jsxs("div",{className:"space-y-1",children:[S.items.slice(0,3).map((V,G)=>a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[V.quantity,"x ",V.product.nameIs||V.product.name]}),a.jsxs("span",{className:"font-medium",children:[(V.price*V.quantity).toLocaleString()," ",e("common","currency")]})]},G)),S.items.length>3&&a.jsxs("p",{className:"text-xs text-gray-500",children:["+",S.items.length-3," ",e("navigation","language")==="is"?"fleiri":"more"]})]})]}),a.jsx("div",{className:"border-t pt-4 mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-medium text-gray-900",children:e("navigation","language")==="is"?"Samtals:":"Total:"}),a.jsxs("span",{className:"text-lg font-bold text-primary-600",children:[S.totalAmount.toLocaleString()," ",e("common","currency")]})]})}),a.jsxs("div",{className:"flex space-x-2",children:[S.status==="CONFIRMED"&&a.jsxs("button",{onClick:()=>P(S),className:"btn btn-primary flex-1 flex items-center justify-center space-x-2",children:[a.jsx(tu,{className:"w-4 h-4"}),a.jsx("span",{children:e("navigation","language")==="is"?"Byrja afhendingu":"Start Delivery"})]}),S.status==="OUT_FOR_DELIVERY"&&a.jsxs("button",{onClick:()=>C(S),className:"btn btn-success flex-1 flex items-center justify-center space-x-2",children:[a.jsx(gt,{className:"w-4 h-4"}),a.jsx("span",{children:e("navigation","language")==="is"?"Ljúka afhendingu":"Complete Delivery"})]}),a.jsx("button",{onClick:()=>{m(S),p(S.status),f(!0)},className:"btn btn-outline",children:e("navigation","language")==="is"?"Breyta":"Update"})]})]},S.id)})})]}),g&&h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:[e("navigation","language")==="is"?"Uppfæra pöntun":"Update Order"," #",h.orderNumber]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("navigation","language")==="is"?"Ný staða":"New Status"}),a.jsx("select",{value:x,onChange:S=>p(S.target.value),className:"input w-full",children:N.map(S=>a.jsx("option",{value:S.value,children:S.label},S.value))})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:()=>{f(!1),m(null),p("")},className:"btn btn-outline flex-1",children:e("navigation","language")==="is"?"Hætta við":"Cancel"}),a.jsx("button",{onClick:w,className:"btn btn-primary flex-1",children:e("navigation","language")==="is"?"Uppfæra":"Update"})]})]})})]})})};function JO(){const{currentLanguage:e}=Ut(),t=Ue(),r=tr(),{isAuthenticated:s,user:n,isLoading:i}=ne(l=>l.auth),o=r.pathname.startsWith("/admin")||r.pathname.startsWith("/delivery");return j.useEffect(()=>{(()=>{document.title="Ölföng - Vín og Bjórverslun"})()},[]),j.useEffect(()=>{localStorage.getItem("token")&&!s&&t($c())},[t,s]),j.useEffect(()=>{if(s&&n)try{Le.connect(),n.role==="ADMIN"?Le.joinAdminRoom():n.role==="DELIVERY"&&Le.joinDeliveryRoom(n.id)}catch(l){console.warn("Socket connection failed, continuing without real-time features:",l)}return()=>{Le.isSocketConnected()&&Le.disconnect()}},[s,n]),j.useEffect(()=>{if(s){const l=c=>{t(OE(c))};return Le.onOrderStatusUpdate(l),()=>{Le.removeListener("order-status-update",l)}}},[s,t]),i?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(Ae,{size:"large"})}):a.jsx(ij,{children:a.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[a.jsx(gP,{}),a.jsx("main",{className:"flex-1 pt-16 pb-16 md:pb-0",children:a.jsxs(x3,{children:[a.jsx(pe,{path:"/",element:a.jsx(AP,{})}),a.jsx(pe,{path:"/products",element:a.jsx(UP,{})}),a.jsx(pe,{path:"/products/:id",element:a.jsx(pT,{})}),a.jsx(pe,{path:"/login",element:a.jsx(ST,{})}),a.jsx(pe,{path:"/admin-login",element:a.jsx(_T,{})}),a.jsx(pe,{path:"/auth/callback",element:a.jsx(CT,{})}),a.jsxs(pe,{element:a.jsx(jm,{}),children:[a.jsx(pe,{path:"/cart",element:a.jsx(vT,{})}),a.jsx(pe,{path:"/orders",element:a.jsx(el,{to:"/profile",replace:!0})}),a.jsx(pe,{path:"/orders/:id",element:a.jsx(wT,{})}),a.jsx(pe,{path:"/profile",element:a.jsx(jT,{})})]}),a.jsxs(pe,{element:a.jsx(jm,{requiredRole:"ADMIN"}),children:[a.jsx(pe,{path:"/admin",element:a.jsx(LT,{})}),a.jsx(pe,{path:"/admin/products",element:a.jsx($T,{})}),a.jsx(pe,{path:"/admin/categories",element:a.jsx(zT,{})}),a.jsx(pe,{path:"/admin/orders",element:a.jsx(x7,{})}),a.jsx(pe,{path:"/admin/pos",element:a.jsx(y7,{})}),a.jsx(pe,{path:"/admin/customers",element:a.jsx(UA,{})}),a.jsx(pe,{path:"/admin/chat",element:a.jsx(hv,{})}),a.jsx(pe,{path:"/admin/analytics",element:a.jsx(BA,{})}),a.jsx(pe,{path:"/admin/reports",element:a.jsx(KA,{})}),a.jsx(pe,{path:"/admin/notifications",element:a.jsx(GA,{})}),a.jsx(pe,{path:"/admin/media",element:a.jsx(YO,{})}),a.jsx(pe,{path:"/admin/media/upload",element:a.jsx(QO,{})}),a.jsx(pe,{path:"/admin/banners",element:a.jsx(dO,{})}),a.jsx(pe,{path:"/admin/demo-data",element:a.jsx(_O,{})}),a.jsx(pe,{path:"/admin/translations",element:a.jsx(VO,{})}),a.jsx(pe,{path:"/admin/settings",element:a.jsx(YA,{})}),a.jsx(pe,{path:"/admin/settings/general",element:a.jsx(QA,{})}),a.jsx(pe,{path:"/admin/settings/business",element:a.jsx(XA,{})}),a.jsx(pe,{path:"/admin/settings/shipping",element:a.jsx(JA,{})}),a.jsx(pe,{path:"/admin/settings/vat",element:a.jsx(ZA,{})}),a.jsx(pe,{path:"/admin/settings/api-keys",element:a.jsx(eO,{})}),a.jsx(pe,{path:"/admin/settings/payment-gateways",element:a.jsx(aO,{})}),a.jsx(pe,{path:"/admin/settings/receipts",element:a.jsx(nO,{})}),a.jsx(pe,{path:"/admin/settings/smtp",element:a.jsx(cO,{})})]}),a.jsxs(pe,{element:a.jsx(jm,{requiredRole:"DELIVERY"}),children:[a.jsx(pe,{path:"/delivery",element:a.jsx(XO,{})}),a.jsx(pe,{path:"/admin/chat",element:a.jsx(hv,{})})]}),a.jsx(pe,{path:"*",element:a.jsx(el,{to:"/",replace:!0})})]})}),!o&&a.jsx(pP,{}),!o&&a.jsx(xP,{}),a.jsx(jP,{})]})})}const Hm=se("subscriptions/fetchUserSubscriptions",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await Z.get(`/subscriptions/my-subscriptions?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch subscriptions")}}),Wm=se("subscriptions/fetchSubscription",async(e,{rejectWithValue:t})=>{var r,s;try{return(await Z.get(`/subscriptions/${e}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch subscription")}}),qm=se("subscriptions/createSubscription",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{const o=await Z.post("/subscriptions",e);return D.success("Áskrift stofnuð"),o.data}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að stofna áskrift"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create subscription")}}),Km=se("subscriptions/updateSubscription",async({id:e,subscriptionData:t},{rejectWithValue:r})=>{var s,n,i,o;try{const l=await Z.put(`/subscriptions/${e}`,t);return D.success("Áskrift uppfærð"),l.data}catch(l){return D.error(((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Mistókst að uppfæra áskrift"),r(((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to update subscription")}}),Gm=se("subscriptions/deleteSubscription",async(e,{rejectWithValue:t})=>{var r,s,n,i;try{return await Z.delete(`/subscriptions/${e}`),D.success("Áskrift hætt við"),e}catch(o){return D.error(((s=(r=o.response)==null?void 0:r.data)==null?void 0:s.message)||"Mistókst að hætta við áskrift"),t(((i=(n=o.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to cancel subscription")}}),Ym=se("subscriptions/fetchAllSubscriptions",async(e={},{rejectWithValue:t})=>{var r,s;try{const n=new URLSearchParams;return e.status&&n.append("status",e.status),e.page&&n.append("page",e.page),e.limit&&n.append("limit",e.limit),(await Z.get(`/subscriptions?${n.toString()}`)).data}catch(n){return t(((s=(r=n.response)==null?void 0:r.data)==null?void 0:s.message)||"Failed to fetch subscriptions")}}),ZO={subscriptions:[],currentSubscription:null,pagination:{page:1,limit:10,total:0,pages:0},filters:{status:""},isLoading:!1,error:null},eL=rr({name:"subscriptions",initialState:ZO,reducers:{setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},clearFilters:e=>{e.filters={status:""}},clearCurrentSubscription:e=>{e.currentSubscription=null},clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Hm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Hm.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(Hm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Wm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Wm.fulfilled,(t,r)=>{t.isLoading=!1,t.currentSubscription=r.payload,t.error=null}).addCase(Wm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(qm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(qm.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions.unshift(r.payload),t.error=null}).addCase(qm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Km.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Km.fulfilled,(t,r)=>{t.isLoading=!1;const s=t.subscriptions.findIndex(n=>n.id===r.payload.id);s!==-1&&(t.subscriptions[s]=r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload.id&&(t.currentSubscription=r.payload),t.error=null}).addCase(Km.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Gm.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Gm.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=t.subscriptions.filter(s=>s.id!==r.payload),t.currentSubscription&&t.currentSubscription.id===r.payload&&(t.currentSubscription=null),t.error=null}).addCase(Gm.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload}).addCase(Ym.pending,t=>{t.isLoading=!0,t.error=null}).addCase(Ym.fulfilled,(t,r)=>{t.isLoading=!1,t.subscriptions=r.payload.subscriptions,t.pagination=r.payload.pagination,t.error=null}).addCase(Ym.rejected,(t,r)=>{t.isLoading=!1,t.error=r.payload})}}),tL=eL.reducer,$s=Y5({reducer:{auth:TE,products:mP,categories:CP,cart:fT,orders:LE,addresses:bT,subscriptions:tL,dashboard:TT,banners:PP,chat:gO,analytics:zA,reports:qA,receiptSettings:VT,smtpSettings:lO},middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST"]}})});console.log("Store created:",$s);console.log("Store state:",$s.getState());typeof window<"u"&&(window.store=$s);console.log("Store in main.jsx:",$s);console.log("Store state in main:",$s==null?void 0:$s.getState());typeof window<"u"&&(window.store=$s);Qm.createRoot(document.getElementById("root")).render(a.jsx(We.StrictMode,{children:a.jsx(w6,{store:$s,children:a.jsxs(S3,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[a.jsx(ij,{children:a.jsx(JO,{})}),a.jsx(x5,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"}}})]})})}));
